<nz-select nzOptionHeightPx="22"
           [nzCustomTemplate]="valueTemplate"
           [compareWith]="compareItems"
           [formlyAttributes]="field" [formControl]="formControl">
  <nz-option *ngFor="let item of field.templateOptions.options"
             [nzValue]="item.value"
             [nzCustomContent]="true"
             [nzLabel]="item.label">
    {{item.label}} <i
    (click)="$event.stopPropagation()"
    [cpWidth]="'200px'"
    [cpPosition]="'auto'" [cpUseRootViewContainer]="true"
    (colorPickerChange)="updateValue($event)" [colorPicker]="item.value.value"
    class="icon-arrow-right"></i>
  </nz-option>
</nz-select>
<ng-template #valueTemplate let-item>
  <div class="d-flex align-items-center">
    <div class="color-holder"
         (click)="$event.stopPropagation(); $event.preventDefault(); "
         [cpWidth]="'200px'"
         [cpPosition]="'auto'" [cpUseRootViewContainer]="true"
         (colorPickerChange)="updateValue($event)" [colorPicker]="item.nzValue.value"
         [style.backgroundColor]="item.nzValue.value"></div>
    {{item.nzLabel}}
  </div>
</ng-template>
