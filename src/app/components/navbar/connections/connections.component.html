<div
  #connectionsContainer
  class="absolute-overlay d-flex justify-content-end"
  [class.invisible]="!items.length || groupConnectionsIntoDropdown"
>
  <div
    class="d-flex align-items-center px-2 link text-white"
    (contextmenu)="connectionContextMenu($event, connectionContextMenuDropdown, connection)"
    *ngFor="let connection of items"
  >
    <div class="indicator mr-1" [ngClass]="{
      'text-success': connection.connected,
      'text-danger': connection.error
    }"></div>
    <div
      class="text-bold"
      (click)="openAccounts(connection)"
    >{{ connection.name }}</div>
  </div>
</div>
<div
  nz-dropdown
  nzTrigger="click"
  [nzDropdownMenu]="connectionsDropdown"
  class="d-flex align-items-center link"
  *ngIf="items.length && groupConnectionsIntoDropdown"
>
  <i class="icon-arrow-down text-small mr-1"></i>
  <i class="icon-signal"></i>
</div>
<div
  class="d-flex align-items-center link"
  (click)="openAccounts()"
  *ngIf="!items.length"
>
  <i
    title="Connections"
    class="icon-signal" [ngClass]="{
    'text-active': activeConnection
  }"></i>
</div>
<nz-dropdown-menu #connectionsDropdown="nzDropdownMenu">
  <div class="dropdown">
    <cdk-virtual-scroll-viewport [itemSize]>
      <ul nz-menu>
        <li
          nz-menu-item
          *ngFor="let connection of items"
          (click)="openAccounts(connection)"
          (contextmenu)="connectionContextMenu($event, connectionContextMenuDropdown, connection)"
        >
          <div class="pl-3">
            <div class="position-relative text-white">
              <div class="indicator prefix mr-2" [ngClass]="{
                'text-success': connection.connected,
                'text-danger': connection.error
              }"></div>
              {{ connection.name }}
            </div>
            <div class="small">{{ connection.username }}</div>
          </div>
        </li>
      </ul>
    </cdk-virtual-scroll-viewport>
  </div>
</nz-dropdown-menu>
<nz-dropdown-menu #connectionContextMenuDropdown="nzDropdownMenu">
  <ul nz-menu class="bg-lighter">
    <li nz-menu-item (click)="connect()" *ngIf="!contextMenuConnection?.connected">Connect</li>
    <li nz-menu-item (click)="disconnect()" *ngIf="contextMenuConnection?.connected">Disconnect</li>
    <li nz-menu-item (click)="removeFromFavourites()">Remove from top menu</li>
  </ul>
</nz-dropdown-menu>
