/**
 * StockChartX Web & Mobile
 * @version v2.22.2
 * @link http://www.modulusfe.com/products/web-mobile-stock-chart-library/stockchartx-html5-web-mobile/
 * @license Copyright 2012 to 2017 by Modulus Financial Engineering, Inc., Scottsdale, AZ USA
 * http://www.modulusfe.com
 * 
 * Your license agreement requires the use of the Modulus LicensePing.com licensing mechanism.
 * The mechanism monitors the usage and distribution patterns of our intellectual property.
 * If the usage or distribution patterns indicate that our licensing mechanism has either
 * been removed, altered, tampered with or that our intellectual property may be misused in
 * any form, our legal team may initiate contact with you to investigate the matter further.
 * 
 * Removal or modification of this license mechanism by any means whatsoever (editing the code,
 * removing the LicensePing.com URL reference, etc.) constitutes willful and criminal copyright
 * infringement in addition to giving rise to claims by Modulus Financial Engineering, Inc.
 * against you, as the developer, and your company as a whole for, among others:
 * 
 * (1) Copyright Infringement;
 * (2) False Designation of Origin;
 * (3) Breach of Contract;
 * (4) Misappropriation of Trade Secrets;
 * (5) Interference with Contract; and
 * (6) Interference with Prospective Business Relations.
 * 
 * 17 USC � 506 - Criminal offenses
 * (a) Criminal Infringement.
 * Any person who willfully infringes a copyright shall be punished as provided under section
 * 2319 of title 18, if the infringement was committed for purposes of commercial advantage
 * or private financial gain.
 * 
 * 18 USC � 2319 - Criminal infringement of a copyright
 * (a) Any person who commits an offense under section 506 (a)(1)(A) of title 17 shall be imprisoned
 * not more than 5 years, or fined in the amount set forth in this title (up to $150,000), or both,
 * if the offense consists of the reproduction or distribution, including by electronic means, during
 * any 180-day period, of at least 10 copies, of 1 or more copyrighted works, which have a total retail
 * value of more than $2,500.
 * 
 * For more information, review the license agreement associated with this software and source
 * code at http://www.modulusfe.com/tos or contact us at legal@modulusfe.com.
 */
!function(n){"use strict";function o(t){var e,i;if(this.recordCount=0,this._m_values=[],t)if("string"==typeof t)e=t;else{if("object"!=typeof t)throw new TypeError("Unknown config.");e=t.name,i=t.values}this.name=e,this.values=i||[]}n.DataSeriesSuffix={DATE:".date",OPEN:".open",HIGH:".high",LOW:".low",CLOSE:".close",VOLUME:".volume",TICKS_COUNT:".ticks_count",DETAILS:".details",HEIKIN_ASHI:".heikin_ashi",RENKO:".renko",LINE_BREAK:".line_break",POINT_AND_FIGURE:".point_and_figure",KAGI:"kagi",MEDIAN:".median",TYPICAL:".typical",WEIGHTED:".weighted"},Object.freeze(n.DataSeriesSuffix),Object.defineProperty(o.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t||""},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"values",{get:function(){return this._values},set:function(t){if(!Array.isArray(t))throw new TypeError("An array of values expected.");this._values=t||[]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"length",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"nameSuffix",{get:function(){var t=this.name,e=t.lastIndexOf(".");return 0<=e?t.substr(e):null},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isValueDataSeries",{get:function(){return this.nameSuffix!==n.DataSeriesSuffix.DATE},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isDateDataSeries",{get:function(){return this.nameSuffix===n.DataSeriesSuffix.DATE},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"firstValue",{get:function(){return this._values[0]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"lastValue",{get:function(){var t=this._values;return 0<t.length?t[t.length-1]:null},enumerable:!0,configurable:!0}),o.prototype.valueAtIndex=function(t,e){var i=this._values,o=i[t];return void 0!==e&&(i[t]=e),o},o.prototype.initialize=function(t,e){this._name=e,this.recordCount=t,this._values=new Array(t+1);for(var i=0;i<this._values.length;i++)this._values[i]=0},o.prototype.setValue=function(t,e){this._values[t]=e},o.prototype.value=function(t){return 0<=t&&t<this._values.length?this._values[t]:n.nullValue},o.prototype.add=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this._values;Array.isArray(t)?n.JsUtil.flattenedArray(t,function(t){return i.push(t)}):i.push(t)},o.prototype.addArray=function(t){this._values.push(t)},o.prototype.insert=function(t,e){var i=this._values;Array.isArray(e)?i.splice.apply(i,[t,0].concat(e)):i.splice(t,0,e)},o.prototype.updateLast=function(t){var e=this._values;0<e.length&&(e[e.length-1]=t)},o.prototype.clear=function(){this._values.length=0},o.prototype.trim=function(t){var e=this._values,t=e.length-Math.max(t,0);return 0<t?e.splice(0,t):t=0,t},o.prototype.itemsCountBetweenValues=function(t,e){for(var i=0,o=0,r=this._values;o<r.length;o++){var n=r[o];null!=n&&t<=n&&n<=e&&i++}return i},o.prototype.minMaxValues=function(t,e){for(var i,o=this._values,r=((null==t||t<0||t>=o.length-1)&&(t=0),null==e&&(e=o.length-t),Math.min(t+e-1,o.length-1)),n={min:1/0,max:-1/0},a=t;a<=r;a++)null!=(i=o[a])&&(i<n.min&&(n.min=i),i>n.max&&(n.max=i));return n},o.prototype.floorIndex=function(t){var e=this.binaryIndexOf(t);if(0===e){var i=this._values;if(0===i.length)return-1;if(i[0]>t)return-1}return 0<=e?e:~e-1},o.prototype.ceilIndex=function(t){t=this.binaryIndexOf(t);return 0<=t?t:~t},o.prototype.binaryIndexOf=function(t){var e=this._values;if(0===e.length)return-1;for(var i=0,o=e.length-1;i<=o;){var r=(i+o)/2|0,n=e[r];if(n<t)i=1+r;else{if(!(t<n))return r;o=r-1}}return e[o]<t?~i:~Math.max(o,0)},o.prototype.leftNearestVisibleValueIndex=function(t){for(var e=this._values,i=t=Math.min(t,e.length-1);0<=i;i--)if(null!=e[i])return i;return 0},o.prototype.rightNearestVisibleValueIndex=function(t){for(var e=this._values,i=e.length,o=t;o<i;o++)if(null!=e[o])return o;return i-1},o.fromField=function(t,e){var i=new o;return i.fromField(t,e),i},o.prototype.toField=function(t){var e=new o;return e.name=t||this.name,e.recordCount=this._values.length,e._values=[0].concat(this._values),e._values.push(0),e},o.prototype.fromField=function(t,e){for(var i=t.recordCount,o=t._values.slice(1,e+i),r=0;r<e-1;r++)o[r]=null;for(;r<i;)o[r]===n.nullValue&&(o[r]=null),r++;this._values=o},n.DataSeries=o}(StockChartX=StockChartX||{});var _a,StockChartX,__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),__extends=(!function(n){"use strict";n.nullValue=-987653421;r=n.DataSeries,__extends(a,r),Object.defineProperty(a.prototype,"dataAgregator",{get:function(){return this._dataAgregator},set:function(t){this._dataAgregator=t},enumerable:!0,configurable:!0}),a.prototype.value=function(t,e){var i=this.values,o=i[t];return void 0!==e&&(i[t]=e),null!=o?o:n.nullValue},a.prototype.fill=function(t,e,i){for(var o=t;o<e;o++)this.value(o,i)},a.fromDataSeries=function(t,e){if(!t)return null;e=new a(e||t.name,t.recordCount||t.values.length);return e.values=[0].concat(t.values),e.values.push(0),e},a.prototype.toDataSeries=function(t){for(var e=new a(this.name,this.recordCount),i=this.recordCount,o=this.values.slice(1,t+i),r=0;r<t-1;r++)o[r]=null;for(;r<i;)o[r]===n.nullValue&&(o[r]=null),r++;return e.values=o,e},a.prototype.average=function(t,e){for(var i=0,o=t+e,r=t;r<o;r++)i+=this.value(r);return i/e},a.prototype.set=function(t){this.setLastValue(0,t)},a.prototype.get=function(t){return this.value(this.getIndex(t))},a.prototype.setLastValue=function(t,e){this.value(this.getIndex(t),e)},a.prototype.reset=function(t){this.recordCount=t},a.prototype.getIndex=function(t,e){return e?e-t:this._dataAgregator?this._dataAgregator.currentBar-t:0};var r,t=a;function a(t,e){var i=r.call(this)||this;i.name=t,e instanceof n.Indicator?(i._dataAgregator=e,i.recordCount=e.chart.recordCount):null!=e&&(i.recordCount=e),i.values=new Array(i.recordCount+1);for(var o=0;o<i.values.length;o++)i.values[o]=0;return i}n.TADataSeries=t}(StockChartX=StockChartX||{}),!function(t){"use strict";function e(){this.parentDataAggregator=null,this._currentBar=0}Object.defineProperty(e.prototype,"high",{get:function(){return this.multiBars.high},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"low",{get:function(){return this.multiBars.low},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"close",{get:function(){return this.multiBars.close},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"open",{get:function(){return this.multiBars.open},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this.multiBars.volume},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"details",{get:function(){return this.multiBars.details},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"input",{get:function(){return this.multiBars.input},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"input2",{get:function(){return this.multiBars.input2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"median",{get:function(){return this.multiBars.median},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"typical",{get:function(){return this.multiBars.typical},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weighted",{get:function(){return this.multiBars.weighted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputs",{get:function(){return this.multiBars.inputs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multiBars",{get:function(){return this._multiBars},set:function(t){this._multiBars=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentBar",{get:function(){return this._currentBar},set:function(t){this._currentBar=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFirstTickOfBar",{get:function(){return this._isFirstTickOfBar},set:function(t){this._isFirstTickOfBar=t},enumerable:!0,configurable:!0}),e.prototype.setupIndicator=function(){this.setConfigure(),this._isInitialized=!0},e.prototype.updateIndicator=function(t){return!!this._canUpdate()&&(e=null===this.parentDataAggregator||this.parentDataAggregator===this,this._isInUpdate=!0,e||this.currentBar===this.parentDataAggregator.currentBar||(this.currentBar=this.parentDataAggregator.currentBar),this.currentBar===this._prevBar?this._isFirstTickOfBar=!1:this._isFirstTickOfBar=!0,this._prevBar=this.currentBar,this.childrenIndicator&&this.childrenIndicator.onBarUpdate(t),this.onBarUpdate(t),this._isInUpdate=!1,(e||!(this.currentBar>=this.parentDataAggregator.currentBar))&&void this.currentBar++);var e},e.prototype.setDefaults=function(){},e.prototype.setConfigure=function(){},e.prototype.onBarUpdate=function(t){},e.prototype.equalInput=function(t){return this.input===t},e.prototype._canUpdate=function(){return!(this._isInUpdate||!this._isInitialized)},e.prototype.getAverage=function(t,e){for(var i=0,o=e-1;0<=o;o--)i+=t.value(o);return i/e},t.DataAgregator=e}(StockChartX=StockChartX||{}),!function(t){function e(){this._objectsByType=new t.Dictionary,this._values=[]}e.prototype.add=function(t){var e=t.name;this._objectsByType.containsKey(e)||this._objectsByType.add(e,this._values),this._values.push(t)},e.prototype.get=function(t,e){var i=this._objectsByType.get(e);if(!Array.isArray(i))return i?t(i)?i:void 0:null;for(var o=0,r=i;o<r.length;o++){var n=r[o];if(e===n.name&&t(n))return n}},t.ObjectCache=e}(StockChartX=StockChartX||{}),!function(r){"use strict";(t=e=r.InputSeriesKind||(r.InputSeriesKind={})).close=".close",t.volume=".volume",t.high=".high",t.low=".low",t.open=".open",t.weighted=".weighted",t.median=".median",t.typical=".typical",t.details=".details",Object.defineProperty(i.prototype,"instrument",{get:function(){return this._instrument},set:function(t){this._instrument=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"timeFrame",{get:function(){return this._timeFrame},set:function(t){this._timeFrame=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"input",{get:function(){return this._input},set:function(t){this._input=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"input2",{get:function(){return this._input2},set:function(t){this._input2=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"inputs",{get:function(){return this._inputs},set:function(t){this._inputs=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"barsArray",{get:function(){return this._barsArray},set:function(t){this._barsArray=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"high",{get:function(){return this._high},set:function(t){this._high=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"low",{get:function(){return this._low},set:function(t){this._low=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"close",{get:function(){return this._close},set:function(t){this._close=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"open",{get:function(){return this._open},set:function(t){this._open=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"details",{get:function(){return this._details},set:function(t){this._details=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"median",{get:function(){return this._median},set:function(t){this._median=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"typical",{get:function(){return this._typical},set:function(t){this._typical=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"weighted",{get:function(){return this._weighted},set:function(t){this._weighted=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"recordCount",{get:function(){return this._recordCount},set:function(t){this._recordCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),i.prototype._init=function(){if(this._chart){var t=this._chart;if(this._computedDataSeries=new r.ComputedDataSeries(t),this._barsArray=t.barDataSeries(),this._instrument=t.instrument,Array.isArray(this._indicator.inputSeriesKind)){this._inputs=new r.DataSeriesCollection;for(var e=0,i=this._indicator.inputSeriesKind;e<i.length;e++){var o=i[e],o=this._setInput(o);o.dataAgregator=this._indicator,this._inputs.add(o)}}this._input=this._setInput(this._indicator.inputSeriesKind),this._input&&(this._input.dataAgregator=this._indicator),this._input2=this._setInput(this._indicator.inputSeriesKind2),this._input2&&(this._input2.dataAgregator=this._indicator),this._open=this._createOpenTADataSeries(),this._open.dataAgregator=this._indicator,this._high=this._createHighTADataSeries(),this._high.dataAgregator=this._indicator,this._low=this._createLowTADataSeries(),this._low.dataAgregator=this._indicator,this._close=this._createCloseTADataSeries(),this._close.dataAgregator=this._indicator,this._volume=this._createVolumeTADataSeries(),this._volume.dataAgregator=this._indicator,this._details=this._createDetailsTADataSeries(),this._details.dataAgregator=this._indicator,this._median=this._createMedianTADataSeries(),this._median.dataAgregator=this._indicator,this._typical=this._createTypicalTADataSeries(),this._typical.dataAgregator=this._indicator,this._weighted=this._createWeightedTADataSeries(),this._weighted.dataAgregator=this._indicator,this.recordCount=(this._input||this._high).recordCount,this.name=(this._input||this._high).name}},i.prototype._setInput=function(t){switch(t){case e.high:return this._createHighTADataSeries();case e.low:return this._createLowTADataSeries();case e.close:return this._createCloseTADataSeries();case e.open:return this._createOpenTADataSeries();case e.volume:return this._createVolumeTADataSeries();case e.details:return this._createDetailsTADataSeries();case e.weighted:return this._createWeightedTADataSeries();case e.median:return this._createMedianTADataSeries();case e.typical:return this._createTypicalTADataSeries()}},i.prototype._createOpenTADataSeries=function(){return this._createTADataSeries(r.DataSeriesSuffix.OPEN,r.IndicatorDataSeries.OPEN)},i.prototype._createHighTADataSeries=function(){return this._createTADataSeries(r.DataSeriesSuffix.HIGH,r.IndicatorDataSeries.HIGH)},i.prototype._createLowTADataSeries=function(){return this._createTADataSeries(r.DataSeriesSuffix.LOW,r.IndicatorDataSeries.LOW)},i.prototype._createCloseTADataSeries=function(){return this._createTADataSeries(r.DataSeriesSuffix.CLOSE,r.IndicatorDataSeries.CLOSE)},i.prototype._createVolumeTADataSeries=function(){return this._createTADataSeries(r.DataSeriesSuffix.VOLUME,r.IndicatorDataSeries.VOLUME)},i.prototype._createDetailsTADataSeries=function(){return this._createTADataSeries(r.DataSeriesSuffix.DETAILS,r.IndicatorDataSeries.DETAILS)},i.prototype._createMedianTADataSeries=function(){var t=this._computedDataSeries.median;return r.TADataSeries.fromDataSeries(t,r.IndicatorDataSeries.MEDIAN)},i.prototype._createWeightedTADataSeries=function(){var t=this._computedDataSeries.weighted;return r.TADataSeries.fromDataSeries(t,r.IndicatorDataSeries.WEIGHTED)},i.prototype._createTypicalTADataSeries=function(){var t=this._computedDataSeries.typical;return r.TADataSeries.fromDataSeries(t,r.IndicatorDataSeries.TYPICAL)},i.prototype._createTADataSeries=function(t,e){if(!t)return null;if(void 0===e)switch(t){case r.DataSeriesSuffix.OPEN:e=r.IndicatorDataSeries.OPEN;break;case r.DataSeriesSuffix.HIGH:e=r.IndicatorDataSeries.HIGH;break;case r.DataSeriesSuffix.LOW:e=r.IndicatorDataSeries.LOW;break;case r.DataSeriesSuffix.CLOSE:e=r.IndicatorDataSeries.CLOSE;break;case r.DataSeriesSuffix.VOLUME:e=r.IndicatorDataSeries.VOLUME;break;case r.DataSeriesSuffix.DETAILS:e=r.IndicatorDataSeries.DETAILS}t=this._indicator._usePrimaryDataSeries?this._chart.primaryDataSeries(t):this._chart.getDataSeries(t);return r.TADataSeries.fromDataSeries(t,e)};var e,t=i;function i(t){this._indicator=t,this._chart=t.chart,this._init()}r.MultiBars=t}(StockChartX=StockChartX||{}),!function(c){"use strict";function t(t){this._chart=t}Object.defineProperty(t.prototype,"median",{get:function(){return this._calculateMedian(),this._median},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"typical",{get:function(){return this._calculateTypical(),this._typical},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weighted",{get:function(){return this._calculateWeighted(),this._weighted},enumerable:!0,configurable:!0}),t.prototype._calculateMedian=function(){this._median=new c.DataSeries(c.DataSeriesSuffix.MEDIAN),this._median.clear();for(var t=this._chart.primaryBarDataSeries(),e=t.high.values,i=t.low.values,o=e.length,r=this._median.values,n=0;n<o;n++){var a=(e[n]+i[n])/2;r.push(a)}},t.prototype._calculateTypical=function(){this._typical=new c.DataSeries(c.DataSeriesSuffix.TYPICAL),this._typical.clear();for(var t=this._chart.primaryBarDataSeries(),e=t.high.values,i=t.low.values,o=t.close.values,r=e.length,n=this._typical.values,a=0;a<r;a++){var l=(e[a]+i[a]+o[a])/3;n.push(l)}},t.prototype._calculateWeighted=function(){this._weighted=new c.DataSeries(c.DataSeriesSuffix.WEIGHTED),this._weighted.clear();for(var t=this._chart.primaryBarDataSeries(),e=t.high.values,i=t.low.values,o=t.close.values,r=t.open.values,n=e.length,a=this._weighted.values,l=0;l<n;l++){var s=(e[l]+i[l]+o[l]+r[l])/4;a.push(s)}},c.ComputedDataSeries=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(n){"use strict";e=n.DataAgregator,__extends(i,e),i.prototype.getCachedIndicator=function(t,e){return this._cachedIndicators.get(t,e)},i.prototype.cachedIndicator=function(t,e,i,o,r){return t.chart=this.chart,t.setDefaultSettings(),t.parentDataAggregator=this,e instanceof n.Indicator&&(t.childrenIndicator=e,t.multiBars.input=e.values.get(0)),e instanceof n.TADataSeries&&(t.multiBars.input=e),i&&(t.period=i),o&&(t.smooth=o),r&&(t.limitValue=r),t.setupIndicator(),this._cachedIndicators.add(t),t},i.prototype.SMA=function(e,i){var o,t;return e instanceof n.Indicator?(o=e.values.get(0),(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(o)},"SMA"))&&t.setConfigure()):(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"SMA"))&&t.setConfigure(),t||this.cachedIndicator(new n.SMA,e,i)},i.prototype.TMA=function(e,i){var t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"TMA");return t&&t.setConfigure(),t||this.cachedIndicator(new n.TMA,e,i)},i.prototype.TEMA=function(e,i){var t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"TEMA");return t&&t.setConfigure(),t||this.cachedIndicator(new n.TEMA,e,i)},i.prototype.CMO=function(e,i){var t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"CMO");return t&&t.setConfigure(),t||this.cachedIndicator(new n.CMO,e,i)},i.prototype.StdDev=function(e,i){var o,t;return e instanceof n.Indicator?(o=e.values.get(0),(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(o)},"StdDev"))&&t.setConfigure()):(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"StdDev"))&&t.setConfigure(),t||this.cachedIndicator(new n.StdDev,e,i)},i.prototype.EMA=function(e,i){var o,t;return e instanceof n.Indicator?(o=e.values.get(0),(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(o)},"EMA"))&&t.setConfigure()):(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"EMA"))&&t.setConfigure(),t||this.cachedIndicator(new n.EMA,e,i)},i.prototype.VMA=function(e,i){var o,t;return e instanceof n.Indicator?(o=e.values.get(0),(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(o)},"VMA"))&&t.setConfigure()):(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"VMA"))&&t.setConfigure(),t||this.cachedIndicator(new n.VMA,e,i)},i.prototype.WWS=function(e,i){var o,t;return e instanceof n.Indicator?(o=e.values.get(0),(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(o)},"WWS"))&&t.setConfigure()):(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"WWS"))&&t.setConfigure(),t||this.cachedIndicator(new n.WWS,e,i)},i.prototype.SUM=function(e,i){var t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"SUM");return t&&t.setConfigure(),t||this.cachedIndicator(new n.SUM,e,i)},i.prototype.ADX=function(e,i){var t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"ADX");return t&&t.setConfigure(),t||this.cachedIndicator(new n.ADX,e,i)},i.prototype.Range=function(){var e=this,t=this.getCachedIndicator(function(t){return t.equalInput(e.high)},"Range");return t&&t.setConfigure(),t||this.cachedIndicator(new n.Range,this.high,null)},i.prototype.MAX=function(e,i){var o,t;return e instanceof n.Indicator?(o=e.values.get(0),(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(o)},"MAX"))&&t.setConfigure()):(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"MAX"))&&t.setConfigure(),t||this.cachedIndicator(new n.MAX,e,i)},i.prototype.MIN=function(e,i){var o,t;return e instanceof n.Indicator?(o=e.values.get(0),(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(o)},"MIN"))&&t.setConfigure()):(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"MIN"))&&t.setConfigure(),t||this.cachedIndicator(new n.MIN,e,i)},i.prototype.TrueRange=function(e,i){var o,t;return e instanceof n.Indicator?(o=e.values.get(0),(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(o)},"TrueRange"))&&t.setConfigure()):(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"TrueRange"))&&t.setConfigure(),t||this.cachedIndicator(new n.TrueRange,e,i)},i.prototype.VIDYA=function(e,i){var o,t;return e instanceof n.Indicator?(o=e.values.get(0),(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(o)},"VIDYA"))&&t.setConfigure()):(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"VIDYA"))&&t.setConfigure(),t||this.cachedIndicator(new n.VIDYA,e,i)},i.prototype.HML=function(e,i){var o,t;return e instanceof n.Indicator?(o=e.values.get(0),(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(o)},"HML"))&&t.setConfigure()):(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"HML"))&&t.setConfigure(),t||this.cachedIndicator(new n.HML,e,i)},i.prototype.ROC=function(e,i){var o,t;return e instanceof n.Indicator?(o=e.values.get(0),(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(o)},"ROC"))&&t.setConfigure()):(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"ROC"))&&t.setConfigure(),t||this.cachedIndicator(new n.ROC,e,i)},i.prototype.LinearRegression=function(e,i){var o,t;return e instanceof n.Indicator?(o=e.values.get(0),(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(o)},"LinearRegression"))&&t.setConfigure()):(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"LinearRegression"))&&t.setConfigure(),t||this.cachedIndicator(new n.LinearRegression,e,i)},i.prototype.TSF=function(e,i){var t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"TSF");return t&&t.setConfigure(),t||this.cachedIndicator(new n.TSF,e,i)},i.prototype.RSI=function(e,i,o){var t=this.getCachedIndicator(function(t){return t.period===i&&t.smooth===o&&t.equalInput(e)},"RSI");return t&&t.setConfigure(),t||this.cachedIndicator(new n.RSI,e,i,o)},i.prototype.HMA=function(e,i){var t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"HMA");return t&&t.setConfigure(),t||this.cachedIndicator(new n.HMA,e,i)},i.prototype.WMA=function(e,i){var t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"WMA");return t&&t.setConfigure(),t||this.cachedIndicator(new n.WMA,e,i)},i.prototype.LogChange=function(e){var t=this.getCachedIndicator(function(t){return t.equalInput(e)},"LogChange");return t&&t.setConfigure(),t||this.cachedIndicator(new n.LogChange,e,null)},i.prototype.SwingIndex=function(t){var e=this,i=this.getCachedIndicator(function(t){return t.equalInput(e.high)},"SwingIndex");return i&&i.setConfigure(),i||this.cachedIndicator(new n.SwingIndex,this.high,null,null,t)};var e,t=i;function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._cachedIndicators=new n.ObjectCache,t}n.CachedIndicator=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__awaiter=this&&this.__awaiter||function(n,a,l,s){return new(l=l||Promise)(function(t,e){function i(t){try{r(s.next(t))}catch(t){e(t)}}function o(t){try{r(s.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(i,o)}r((s=s.apply(n,a||[])).next())})},__generator=this&&this.__generator||function(o,r){var n,a,l,s={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(i){return function(t){var e=[i,t];if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(l=a[2&e[0]?"return":e[0]?"throw":"next"])&&!(l=l.call(a,e[1])).done)return l;switch(a=0,(e=l?[0,l.value]:e)[0]){case 0:case 1:l=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,a=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(l=0<(l=s.trys).length&&l[l.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!l||e[1]>l[0]&&e[1]<l[3])){s.label=e[1];break}if(6===e[0]&&s.label<l[1]){s.label=l[1],l=e;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(e);break}l[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(o,s)}catch(t){e=[6,t],a=0}finally{n=l=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},__decorate=(!function(c){"use strict";(t=e=c.MovingAverageType||(c.MovingAverageType={}))[t.exponentialMovingAverage=0]="exponentialMovingAverage",t[t.hullMovingAverage=1]="hullMovingAverage",t[t.simpleMovingAverage=2]="simpleMovingAverage",t[t.triangularMovingAverage=3]="triangularMovingAverage",t[t.TEMA=4]="TEMA",t[t.weightedMovingAverage=5]="weightedMovingAverage",t[t.variable=6]="variable",t[t.wws=7]="wws",t[t.vidya=8]="vidya",i=c.CachedIndicator,__extends(o,i),Object.defineProperty(o.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"indicatorTheme",{get:function(){return this.chart.theme.plot.indicator},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"levelsTheme",{get:function(){return this.chart.theme.plot.indicator.levels},enumerable:!0,configurable:!0}),o.prototype.hasParameter=function(t){return void 0!==this._options.parameters[t]},o.prototype.getParameterValue=function(t){return this._options.parameters||(this._options.parameters={}),this._options.parameters[t]},o.prototype.setParameterValue=function(t,e){this._options.parameters||(this._options.parameters={}),this._options.parameters[t]=e},o.prototype._addLineParameters=function(t,e,i,o){this._options.parameters||(this._options.parameters={});var r=this._options.parameters,n=this._getLineParametersKeys(t);return r[n[0]]=this.getParameterValue(n[0])||e,null!=n[1]&&(r[n[1]]=this.getParameterValue(n[1])||i||1),null!=n[2]&&(r[n[2]]=this.getParameterValue(n[2])||o||c.LineStyle.SOLID),null!=n[3]&&(r[n[3]]=null==this.getParameterValue(n[3])||this.getParameterValue(n[3])),function(){n.forEach(function(t){delete r[t]})}},o.prototype._getLineParametersKeys=function(t){switch(t){case 0:return[c.IndicatorParam.LINE_COLOR,c.IndicatorParam.LINE_WIDTH,c.IndicatorParam.LINE_STYLE,c.IndicatorParam.LINE_ENABLED];case 1:return[c.IndicatorParam.LINE2_COLOR,c.IndicatorParam.LINE2_WIDTH,c.IndicatorParam.LINE2_STYLE,c.IndicatorParam.LINE2_ENABLED];case 2:return[c.IndicatorParam.LINE3_COLOR,c.IndicatorParam.LINE3_WIDTH,c.IndicatorParam.LINE3_STYLE,c.IndicatorParam.LINE3_ENABLED];case 3:return[c.IndicatorParam.LINE4_COLOR,c.IndicatorParam.LINE4_WIDTH,c.IndicatorParam.LINE4_STYLE,c.IndicatorParam.LINE4_ENABLED];case 4:return[c.IndicatorParam.LINE5_COLOR,c.IndicatorParam.LINE5_WIDTH,c.IndicatorParam.LINE5_STYLE,c.IndicatorParam.LINE5_ENABLED]}},o.prototype._lineTheme=function(t){var e,i,o,r,n,a,l,s;switch(t){case 0:e=c.IndicatorParam.LINE_COLOR,i=c.IndicatorParam.LINE_WIDTH,o=c.IndicatorParam.LINE_STYLE,r=c.IndicatorParam.LINE_ENABLED,n=this.getParameterValue(e)||this.indicatorTheme&&this.indicatorTheme.line1.strokeColor,a=this.getParameterValue(i)||this.indicatorTheme&&this.indicatorTheme.line1.width,s=this.getParameterValue(o)||this.indicatorTheme&&this.indicatorTheme.line1.lineStyle,l=this.getParameterValue(r);break;case 1:e=c.IndicatorParam.LINE2_COLOR,i=c.IndicatorParam.LINE2_WIDTH,o=c.IndicatorParam.LINE2_STYLE,r=c.IndicatorParam.LINE2_ENABLED,n=this.getParameterValue(e)||this.indicatorTheme&&this.indicatorTheme.line2.strokeColor,a=this.getParameterValue(i)||this.indicatorTheme&&this.indicatorTheme.line2.width,s=this.getParameterValue(o)||this.indicatorTheme&&this.indicatorTheme.line2.lineStyle,l=this.getParameterValue(r);break;case 2:e=c.IndicatorParam.LINE3_COLOR,i=c.IndicatorParam.LINE3_WIDTH,o=c.IndicatorParam.LINE3_STYLE,r=c.IndicatorParam.LINE3_ENABLED,n=this.getParameterValue(e)||this.indicatorTheme&&this.indicatorTheme.line3.strokeColor,a=this.getParameterValue(i)||this.indicatorTheme&&this.indicatorTheme.line3.width,s=this.getParameterValue(o)||this.indicatorTheme&&this.indicatorTheme.line3.lineStyle,l=this.getParameterValue(r);break;case 3:e=c.IndicatorParam.LINE4_COLOR,i=c.IndicatorParam.LINE4_WIDTH,o=c.IndicatorParam.LINE4_STYLE,r=c.IndicatorParam.LINE4_ENABLED,n=this.getParameterValue(e)||this.indicatorTheme&&this.indicatorTheme.line4.strokeColor,a=this.getParameterValue(i)||this.indicatorTheme&&this.indicatorTheme.line4.width,s=this.getParameterValue(o)||this.indicatorTheme&&this.indicatorTheme.line4.lineStyle,l=this.getParameterValue(r);break;case 4:e=c.IndicatorParam.LINE5_COLOR,i=c.IndicatorParam.LINE5_WIDTH,o=c.IndicatorParam.LINE5_STYLE,r=c.IndicatorParam.LINE5_ENABLED,n=this.getParameterValue(e)||this.indicatorTheme&&this.indicatorTheme.line5.strokeColor,a=this.getParameterValue(i)||this.indicatorTheme&&this.indicatorTheme.line5.width,s=this.getParameterValue(o)||this.indicatorTheme&&this.indicatorTheme.line5.lineStyle,l=this.getParameterValue(r);break;default:return null}t=this.chart.theme.chart.background;return t.some(c.HtmlUtil.isDarkColor)?"#505050"===n&&(n="white"):t.some(c.HtmlUtil.isDarkColor)||"white"===n&&(n="#505050"),{strokeEnabled:l,width:a,strokeColor:n,lineStyle:s}},o.prototype._addFillParameters=function(t,e){this._options.parameters||(this._options.parameters={});var i=this._options.parameters;i[c.IndicatorParam.FILL_ABOVE]=this.getParameterValue(c.IndicatorParam.FILL_ABOVE)||t||"rgba(24, 172, 8, 0.5)",i[c.IndicatorParam.FILL_BELOW]=this.getParameterValue(c.IndicatorParam.FILL_BELOW)||e||"rgba(255, 0, 0, 0.5)",i[c.IndicatorParam.FILL_ENABLED]=null==this.getParameterValue(c.IndicatorParam.FILL_ENABLED)||this.getParameterValue(c.IndicatorParam.FILL_ENABLED)},o.prototype._addLabelParameters=function(t,e){this._options.parameters||(this._options.parameters={});var i=this._options.parameters;0===t&&(i[c.IndicatorParam.LABEL_COLOR]=this.getParameterValue(c.IndicatorParam.LABEL_COLOR)||e,i[c.IndicatorParam.LABEL_ENABLED]=null==this.getParameterValue(c.IndicatorParam.LABEL_ENABLED)||this.getParameterValue(c.IndicatorParam.LABEL_ENABLED)),1===t&&(i[c.IndicatorParam.LABEL2_COLOR]=this.getParameterValue(c.IndicatorParam.LABEL2_COLOR)||e,i[c.IndicatorParam.LABEL2_ENABLED]=null==this.getParameterValue(c.IndicatorParam.LABEL2_ENABLED)||this.getParameterValue(c.IndicatorParam.LABEL2_ENABLED)),2===t&&(i[c.IndicatorParam.LABEL3_COLOR]=this.getParameterValue(c.IndicatorParam.LABEL3_COLOR)||e,i[c.IndicatorParam.LABEL3_ENABLED]=null==this.getParameterValue(c.IndicatorParam.LABEL3_ENABLED)||this.getParameterValue(c.IndicatorParam.LABEL3_ENABLED)),3===t&&(i[c.IndicatorParam.LABEL4_COLOR]=this.getParameterValue(c.IndicatorParam.LABEL4_COLOR)||e,i[c.IndicatorParam.LABEL4_ENABLED]=null==this.getParameterValue(c.IndicatorParam.LABEL4_ENABLED)||this.getParameterValue(c.IndicatorParam.LABEL4_ENABLED))},o.prototype.shiftInToThePast=function(t,e){if(t.values.length<=e)return t;for(var i=0;i<e;i++)t.add(null);var o=new c.DataSeries(t.name),r=t.values;return r.splice(0,e),o.add(r),o},o.prototype.shiftInToTheFuture=function(t,e){for(var i=new c.DataSeries(t.name),o=0;o<=t.length+e;o++)o<e?i.add(null):i.add(t.values[o-e]);return i},o.prototype._dataSeriesPeriod=function(t){if(!this.period)return t;for(var e=0;e<this.period;e++)t.value(e,null);return t},o.prototype._setTitle=function(i,o){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,c.Localization.localizeText(this.chart,"indicator."+i+".shortName",{defaultValue:i})];case 1:return e=t.sent(),o.text(e),[2]}})})},o.prototype._setlocalizedAtribute=function(i,o){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,c.Localization.localizeText(this.chart,o)];case 1:return e=t.sent(),i.attr("title",e),[2]}})})},o.prototype._getMaTypeString=function(t){switch(t){case e.simpleMovingAverage:return"Simple";case e.exponentialMovingAverage:return"Exponential";case e.triangularMovingAverage:return"Triangular";case e.hullMovingAverage:return"Hull";case e.TEMA:return"TEMA";case e.weightedMovingAverage:return"Weighted";case e.variable:return"Variable";case e.wws:return"Wws";case e.vidya:return"Vidya";default:return""}},o.prototype._titleParameters=function(){var i=this,o=[];return Object.keys(this._options.parameters).map(function(t){var e;(-1===t.indexOf("Line")&&-1===t.indexOf(c.IndicatorParam.FILL_BELOW)&&-1===t.indexOf(c.IndicatorParam.FILL_ABOVE)&&-1===t.indexOf(c.IndicatorParam.FILL_ENABLED)&&t!==c.IndicatorParam.DISPLACEMENT||t===c.IndicatorParam.CONVERSION_PERIODS||t===c.IndicatorParam.BASE_PERIODS)&&(t===c.IndicatorParam.MA_TYPE?(e=i._getMaTypeString(i._options.parameters[t]),o.push(e)):t===c.IndicatorParam.SOURCE?o.push(i.input.name):t===c.IndicatorParam.SOURCE2?o.push(i.input2.name):o.push(i._options.parameters[t]))}),0<o.length&&(this.indicatorHasParameters=!0),o},o.allIndicators=function(){var e=[];return Object.keys(c.Indicator.registeredIndicators).map(function(t){e.push(c.Indicator.registeredIndicators[t].className)}),e||[]};var e,i,t=o;function o(){var t=null!==i&&i.apply(this,arguments)||this;return t._options={},t.indicatorHasParameters=!1,t}c.IndicatorBase=t}(StockChartX=StockChartX||{}),!function(o){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;this._dataSeriesArray=[],t&&0!==t.length&&o.JsUtil.flattenedArray(t,function(t){if(!(t instanceof o.TADataSeries))throw new TypeError("DataSeries is not an instance of StockChartX.TADataSeries.");i.add(t)})}Object.defineProperty(t.prototype,"dataSeriesArray",{get:function(){return this._dataSeriesArray},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recordCount",{get:function(){return this.get(0).recordCount},enumerable:!0,configurable:!0}),t.prototype.addNew=function(t,e){t=new o.TADataSeries(t);return this.add(t),t},t.prototype.add=function(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];o.JsUtil.flattenedArray(t,function(t){e._dataSeriesArray.push(t)})},t.prototype.indexOf=function(t){for(var e=0;e<this._dataSeriesArray.length;e++)if(this._dataSeriesArray[e].name===t)return e;return-1},t.prototype.rename=function(t,e){t=this.indexOf(t);-1!==t&&(this._dataSeriesArray[t].name=e)},t.prototype.remove=function(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];o.JsUtil.flattenedArray(t,function(t){t=e.indexOf(t);-1!==t&&e._dataSeriesArray.splice(t,1)})},t.prototype.clear=function(){this._dataSeriesArray=[]},t.prototype.get=function(t){var e,i;return"string"==typeof t?-1!==(i=this.indexOf(e=t))?this._dataSeriesArray[i]:new o.TADataSeries(e):-1!==(i=t)&&i<this._dataSeriesArray.length?this._dataSeriesArray[i]:new o.TADataSeries},t.prototype.copy=function(t,e){e=this.indexOf(e);if(-1!==e)for(var i=this._dataSeriesArray[e],o=i.recordCount,r=1;r<o+1;r++)t.valueAtIndex(r,i.value(r))},o.DataSeriesCollection=t}(StockChartX=StockChartX||{}),!function(){"use strict";var t=/\s*[,;]\s*/,t=("INSERT MODULUS CLIENT ID HERE".split(t),"INSERT DOMAIN NAME HERE".split(t),"INSERT VR CODE HERE".split(t),"".split(t).filter(function(t){return t.indexOf("INSERT TRUSTED DOMAINS")<0}));[].concat(t)}(StockChartX=StockChartX||{}),!function(t){"use strict";var e;(n=e=t.Browser||(t.Browser={}))[n.UNKNOWN=0]="UNKNOWN",n[n.ie=1]="ie",n[n.firefox=2]="firefox",n[n.opera=3]="opera",n[n.konqueror=4]="konqueror",n[n.iron=5]="iron",n[n.safari=6]="safari",n[n.chrome=7]="chrome",n[n.edge=8]="edge";var i="",o="view/",r="locales/",n=(Object.defineProperty(a.prototype,"root",{get:function(){return this._root||i},set:function(t){this._root=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"view",{get:function(){return this._view||this.root+o},set:function(t){this._view=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"locales",{get:function(){return this._locales||this.root+r},set:function(t){this._locales=t},enumerable:!0,configurable:!0}),a);function a(){}switch(t.Environment={isMobile:!1,isPhone:!1,isIOS:!1,isAndroid:!1,osVersion:"0",browser:e.UNKNOWN,browserVersion:"0",Path:new n},Detectizr.detect({detectDeviceMode:!1,detectScreen:!1,detectOS:!0,detectBrowser:!0,detectPlugins:!1}),Detectizr.os.name){case"ios":t.Environment.isIOS=!0;break;case"android":t.Environment.isAndroid=!0}switch(t.Environment.osVersion=Detectizr.os.major+"."+Detectizr.os.minor,t.Environment.browserVersion=Detectizr.browser.major,Detectizr.browser.name){case"ie":t.Environment.browser=e.ie;break;case"firefox":t.Environment.browser=e.firefox;break;case"opera":t.Environment.browser=e.opera;break;case"konqueror":t.Environment.browser=e.konqueror;break;case"iron":t.Environment.browser=e.iron;break;case"safari":t.Environment.browser=e.safari;break;case"chrome":t.Environment.browser=e.chrome;break;case"edge":t.Environment.browser=e.edge}switch(Detectizr.device.type){case"mobile":t.Environment.isPhone=!0;break;case"tablet":t.Environment.isMobile=!0;break;default:t.Environment.isMobile=!1}Object.freeze(t.Environment)}(StockChartX=StockChartX||{}),!function(t){"use strict";function e(t){if(this._length=0,this._dict={},t)if(Array.isArray(t))for(var e=0,i=t;e<i.length;e++){var o=i[e];this.add(o.key,o.value)}else this.add(t.key,t.value)}Object.defineProperty(e.prototype,"count",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.add=function(t,e){if(this.containsKey(t))throw new Error("An item with the same key already exists.");this._dict[t]=e,this._length++},e.prototype.remove=function(t){return!!this.containsKey(t)&&(delete this._dict[t],this._length--,!0)},e.prototype.clear=function(){this._length=0,this._dict={}},e.prototype.containsKey=function(t){return void 0!==this._dict[t]},e.prototype.get=function(t){return this.containsKey(t)?this._dict[t]:null},t.Dictionary=e}(StockChartX=(StockChartX=StockChartX||{})||{}),this&&this.__decorate||function(t,e,i,o){var r,n=arguments.length,a=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var l=t.length-1;0<=l;l--)(r=t[l])&&(a=(n<3?r(a):3<n?r(e,i,a):r(e,i))||a);return 3<n&&a&&Object.defineProperty(e,i,a),a}),__awaiter=this&&this.__awaiter||function(n,a,l,s){return new(l=l||Promise)(function(t,e){function i(t){try{r(s.next(t))}catch(t){e(t)}}function o(t){try{r(s.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(i,o)}r((s=s.apply(n,a||[])).next())})},__generator=this&&this.__generator||function(o,r){var n,a,l,s={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(i){return function(t){var e=[i,t];if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(l=a[2&e[0]?"return":e[0]?"throw":"next"])&&!(l=l.call(a,e[1])).done)return l;switch(a=0,(e=l?[0,l.value]:e)[0]){case 0:case 1:l=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,a=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(l=0<(l=s.trys).length&&l[l.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!l||e[1]>l[0]&&e[1]<l[3])){s.label=e[1];break}if(6===e[0]&&s.label<l[1]){s.label=l[1],l=e;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(e);break}l[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(o,s)}catch(t){e=[6,t],a=0}finally{n=l=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},__extends=(!function(t){"use strict";function e(){}e.ensureLocalStorageAvailable=function(t,e,i){var o=i.value;return i.value=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(localStorage)return o.apply(this,t);throw new Error("Local storage is not available.")},i},e.prototype.save=function(e,i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return localStorage.setItem(e,i),[2]})})},e.prototype.load=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,localStorage.getItem(e)]})})},e.prototype.clear=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return e?localStorage.removeItem(e):localStorage.clear(),[2]})})},__decorate([e.ensureLocalStorageAvailable],e.prototype,"save",null),__decorate([e.ensureLocalStorageAvailable],e.prototype,"load",null),__decorate([e.ensureLocalStorageAvailable],e.prototype,"clear",null),t.LocalDataStore=e}(StockChartX=StockChartX||{}),!function(t){"use strict";function e(){this._constructors={}}Object.defineProperty(e.prototype,"registeredItems",{get:function(){return this._constructors},enumerable:!0,configurable:!0}),e.prototype.register=function(t,e){if(!t)throw new Error("Class name is not specified.");if(!e)throw new Error("Constructor is not specified.");if(this._constructors[t])throw new Error("'"+t+"' already registered.");this._constructors[t]=e},e.prototype.resolve=function(t){if(t)return this._constructors[t];throw new Error("Class name is not specified.")},e.prototype.createInstance=function(t){var e=this.resolve(t);if(e)return new e;throw new Error("'"+t+"' is not registered.")},t.ClassRegistrar=e}(StockChartX=StockChartX||{}),!function(t){"use strict";function l(){}l.isNumber=function(t){return"number"==typeof t},l.isFiniteNumber=function(t){return this.isNumber(t)&&isFinite(t)},l.isFiniteNumberOrNaN=function(t){return this.isNumber(t)&&(isFinite(t)||isNaN(t))},l.isPositiveNumber=function(t){return this.isFiniteNumber(t)&&0<t},l.isNegativeNumber=function(t){return this.isFiniteNumber(t)&&t<0},l.isPositiveNumberOrNaN=function(t){return this.isNumber(t)&&(isNaN(t)||0<t&&isFinite(t))},l.isFunction=function(t){return!!(t&&t.constructor&&t.call&&t.apply)},l.isObject=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},l.shallowClone=function(t){return jQuery.extend(!0,{},t)},l.clone=function(t){var e,i=jQuery.extend(!0,{},t);for(e in i)if(i.hasOwnProperty(e)){var o=i[e];if(Array.isArray(o))for(var r=0,n=o.length;r<n;r++)"object"==typeof o[r]&&(o[r]=this.clone(o[r]))}return i},l.merge=function(t,e,i){null==t&&(t={}),null==e&&(e={});var o,r,n,a=(i=void 0===i?!0:i)?jQuery.extend(!0,{},t,e):t;for(o in a)a.hasOwnProperty(o)&&e.hasOwnProperty(o)&&(r=a[o],n=e[o],Array.isArray(r)?a[o]=n:l.isObject(r)&&(a[o]=l.merge(r,n,!1)));return a},l.extend=function(t,e){function i(){}var o,r=t.prototype;for(o in i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t,r)t.prototype[o]=r[o]},l.applyMixins=function(i,t){t.forEach(function(e){Object.getOwnPropertyNames(e).forEach(function(t){Object.getOwnPropertyDescriptor(e,t).enumerable&&"constructor"!==t&&(i[t]=e[t])}),Object.getOwnPropertyNames(e.prototype).forEach(function(t){"constructor"!==t&&(i.prototype[t]=e.prototype[t])})})},l.padStr=function(t,e){for(var i=e.width-t.length,o=0;o<i;o++)t=e.alignLeft?""+t+e.padding:""+e.padding+t;return t},l.filterText=function(t){return $("<div></div>").text(t).html().trim()},l.flattenArray=function(t){var i=this;return t.reduce(function(t,e){return Array.isArray(e)?t.concat(i.flattenArray(e)):t.concat(e)},[])},l.flattenedArray=function(t,e){if(Array.isArray(t))for(var i=0,o=t;i<o.length;i++){var r=o[i];this.flattenedArray(r,e)}else e(t)},l.sort=function(t,e){for(var i=!0,o=0,r=t.length;i;){i=!1,o++;for(var n=0;n<r-o;n++){var a=t[n],l=t[n+1];0<e(a,l)&&(t[n]=l,t[n+1]=a,i=!0)}}},l.binarySearch=function(t,e){var i=t;if(0===i.length)return-1;for(var o=0,r=i.length-1;o<=r;){var n=(o+r)/2|0,a=i[n];if(a<e)o=1+n;else{if(!(e<a))return n;r=n-1}}return i[r]<e?~o:~Math.max(r,0)},l.log=function(t){return Math.log(t)},l.approxCompare=function(t,e){return Math.abs(t-e)<2220446049250313e-31?0:e<t?1:-1},l.equals=function(t,e){return Math.abs(t-e)<1e-10},l.calculateDigitsOnTickSize=function(t){if(.9999999999999998<=t)return 0;for(var e=0;t*=10,++e,1e-8<Math.abs(this.truncateEx(t)-t););return e=Math.min(e,15)},l.truncateEx=function(t){var e=Math.trunc(t),i=Math.ceil(e+1);return Math.abs(t-i)<1e-8?i:e},l.debug=function(t){var e=new URL(window.location.href).searchParams.get("debug");return!!e&&e.split(",").includes(t)},t.JsUtil=l,Math.roundToDecimals=function(t,e){return Number(Math.round(t+"E"+e).toString()+"E-"+e)},Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)})}(StockChartX=StockChartX||{}),!function(t){"use strict";function c(){}c.mixColors=function(t,e,i){void 0===i&&(i=.5);var o="#",r=t,n=e;t.startsWith("rgb")&&(r=c.rgbaToHex(t)),e.startsWith("rgb")&&(n=c.rgbaToHex(e));for(var a=0;a<3;a++){var l=r.substring(1+2*a,3+2*a),s=n.substring(1+2*a,3+2*a),l=parseInt(l,16),s=parseInt(s,16);o+=("0"+Math.floor(l*(1-i)+s*i).toString(16)).slice(-2)}return o},c.hexToRgba=function(t,e){var i,o,r;return void 0===e&&(e=1),t=t.startsWith("rgb")?((r=t.match(/rgba?\((\d{1,3}), ?(\d{1,3}), ?(\d{1,3}),? ?(\d{0,3}.?\d{1,2}?)\)/).map(function(t){return parseInt(t,16)}))[0],i=r[1],o=r[2],r[3]):(i=(r=t.match(/\w\w/g).map(function(t){return parseInt(t,16)}))[0],o=r[1],r[2]),"rgba("+i+","+o+","+t+","+e+")"},c.rgbaToHex=function(t){var e=t.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i),i=(e&&e[4]||"").trim(),e=e?(256|e[1]).toString(16).slice(1)+(256|e[2]).toString(16).slice(1)+(256|e[3]).toString(16).slice(1):t,t=""!==i?i:1;return e+=t=(255*t|256).toString(16).slice(1)},t.ColorUtil=c}(StockChartX=StockChartX||{}),!function(i){"use strict";function e(t,e){this.periodicity=t||i.Periodicity.MINUTE,this.interval=i.JsUtil.isFiniteNumber(e)?e:1}i.TimeSpan={MILLISECONDS_IN_YEAR:31556926e3,MILLISECONDS_IN_MONTH:2629743830,MILLISECONDS_IN_WEEK:6048e5,MILLISECONDS_IN_DAY:864e5,MILLISECONDS_IN_HOUR:36e5,MILLISECONDS_IN_MINUTE:6e4,MILLISECONDS_IN_SECOND:1e3},Object.freeze(i.TimeSpan),i.Periodicity={TICK:"t",RENKO:"r",VOLUME:"v",RANGE:"range",REVS:"revs",SECOND:"s",MINUTE:"",HOUR:"h",DAY:"d",WEEK:"w",MONTH:"m",YEAR:"y"},Object.freeze(i.Periodicity),e.prototype.toString=function(){return this.interval+" "+e.periodicityToString(this.periodicity)},e.periodicityToString=function(t){switch(t){case i.Periodicity.TICK:return"tick";case i.Periodicity.RANGE:return"range";case i.Periodicity.VOLUME:return"volume";case i.Periodicity.RENKO:return"renko";case i.Periodicity.REVS:return"revs";case i.Periodicity.SECOND:return"second";case i.Periodicity.MINUTE:return"minute";case i.Periodicity.HOUR:return"hour";case i.Periodicity.DAY:return"day";case i.Periodicity.WEEK:return"week";case i.Periodicity.MONTH:return"month";case i.Periodicity.YEAR:return"year";default:throw new Error("Unsupported periodicity: "+t)}},e.periodicityToShortString=function(t){switch(t){case i.Periodicity.TICK:return"tick";case i.Periodicity.SECOND:return"sec";case i.Periodicity.MINUTE:return"min";case i.Periodicity.HOUR:return"hr";case i.Periodicity.DAY:return"day";case i.Periodicity.WEEK:return"wk";case i.Periodicity.MONTH:return"mo";case i.Periodicity.YEAR:return"yr";default:throw new Error("Unsupported periodicity: "+t)}},e.timeFrameToTimeInterval=function(t){switch(t.periodicity){case i.Periodicity.TICK:case i.Periodicity.REVS:case i.Periodicity.RANGE:case i.Periodicity.VOLUME:case i.Periodicity.RENKO:return t.interval;case i.Periodicity.SECOND:return t.interval*i.TimeSpan.MILLISECONDS_IN_SECOND;case i.Periodicity.MINUTE:return t.interval*i.TimeSpan.MILLISECONDS_IN_MINUTE;case i.Periodicity.HOUR:return t.interval*i.TimeSpan.MILLISECONDS_IN_HOUR;case i.Periodicity.DAY:return t.interval*i.TimeSpan.MILLISECONDS_IN_DAY;case i.Periodicity.WEEK:return t.interval*i.TimeSpan.MILLISECONDS_IN_WEEK;case i.Periodicity.MONTH:return t.interval*i.TimeSpan.MILLISECONDS_IN_MONTH;case i.Periodicity.YEAR:return t.interval*i.TimeSpan.MILLISECONDS_IN_YEAR;default:return 0}},e.timeIntervalToTimeFrame=function(t){if(t>=i.TimeSpan.MILLISECONDS_IN_YEAR)return new e(i.Periodicity.YEAR,t/i.TimeSpan.MILLISECONDS_IN_YEAR);if(t>=i.TimeSpan.MILLISECONDS_IN_MONTH)return new e(i.Periodicity.MONTH,t/i.TimeSpan.MILLISECONDS_IN_MONTH);if(t>=i.TimeSpan.MILLISECONDS_IN_WEEK&&t%i.TimeSpan.MILLISECONDS_IN_WEEK==0)return new e(i.Periodicity.WEEK,t/i.TimeSpan.MILLISECONDS_IN_WEEK);if(t>=i.TimeSpan.MILLISECONDS_IN_DAY)return new e(i.Periodicity.DAY,t/i.TimeSpan.MILLISECONDS_IN_DAY);if(t>=i.TimeSpan.MILLISECONDS_IN_HOUR)return new e(i.Periodicity.HOUR,t/i.TimeSpan.MILLISECONDS_IN_HOUR);if(t>=i.TimeSpan.MILLISECONDS_IN_MINUTE)return new e(i.Periodicity.MINUTE,t/i.TimeSpan.MILLISECONDS_IN_MINUTE);if(t>=i.TimeSpan.MILLISECONDS_IN_SECOND)return new e(i.Periodicity.SECOND,t/i.TimeSpan.MILLISECONDS_IN_SECOND);throw new Error("Unsupported time interval: "+t)},i.TimeFrame=e}(StockChartX=(StockChartX=StockChartX||{})||{}),!function(t){"use strict";Object.defineProperty(i,"registeredFormatters",{get:function(){return this._registrar.registeredItems},enumerable:!0,configurable:!0}),i.register=function(t,e){"string"==typeof t?this._registrar.register(t,e):this._registrar.register(t.className,t)},i.deserialize=function(t){if(!t)return null;var e=this._registrar.createInstance(t.className);return e.loadState(t),e},i._registrar=new t.ClassRegistrar;var e=i;function i(){}Object.defineProperty(r,"className",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"locale",{get:function(){return this._locale},set:function(t){this._locale!==t&&(this._locale=t,this._onLocaleChanged&&this._onLocaleChanged())},enumerable:!0,configurable:!0}),r.prototype.saveState=function(){return{className:this.constructor.className,locale:this.locale}},r.prototype.loadState=function(t){this._locale=t&&t.locale};var o=r;function r(t){this._locale=t}t.NumberFormat=o,t.JsUtil.applyMixins(o,[e])}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(i){"use strict";o=i.NumberFormat,__extends(e,o),Object.defineProperty(e,"className",{get:function(){return"StockChartX.IntlNumberFormat"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._numberFormat.resolvedOptions()},set:function(t){this._createFormat(t)},enumerable:!0,configurable:!0}),e.prototype._onLocaleChanged=function(){this._createFormat()},e.prototype._createFormat=function(t){var e=this.locale||"en";t=t||this._numberFormat&&this._numberFormat.resolvedOptions(),this._numberFormat=new Intl.NumberFormat(e,t||void 0)},e.prototype.format=function(t){return this._numberFormat.format(t)},e.prototype.setDecimalDigits=function(t){if(i.JsUtil.isNegativeNumber(t))throw new Error("Value must be greater or equal to zero.");var e=this._numberFormat.resolvedOptions();e.minimumFractionDigits=e.maximumFractionDigits=t,this._createFormat(e)},e.prototype.saveState=function(){var t=o.prototype.saveState.call(this);return t.options=i.JsUtil.clone(this.options),t},e.prototype.loadState=function(t){o.prototype.loadState.call(this,t),this._createFormat(t&&t.options)};var o,t=e;function e(t,e){t=o.call(this,t)||this;return t._createFormat(e),t}i.IntlNumberFormat=t,i.NumberFormat.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(l){"use strict";i=l.NumberFormat,__extends(e,i),Object.defineProperty(e,"className",{get:function(){return"StockChartX.CustomNumberFormat"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatString",{get:function(){return this._formatString},set:function(t){this._formatString=t,this._parseFormat()},enumerable:!0,configurable:!0}),e.prototype._parseFormat=function(){var t=this.formatString;if(!t||"string"!=typeof t)throw new TypeError("Format specifier must be a string.");t=/%(\+)?([0 ]|'(.))?(-)?([0-9]+)?(\.([0-9]+))?([bcdfoxXeEgG])/g.exec(t);this._options={sign:"+"===t[1],padding:null==t[2]?" ":"'"===t[2].substring(0,1)?t[3]:t[2],alignLeft:"-"===t[4],width:null!=t[5]&&t[5],precision:null!=t[7]&&t[7],type:t[8]}},e.prototype.format=function(t){var e=Number(t),i=this._options,o="";switch(i.type){case"b":o=e.toString(2);break;case"c":o=String.fromCharCode(e);break;case"d":o=parseInt(e,10).toString();break;case"f":o=!1===i.precision?t.toString():e.toFixed(i.precision);break;case"o":o=e.toString(8);break;case"x":o=e.toString(16).toLowerCase();break;case"X":o=e.toString(16).toUpperCase();break;case"e":case"E":o=!1===i.precision?e.toExponential():e.toExponential(i.precision),o="e"===i.type?o.toLowerCase():o.toUpperCase();break;case"g":case"G":var r=!1===i.precision?t.toString():e.toFixed(i.precision),n=!1===i.precision?e.toExponential():e.toExponential(i.precision),o=r.length<n.length?r:n;o="g"===i.type?o.toLowerCase():o.toUpperCase();break;default:throw new Error('Unknown value type "'+i.type+'" detected.')}var a=!1!==i.width&&i.width>o.length;switch(a&&!i.alignLeft&&" "!==i.padding&&(o=l.JsUtil.padStr(o,i),a=!1),i.type){case"d":case"f":case"e":case"E":case"g":case"G":t<0?"-"!==o[0]&&(o="-"+o):i.sign&&(o="+"+o)}return o=a?l.JsUtil.padStr(o,i):o},e.prototype.saveState=function(){var t=i.prototype.saveState.call(this);return t.formatString=this.formatString,t},e.prototype.loadState=function(t){i.prototype.loadState.call(this,t),this.formatString=t&&t.formatString};var i,t=e;function e(t){var e=i.call(this)||this;return e.formatString=t||"%f",e}l.CustomNumberFormat=t,l.NumberFormat.register(t)}(StockChartX=StockChartX||{}),!function(t){"use strict";Object.defineProperty(i,"registeredFormatters",{get:function(){return this._formatters.registeredItems},enumerable:!0,configurable:!0}),i.register=function(t,e){"string"==typeof t?this._formatters.register(t,e):this._formatters.register(t.className,t)},i.deserialize=function(t){if(!t)return null;var e=this._formatters.createInstance(t.className);return e.loadState(t),e},i._formatters=new t.ClassRegistrar;var e=i;function i(){}Object.defineProperty(r,"className",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"locale",{get:function(){return this._locale},set:function(t){this._locale!==t&&(this._locale=t,this._onLocaleChanged&&this._onLocaleChanged())},enumerable:!0,configurable:!0}),r.prototype.saveState=function(){return{className:this.constructor.className,locale:this.locale}},r.prototype.loadState=function(t){this.locale=t.locale};var o=r;function r(){}t.DateTimeFormat=o,t.JsUtil.applyMixins(o,[e])}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";i=t.DateTimeFormat,__extends(o,i),Object.defineProperty(o,"className",{get:function(){return"StockChartX.CustomDateTimeFormat"},enumerable:!0,configurable:!0}),o.prototype.format=function(t,e){if("none"===(e=e||this.formatString))return"";t=moment(t);return moment.locale(this.locale),t.format(e)},o.prototype.saveState=function(){var t=i.prototype.saveState.call(this);return t.formatString=this.formatString,t},o.prototype.loadState=function(t){i.prototype.loadState.call(this,t),this.formatString=t.formatString};var i,e=o;function o(t){var e=i.call(this)||this;return e.formatString=null,e.formatString=t,e}t.CustomDateTimeFormat=e,t.DateTimeFormat.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(o){"use strict";o.DateTimeFormatName={YEAR_MONTH:"year-month",MONTH_DAY:"month-day",DATE:"date",SHORT_DATE_TIME:"short_date_time",LONG_DATE_TIME:"long_date_time",SHORT_TIME:"short_time",LONG_TIME:"long_time"};i=o.DateTimeFormat,__extends(e,i),Object.defineProperty(e,"className",{get:function(){return"StockChartX.TimeIntervalDateTimeFormat"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeInterval",{get:function(){return this._timeInterval},set:function(t){if(!o.JsUtil.isPositiveNumber(t))throw new Error("Time interval must be a positive number.");this._timeInterval=t},enumerable:!0,configurable:!0}),e.prototype._onLocaleChanged=function(){this._clearFormatters()},e.prototype._clearFormatters=function(){this._formatters={}},e.prototype._createFormatter=function(t){var e=this.locale||"en";return new IntlPolyfill.DateTimeFormat(e,t)},e.prototype.format=function(t){var e=this._timeInterval;if(e>=o.TimeSpan.MILLISECONDS_IN_YEAR)return t.getFullYear().toString();var i=o.DateTimeFormatName;return(e>=o.TimeSpan.MILLISECONDS_IN_MONTH?this.formatter(i.YEAR_MONTH):e>=o.TimeSpan.MILLISECONDS_IN_DAY?this.formatter(i.DATE):e>=o.TimeSpan.MILLISECONDS_IN_MINUTE||e>=o.TimeSpan.MILLISECONDS_IN_SECOND?this.formatter(i.SHORT_DATE_TIME):this.formatter(i.LONG_DATE_TIME)).format(t)},e.prototype.formatWithFormatter=function(t,e){return this.formatter(e).format(t)},e.prototype.formatter=function(t){var e=this._formatters[t];if(e)return e;var i=o.DateTimeFormatName;switch(t){case i.YEAR_MONTH:e=this._createFormatter({year:"numeric",month:"short"});break;case i.MONTH_DAY:e=this._createFormatter({month:"short",day:"2-digit"});break;case i.DATE:e=this._createFormatter({year:"numeric",month:"short",day:"2-digit"});break;case i.SHORT_DATE_TIME:e=this._createFormatter({year:"numeric",month:"short",day:"2-digit",hour:"2-digit",hour12:!1,minute:"2-digit"});break;case i.LONG_DATE_TIME:e=this._createFormatter({year:"numeric",month:"short",day:"2-digit",hour:"2-digit",hour12:!1,minute:"2-digit",second:"2-digit"});break;case i.SHORT_TIME:e=this._createFormatter({hour:"2-digit",hour12:!1,minute:"2-digit"});break;case i.LONG_TIME:e=this._createFormatter({hour:"2-digit",hour12:!1,minute:"2-digit",second:"2-digit"});break;default:throw new Error("Unknown formatter name: "+t)}return this._formatters[t]=e},e.prototype.saveState=function(){var t=i.prototype.saveState.call(this);return t.timeInterval=this.timeInterval,t},e.prototype.loadState=function(t){i.prototype.loadState.call(this,t),this._timeInterval=t&&t.timeInterval};var i,t=e;function e(t){var e=i.call(this)||this;return e._formatters={},e._timeInterval=t,e}o.TimeIntervalDateTimeFormat=t,o.DateTimeFormat.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(i){"use strict";o=i.DateTimeFormat,__extends(e,o),Object.defineProperty(e,"className",{get:function(){return"StockChartX.CustomTimeIntervalDateTimeFormat"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeInterval",{get:function(){return this._timeInterval},set:function(t){if(!i.JsUtil.isPositiveNumber(t))throw new Error("Time interval must be a positive number.");this._timeInterval=t},enumerable:!0,configurable:!0}),e.prototype._onLocaleChanged=function(){this._formatter.locale=this.locale||"en"},e.prototype.format=function(t){return this._formatter.formatString=this._findFormat(),this._formatter.format(t)},e.prototype._findFormat=function(){var t=this._timeInterval;return t>=i.TimeSpan.MILLISECONDS_IN_YEAR?"YYYY":t>=i.TimeSpan.MILLISECONDS_IN_MONTH?"MMM YYYY":t>=i.TimeSpan.MILLISECONDS_IN_DAY?"D MMM YYYY":t>=i.TimeSpan.MILLISECONDS_IN_MINUTE?"D MMM YYYY HH:mm":t>=i.TimeSpan.MILLISECONDS_IN_SECOND?"D MMM YYYY HH:mm:ss":"D MMM YYYY HH:mm:ss.SSS"},e.prototype.saveState=function(){var t=o.prototype.saveState.call(this);return t.timeInterval=this.timeInterval,t},e.prototype.loadState=function(t){o.prototype.loadState.call(this,t),this._timeInterval=t&&t.timeInterval};var o,t=e;function e(t){var e=o.call(this)||this;return e._formatter=new i.CustomDateTimeFormat,e._timeInterval=t,e}i.CustomTimeIntervalDateTimeFormat=t,i.DateTimeFormat.register(t)}(StockChartX=StockChartX||{}),!function(h){"use strict";function t(){this._requests=new h.Dictionary}t.prototype.onRequstCanceled=function(t){0===this._requests.count&&t.chart.hideWaitingBar()},t.prototype.onRequestCompleted=function(t,e){var i=t.chart,o=i.dataManager,r=i.firstVisibleRecord,n=i.lastVisibleRecord,a=t.kind===h.RequestKind.MORE_BARS?i.primaryBarDataSeries().low.length:0,l=t.instrument;switch(t.kind){case h.RequestKind.BARS:o.clearBarDataSeries(l),o.appendInstrumentBars(l,e);break;case h.RequestKind.MORE_BARS:o.insertInstrumentBars(l,0,e);break;default:throw new Error("Unknown request kind: "+t.kind)}i.updateComputedDataSeries();var s,c,a=i.primaryBarDataSeries().low.length-a;l&&(a=Math.round(i.lastVisibleIndex-i.firstVisibleIndex)),t.kind===h.RequestKind.BARS?!h.Environment.isMobile&&0<a&&(i.barsCount?(s=Math.min(a,n*a/i.barsCount),c=Math.max(0,s-(n-r)),i.recordRange(c,s)):i.recordRange(a)):t.kind!==h.RequestKind.MORE_BARS||l||(i.firstVisibleRecord=a<0?0:r+a,i.lastVisibleRecord=n+Math.abs(a)),i.barsCount=a,i.fireValueChanged(h.ChartEvent.HISTORY_LOADED,t),this._requests.remove(t.id),i.hideWaitingBar(),i.updateIndicators(),i.setNeedsAutoScale(),i.setNeedsUpdate(!0),i.dateScale.onMoreHistoryRequestCompleted()},t.nextRequestId=function(){return++this._requestId},t.prototype.send=function(t){this._requests.add(t.id,t),t.chart.showWaitingBar()},t.prototype.cancel=function(t){this._requests.remove(t.id)},t.prototype.destroy=function(){this._requests.clear()},t.prototype.isRequestAlive=function(t){return this._requests.containsKey(t.id)},t._requestId=0,h.Datafeed=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(l){"use strict";i=l.Datafeed,__extends(e,i),e.prototype.send=function(t){i.prototype.send.call(this,t),this._loadData(t)},e.prototype._buildUrl=function(t){if(this._urlBuilder)return this._urlBuilder(t);throw new Error("Url builder is not provided.")},e.prototype._loadData=function(e){var i=this,t=this._buildUrl(e);$.get(t,function(t){i.isRequestAlive(e)&&(i._processResult(t,e),i.subscribeToRealtime(e))}).fail(function(){i.onRequstCanceled(e),l.UI.Notification.error("Unable to load data file.",e.chart)})},e.prototype._processResult=function(t,e){t=this._parseBars(t,e);this.onRequestCompleted(e,t)},e.prototype.subscribeToRealtime=function(t){var o=this,r=t.chart,n=(t=t).instrument||t.chart.instrument;this.realtimeSubscription[n.symbol]=setInterval(function(){var t,e,i=o._getLastBar(r,r.instrument.symbol==n.symbol?null:n);i&&(t=i.close+Math.random()*i.close/100*(50<100*Math.random()?1:-1),e=i.volume+Math.random()*i.volume/100*(50<100*Math.random()?1:-1),new Date)},300)},e.prototype.processQuote=function(t,e){if(null!=e.instrument.symbol){var i=t.instrument.symbol==e.instrument.symbol?null:e.instrument,o=this._getLastBar(t,i);if(o){var r=o.date.getTime(),n=r+t.timeInterval,a=new Date(n);if(!(e.date.getTime()<r||0===e.price)){if(new Date(e.date)>=a||null===o){for(null===o&&e.date<a&&(n=r);e.date.getTime()>=n+t.timeInterval;)n+=t.timeInterval;a={open:e.price,high:e.price,low:e.price,close:e.price,volume:e.volume,date:new Date(n)};i?t.dataManager.appendInstrumentBars(i,a):t.appendBars(a),t.applyAutoScroll(l.BarsUpdateKind.NEW_BAR)}else o.close=e.price,o.volume=o.volume+e.volume/1e3,o.high<e.price&&(o.high=e.price),o.low>e.price&&(o.low=e.price),this._updateLastBar(o,t,i),this._updateLastBarDetails(e,t,i),t.applyAutoScroll(l.BarsUpdateKind.TICK);t.updateIndicators(),t.updateComputedDataSeries(),t.setNeedsUpdate()}}}},e.prototype._updateLastBarDetails=function(t,e,i){var i=i&&i.symbol!==e.instrument.symbol?i.symbol:"",e=e.dataManager.barDataSeries(i).details;e&&((i=e.lastValue)||(e.setValue(e.length-1,[]),i=e.lastValue),t=function(t,e){var i=t.volume,o=t.tradesCount,r=t.price,t=null!=o?o:i,o=e.find(function(t){return t.price===r});o||(o={bidInfo:{volume:0,tradesCount:0},askInfo:{volume:0,tradesCount:0},volume:i,tradesCount:t,price:r},e.push(o));return o.bidInfo.volume+=i,o.bidInfo.tradesCount+=t,o.volume+=i,o.tradesCount+=t,e}(t,i),e.updateLast(t))},e.prototype._updateLastBar=function(t,e,i){i=i&&i.symbol!==e.instrument.symbol?i.symbol:"",i=e.dataManager.barDataSeries(i);i.open.updateLast(t.open),i.high.updateLast(t.high),i.low.updateLast(t.low),i.close.updateLast(t.close),i.volume.updateLast(t.volume),i.date.updateLast(t.date),e.setNeedsUpdate()},e.prototype._getLastBar=function(t,e){e=e&&e.symbol||"",t=t.dataManager.barDataSeries(e,!0);return 0===t.date.values.length?null:{open:t.open.lastValue,high:t.high.lastValue,low:t.low.lastValue,close:t.close.lastValue,volume:t.volume.lastValue,date:t.date.lastValue}},e.prototype._parseBars=function(t,e){var i=[],o=t.split("\n"),r=this._dateFormat(e),t=moment.locale(),n=0;moment.locale("en");for(var a=0,l=o;a<l.length;a++){var s=l[a].split(this.separator),c=moment(s[0],r).toDate();if(e.endDate&&c>=e.endDate)break;o.length-n==8&&(s[2]="2");c={date:c,open:this._round(parseFloat(s[1])),high:this._round(parseFloat(s[2])),low:this._round(parseFloat(s[3])),close:this._round(parseFloat(s[4])),volume:this._round(parseInt(s[5],10))};c.details=this._generateDetails(c,n++),i.push(c)}return 1<i.length&&i[0].date.getTime()>i[1].date.getTime()&&i.reverse(),moment.locale(t),i},e.prototype._generateDetails=function(t,e){for(var i=t.high,o=t.low,r=t.volume.toFixed(0),n=r.length-1,a=[],l=o,s=0;l<=i;l+=this._priceStep){var c=n-s,h=Math.max(1,s),u=Math.max(1,c),c=+(r[s]+r[c]);a.push({bidInfo:{volume:Math.round(c/h),tradesCount:Math.round(c/h),price:l},askInfo:{volume:Math.round(c/u),tradesCount:Math.round(c/u),price:l},volume:c,tradesCount:c,price:l}),++s>n&&(s=0)}return a},e.prototype._round=function(t){return Math.round(4*t)/4},e.prototype.destroy=function(){for(var t in i.prototype.destroy.call(this),this.realtimeSubscription)clearInterval(this.realtimeSubscription[t])};var i,t=e;function e(t){var e=i.call(this)||this;return e._priceStep=.25,e.realtimeSubscription={},e._dateFormat=t.dateFormat,e._urlBuilder=t.urlBuilder,e.separator=t.separator||",",e}l.CsvDatafeed=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__assign=(!function(l){"use strict";i=l.Datafeed,__extends(e,i),e.prototype.send=function(t){this._loadData(t),i.prototype.send.call(this,t)},e.prototype._loadData=function(t){this.dataServer.getHistory(this._processResult.bind(this,t),t)},e.prototype._processResult=function(t,e){var i=this._bars.get(t.id)||[];i.push.apply(i,this._convertBars(e.Bars,t)),!1!==e.IsTail&&(this.subscribe(t),this.onRequestCompleted(t,i),this._bars.remove(t.id)),this._bars.containsKey(t.id)||this._bars.add(t.id,i)},e.prototype.subscribe=function(t){var e=t.chart.instrument;e&&this.dataServer.subscribeQuote(this._processMainQuote.bind(this,t.chart),e),t.instrument&&this.dataServer.subscribeQuote(this._processQuote.bind(this,t.chart),t.instrument)},e.prototype._processMainQuote=function(t,e){if((e=this._convertQuote(e)).symbol.symbol===t.instrument.symbol){var i,o=this._getLastBar(t);if(o&&(i=(r=o.date.getTime())+t.timeInterval,!(e.date.getTime()<r||0===e.price)))if(new Date(e.date)>=new Date(i)||null===o){for(null===o&&e.date<i&&(i=r);e.date>=i+t.timeInterval;)i+=t.timeInterval;var r={open:e.price,high:e.price,low:e.price,close:e.price,volume:e.volume,date:new Date(i)};t.appendBars(r),t.dateScale.applyAutoScroll(l.BarsUpdateKind.NEW_BAR)}else o.close=e.price,o.volume=o.volume+e.volume/1e3,o.high<e.price&&(o.high=e.price),o.low>e.price&&(o.low=e.price),this._updateLastBar(o,t),t.dateScale.applyAutoScroll(l.BarsUpdateKind.TICK)}},e.prototype._processQuote=function(t,e){var i,o=(e=this._convertQuote(e)).symbol||t.instrument,r=+t.timeInterval,n=this._getLastBar(t,o);if(n&&(i=(a=n.date.getTime())+r,!(e.date.getTime()<a||0===e.price)))if(new Date(e.date)>=new Date(i)||null===n){for(null===n&&e.date<i&&(i=a);e.date>=i+r;)i+=r;var a={open:e.price,high:e.price,low:e.price,close:e.price,volume:e.volume,date:new Date(i)};t.dataManager.appendInstrumentBars(o,a),t.dateScale.applyAutoScroll(l.BarsUpdateKind.NEW_BAR)}else n.close=e.price,n.volume=n.volume+e.volume/1e3,n.high<e.price&&(n.high=e.price),n.low>e.price&&(n.low=e.price),this._updateLastBar(n,t,o),t.dateScale.applyAutoScroll(l.BarsUpdateKind.TICK)},e.prototype._updateLastBar=function(t,e,i){i=i&&i.symbol!==e.instrument.symbol?i.symbol:"",i=e.dataManager.barDataSeries(i);i.open.updateLast(t.open),i.high.updateLast(t.high),i.low.updateLast(t.low),i.close.updateLast(t.close),i.volume.updateLast(t.volume),i.date.updateLast(t.date),e.setNeedsUpdate(!0)},e.prototype._getLastBar=function(t,e){e=e&&e.symbol||"",t=t.dataManager.barDataSeries(e,!0);return 0===t.date.values.length?null:{open:t.open.lastValue,high:t.high.lastValue,low:t.low.lastValue,close:t.close.lastValue,volume:t.volume.lastValue,date:t.date.lastValue}},e.prototype._convertQuote=function(t){return{symbol:{symbol:t.Symbol.Symbol,company:t.Symbol.Company,exchange:t.Symbol.Exchange,type:t.Symbol.Type},price:t.Price,bid:t.Bid,bidSize:t.BidSize,ask:t.Ask,askSize:t.AskSize,volume:t.Volume,date:new Date(t.Date)}},e.prototype._convertBars=function(t,o){var r=[],e=moment.locale();return moment.locale("en"),$.each(t,function(t,e){var i=moment(e.Date).toDate();o.endDate&&i>=o.endDate||(i={open:e.Open,close:e.Close,high:e.High,low:e.Low,volume:e.Volume,date:new Date(e.Date)},r.push(i))}),1<r.length&&r[0].date.getTime()>r[1].date.getTime()&&r.reverse(),moment.locale(e),r};var i,t=e;function e(t){var e=i.call(this)||this;return e._bars=new l.Dictionary,e.dataServer=t,e}l.DataServerDatafeed=t}(StockChartX=StockChartX||{}),!function(){"use strict";(StockChartX||(StockChartX={})).RequestKind={BARS:"bars",MORE_BARS:"moreBars"}}(),!function(s){!function(t){"use strict";function l(t){this.ws=null,this.loggingIn=null,this.loggingOut=null,this.userCredentials={login:"",password:""},this.messageSubscribers={login:[],logout:[],dataFeeds:[],quotes:[],history:[]},this.dataFeedOption=$("#scxDataFeedDropDown"),this.config=$.extend({SERVER_HOST:null,SERVER_PORT:null},t)}l.generateUniqueEventID=function(){var t=String.fromCharCode(Math.floor(25*Math.random()+65));do{var e=Math.floor(42*Math.random()+48)}while((e<58||64<e)&&(t+=String.fromCharCode(e)),t.length<32);return t},l.prototype.subscribe=function(t,e){var i=l.generateUniqueEventID();return this.messageSubscribers[t][i]=e,i},l.prototype.notify=function(t,e,i){return(null!=e&&null!==this.messageSubscribers[t][e]||null!==(e=l.getFirstSubscriberId(this.messageSubscribers[t])))&&("history"===t&&!1===i.IsTail?this.messageSubscribers[t][e](i):(this.messageSubscribers[t][e](i),delete this.messageSubscribers[t][e]),!0)},l.prototype.connect=function(){var l=this;if(null!=this.ws&&1===this.ws.readyState)return!1;var t="MozWebSocket"in window?"MozWebSocket":"WebSocket"in window?"WebSocket":null;return null!=t&&(this.ws=new window[t]("ws://"+this.config.SERVER_HOST+":"+this.config.SERVER_PORT+"/"),this.ws.onopen=function(){l.loggingIn&&l.sendQuery({MsgType:"LoginRequest",Login:l.userCredentials.login,Password:l.userCredentials.password})},this.ws.onclose=function(){l.loggingOut||(l.loggingIn=!1)},this.ws.onmessage=function(t){var e=jQuery.parseJSON(t.data);switch(e.MsgType){case"LoginResponse":null!==e.Error?l.notify("login",null,{Success:!1,Reason:e.Error}):l.notify("login",null,{Success:!0});break;case"LogoutResponse":l.loggingOut=!1,l.disconnect();break;case"DataFeedListResponse":l.notify("dataFeeds",null,e.DataFeeds);break;case"HistoryResponse":l.notify("history",e.ID,{ID:e.ID,Bars:e.Bars,IsTail:e.Tail});break;case"NewTickResponse":for(var i=0,o=e.Tick;i<o.length;i++){var r,n=o[i],a=l.messageSubscribers.quotes[n.Symbol.Symbol];for(r in a)a.hasOwnProperty(r)&&a[r](n)}}},!0)},l.prototype.disconnect=function(){null!=this.ws&&1===this.ws.readyState&&(this.ws.close(),this.ws=null)},l.prototype.sendQuery=function(t){this.ws&&1===this.ws.readyState&&this.ws.send(JSON.stringify(t))},l.prototype.doLogin=function(t,e){this.subscribe("login",t),this.userCredentials.login=e.Login,this.userCredentials.password=e.Password,this.loggingIn=!0,this.connect()},l.prototype.doLogout=function(){this.loggingOut=!0,this.sendQuery({MsgType:"LogoutRequest"}),this.disconnect()},l.getFirstSubscriberId=function(t){for(var e in t)if(t.hasOwnProperty(e))return e;return null},l.prototype.getDataFeeds=function(t){this.subscribe("dataFeeds",t),this.sendQuery({MsgType:"DataFeedListRequest"})},l.prototype.subscribeQuote=function(t,e){var i="quotes",o=this._dataFeedOptionsSelect(this.dataFeedOption.val());this.messageSubscribers[i][e.symbol],this.messageSubscribers[i][e.symbol]=[],this.messageSubscribers[i][e.symbol].push(t),this.sendQuery({MsgType:"SubscribeRequest",Symbol:{DataFeed:o,Exchange:e.exchange,Symbol:e.symbol,Company:e.company,Type:1}})},l.prototype.unsubscribeQuote=function(t,e){var i=this._dataFeedOptionsSelect(this.dataFeedOption.val()),o=this.messageSubscribers.quotes[e.symbol];if(o){for(var r in o)o.hasOwnProperty(r)&&o[r]===t&&o.splice(r,1);0===o.length&&delete this.messageSubscribers.quotes[e.symbol],this.sendQuery({MsgType:"UnsubscribeRequest",Symbol:{DataFeed:i,Exchange:e.exchange,Symbol:e.symbol,Company:e.company,Type:1}})}},l.prototype.getHistory=function(t,e){var i,o,t=this.subscribe("history",t),r=e.chart,n=this._dataFeedOptionsSelect(this.dataFeedOption.val()),a=l.convertPeriodicity(r.timeFrame.periodicity),n=(e.kind===s.RequestKind.MORE_BARS&&(i=e.endDate,o=4628592e5),{MsgType:"HistoryRequest",Selection:{Id:t,Symbol:{DataFeed:n,Exchange:r.instrument.exchange,Symbol:(e.instrument?e:r).instrument.symbol,Company:r.instrument.company,Type:1},Periodicity:a,Interval:r.timeFrame.interval,barsCount:e.count,From:o,To:i}});return this.sendQuery(n),t},l.convertPeriodicity=function(t){switch(t){case s.Periodicity.SECOND:return 0;case s.Periodicity.MINUTE:return 1;case s.Periodicity.HOUR:return 2;case s.Periodicity.DAY:return 3;case s.Periodicity.WEEK:return 4;case s.Periodicity.MONTH:return 5;case s.Periodicity.YEAR:return 6}},l.prototype._dataFeedOptionsSelect=function(t){switch(t){case"0":return"DDF";case"1":return"Simulation DataFeed"}},t.DataServer=l}(s.DataServer||(s.DataServer={}))}(StockChartX=StockChartX||{}),!function(r){"use strict";var a=jQuery;a.fn.extend({scxGetFrame:function(t){var e,i=this.outerWidth(),o=this.outerHeight();return t?(t=t.offset(),(e=this.offset()).left-=t.left,e.top-=t.top):e=this.position(),new r.Rect({left:e.left,top:e.top,width:i,height:o})},scxSize:function(){return{width:this.outerWidth(),height:this.outerHeight()}},scxContentSize:function(){return{width:this.innerWidth(),height:this.innerHeight()}},scxAppendCanvas:function(){return a("<canvas></canvas>").css("position","absolute").appendTo(this)},scxAppend:function(t,e){var i=a("<"+t+"></"+t+">").appendTo(this);if(e)if("string"==typeof e)i.addClass(e);else for(var o=0,r=e;o<r.length;o++){var n=r[o];i.addClass(n)}return i},scxPrepend:function(t,e){var i=a("<"+t+"></"+t+">").prependTo(this);if(e)if("string"==typeof e)i.addClass(e);else for(var o=0,r=e;o<r.length;o++){var n=r[o];i.addClass(n)}return i},scxFrame:function(t){this.css("left",t.left).css("top",t.top).outerWidth(t.width).outerHeight(t.height)},scxPosition:function(t,e){return this.css("left",t).css("top",e),this},scxClientToLocalPoint:function(t,e){var i=this.offset();return{x:Math.round(t-i.left),y:Math.round(e-i.top)}},scxLocalToClientPoint:function(t,e){var i=this.offset();return{x:Math.round(t+i.left),y:Math.round(e+i.top)}},scxTextStyle:function(t){return this.css("color",t.fillColor).css("font-size",t.fontSize+"px").css("font-family",t.fontFamily).css("font-style",t.fontStyle)},scxBorder:function(t,e){return this.css(t,e.width+"px "+e.lineStyle+" "+e.strokeColor)},scxFill:function(t){return!1===t.fillEnabled?this:this.css("background-color",t.fillColor)},scxLocalize:function(t,e){return e&&this.text(e),this.attr("data-i18n",t)}})}(StockChartX=StockChartX||{}),!function(t){"use strict";function a(){}a.getLineWidth=function(t){return t&&!1===t.strokeEnabled?0:t&&t.width||1},a.getFontSize=function(t){return t&&t.fontSize||12},a.isDarkColor=function(t){return tinycolor(t).isDark()},a.toRgbString=function(t){return tinycolor(t).toRgbString()},a.toRgba=function(t){return tinycolor(t).toRgb()},a.toHexString=function(t){return tinycolor(t).toHexString()},a.lighten=function(t,e){void 0===e&&(e=0);for(var i,o=a.toRgbString(t).replace(/[^0-9a-f]/gi,""),r=(o.length<6&&(o=o[0]+o[0]+o[1]+o[1]+o[2]+o[2]),"#"),n=0;n<3;n++)i=parseInt(o.substr(2*n,2),16),r+=("00"+(i=Math.round(Math.min(Math.max(0,i+255*e),255)).toString(16))).substr(i.length);return r},a.setVisibility=function(t,e){t&&t.css("visibility",e?"visible":"hidden")},a.setBackground=function(t,e){if(Array.isArray(e)){if(0===e.length)throw new Error("Invalid theme: 'background' must be a color or array of colors.");1===e.length?a.setBackgroundColor(t,e[0]):a.setGradientBackground(t,e)}else a.setBackgroundColor(t,e)},a.isFullscreenEnabled=function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled},a.enterFullscreen=function(t){t=t||document.body;if(t.requestFullscreen)t.requestFullscreen();else if(t.msRequestFullscreen)t.msRequestFullscreen();else if(t.mozRequestFullScreen)t.mozRequestFullScreen();else{if(!t.webkitRequestFullscreen)throw new Error("Fullscreen mode is not supported.");t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}},a.exitFullscreen=function(){document.fullscreenElement?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},a.setGradientBackground=function(t,e){var i="startColorstr="+a.toHexString(e[1]),o="endColorstr="+a.toHexString(e[0]);t.css("background","-webkit-gradient(linear,left bottom,left top,color-stop(0, "+e[0]+"), color-stop(1, "+e[1]+"))").css("background","linear-gradient(to top, "+e[0]+", "+e[1]+")").css("filter","progid:DXImageTransform.Microsoft.gradient(GradientType=0, "+i+", "+o+")")},a.setBackgroundColor=function(t,e){t.css("background",e)},a.removeUnsecureTags=function(t){for(var e=$(t),i=0,o=["script","embed","object","applet","iframe","frame","frameset"];i<o.length;i++)e.find(o[i]).remove();return e},a.getRandomColorVisibleOn=function(t){var t=Array.isArray(t)?tinycolor.mix(tinycolor(t[0]),tinycolor(t[t.length]),50):tinycolor(t),e=tinycolor.mix(t,tinycolor.random());return(t.isDark()?e.lighten():e.darken()).toRgbString()},t.HtmlUtil=a}(StockChartX=StockChartX||{}),this&&this.__assign||Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}),__awaiter=(!function(i){"use strict";var t,e,o;i.StrokePriority={COLOR:"color"},Object.freeze(i.StrokePriority),i.FillPriority={COLOR:"color"},Object.freeze(i.FillPriority),(e=t=i.LineStyle||(i.LineStyle={})).SOLID="solid",e.DASH="dash",e.DOT="dot",e.DASH_DOT="dash-dot",Object.freeze(t),(o=i.FontStyle||(i.FontStyle={})).Normal="normal",Object.freeze(o),i.FontDefaults={fontFamily:"Arial",fontSize:12,fontStyle:o.Normal,fontVariant:"normal",fontWeight:"normal"},i.DefaultText={fontFamily:"Calibri",fontSize:11,fillColor:"black"},i.StrokeDefaults={strokePriority:"color",strokeColor:"black",width:1,lineStyle:t.SOLID,lineJoin:"miter",lineCap:"butt"},i.DashArray={DOT:[1,7],DASH:[7,7],DASH_DOT:[7,7,1,7]},i.getDefaultWatermarkStyles=function(t){return{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:o.Normal,fillColor:t},details:{fontFamily:"Arial",fontSize:40,fontStyle:o.Normal,fillColor:t}}},i.getDefaultValueMarkerTheme=function(t,e){return{text:__assign({},i.DefaultText,{fillColor:e}),fill:{fillColor:t}}}}(StockChartX=StockChartX||{}),!function(t){"use strict";t.Dark={name:"Dark",chart:{background:["#1B1C26"],border:{width:1,strokeColor:"grey",lineStyle:t.LineStyle.SOLID},instrumentWatermark:t.getDefaultWatermarkStyles("white")},splitter:{fillColor:"#292C38",hoverFillColor:"white"},chartPanel:{grid:{width:1,strokeColor:"#292C38"},title:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white"},instrumentWatermark:t.getDefaultWatermarkStyles("white")},tradingPanel:{tradingBarUnit:"pixels",tradingBarLength:40,buyPanelBackground:"rgba(12,98,247, 0.3)",sellPanelBackground:"rgba(201, 59, 59, 0.3)",buyMarkerBackground:"#0C62F7",sellMarkerBackground:"#C93B3B",markerFontColor:"#fff"},valueScale:{fill:{fillColor:"#1B1C26"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"rgba(255,255,255, 0.7)"},line:{width:1,strokeColor:"#505050"},border:{width:0,strokeColor:"darkgray",lineStyle:t.LineStyle.SOLID},valueMarker:t.getDefaultValueMarkerTheme("green","black")},dateScale:{fill:{fillColor:"#1B1C26"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#FFFFFF"},line:{width:1,strokeColor:"#505050"},border:{width:0,strokeColor:"darkgray",lineStyle:t.LineStyle.SOLID},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"#FFFFFF"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:t.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"#545454",width:1,lineStyle:t.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"#000000"},line:{width:1,strokeColor:"darkgray",lineStyle:t.LineStyle.DASH},fill:{fillColor:"#FFFFFF"}},zoomIn:{border:{width:1,strokeColor:"white",lineStyle:t.LineStyle.SOLID},fill:{fillColor:"rgba(255, 255, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"white"}}},line:{simple:{width:1,strokeColor:"white"},mountain:{line:{width:1,strokeColor:"white"},fill:{linearGradient:["rgba(63, 167, 225, 0.4) ","rgba(63, 167, 225, 0)"]}},step:{width:1,strokeColor:"white"}},histogram:{line:{width:1,strokeColor:"white"},coloredLine:{upBar:{width:1,strokeColor:"grey"},downBar:{width:1,strokeColor:"red"}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"green"}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"red"}}}},bar:{OHLC:{width:1,strokeColor:"white"},HLC:{width:1,strokeColor:"white"},HL:{width:1,strokeColor:"white"},coloredOHLC:{upBar:{width:1,strokeColor:"#3FA7E1"},downBar:{width:1,strokeColor:"#E85050"}},coloredHLC:{upBar:{width:1,strokeColor:"#3FA7E1"},downBar:{width:1,strokeColor:"#E85050"}},coloredHL:{upBar:{width:1,strokeColor:"#3FA7E1"},downBar:{width:1,strokeColor:"#E85050"}},candle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"#3FA7E1"},wick:{width:1,strokeColor:"white"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"#E85050"},wick:{width:1,strokeColor:"white"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"#3FA7E1"},wick:{width:1,strokeColor:"white"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"#E85050"},wick:{width:1,strokeColor:"white"}}},renko:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"#3FA7E1"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"#E85050"}}},lineBreak:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#3FA7E1"},fill:{fillEnabled:!0,fillColor:"#3FA7E1"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#E85050"},fill:{fillEnabled:!0,fillColor:"#E85050"}}},hollowCandle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"#3FA7E1"},wick:{width:1,strokeColor:"white"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"#E85050"},wick:{width:1,strokeColor:"white"}},upHollowCandle:{border:{width:1,strokeColor:"#3FA7E1"},wick:{width:1,strokeColor:"#3FA7E1"}},downHollowCandle:{border:{width:1,strokeColor:"#E85050"},wick:{width:1,strokeColor:"#E85050"}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"#3FA7E1"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"#E85050"}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"#3FA7E1"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"#E85050"}}},candleVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"#3FA7E1"},wick:{width:1,strokeColor:"white"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"#E85050"},wick:{width:1,strokeColor:"white"}}},equiVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#3FA7E1"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#E85050"}}},equiVolumeShadow:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#3FA7E1"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#E85050"}}}},indicator:{line1:{width:1,lineStyle:t.LineStyle.SOLID,strokeColor:"white"},line2:{width:1,lineStyle:t.LineStyle.SOLID,strokeColor:"#3FA7E1"},line3:{width:1,lineStyle:t.LineStyle.SOLID,strokeColor:"#E85050"},line4:{width:1,lineStyle:t.LineStyle.SOLID,strokeColor:"#0000FF"},line5:{width:1,lineStyle:t.LineStyle.SOLID,strokeColor:"yellow"},histogram:{color:"#32CD32"},blackText:{fontFamily:"Arial",fontSize:10,fontStyle:t.FontStyle.Normal,fillColor:"black"},levels:{line1:{width:1,lineStyle:t.LineStyle.SOLID,strokeColor:"#FF0000"},line2:{width:1,lineStyle:t.LineStyle.SOLID,strokeColor:"#32CD32"},line3:{width:1,lineStyle:t.LineStyle.SOLID,strokeColor:"#FFD500"},line4:{width:1,lineStyle:t.LineStyle.SOLID,strokeColor:"#0000FF"},line5:{width:1,lineStyle:t.LineStyle.SOLID,strokeColor:"#808080"}}}},selectionMarker:{line:{strokeColor:"white",width:1},fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},fill:{fillColor:"orange"},centerPointFill:{fillColor:"rgb(68, 68, 68)"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(255, 255, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:t.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(255, 255, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"white"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},fill:{fillColor:"rgba(0, 0, 0, 0.8)"}},abstract:{line:{strokeColor:"white",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"white",decoration:""}},trendAngle:{line:{strokeColor:"white",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"white",decoration:""},arc:{strokeColor:"white",width:1,lineStyle:t.LineStyle.DOT},horizontalLine:{strokeColor:"white",width:1,lineStyle:t.LineStyle.DOT}},abstractMarker:{fill:{fillColor:"white"}},fibonacci:{trendLine:{strokeColor:"white",width:1,lineStyle:t.LineStyle.DASH},line:{strokeColor:"white",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"white"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#FFFFFF",decoration:""}},image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"white",fontWeight:"normal",fontStyle:t.FontStyle.Normal,decoration:""},border:{enabled:!0,width:1,color:"orange",lineStyle:t.LineStyle.SOLID},fill:{enabled:!0,color:"rgb(44, 44, 44)"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white"}}}},highlightedColumn:{fill:{fillColor:"rgba(90, 130, 182, 0.45)"}},button:{accept:{fill:{fillColor:"white"},line:{strokeColor:"green",width:1}},cancel:{fill:{fillColor:"white"},line:{strokeColor:"red",width:1}},none:{fill:{fillColor:"white"}}},positionBar:{short:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},long:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},orderBar:{buy:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}},sell:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}}}}}(StockChartX=StockChartX||{}),!function(t){"use strict";t.Theme={Dark:t.Dark,Light:{name:"Light",scrollingPanelBackgroud:{fill:{fillColor:"#000"}},chart:{background:["#FFFFFF"],border:{width:1,strokeColor:"rgba(21, 22, 29, 0.1)",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:"normal",fillColor:"#0d0d0d"},details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#1b1b1b"}}},splitter:{fillColor:"#999",hoverFillColor:"#DDD"},chartPanel:{grid:{width:1,strokeColor:"#CCC"},title:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},watermark:{text:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#666"}}},valueScale:{fill:{fillColor:"#FFF"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:0,strokeColor:"#CCC",lineStyle:"solid"},valueMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"}}},dateScale:{fill:{fillColor:"#FFF"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:0,strokeColor:"#CCC",lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:t.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"#545454",width:1,lineStyle:t.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},line:{width:1,strokeColor:"#333",lineStyle:"dashed"},fill:{fillColor:"#15161D"}},zoomIn:{border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"#555"}}},line:{simple:{width:1,strokeColor:"#555"},mountain:{line:{width:1,strokeColor:"#555"},fill:{linearGradient:["rgba(63, 225, 147, 0.4) ","rgba(63, 225, 147, 0)"]}},step:{width:1,strokeColor:"#555"}},histogram:{line:{width:1,strokeColor:"#555"},coloredLine:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"green"}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"red"}}}},bar:{OHLC:{width:1,strokeColor:"#555"},HLC:{width:1,strokeColor:"#555"},HL:{width:1,strokeColor:"#555"},coloredOHLC:{upBar:{width:1,strokeColor:"#61D07F"},downBar:{width:1,strokeColor:"#E85050"}},coloredHLC:{upBar:{width:1,strokeColor:"#61D07F"},downBar:{width:1,strokeColor:"#E85050"}},coloredHL:{upBar:{width:1,strokeColor:"#61D07F"},downBar:{width:1,strokeColor:"#E85050"}},candle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#61D07F"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#E85050"},wick:{width:1,strokeColor:"#555"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#61D07F"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#E85050"},wick:{width:1,strokeColor:"#555"}}},renko:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#61D07F"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#E85050"}}},lineBreak:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#61D07F"},fill:{fillEnabled:!0,fillColor:"#61D07F"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#E85050"},fill:{fillEnabled:!0,fillColor:"#E85050"}}},hollowCandle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#61D07F"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#E85050"},wick:{width:1,strokeColor:"#555"}},upHollowCandle:{border:{width:1,strokeColor:"#61D07F"},wick:{width:1,strokeColor:"#61D07F"}},downHollowCandle:{border:{width:1,strokeColor:"#E85050"},wick:{width:1,strokeColor:"#E85050"}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"#61D07F"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"#E85050"}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"#61D07F"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"#E85050"}}},candleVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"#61D07F"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"#E85050"},wick:{width:1,strokeColor:"#555"}}},equiVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#61D07F"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#E85050"}}},equiVolumeShadow:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#61D07F"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#E85050"}}}},indicator:{line1:{width:1,lineStyle:"solid",strokeColor:"#20908A"},line2:{width:1,lineStyle:"solid",strokeColor:"#EBBD79"},line3:{width:1,lineStyle:"solid",strokeColor:"#3452F1"},line4:{width:1,lineStyle:"solid",strokeColor:"#C04672"},line5:{width:1,lineStyle:"solid",strokeColor:"#8F73DC"},histogram:{color:"#32CD32"},blackText:{fontFamily:"Arial",fontSize:10,fontStyle:"normal",fillColor:"black"},levels:{line1:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FFD500"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"#808080"}}}},selectionMarker:{line:{strokeColor:"#777",width:1},fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"#15C"},centerPointFill:{fillColor:"white"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:t.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"black"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"rgba(255, 255, 255, 0.8)"}},abstract:{line:{strokeColor:"#555",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},trendAngle:{line:{strokeColor:"#555",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""},arc:{strokeColor:"#555",width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"#555",width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"#555"}},fibonacci:{trendLine:{strokeColor:"black",width:1,lineStyle:"dash"},line:{strokeColor:"black",width:1},fill:{fillColor:"rgba(0, 0, 0, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"black"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"black",fontWeight:"normal",fontStyle:"normal",decoration:""},border:{enabled:!0,width:1,color:"#15C",lineStyle:t.LineStyle.SOLID},fill:{enabled:!0,color:"white"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}}},highlightedColumn:{fill:{fillColor:"rgba(90, 130, 182, 0.45)"}},button:{accept:{fill:{fillColor:"#BDBDBD"},line:{strokeColor:"green",width:1}},cancel:{fill:{fillColor:"#BDBDBD"},line:{strokeColor:"red",width:1}},none:{fill:{fillColor:"#BDBDBD"}}},positionBar:{short:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},long:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},orderBar:{buy:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}},sell:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}}}},Beet:{name:"Beet",scrollingPanelBackgroud:{fill:{fillColor:"#000"}},chart:{background:["rgb(255, 255, 255)","rgb(255, 255, 255)"],border:{width:1,strokeColor:"grey",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:"normal",fillColor:"#0d0d0d"},details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#1b1b1b"}}},splitter:{fillColor:"#999",hoverFillColor:"#DDD"},chartPanel:{grid:{width:1,strokeColor:"#CCC"},title:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"}},valueScale:{fill:{fillColor:"#dbd0d8"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},valueMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"}}},dateScale:{fill:{fillColor:"#dbd0d8"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:t.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"red",width:1,lineStyle:t.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},line:{width:1,strokeColor:"#333",lineStyle:"dashed"},fill:{fillColor:"#696969"}},zoomIn:{border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"#555"}}},line:{simple:{width:1,strokeColor:"#555"},mountain:{line:{width:1,strokeColor:"#555"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},step:{width:1,strokeColor:"#555"}},histogram:{line:{width:1,strokeColor:"#555"},coloredLine:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"green"}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"red"}}}},bar:{OHLC:{width:1,strokeColor:"#555"},HLC:{width:1,strokeColor:"#555"},HL:{width:1,strokeColor:"#555"},coloredOHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHL:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},candle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},renko:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},lineBreak:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"green"},fill:{fillEnabled:!0,fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"red"},fill:{fillEnabled:!0,fillColor:"red"}}},hollowCandle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}},upHollowCandle:{border:{width:1,strokeColor:"green"},wick:{width:1,strokeColor:"green"}},downHollowCandle:{border:{width:1,strokeColor:"red"},wick:{width:1,strokeColor:"red"}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},candleVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},equiVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},equiVolumeShadow:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#808080"}}}},indicator:{line1:{width:1,lineStyle:"solid",strokeColor:"#505050"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"yellow"},histogram:{color:"#32CD32"},blackText:{fontFamily:"Arial",fontSize:10,fontStyle:"normal",fillColor:"black"},levels:{line1:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FFD500"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"yellow"}}}},selectionMarker:{line:{strokeColor:"#777",width:1},fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"#15C"},centerPointFill:{fillColor:"white"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:t.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"black"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"rgba(255, 255, 255, 0.8)"}},abstract:{line:{strokeColor:"#555",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},trendAngle:{line:{strokeColor:"#555",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""},arc:{strokeColor:"#555",width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"#555",width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"#555"}},fibonacci:{trendLine:{strokeColor:"black",width:1,lineStyle:"dash"},line:{strokeColor:"black",width:1},fill:{fillColor:"rgba(0, 0, 0, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"black"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"black",fontWeight:"normal",fontStyle:"normal",decoration:""},border:{enabled:!0,width:1,color:"#15C",lineStyle:t.LineStyle.SOLID},fill:{enabled:!0,color:"white"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}}},highlightedColumn:{fill:{fillColor:"rgba(90, 130, 182, 0.45)"}},button:{accept:{fill:{fillColor:"#B9B0B6"},line:{strokeColor:"green",width:1}},cancel:{fill:{fillColor:"#B9B0B6"},line:{strokeColor:"red",width:1}},none:{fill:{fillColor:"#B9B0B6"}}},positionBar:{short:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},long:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},orderBar:{buy:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}},sell:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}}}},Cyan:{name:"Cyan",scrollingPanelBackgroud:{fill:{fillColor:"#000"}},chart:{background:["rgb(255, 255, 255)","rgb(255, 255, 255)"],border:{width:1,strokeColor:"grey",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:"normal",fillColor:"#0d0d0d"},details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#1b1b1b"}}},splitter:{fillColor:"#999",hoverFillColor:"#DDD"},chartPanel:{grid:{width:1,strokeColor:"#CCC"},title:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"}},valueScale:{fill:{fillColor:"#ebedf0"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},valueMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"}}},dateScale:{fill:{fillColor:"#ebedf0"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:t.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"red",width:1,lineStyle:t.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},line:{width:1,strokeColor:"#333",lineStyle:"dashed"},fill:{fillColor:"#696969"}},zoomIn:{border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"#555"}}},line:{simple:{width:1,strokeColor:"#555"},mountain:{line:{width:1,strokeColor:"#555"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},step:{width:1,strokeColor:"#555"}},histogram:{line:{width:1,strokeColor:"#555"},coloredLine:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"green"}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"red"}}}},bar:{OHLC:{width:1,strokeColor:"#555"},HLC:{width:1,strokeColor:"#555"},HL:{width:1,strokeColor:"#555"},coloredOHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHL:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},candle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},renko:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},lineBreak:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"green"},fill:{fillEnabled:!0,fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"red"},fill:{fillEnabled:!0,fillColor:"red"}}},hollowCandle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}},upHollowCandle:{border:{width:1,strokeColor:"green"},wick:{width:1,strokeColor:"green"}},downHollowCandle:{border:{width:1,strokeColor:"red"},wick:{width:1,strokeColor:"red"}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},candleVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},equiVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},equiVolumeShadow:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#808080"}}}},indicator:{line1:{width:1,lineStyle:"solid",strokeColor:"#505050"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"yellow"},histogram:{color:"#32CD32"},blackText:{fontFamily:"Arial",fontSize:10,fontStyle:"normal",fillColor:"black"},levels:{line1:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FFD500"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"yellow"}}}},selectionMarker:{line:{strokeColor:"#777",width:1},fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"#15C"},centerPointFill:{fillColor:"white"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:t.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"black"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"rgba(255, 255, 255, 0.8)"}},abstract:{line:{strokeColor:"#555",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},trendAngle:{line:{strokeColor:"#555",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""},arc:{strokeColor:"#555",width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"#555",width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"#555"}},fibonacci:{trendLine:{strokeColor:"black",width:1,lineStyle:"dash"},line:{strokeColor:"black",width:1},fill:{fillColor:"rgba(0, 0, 0, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"black"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"black",fontWeight:"normal",fontStyle:"normal",decoration:""},border:{enabled:!0,width:1,color:"#15C",lineStyle:t.LineStyle.SOLID},fill:{enabled:!0,color:"white"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}}},highlightedColumn:{fill:{fillColor:"rgba(90, 130, 182, 0.45)"}},button:{accept:{fill:{fillColor:"#BDBDBD"},line:{strokeColor:"green",width:1}},cancel:{fill:{fillColor:"#BDBDBD"},line:{strokeColor:"red",width:1}},none:{fill:{fillColor:"#BDBDBD"}}},positionBar:{short:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},long:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},orderBar:{buy:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}},sell:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}}}},Gray:{name:"Gray",scrollingPanelBackgroud:{fill:{fillColor:"#000"}},chart:{background:["rgb(255, 255, 255)","rgb(255, 255, 255)"],border:{width:1,strokeColor:"grey",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:"normal",fillColor:"#0d0d0d"},details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#1b1b1b"}}},splitter:{fillColor:"#999",hoverFillColor:"#DDD"},chartPanel:{grid:{width:1,strokeColor:"#CCC"},title:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"}},valueScale:{fill:{fillColor:"#d8d8d8"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},valueMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"}}},dateScale:{fill:{fillColor:"#d8d8d8"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:t.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"red",width:1,lineStyle:t.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},line:{width:1,strokeColor:"#333",lineStyle:"dashed"},fill:{fillColor:"#696969"}},zoomIn:{border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"#555"}}},line:{simple:{width:1,strokeColor:"#555"},mountain:{line:{width:1,strokeColor:"#555"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},step:{width:1,strokeColor:"#555"}},histogram:{line:{width:1,strokeColor:"#555"},coloredLine:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"green"}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"red"}}}},bar:{OHLC:{width:1,strokeColor:"#555"},HLC:{width:1,strokeColor:"#555"},HL:{width:1,strokeColor:"#555"},coloredOHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHL:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},candle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},renko:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},lineBreak:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"green"},fill:{fillEnabled:!0,fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"red"},fill:{fillEnabled:!0,fillColor:"red"}}},hollowCandle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}},upHollowCandle:{border:{width:1,strokeColor:"green"},wick:{width:1,strokeColor:"green"}},downHollowCandle:{border:{width:1,strokeColor:"red"},wick:{width:1,strokeColor:"red"}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},candleVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},equiVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},equiVolumeShadow:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#808080"}}}},indicator:{line1:{width:1,lineStyle:"solid",strokeColor:"#505050"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"yellow"},histogram:{color:"#32CD32"},blackText:{fontFamily:"Arial",fontSize:10,fontStyle:"normal",fillColor:"black"},levels:{line1:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FFD500"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"yellow"}}}},selectionMarker:{line:{strokeColor:"#777",width:1},fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"#15C"},centerPointFill:{fillColor:"white"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:t.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"black"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"rgba(255, 255, 255, 0.8)"}},abstract:{line:{strokeColor:"#555",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},trendAngle:{line:{strokeColor:"#555",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""},arc:{strokeColor:"#555",width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"#555",width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"#555"}},fibonacci:{trendLine:{strokeColor:"black",width:1,lineStyle:"dash"},line:{strokeColor:"black",width:1},fill:{fillColor:"rgba(0, 0, 0, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"black"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"black",fontWeight:"normal",fontStyle:"normal",decoration:""},border:{enabled:!0,width:1,color:"#15C",lineStyle:t.LineStyle.SOLID},fill:{enabled:!0,color:"white"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}}},highlightedColumn:{fill:{fillColor:"rgba(90, 130, 182, 0.45)"}},button:{accept:{fill:{fillColor:"#BDBDBD"},line:{strokeColor:"green",width:1}},cancel:{fill:{fillColor:"#BDBDBD"},line:{strokeColor:"red",width:1}},none:{fill:{fillColor:"#BDBDBD"}}},positionBar:{short:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},long:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},orderBar:{buy:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}},sell:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}}}},Olive:{name:"Olive",scrollingPanelBackgroud:{fill:{fillColor:"#000"}},chart:{background:["rgb(255, 255, 255)","rgb(255, 255, 255)"],border:{width:1,strokeColor:"grey",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:"normal",fillColor:"#0d0d0d"},details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#1b1b1b"}}},splitter:{fillColor:"#999",hoverFillColor:"#DDD"},chartPanel:{grid:{width:1,strokeColor:"#CCC"},title:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"}},valueScale:{fill:{fillColor:"#e2e7da"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},valueMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"}}},dateScale:{fill:{fillColor:"#e2e7da"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:t.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"red",width:1,lineStyle:t.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},line:{width:1,strokeColor:"#333",lineStyle:"dashed"},fill:{fillColor:"#696969"}},zoomIn:{border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"#555"}}},line:{simple:{width:1,strokeColor:"#555"},mountain:{line:{width:1,strokeColor:"#555"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},step:{width:1,strokeColor:"#555"}},histogram:{line:{width:1,strokeColor:"#555"},coloredLine:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"green"}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"red"}}}},bar:{OHLC:{width:1,strokeColor:"#555"},HLC:{width:1,strokeColor:"#555"},HL:{width:1,strokeColor:"#555"},coloredOHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHL:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},candle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},renko:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},lineBreak:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"green"},fill:{fillEnabled:!0,fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"red"},fill:{fillEnabled:!0,fillColor:"red"}}},hollowCandle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}},upHollowCandle:{border:{width:1,strokeColor:"green"},wick:{width:1,strokeColor:"green"}},downHollowCandle:{border:{width:1,strokeColor:"red"},wick:{width:1,strokeColor:"red"}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},candleVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},equiVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},equiVolumeShadow:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}}},indicator:{line1:{width:1,lineStyle:"solid",strokeColor:"#505050"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"yellow"},histogram:{color:"#32CD32"},blackText:{fontFamily:"Arial",fontSize:10,fontStyle:"normal",fillColor:"black"},levels:{line1:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FFD500"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"#808080"}}}},selectionMarker:{line:{strokeColor:"#777",width:1},fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"#15C"},centerPointFill:{fillColor:"white"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:t.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"black"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"rgba(255, 255, 255, 0.8)"}},abstract:{line:{strokeColor:"#555",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},trendAngle:{line:{strokeColor:"#555",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""},arc:{strokeColor:"#555",width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"#555",width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"#555"}},fibonacci:{trendLine:{strokeColor:"black",width:1,lineStyle:"dash"},line:{strokeColor:"black",width:1},fill:{fillColor:"rgba(0, 0, 0, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"black"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"black",fontWeight:"normal",fontStyle:"normal",decoration:""},border:{enabled:!0,width:1,color:"#15C",lineStyle:t.LineStyle.SOLID},fill:{enabled:!0,color:"white"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}}},highlightedColumn:{fill:{fillColor:"rgba(90, 130, 182, 0.45)"}},button:{accept:{fill:{fillColor:"#BDBDBD"},line:{strokeColor:"green",width:1}},cancel:{fill:{fillColor:"#BDBDBD"},line:{strokeColor:"red",width:1}},none:{fill:{fillColor:"#BDBDBD"}}},positionBar:{short:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},long:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},orderBar:{buy:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}},sell:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}}}},Orange:{name:"Orange",scrollingPanelBackgroud:{fill:{fillColor:"#000"}},chart:{background:["rgb(255, 255, 255)","rgb(255, 255, 255)"],border:{width:1,strokeColor:"grey",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:"normal",fillColor:"#0d0d0d"},details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#1b1b1b"}}},splitter:{fillColor:"#999",hoverFillColor:"#DDD"},chartPanel:{grid:{width:1,strokeColor:"#CCC"},title:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"}},valueScale:{fill:{fillColor:"#f1dcd4"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},valueMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"}}},dateScale:{fill:{fillColor:"#f1dcd4"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:t.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"red",width:1,lineStyle:t.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},line:{width:1,strokeColor:"#333",lineStyle:"dashed"},fill:{fillColor:"#696969"}},zoomIn:{border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"#555"}}},line:{simple:{width:1,strokeColor:"#555"},mountain:{line:{width:1,strokeColor:"#555"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},step:{width:1,strokeColor:"#555"}},histogram:{line:{width:1,strokeColor:"#555"},coloredLine:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"green"}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"red"}}}},bar:{OHLC:{width:1,strokeColor:"#555"},HLC:{width:1,strokeColor:"#555"},HL:{width:1,strokeColor:"#555"},coloredOHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHL:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},candle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},renko:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},lineBreak:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"green"},fill:{fillEnabled:!0,fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"red"},fill:{fillEnabled:!0,fillColor:"red"}}},hollowCandle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}},upHollowCandle:{border:{width:1,strokeColor:"green"},wick:{width:1,strokeColor:"green"}},downHollowCandle:{border:{width:1,strokeColor:"red"},wick:{width:1,strokeColor:"red"}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},candleVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},equiVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},equiVolumeShadow:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}}},indicator:{line1:{width:1,lineStyle:"solid",strokeColor:"#505050"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"yellow"},histogram:{color:"#32CD32"},blackText:{fontFamily:"Arial",fontSize:10,fontStyle:"normal",fillColor:"black"},levels:{line1:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FFD500"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"#808080"}}}},selectionMarker:{line:{strokeColor:"#777",width:1},fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"#15C"},centerPointFill:{fillColor:"white"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:t.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"black"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"rgba(255, 255, 255, 0.8)"}},abstract:{line:{strokeColor:"#555",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},trendAngle:{line:{strokeColor:"#555",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""},arc:{strokeColor:"#555",width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"#555",width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"#555"}},fibonacci:{trendLine:{strokeColor:"black",width:1,lineStyle:"dash"},line:{strokeColor:"black",width:1},fill:{fillColor:"rgba(0, 0, 0, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"black"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"black",fontWeight:"normal",fontStyle:"normal",decoration:""},border:{enabled:!0,width:1,color:"#15C",lineStyle:t.LineStyle.SOLID},fill:{enabled:!0,color:"white"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}}},highlightedColumn:{fill:{fillColor:"rgba(90, 130, 182, 0.45)"}},button:{accept:{fill:{fillColor:"#A07B76"},line:{strokeColor:"green",width:1}},cancel:{fill:{fillColor:"#A07B76"},line:{strokeColor:"red",width:1}},none:{fill:{fillColor:"#A07B76"}}},positionBar:{short:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},long:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},orderBar:{buy:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}},sell:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}}}},Purple:{name:"Purple",scrollingPanelBackgroud:{fill:{fillColor:"#000"}},chart:{background:["rgb(255, 255, 255)","rgb(255, 255, 255)"],border:{width:1,strokeColor:"grey",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:"normal",fillColor:"#0d0d0d"},details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#1b1b1b"}}},splitter:{fillColor:"#999",hoverFillColor:"#DDD"},chartPanel:{grid:{width:1,strokeColor:"#CCC"},title:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"}},valueScale:{fill:{fillColor:"#e5dfee"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},valueMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"}}},dateScale:{fill:{fillColor:"#e5dfee"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:t.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"red",width:1,lineStyle:t.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},line:{width:1,strokeColor:"#333",lineStyle:"dashed"},fill:{fillColor:"#696969"}},zoomIn:{border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"#555"}}},line:{simple:{width:1,strokeColor:"#555"},mountain:{line:{width:1,strokeColor:"#555"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},step:{width:1,strokeColor:"#555"}},histogram:{line:{width:1,strokeColor:"#555"},coloredLine:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"green"}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"red"}}}},bar:{OHLC:{width:1,strokeColor:"#555"},HLC:{width:1,strokeColor:"#555"},HL:{width:1,strokeColor:"#555"},coloredOHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHL:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},candle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},renko:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},lineBreak:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"green"},fill:{fillEnabled:!0,fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"red"},fill:{fillEnabled:!0,fillColor:"red"}}},hollowCandle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}},upHollowCandle:{border:{width:1,strokeColor:"green"},wick:{width:1,strokeColor:"green"}},downHollowCandle:{border:{width:1,strokeColor:"red"},wick:{width:1,strokeColor:"red"}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},candleVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},equiVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},equiVolumeShadow:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}}},indicator:{line1:{width:1,lineStyle:"solid",strokeColor:"#505050"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"yellow"},histogram:{color:"#32CD32"},blackText:{fontFamily:"Arial",fontSize:10,fontStyle:"normal",fillColor:"black"},levels:{line1:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FFD500"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"#808080"}}}},selectionMarker:{line:{strokeColor:"#777",width:1},fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"#15C"},centerPointFill:{fillColor:"white"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:t.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"black"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"rgba(255, 255, 255, 0.8)"}},abstract:{line:{strokeColor:"#555",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},trendAngle:{line:{strokeColor:"#555",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""},arc:{strokeColor:"#555",width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"#555",width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"#555"}},fibonacci:{trendLine:{strokeColor:"black",width:1,lineStyle:"dash"},line:{strokeColor:"black",width:1},fill:{fillColor:"rgba(0, 0, 0, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"black"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"black",fontWeight:"normal",fontStyle:"normal",decoration:""},border:{enabled:!0,width:1,color:"#15C",lineStyle:t.LineStyle.SOLID},fill:{enabled:!0,color:"white"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}}},highlightedColumn:{fill:{fillColor:"rgba(90, 130, 182, 0.45)"}},button:{accept:{fill:{fillColor:"#8F809A"},line:{strokeColor:"green",width:1}},cancel:{fill:{fillColor:"#8F809A"},line:{strokeColor:"red",width:1}},none:{fill:{fillColor:"#8F809A"}}},positionBar:{short:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},long:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},orderBar:{buy:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}},sell:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}}}},Sky:{name:"Sky",scrollingPanelBackgroud:{fill:{fillColor:"#000"}},chart:{background:["rgb(255, 255, 255)","rgb(255, 255, 255)"],border:{width:1,strokeColor:"grey",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:"normal",fillColor:"#0d0d0d"},details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#1b1b1b"}}},splitter:{fillColor:"#999",hoverFillColor:"#DDD"},chartPanel:{grid:{width:1,strokeColor:"#CCC"},title:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"}},valueScale:{fill:{fillColor:"#d6e2f0"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},valueMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"}}},dateScale:{fill:{fillColor:"#d6e2f0"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:t.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"red",width:1,lineStyle:t.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},line:{width:1,strokeColor:"#333",lineStyle:"dashed"},fill:{fillColor:"#696969"}},zoomIn:{border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"#555"}}},line:{simple:{width:1,strokeColor:"#555"},mountain:{line:{width:1,strokeColor:"#555"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},step:{width:1,strokeColor:"#555"}},histogram:{line:{width:1,strokeColor:"#555"},coloredLine:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"green"}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"red"}}}},bar:{OHLC:{width:1,strokeColor:"#555"},HLC:{width:1,strokeColor:"#555"},HL:{width:1,strokeColor:"#555"},coloredOHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHL:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},candle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},renko:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},lineBreak:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"green"},fill:{fillEnabled:!0,fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"red"},fill:{fillEnabled:!0,fillColor:"red"}}},hollowCandle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}},upHollowCandle:{border:{width:1,strokeColor:"green"},wick:{width:1,strokeColor:"green"}},downHollowCandle:{border:{width:1,strokeColor:"red"},wick:{width:1,strokeColor:"red"}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},candleVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},equiVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},equiVolumeShadow:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}}},indicator:{line1:{width:1,lineStyle:"solid",strokeColor:"#505050"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"yellow"},histogram:{color:"#32CD32"},blackText:{fontFamily:"Arial",fontSize:10,fontStyle:"normal",fillColor:"black"},levels:{line1:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FFD500"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"#808080"}}}},selectionMarker:{line:{strokeColor:"#777",width:1},fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"#15C"},centerPointFill:{fillColor:"white"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:t.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"black"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"rgba(255, 255, 255, 0.8)"}},abstract:{line:{strokeColor:"#555",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},trendAngle:{line:{strokeColor:"#555",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""},arc:{strokeColor:"#555",width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"#555",width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"#555"}},fibonacci:{trendLine:{strokeColor:"black",width:1,lineStyle:"dash"},line:{strokeColor:"black",width:1},fill:{fillColor:"rgba(0, 0, 0, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"black"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"black",fontWeight:"normal",fontStyle:"normal",decoration:""},border:{enabled:!0,width:1,color:"#15C",lineStyle:t.LineStyle.SOLID},fill:{enabled:!0,color:"white"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}}},highlightedColumn:{fill:{fillColor:"rgba(90, 130, 182, 0.45)"}},button:{accept:{fill:{fillColor:"#BDBDBD"},line:{strokeColor:"green",width:1}},cancel:{fill:{fillColor:"#BDBDBD"},line:{strokeColor:"red",width:1}},none:{fill:{fillColor:"#BDBDBD"}}},positionBar:{short:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},long:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},orderBar:{buy:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}},sell:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}}}},Teal:{name:"Teal",scrollingPanelBackgroud:{fill:{fillColor:"#000"}},chart:{background:["rgb(255, 255, 255)","rgb(255, 255, 255)"],border:{width:1,strokeColor:"grey",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:"normal",fillColor:"#0d0d0d"},details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#1b1b1b"}}},splitter:{fillColor:"#999",hoverFillColor:"#DDD"},chartPanel:{grid:{width:1,strokeColor:"#CCC"},title:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"}},valueScale:{fill:{fillColor:"#dee5e5"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},valueMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"}}},dateScale:{fill:{fillColor:"#dee5e5"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:t.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"red",width:1,lineStyle:t.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},line:{width:1,strokeColor:"#333",lineStyle:"dashed"},fill:{fillColor:"#696969"}},zoomIn:{border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"#555"}}},line:{simple:{width:1,strokeColor:"#555"},mountain:{line:{width:1,strokeColor:"#555"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},step:{width:1,strokeColor:"#555"}},histogram:{line:{width:1,strokeColor:"#555"},coloredLine:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"green"}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"red"}}}},bar:{OHLC:{width:1,strokeColor:"#555"},HLC:{width:1,strokeColor:"#555"},HL:{width:1,strokeColor:"#555"},coloredOHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHL:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},candle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},renko:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},lineBreak:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"green"},fill:{fillEnabled:!0,fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"red"},fill:{fillEnabled:!0,fillColor:"red"}}},hollowCandle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}},upHollowCandle:{border:{width:1,strokeColor:"green"},wick:{width:1,strokeColor:"green"}},downHollowCandle:{border:{width:1,strokeColor:"red"},wick:{width:1,strokeColor:"red"}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},candleVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},equiVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},equiVolumeShadow:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}}},indicator:{line1:{width:1,lineStyle:"solid",strokeColor:"#505050"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,strokeColor:"#FF0000"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"yellow"},histogram:{color:"#32CD32"},blackText:{fontFamily:"Arial",fontSize:10,fontStyle:"normal",fillColor:"black"},levels:{line1:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FFD500"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"#808080"}}}},selectionMarker:{line:{strokeColor:"#777",width:1},fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"#15C"},centerPointFill:{fillColor:"white"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:t.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"black"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"rgba(255, 255, 255, 0.8)"}},abstract:{line:{strokeColor:"#555",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},trendAngle:{line:{strokeColor:"#555",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""},arc:{strokeColor:"#555",width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"#555",width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"#555"}},fibonacci:{trendLine:{strokeColor:"black",width:1,lineStyle:"dash"},line:{strokeColor:"black",width:1},fill:{fillColor:"rgba(0, 0, 0, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"black"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"black",fontWeight:"normal",fontStyle:"normal",decoration:""},border:{enabled:!0,width:1,color:"#15C",lineStyle:t.LineStyle.SOLID},fill:{enabled:!0,color:"white"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}}},highlightedColumn:{fill:{fillColor:"rgba(90, 130, 182, 0.45)"}},button:{accept:{fill:{fillColor:"#BDBDBD"},line:{strokeColor:"green",width:1}},cancel:{fill:{fillColor:"#BDBDBD"},line:{strokeColor:"red",width:1}},none:{fill:{fillColor:"#BDBDBD"}}},positionBar:{short:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},long:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},orderBar:{buy:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}},sell:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}}}}}}(StockChartX=StockChartX||{}),this&&this.__awaiter||function(n,a,l,s){return new(l=l||Promise)(function(t,e){function i(t){try{r(s.next(t))}catch(t){e(t)}}function o(t){try{r(s.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(i,o)}r((s=s.apply(n,a||[])).next())})}),__generator=this&&this.__generator||function(o,r){var n,a,l,s={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(i){return function(t){var e=[i,t];if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(l=a[2&e[0]?"return":e[0]?"throw":"next"])&&!(l=l.call(a,e[1])).done)return l;switch(a=0,(e=l?[0,l.value]:e)[0]){case 0:case 1:l=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,a=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(l=0<(l=s.trys).length&&l[l.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!l||e[1]>l[0]&&e[1]<l[3])){s.label=e[1];break}if(6===e[0]&&s.label<l[1]){s.label=l[1],l=e;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(e);break}l[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(o,s)}catch(t){e=[6,t],a=0}finally{n=l=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},__extends=(!function(i){"use strict";var t=this,o=jQuery,e="scxThemes",r=(n.save=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,(new i.LocalDataStore).save(e,JSON.stringify(i.Theme))];case 1:return t.sent(),[2]}})})},n.load=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,(new i.LocalDataStore).load(e)];case 1:return[2,t.sent()]}})})},n.autoSave=!1,n);function n(){}i.ThemeStore=r,o(function(){return __awaiter(t,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,r.load()];case 1:return e=t.sent(),i.Theme=o.extend(!0,{},i.Theme,e?JSON.parse(e):null),[3,3];case 2:return t.sent(),i.UI.Notification.error("Themes are not loaded."),[3,3];case 3:return o(window).on("beforeunload.scxThemeStore",function(){r.autoSave&&r.save()}),[2]}})})})}(StockChartX=StockChartX||{}),!function(t){"use strict";function e(t){this.left=0,this.top=0,this.width=0,this.height=0,this.left=(t=t||{}).left||0,this.top=t.top||0,this.width=t.width||0,this.height=t.height||0}Object.defineProperty(e.prototype,"bottom",{get:function(){return this.top+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.left+this.width},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this)},e.prototype.equals=function(t){return t&&this.left===t.left&&this.top===t.top&&this.width===t.width&&this.height===t.height},e.prototype.toString=function(){return"[left: "+this.left+", top: "+this.top+", width: "+this.width+", height: "+this.height+"]"},e.prototype.containsPoint=function(t){return t.x>=this.left&&t.x<=this.right&&t.y>=this.top&&t.y<=this.bottom},e.prototype.cropLeft=function(t){t=t.right;this.left<t&&(this.width=this.right-t,this.left=t)},e.prototype.cropRight=function(t){this.right>=t.left&&(this.width=t.left-1-this.left)},e.prototype.cropTop=function(t){t=t.bottom;this.top<t&&(this.height=this.bottom-t,this.top=t)},e.prototype.cropBottom=function(t){this.bottom>t.top&&(this.height=t.top-this.top)},e.prototype.copyFrom=function(t){this.left=t.left,this.top=t.top,this.width=t.width,this.height=t.height},e.prototype.applyPadding=function(t){t.left&&(this.left+=t.left,this.width-=t.left),t.top&&(this.top+=t.top,this.height-=t.top),t.right&&(this.width-=t.right),t.bottom&&(this.height-=t.bottom)},t.Rect=e}(StockChartX=StockChartX||{}),!function(t){"use strict";var r;(r=t.Geometry||(t.Geometry={})).REGULAR_DEVIATION=t.Environment.isMobile?20:5,r.MAGNET_DEVIATION=t.Environment.isMobile?40:15,r.DEVIATION=r.REGULAR_DEVIATION,r.length=function(t,e){var i=Math.abs(e.x-t.x),e=Math.abs(e.y-t.y),t=Math.sqrt(i*i+e*e);return Math.round(t)},r.xProjectionLength=function(t,e){return Math.abs(t.x-e.x)},r.yProjectionLength=function(t,e){return Math.abs(t.y-e.y)},r.isValueNearValue=function(t,e){return Math.abs(t-e)<=r.DEVIATION},r.isValueBetweenOrNearValues=function(t,e,i){return t>=Math.min(e,i)-r.DEVIATION&&t<=Math.max(e,i)+r.DEVIATION},r.isPointNearPoint=function(t,e){if(Array.isArray(e)){for(var i=0,o=e;i<o.length;i++){var r=o[i];if(this.isPointNearPoint(t,r))return!0}return!1}return this.isValueNearValue(t.x,e.x)&&this.isValueNearValue(t.y,e.y)},r.isPointNearRectPoints=function(t,e,i){var o=Math.min(e.x,i.x),r=Math.max(e.x,i.x),n=Math.min(e.y,i.y),e=Math.max(e.y,i.y);return!!this.isPointNearLine(t,{x:o,y:e},{x:o,y:n})||(!!this.isPointNearLine(t,{x:o,y:n},{x:r,y:n})||(!!this.isPointNearLine(t,{x:r,y:n},{x:r,y:e})||this.isPointNearLine(t,{x:r,y:e},{x:o,y:e})))},r.isPointInsideOrNearRect=function(t,e){return this.isValueBetweenOrNearValues(t.x,e.left,e.left+e.width)&&this.isValueBetweenOrNearValues(t.y,e.top,e.top+e.height)},r.isPointInsideOrNearRectPoints=function(t,e,i){var o=Math.min(e.x,i.x),r=Math.max(e.x,i.x),n=Math.min(e.y,i.y),e=Math.max(e.y,i.y);return this.isValueBetweenOrNearValues(t.x,o,r)&&this.isValueBetweenOrNearValues(t.y,n,e)},r.isPointNearCircle=function(t,e,i){return t=this.length(e,t),e="number"==typeof i?i:this.length(e,i),this.isValueNearValue(t,e)},r.isPointInsideOrNearCircle=function(t,e,i){return t=this.length(e,t),e="number"==typeof i?i:this.length(e,i),this.isValueBetweenOrNearValues(t,0,e)},r.isPointNearPolygon=function(t,e){if(e.length<2)return!1;for(var i=0;i<e.length-1;i++)if(this.isPointNearLine(t,e[i],e[i+1]))return!0;return this.isPointNearLine(t,e[e.length-1],e[0])},r.isPointNearLine=function(t,e,i){if(!this.isPointInsideOrNearRectPoints(t,e,i))return!1;if(Math.abs(e.x-i.x)<=r.DEVIATION)return!0;var i=(e.y-i.y)/(e.x-i.x),o=Math.abs(180*Math.atan(i)/Math.PI);return Math.abs(o-90)<=10||Math.abs(o-270)<=10?(o=(t.y-(e.y-e.x*i))/i,this.isValueNearValue(o,t.x)):(o=e.y+i*(t.x-e.x),this.isValueNearValue(o,t.y))},r.isPointNearPolyline=function(t,e){for(var i=0,o=e.length;i<o-1;i++)if(this.isPointNearLine(t,e[i],e[i+1]))return!0;return!1},r.isPointNearEllipse=function(t,e,i){var o=Math.abs(i.x-e.x),i=Math.abs(i.y-e.y);return this.isPointNearEllipseWithRadiuses(t,e,o,i)},r.isPointNearEllipseWithRadiuses=function(t,e,i,o){var r=t.x-e.x,t=t.y-e.y;return.8<(e=r*r/(i*i)+t*t/(o*o))&&e<1.3},r.intersectionPoints=function(t,e,i,o){var r=(t.x-e.x)*(o.y-i.y)-(t.y-e.y)*(o.x-i.x),o=(t.x-i.x)*(o.y-i.y)-(t.y-i.y)*(o.x-i.x),i=0==(i=(t.x-e.x)*(t.y-i.y)-(t.y-e.y)*(t.x-i.x))&&0==r?0:i/r;if(0<=(o=0==o&&0==r?0:o/r)&&o<=1&&0<=i&&i<=1)return{x:t.x+o*(e.x-t.x),y:t.y+o*(e.y-t.y)}}}(StockChartX=StockChartX||{}),!function(t){"use strict";function e(){this._eventsDispatcher=new t.EventsDispatcher,this._suppressEvents=!1,this._event={type:null,sender:this,target:this,value:void 0,oldValue:void 0}}e.prototype.suppressEvents=function(t){var e=this._suppressEvents;return this._suppressEvents=t=void 0===t?!0:t,e},e.prototype.on=function(t,e,i){return this._eventsDispatcher.on(t,e,i),this},e.prototype.off=function(t,e){return this._eventsDispatcher.off(t,e),this},e.prototype.fire=function(t,e){this._suppressEvents||(e&&(e.sender=this),this._eventsDispatcher.fire(t,e))},e.prototype.fireValueChanged=function(t,e,i){this.fireTargetValueChanged(this,t,e,i)},e.prototype.fireTargetValueChanged=function(t,e,i,o){var r;this._suppressEvents||((r=this._event).target=t||this,r.value=i,r.oldValue=o,this.fire(e,r))},t.EventableObject=e}(StockChartX=StockChartX||{}),!function(c){"use strict";c.EVENT_DELIMITER=" ";function t(){this._listeners={}}t.prototype.on=function(t,e,i){for(var t=t.split(c.EVENT_DELIMITER),o=this._listeners,r=0,n=t;r<n.length;r++){var a,l=n[r];l&&(a=(l=l.split("."))[0],l=l[1]||"",o[a]||(o[a]=[]),o[a].push({name:l,handler:e,target:i}))}},t.prototype.off=function(t,e){for(var i=0,o=t.split(c.EVENT_DELIMITER);i<o.length;i++){var r=o[i];if(r){var r=r.split("."),n=r[0],a=r[1]||"";if(n)this._off(n,a,e);else{var l,s=this._listeners;for(l in s)s.hasOwnProperty(l)&&this._off(l,a,e)}}}},t.prototype._off=function(t,e,i){e=e||"";var o=this._listeners[t];if(o){for(var r=0;r<o.length;r++)o[r].name!==e||i&&i!==o[r].target||(o.splice(r,1),r--);0===o.length&&delete this._listeners[t]}},t.prototype.fire=function(t,e){var i=this._listeners[t];if(i){(e=e||{}).type=t;for(var o=0,r=i;o<r.length;o++)r[o].handler(e)}},c.EventsDispatcher=t}(StockChartX=StockChartX||{}),!function(t){"use strict";function e(){this._suppressEvents=!1}e.prototype.suppressEvents=function(t){var e=this._suppressEvents;return this._suppressEvents=t=void 0===t?!0:t,e},e.prototype.fire=function(t,e,i){var o=this.chart;o&&!this._suppressEvents&&o.fireTargetValueChanged(this,t,e,i)},t.ChartEventsExtender=e}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__awaiter=this&&this.__awaiter||function(n,a,l,s){return new(l=l||Promise)(function(t,e){function i(t){try{r(s.next(t))}catch(t){e(t)}}function o(t){try{r(s.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(i,o)}r((s=s.apply(n,a||[])).next())})},__generator=this&&this.__generator||function(o,r){var n,a,l,s={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(i){return function(t){var e=[i,t];if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(l=a[2&e[0]?"return":e[0]?"throw":"next"])&&!(l=l.call(a,e[1])).done)return l;switch(a=0,(e=l?[0,l.value]:e)[0]){case 0:case 1:l=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,a=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(l=0<(l=s.trys).length&&l[l.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!l||e[1]>l[0]&&e[1]<l[3])){s.label=e[1];break}if(6===e[0]&&s.label<l[1]){s.label=l[1],l=e;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(e);break}l[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(o,s)}catch(t){e=[6,t],a=0}finally{n=l=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},__extends=(!function(h){"use strict";var i,s=jQuery,n=30,a=0,t=(h.ViewsPath="view/",h.ChartState={NORMAL:0,RESIZING_PANELS:1,USER_DRAWING:2,ZOOM_IN:3},Object.freeze(h.ChartState),h.ChartEvent={WINDOW_MODE_CHANGED:"chartWindowModeChanged",TOOLBAR_LOADED:"chartToolbarLoaded",SCROLLBAR_LOADED:"chartScrollbarLoaded",STATE_CHANGED:"chartStateChanged",TIME_INTERVAL_CHANGED:"chartTimeIntervalChanged",INDICATOR_ADDED:"chartIndicatorAdded",INDICATOR_REMOVED:"chartIndicatorRemoved",THEME_CHANGED:"chartThemeChanged",GLOBAL_THEME_CHANGED:"chartGlobalThemeChanged",PRICE_STYLE_CHANGED:"chartPriceStyleChanged",HOVER_RECORD_CHANGED:"chartHoverRecordChanged",INSTRUMENT_CHANGED:"chartInstrumentChanged",SYMBOL_ENTERED:"chartSymbolEntered",TIME_FRAME_CHANGED:"chartTimeFrameChanged",CROSS_HAIR_CHANGED:"chartCrossHairChanged",STATE_LOADED:"chartStateLoaded",LOCALE_CHANGED:"chartLocaleChanged",ENABLE_KEYBOARD_EVENTS_CHANGED:"chartEnableKeyboardEventsChanged",ENABLE_MOUSE_EVENTS_CHANGED:"chartEnableMouseEventsChanged",VALUE_SCALE_ADDED:"chartValueScaleAdded",VALUE_SCALE_REMOVED:"chartValueScaleRemoved",USER_DRAWING_STARTED:"chartUserDrawingStarted",USER_DRAWING_FINISHED:"chartUserDrawingFinished",USER_DRAWING_CANCELLED:"chartUserDrawingCancelled",PANEL_ADDED:"chartPanelAdded",PANEL_REMOVED:"chartPanelRemoved",DATE_SCALE_THEME_CHANGED:"dateScaleThemeChanged",FIRST_VISIBLE_RECORD_CHANGED:"firstVisibleRecordChanged",LAST_VISIBLE_RECORD_CHANGED:"lastVisibleRecordChanged",HISTORY_LOADED:"chartHistoryLoaded",MORE_HISTORY_REQUESTED:"chartMoreHistoryRequested",ZOOM_IN_STARTED:"chartZoomInStarted",ZOOM_IN_FINISHED:"chartZoomInFinished",ZOOM_IN_CANCELLED:"chartZoomInCancelled",SHOW_INSTRUMENT_WATERMARK_CHANGED:"chartShowInstrumentWatermarkChanged",HIGHLIGHTED_COLUMN_ADDED:"highlightedColumnAdded",HIGHLIGHTED_COLUMN_REMOVED:"highlightedColumnRemoved",SHOW_WAITING_BAR:"showWaitingBar",HIDE_WAITING_BAR:"hideWaitingBar"},Object.freeze(h.ChartEvent),"scxRootContainer"),e="scxContainer",o="scxBackground",r="scxUnSelective",l="scxTheme",c={interval:1,periodicity:h.Periodicity.DAY},u={interval:3,periodicity:h.Periodicity.DAY},f=(h.DEFAULT_BARS_COUNT=384,h.DEFAULT_QUANTITY=1,".scxChart"),d="localize",p=(h.version="2.22.2",i=h.EventableObject,__extends(y,i),Object.defineProperty(y,"version",{get:function(){return h.version},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"rootDiv",{get:function(){return this._rootDiv},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"dateScale",{get:function(){return this._dateScale},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"valueScales",{get:function(){return this._valueScales},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"valueScale",{get:function(){return this._valueScales[0]},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"chartPanelsContainer",{get:function(){return this._chartPanelsContainer},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"dataManager",{get:function(){return this._dataManager},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"timeInterval",{get:function(){return h.TimeFrame.timeFrameToTimeInterval(this.timeFrame)},set:function(t){t=parseInt(t,10);if(!h.JsUtil.isPositiveNumber(t))throw new Error("Time interval must be greater than 0.");this._timeFrame=h.TimeFrame.timeIntervalToTimeFrame(t),this.fireValueChanged(h.ChartEvent.TIME_INTERVAL_CHANGED,t)},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"timeFrame",{get:function(){return this._timeFrame},set:function(t){if(!h.JsUtil.isPositiveNumber(t.interval))throw new Error("Time frame must be greater than 0.");this._newBarsRequest={kind:h.RequestKind.BARS,startDate:this._startDate,endDate:this._endDate},this._timeFrame=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"chartPanelsFrame",{get:function(){return this._chartPanelsFrame},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"incomePercentagePrecision",{get:function(){return this._incomePercentagePrecision},set:function(t){if(t<0)throw new Error("Income percentage precision can't be negative");this._incomePercentagePrecision=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"incomePrecision",{get:function(){return this._incomePrecision},set:function(t){if(t<0)throw new Error("Income precision can't be negative");this._incomePrecision=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"instrument",{get:function(){return this._instrument},set:function(t){var e,i=this._instrument;i!==t&&(null==t.precision&&(e=t.tickSize.toString().split(".")[1],t.precision=null!=e?e.length:2),this._instrument=t,this._newBarsRequest={kind:h.RequestKind.BARS,startDate:this._startDate,endDate:this._endDate},this.fireValueChanged(h.ChartEvent.INSTRUMENT_CHANGED,t,i))},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"indicators",{get:function(){return this._indicators},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"valueMarker",{get:function(){return this._valueMarker},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"dateMarker",{get:function(){return this._dateMarker},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"locale",{get:function(){return this._options.locale},set:function(t){var e=this._options.locale;e!==t&&(this._options.locale=t,this.localize(),this.fireValueChanged(h.ChartEvent.LOCALE_CHANGED,t,e))},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"keyboardEventsEnabled",{get:function(){return this._options.enableKeyboardEvents},set:function(t){this._options.enableKeyboardEvents=t,this.fireValueChanged(h.ChartEvent.ENABLE_KEYBOARD_EVENTS_CHANGED,this._options.enableKeyboardEvents)},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"mouseEventsEnabled",{get:function(){return this._options.enableMouseEvents},set:function(t){this._options.enableMouseEvents=t,this.fireValueChanged(h.ChartEvent.ENABLE_MOUSE_EVENTS_CHANGED,this._options.enableMouseEvents)},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"scrollEnabled",{get:function(){return this._options.scrollEnabled},set:function(t){this._options.scrollEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"valueScaleType",{get:function(){return this.mainPanel.valueScale.valueScaleType},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"zoomEnabled",{get:function(){return this._options.zoomEnabled},set:function(t){this._options.zoomEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"zoomAutoSave",{get:function(){return this._options.zoomAutoSave},set:function(t){this._options.zoomAutoSave=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"scale",{get:function(){return this._options.scale},set:function(t){if(t<=0)throw new Error("Please provide positive values more than 0");if(1===t)throw new Error("\n                    You can set 1 only in the initial config, it depends on canvas restrictions.\n                    https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/scale\n                ");this._options.scale=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"theme",{get:function(){return this._options.theme},set:function(t){var e=this._options.theme;this._options.theme=t,e&&s("body").removeClass(""+l+e.name),t&&t.name&&!h.Theme[t.name]&&(h.Theme[t.name]=t),this.applyTheme(),this.fireValueChanged(h.ChartEvent.THEME_CHANGED,t,e)},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"showBarInfoInTitle",{get:function(){return this._options.showBarInfoInTitle},set:function(t){this._options.showBarInfoInTitle=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"showInstrumentWatermark",{get:function(){return this._options.showInstrumentWatermark},set:function(t){var e=this.showInstrumentWatermark;t!==e&&(this._options.showInstrumentWatermark=t,this.fireValueChanged(h.ChartEvent.SHOW_INSTRUMENT_WATERMARK_CHANGED,t,e))},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"priceStyle",{get:function(){return this._priceStyle},set:function(t){var e,i,o,r,n=this.priceStyle;n!==t&&(r=this.dateRange(),this._priceStyle.destroy(),(t.chart=this)._priceStyle=t,this._priceStyle.apply(),i=(o=(e=this.dateScale).projection).recordByX(o.xByDate(r.startDate,!1),!1),o=o.recordByX(o.xByDate(r.endDate,!1),!1),(r=this.smartPriceStyleHandler)&&r.enabled||(e.canSetVisibleRecord(i)&&e.canSetVisibleRecord(o)?(this.firstVisibleRecord=i,this.lastVisibleRecord=o-1-i>this.recordCount?this.recordCount:o-1,this.lastVisibleRecord-this.firstVisibleRecord<e.minVisibleRecords?this.setNeedsAutoScaleAll():this.setNeedsAutoScale()):this.setNeedsAutoScaleAll()),this.setNeedsLayout(),this.setNeedsUpdate(),this.fireValueChanged(h.ChartEvent.PRICE_STYLE_CHANGED,t,n))},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"priceStyleKind",{get:function(){var t=this.priceStyle;return t&&t.constructor.className},set:function(t){var e=this.priceStyle,t=this.priceStyle=h.PriceStyle.create(t);e&&(t.showValueLines=e.showValueLines,t.extendValueLines=e.extendValueLines);for(var i=0,o=this.chartPanels;i<o.length;i++)o[i].handleResize()},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"hoveredRecord",{get:function(){return this._hoverRecord},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"crossHair",{get:function(){return this._crossHair},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"sessionBreakLines",{get:function(){return this._sessionBreakLines},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"selectedObject",{get:function(){return this._selectedObject},set:function(t){this._selectedObject=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"selectionMarker",{get:function(){return this._selectionMarker},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"showDrawings",{get:function(){return this._showDrawings},set:function(t){this._showDrawings=!!t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"showDrawingTooltips",{get:function(){return this._showDrawingTooltips},set:function(t){this._showDrawingTooltips=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"stayInDrawingMode",{get:function(){return this._stayInDrawingMode},set:function(t){this._stayInDrawingMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"xGridVisible",{get:function(){return this._options.xGridVisible},set:function(t){this._options.xGridVisible=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"yGridVisible",{get:function(){return this._options.yGridVisible},set:function(t){this._options.yGridVisible=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"state",{get:function(){return this._state},set:function(t){var e=this._state;e!==t&&(this._state=t,this.fireValueChanged(h.ChartEvent.STATE_CHANGED,t,e))},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"windowModeHandler",{get:function(){return this._windowModeHandler},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"windowMode",{get:function(){return this._windowModeHandler.mode},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"keyboardHandler",{get:function(){return this._keyboardHandler},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"size",{get:function(){return{width:this._rootDiv.width(),height:this._rootDiv.height()}},set:function(t){this._container.css("width","auto").css("height","auto"),this._rootDiv.width(t.width).height(t.height)},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"cssSize",{get:function(){return this._cssSize},set:function(t){this._cssSize=t,this.windowMode===h.WindowMode.NORMAL&&(this._rootDiv.css(this._cssSize),this._container.css("width","").css("height",""))},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"mainPanel",{get:function(){return this._priceStyle.chartPanel||this._chartPanelsContainer.panels[0]},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"recordCount",{get:function(){return this.primaryDataSeries(h.DataSeriesSuffix.DATE).length},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"firstVisibleRecord",{get:function(){return this._dateScale.firstVisibleRecord},set:function(t){this._dateScale.firstVisibleRecord=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"lastVisibleRecord",{get:function(){return this._dateScale.lastVisibleRecord},set:function(t){this._dateScale.lastVisibleRecord=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"firstVisibleIndex",{get:function(){return this._dateScale.firstVisibleIndex},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"lastVisibleIndex",{get:function(){return this._dateScale.lastVisibleIndex},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"chartPanels",{get:function(){return this._chartPanelsContainer.panels},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"barsCount",{get:function(){return this._barsCount},set:function(t){this._barsCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"spread",{get:function(){return this._spread},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"highlightedColumns",{get:function(){return this._highlightedColumns},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"crossHairType",{get:function(){return this._crossHair.crossHairType},set:function(t){this._crossHair.crossHairType=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"useWaitingBar",{get:function(){return this._useWaitingBar},set:function(t){this._useWaitingBar=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"zoomInView",{get:function(){return this._zoomInView},set:function(t){this._zoomInView=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"datafeed",{get:function(){return this._datafeed},set:function(t){this._datafeed=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"navigation",{get:function(){return this._navigation},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"toolbar",{get:function(){return this._toolbar},set:function(t){this._toolbar=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"scrollbar",{get:function(){return this._scrollbar},set:function(t){this._scrollbar=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"multiChartRootContainer",{get:function(){return this._multiChartRootContainer},set:function(t){this._multiChartRootContainer=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"smartPriceStyleHandler",{get:function(){return this._smartPriceStyleHandler},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"instrumentComparisonHandler",{get:function(){return this._instrumentComparisonHandler},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"readyLoadMoreHistory",{get:function(){return this._currentBarsRequest&&!this.datafeed.isRequestAlive(this._currentBarsRequest)&&this._instrumentComparisonHandler.readyLoadMoreHistory},enumerable:!0,configurable:!0}),y.prototype._handleLocalizeEvent=function(t,e){t.data.localize(e)},y.prototype._handleWindowResizeEvent=function(t,e){var i=t.data,o=i.cssSize;i.setNeedsLayout(),i.updateTradingPanelWidth(),"string"!=typeof o.width&&"string"!=typeof o.height||t.data.setNeedsUpdate(!0),this.scrollEnabled&&null!=this.scrollbar&&this.scrollbar.adjustDimensions(),i.setNeedsUpdate(!0)},y.prototype.updateTradingPanelWidth=function(){var t=this.theme.tradingPanel;t=t.tradingBarUnit===h.TradingPanelUnit.Pixels?t.tradingBarLength:(this.mainPanel.chartPanelsContainer.frame.width-this.valueScale.rightPanel.frame.width)*t.tradingBarLength/100,this.tradingPanelWidth=t/2},y.prototype.updateOHLVData=function(t){this.mainPanel.updateOHLVData(t)},y.prototype.localize=function(t){h.Localization.localize(this,t)},y.prototype.localizeText=function(e,i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,h.Localization.localizeText(this,e,{replace:i})]})})},y.prototype.setDates=function(t,e){this._startDate=t,this._endDate=e,this._newBarsRequest={startDate:t,endDate:e,kind:h.RequestKind.BARS}},y.prototype.sendBarsRequest=function(){var t=this._newBarsRequest;this._datafeed&&t&&(this._currentBarsRequest&&(this._datafeed.cancel(this._currentBarsRequest),this._currentBarsRequest=null),t.id||(t.id=h.Datafeed.nextRequestId()),(t.chart=this)._currentBarsRequest=t,this._datafeed.send(t),this._newBarsRequest=null)},y.prototype.requestMoreBars=function(){this.readyLoadMoreHistory&&(this._newBarsRequest={kind:h.RequestKind.MORE_BARS,count:h.DEFAULT_BARS_COUNT,endDate:this._dataManager.dateDataSeries.firstValue},this.sendBarsRequest(),this.fireValueChanged(h.ChartEvent.MORE_HISTORY_REQUESTED))},y.prototype.getBounds=function(){return new h.Rect({left:0,top:0,width:this._rootDiv.width(),height:this._rootDiv.height()})},y.prototype.selectObject=function(t){var e=this._selectedObject;return!(!e&&!t)&&((e!==t||!t.selected)&&(e&&(e.selected=!1),t&&(t.selected=!0),this.selectedObject=t,this.setNeedsUpdate(),!0))},y.prototype.addValueScale=function(t){var e=this.valueScales;if(t){for(var i=0,o=e;i<o.length;i++)if(o[i]===t)throw new Error("Value scale has been added already.")}else t=new h.ValueScale({chart:this});return e.push(t),this.fireValueChanged(h.ChartEvent.VALUE_SCALE_ADDED,t),t},y.prototype.removeValueScale=function(t){if(Array.isArray(t))for(var e=0,i=t;e<i.length;e++){var o=i[e];this.removeValueScale(o)}else for(var r=this.valueScales,n=0;n<r.length;n++)if(r[n]===t){if(0===n)throw new Error("Cannot remove main scale.");r.splice(n,1),this.fireValueChanged(h.ChartEvent.VALUE_SCALE_REMOVED,n);break}},y.prototype.applyAutoScroll=function(t){this.mainPanel.valueScale.applyAutoScroll(t),t===h.BarsUpdateKind.NEW_BAR&&this.dateScale.applyAutoScroll(t)},y.prototype.addIndicators=function(t){if(Array.isArray(t)){for(var e=[],i=0,o=t;i<o.length;i++){var r=o[i];e.push(this.addIndicators(r))}return e}var n=t;if(n instanceof h.Indicator){for(var t=this._indicators,a=0,l=t;a<l.length;a++)if((r=l[a])===n)return n;return n.chart=this,t.push(n),n.update(),this.fireValueChanged(h.ChartEvent.INDICATOR_ADDED,n),this.setNeedsLayout(),this.setNeedsUpdate(),n}if("object"==typeof n)return t=s.extend(!0,{chart:this},n),n=h.Indicator.deserialize(t),this.addIndicators(n);throw new TypeError("Unknown indicator.")},y.prototype.removeIndicators=function(t,o){var r=this;if(void 0===o&&(o=!0),Array.isArray(t))for(var e=0,i=t;e<i.length;e++)(c=i[e])&&this.removeIndicators(c,o);else for(var n=this._indicators,a=t,l=function(t){var e,i=t.chartPanel;i&&(i.removePlot(t.plots),t.removeLineLevels(),o&&0===i.plots.length&&i!==r.mainPanel&&r._chartPanelsContainer.removePanel(i),((e=i===r.mainPanel)&&0===i.indicators.length||!e&&1===i.indicators.length)&&(i.showIndicatorTitles=!0)),t.destroy(),r.setNeedsUpdate(!0),r.fireValueChanged(h.ChartEvent.INDICATOR_REMOVED,t)},s=0;s<n.length;s++)if(a){if(n[s]===a){n.splice(s,1),l(a);break}}else{var c=n[s];n.splice(s,1),l(c),s--}},y.prototype.updateIndicators=function(){for(var t=0,e=this._indicators;t<e.length;t++)e[t].update()},y.prototype.saveIndicatorsState=function(){for(var t=[],e=this.chartPanels,i=this._indicators,o=0,r=e;o<r.length;o++)for(var n=r[o],a=0,l=i;a<l.length;a++){var s=l[a];s.chartPanel===n&&t.push(s.serialize())}return t},y.prototype.loadIndicatorsState=function(t){"string"==typeof t&&(t=JSON.parse(t)),this.removeIndicators(),t&&this.addIndicators(t)},y.prototype.savePlotsState=function(){for(var t={},e=this.chartPanels,i=this._indicators,o=0,r=e;o<r.length;o++)for(var n=r[o],a=0,l=i;a<l.length;a++){var s=l[a],c=s.plots[0];s.chartPanel===n&&c instanceof h.AdvancedPlot&&(t[s.className]=c.settings)}return t},y.prototype.loadPlotsState=function(t){"string"==typeof t&&(t=JSON.parse(t));for(var e=this.chartPanels,i=this._indicators,o=0,r=e;o<r.length;o++)for(var n=r[o],a=0,l=i;a<l.length;a++){var s=l[a],c=s.plots[0];s.chartPanel===n&&c instanceof h.AdvancedPlot&&(c.settings=t[s.className])}},y.prototype.saveDrawingsState=function(){for(var t=[],e=0,i=this._chartPanelsContainer.panels;e<i.length;e++)for(var o=0,r=i[e].drawings;o<r.length;o++){var n=r[o];t.push(n.saveState())}return t},y.prototype.loadDrawingsState=function(t){if("string"==typeof t&&(t=JSON.parse(t)),this.removeDrawings(),t)for(var e=this._chartPanelsContainer.panels,i=0,o=t;i<o.length;i++){var r=o[i],n=e[r.panelIndex];n&&((r=h.Drawing.deserialize(r))&&n.addDrawings(r))}},y.prototype.removeDrawings=function(){for(var t=0,e=this._chartPanelsContainer.panels;t<e.length;t++)e[t].removeDrawings()},y.prototype.saveState=function(){for(var t=[],e=0,i=this.valueScales;e<i.length;e++){var o=i[e];t.push(o.saveState())}return{chart:s.extend(!0,{},this._options),timeFrame:this._timeFrame,periodToLoad:this.periodToLoad,priceStyle:this._priceStyle.saveState(),dateScale:this._dateScale.saveState(),valueScales:t,crossHair:this._crossHair.saveState(),chartPanelsContainer:this._chartPanelsContainer.saveState(),instrumentComparisonHandler:this.instrumentComparisonHandler.saveState(),indicators:this.saveIndicatorsState(),barsCount:this.zoomAutoSave&&this._barsCount,plots:this.savePlotsState(),drawings:this.saveDrawingsState()}},y.prototype.loadState=function(t){if(!t)return this.sendBarsRequest(),void this.localize();"string"==typeof t&&(t=JSON.parse(t)),this.suppressEvents(),this.removeIndicators(),this._loadOptionsState(t.chart),this._dateScale.loadState(t.dateScale),this._restoreValueScales(t),this._crossHair.loadState(t.crossHair),this._chartPanelsContainer.loadState(t.chartPanelsContainer),t.timeFrame&&(this._timeFrame=t.timeFrame),t.periodToLoad&&(this.periodToLoad=t.periodToLoad),t.priceStyle&&(this._priceStyle=h.PriceStyle.deserialize(t.priceStyle)),(this._priceStyle.chart=this)._priceStyle.apply(!1),this.layout(),this.localize(),this.loadIndicatorsState(t.indicators),this.loadPlotsState(t.plots),this.loadDrawingsState(t.drawings),this.instrumentComparisonHandler.loadState(t.instrumentComparisonHandler),this._barsCount=t.barsCount,this.suppressEvents(!1),this.theme=this.theme,this.fireValueChanged(h.ChartEvent.STATE_LOADED),this.sendBarsRequest()},y.prototype._restoreValueScales=function(t){for(var e=this.valueScales,i=0,o=e;i<o.length;i++)o[i].destroy();for(var r=t.valueScales||[t.valueScale],n=e.length=0;n<r.length;n++){var a=new h.ValueScale({chart:this});e.push(a),a.loadState(r[n])}0===e.length&&e.push(new h.ValueScale({chart:this}))},y.prototype.startUserDrawing=function(t){switch(this.state){case h.ChartState.USER_DRAWING:case h.ChartState.RESIZING_PANELS:this.cancelUserDrawing();break;case h.ChartState.NORMAL:break;default:throw new Error("Unable to start user drawing in this chart state.")}this.state=h.ChartState.USER_DRAWING,this.selectObject(null),this.addCssClass(h.DrawingCursorClass.CREATE),t.startUserDrawing(),this.selectedObject=t,this.fireValueChanged(h.ChartEvent.USER_DRAWING_STARTED,t)},y.prototype.cancelUserDrawing=function(){var t;this.state===h.ChartState.USER_DRAWING&&((t=this._selectedObject.chartPanel)&&t.removeDrawings(this._selectedObject),this.selectObject(null),this.removeCssClass(h.DrawingCursorClass.CREATE),this.state=h.ChartState.NORMAL,this.fireValueChanged(h.ChartEvent.USER_DRAWING_CANCELLED))},y.prototype._finishUserDrawing=function(){var t;this.removeCssClass(h.DrawingCursorClass.CREATE),this.state=h.ChartState.NORMAL,this.fireValueChanged(h.ChartEvent.USER_DRAWING_FINISHED,this._selectedObject),this.stayInDrawingMode&&(t=h.Drawing.deserialize({className:this._selectedObject.className}),this.startUserDrawing(t))},y.prototype.startZoomIn=function(t){this.zoomInView=new h.ZoomInView,this.zoomInView.zoomMode=t,this.state=h.ChartState.ZOOM_IN,this.fireValueChanged(h.ChartEvent.ZOOM_IN_STARTED)},y.prototype.cancelZoomIn=function(){this.zoomInView&&this.state===h.ChartState.ZOOM_IN&&(this.state=h.ChartState.NORMAL,this.fireValueChanged(h.ChartEvent.ZOOM_IN_CANCELLED),this.zoomInView.cancelDraw())},y.prototype.setNeedsAutoScaleAll=function(){this._dateScale.setNeedsAutoScale(),this._chartPanelsContainer.setNeedsAutoScale()},y.prototype.setWindowMode=function(t){this._windowModeHandler.setMode(t)},y.prototype.setNeedsLayout=function(){this.layout()},y.prototype.layout=function(){if(this.shouldDraw){for(var t=this.getBounds(),e=this._dateScale.layoutScalePanel(t),e=(this._chartPanelsFrame=this._chartPanelsContainer.layoutScalePanel(e),new h.Rect({left:e.left,top:t.top,width:e.width,height:t.height})),t=new h.Rect({left:this._chartPanelsFrame.left,top:t.top,width:this._chartPanelsFrame.width,height:t.height}),i=(this._dateScale.layout(e,t),this._chartPanelsContainer.layout(this._chartPanelsFrame),this._crossHair.layout(),this.spread.layout(),this._sessionBreakLines.layout(),!1),o=0,r=this.chartPanels;o<r.length;o++)if(1===r[o].state){i=!0;break}if(h.JsUtil.sort(this.indicators,function(t,e){return t.zIndex-e.zIndex}),!i)for(var n=0,a=this.indicators;n<a.length;n++){var l=a[n];if(!l.isInitialized&&l.plots.length){this.updateIndicators(),this.setNeedsAutoScale(),this.layout();break}}}},y.prototype.draw=function(){this.shouldDraw&&(this._dateScale.draw(),this._navigation.draw(),this._chartPanelsContainer.draw())},y.prototype.getContentWidth=function(){return this.mainPanel.contentFrame.width+(this.valueScale.rightPanelVisible?this.valueScale.rightPanel.frame.width:0)},y.prototype.getContentRightMargin=function(){var t=this.valueScale;return(t.rightPanelVisible?t.rightPanel.frame.width:0)+this.getTradingPanelWidth()},y.prototype.getTradingPanelWidth=function(){var t=this.mainPanel.tradingPanel;return t&&t.visible?2*this.tradingPanelWidth:0},y.prototype.update=function(){var t=this.size,e=this._prevSize,e=(this.instrumentComparisonHandler&&this.instrumentComparisonHandler.update(),e.width!==t.width||e.height!==t.height),t=(this._prevSize=t,this._needsAutoscale);t&&(this.setNeedsAutoScale(),this._needsAutoscale=!1),(e||t)&&this.layout(),this.draw()},y.prototype.setNeedsUpdate=function(t){this._needsAutoscale=t,this._updateAnimation.start()},y.prototype._onUpdateAnimationCallback=function(){this.update()},y.prototype.updateSplitter=function(t){this._chartPanelsContainer.layoutSplitterPanels(t)},y.prototype.destroy=function(t){void 0===t&&(t=!0),this._unsubscribeEvents(),h.UI.HtmlContainer.instance.reset(),this.toolbar&&(this.toolbar.chart=null),this._keyboardHandler.destroy(),this._windowModeHandler.destroy(),this.stateHandler&&this.stateHandler.destroy(),this._datafeed&&this._datafeed.destroy(),this._priceStyle.destroy(),this._crossHair.destroy(),this._selectionMarker.destroy(),this._chartPanelsContainer.destroy(),this.valueScale.destroy(),this.dateScale.destroy(),this._navigation.destroy(),this._updateAnimation.destroy(),this._highlightedColumns.destroy(),this.scrollbar&&(this.scrollbar.chart=null);for(var e=0,i=this._indicators;e<i.length;e++)i[e].destroy();this._container&&(t?this._container.remove():this._container.empty(),this._container=null)},y.prototype.showWaitingBar=function(t){this.fire(h.ChartEvent.SHOW_WAITING_BAR,{type:h.ChartEvent.SHOW_WAITING_BAR,sender:this,target:this}),this.useWaitingBar&&(this._waitingBar||(this._waitingBar=this._container.scx().waitingBar()),this._waitingBar.show(t))},y.prototype.hideWaitingBar=function(t){this._waitingBar&&this.useWaitingBar&&this._waitingBar.hide(t),this.fire(h.ChartEvent.HIDE_WAITING_BAR,{type:h.ChartEvent.HIDE_WAITING_BAR,sender:this,target:this})},y.prototype._copyDrawing=function(){for(var t,e=0,i=this.chartPanels;e<i.length;e++){for(var o=0,r=i[e].drawings;o<r.length;o++){var n=r[o];if(n.selected){t=n;break}}if(t)break}t&&t.chart&&(this._copyBuffer=t.clone())},y.prototype._pasteDrawing=function(){if(this._copyBuffer){for(var t,e=this._copyBuffer.chartPanel,i=0,o=this.chartPanels;i<o.length;i++)if(o[i]!==e);else return t=this._copyBuffer.clone(),e.addDrawings(t),this._translateClonedDrawing(t),void e.setNeedsUpdate();this._copyBuffer=null}},y.prototype._translateClonedDrawing=function(t){var e,i=t.bounds(),o=n,r=a;i?(i=i.left+i.width,e=this._copyBuffer.chartPanel.contentFrame.width,i+Math.abs(o)<e?t.translate(o,r):t.translate(-o,r)):t.translate(o,r)},y.prototype.handleResize=function(){this.updateTradingPanelWidth()},y.prototype._handleMouseEvents=function(t){var e=t.data,i=t.originalEvent,o=(void 0!==t.pageX?t:i).pageX,r=(void 0!==t.pageY?t:i).pageY,i=i&&i.changedTouches;if(!e.mouseEventsEnabled)return!0;!o&&!r&&i&&0<i.length&&(o=(i=i[i.length-1]).pageX,r=i.pageY);var n={pointerPosition:e._rootDiv.scxClientToLocalPoint(o,r),evt:t};if(e._updateHoverRecord.call(e,n.pointerPosition.x),t.toElement&&s(t.toElement).hasClass("scxTooltip"))return!1;switch(e._dateScale.handleEvent(n)||e._chartPanelsContainer.handleEvent(n),e._highlightedColumns.handleEvent(n),t.type){case"click":case"mousedown":case"touchstart":case"touchend":if(n.stopPropagation)break;return!0}return t.preventDefault(),t.stopPropagation(),!1},y.prototype.saveImage=function(t){this.saveImageHandler.saveImage(this._rootDiv,t)},y.prototype._loadOptionsState=function(t){this._options={theme:(t=t||{}).theme||h.Theme.Dark,locale:t.locale||"en",enableKeyboardEvents:void 0===t.enableKeyboardEvents||!!t.enableKeyboardEvents,enableMouseEvents:void 0===t.enableMouseEvents||!!t.enableMouseEvents,showBarInfoInTitle:void 0===t.showBarInfoInTitle||!!t.showBarInfoInTitle,priceStyle:h.CandlePriceStyle.className,showInstrumentWatermark:null==t.showInstrumentWatermark||t.showInstrumentWatermark,xGridVisible:null==t.xGridVisible||t.xGridVisible,yGridVisible:null==t.yGridVisible||t.yGridVisible,scrollEnabled:null==t.scrollEnabled||t.scrollEnabled,zoomEnabled:null==t.zoomEnabled||t.zoomEnabled,zoomAutoSave:null!=t.zoomAutoSave&&t.zoomAutoSave,scale:null!=t.scale?t.scale:2}},y.prototype._layoutHtmlElements=function(){this._container.addClass(t),this._rootDiv=this._container.scxAppend("div",e).addClass(r).css(this.cssSize),this._rootDiv.scxAppend("div",o)},y.prototype.applyTheme=function(){var t=this.theme,e=t.chart,i=""+l+t.name,i=(s("body").hasClass(i)||s("body").addClass(i),this._container.find("."+o));h.HtmlUtil.setBackground(i,e.background),this._valueMarker.theme=t.valueScale.valueMarker,this._dateMarker.theme=t.dateScale.dateMarker,this.updateIndicators()},y.prototype._subscribeEvents=function(){var t=this,e=[d,h.ChartEvent.INDICATOR_ADDED,h.ChartEvent.TOOLBAR_LOADED,h.ChartEvent.LOCALE_CHANGED];this._rootDiv.on(["mouseenter","mouseleave","mousedown","mousemove","mouseup","click","dblclick","mousewheel","DOMMouseScroll","contextmenu","touchstart","touchmove","touchend",""].join(f+", "),this,this._handleMouseEvents),this.on(e.join(f+", "),function(){return t.localize()}),s("body").on(d+f,this,this._handleLocalizeEvent),s(window).on("resize"+f,this,this._handleWindowResizeEvent)},y.prototype._unsubscribeEvents=function(){this._rootDiv&&this._rootDiv.off(f),this.off(f),s("body").off(d+f,this._handleLocalizeEvent),s(window).off("resize"+f,this._handleWindowResizeEvent)},y.prototype._updateHoverRecord=function(t){t=this._dateScale.projection.recordByX(t);t!==this._hoverRecord&&(this._hoverRecord=t,this.fireValueChanged(h.ChartEvent.HOVER_RECORD_CHANGED,t))},y.prototype.barDataSeries=function(){return this._dataManager.barDataSeries()},y.prototype.getCommonDataSeries=function(){return this.barDataSeries()},y.prototype.addDataSeries=function(t,e){return this._dataManager.addDataSeries(t,e)},y.prototype.removeDataSeries=function(t){this._dataManager.removeDataSeries(t)},y.prototype.clearDataSeries=function(t){this._dataManager.clearDataSeries(t);for(var e=0,i=this._indicators;e<i.length;e++)i[e].clearDataSeries(t)},y.prototype.trimDataSeries=function(t){this.dataManager.trimDataSeries(t)},y.prototype.getDataSeries=function(t){return this._dataManager.getDataSeries(t)},y.prototype.primaryDataSeries=function(t,e){void 0===e&&(e="");var i=this.priceStyle.primaryDataSeriesSuffix(t);return this.getDataSeries(e+i+t)},y.prototype.primaryBarDataSeries=function(t){var e=h.DataSeriesSuffix;return{date:this.primaryDataSeries(e.DATE,t),open:this.primaryDataSeries(e.OPEN,t),high:this.primaryDataSeries(e.HIGH,t),low:this.primaryDataSeries(e.LOW,t),close:this.primaryDataSeries(e.CLOSE,t),volume:this.primaryDataSeries(e.VOLUME,t),ticksCount:this.primaryDataSeries(e.TICKS_COUNT,t)}},y.prototype.primaryBar=function(t,e){e=this.primaryBarDataSeries(e);return this.dataManager.bar(t,e)},y.prototype.findDataSeries=function(t){return this._dataManager.findDataSeries(t)},y.prototype.appendBars=function(t){this._dataManager.appendBars(t),this.updateIndicators()},y.prototype.addChartPanel=function(t,e,i){return this._chartPanelsContainer.addPanel(t,e,i)},y.prototype.findPanelAt=function(t){return this._chartPanelsContainer.findPanelAt(t)},y.prototype.setNeedsAutoScale=function(){this._chartPanelsContainer.setNeedsAutoScale()},y.prototype.scrollOnPixels=function(t){this._dateScale.scrollOnPixels(t)},y.prototype.scrollOnRecords=function(t){this._dateScale.scrollOnRecords(t)},y.prototype.zoomOnPixels=function(t){this._dateScale.zoomOnPixels(t)},y.prototype.zoomOnRecords=function(t){this._dateScale.zoomOnRecords(t)},y.prototype.setPixelsPrice=function(t){this.mainPanel.valueScale.setPixelsPrice(t)},y.prototype.setValueScaleType=function(t){this.mainPanel.valueScale.setValueScaleType(t)},y.prototype.getPixelsPrice=function(){return this.mainPanel.valueScale.getPixelsPrice()},Object.defineProperty(y.prototype,"pixelsPrice",{get:function(){return this.mainPanel.valueScale.pixelPrice},enumerable:!0,configurable:!0}),y.prototype.visibleDataRange=function(){return{firstVisibleDataRecord:Math.max(this.firstVisibleRecord,0),lastVisibleDataRecord:Math.min(this.lastVisibleRecord,this.recordCount)}},y.prototype.recordRange=function(t,e){if(null==t&&null==e)return{firstVisibleRecord:this.firstVisibleRecord,lastVisibleRecord:this.lastVisibleRecord};var i=this.recordCount;if(null==e){var o=t;if(!h.JsUtil.isFiniteNumber(o)||o<=0)throw new TypeError("Positive number expected.");this.firstVisibleRecord=Math.max(i-o,0),this.lastVisibleRecord=i-1}else{if(!h.JsUtil.isFiniteNumber(t)||t<0)throw new TypeError("First record must be a positive number or 0.");if(!h.JsUtil.isFiniteNumber(e))throw new TypeError("Last record must be a positive number.");if(e<=t)throw new Error("Last record must be greater than first record.");this.firstVisibleRecord=t,this.lastVisibleRecord=e}},y.prototype.barsBetweenPoints=function(t,e){var i,o=this.dateScale.projection,r=0,n=this.primaryDataSeries(h.DataSeriesSuffix.CLOSE).length;return 0<n&&(t=new h.ChartPoint(t).getRecord(o),e=new h.ChartPoint(e).getRecord(o),r=0<=t&&t<n||0<=e&&e<n?(o=Math.min(Math.max(t,0),n-1),i=Math.min(Math.max(e,0),n-1),Math.trunc(i)-Math.trunc(o)+(t<=e?1:-1)):t<=0&&n<=e?n:e<=0&&n<=t?-n:0),r},y.prototype.dateRange=function(t,e){var i=this.dateScale,o=i.projection;if(!t&&!e)return i=i.projectionFrame,{startDate:o.dateByX(i.left),endDate:o.dateByX(i.right)};i=o.recordByX(o.xByDate(t,!1),!1),t=o.recordByX(o.xByDate(e,!1),!1);this.firstVisibleRecord=i,this.lastVisibleRecord=t-1},y.prototype.reload=function(){this._newBarsRequest={kind:h.RequestKind.BARS,startDate:this._startDate,endDate:this._endDate},this.sendBarsRequest()},y.prototype.updateComputedDataSeries=function(){this.instrumentComparisonHandler.update(!0),this.priceStyle.updateComputedDataSeries()},y.prototype.addCssClass=function(t){this.rootDiv.addClass(t)},y.prototype.removeCssClass=function(t){this.rootDiv.removeClass(t)},y);function y(t){var e=i.call(this)||this;if(e._valueScales=[],e.shouldDraw=!0,e._chartPanelsFrame=new h.Rect,e.tradingPanelWidth=20,e._indicators=[],e._options={},e._showDrawings=!0,e._showDrawingTooltips=!0,e._stayInDrawingMode=!1,e._state=h.ChartState.NORMAL,e._needsAutoscale=!1,e._useWaitingBar=!0,e._updateAnimation=new h.Animation({context:e,recurring:!1,callback:e._onUpdateAnimationCallback}),e.saveImageHandler=new h.SaveImageHandler,e._logoDrawed=!1,e._prevSize={width:null,height:null},"object"!=typeof t)throw new Error("Config must be an object.");if(!t.container)throw new Error("Chart container is not specified.");if(e._container=s(t.container),0===e._container.length)throw new Error("Unable to find HTML element by selector "+t.container+".");if(e._cssSize={width:t.width||"100%",height:t.height||"100%"},h.JsUtil.isNumber(e._cssSize.width)&&e._cssSize.width<=0)throw new Error("Width must be a positive number.");if(h.JsUtil.isNumber(e._cssSize.height)&&e._cssSize.height<=0)throw new Error("Height must be a positive number.");return e.instrument=t.instrument,e.instrumentsRepository=t.instrumentsRepository,t.timeInterval?e.timeInterval=t.timeInterval:e._timeFrame=t.timeFrame||c,t.periodToLoad&&(e.periodToLoad=t.periodToLoad||u),e.incomePrecision=t.incomePrecision,e.incomePercentagePrecision=t.incomePercentagePrecision,e._datafeed=t.datafeed,e._loadOptionsState(t),e._valueMarker=new h.ValueMarker,e._dateMarker=new h.DateMarker,e._selectionMarker=new h.SelectionMarker({chart:e}),e._layoutHtmlElements(),e.applyTheme(),e._dataManager=new h.DataManager,e._dataManager.addBarDataSeries(),e._dateScale=new h.DateScale({chart:e}),e.valueScales.push(new h.ValueScale({chart:e})),e._chartPanelsContainer=new h.ChartPanelsContainer({chart:e}),e._crossHair=new h.CrossHair({chart:e}),null!=t.crossHair&&(e.crossHairType=t.crossHair),e._sessionBreakLines=new h.BreakLinesHandler({chart:e}),e._priceStyle=new h.CandlePriceStyle({chart:e}),e._priceStyle.apply(),null!=t.priceStyle&&(e.priceStyleKind=t.priceStyle),e._subscribeEvents(),e._spread=new h.SpreadHandler({chart:e}),e._highlightedColumns=new h.HighlightedColumnHandler(e),e._windowModeHandler=new h.WindowModeHandler(e),e._instrumentComparisonHandler=new h.InstrumentComparisonHandler(e),null!=t.useWaitingBar&&(e.useWaitingBar=t.useWaitingBar),e.layout(),!1!==t.showToolbar&&(h.JsUtil.isFunction(t.onToolbarLoaded)&&e.on(h.ChartEvent.TOOLBAR_LOADED,t.onToolbarLoaded),e.toolbar=e._container.scx().toolbar(e)),!1!==t.showScrollbar&&(h.JsUtil.isFunction(t.onScrollbarLoaded)&&e.on(h.ChartEvent.SCROLLBAR_LOADED,t.onScrollbarLoaded),e.scrollbar=e._container.scx().scrollbar(e)),t.fullWindowMode&&e._windowModeHandler.setMode(h.WindowMode.FULL_WINDOW),e._keyboardHandler=new h.KeyboardHandler(e),null!=t.keyboardEventsEnabled&&(e.keyboardEventsEnabled=t.keyboardEventsEnabled),e._smartPriceStyleHandler=new h.SmartPriceStyleHandler(e),!1!==t.showNavigation&&(e._navigation=e._rootDiv.scx().chartNavigation(e)),t.stateHandler?e.stateHandler=t.stateHandler:e.stateHandler=new h.LocalChartStateHandler({chart:e,autoSave:!0===t.autoSave}),e}h.Chart=p}(StockChartX=StockChartX||{}),!function(e){"use strict";jQuery.fn.StockChartX=function(t){return t.container=this,new e.Chart(t)}}(StockChartX=StockChartX||{}),!function(u){"use strict";var f=".chartsContainer",r="scxChartContainer",d="scxNonActiveBorder",p="scxActiveBorder";function t(t){var i=this;this._maxChartsCountX=1,this._maxChartsCountY=1,this._chartsItems=[],this._displacement={width:2,height:20},this._isFullWindowMode=!1,this._isFullScreenMode=!1,this._parent=t,$(window).resize(function(){return i.resizeCharts()}),$(window).on("scxFullscreenChanged",this,function(t,e){return i._fullScreenChange(t,e)}),$(window).on("scxFullWindowChanged",this,function(t,e){return i._fullWindowChange(t,e)})}Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"toolbar",{get:function(){return this._toolbar},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollbar",{get:function(){return this._scrollbar},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"containerDisplacement",{get:function(){return this._displacement},set:function(t){this._displacement=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"charts",{get:function(){return this._chartsItems.map(function(t){return t.chart})},enumerable:!0,configurable:!0}),t.prototype.addChart=function(t){var n,a,l,s,c=this,h=this,e=$('<div class="'+r+" "+d+'"></div>').appendTo(this._parent),t=t?e.StockChartX(t):e.StockChartX({width:0,height:0,showToolbar:!1}),i=(t.multiChartRootContainer=this._parent,t.keyboardEventsEnabled),o=t.mouseEventsEnabled;return t.keyboardEventsEnabled=!1,t.mouseEventsEnabled=!1,t.on(u.ChartEvent.ENABLE_KEYBOARD_EVENTS_CHANGED+f,function(t){n=t.target,a=t.value}).on(u.ChartEvent.ENABLE_MOUSE_EVENTS_CHANGED+f,function(t){l=t.target,s=t.value}),this._toolbar||(this._toolbar=new u.UI.Toolbar({parent:this._parent.parent(),chart:t}),e.removeClass(d),e.addClass(p),(i=t===n?a:i)&&(t.keyboardEventsEnabled=!0),(o=t===l?s:o)&&(t.mouseEventsEnabled=!0)),e.mousedown(function(t){for(var e=$(t.currentTarget),i=0,o=c._chartsItems;i<o.length;i++){var r=o[i];r.chart.off(f),e.is(r.container)?(r.container.addClass(p),r.container.removeClass(d),r.chart===n&&(r.keyboardEventsEnabled=a),r.keyboardEventsEnabled&&(r.chart.keyboardEventsEnabled=!0),r.chart===l&&(r.mouseEventsEnabled=s),r.mouseEventsEnabled&&(r.chart.mouseEventsEnabled=!0),h._toolbar.chart=r.chart):(r.container.removeClass(p),r.container.addClass(d),r.chart===n&&(r.keyboardEventsEnabled=a),r.keyboardEventsEnabled&&(r.chart.keyboardEventsEnabled=!1),r.chart===l&&(r.mouseEventsEnabled=s),r.mouseEventsEnabled&&(r.chart.mouseEventsEnabled=!1)),r.chart.on(u.ChartEvent.ENABLE_KEYBOARD_EVENTS_CHANGED+f,function(t){n=t.target,a=t.value}).on(u.ChartEvent.ENABLE_MOUSE_EVENTS_CHANGED+f,function(t){l=t.target,s=t.value})}}),this._chartsItems.push({container:e,chart:t,keyboardEventsEnabled:i,mouseEventsEnabled:o}),e.css("z-index","0"),e.css("float","left"),this._parent.css({top:0,left:0,height:"100%",width:"100%",display:"block",clear:"both",overflow:"hidden"}),this._parent.parent().css({height:"100%",width:"100%",clear:"both",overflow:"hidden"}),t},t.prototype.resizeCharts=function(){if(!this._isFullWindowMode&&!this._isFullScreenMode){switch(this._chartsItems.length){case 1:this._maxChartsCountX=1,this._maxChartsCountY=1;break;case 2:this._maxChartsCountX=1,this._maxChartsCountY=2;break;case 3:this._maxChartsCountX=1,this._maxChartsCountY=3;break;default:this._maxChartsCountX=2,this._maxChartsCountY=2}for(var t=this._parent.parent().parent(),e=t.height()/this._maxChartsCountY-2,i=t.width()/this._maxChartsCountX-2,o=0,r=this._chartsItems;o<r.length;o++){var n=r[o];n.chart.size={width:i-this.containerDisplacement.width,height:e-this.containerDisplacement.height-25},n.chart.setNeedsAutoScale(),n.chart.setNeedsUpdate()}this._parent.parent().width(t.width()).height(t.height())}},t.prototype._fullScreenChange=function(t,e){e.windowMode===u.WindowMode.FULL_SCREEN?(this.toolbar.prependTo(e.container),this.parent.parent().parent().css({width:window.outerWidth,height:window.outerHeight}),this._isFullScreenMode=!0):(this._isFullWindowMode||this.toolbar.prependTo(this._parent.parent()),this.parent.parent().parent().css({width:"100%",height:"100%"}),this._isFullScreenMode=!1),this.resizeCharts()},t.prototype._fullWindowChange=function(t,e){switch(e.windowMode){case u.WindowMode.FULL_WINDOW:case u.WindowMode.FULL_SCREEN:this._isFullWindowMode=!0,this.toolbar.prependTo(e.container),this.containerDisplacement.width=6,this.containerDisplacement.height=42,e.container.css({"z-index":"1",position:"absolute","background-color":$("body").css("background-color")}),this._parent.parent().css({width:"100%",height:"100%"}),e.size={width:this._parent.width()-this.containerDisplacement.width,height:this._parent.height()-this.containerDisplacement.height-25},e.setNeedsAutoScale(),e.setNeedsUpdate();break;default:this._isFullWindowMode=!1,this._isFullScreenMode||(this.toolbar.prependTo(this._parent.parent()),e.container.css("background-color","transparent")),this.containerDisplacement.width=2,this.containerDisplacement.height=20,e.container.css("z-index","0"),e.container.css("position","relative")}this.resizeCharts()},u.ChartsContainer=t}(StockChartX=StockChartX||{}),StockChartX=StockChartX||{},!function(){"use strict";(StockChartX||(StockChartX={})).Component=function(){}}(),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";e=t.Component,__extends(o,e),o.prototype.destroy=function(){this._unsubscribe&&this._unsubscribe()};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.Handler=i}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";i=t.Handler,__extends(o,i),Object.defineProperty(o.prototype,"chart",{get:function(){return this._chart},set:function(t){var e=this._chart;e!==t&&(this._onChartChanging&&this._onChartChanging(),this._chart=t,this._onChartChanged&&this._onChartChanged(e))},enumerable:!0,configurable:!0});var i,e=o;function o(t){var e=i.call(this)||this;return e._chart=t,e}t.ChartHandler=e}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";e=t.Component,__extends(o,e);var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.VisualComponent=i}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";e=t.VisualComponent,__extends(o,e),Object.defineProperty(o.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),o.prototype.layout=function(){this._container||(this._container=this._createContainer(),this.update())},o.prototype.update=function(){this.applyTheme()},o.prototype._removeContainer=function(){this._container&&(this._container.remove(),this._container=null)},o.prototype.destroy=function(){this._removeContainer()};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.HtmlComponent=i}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";i=t.HtmlComponent,__extends(o,i),Object.defineProperty(o.prototype,"chart",{get:function(){return this._chart},set:function(t){this._chart!==t&&(this._onChartChanging(),this._chart=t,this._onChartChanged())},enumerable:!0,configurable:!0}),o.prototype._onChartChanging=function(){this._removeContainer()};var i,e=o;function o(t){var e=i.call(this)||this;return t&&(e.chart=t.chart),e}t.ChartHtmlComponent=e}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";i=t.HtmlComponent,__extends(o,i),Object.defineProperty(o.prototype,"chartPanel",{get:function(){return this._panel},set:function(t){this._panel!==t&&(this._onChartPanelChanging(),this._panel=t,this._onChartPanelChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"chart",{get:function(){return this._panel&&this._panel.chart},enumerable:!0,configurable:!0}),o.prototype._onChartPanelChanging=function(){this._unsubscribe&&this._unsubscribe(),this._removeContainer()},o.prototype._onChartPanelChanged=function(){this._subscribe&&this._subscribe()},o.prototype.destroy=function(){this._unsubscribe&&this._unsubscribe(),i.prototype.destroy.call(this)};var i,e=o;function o(t){var e=i.call(this)||this;return t&&(e.chartPanel=t.chartPanel),e}t.ChartPanelHtmlComponent=e}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";i=t.Component,__extends(o,i),Object.defineProperty(o.prototype,"chart",{get:function(){return this._chart},set:function(t){this._chart!==t&&(this._onChartChanging(),this._chart=t,this._onChartChanged())},enumerable:!0,configurable:!0}),o.prototype._onChartChanging=function(){this._unsubscribe&&this._unsubscribe()},o.prototype._onChartChanged=function(){this._subscribe&&this._subscribe()},o.prototype.destroy=function(){this._unsubscribe&&this._unsubscribe()};var i,e=o;function o(t){var e=i.call(this)||this;return t&&(e._chart=t.chart),e}t.ChartComponent=e}(StockChartX=StockChartX||{}),StockChartX=StockChartX||{},this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){"use strict";i=e.Component,__extends(o,i),o.prototype.hitTest=function(t){return!1},o.prototype.layout=function(t){},o.prototype.handleEvent=function(t,e){return this._gestures.handleEvent(t,e=void 0===e?!0:e)};var i,t=o;function o(){var t=i.call(this)||this;return t._gestures=t._initGestures&&t._initGestures()||new e.GestureArray,t}e.Control=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){"use strict";i=e.Control,__extends(o,i),Object.defineProperty(o.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"frame",{get:function(){return this._frame},enumerable:!0,configurable:!0}),o.prototype.hitTest=function(t){return e.Geometry.isPointInsideOrNearRect(t,this._frame)},o.prototype.layout=function(t){this._container||(this._container=this._createContainer()),this._container.scxFrame(t),this._frame.copyFrom(t)},o.prototype._removeContainer=function(){this._container&&(this._container.remove(),this._container=null)},o.prototype.destroy=function(){this._removeContainer()};var i,t=o;function o(){var t=null!==i&&i.apply(this,arguments)||this;return t._frame=new e.Rect,t}e.HtmlControl=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";i=t.HtmlControl,__extends(o,i),Object.defineProperty(o.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),o.prototype.destroy=function(){this._unsubscribe&&this._unsubscribe(),i.prototype.destroy.call(this)};var i,e=o;function o(t){var e=i.call(this)||this;if(t)return e._chart=t.chart,e;throw new TypeError("Config is not specified.")}t.ChartHtmlControl=e}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(r){"use strict";Object.defineProperty(e,"registeredPriceStyles",{get:function(){return this._priceStyles.registeredItems},enumerable:!0,configurable:!0}),e.register=function(t,e){"string"==typeof t?this._priceStyles.register(t,e):this._priceStyles.register(t.className,t)},e.create=function(t){return this._priceStyles.createInstance(t)},e.deserialize=function(t){if(!t)return null;var e=this._priceStyles.createInstance(t.className);return e.loadState(t),e},e._priceStyles=new r.ClassRegistrar;var t=e;function e(){}i=r.ChartComponent,__extends(n,i),Object.defineProperty(n,"className",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"className",{get:function(){return this.constructor.className},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"plot",{get:function(){return this._plot},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"chartPanel",{get:function(){return this._plot&&this._plot.chartPanel},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"showValueLines",{get:function(){var t=this._options.showValueLines;return null!=t?t:n.defaults.showValueLines},set:function(t){this._options.showValueLines=t,this._updatePlot()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"extendValueLines",{get:function(){var t=this._options.extendValueLines;return null!=t?t:n.defaults.extendValueLines},set:function(t){this._options.extendValueLines=t,this._updatePlot()},enumerable:!0,configurable:!0}),n.prototype._onChartChanging=function(){this.destroy()},n.prototype._updatePlot=function(){var t=this.plot;t&&(t.showValueLines=this.showValueLines,t.extendValueLines=this.extendValueLines)},n.prototype.saveState=function(){return{className:this.constructor.className,options:r.JsUtil.clone(this._options)}},n.prototype.loadState=function(t){this._options=t&&r.JsUtil.clone(t.options)||{}},n.prototype.apply=function(t){void 0===t&&(t=!0);var e=this.chart;if(e){var i=this._plot;if(i||(this._plot=i=this.createPlot(),this._updatePlot()),!i)throw new Error("Price style plot is not created.");this.updateComputedDataSeries(),e.updateIndicators();var o=r.DataSeriesSuffix;i.dataSeries=[e.primaryDataSeries(o.CLOSE),e.primaryDataSeries(o.OPEN),e.primaryDataSeries(o.HIGH),e.primaryDataSeries(o.LOW),e.primaryDataSeries(o.DATE)],e.mainPanel.addPlot(i),t&&e.mainPanel.setNeedsAutoScale(),e.setNeedsUpdate()}},n.prototype.dataSeriesSuffix=function(){return""},n.prototype.primaryDataSeriesSuffix=function(t){var e=r.DataSeriesSuffix;switch(t){case e.OPEN:case e.HIGH:case e.LOW:case e.CLOSE:return this.dataSeriesSuffix();default:return""}},n.prototype.removeComputedDataSeries=function(){var t,e,i=this.chart;i&&(t=this.dataSeriesSuffix(),e=r.DataSeriesSuffix,t&&(i.removeDataSeries(t+e.DATE),i.removeDataSeries(t+e.OPEN),i.removeDataSeries(t+e.HIGH),i.removeDataSeries(t+e.LOW),i.removeDataSeries(t+e.CLOSE),i.removeDataSeries(t+e.VOLUME)))},n.prototype.updateComputedDataSeries=function(){},n.prototype._calculateAtr=function(t){var e=new r.ATR;e._usePrimaryDataSeries=!1,e.chart=this.chart,e.setDefaultSettings(),e.setupIndicator(),e.period=t;for(var i=0;i<e.high.recordCount-1;i++)e.updateIndicator();if(!e.values)return null;t=e.values.get(0);if(!t)return null;t=t.lastValue;return t?Math.roundToDecimals(t,5):null},n.prototype.destroy=function(){var t=this._plot,e=t&&t.chartPanel;e&&e.removePlot(t),this.removeComputedDataSeries()},n.defaults={showValueLines:!1,extendValueLines:!1};var i,o=n;function n(t){var e=i.call(this,t)||this;return e._options={},t&&(e.chart=t.chart,t={className:"",options:t.options},e.loadState(t)),e}r.PriceStyle=o,r.JsUtil.applyMixins(o,[t])}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";e=t.PriceStyle,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"bar"},enumerable:!0,configurable:!0}),o.prototype.createPlot=function(){return new t.BarPlot({plotStyle:t.BarPlot.Style.OHLC,plotType:t.PlotType.PRICE_STYLE})};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.BarPriceStyle=i,t.PriceStyle.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";e=t.PriceStyle,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"HLBar"},enumerable:!0,configurable:!0}),o.prototype.createPlot=function(){return new t.BarPlot({plotStyle:t.BarPlot.Style.HL,plotType:t.PlotType.PRICE_STYLE})};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.HLBarPriceStyle=i,t.PriceStyle.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";e=t.PriceStyle,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"HLCBar"},enumerable:!0,configurable:!0}),o.prototype.createPlot=function(){return new t.BarPlot({plotStyle:t.BarPlot.Style.HLC,plotType:t.PlotType.PRICE_STYLE})};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.HLCBarPriceStyle=i,t.PriceStyle.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";e=t.PriceStyle,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"coloredHLBar"},enumerable:!0,configurable:!0}),o.prototype.createPlot=function(){return new t.BarPlot({plotStyle:t.BarPlot.Style.COLORED_HL,plotType:t.PlotType.PRICE_STYLE})};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.ColoredHLBarPriceStyle=i,t.PriceStyle.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";e=t.PriceStyle,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"coloredHLCBar"},enumerable:!0,configurable:!0}),o.prototype.createPlot=function(){return new t.BarPlot({plotStyle:t.BarPlot.Style.COLORED_HLC,plotType:t.PlotType.PRICE_STYLE})};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.ColoredHLCBarPriceStyle=i,t.PriceStyle.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";e=t.PriceStyle,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"candle"},enumerable:!0,configurable:!0}),o.prototype.createPlot=function(){return new t.BarPlot({plotStyle:t.BarPlot.Style.CANDLE,plotType:t.PlotType.PRICE_STYLE})};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.CandlePriceStyle=i,t.PriceStyle.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";e=t.PriceStyle,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"coloredBar"},enumerable:!0,configurable:!0}),o.prototype.createPlot=function(){return new t.BarPlot({plotStyle:t.BarPlot.Style.COLORED_OHLC,plotType:t.PlotType.PRICE_STYLE})};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.ColoredBarPriceStyle=i,t.PriceStyle.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(i){"use strict";t=i.PriceStyle,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"heikinAshi"},enumerable:!0,configurable:!0}),o.prototype.createPlot=function(){return new i.BarPlot({plotStyle:i.BarPlot.Style.CANDLE,plotType:i.PlotType.PRICE_STYLE})},o.prototype.dataSeriesSuffix=function(){return i.DataSeriesSuffix.HEIKIN_ASHI},o.prototype.updateComputedDataSeries=function(){var t=this.chart.dataManager,e=t.ohlcDataSeries(i.DataSeriesSuffix.HEIKIN_ASHI,!0);i.BarConverter.convertToHeikinAshi(t.ohlcDataSeries(),e)};var t,e=o;function o(){return null!==t&&t.apply(this,arguments)||this}i.HeikinAshiPriceStyle=e,i.PriceStyle.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";e=t.PriceStyle,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"hollowCandle"},enumerable:!0,configurable:!0}),o.prototype.createPlot=function(){return new t.BarPlot({plotStyle:t.BarPlot.Style.HOLLOW_CANDLE,plotType:t.PlotType.PRICE_STYLE})};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.HollowCandlePriceStyle=i,t.PriceStyle.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__awaiter=this&&this.__awaiter||function(n,a,l,s){return new(l=l||Promise)(function(t,e){function i(t){try{r(s.next(t))}catch(t){e(t)}}function o(t){try{r(s.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(i,o)}r((s=s.apply(n,a||[])).next())})},__generator=this&&this.__generator||function(o,r){var n,a,l,s={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(i){return function(t){var e=[i,t];if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(l=a[2&e[0]?"return":e[0]?"throw":"next"])&&!(l=l.call(a,e[1])).done)return l;switch(a=0,(e=l?[0,l.value]:e)[0]){case 0:case 1:l=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,a=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(l=0<(l=s.trys).length&&l[l.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!l||e[1]>l[0]&&e[1]<l[3])){s.label=e[1];break}if(6===e[0]&&s.label<l[1]){s.label=l[1],l=e;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(e);break}l[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(o,s)}catch(t){e=[6,t],a=0}finally{n=l=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},__extends=(!function(n){"use strict";n.KagiReversalKind={ATR:"atr",FIXED:"fixed",POINTS:"points"},Object.freeze(n.KagiReversalKind),i=n.PriceStyle,__extends(e,i),Object.defineProperty(e,"className",{get:function(){return"kagi"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reversal",{get:function(){return this._options.reversal||e.defaults.reversal},set:function(t){this._options.reversal=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reversalValue",{get:function(){return this._reversalValue},enumerable:!0,configurable:!0}),e.prototype.createPlot=function(){return new n.BarPlot({plotStyle:n.BarPlot.Style.KAGI,plotType:n.PlotType.PRICE_STYLE})},e.prototype.dataSeriesSuffix=function(){return n.DataSeriesSuffix.KAGI},e.prototype.primaryDataSeriesSuffix=function(t){var e=i.prototype.primaryDataSeriesSuffix.call(this,t);if(e)return e;switch(t){case n.DataSeriesSuffix.DATE:case n.DataSeriesSuffix.VOLUME:return this.dataSeriesSuffix();default:return""}},e.prototype._calculateReversalValue=function(){var t,i=this,e=this.reversal,o=this.chart&&this.chart.instrument,r=o&&o.tickSize;switch(e.kind){case n.KagiReversalKind.ATR:t=this._calculateAtr(e.value);break;case n.KagiReversalKind.FIXED:t=e.value;break;case n.KagiReversalKind.POINTS:r&&(t=e.value*r),o&&!r&&this.chart.localizeText("instrument.notification.missingTickSize",{instrument:o.symbol}).then(function(e){return __awaiter(i,void 0,void 0,function(){return __generator(this,function(t){return[2,n.UI.Notification.error(e,this.chart)]})})});break;default:throw new Error("Unknown reversal amount kind: "+e.kind)}return this._reversalValue=t},e.prototype.updateComputedDataSeries=function(){var t=this.chart.dataManager,e=t.barDataSeries(n.DataSeriesSuffix.KAGI,!0),i=this._calculateReversalValue();i&&n.BarConverter.convertToKagi(t.barDataSeries(),i,e)},e.defaults={reversal:{kind:n.KagiReversalKind.POINTS,value:1}};var i,t=e;function e(t){return i.call(this,t)||this}n.KagiPriceStyle=t,n.PriceStyle.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(i){"use strict";o=i.PriceStyle,__extends(e,o),Object.defineProperty(e,"className",{get:function(){return"lineBreak"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lines",{get:function(){return this._options.lines||e.defaults.lines},set:function(t){if(!i.JsUtil.isFiniteNumber(t)||t<=0)throw new Error("Lines count must be a number greater than 0.");this._options.lines=t},enumerable:!0,configurable:!0}),e.prototype.createPlot=function(){return new i.BarPlot({plotStyle:i.BarPlot.Style.LINE_BREAK,plotType:i.PlotType.PRICE_STYLE})},e.prototype.dataSeriesSuffix=function(){return i.DataSeriesSuffix.LINE_BREAK},e.prototype.primaryDataSeriesSuffix=function(t){var e=o.prototype.primaryDataSeriesSuffix.call(this,t);if(e)return e;switch(t){case i.DataSeriesSuffix.DATE:case i.DataSeriesSuffix.VOLUME:return this.dataSeriesSuffix();default:return""}},e.prototype.updateComputedDataSeries=function(){var t=this.chart.dataManager,e=t.barDataSeries(i.DataSeriesSuffix.LINE_BREAK,!0);i.BarConverter.convertToLineBreak(t.barDataSeries(),this.lines,e)},e.defaults={lines:3};var o,t=e;function e(t){return o.call(this,t)||this}i.LineBreakPriceStyle=t,i.PriceStyle.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";e=t.PriceStyle,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"line"},enumerable:!0,configurable:!0}),o.prototype.createPlot=function(){return new t.LinePlot({plotStyle:t.LinePlot.Style.SIMPLE,plotType:t.PlotType.PRICE_STYLE})};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.LinePriceStyle=i,t.PriceStyle.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";e=t.PriceStyle,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"mountain"},enumerable:!0,configurable:!0}),o.prototype.createPlot=function(){return new t.LinePlot({plotStyle:t.LinePlot.Style.MOUNTAIN,plotType:t.PlotType.PRICE_STYLE})};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.MountainPriceStyle=i,t.PriceStyle.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__awaiter=this&&this.__awaiter||function(n,a,l,s){return new(l=l||Promise)(function(t,e){function i(t){try{r(s.next(t))}catch(t){e(t)}}function o(t){try{r(s.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(i,o)}r((s=s.apply(n,a||[])).next())})},__generator=this&&this.__generator||function(o,r){var n,a,l,s={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(i){return function(t){var e=[i,t];if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(l=a[2&e[0]?"return":e[0]?"throw":"next"])&&!(l=l.call(a,e[1])).done)return l;switch(a=0,(e=l?[0,l.value]:e)[0]){case 0:case 1:l=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,a=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(l=0<(l=s.trys).length&&l[l.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!l||e[1]>l[0]&&e[1]<l[3])){s.label=e[1];break}if(6===e[0]&&s.label<l[1]){s.label=l[1],l=e;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(e);break}l[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(o,s)}catch(t){e=[6,t],a=0}finally{n=l=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},__extends=(!function(n){"use strict";n.PointAndFigureBoxSizeKind={ATR:"atr",FIXED:"fixed",POINTS:"points"},Object.freeze(n.PointAndFigureBoxSizeKind),n.PointAndFigureSource={CLOSE:"close",HIGH_LOW:"highLow"},Object.freeze(n.PointAndFigureSource),i=n.PriceStyle,__extends(e,i),Object.defineProperty(e,"className",{get:function(){return"pointAndFigure"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"source",{get:function(){return this._options.source},set:function(t){this._options.source=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxSize",{get:function(){return this._options.boxSize||e.defaults.boxSize},set:function(t){this._options.boxSize=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reversal",{get:function(){return this._options.reversal||e.defaults.reversal},set:function(t){if(null!=t&&!n.JsUtil.isPositiveNumber(t))throw new TypeError("Reversal must be a positive number.");this._options.reversal=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxSizeValue",{get:function(){return this._boxSizeValue},enumerable:!0,configurable:!0}),e.prototype.createPlot=function(){var t=new n.PointAndFigurePlot({plotStyle:n.BarPlot.Style.POINT_AND_FIGURE,plotType:n.PlotType.PRICE_STYLE});return t.boxSize=this._boxSizeValue,t},e.prototype.dataSeriesSuffix=function(){return n.DataSeriesSuffix.POINT_AND_FIGURE},e.prototype.primaryDataSeriesSuffix=function(t){var e=i.prototype.primaryDataSeriesSuffix.call(this,t);if(e)return e;switch(t){case n.DataSeriesSuffix.DATE:case n.DataSeriesSuffix.VOLUME:return this.dataSeriesSuffix();default:return""}},e.prototype._calculateBoxSizeValue=function(){var t,i=this,e=this.boxSize,o=this.chart&&this.chart.instrument,r=o&&o.tickSize;switch(e.kind){case n.PointAndFigureBoxSizeKind.ATR:t=this._calculateAtr(e.value);break;case n.PointAndFigureBoxSizeKind.FIXED:t=e.value;break;case n.PointAndFigureBoxSizeKind.POINTS:r&&(t=e.value*r),o&&!r&&this.chart.localizeText("instrument.notification.missingTickSize",{instrument:o.symbol}).then(function(e){return __awaiter(i,void 0,void 0,function(){return __generator(this,function(t){return[2,n.UI.Notification.error(e,this.chart)]})})});break;default:throw new Error("Unknown box size kind: "+e.kind)}return this._boxSizeValue=t},e.prototype.updateComputedDataSeries=function(){var t,e=this.chart.dataManager,i=e.barDataSeries(n.DataSeriesSuffix.POINT_AND_FIGURE,!0),o=this._calculateBoxSizeValue();o&&((t=this._plot)&&(t.boxSize=o),n.BarConverter.convertToPointAndFigure(e.barDataSeries(),o,this.reversal,this.source,i))},e.defaults={source:n.PointAndFigureSource.CLOSE,boxSize:{kind:n.PointAndFigureBoxSizeKind.POINTS,value:1},reversal:3};var i,t=e;function e(t){return i.call(this,t)||this}n.PointAndFigurePriceStyle=t,n.PriceStyle.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__awaiter=this&&this.__awaiter||function(n,a,l,s){return new(l=l||Promise)(function(t,e){function i(t){try{r(s.next(t))}catch(t){e(t)}}function o(t){try{r(s.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(i,o)}r((s=s.apply(n,a||[])).next())})},__generator=this&&this.__generator||function(o,r){var n,a,l,s={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(i){return function(t){var e=[i,t];if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(l=a[2&e[0]?"return":e[0]?"throw":"next"])&&!(l=l.call(a,e[1])).done)return l;switch(a=0,(e=l?[0,l.value]:e)[0]){case 0:case 1:l=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,a=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(l=0<(l=s.trys).length&&l[l.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!l||e[1]>l[0]&&e[1]<l[3])){s.label=e[1];break}if(6===e[0]&&s.label<l[1]){s.label=l[1],l=e;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(e);break}l[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(o,s)}catch(t){e=[6,t],a=0}finally{n=l=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},__extends=(!function(n){"use strict";n.RenkoBoxSizeKind={FIXED:"fixed",ATR:"atr",POINTS:"points"},Object.freeze(n.RenkoBoxSizeKind),i=n.PriceStyle,__extends(e,i),Object.defineProperty(e,"className",{get:function(){return"renko"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxSize",{get:function(){return this._options.boxSize||e.defaults.boxSize},set:function(t){this._options.boxSize=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxSizeValue",{get:function(){return this._boxSizeValue},enumerable:!0,configurable:!0}),e.prototype.createPlot=function(){return new n.BarPlot({plotStyle:n.BarPlot.Style.RENKO,plotType:n.PlotType.PRICE_STYLE})},e.prototype.dataSeriesSuffix=function(){return n.DataSeriesSuffix.RENKO},e.prototype.primaryDataSeriesSuffix=function(t){var e=i.prototype.primaryDataSeriesSuffix.call(this,t);if(e)return e;switch(t){case n.DataSeriesSuffix.DATE:case n.DataSeriesSuffix.VOLUME:return this.dataSeriesSuffix();default:return""}},e.prototype._calculateBoxSizeValue=function(){var t,i=this,e=this.boxSize,o=this.chart&&this.chart.instrument,r=o&&o.tickSize;switch(e.kind){case n.RenkoBoxSizeKind.ATR:t=this._calculateAtr(e.value);break;case n.RenkoBoxSizeKind.FIXED:t=e.value;break;case n.RenkoBoxSizeKind.POINTS:r&&(t=e.value*r),o&&!r&&this.chart.localizeText("instrument.notification.missingTickSize",{instrument:o.symbol}).then(function(e){return __awaiter(i,void 0,void 0,function(){return __generator(this,function(t){return[2,n.UI.Notification.error(e,this.chart)]})})});break;default:throw new Error("Unknown box size kind: "+e.kind)}return this._boxSizeValue=t},e.prototype.updateComputedDataSeries=function(){var t=this.chart.dataManager,e=t.barDataSeries(n.DataSeriesSuffix.RENKO,!0),i=this._calculateBoxSizeValue();i&&n.BarConverter.convertToRenko(t.barDataSeries(),i,e)},e.defaults={boxSize:{kind:n.RenkoBoxSizeKind.POINTS,value:1}};var i,t=e;function e(t){return i.call(this,t)||this}n.RenkoPriceStyle=t,n.PriceStyle.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";e=t.PriceStyle,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"candleVolume"},enumerable:!0,configurable:!0}),o.prototype.createPlot=function(){return new t.BarPlot({plotStyle:t.BarPlot.Style.CANDLE_VOLUME,plotType:t.PlotType.PRICE_STYLE})};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.CandleVolumePriceStyle=i,t.PriceStyle.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";e=t.PriceStyle,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"equiVolume"},enumerable:!0,configurable:!0}),o.prototype.createPlot=function(){return new t.BarPlot({plotStyle:t.BarPlot.Style.EQUI_VOLUME,plotType:t.PlotType.PRICE_STYLE})};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.EquiVolumePriceStyle=i,t.PriceStyle.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";e=t.PriceStyle,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"equiVolumeShadow"},enumerable:!0,configurable:!0}),o.prototype.createPlot=function(){return new t.BarPlot({plotStyle:t.BarPlot.Style.EQUI_VOLUME_SHADOW,plotType:t.PlotType.PRICE_STYLE})};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.EquiVolumeShadowPriceStyle=i,t.PriceStyle.register(i)}(StockChartX=StockChartX||{}),!function(e){"use strict";Object.defineProperty(i.prototype,"callback",{get:function(){return this._callback},set:function(t){if(null!=t&&!e.JsUtil.isFunction(t))throw new TypeError("Callback must be a function.");this._callback=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"started",{get:function(){return this._isStarted},enumerable:!0,configurable:!0}),i.prototype.start=function(){if(this.callback)return!this._isStarted&&(!!e.AnimationController.add(this)&&(this._isStarted=!0));throw new Error("Callback is not assigned.")},i.prototype.stop=function(){e.AnimationController.remove(this),this._isStarted=!1},i.prototype.handleAnimationFrame=function(){this.callback.call(this.context)},i.prototype.destroy=function(){this.stop(),this.context=null};var t=i;function i(t){this._isStarted=!1,this.context=null,this.recurring=!0,t&&(this.context=t.context,null!=t.recurring&&(this.recurring=t.recurring),this.callback=t.callback)}e.Animation=t}(StockChartX=StockChartX||{}),!function(t){"use strict";window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,e.AnimationInterval)};i.hasAnimationsToRun=function(){return 0<this._animations.length},i.contains=function(t){return 0<=this._animations.indexOf(t)},i.add=function(t){if(this.contains(t))return!1;var e=this.hasAnimationsToRun();return this._animations.push(t),e||this._runAnimation(),!0},i.remove=function(t){var e=this._animations,t=e.indexOf(t);return!(t<0)&&(e.splice(t,1),!0)},i._runAnimation=function(){var t=this;requestAnimationFrame(function(){return t._handleAnimationFrame()})},i._handleAnimationFrame=function(){if(Date.now()-this._prevStartTime>=this.AnimationInterval){for(var t=this._animations,e=0;e<t.length;e++){var i=t[e];i.handleAnimationFrame(),i.recurring||(i.stop(),e--)}this._prevStartTime=Date.now()}this.hasAnimationsToRun()&&this._runAnimation()},i.AnimationInterval=1e3/(t.Environment.isMobile?20:40),i._animations=[],i._prevStartTime=Date.now();var e=i;function i(){}t.AnimationController=e}(StockChartX=StockChartX||{}),!function(o){"use strict";(t=i=o.MouseButton||(o.MouseButton={}))[t.LEFT=1]="LEFT",t[t.SCROLL=2]="SCROLL",t[t.RIGHT=3]="RIGHT",o.MouseEvent={ENTER:"mouseenter",LEAVE:"mouseleave",MOVE:"mousemove",DOWN:"mousedown",UP:"mouseup",CLICK:"click",DOUBLE_CLICK:"dblclick",CONTEXT_MENU:"contextmenu",WHEEL:"mousewheel",SCROLL:"DOMMouseScroll",OVER:"mouseover"},Object.freeze(o.MouseEvent),o.TouchEvent={START:"touchstart",MOVE:"touchmove",END:"touchend"},Object.freeze(o.TouchEvent),o.GestureState={NONE:0,STARTED:1,CONTINUED:2,FINISHED:3},Object.freeze(o.GestureState),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointerKind",{get:function(){return this._pointerType},enumerable:!0,configurable:!0}),e.prototype.handleEvent=function(t){return this._updatePointerKind(t),!1},e.prototype._checkButton=function(t){var e=this.button;return null==e||(!(e!==i.LEFT||!o.Environment.isPhone&&!o.Environment.isMobile)||t.evt.which===e)},e.prototype._checkKeys=function(t){if(!this._keys)return!0;for(var e=0,i=this._keys;e<i.length;e++)switch(i[e]){case o.Key.SHIFT:if(t.evt.shiftKey)break;return!1;case o.Key.CTRL:if(t.evt.ctrlKey)break;return!1;case o.Key.ALT:if(t.evt.altKey)break;return!1}return!0},e.prototype._checkHit=function(t){if(t.evt.type===o.MouseEvent.LEAVE)return!1;var e=this.hitTest;return!!e&&e.call(this.context,t.pointerPosition)},e.prototype._invokeHandler=function(t){var e=this.handler;e&&e.call(this.context,this,t)},e.prototype._updatePointerKind=function(t){switch(t.evt.type){case o.MouseEvent.CLICK:case o.MouseEvent.CONTEXT_MENU:case o.MouseEvent.DOUBLE_CLICK:case o.MouseEvent.DOWN:case o.MouseEvent.LEAVE:case o.MouseEvent.MOVE:case o.MouseEvent.OVER:case o.MouseEvent.SCROLL:case o.MouseEvent.UP:case o.MouseEvent.WHEEL:this._pointerType=1;break;case o.TouchEvent.START:case o.TouchEvent.MOVE:case o.TouchEvent.END:this._pointerType=2;break;default:this._pointerType=0}},e.prototype.isActive=function(){var t=this._state;return t===o.GestureState.STARTED||t===o.GestureState.CONTINUED};var i,t=e;function e(t){this.handler=null,this.hitTest=null,this.context=null,this.button=null,this._state=o.GestureState.NONE,this._pointerType=0,t&&(this.handler=t.handler,this.hitTest=t.hitTest,this.context=t.context,this._keys=t.keys,this.button=t.button)}o.Gesture=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){"use strict";i=e.Gesture,__extends(o,i),o.prototype.handleEvent=function(t){switch(t.evt.type){case e.MouseEvent.ENTER:case e.MouseEvent.MOVE:case e.TouchEvent.START:case e.TouchEvent.MOVE:if(this._checkHit(t))return this.isActive()?(this._state=e.GestureState.CONTINUED,this.hoverEnabled&&this._invokeHandler(t)):(this._state=e.GestureState.STARTED,this.enterEnabled&&this._invokeHandler(t)),!0;if(this.isActive())return this._checkHit(t)||(this._state=e.GestureState.FINISHED,this.leaveEnabled&&this._invokeHandler(t)),!0;break;case e.MouseEvent.LEAVE:case e.TouchEvent.END:if(this.isActive())return this._state=e.GestureState.FINISHED,this.leaveEnabled&&this._invokeHandler(t),!0}return!1};var i,t=o;function o(t){var e=i.call(this,t)||this;return e.enterEnabled=!0,e.hoverEnabled=!0,e.leaveEnabled=!0,t&&(null!=t.enterEventEnabled&&(e.enterEnabled=t.enterEventEnabled),null!=t.hoverEventEnabled&&(e.hoverEnabled=t.hoverEventEnabled),null!=t.leaveEventEnabled&&(e.leaveEnabled=t.leaveEventEnabled)),e}e.MouseHoverGesture=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(n){"use strict";a=n.Gesture,__extends(e,a),Object.defineProperty(e.prototype,"minMoveDistance",{get:function(){return this._minMoveDistance},set:function(t){if(!n.JsUtil.isPositiveNumber(t))throw new Error("minMoveDistance must be a positive number.");this._minMoveDistance=t},enumerable:!0,configurable:!0}),e.prototype.handleEvent=function(t){a.prototype.handleEvent.call(this,t);var e=this._lastPoint={x:t.pointerPosition.x,y:t.pointerPosition.y};switch(t.evt.type){case n.MouseEvent.DOWN:case n.TouchEvent.START:if(this._checkButton(t)&&this._checkHit(t))return this._prevPoint={x:e.x,y:e.y},this._state=n.GestureState.STARTED,this._invokeHandler(t),!0;break;case n.MouseEvent.MOVE:case n.TouchEvent.MOVE:var i,o,r=this.moveOffset;if(this.isActive())return r.x=e.x-this._prevPoint.x,r.y=e.y-this._prevPoint.y,i=this.minMoveDistance,(this.horizontalMoveEnabled&&Math.abs(r.x)>=i||this.verticalMoveEnabled&&Math.abs(r.y)>=i)&&(r=this._animation,this._state=n.GestureState.CONTINUED,r.started||(o=n.JsUtil.shallowClone(t),r.callback=function(){this._prevPoint=this._lastPoint,this._invokeHandler(o)},r.start())),!0;break;case n.MouseEvent.UP:case n.MouseEvent.LEAVE:case n.TouchEvent.END:if(this.isActive())return this._animation.stop(),this._state=n.GestureState.FINISHED,this._invokeHandler(t),!0}return!1};var a,t=e;function e(t){var e=a.call(this,t)||this;return e.moveOffset={x:0,y:0},e._minMoveDistance=1,e.horizontalMoveEnabled=!0,e.verticalMoveEnabled=!0,e._prevPoint=null,e._lastPoint=null,e._animation=new n.Animation({context:e,recurring:!1}),t&&(null!=t.minMoveDistance&&(e.minMoveDistance=t.minMoveDistance),null!=t.horizontalMoveEnabled&&(e.horizontalMoveEnabled=t.horizontalMoveEnabled),t.verticalMoveEnabled&&(e.verticalMoveEnabled=t.verticalMoveEnabled)),e}n.PanGesture=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(l){"use strict";e=l.Gesture,__extends(s,e),s.prototype.handleEvent=function(t){var e=t.evt,i=e.originalEvent;switch(e.type){case l.MouseEvent.WHEEL:case l.MouseEvent.SCROLL:if(this._checkHit(t))return e.type===l.MouseEvent.SCROLL?this.delta=0<i.detail?1:-1:this.delta=i.wheelDelta<0?1:-1,this._state=l.GestureState.FINISHED,this._invokeHandler(t),!0;break;case l.TouchEvent.START:if(this.isActive()||2!==i.touches.length)break;return this._prevScale=this._lastScale=i.scale,(void 0!==this._prevScale||(this._prevScale=this._lastScale=s._calculateScale(i.touches),void 0!==this._prevScale))&&(this._state=l.GestureState.STARTED,!0);case l.TouchEvent.MOVE:if(this.isActive()){var o=this._lastScale=i.scale,r=t.pointerPosition;if(void 0===o){var n=i.touches;if(2!==n.length)return!0;o=this._lastScale=s._calculateScale(n),r=s._zoomPoint(n)}var a,n=o-this._prevScale,o=(0<this._prevScale&&o<0||this._prevScale<0&&0<o?2:1)*this._scaleThreshold;return Math.abs(n)>=o&&(this.delta=n<0?1:-1,this._state=l.GestureState.CONTINUED,(o=this._animation).started||(a=l.JsUtil.shallowClone(t),o.callback=function(){this._prevScale=this._lastScale,a.pointerPosition=r,this._invokeHandler(a)},o.start())),!0}break;case l.TouchEvent.END:if(this.isActive())return this._state=l.GestureState.FINISHED,!0}return!1},s._calculateScale=function(t){var e=t[0].pageX-t[1].pageX,t=t[0].pageY-t[1].pageY;return Math.sqrt(e*e+t*t)/Math.max(window.innerWidth,window.innerHeight)},s._zoomPoint=function(t){return{x:(t[0].pageX+t[1].pageX)/2,y:(t[0].pageY+t[1].pageY)/2}};var e,t=s;function s(t){t=e.call(this,t)||this;return t.delta=0,t._prevScale=0,t._lastScale=0,t._scaleThreshold=.005,t._animation=new l.Animation({context:t,recurring:!1}),t}l.MouseWheelGesture=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(r){"use strict";i=r.Gesture,__extends(n,i),Object.defineProperty(n.prototype,"maxTouchOffset",{get:function(){return this._maxTouchOffset},set:function(t){if(!r.JsUtil.isPositiveNumber(t))throw new Error("Max touch offset must be a number greater than 0.");this._maxTouchOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxTouchInterval",{get:function(){return this._maxTouchInterval},set:function(t){if(!r.JsUtil.isPositiveNumber(t))throw new Error("Max touch interval must be a number greater than 0.");this._maxTouchInterval=t},enumerable:!0,configurable:!0}),n.prototype.handleEvent=function(t){switch(t.evt.type){case r.MouseEvent.CLICK:if(!n._isTouch&&this._finishGesture(t))return!0;break;case r.TouchEvent.START:n._isTouch=!0,this._checkHit(t)&&(this._startPoint=t.pointerPosition,this._startDate=new Date,this._state=r.GestureState.STARTED);break;case r.TouchEvent.END:if(!this.isActive())break;var e=Math.abs(t.pointerPosition.x-this._startPoint.x),i=Math.abs(t.pointerPosition.y-this._startPoint.y),o=new Date;if(e<=this._maxTouchOffset&&i<=this._maxTouchOffset&&o-this._startDate<=this._maxTouchInterval&&this._finishGesture(t))return!0;this._state=r.GestureState.NONE}return!1},n.prototype._finishGesture=function(t){if(this._checkButton(t)&&this._checkHit(t)&&this._checkKeys(t))return this._state=r.GestureState.FINISHED,this._invokeHandler(t),!0};var i,t=n;function n(t){var e=i.call(this,t)||this;return e._maxTouchOffset=10,e._maxTouchInterval=500,t&&(t.maxTouchOffset&&(e.maxTouchOffset=t.maxTouchOffset),t.maxTouchInterval&&(e.maxTouchInterval=t.maxTouchInterval)),e}r.ClickGesture=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(r){"use strict";i=r.Gesture,__extends(e,i),Object.defineProperty(e.prototype,"maxTouchOffset",{get:function(){return this._maxTouchOffset},set:function(t){if(!r.JsUtil.isPositiveNumber(t))throw new Error("Max touch offset must be a number greater than 0.");this._maxTouchOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxTouchInterval",{get:function(){return this._maxTouchInterval},set:function(t){if(!r.JsUtil.isPositiveNumber(t))throw new Error("Max touch interval must be a number greater than 0.");this._maxTouchInterval=t},enumerable:!0,configurable:!0}),e.prototype.handleEvent=function(t){switch(t.evt.type){case r.MouseEvent.DOUBLE_CLICK:if(this._finishGesture(t))return!0;break;case r.TouchEvent.START:if(this.isActive())return this._isSecondTouch=!0;if(this._checkHit(t))return this._startPoint=t.pointerPosition,this._startDate=new Date,this._isSecondTouch=!1,this._state=r.GestureState.STARTED,!0;this._state=r.GestureState.NONE;break;case r.TouchEvent.END:if(!this._isSecondTouch)break;var e=Math.abs(t.pointerPosition.x-this._startPoint.x),i=Math.abs(t.pointerPosition.y-this._startPoint.y),o=new Date;if(e<=this._maxTouchOffset&&i<=this._maxTouchOffset&&o-this._startDate<=this._maxTouchInterval){if(this._finishGesture(t))return!0}else this._state=r.GestureState.NONE}return!1},e.prototype._finishGesture=function(t){return!(!this._checkButton(t)||!this._checkHit(t))&&(this._state=r.GestureState.FINISHED,this._invokeHandler(t),t.stopPropagation=!0)};var i,t=e;function e(t){var e=i.call(this,t)||this;return e._maxTouchOffset=10,e._maxTouchInterval=2500,t&&(t.maxTouchOffset&&(e.maxTouchOffset=t.maxTouchOffset),t.maxTouchInterval&&(e.maxTouchInterval=t.maxTouchInterval)),e}r.DoubleClickGesture=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(r){"use strict";i=r.Gesture,__extends(e,i),Object.defineProperty(e.prototype,"maxTouchOffset",{get:function(){return this._maxTouchOffset},set:function(t){if(!r.JsUtil.isPositiveNumber(t))throw new Error("Max touch offset must be a number greater than 0.");this._maxTouchOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"touchInterval",{get:function(){return this._touchInterval},set:function(t){if(!r.JsUtil.isPositiveNumber(t))throw new Error("Touch interval must be a number greater than 0.");this._touchInterval=t},enumerable:!0,configurable:!0}),e.prototype.handleEvent=function(t){switch(t.evt.type){case r.MouseEvent.CONTEXT_MENU:if(this._finishGesture(t))return!0;break;case r.TouchEvent.START:this._checkHit(t)&&(this._startPoint=t.pointerPosition,this._lastEvent=r.JsUtil.clone(t),this._state=r.GestureState.STARTED,this._startTimeout());break;case r.TouchEvent.MOVE:this.isActive()&&(this._lastEvent=r.JsUtil.clone(t));break;case r.TouchEvent.END:if(this._stopTimeout(),this._lastEvent)return this._lastEvent=null,t.stopPropagation=!0}return!1},e.prototype._startTimeout=function(){var o=this;this._timeoutId=setTimeout(function(){var t,e,i=o._lastEvent;if(o.isActive()&&i)return t=Math.abs(i.pointerPosition.x-o._startPoint.x),e=Math.abs(i.pointerPosition.y-o._startPoint.y),!(!(t<=o._maxTouchOffset&&e<=o._maxTouchOffset)||!o._finishGesture(i))||void(o._state=r.GestureState.NONE)},this._touchInterval)},e.prototype._stopTimeout=function(){this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null)},e.prototype._finishGesture=function(t){if(this._checkHit(t))return this._state=r.GestureState.FINISHED,this._invokeHandler(t),!0};var i,t=e;function e(t){var e=i.call(this,t)||this;return e._maxTouchOffset=10,e._touchInterval=2e3,t&&(t.maxTouchOffset&&(e.maxTouchOffset=t.maxTouchOffset),t.touchInterval&&(e.touchInterval=t.touchInterval)),e}r.ContextMenuGesture=t}(StockChartX=StockChartX||{}),!function(l){"use strict";function t(t,e,i){if(this.gestures=[],t&&(this.add(t),e||i))for(var o=0,r=this.gestures;o<r.length;o++){var n=r[o];n.context||(n.context=e),n.hitTest||(n.hitTest=i)}}t.prototype.add=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,o=l.JsUtil.flattenArray(t);i<o.length;i++){var r=o[i];this.contains(r)||this.gestures.push(r)}},t.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=l.JsUtil.flattenArray(t),o=this.gestures,r=0,n=i;r<n.length;r++){var a=n[r],a=o.indexOf(a);0<=a&&o.splice(a,1)}},t.prototype.contains=function(t){return 0<=this.gestures.indexOf(t)},t.prototype.handleEvent=function(t,e){void 0===e&&(e=!0);for(var i=!1,o=0,r=this.gestures;o<r.length;o++){var n=r[o];e?!n.handleEvent(t)||n instanceof l.MouseHoverGesture||(i=!0):(n instanceof l.MouseHoverGesture||t.evt.type===l.MouseEvent.LEAVE||t.evt.type===l.MouseEvent.UP)&&n.handleEvent(t)}return i},l.GestureArray=t}(StockChartX=StockChartX||{}),!function(i){"use strict";var e=jQuery,t=(Object.defineProperty(o,"renderer",{get:function(){var t=this._renderer;return t||((t=new i.CanvasRenderer).canvas=e("<canvas></canvas>")[0],this._renderer=t)},enumerable:!0,configurable:!0}),o.applyTextTheme=function(t){this.renderer.textTheme(t)},o.textWidth=function(t,e){var i=this.renderer;return e&&i.textTheme(e),i.textWidth(t)},o.measureText=function(t,e){return{width:this.textWidth(t,e),height:i.HtmlUtil.getFontSize(e)+1}},o);function o(){}i.DummyCanvasContext=t}(StockChartX=StockChartX||{}),!function(t){"use strict";function e(){}e.calculateLinearRegression=function(t){for(var e=0,i=0,o=t.length,r=0;r<o;r++)e+=r,i+=t[r];for(var e=0===o?0:e/o,i=0===o?0:i/o,n=0,a=0,r=0;r<o;r++)n+=(r-e)*(t[r]-i),a+=Math.pow(r-e,2);var l=0===a?0:n/a;return{slope:l,firstValue:i-l*e}},t.DrawingCalculationUtil=e}(StockChartX=StockChartX||{}),!function(c){"use strict";function t(t,e){this._dateScale=t,this._valueScale=e}Object.defineProperty(t.prototype,"dateScale",{get:function(){return this._dateScale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valueScale",{get:function(){return this._valueScale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canResolveX",{get:function(){return!!this._dateScale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canResolveY",{get:function(){return!!this._valueScale},enumerable:!0,configurable:!0}),t.prototype.columnByRecord=function(t,e){t-=Math.trunc(this._dateScale.firstVisibleRecord);return t=!1!==e?Math.trunc(t):t},t.prototype.recordByColumn=function(t,e){t+=Math.trunc(this._dateScale.firstVisibleRecord);return t=!1!==e?Math.trunc(t):t},t.prototype.xByColumn=function(t,e,i){var o,r=this._dateScale,n=r.columnWidth,a=r.firstVisibleRecord,a=(a-Math.trunc(a))*n,r=r.projectionFrame,l=this.dateScale.columnValues;return null!==l&&t&&0<t?(o=r.left-a+l.centers[t],t>l.centers.length-1&&(o=r.left-a+l.centers[l.centers.length-1]+l.visibleColumnsWidths[l.visibleColumnsWidths.length-1])):o=r.left-a+t*n,!1!==e&&(o+=n/2),!1!==i?Math.round(o):o},t.prototype.columnByX=function(t,e){var i,o=this._dateScale,r=o.projectionFrame,n=o.firstVisibleRecord,o=o.columnWidth,n=(n-Math.trunc(n))*o,a=this.dateScale.columnValues;return null!==a&&0<t?(i=~c.JsUtil.binarySearch(a.centers,t),a.centers[i]!==t&&0<=i&&i<a.centers.length&&(Math.abs(t-a.centers[i-1])<Math.abs(t-a.centers[i])&&(i-=1),i<a.centers.length-1&&(i+=100*(t-(a.centers[i]-a.visibleColumnsWidths[i]/2))/a.visibleColumnsWidths[i]/100))):i=(t-r.left+n)/o,!1!==e?Math.floor(i):i},t.prototype.xByRecord=function(t,e,i){return this.xByColumn(this.columnByRecord(t,e),e,i)},t.prototype.recordByX=function(t,e){return this.recordByColumn(this.columnByX(t,e),e)},t.prototype.dateByRecord=function(t){var e,i=this._dateScale.getDateDataSeries().values;return 0===i.length?new Date(0):t<0?(e=i[0].getTime()+t*this._dateScale.chart.timeInterval,new Date(e)):t>=i.length?(e=i[i.length-1].getTime()+(t-i.length+1)*this._dateScale.chart.timeInterval,new Date(e)):i[t]},t.prototype.recordByDate=function(t){var e=this._dateScale,i=e.getDateDataSeries();if(0===i.length)return-1;var o,r=i.floorIndex(t);return r<0?(o=t.getTime()-i.firstValue.getTime(),r=Math.floor(o/e.chart.timeInterval)):r>=i.length&&(o=t.getTime()-i.lastValue.getTime(),r=i.length-1+Math.floor(o/e.chart.timeInterval)),r},t.prototype.dateByColumn=function(t){t=this.recordByColumn(t);return this.dateByRecord(t)},t.prototype.columnByDate=function(t){t=this.xByDate(t,!1);return this.columnByX(t)},t.prototype.dateByX=function(t){t=Math.round(t);var e=this.columnByX(t),i=this.xByColumn(e,!0,!1),o=this.dateByColumn(e);if(t===i)return o;var e=t<i?e-1:e+1,r=this.xByColumn(e,!0,!1),e=this.dateByColumn(e),r=i-r,o=o.getTime(),n=o;return 0!=r&&(t=(t-i)/r,n+=(o-e.getTime())*t),new Date(n)},t.prototype.xByDate=function(t,e){var i=this.recordByDate(t),o=this.xByRecord(i,!0,!1),r=this.dateByRecord(i),i=i+1,n=this.xByRecord(i,!0,!1),i=this.dateByRecord(i),a=r.getTime(),i=i.getTime()-r.getTime(),r=o;return 0!=i&&(r+=(n-o)*((t.getTime()-a)/i)),!1!==e?Math.round(r):r},t.prototype.yByValue=function(t){var e=this._valueScale,i=e.projectionFrame,o=e.maxVisibleValue,r=e.minVisibleValue;switch(e.kind){case c.ScaleKind.LINEAR:var n=i.height/(o-r);return Math.round(i.top+(o-t)*n);case c.ScaleKind.LOGARITHMIC:var n=i.bottom,a=i.top,l=this._logarithmfromValue(r),a=(this._logarithmfromValue(o)-l)/(a-n);return Math.round((this._logarithmfromValue(t)-l)/a+n);default:throw new Error("Unknown value scale kind: "+e.kind)}},t.prototype.valueByY=function(t){var e=this._valueScale,i=e.projectionFrame,o=e.maxVisibleValue,r=e.minVisibleValue;switch(e.kind){case c.ScaleKind.LINEAR:var n=(o-r)/i.height;return o-(t-i.top)*n;case c.ScaleKind.LOGARITHMIC:var n=i.height,a=i.top,l=this._logarithmfromValue(r),s=this._logarithmfromValue(o);return Math.exp(l+(s-l)/(a-n)*(t-n))-1;default:throw new Error("Unknown value scale kind: "+e.kind)}},t.prototype._logarithmfromValue=function(t){return t<0?-c.JsUtil.log(Math.abs(t)+1):c.JsUtil.log(t+1)},c.Projection=t}(StockChartX=StockChartX||{}),!function(c){"use strict";Object.defineProperty(e.prototype,"dateDataSeries",{get:function(){return this.getDataSeries(c.DataSeriesSuffix.DATE)},enumerable:!0,configurable:!0}),e.prototype.findDataSeries=function(t){var e,i=this._dataSeries;for(e in i)if(i.hasOwnProperty(e)){var o=e.lastIndexOf(t);if(0<=o&&o===e.length-t.length)return i[e]}return null},e.prototype.getDataSeries=function(t,e){void 0===e&&(e=!1);var i=this._dataSeries[t];return i||(e?this.addDataSeries(t):null)},e.prototype.indexByDate=function(t){var e=this.dateDataSeries;if(!e)return null;e=e.binaryIndexOf(t);return 0<=e?e:null},e.prototype.clearDataSeries=function(t){var e;if(t)"string"==typeof t?(e=this.getDataSeries(t))&&e.clear():t.clear();else for(var i in e=this._dataSeries)e.hasOwnProperty(i)&&e[i].clear()},e.prototype.trimDataSeries=function(t){var e,i=this._dataSeries;for(e in i)i.hasOwnProperty(e)&&i[e].trim(t)},e.prototype.addBarDataSeries=function(t){var e=c.DataSeriesSuffix;return{date:this.addDataSeries((t=void 0===t?"":t)+e.DATE),open:this.addDataSeries(t+e.OPEN),high:this.addDataSeries(t+e.HIGH),low:this.addDataSeries(t+e.LOW),close:this.addDataSeries(t+e.CLOSE),volume:this.addDataSeries(t+e.VOLUME),ticksCount:this.addDataSeries(t+e.TICKS_COUNT),details:this.addDataSeries(t+e.DETAILS)}},e.prototype.barDataSeries=function(t,e){var i=c.DataSeriesSuffix;return{date:this.getDataSeries((t=void 0===t?"":t)+i.DATE,e=void 0===e?!1:e),open:this.getDataSeries(t+i.OPEN,e),high:this.getDataSeries(t+i.HIGH,e),low:this.getDataSeries(t+i.LOW,e),close:this.getDataSeries(t+i.CLOSE,e),volume:this.getDataSeries(t+i.VOLUME,e),ticksCount:this.getDataSeries(t+i.TICKS_COUNT,e),details:this.getDataSeries(t+i.DETAILS,e)}},e.prototype.clearBarDataSeries=function(t){var e=c.DataSeriesSuffix,t=t&&t.symbol||"";this.clearDataSeries(t+e.DATE),this.clearDataSeries(t+e.OPEN),this.clearDataSeries(t+e.HIGH),this.clearDataSeries(t+e.LOW),this.clearDataSeries(t+e.CLOSE),this.clearDataSeries(t+e.VOLUME),this.clearDataSeries(t+e.TICKS_COUNT),this.clearDataSeries(t+e.DETAILS)},e.prototype.ohlcDataSeries=function(t,e){var i=c.DataSeriesSuffix;return{open:this.getDataSeries((t=void 0===t?"":t)+i.OPEN,e=void 0===e?!1:e),high:this.getDataSeries(t+i.HIGH,e),low:this.getDataSeries(t+i.LOW,e),close:this.getDataSeries(t+i.CLOSE,e)}},e.prototype.addDataSeries=function(t,e){if(void 0===e&&(e=!1),!t)throw new Error("Data series is not specified.");if("string"==typeof t)return this.addDataSeries(new c.DataSeries(t),e);if(!(t instanceof c.DataSeries))throw new TypeError("Invalid data series. Name or data series object expected.");var i=t.name;if(!i||"string"!=typeof i)throw new TypeError("Data series name must be non-empty string.");if(this.getDataSeries(i)&&!e)throw new Error("Data series '"+i+"' already exists.");return this._dataSeries[i]=t},e.prototype.removeDataSeries=function(t){t?(t="string"==typeof t?t:t.name,delete this._dataSeries[t]):this._dataSeries={}},e.prototype.appendBars=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.appendInstrumentBars.apply(this,[{}].concat(t))},e.prototype.appendInstrumentBars=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];function o(t){r.date.add(t.date),r.open.add(t.open),r.high.add(t.high),r.low.add(t.low),r.close.add(t.close),r.volume.add(t.volume),r.details.addArray(t.details),null!=t.ticksCount?r.ticksCount.add(t.ticksCount):r.ticksCount.add(1)}var t=t&&t.symbol,r=this.barDataSeries(t,!0);Array.isArray(e)?c.JsUtil.flattenedArray(e,o):o(e)},e.prototype.insertBars=function(t,e){this.insertInstrumentBars({},t,e)},e.prototype.insertInstrumentBars=function(t,e,i){var i=c.JsUtil.flattenArray([i]),o=i.map(function(t){return t.date}),r=i.map(function(t){return t.open}),n=i.map(function(t){return t.high}),a=i.map(function(t){return t.low}),l=i.map(function(t){return t.close}),s=i.map(function(t){return t.volume}),i=i.map(function(t){return t.details}),t=this.barDataSeries(t&&t.symbol);t.date.insert(e,o),t.open.insert(e,r),t.high.insert(e,n),t.low.insert(e,a),t.close.insert(e,l),t.volume.insert(e,s),t.ticksCount.insert(e,1),t.details.insert(e,i)},e.prototype.bar=function(t,e){e=e||this.barDataSeries(),t="number"==typeof t?t:this.indexByDate(t);if(null==t||t<0||t>=e.date.length)return null;var i={date:e.date.valueAtIndex(t),open:e.open.valueAtIndex(t),high:e.high.valueAtIndex(t),low:e.low.valueAtIndex(t),close:e.close.valueAtIndex(t),volume:e.volume.valueAtIndex(t),ticksCount:e.ticksCount.valueAtIndex(t)};return e.details&&(i.details=e.details.valueAtIndex(t)),i},e.prototype.updateBarByIndex=function(t,e){var i=this.barDataSeries();i.date.valueAtIndex(t,e.date),i.open.valueAtIndex(t,e.open),i.close.valueAtIndex(t,e.close),i.high.valueAtIndex(t,e.high),i.low.valueAtIndex(t,e.low),i.volume.valueAtIndex(t,e.volume),i.ticksCount.valueAtIndex(t,i.ticksCount.valueAtIndex(t)+1)},e.prototype.updateLastBar=function(t,e){e=e&&e.symbol?e.symbol:"",e=this.barDataSeries(e);e.open.updateLast(t.open),e.high.updateLast(t.high),e.low.updateLast(t.low),e.close.updateLast(t.close),e.volume.updateLast(t.volume),e.date.updateLast(t.date),e.ticksCount.updateLast(e.ticksCount.lastValue+1)},e.prototype.getLastBar=function(t){t=t&&t.symbol||"",t=this.barDataSeries(t,!0);return 0===t.date.values.length?null:{open:t.open.lastValue,high:t.high.lastValue,low:t.low.lastValue,close:t.close.lastValue,volume:t.volume.lastValue,date:t.date.lastValue,ticksCount:t.ticksCount.lastValue}},e.prototype.getBeforeLastBar=function(t){t=t&&t.symbol||"",t=this.barDataSeries(t,!0);return t.date.values.length<2?null:{open:t.open.valueAtIndex(t.open.length-2),high:t.high.valueAtIndex(t.high.length-2),low:t.low.valueAtIndex(t.low.length-2),close:t.close.valueAtIndex(t.close.length-2),volume:t.volume.valueAtIndex(t.volume.length-2),date:t.date.valueAtIndex(t.date.length-2)}};var t=e;function e(){this._dataSeries={}}c.DataManager=t}(StockChartX=(StockChartX=StockChartX||{})||{}),!function(D){"use strict";function t(){}t._setupOhlcDataSeries=function(t,e){var i=D.DataSeriesSuffix;return(e=e||{open:new D.DataSeries(t+i.OPEN),high:new D.DataSeries(t+i.HIGH),low:new D.DataSeries(t+i.LOW),close:new D.DataSeries(t+i.CLOSE)}).open.clear(),e.high.clear(),e.low.clear(),e.close.clear(),e},t._setupBarDataSeries=function(t,e){var i=D.DataSeriesSuffix;return(e=this._setupOhlcDataSeries(t,e)).date?e.date.clear():e.date=new D.DataSeries(t+i.DATE),e.volume?e.volume.clear():e.volume=new D.DataSeries(t+i.VOLUME),e.details?e.details.clear():e.details=new D.DataSeries(t+i.DETAILS),e},t.convertToHeikinAshi=function(t,e){for(var i=D.DataSeriesSuffix,o=(e=this._setupOhlcDataSeries(i.HEIKIN_ASHI,e),t.open.values),r=t.high.values,n=t.low.values,a=t.close.values,l=a.length,s=e.open.values,c=e.high.values,h=e.low.values,u=e.close.values,f=0;f<l;f++){var d=0<f?(s[f-1]+u[f-1])/2:o[f],p=(o[f]+r[f]+n[f]+a[f])/4,y=Math.max(d,p,r[f]),m=Math.min(d,p,n[f]);s.push(d),c.push(y),h.push(m),u.push(p)}return e},t.convertToRenko=function(t,e,i){var o=D.DataSeriesSuffix,r=(i=this._setupBarDataSeries(o.RENKO,i),t.date.values),o=t.open.values,n=t.close.values,a=t.volume.values,l=n.length,s=i.date.values,c=i.open.values,h=i.high.values,u=i.low.values,f=i.close.values,d=i.volume.values;if(0===l)return i;for(var p=null,y=Math.floor(o[0]/e)*e+e,m=y-e,_=0,C=0;C<l;C++){_+=a[C];var p=p||new Date(r[C].getTime()),g=n[C];if(e<=g-m){for(var b=Math.trunc((g-m)/e),S=0;S<b;S++)y=m,m+=e,s.push(p),c.push(y),h.push(m),u.push(y),f.push(m),d.push(_),p=new Date(p.getTime()+1e3);_=0,p=null}else if(e<=y-g){for(b=Math.trunc((y-g)/e),S=0;S<b;S++)m=y,y-=e,s.push(p),c.push(m),h.push(m),u.push(y),f.push(y),d.push(_),p=new Date(p.getTime()+1e3);_=0,p=null}}return i},t.convertToLineBreak=function(t,e,i){var o=D.DataSeriesSuffix,r=(i=this._setupBarDataSeries(o.LINE_BREAK,i),t.date.values),o=t.open.values,n=t.close.values,a=t.volume.values,l=n.length,s=i.date.values,c=i.open.values,h=i.high.values,u=i.low.values,f=i.close.values,d=i.volume.values;if(0===l)return i;for(var p=null,y=o[0],m=o[0],_=0,C=0;C<l;C++){_+=a[C],null==p&&(p=new Date(r[C].getTime()));var g=n[C],b=m<g,S=g<y;if(b||S){var v=y,w=f.length;if(0<w&&(v=(b?h:u)[w-1]),c.push(v),h.push(Math.max(v,g)),u.push(Math.min(v,g)),f.push(g),s.push(p),d.push(_),b)for(var m=g,P=w-1;w-e<=P&&f[P]>c[P];P--)y=u[P];if(S)for(y=g,P=w-1;w-e<=P&&f[P]<c[P];P--)m=h[P];p=_=null}}return i},t.convertToPointAndFigure=function(t,e,i,o,r){r=this._setupBarDataSeries(D.DataSeriesSuffix.LINE_BREAK,r);var n=t.date.values,a=t.high.values,l=t.low.values,s=t.close.values,c=t.volume.values,h=s.length,u=r.date.values,f=r.open.values,d=r.high.values,p=r.low.values,y=r.close.values,m=r.volume.values;if(0===h)return r;for(var _=null,C=e*i,g=!1,b=s[0]+e/2,S=b-e,v=0,w=o===D.PointAndFigureSource.HIGH_LOW,P=0;P<h;P++){if(b<(O=(w?a:s)[P])){g=!0;break}if((E=(w?l:s)[P])<S){g=!1;break}v+=c[P]}for(;P<h;P++){v+=c[P],null==_&&(_=new Date(n[P].getTime()));var k,x,O=(w?a:s)[P],E=(w?l:s)[P];g?b<O?b+=Math.round((O-b)/e)*e:E<b-C&&(x=b-e,k=S-Math.round((S-E)/e)*e,1e-4<Math.abs(x-k)&&(f.push(S),d.push(b),p.push(S),y.push(b),m.push(v),u.push(_),S=k,b=x,v=0,_=null,g=!1)):E<S?S-=Math.round((S-E)/e)*e:S+C<O&&(k=S+e,x=b+Math.round((O-b)/e)*e,1e-4<Math.abs(x-k)&&(f.push(b),d.push(b),p.push(S),y.push(S),m.push(v),u.push(_),S=k,b=x,v=0,g=!(_=null)))}return _&&(u.push(_),f.push(g?S:b),d.push(b),p.push(S),y.push(g?b:S),m.push(v)),r},t.convertToKagi=function(t,e,i){var o=D.DataSeriesSuffix,r=(i=this._setupBarDataSeries(o.LINE_BREAK,i),t.date.values),o=t.open.values,n=t.close.values,a=t.volume.values,l=n.length,s=i.date.values,c=i.open.values,h=i.high.values,u=i.low.values,f=i.close.values,d=i.volume.values;if(0===l)return i;for(var p=null,y=0,m=n[0],_=o[0],C=_<=m,g=0;g<l;g++){var p=p||new Date(r[g].getTime()),b=n[g],S=b-m;C!==0<=S&&Math.abs(S)>=e?(s.push(p),c.push(_),h.push(Math.max(_,m)),u.push(Math.min(_,m)),f.push(m),d.push(y),_=m,m=b,C=!C,p=null,y=0):(m=C?Math.max(m,b):Math.min(m,b),y+=a[0])}return i},D.BarConverter=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(r){"use strict";var e;r.DateScaleScrollKind={NORMAL:"normal",AUTOSCALED:"autoscaled"},Object.freeze(r.DateScaleScrollKind),r.DateScaleZoomKind={NORMAL:"normal",AUTOSCALED:"autoscaled"},Object.freeze(r.DateScaleZoomKind),r.DateScaleZoomMode={PIN_CENTER:"pin_center",PIN_LEFT:"pin_left",PIN_RIGHT:"pin_right",PIN_MOUSE:"pin_mouse"},Object.freeze(r.DateScaleZoomMode),(a=e=r.BarsUpdateKind||(r.BarsUpdateKind={}))[a.TICK=0]="TICK",a[a.NEW_BAR=1]="NEW_BAR",r.DateScaleAutoScrollKind={NONE:"none",HIDDEN_BAR:"hidden_bar",ALWAYS:"always",VISIBLE_BAR:"visible_bar"},Object.freeze(r.DateScaleAutoScrollKind),r.DateScaleAutoScrollMode={NEW_BAR:"new_bar",TICK:"tick"},Object.freeze(r.DateScaleAutoScrollMode);var i,o="scxTopDateScale",n="scxBottomDateScale",t=".scxDateScale",a=(i=r.ChartComponent,__extends(l,i),Object.defineProperty(l.prototype,"topPanel",{get:function(){return this._topPanel},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"bottomPanel",{get:function(){return this._bottomPanel},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"topPanelCssClass",{get:function(){return o},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"bottomPanelCssClass",{get:function(){return n},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"topPanelVisible",{get:function(){return this._topPanel.visible},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"bottomPanelVisible",{get:function(){return this._bottomPanel.visible},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"projection",{get:function(){return this._projection},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"projectionFrame",{get:function(){return this._projectionFrame},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"calibrator",{get:function(){return this._calibrator},set:function(t){this._calibrator=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"firstVisibleIndex",{get:function(){return this._firstVisibleIndex},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"lastVisibleIndex",{get:function(){return this._lastVisibleIndex},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"firstVisibleRecord",{get:function(){return this._options.firstVisibleRecord},set:function(t){this.allowPartialRecords||(t=Math.trunc(t));var e=this._options.firstVisibleRecord;e!==t&&(this._options.firstVisibleRecord=t,this._firstVisibleIndex=Math.floor(t),this.chart.fireValueChanged(r.ChartEvent.FIRST_VISIBLE_RECORD_CHANGED,e,t))},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"lastVisibleRecord",{get:function(){return this._options.lastVisibleRecord},set:function(t){this.allowPartialRecords||(t=Math.trunc(t));var e=this._options.lastVisibleRecord;e!==t&&(this._options.lastVisibleRecord=t,this._lastVisibleIndex=Math.ceil(t),this.chart.fireValueChanged(r.ChartEvent.LAST_VISIBLE_RECORD_CHANGED,e,t))},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"visibleDateRange",{get:function(){var t=this.projectionFrame;return{min:this.projection.dateByX(t.left),max:this.projection.dateByX(t.right)}},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"useManualHeight",{get:function(){return this._options.useManualHeight},set:function(t){this._options.useManualHeight=!!t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"manualHeight",{get:function(){return this._options.height},set:function(t){if(!r.JsUtil.isPositiveNumber(t))throw new Error("Height must be a positive number.");this._options.height=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"minVisibleRecords",{get:function(){return this._options.minVisibleRecords},set:function(t){if(!r.JsUtil.isPositiveNumber(t))throw new Error("Records must be a finite number greater than 0.");this._options.minVisibleRecords=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"rightAdditionalSpaceRatio",{get:function(){return this._options.rightAdditionalSpaceRatio},set:function(t){if(r.JsUtil.isNegativeNumber(t))throw new TypeError("Ratio must be a positive number.");this._options.rightAdditionalSpaceRatio=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"scrollKind",{get:function(){return this._options.scrollKind},set:function(t){this._options.scrollKind=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"autoScrollKind",{get:function(){return this._options.autoScrollKind},set:function(t){this._options.autoScrollKind=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"autoScrollMode",{get:function(){return this._options.autoScrollMode},set:function(t){this._options.autoScrollMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"zoomKind",{get:function(){return this._options.zoomKind},set:function(t){this._options.zoomKind=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"zoomMode",{get:function(){return this._options.zoomMode},set:function(t){this._options.zoomMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"theme",{get:function(){return this._options.theme},set:function(t){var e=this._options.theme;this._options.theme=t,this.chart.fireValueChanged(r.ChartEvent.DATE_SCALE_THEME_CHANGED,e,t)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"actualTheme",{get:function(){return this._options.theme||this.chart.theme.dateScale},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"columnsCount",{get:function(){if(this.needsAutoScale())return 1;var t=this._options.lastVisibleRecord-this._options.firstVisibleRecord+1;return 0==t?1:t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"columnWidth",{get:function(){return this._columnWidth},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"maxAllowedRecord",{get:function(){var t=this._projectionFrame.width*this.rightAdditionalSpaceRatio/this._columnWidth;return this.getDateDataSeries().length-1+t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"majorTickMarkLength",{get:function(){return this._options.majorTickMarkLength},set:function(t){this._options.majorTickMarkLength=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"minorTickMarkLength",{get:function(){return this._options.minorTickMarkLength},set:function(t){this._options.minorTickMarkLength=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"textPadding",{get:function(){return this._options.textPadding},set:function(t){this._options.textPadding=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"allowPartialRecords",{get:function(){return this._options.allowPartialRecords},set:function(t){this._options.allowPartialRecords!==t&&(this._options.allowPartialRecords=t,this.firstVisibleRecord=this.firstVisibleRecord,this.lastVisibleRecord=this.lastVisibleRecord)},enumerable:!0,configurable:!0}),l.prototype._subscribe=function(){var e=this;this.chart.on(r.ChartEvent.LOCALE_CHANGED+t,function(t){e._formatter.locale=t.value},this)},l.prototype._unsubscribe=function(){this.chart.off(t,this)},l.prototype._calculateProjectionMetrics=function(){var t=this._projectionFrame.width,e=this.chart.primaryDataSeries(r.DataSeriesSuffix.VOLUME).values;0<e.length&&this.chart.priceStyle.className===r.BarPlotStyle.CANDLE_VOLUME||this.chart.priceStyle.className===r.BarPlotStyle.EQUI_VOLUME||this.chart.priceStyle.className===r.BarPlotStyle.EQUI_VOLUME_SHADOW?(this.columnValues={},this._calculateVolumeOnProjection(e)):this.columnValues=null,this._columnWidth=t/this.columnsCount,this.chart.smartPriceStyleHandler&&this.chart.smartPriceStyleHandler.adopt()},l.prototype.setNeedsAutoScale=function(){this.firstVisibleRecord=null,this.lastVisibleRecord=null},l.prototype.needsAutoScale=function(){return null==this.firstVisibleRecord||null==this.lastVisibleRecord},l.prototype.autoScale=function(){var t=this.chart.recordCount;this.firstVisibleRecord=0<t?0:null,this.lastVisibleRecord=0<t?t-1:null,this._wasAutoscale=!0},l.prototype.getDateDataSeries=function(){return this.chart.primaryDataSeries(r.DataSeriesSuffix.DATE)},l.prototype.handleEvent=function(t){return this._bottomPanel.handleEvent(t)||this._topPanel.handleEvent(t)},l.prototype.formatDate=function(t){return this._formatter.timeInterval=this.chart.timeInterval,this._formatter.format(t)},l.prototype.scrollOnPixels=function(t){if(!isFinite(t))throw new Error("Finite number expected.");if(Math.abs(t)<3)return!1;var e=Math.abs(t)/this.columnWidth;return this.allowPartialRecords||(e=Math.ceil(e)),this.scrollOnRecords(0<=t?e:-e)},l.prototype.scrollOnRecords=function(t){if(0===t)return!1;var e=this.allowPartialRecords,i=this.firstVisibleRecord,o=this.lastVisibleRecord,r=i-t,t=o-t;if(e||(r=Math.round(r),t=Math.round(t)),!this.canSetVisibleRecord(r)||!this.canSetVisibleRecord(t)){if(0<=r)return!1;if(t=o-i,!this.canSetVisibleRecord(r=0)||!this.canSetVisibleRecord(t))return!1}return this.firstVisibleRecord=r,this.lastVisibleRecord=t,this.requestMoreHistoryIfNeed(),!0},l.prototype.zoomOnPixels=function(t,e){if(null==e&&(e=t),!isFinite(t)||!isFinite(e))throw new Error("Pixels must be a finite number.");if(Math.abs(t)<3&&Math.abs(e)<3)return!1;var i=this.columnWidth,o=this.allowPartialRecords,r=Math.abs(t)/i,i=Math.abs(e)/i;return o||(r=Math.ceil(r),i=Math.ceil(i)),this.zoomOnRecords(0<t?r:-r,0<e?i:-i)},l.prototype.zoomOnRecords=function(t,e){if(null==e&&(e=t),0===t&&0===e)return!1;var i=this.allowPartialRecords,o=this.firstVisibleRecord,r=this.lastVisibleRecord,t=o+t,e=r-e;if(i||(t=Math.round(t),e=Math.round(e)),e<t&&(t=e=Math.max(e,r)),!this.canSetVisibleRecord(t=t<0?0:t))return this.firstVisibleRecord=0,this.requestMoreHistoryIfNeed(),!1;this.canSetVisibleRecord(e)||(e=this.maxAllowedRecord);i=t!==o||e!==r;if(i){var n=e-t+1;if(n<r-o+1&&n<this.minVisibleRecords)return!1;if(t>=this.getDateDataSeries().length)return!1;this.firstVisibleRecord=t,this.lastVisibleRecord=e,this.requestMoreHistoryIfNeed()}return i},l.prototype._handleZoom=function(t,e){switch(this.zoomMode){case r.DateScaleZoomMode.PIN_CENTER:this.zoomOnPixels(t);break;case r.DateScaleZoomMode.PIN_LEFT:this.zoomOnPixels(0,t);break;case r.DateScaleZoomMode.PIN_RIGHT:this.zoomOnPixels(t,0);break;case r.DateScaleZoomMode.PIN_MOUSE:this.zoomOnPixels(t*e,t*(1-e));break;default:throw new Error("Unknown zoom mode: "+this.zoomMode)}var i=!1;(i=this.zoomKind===r.DateScaleZoomKind.AUTOSCALED?!0:i)||this.chart.setNeedsLayout(),this.chart.setNeedsUpdate(i)},l.prototype.requestMoreHistoryIfNeed=function(){var t=this.chart;0<t.firstVisibleIndex?this._moreHistoryRequested=!1:this._moreHistoryRequested||(t.requestMoreBars(),this._moreHistoryRequested=!0)},l.prototype.saveState=function(){var t=r.JsUtil.clone(this._options);return t.formatter=this._formatter.saveState(),t.calibrator=this._calibrator.saveState(),t},l.prototype.loadState=function(t){t=t||{},this._options={},this.theme=t.theme,this.allowPartialRecords=null==t.allowPartialRecords||!!t.allowPartialRecords,this.firstVisibleRecord=null!=t.firstVisibleRecord?t.firstVisibleRecord:null,this.lastVisibleRecord=null!=t.lastVisibleRecord?t.lastVisibleRecord:null,this.minVisibleRecords=t.minVisibleRecords||5,this.textPadding=t.textPadding||{left:3,top:null,right:3,bottom:3},this.manualHeight=t.height||15,this.useManualHeight=null!=t.useManualHeight&&t.useManualHeight,this.scrollKind=t.scrollKind||r.DateScaleScrollKind.AUTOSCALED,this.zoomKind=t.zoomKind||r.DateScaleZoomKind.AUTOSCALED,this.zoomMode=t.zoomMode||r.DateScaleZoomMode.PIN_MOUSE,this.autoScrollKind=t.autoScrollKind||r.DateScaleAutoScrollKind.VISIBLE_BAR,this.autoScrollMode=t.scrollMode||r.DateScaleAutoScrollMode.NEW_BAR,this.rightAdditionalSpaceRatio=t.rightAdditionalSpaceRatio||.5,t.formatter&&(this._formatter=r.DateTimeFormat.deserialize(t.formatter)),this._formatter.locale=this.chart.locale,this.majorTickMarkLength=t.majorTickMarkLength||5,this.minorTickMarkLength=t.minorTickMarkLength||3,t.calibrator?this._calibrator=r.DateScaleCalibrator.deserialize(t.calibrator):this._calibrator=new r.CustomDateScaleCalibrator},l.prototype.canSetVisibleRecord=function(t){return 0<=t&&t<=this.maxAllowedRecord},l.prototype._onUpdateAnimationCallback=function(){this.layoutScalePanel(this.chart.getBounds()),this.draw()},l.prototype.setNeedsUpdate=function(t){t&&this.setNeedsAutoScale(),this._updateAnimation.start()},l.prototype.layoutScalePanel=function(t){this.needsAutoScale()&&this.autoScale();var e=this._topPanel.layoutPanel(t,!0),i=this._bottomPanel.layoutPanel(t,!1),t=t.clone();return e&&t.cropTop(e),i&&t.cropBottom(i),t},l.prototype.layout=function(t,e){this._projectionFrame.copyFrom(e),(this.needsAutoScale()||this._wasAutoscale)&&(this._projectionFrame.applyPadding(this.chart.chartPanelsContainer.panelPadding),this.needsAutoScale()&&this.autoScale(),this._wasAutoscale=!1),this._calculateProjectionMetrics(),this._calibrator.calibrate(this),this._topPanel.layout(t,!0),this._bottomPanel.layout(t,!1)},l.prototype._canvasStartX=function(){return this._projectionFrame.left-this.chart.chartPanelsFrame.left-this.chart.chartPanelsContainer.panelPadding.left},l.prototype._textDrawBounds=function(){return{left:this.textPadding.left,top:null,width:this.chart.chartPanelsContainer.frame.width,height:null}},l.prototype.clear=function(){this._topPanel.clearPanel(),this._bottomPanel.clearPanel()},l.prototype.draw=function(){if(this._topPanel.draw(),this._bottomPanel.draw(),this.chart.showDrawings)for(var t=0,e=this.chart.chartPanels;t<e.length;t++)for(var i=0,o=e[t].drawings;i<o.length;i++){var r=o[i];r.selected||r.drawDateMarkers()}},l.prototype.applyAutoScroll=function(t){switch(t){case e.NEW_BAR:this._autoScroll(r.DateScaleAutoScrollMode.NEW_BAR);break;case e.TICK:this._autoScroll(r.DateScaleAutoScrollMode.TICK)}},l.prototype.onMoreHistoryRequestCompleted=function(){this._moreHistoryRequested=!1,this.chart.localize()},l.prototype._autoScroll=function(t){var e=this.chart,i=e.recordCount,o=this.lastVisibleRecord-i+1;if(e.state===r.ChartState.NORMAL)switch(this.autoScrollKind){case r.DateScaleAutoScrollKind.ALWAYS:o<0&&this.autoScrollMode===t&&this.scrollOnRecords(o);break;case r.DateScaleAutoScrollKind.VISIBLE_BAR:Math.ceil(this.lastVisibleRecord)+2>=i&&this.scrollOnRecords(-1);break;case r.DateScaleAutoScrollKind.HIDDEN_BAR:o<0&&this.scrollOnRecords(o)}},l.prototype._calculateVolumeOnProjection=function(t){for(var e=this._firstVisibleIndex,i=this._lastVisibleIndex+1,o=t.slice(e,i),r=this._percentValue(o),n=[],a=this.chart.dateScale.projectionFrame.width,l=0,s=o;l<s.length;l++){var c=a/100*(s[l]/r);n.push(c)}for(var h=[],u=0,f=t;u<f.length;u++){c=a/100*(f[u]/r);h.push(c)}var o=h.slice(0,e),t=h.slice(i,t.length-1),o=o.concat(n,t),d=(this.columnValues.widths=o,this.columnValues.visibleColumnsWidths=n,[]),p=0;d.push(p);for(var y=e+1;y<i+1;y++)p+=this.columnValues.widths[y-1]/2+this.columnValues.widths[y]/2,d.push(p);this.columnValues.centers=d},l.prototype._percentValue=function(t){return t.reduce(function(t,e){return t+e},0)/100},l);function l(t){var e=i.call(this,t)||this;return e._updateAnimation=new r.Animation({context:e,recurring:!1,callback:e._onUpdateAnimationCallback}),e._projectionFrame=new r.Rect,e._columnWidth=0,e._formatter=new r.CustomTimeIntervalDateTimeFormat,e._moreHistoryRequested=!1,e.columnValues=null,e._projection=new r.Projection(e),e._topPanel=new r.DateScalePanel({dateScale:e,cssClass:o,visible:!1}),e._bottomPanel=new r.DateScalePanel({dateScale:e,cssClass:n}),e.loadState(t),e}r.DateScale=a}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(l){"use strict";var i,t="scxDateScale",s="scxDateScaleScroll",e=(i=l.HtmlControl,__extends(n,i),Object.defineProperty(n.prototype,"dateScale",{get:function(){return this._dateScale},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"chart",{get:function(){return this._dateScale&&this._dateScale.chart},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cssClass",{get:function(){return this._cssClass},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visible",{get:function(){return this._isVisible},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"layer",{get:function(){return this._layer},enumerable:!0,configurable:!0}),n.prototype._initGestures=function(){return new l.GestureArray([new l.DoubleClickGesture({handler:this._handleDoubleClickGesture}),new l.PanGesture({handler:this._handlePanGesture,verticalMoveEnabled:!1}),new l.MouseWheelGesture({handler:this._handleMouseWheel})],this,this.hitTest)},n.prototype._handleDoubleClickGesture=function(){this.chart.setNeedsUpdate(),this.chart.setNeedsAutoScaleAll(),this.chart.update()},n.prototype._handlePanGesture=function(t,e){var i=this.chart,o=1===e.evt.which;if((!o||i.scrollEnabled)&&(o||i.zoomEnabled))switch(t.state){case l.GestureState.STARTED:i.rootDiv.addClass(s);break;case l.GestureState.FINISHED:i.rootDiv.removeClass(s);break;case l.GestureState.CONTINUED:var r=t.moveOffset.x,n=!1,a=!1,a=o?(n=this._dateScale.scrollOnPixels(r))&&this._dateScale.scrollKind===l.DateScaleScrollKind.AUTOSCALED:(n=this._dateScale.zoomOnPixels(r))&&this._dateScale.zoomKind===l.DateScaleZoomKind.AUTOSCALED;n&&i.setNeedsUpdate(a)}},n.prototype._handleMouseWheel=function(t,e){var i;this.chart.zoomEnabled&&(i=this.frame.width,e=e.pointerPosition.x/i,this.chart.dateScale._handleZoom(-t.delta*(.05*i),e))},n.prototype.applyTheme=function(){var t,e,i,o,r=this.container;r&&(i=!1!==(e=(t=this._dateScale.actualTheme).border).strokeEnabled,o=this._cssClass===this._dateScale.topPanelCssClass?"border-bottom":"border-top",i?r.css(o,e.width+"px "+e.lineStyle+" "+e.strokeColor):r.css(o,"none"),l.HtmlUtil.setBackground(r,!1!==t.fill.fillEnabled?t.fill.fillColor:n.TRANSPARENT))},n.prototype._getClientHeight=function(){var t=this._dateScale;return t.useManualHeight?t.manualHeight:l.HtmlUtil.getFontSize(t.actualTheme)+t.textPadding.bottom+t.majorTickMarkLength+1},n.prototype.hitTest=function(t){var e=this.frame;return!!e&&l.Geometry.isPointInsideOrNearRect(t,e)},n.prototype._createContainer=function(){return this.chart.rootDiv.scxAppend("div",t).addClass(this._cssClass)},n.prototype.layoutPanel=function(t,e){var i=this.container,o=null,r=!1!==this._dateScale.actualTheme.border.strokeEnabled;return this._isVisible?(i||(this._container=i=this._createContainer(),this.applyTheme()),i.outerWidth(t.width).innerHeight(this._getClientHeight()),(o=this.frame).left=t.left,o.width=t.width,o.height=i.outerHeight(),o.top=e?0:t.bottom-o.height,e||r||--o.top,i.css("left",o.left).css("top",o.top)):this._removeContainer(),o},n.prototype.layout=function(t,e){this.layoutPanel(t,e),this._isVisible?(t=this.container,this._layer||(this._layer=new l.Layer({parent:t})),this._layer.size={width:t.width(),height:t.height()}):(e=this._layer)&&(e.destroy(),this._layer=null)},n.prototype.clearPanel=function(){var t,e;this._layer&&this._layer.canvas&&(t=this._layer.size.width,e=this._layer.size.height,this._layer.renderer.clearRect(0,0,t,e))},n.prototype.draw=function(){if(this._isVisible){var t=this._layer.renderer,e=this._dateScale,i=e.actualTheme,o=this._layer.size.height-e.textPadding.bottom;this.clearPanel(),t.save(),t.translate(.5,.5),t.textTheme(i.text),t.textOptions({baseline:l.TextBaseline.BOTTOM}),t.beginPath();for(var r=0,n=e.calibrator.majorTicks;r<n.length;r++){var a=n[r];a.text&&(t.textOptions({align:a.textAlign}),t.fillText(a.text,a.textX,o))}t.stroke(i.line),t.restore()}},n.TRANSPARENT="transparent",n);function n(t){var e=i.call(this)||this;if(e._isVisible=!0,!(t.dateScale instanceof l.DateScale))throw new TypeError("'config.dateScale' must be an instance of StockChartX.DateScale.");if(e._dateScale=t.dateScale,null==t.cssClass)throw new Error("'config.cssClass' is not specified.");return e._cssClass=t.cssClass,e._isVisible=null==t.visible||!!t.visible,e._initGestures(),e.chart.on(l.ChartEvent.THEME_CHANGED+".scxDateScalePanel",function(){e.applyTheme()}),e}l.DateScalePanel=e}(StockChartX=StockChartX||{}),!function(e){"use strict";Object.defineProperty(i,"registeredCalibrators",{get:function(){return this._calibrators.registeredItems},enumerable:!0,configurable:!0}),i.register=function(t,e){"string"==typeof t?this._calibrators.register(t,e):this._calibrators.register(t.className,t)},i.deserialize=function(t){if(!t)return null;var e=this._calibrators.createInstance(t.className);return e.loadState(t),e},i._calibrators=new e.ClassRegistrar;var t=i;function i(){}Object.defineProperty(r,"className",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"showVirtualDates",{get:function(){return this._showVirtualDates},set:function(t){this._showVirtualDates=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"majorTicks",{get:function(){return this._majorTicks},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"minorTicks",{get:function(){return this._minorTicks},enumerable:!0,configurable:!0}),r.prototype.calibrate=function(t){this._majorTicks.length=0,this._minorTicks.length=0,this._calibrateMajorTicks&&this._calibrateMajorTicks(t),this._calibrateMinorTicks()},r.prototype._calibrateMinorTicks=function(t){if(t)for(var e=this.majorTicks,i=0,o=e.length;i<o-1;i++)for(var r=e[i],n=(e[i+1].x-r.x)/(t+1),a=1;a<=t;a++)this.minorTicks.push({x:Math.round(r.x+a*n)})},r.prototype.saveState=function(){return{className:this.constructor.className,options:e.JsUtil.clone(this._options)}},r.prototype.loadState=function(t){this._options=t&&e.JsUtil.clone(t.options)||{}};var o=r;function r(t){this._showVirtualDates=!0,this._majorTicks=[],this._minorTicks=[],this._options={},t&&this.loadState({options:t})}e.DateScaleCalibrator=o,e.JsUtil.applyMixins(o,[t])}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(k){"use strict";e=k.DateScaleCalibrator,__extends(i,e),Object.defineProperty(i,"className",{get:function(){return"StockChartX.AutoDateScaleCalibrator"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minLabelsOffset",{get:function(){var t=this._options.majorTicks;return(t&&null!=t.minOffset?t:i.defaults.majorTicks).minOffset},set:function(t){if(null!=t&&k.JsUtil.isNegativeNumber(t))throw new Error("Min labels offset must be greater or equal to 0.");var e=this._options;(e.majorTicks||(e.majorTicks={})).minOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minorTicksCount",{get:function(){var t=this._options.minorTicks;return(t&&null!=t.count?t:i.defaults.minorTicks).count},set:function(t){if(null!=t&&k.JsUtil.isNegativeNumber(t))throw new Error("Ticks count must be a positive number or 0.");var e=this._options;(e.minorTicks||(e.minorTicks={})).count=t},enumerable:!0,configurable:!0}),i.prototype._calibrateMajorTicks=function(t){for(var e=t.getDateDataSeries().values,i=t.chart,o=t.projectionFrame,r=t.projection,n=r.recordByColumn(0),a=t.maxAllowedRecord,l=this.minLabelsOffset,s=t._textDrawBounds(),c=s.left,h=s.left+s.width,u=new Date(0),f=null,d=-1/0,p=k.DummyCanvasContext,y=i.chartPanelsContainer.panelsContentFrame.width,m=(this._formatter.timeInterval=i.timeInterval,this._formatter.locale=i.locale,p.applyTextTheme(t.actualTheme.text),p.textWidth("9"));n<=a;){var _=0<=n&&n<e.length?e[n]:r.dateByRecord(n),C=this._labelDateString(_,u);if(C&&C!==f){var g=r.xByRecord(n);if(g<o.left)n++;else{if(y<=g)break;var b,S,v=C.length*m,w=g-v/2,P=void 0;if(w<d||(w=g-(v=p.textWidth(C))/2)<d?P=d+v/2:(b=g,S="center",w<c?(w=b=c,S="left"):h<w+v&&(w=(b=h)-v,S="right"),this.majorTicks.push({x:g,textX:b,textAlign:S,date:_,text:C}),d=w+v+l,P=Math.ceil(d),u=_,f=C),y<P)break;g=r.recordByX(P)+1,n=n<g?g:n+1}}else n++}},i.prototype._calibrateMinorTicks=function(){e.prototype._calibrateMinorTicks.call(this,this.minorTicksCount)},i.prototype._labelDateString=function(t,e){if(t<=e)return null;var i=k.TimeSpan,o=this._formatter,r=o.timeInterval,n=t.getFullYear(),a=e.getFullYear();if(r>=i.MILLISECONDS_IN_YEAR)return n!==a?n.toString():null;var l=k.DateTimeFormatName,s=t.getMonth()+1,c=e.getMonth()+1;if(r>=i.MILLISECONDS_IN_MONTH)return n!==a||s!==c?o.formatWithFormatter(t,l.YEAR_MONTH):null;var h=t.getDate(),u=e.getDate();if(r>=i.MILLISECONDS_IN_DAY)return n!==a?o.formatWithFormatter(t,l.DATE):s!==c||h!==u?o.formatWithFormatter(t,l.MONTH_DAY):null;var f=t.getHours(),d=e.getHours(),p=t.getMinutes(),y=e.getMinutes();if(r>=i.MILLISECONDS_IN_MINUTE)return n!==a||s!==c||h!==u?o.formatWithFormatter(t,l.SHORT_DATE_TIME):f!==d||p!==y?o.formatWithFormatter(t,l.SHORT_TIME):null;var m=t.getSeconds(),_=e.getSeconds();if(r>=i.MILLISECONDS_IN_SECOND)return n!==a||s!==c||h!==u?o.formatWithFormatter(t,l.SHORT_DATE_TIME):f!==d||p!==y||m!==_?o.formatWithFormatter(t,l.LONG_TIME):null;r=t.getMilliseconds(),i=e.getMilliseconds();return n!==a||s!==c||h!==u?o.formatWithFormatter(t,l.LONG_DATE_TIME):f!==d||p!==y||m!==_||r!==i?o.formatWithFormatter(t,l.LONG_TIME):null},i.defaults={majorTicks:{minOffset:30},minorTicks:{count:0}};var e,t=i;function i(t){t=e.call(this,t)||this;return t._formatter=new k.TimeIntervalDateTimeFormat,t}k.AutoDateScaleCalibrator=t,k.DateScaleCalibrator.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(E){"use strict";e=E.DateScaleCalibrator,__extends(i,e),Object.defineProperty(i,"className",{get:function(){return"StockChartX.CustomDateScaleCalibrator"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minLabelsOffset",{get:function(){var t=this._options.majorTicks;return(t&&null!=t.minOffset?t:i.defaults.majorTicks).minOffset},set:function(t){if(null!=t&&E.JsUtil.isNegativeNumber(t))throw new Error("Min labels offset must be greater or equal to 0.");var e=this._options;(e.majorTicks||(e.majorTicks={})).minOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minorTicksCount",{get:function(){var t=this._options.minorTicks;return(t&&null!=t.count?t:i.defaults.minorTicks).count},set:function(t){if(null!=t&&E.JsUtil.isNegativeNumber(t))throw new Error("Ticks count must be a positive number or 0.");var e=this._options;(e.minorTicks||(e.minorTicks={})).count=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"monospaced",{get:function(){var t=this._options.majorTicks;return(t&&null!=t.monospaced?t:i.defaults.majorTicks).monospaced},set:function(t){var e=this._options;(e.majorTicks||(e.majorTicks={})).monospaced=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"customFormat",{get:function(){var t=this._options.majorTicks;return t?t.customFormat:null},set:function(t){var e=this._options.majorTicks;e&&(e.customFormat=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"customFormatter",{get:function(){var t=this._options.majorTicks;return t?t.customFormatter:null},set:function(t){var e=this._options.majorTicks;e&&(e.customFormatter=t)},enumerable:!0,configurable:!0}),i.prototype._customMajorFormat=function(t,e){var i=this._options.majorTicks;return i&&i.customFormat?i.customFormat(this,t,e):null},i.prototype._customMajorFormatter=function(t,e){var i=this._options.majorTicks;return i&&i.customFormatter?i.customFormatter(this,t,e):null},i.prototype._calibrateMajorTicks=function(t){for(var e,i,o=t.getDateDataSeries().values,r=t.chart,n=t.projectionFrame,a=t.projection,l=a.recordByColumn(0),s=t.maxAllowedRecord,c=this.minLabelsOffset,h=t._textDrawBounds(),u=h.left,f=h.left+h.width,d=n.left,p=E.DummyCanvasContext,y=t.chart.timeInterval,m=this.monospaced,_=r.chartPanelsContainer.panelsContentFrame.width,C=t.getDateDataSeries().lastValue,g=(this._formatter.locale=r.locale,p.applyTextTheme(t.actualTheme.text),p.textWidth("9"));l<=s;){var b=0<=l&&l<o.length?o[l]:a.dateByRecord(l),S=this._customMajorFormatter(l,b);if((S=S?S:(v=this._customMajorFormat(l,b))?this._formatter.format(b,v):this._labelDateString(b,i&&i.date,y))&&S!==(i&&i.text)){var v=a.xByRecord(l);if(v<n.left)l++;else{if(_<=v)break;var w,P=S.length*g,k=v-P/2,x=void 0;if(k<d?x=d+P/2:e&&v-i.x<e?x+=e-(v-i.x):(k=v-(P=p.textWidth(S))/2)<d?x=d+P/2:(w=v,O="center",k<u?(k=w=u,O="left"):f<k+P&&(k=(w=f)-P,O="right"),w={x:v,textX:w,textAlign:O,date:b,text:this.showVirtualDates||b<=C?S:null},this.majorTicks.push(w),m&&!e&&i&&(e=v-i.x),d=k+P+c,x=Math.ceil(d),i=w),_<x)break;var O=a.recordByX(x)+1,l=l<O?O:l+1}}else l++}},i.prototype._calibrateMinorTicks=function(){e.prototype._calibrateMinorTicks.call(this,this.minorTicksCount)},i.prototype._labelDateString=function(t,e,i){e=e||new Date(0);e=this._findFormat(t,e,i);return e?this._formatter.format(t,e):null},i.prototype._findFormat=function(t,e,i){if(t<=e)return null;var o=E.TimeSpan,r={},n={};return r.year=t.getFullYear(),n.year=e.getFullYear(),i>=o.MILLISECONDS_IN_YEAR?this._yearPeriodicityFormat(r,n):(r.month=t.getMonth()+1,n.month=e.getMonth()+1,i>=o.MILLISECONDS_IN_MONTH?this._monthPeriodicityFormat(r,n):(r.day=t.getDate(),n.day=e.getDate(),i>=o.MILLISECONDS_IN_DAY?this._dayPeriodicityFormat(r,n):(r.hour=t.getHours(),n.hour=e.getHours(),i>=o.MILLISECONDS_IN_HOUR?this._hourPeriodicityFormat(r,n):(r.minute=t.getMinutes(),n.minute=e.getMinutes(),i>=o.MILLISECONDS_IN_MINUTE?this._minutePeriodicityFormat(r,n):(r.second=t.getSeconds(),n.second=e.getSeconds(),i>=o.MILLISECONDS_IN_SECOND?this._secondPeriodicityFormat(r,n):(r.minute=t.getMilliseconds(),n.minute=e.getMilliseconds(),this._millisecondPeriodicityFormat(r,n)))))))},i.prototype._yearPeriodicityFormat=function(t,e){return t.year!==e.year?"YYYY":null},i.prototype._monthPeriodicityFormat=function(t,e){return t.year!==e.year?1===t.month?"YYYY":"MMM YYYY":t.month!==e.month?"MMM":null},i.prototype._dayPeriodicityFormat=function(t,e){return t.year!==e.year?1===t.day?this._monthPeriodicityFormat(t,e):"D MMM YYYY":t.month!==e.month?1===t.day?"MMM":"D MMM":t.day!==e.day?"D":null},i.prototype._hourPeriodicityFormat=function(t,e,i){return void 0===i&&(i=!1),0===t.hour?this._dayPeriodicityFormat(t,e):t.year!==e.year?"D MMM YYYY HH:mm":t.month!==e.month||t.day!==e.day?"D MMM HH:mm":i||t.hour!==e.hour?"HH:mm":null},i.prototype._minutePeriodicityFormat=function(t,e,i){void 0===i&&(i=!1);i=t.minute!==e.minute;return this._hourPeriodicityFormat(t,e,i)},i.prototype._secondPeriodicityFormat=function(t,e){var i=t.second!==e.second,e=this._minutePeriodicityFormat(t,e,i);return e&&0!==t.second&&(e+=":ss"),e},i.prototype._millisecondPeriodicityFormat=function(t,e){var i=this._secondPeriodicityFormat(t,e);return 0===t.millisecond||t.millisecond===e.millisecond?i:i?i+".SSS":"ss.SSS"},i.defaults={majorTicks:{minOffset:30,monospaced:!0},minorTicks:{count:0}};var e,t=i;function i(t){t=e.call(this,t)||this;return t._formatter=new E.CustomDateTimeFormat,t}E.CustomDateScaleCalibrator=t,E.DateScaleCalibrator.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(C){"use strict";e=C.DateScaleCalibrator,__extends(g,e),Object.defineProperty(g,"className",{get:function(){return"StockChartX.FixedDateScaleCalibrator"},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"majorTicksCount",{get:function(){var t=this._options.majorTicks;return(t&&null!=t.count?t:g.defaults.majorTicks).count},set:function(t){if(null!=t&&C.JsUtil.isNegativeNumber(t))throw new Error("Ticks count must be a positive number.");var e=this._options;(e.majorTicks||(e.majorTicks={})).count=t},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"minorTicksCount",{get:function(){var t=this._options.minorTicks;return(t&&null!=t.count?t:g.defaults.minorTicks).count},set:function(t){if(null!=t&&C.JsUtil.isNegativeNumber(t))throw new Error("Ticks count must be a positive number.");var e=this._options;(e.minorTicks||(e.minorTicks={})).count=t},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"majorTicksFormat",{get:function(){var t=this._options.majorTicks;return t&&t.format||g.defaults.majorTicks.format},set:function(t){var e=this._options;(e.majorTicks||(e.majorTicks={})).format=t},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"customFormat",{get:function(){var t=this._options.majorTicks;return t?t.customFormat:null},set:function(t){var e=this._options.majorTicks;e&&(e.customFormat=t)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"customFormatter",{get:function(){var t=this._options.majorTicks;return t?t.customFormatter:null},set:function(t){var e=this._options.majorTicks;e&&(e.customFormatter=t)},enumerable:!0,configurable:!0}),g.prototype._calibrateMajorTicks=function(t){var e=t.projectionFrame,i=t._textDrawBounds(),o=i.left,r=i.left+i.width,n=t.projection,i=t.chart.chartPanelsContainer.panelPadding,a=e.left-i.left,e=e.right+i.right,l=C.DummyCanvasContext,s=this.majorTicksCount,c=(e-a)/(s-1),h=this.majorTicksFormat;(h=h||{}).other||(h.other=g._createAutoFormat(t.chart)),l.applyTextTheme(t.actualTheme.text);for(var u=0;u<s;u++){var f=a+u*c,d=(this._updateFormatterForLabel(u,u===s-1,h),n.dateByX(f)),p=this._customMajorFormatter(u,d),y=(p||(y=this._customMajorFormat(u,d),p=this._formatter.format(d,y)),l.textWidth(p)),m="center",_=f;f-y/2<o?(_=o,m="left"):r<_+y/2&&(_=r,m="right"),this.majorTicks.push({x:f,textX:f,textAlign:m,date:d,text:p})}},g.prototype._customMajorFormat=function(t,e){var i=this._options.majorTicks;return i&&i.customFormat?i.customFormat(this,t,e):null},g.prototype._customMajorFormatter=function(t,e){var i=this._options.majorTicks;return i&&i.customFormatter?i.customFormatter(this,t,e):null},g.prototype._calibrateMinorTicks=function(){e.prototype._calibrateMinorTicks.call(this,this.minorTicksCount)},g.prototype._updateFormatterForLabel=function(t,e,i){e=e?i.last||i.other:0===t&&i.first||i.other;this._formatter.formatString=e},g._createAutoFormat=function(t){t=t.timeInterval,t=t>=C.TimeSpan.MILLISECONDS_IN_YEAR?"YYYY":t>=C.TimeSpan.MILLISECONDS_IN_MONTH?"YYYY MMM":t>=C.TimeSpan.MILLISECONDS_IN_DAY?"YYYY-MM-DD":t>=C.TimeSpan.MILLISECONDS_IN_MINUTE?"YYYY-MM-DD HH:mm":t>=C.TimeSpan.MILLISECONDS_IN_SECOND?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD HH:mm:ss.SSS";return t},g.defaults={majorTicks:{count:3},minorTicks:{count:0}};var e,t=g;function g(t){t=e.call(this,t)||this;return t._formatter=new C.CustomDateTimeFormat,t}C.FixedDateScaleCalibrator=t,C.DateScaleCalibrator.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(i){"use strict";var o,t=jQuery,r="scxLeftValueScale",n="scxRightValueScale",e=(o=i.ChartComponent,__extends(a,o),Object.defineProperty(a.prototype,"leftPanel",{get:function(){return this._leftPanel},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rightPanel",{get:function(){return this._rightPanel},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"leftPanelCssClass",{get:function(){return r},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rightPanelCssClass",{get:function(){return n},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"useManualWidth",{get:function(){return this._options.useManualWidth},set:function(t){this._options.useManualWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"manualWidth",{get:function(){return this._options.width},set:function(t){if(!i.JsUtil.isFiniteNumber(t)||t<=0)throw new Error("Width must be greater than 0.");this._options.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"leftPanelVisible",{get:function(){return this._options.showLeftPanel},set:function(t){this._leftPanel.visible=this._options.showLeftPanel=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rightPanelVisible",{get:function(){return this._options.showRightPanel},set:function(t){this._rightPanel.visible=this._options.showRightPanel=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"index",{get:function(){return this.chart.valueScales.indexOf(this)},enumerable:!0,configurable:!0}),a.prototype.saveState=function(){return t.extend(!0,{},this._options)},a.prototype.loadState=function(t){t=t||{},this._options={},this.leftPanelVisible=void 0!==t.showLeftPanel&&t.showLeftPanel,this.rightPanelVisible=void 0===t.showRightPanel||t.showRightPanel,this.manualWidth=t.width||100,this.useManualWidth=void 0!==t.useManualWidth&&t.useManualWidth},a.prototype.layout=function(t){var e=this._leftPanel.layout(t,!0),i=this._rightPanel.layout(t,!1),t=t.clone();return e&&t.cropLeft(e),i&&t.cropRight(i),t},a.prototype.destroy=function(){this.leftPanel.destroy(),this.rightPanel.destroy(),o.prototype.destroy.call(this)},a);function a(t){var e=o.call(this,t)||this;return e._options=null,e._leftPanel=new i.ValueScalePanel({valueScale:e,cssClass:r}),e._rightPanel=new i.ValueScalePanel({valueScale:e,cssClass:n}),e.loadState(t),e}i.ValueScale=e}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(n){"use strict";i=n.HtmlControl,__extends(a,i),Object.defineProperty(a.prototype,"valueScale",{get:function(){return this._valueScale},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"cssClass",{get:function(){return this._cssClass},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"visible",{get:function(){return this._isVisible},set:function(t){this._isVisible=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"chart",{get:function(){return this._valueScale&&this._valueScale.chart},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"size",{get:function(){var t=this.container;return t&&t.scxSize()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"contentSize",{get:function(){var t=this.container;return t&&t.scxContentSize()},enumerable:!0,configurable:!0}),a.prototype._createContainer=function(){return this.chart.chartPanelsContainer.container.scxPrepend("div","scxValueScale").addClass(this._cssClass)},a.prototype.layout=function(t,e){var i=this.container,o=null;return this._isVisible?(i||(this._container=i=this._createContainer(),this.applyTheme()),i.width(this.getWidth()).outerHeight(t.height),(o=this.frame).width=i.outerWidth(),o.left=e?t.left:t.right-o.width,o.height=t.height,i.css("left",o.left)):this._removeContainer(),o},a.prototype.getWidth=function(){var t=this._valueScale;if(t.useManualWidth)return t.manualWidth;for(var e=0,i=0,o=this.chart.chartPanels;i<o.length;i++)var r=o[i],e=Math.max(r.preferredValueScaleWidth(this._valueScale),e);return e},a.prototype.applyTheme=function(){var t,e,i,o,r=this.container;r&&(i=!1!==(e=(t=this.chart.theme.valueScale).border).strokeEnabled,o=this._cssClass===this._valueScale.leftPanelCssClass?"border-right":"border-left",i?r.css(o,e.width+"px "+e.lineStyle+" "+e.strokeColor):r.css(o,"none"),n.HtmlUtil.setBackground(r,!1!==t.fill.fillEnabled?t.fill.fillColor:a.TRANSPARENT))},a.TRANSPARENT="transparent";var i,t=a;function a(t){var e=i.call(this)||this;if(e._isVisible=!0,!t)throw new Error("Config is not specified.");if(!(t.valueScale instanceof n.ValueScale))throw new TypeError("Config.valueScale must be an instance of StockChartX.ValueScale");if(e._valueScale=t.valueScale,t.cssClass)return e._cssClass=t.cssClass,e._isVisible=null==t.visible||t.visible,e.chart.on(n.ChartEvent.THEME_CHANGED+".scxValueScalePanel",function(){e.applyTheme()}),e;throw new Error("'config.cssClass' is not specified.")}n.ValueScalePanel=t}(StockChartX=StockChartX||{}),!function(e){"use strict";Object.defineProperty(i,"registeredCalibrators",{get:function(){return this._calibrators.registeredItems},enumerable:!0,configurable:!0}),i.register=function(t,e){"string"==typeof t?this._calibrators.register(t,e):this._calibrators.register(t.className,t)},i.deserialize=function(t){if(!t)return null;var e=this._calibrators.createInstance(t.className);return e.loadState(t),e},i._calibrators=new e.ClassRegistrar;var t=i;function i(){}Object.defineProperty(r,"className",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"majorTicks",{get:function(){return this._majorTicks},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"minorTicks",{get:function(){return this._minorTicks},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"divider",{get:function(){return this._options.divider||1},set:function(t){this._options.divider=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"suffix",{get:function(){return this._options.suffix||""},set:function(t){this._options.suffix=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"formater",{get:function(){return this._formatter},set:function(t){this._formatter=t},enumerable:!0,configurable:!0}),r.prototype.calibrate=function(t){this._majorTicks.length=0,this._minorTicks.length=0,this._calibrateMajorTicks&&this._calibrateMajorTicks(t),this._calibrateMinorTicks()},r.prototype.formatValue=function(t){return this._formatter.format(t/this.divider).replace(","," ")+this.suffix},r.prototype._calibrateMinorTicks=function(t){if(t)for(var e=this.majorTicks,i=0,o=e.length;i<o-1;i++)for(var r=e[i],n=(e[i+1].y-r.y)/(t+1),a=1;a<=t;a++)this.minorTicks.push({y:Math.round(r.y+a*n)})},r.prototype.saveState=function(){return{className:this.constructor.className,options:e.JsUtil.clone(this._options)}},r.prototype.loadState=function(t){this._options=t&&e.JsUtil.clone(t.options)||{}};var o=r;function r(t){this._majorTicks=[],this._minorTicks=[],this._options={},t&&this.loadState({options:t}),this._formatter=t&&t.formatter||new e.CustomNumberFormat("%.2f")}e.ValueScaleCalibrator=o,e.JsUtil.applyMixins(o,[t])}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(u){"use strict";t=u.ValueScaleCalibrator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"StockChartX.AutoValueScaleCalibrator"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minValuesOffset",{get:function(){var t=this._options.majorTicks;return(null!=t&&null!=t.minOffset?t:i.defaults.majorTicks).minOffset},set:function(t){if(null!=t&&u.JsUtil.isNegativeNumber(t))throw new Error("Values offset must be a value greater or equal to 0.");var e=this._options;(e.majorTicks||(e.majorTicks={})).minOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minorTicksCount",{get:function(){var t=this._options.minorTicks;return(t&&null!=t.count?t:i.defaults.minorTicks).count},set:function(t){if(null!=t&&u.JsUtil.isNegativeNumber(t))throw new Error("Tick count must be greater or equal to 0.");var e=this._options;(e.minorTicks||(e.minorTicks={})).count=t},enumerable:!0,configurable:!0}),i.prototype._calibrateMajorTicks=function(t){for(var e=t.actualTheme,i=u.HtmlUtil.getFontSize(e.text),o=this.minValuesOffset,e=t.padding,r=t.chartPanel.panelPadding,n=Math.round(Math.max(e.top,r.top)+i/2),a=t.chartPanel.layer.canvas.height()-e.bottom-i/2,l=t.projection,s=null;n<a;){var c=l.valueByY(n),h=t.formatValue(c);h!==s&&(this.majorTicks.push({y:n,value:c,text:h}),s=h),n+=i+o}},i.prototype._calibrateMinorTicks=function(){t.prototype._calibrateMinorTicks.call(this,this.minorTicksCount)},i.defaults={majorTicks:{minOffset:10},minorTicks:{count:0}};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}u.AutoValueScaleCalibrator=e,u.ValueScaleCalibrator.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(f){"use strict";i=f.ValueScaleCalibrator,__extends(e,i),Object.defineProperty(e,"className",{get:function(){return"StockChartX.PercentValueScaleCalibrator"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minValuesOffset",{get:function(){var t=this._options.majorTicks;return(null!=t&&null!=t.minOffset?t:f.AutoValueScaleCalibrator.defaults.majorTicks).minOffset},set:function(t){if(null!=t&&f.JsUtil.isNegativeNumber(t))throw new Error("Values offset must be a value greater or equal to 0.");var e=this._options;(e.majorTicks||(e.majorTicks={})).minOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"basePriceHolder",{get:function(){return this._basePriceHolder},set:function(t){this._basePriceHolder=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"basePrice",{get:function(){return this._basePriceHolder&&this._basePriceHolder.basePrice||0},enumerable:!0,configurable:!0}),e.prototype._calibrateMajorTicks=function(t){var e=t.actualTheme,i=f.HtmlUtil.getFontSize(e.text),o=this.minValuesOffset,e=t.padding,r=t.chartPanel.chartPanelsContainer.panelPadding,n=Math.round(Math.min(e.top,r.top)),a=t.chartPanel.layer.canvas.height(),l=t.projection,e=this.basePrice,r=l.yByValue(e),s=r,c=null;for(this.majorTicks.push({y:s,value:l.valueByY(s),text:"0 %"}),s=r+(i+o);s<a;){var h=l.valueByY(s);(u=t.formatValue(h))!==c&&(this.majorTicks.push({y:s,value:h,text:u}),c=u),s+=i+o}for(s=r-(i+o);n<s;){var u,h=l.valueByY(s);(u=t.formatValue(h))!==c&&(this.majorTicks.unshift({y:s,value:h,text:u}),c=u),s-=i+o}},e.prototype.formatValue=function(t){return i.prototype.formatValue.call(this,(t-this.basePrice)/this.basePrice*100)},e.defaults={majorTicks:{minOffset:10}};var i,t=e;function e(t){var e=i.call(this)||this;return e._basePriceHolder=t&&t.basePriceHolder,e.suffix=" %",e}f.PercentValueScaleCalibrator=t,f.ValueScaleCalibrator.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(i){"use strict";t=i.ValueScaleCalibrator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"StockChartX.FixedValueScaleCalibrator"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"majorTicksCount",{get:function(){var t=this._options.majorTicks;return(t&&null!=t.count?t:o.defaults.majorTicks).count},set:function(t){if(null!=t&&i.JsUtil.isNegativeNumber(t))throw new Error("Tick count must be greater or equal to 0.");var e=this._options;(e.majorTicks||(e.majorTicks={})).count=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"minorTicksCount",{get:function(){var t=this._options.minorTicks;return(t&&null!=t.count?t:o.defaults.minorTicks).count},set:function(t){if(null!=t&&i.JsUtil.isNegativeNumber(t))throw new Error("Tick count must be greater or equal to 0.");var e=this._options;(e.minorTicks||(e.minorTicks={})).count=t},enumerable:!0,configurable:!0}),o.prototype._calibrateMajorTicks=function(t){for(var e=t.padding,i=t.chartPanel.panelPadding,o=Math.max(e.top,i.top),e=t.chartPanel.layer.canvas.height()-Math.max(e.bottom,i.bottom)-o,r=t.projection,n=this.majorTicksCount,a=e/(n-1),l=0;l<n;l++){var s=Math.round(o+l*a),c=r.valueByY(s);this.majorTicks.push({y:s,value:c,text:t.formatValue(c)})}},o.prototype._calibrateMinorTicks=function(){t.prototype._calibrateMinorTicks.call(this,this.minorTicksCount)},o.defaults={majorTicks:{count:3},minorTicks:{count:0}};var t,e=o;function o(){return null!==t&&t.apply(this,arguments)||this}i.FixedValueScaleCalibrator=e,i.ValueScaleCalibrator.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__assign=(!function(p){"use strict";e=p.ValueScaleCalibrator,__extends(i,e),Object.defineProperty(i,"className",{get:function(){return"StockChartX.IntervalValueScaleCalibrator"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"interval",{get:function(){var t=this._options.majorTicks;return(t&&t.interval?t:i.defaults.majorTicks).interval},set:function(t){if(null!=t){if(!p.JsUtil.isPositiveNumber(t))throw new Error("Interval must be a value greater than 0.");if(t<1e-8)throw new Error("Interval is too small.")}var e=this._options;(e.majorTicks||(e.majorTicks={})).interval=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minValuesOffset",{get:function(){var t=this._options.majorTicks;return(t&&null!=t.minOffset?t:i.defaults.majorTicks).minOffset},set:function(t){if(null!=t&&p.JsUtil.isNegativeNumber(t))throw new Error("Values offset must be a value greater or equal to 0.");var e=this._options;(e.majorTicks||(e.majorTicks={})).minOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minorTicksCount",{get:function(){var t=this._options.minorTicks;return(t&&null!=t.count?t:i.defaults.minorTicks).count},set:function(t){if(null!=t&&p.JsUtil.isNegativeNumber(t))throw new Error("Tick count must be greater or equal to 0.");var e=this._options;(e.minorTicks||(e.minorTicks={})).count=t},enumerable:!0,configurable:!0}),i.prototype._calibrateMajorTicks=function(t){this._calibrateIntervalMajorTicks(t),this.majorTicks.length<=1&&(this.majorTicks.length=0,this._calibrateRangeMajorTicks(t))},i.prototype._calibrateMinorTicks=function(){e.prototype._calibrateMinorTicks.call(this,this.minorTicksCount)},i.prototype._calibrateIntervalMajorTicks=function(t){var e=t.chart.instrument,i=e?e.tickSize:this.interval;if(!(i<1e-8||t.maxVisibleValue-t.minVisibleValue<=i))for(var o,e=p.HtmlUtil.getFontSize(t.actualTheme.text),r=e+this.minValuesOffset,n=t.padding,a=t.chartPanel.layer.size.height-n.bottom-e/2,l=t.projection,s=l.valueByY(0),c=Math.round(n.top+e/2),h=c,u=null;c<a;){var f=h;do{if(s=o=s<=(o=i*Math.trunc(l.valueByY(c)/i))?s-i:o,h<=(c=Math.round(l.yByValue(o)))){f=c;break}}while(f=c=f+1,c<a);if(h=c+r,a<=c)break;var d=(this.divider?this:t).formatValue(o);d!==u&&(this.majorTicks.push({y:c,value:o,text:d}),u=d),c=h}},i.prototype._calibrateRangeMajorTicks=function(t){var e=p.HtmlUtil.getFontSize(t.actualTheme.text),i=e/2,e=e+this.minValuesOffset,o=t.padding,r=t.chartPanel.layer.size.height,n=o.top+i,o=r-o.bottom-i,i=t.projection;o-n<e?(r=i.valueByY(e=r/2),this.majorTicks.push({y:e,value:r,text:t.formatValue(r)})):(e=i.valueByY(n),this.majorTicks.push({y:n,value:e,text:t.formatValue(e)}),r=i.valueByY(o),this.majorTicks.push({y:o,value:r,text:t.formatValue(r)}))},i.defaults={majorTicks:{interval:.05,minOffset:20},minorTicks:{count:0}};var e,t=i;function i(t){return e.call(this,t)||this}p.IntervalValueScaleCalibrator=t,p.ValueScaleCalibrator.register(t)}(StockChartX=StockChartX||{}),this&&this.__assign||Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}),__extends=(!function(h){"use strict";Object.defineProperty(e.prototype,"textOffset",{get:function(){var t=this._textOffset;return null!=t?t:e.defaults.textOffset},set:function(t){if(null!=t&&h.JsUtil.isNegativeNumber(t))throw new Error("Text offset must be greater or equal to 0.");this._textOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"theme",{get:function(){return this._theme},set:function(t){this._theme=t},enumerable:!0,configurable:!0}),e.prototype.draw=function(t,e,i){var o,r,n,a,l,s=e.leftFrame,c=e.rightFrame;(s||c)&&(i=i||this.theme,o=e.chartPanel.layer.renderer,r=e.formatValue(t),t=e.projection.yByValue(t),n=this.textOffset,a=i.text.fontSize/2+1,o.save(),e.clip(),o.textOptions({baseline:h.TextBaseline.MIDDLE}),o.beginPath(),e=o.textWidth(r),s&&(l=s.right-1,o.polygon(l,t,l-a,t+a,s.left,t+a,s.left,t-a,l-a,t-a),o.fillStroke(i.fill,i.line),o.textOptions({align:h.TextAlign.RIGHT}),o.fillText(r,s.right-n,t,__assign({},i.text,{maxWidth:e}))),c&&(l=c.right-1,o.polygon(c.left,t,c.left+a,t-a,l,t-a,l,t+a,c.left+a,t+a),o.fillStroke(i.fill,i.line),o.textOptions({align:h.TextAlign.LEFT}),o.fillText(r,c.left+n,t,__assign({},i.text,{maxWidth:e}))),o.restore())},e.defaults={textOffset:8};var t=e;function e(){}h.ValueMarker=t}(StockChartX=StockChartX||{}),!function(c){"use strict";function t(){}Object.defineProperty(t.prototype,"theme",{get:function(){return this._theme},set:function(t){this._theme=t},enumerable:!0,configurable:!0}),t.prototype.draw=function(t,e){function i(t){var e=t.layer.renderer;e.rectPath(l,0,s,t.frame.height),e.fillStroke(r.fill,r.stroke),e.textOptions({align:c.TextAlign.LEFT,baseline:c.TextBaseline.MIDDLE}),e.fillText(o,a,t.frame.height-n.height,r.text)}var o=e.formatDate(t),r=this.theme,n=c.DummyCanvasContext.measureText(o,r.text),a=e.projection.xByDate(t)-n.width/2,l=a-5,s=n.width+10;e.bottomPanelVisible&&i(e.bottomPanel),e.topPanelVisible&&i(e.topPanel)},c.DateMarker=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(i){"use strict";o=i.ChartEventsExtender,__extends(e,o),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this._tooltip},set:function(t){null!=t&&(this._tooltip=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chartPanel",{get:function(){return this._panel},set:function(t){var e=this._panel;if(e!==t){if(t&&!(t instanceof i.ChartPanel))throw new TypeError("Panel must be an instance of StockChartX.ChartPanel.");this._panel=t,this._onChartPanelChanged(e),!t||this._valueScale||(e=this._options.valueScaleIndex)&&(this.valueScale=this.chart.valueScales[e])}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderer",{get:function(){if(this._panel&&this._panel.layer)return this._panel.layer.renderer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chart",{get:function(){var t=this._panel;return t&&t.chart},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueScale",{get:function(){return this._valueScale||this.chart.valueScale},set:function(t){var e=this._valueScale;e!==t&&(this._valueScale=t,this._onValueScaleChanged(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panelValueScale",{get:function(){return this._panel.getValueScale(this.valueScale)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"projection",{get:function(){return this._panel&&this._panel.getProjection(this.valueScale)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._options.visible},set:function(t){var e=this.visible;e!==t&&(this._options.visible=t,this._onVisibleChanged(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._options.zIndex},set:function(t){if(!i.JsUtil.isFiniteNumber(t))throw new Error("Z-index must be a finite number.");this._options.zIndex=t},enumerable:!0,configurable:!0}),e.prototype._setOption=function(t,e,i){var o=this._options,r=o[t];r!==e&&(o[t]=e,i&&this.fire(i,e,r))},e.prototype._onChartPanelChanged=function(t){},e.prototype._onValueScaleChanged=function(t){},e.prototype._onVisibleChanged=function(t){},e.prototype.addChartCssClass=function(t){var e=this.chart;e&&e.addCssClass(t)},e.prototype.removeChartCssClass=function(t){var e=this.chart;e&&e.removeCssClass(t)},e.prototype.changeCursor=function(t){this._prevCursor&&this.removeChartCssClass(this._prevCursor),t&&this.addChartCssClass(t),this._prevCursor=t},e.prototype.saveState=function(){var t={options:i.JsUtil.clone(this._options),tooltip:this.tooltip.saveState()};return this.chartPanel&&(t.panelIndex=this.chartPanel.getIndex()),this.valueScale&&(t.valueScaleIndex=this.valueScale.index),t},e.prototype.loadState=function(t){var e=this.suppressEvents();this._options=(t=t||{}).options||{},this.tooltip.loadState(t.tooltip),this.suppressEvents(e)},e.prototype.draw=function(){},e.prototype.drawValueMarkers=function(){},e.prototype.showTooltip=function(t){var e,i;t&&(t=(e=this.chartPanel).container.scxLocalToClientPoint(t.x,t.y),(i=this.tooltip).layoutRect={top:this.chart.rootDiv.offset().top,left:e.container.offset().left+e.contentFrame.left,width:e.contentFrame.width,height:this.chart.getBounds().height},i.visible?i.moveTo(t):i.show(t))},e.prototype.hideTooltip=function(){this.tooltip.hide()},e.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.chartPanel=null};var o,t=e;function e(t){var e=o.call(this)||this;return e._options={},e._tooltip=new i.UI.Tooltip({parent:e}),e.loadState(t),e}i.ChartPanelObject=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(u){"use strict";var n,s=jQuery,t=".scxPanelsContainer",e=(n=u.ChartHtmlControl,__extends(i,n),Object.defineProperty(i.prototype,"panels",{get:function(){return this._panels},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"newPanelHeightRatio",{get:function(){return this._options.newPanelHeightRatio},set:function(t){if(!u.JsUtil.isPositiveNumber(t)||1<=t)throw new Error("Ratio must be a number in range (0..1)");this._options.newPanelHeightRatio=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"panelPadding",{get:function(){return this._options.panelPadding},set:function(t){this._options.panelPadding=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"panelsContentFrame",{get:function(){return this._panelsContentFrame},enumerable:!0,configurable:!0}),i.prototype._initGestures=function(){return new u.GestureArray([new u.MouseHoverGesture({handler:this._handleMouseHoverGesture,hitTest:this._mouseHoverHitTest})],this)},i.prototype._subscribe=function(){var i=this;this.chart.on(u.ChartEvent.THEME_CHANGED+t,function(){for(var t=0,e=i._splitters;t<e.length;t++)e[t].invalidateTheme()})},i.prototype._unsubscribe=function(){this.chart.off(t,this)},i.prototype.handleEvent=function(t){for(var e=0,i=this._splitters;e<i.length;e++)if(i[e].handleEvent(t))return!0;n.prototype.handleEvent.call(this,t),t.pointerPosition.x-=this.frame.left,t.pointerPosition.y-=this.frame.top;for(var o=0,r=this._panels;o<r.length;o++)if(r[o].handleEvent(t))return!0;return!1},i.prototype._handleMouseHoverGesture=function(t,e){this.chart.crossHair.handleMouseHoverGesture(t,e)},i.prototype._mouseHoverHitTest=function(t){return this._panelsContentFrame.containsPoint(t)},i.prototype.addPanel=function(t,e,i){var o,r,n=this._panels,e=e||this.newPanelHeightRatio,a=new u.ChartPanel({chartPanelsContainer:this,options:{heightRatio:e}});try{i&&0<n.length&&(r=(o=this.chart.mainPanel).heightRatio-e)>=o.minHeightRatio?o.heightRatio=r:this._adjustHeightRatiosToEncloseNewRatio(e)}catch(t){i=this._availableHeightRatio();if(!(0<i&&i>=a.minHeightRatio))throw t;a.heightRatio=i}return null==t?n.push(a):n.splice(t,0,a),this._updateSplitters(),this.chart.fireValueChanged(u.ChartEvent.PANEL_ADDED,a),a},i.prototype.removePanel=function(t){var e="number"==typeof t?this._panels[t]:t,i=this.chart,o=i.mainPanel;if(e===o)throw new Error("Main panel cannot be removed.");for(var r=this._panels,n=0;n<r.length;n++)if(r[n]===e){var a=i.selectedObject,a=(a&&a.chartPanel===e&&i.selectObject(null),i.removeIndicators(e.indicators,!1),o.heightRatio+e.heightRatio);o.heightRatio=Math.min(Math.roundToDecimals(a,8),1),r.splice(n,1),e.destroy(),this._updateSplitters(),i.fireValueChanged(u.ChartEvent.PANEL_REMOVED,e);break}this.chart.setNeedsUpdate(!0)},i.prototype.movePanel=function(t,e){if(!u.JsUtil.isFiniteNumber(e))throw new TypeError("Offset must be a number.");for(var i=this._panels,o=0;o<i.length;o++)if(i[o]===t){var r=Math.min(Math.max(o-e,0),i.length-1);r!==o&&(i.splice(o,1),i.splice(r,0,t));break}this._updateSplitters()},i.prototype.totalPanelsHeight=function(){var t=this.container.scxContentSize(),e=u.ChartPanelSplitter.getHeight();return t.height-e*(this._panels.length-1)},i.prototype.findPanelAt=function(t){t-=this.frame.top;for(var e=0,i=this._panels;e<i.length;e++){var o=i[e],r=o.frame;if(t>=r.top&&t<=r.bottom&&o.visible)return o}return null},i.prototype.setPanelHeightRatio=function(t,e){var i,o=this.chart.mainPanel;t===o?t.heightRatio=e:(i=t.heightRatio,t.heightRatio=e,o.heightRatio-=t.heightRatio-i)},i.prototype._availableHeightRatio=function(){return 1-this._panels.reduce(function(t,e){return t+e.heightRatio},0)},i.prototype._adjustHeightRatiosToEncloseNewRatio=function(t){for(var e=this._panels,i=e.map(function(t){return t.heightRatio});;){var o=t-this._availableHeightRatio();if(o<=1e-5)break;for(var r=!1,n=0,a=e;n<a.length;n++){var l=a[n],s=l.heightRatio-o*l.heightRatio;s>=l.minHeightRatio&&(l.heightRatio=s,r=!0)}if(!r){for(var c=0;c<i.length;c++)e[c].heightRatio=i[c];throw new Error("Insufficient height. Other panels use too much height. You have to update minimum height weight of existing panels to free some space.")}}},i.prototype._updateSplitters=function(){var t=this._panels,e=this._splitters,i=t.length-1,o=e.length-1-i;if(0<=o){for(var r=0,n=e;r<n.length;r++)n[r].destroy();e.splice(o,e.length-o)}for(var a=0;a<i;a++){var l=a>=e.length,s=l?new u.ChartPanelSplitter:e[a];s.setPanels(a,t[a],t[a+1]),l&&e.push(s)}},i.prototype.saveState=function(){var t=u.JsUtil.clone(this._options);t.panels=[];for(var e=0,i=this._panels;e<i.length;e++){var o=i[e];t.panels.push(o.saveState())}return t},i.prototype.loadState=function(t){t=t||{},this._options={},this.newPanelHeightRatio=t.newPanelHeightRatio||.2,this.panelPadding=t.panelPadding||{left:5,top:10,right:5,bottom:10};for(var e=this._panels,i=0,o=e;i<o.length;i++)(l=o[i]).destroy();if(e.length=0,t.panels)for(var r=0,n=t.panels;r<n.length;r++){var a=n[r],a=s.extend({chartPanelsContainer:this},a),l=new u.ChartPanel(a);e.push(l)}this._updateSplitters()},i.prototype._createContainer=function(){return this.chart.rootDiv.scxAppend("div","scxPanelsContainer")},i.prototype.setNeedsAutoScale=function(){for(var t=0,e=this._panels;t<e.length;t++)e[t].setNeedsAutoScale()},i.prototype.layoutScalePanel=function(t){n.prototype.layout.call(this,t);for(var e=this.container.scxContentSize(),i=this._panelsContentFrame,o=(i.left=t.left,i.top=t.top,i.width=e.width,i.height=e.height,this.chart.valueScales),r=o.length-1;0<=r;r--)i=o[r].layout(i);this._panelsContentFrame=i,this._panelsContentFrame.width-=this.chart.getTradingPanelWidth();e=this.chart.mainPanel.plots.filter(function(t){return t.visible}).reduce(function(t,e){return t+(e&&e.contentRightOffset)?e.contentRightOffset:0},0);return new u.Rect({left:i.left,top:i.top,width:i.width-e,height:t.height})},i.prototype.layout=function(t){for(var e,i=0,o=this.panels;i<o.length;i++){var r=o[i];if(1===r.state){e=r;break}}e?this.layoutMaxPanel(e):this.layoutNormalPanels()},i.prototype.layoutMaxPanel=function(t){for(var e=0,i=this.panels;e<i.length;e++){var o=i[e];o.visible=o===t}var r=this.totalPanelsHeight(),n=this.container.scxContentSize(),n=new u.Rect({left:0,top:0,width:n.width,height:r});t.layout(n);for(var a=0,l=this._splitters;a<l.length;a++)l[a].destroy();this._splitters=[]},i.prototype.layoutNormalPanels=function(){this._updateSplitters();for(var t=0,e=this.panels;t<e.length;t++)(s=e[t]).visible=!0;for(var i=this.container.scxContentSize(),o=u.ChartPanelSplitter.getHeight(),r=this._panels.length,n=this.totalPanelsHeight(),a=0,l=0;l<r;l++){var s=this._panels[l],c=Math.round(n*s.heightRatio),h=new u.Rect({left:0,top:a,width:i.width,height:c});a+=c,s.layout(h),l<r-1&&(c=new u.Rect({left:0,top:a,width:i.width,height:o}),this._splitters[l].layout(c),a+=o)}},i.prototype.layoutSplitterPanels=function(t){function e(t){t.frame.height=Math.round(i*t.heightRatio),t.setNeedsUpdate()}var i=this.totalPanelsHeight(),o=t.topPanel,r=(e(o),t.frame),o=(r.top=o.frame.bottom,t.layout(r),t.bottomPanel);o.frame.top=r.top+u.ChartPanelSplitter.getHeight(),e(o)},i.prototype.draw=function(){for(var t=0,e=this._panels;t<e.length;t++){var i=e[t];i.visible&&i.draw()}},i.prototype.destroy=function(){for(var t=0,e=this._panels;t<e.length;t++)e[t].destroy();for(var i=0,o=this._splitters;i<o.length;i++)o[i].destroy();n.prototype.destroy.call(this)},i);function i(t){var e=n.call(this,t)||this;return e._panels=[],e._splitters=[],e._options={},e._panelsContentFrame=new u.Rect,e.loadState(t),0===e._panels.length&&e._panels.push(new u.ChartPanel({chartPanelsContainer:e})),e}u.ChartPanelsContainer=e}(StockChartX=StockChartX||{}),!function(e){"use strict";var o="scxPanelOptions",r="scxPanelTitleIcon",n="scxPanelClose",a="scxPanelMoveUp",l="scxPanelMoveDown",s="scxPanelMaximize",c="scxPanelRestore",h="scxPanelSettings",u="scxPanelScrollToLast";function t(t){this._panel=t}t.prototype.layout=function(t){var e,i=this._panel,o=i.chart.chartPanels.length,t=(this._options||this._createControls(t),1===i.state),r=i===i.chart.mainPanel;r&&(e=i.chart.recordCount,e=i.chart.lastVisibleRecord<e-1?"inline":"none",this._scrollToLast.css("display",e)),this._options.css("right",i.chart.getContentRightMargin()+5),this._moveUp.css("display","none"),this._moveDown.css("display","none"),this._close.css("display",r?"none":"inline-block"),this._restore.css("display",t&&1<o?"inline-block":"none"),this._maximize.css("display",t||o<2?"none":"inline-block"),this._settings.css("display",!r&&i.indicators.some(function(t){return t.allowSettingsDialog})?"inline-block":"none")},t.prototype._createControls=function(t){var e=this._panel,i=e.chart,t=this._options=t.scxAppend("div",o);t.hide(),this._restore=$('<span class="'+r+" "+c+'"\n             data-i18n="[title]chartPanel.options.restore"></span>').appendTo(t).on("click",function(){e.state=0,i.setNeedsUpdate(!0)}),this._settings=$('<span class="'+r+" "+h+'"\n             data-i18n="[title]chartPanel.options.settings"></span>').appendTo(t).on("click",function(){e.indicators[0].showSettingsDialog()}),this._maximize=$('<span class="'+r+" "+s+'"\n             data-i18n="[title]chartPanel.options.maximize"></span>').appendTo(t).on("click",function(){e.state=1,e.chart.setNeedsUpdate(!0)}),this._moveUp=$('<span class="'+r+" "+a+'"\n             data-i18n="[title]chartPanel.options.moveUp"></span>').appendTo(t).on("click",function(){1<e.getIndex()&&(e.chartPanelsContainer.movePanel(e,1),e.chart.setNeedsUpdate(),e.chart.setNeedsLayout())}),this._moveDown=$('<span class="'+r+" "+l+'"\n             data-i18n="[title]chartPanel.options.moveDown"></span>').appendTo(t).on("click",function(){e.chartPanelsContainer.movePanel(e,-1),e.chart.setNeedsUpdate()}),this._close=$('<span class="'+r+" "+n+'"\n             data-i18n="[title]chartPanel.options.close"></span>').appendTo(t).on("click",function(){e.chartPanelsContainer.removePanel(e),e.chart.setNeedsLayout(),e.chart.setNeedsUpdate()}),i.mainPanel===this._panel&&(this._scrollToLast=$('<span class="'+r+" "+u+'"\n                data-i18n="[title]chartPanel.options.scrollToLast"></span>').appendTo(t).on("click",function(){var t=i.lastVisibleRecord-i.firstVisibleRecord;i.dateScale.firstVisibleRecord=Math.max(i.recordCount-t-1,0),i.dateScale.lastVisibleRecord=i.recordCount-1,i.setNeedsUpdate(!0)}))},t.prototype.handleMouseHoverGesture=function(t){switch(t.state){case e.GestureState.STARTED:case e.GestureState.CONTINUED:this._panel.container.find(".scxPanelOptions").show();break;case e.GestureState.NONE:case e.GestureState.FINISHED:this._panel.container.find(".scxPanelOptions").hide()}},e.ChartPanelOptionControls=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(y){"use strict";y.PanelMoveDirection={NONE:"none",HORIZONTAL:"horizontal",VERTICAL:"vertical",ANY:"any"},Object.freeze(y.PanelMoveDirection),y.PanelMoveKind={NORMAL:"normal",AUTOSCALED:"autoscaled"},Object.freeze(y.PanelMoveKind),y.PanelEvent={THEME_CHANGED:"panelThemeChanged",X_GRID_VISIBLE_CHANGED:"panelXGridVisibleChanged",Y_GRID_VISIBLE_CHANGED:"panelYGridVisibleChanged",PLOT_ADDED:"panelPlotAdded",PLOT_REMOVED:"panelPlotRemoved",DRAWING_ADDED:"panelDrawingAdded",OBJECT_ADDED:"panelObjectAdded",DRAWING_REMOVED:"panelDrawingRemoved",OBJECT_REMOVED:"panelObjectRemoved",DOUBLE_CLICKED:"panelDoubleClicked",CONTEXT_MENU:"panelContextMenu",MOVE_STARTED:"panelMoveStarted",MOVE_FINISHED:"panelMoveFinished",MOVE_CONTINUED:"panelMoveContinued",FORCE_MOVE_STARTED:"panelForceMoveStarted",FORCE_MOVE_FINISHED:"panelForceMoveFinished",FORCE_MOVE_CONTINUED:"panelForceMoveContinued"},Object.freeze(y.PanelEvent);var m,n="scxChartPanel",s="scxPanelScroll",a="scxPanelTitle",h="scxSymbolTitle",u="scxPanelTitleCaption",f="scxPanelTitleValue",l="scxPanelTitleIcon",_=".scxNavigation",C=".scxPanelTitle",c="scxToggleIndicatorTitles",d="scxIndicatorCollapseShow",p="scxIndicatorCollapseHide",i=".scxPanel",t=(m=y.HtmlControl,__extends(e,m),Object.defineProperty(e.prototype,"chartPanelsContainer",{get:function(){return this._panelsContainer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chart",{get:function(){return this._panelsContainer._chart},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueScales",{get:function(){return this._valueScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueScale",{get:function(){return this._valueScales[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatter",{get:function(){return this.valueScale.formatter},set:function(t){this.valueScale.formatter=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layer",{get:function(){return this._layer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"components",{get:function(){return this._components},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"drawValueScale",{get:function(){return this._options.drawValueScale},set:function(t){this._options.drawValueScale=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"heightRatio",{get:function(){return this._options.heightRatio},set:function(t){if(!y.JsUtil.isFiniteNumber(t)||t<this._options.minHeightRatio||t>this._options.maxHeightRatio)throw new Error("Height ratio must be a number in range [minHeightRatio..maxHeightRatio]");this._options.heightRatio=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minHeightRatio",{get:function(){return this._options.minHeightRatio},set:function(t){if(!y.JsUtil.isFiniteNumber(t)||t<0||t>this._options.maxHeightRatio)throw new Error("Min height ratio must be a number in range [0..maxHeightRatio].");this._options.minHeightRatio=t,this._options.heightRatio<t&&(this._options.heightRatio=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxHeightRatio",{get:function(){return this._options.maxHeightRatio},set:function(t){if(!y.JsUtil.isFiniteNumber(t)||t<this.minHeightRatio||1<t)throw new Error("Max height ratio must be a number in range [minHeightRatio..1]");this._options.maxHeightRatio=t,this.heightRatio>t&&(this._options.heightRatio=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"moveDirection",{get:function(){return this._options.moveDirection},set:function(t){this._options.moveDirection=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"moveKind",{get:function(){return this._options.moveKind},set:function(t){this._options.moveKind=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xGridVisible",{get:function(){return this._options.showXGrid},set:function(t){var e=this._options.showXGrid;e!==t&&(this._options.showXGrid=t,this._fire(y.PanelEvent.X_GRID_VISIBLE_CHANGED,t,e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yGridVisible",{get:function(){return this._options.showYGrid},set:function(t){var e=this._options.showYGrid;e!==t&&(this._options.showYGrid=t,this._fire(y.PanelEvent.Y_GRID_VISIBLE_CHANGED,t,e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._options.state},set:function(t){this._options.state=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._options.visible},set:function(t){this._options.visible=t,this.container&&(t?this.container.show():this.container.hide())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"objects",{get:function(){return this._objects},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"plots",{get:function(){return this._objects.filter(function(t){return t instanceof y.Plot})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"drawings",{get:function(){return this._objects.filter(function(t){return t instanceof y.Drawing})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orders",{get:function(){return this._objects.filter(function(t){return t instanceof y.OrderBar})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tradingPanel",{get:function(){return this._objects.filter(function(t){return t instanceof y.TradingPanel})[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._objects.filter(function(t){return t instanceof y.PositionBar})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"theme",{get:function(){return this._options.theme},set:function(t){var e=this._options.theme;this._options.theme=t,this._fire(y.PanelEvent.THEME_CHANGED,t,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actualTheme",{get:function(){return this._options.theme||this.chart.theme.chartPanel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"projection",{get:function(){return this.valueScale.projection},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleDiv",{get:function(){return this._controls.title},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indicators",{get:function(){var e=this;return this.chart.indicators.filter(function(t){return t.chartPanel===e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentFrame",{get:function(){return this._contentFrame},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showIndicatorTitles",{get:function(){return this._options.showIndicatorTitles},set:function(t){var e;this._options.showIndicatorTitles!==t&&(e=this._toggleIndicatorTitles,this._options.showIndicatorTitles=t,e&&(t?e.addClass(p).removeClass(d):e.addClass(d).removeClass(p)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panelPadding",{get:function(){var t=this.chartPanelsContainer;return this._options.panelPadding||t.panelPadding},set:function(t){var e=this.chartPanelsContainer.panelPadding;this._options.panelPadding={left:e.left,top:t.top,right:e.right,bottom:t.bottom}},enumerable:!0,configurable:!0}),e.prototype._fire=function(t,e,i){var o=this.chart;o&&o.fireTargetValueChanged(this,t,e,i)},e.prototype.getIndex=function(){return this._panelsContainer.panels.indexOf(this)},e.prototype.getProjection=function(t){t=t?t.index:0;return this.valueScales[t].projection},e.prototype.getValueScale=function(t){t=t?t.index:0;return this.valueScales[t]},e.prototype.setHeightRatio=function(t){this._panelsContainer.setPanelHeightRatio(this,t)},e.prototype.setNeedsAutoScale=function(){for(var t=0,e=this._valueScales;t<e.length;t++)e[t].setNeedsAutoScale()},e.prototype.containsPlot=function(t){return 0<=this.plots.indexOf(t)},e.prototype.addPlot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,o=y.JsUtil.flattenArray(t);i<o.length;i++){var r=o[i];if(!(r instanceof y.Plot))throw new TypeError("Plot must be an instance of StockChartX.Plot.");this.containsPlot(r)||((r.chartPanel=this)._objects.push(r),y.JsUtil.sort(this._objects,function(t,e){return t.zIndex-e.zIndex}),this._fire(y.PanelEvent.PLOT_ADDED,r))}},e.prototype.removePlot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,o=t&&0<t.length?y.JsUtil.flattenArray(t):this.plots.slice(0);i<o.length;i++){var r=o[i],n=this._objects.indexOf(r);if(0<=n){this._objects.splice(n,1);try{r.destroy&&r.destroy()}catch(t){console.error("Plot destroy error",t)}this._fire(y.PanelEvent.PLOT_REMOVED,r)}}},e.prototype.containsDrawing=function(t){return 0<=this.drawings.indexOf(t)},e.prototype.addDrawings=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,o=y.JsUtil.flattenArray(t);i<o.length;i++){var r=o[i];if(!(r instanceof y.Drawing))throw new TypeError("Drawing is not an instance of StockChartX.Drawing.");if(this.containsDrawing(r))throw new Error("Drawing already added.");(r.chartPanel=this)._objects.push(r),this._fire(y.PanelEvent.DRAWING_ADDED,r)}},e.prototype.removeDrawings=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=(t&&0<t.length?y.JsUtil.flattenArray(t):this.drawings.slice(0)).filter(function(t){return t.canRemove});this.forceRemoveDrawings(i)},e.prototype.forceRemoveDrawings=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=this.chart,o=null,r=t&&0<t.length?y.JsUtil.flattenArray(t):this.drawings.slice(0),n=0,a=r;n<a.length;n++){var l=a[n],s=this._objects.indexOf(l);s<0||(i.selectedObject===l&&(i.state===y.ChartState.USER_DRAWING?o=i.selectedObject:i.selectObject(null)),l.destroy(),this._objects.splice(s,1),this._fire(y.PanelEvent.DRAWING_REMOVED,l))}o&&i.cancelUserDrawing()},e.prototype.addObjects=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,o=y.JsUtil.flattenArray(t);i<o.length;i++){var r=o[i];if(!(r instanceof y.ChartPanelObject))throw new TypeError("Object is not an instance of StockChartX.ChartPanelObject.");if(this.containsObject(r))throw new Error("Object already added.");(r.chartPanel=this)._objects.push(r),this._fire(y.PanelEvent.OBJECT_ADDED,r)}},e.prototype.removeObjects=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t&&0<t.length?y.JsUtil.flattenArray(t):this.objects.slice(0),o=this.chart,r=0,n=i;r<n.length;r++){var a=n[r],l=this._objects.indexOf(a);l<0||(o.selectedObject===a&&o.selectObject(null),this._objects.splice(l,1),this._fire(y.PanelEvent.OBJECT_REMOVED,a))}},e.prototype.containsObject=function(t){return 0<=this.objects.indexOf(t)},e.prototype.handleEvent=function(e){if(!this.visible)return!1;var t=e.pointerPosition,i=this.chart;if(i.state===y.ChartState.ZOOM_IN)return i.zoomInView.panel=this,i.zoomInView.handleEvent(e);var o={x:t.x-this.frame.left,y:t.y-this.frame.top};e.pointerPosition=o;for(var r=0,n=this._valueScales;r<n.length;r++)if(n[r].handleEvent(e))return!0;var a=this.hitTest(t);try{if(i.state===y.ChartState.USER_DRAWING){if(!a)return!1;var l=i.selectedObject,s=l.chartPanel;return s&&s!==this?!1:(e.pointerPosition=o,e.chartPanel=this,l.handleEvent(e),$(C).css("pointer-events","none"),$(_).css("pointer-events","none"),!0)}$(C).css("pointer-events","all"),$(_).css("pointer-events","all");var c=this.drawings,h=this.orders,u=this.tradingPanel,f=this.positions,d=i.selectedObject;if(u&&u.handleEvent(e))return!0;if(!a){for(var p=c.length-1;0<=p;p--)c[p].hideTooltip();return e.pointerPosition=t,d&&e.evt.type!==y.MouseEvent.MOVE&&d.handleEvent(e),this.orders.forEach(function(t){return t.handleEvent(e)}),u&&u.handleEvent(e),m.prototype.handleEvent.call(this,e,!1),!1}for(p=c.length-1;0<=p;p--)if(c[p].handleEvent(e))return!0;for(p=h.length-1;0<=p;p--)if(h[p].handleEvent(e))return!0;for(p=f.length-1;0<=p;p--)if(f[p].handleEvent(e))return!0}finally{e.pointerPosition=t}return m.prototype.handleEvent.call(this,e)},e.prototype.minMaxValues=function(t,e,i){for(var o=1/0,r=-1/0,n=0,a=this.plots;n<a.length;n++){var l,s,c,h,u=a[n];i&&u.valueScale!==i||(h=null,h=(c=u.findDataSeries(y.DataSeriesSuffix.DATE))?(s=(l=this.projection).dateByRecord(t),l=l.dateByRecord(t+e),(s=c.binaryIndexOf(s))<0&&(s=~s),(c=c.binaryIndexOf(l))<0&&(c=~c),u.minMaxValues(s,c-s)):u.minMaxValues(t,e),(h=u.minMaxValues(t,e)).min<o&&(o=h.min),h.max>r&&(r=h.max))}return(o=isFinite(o)?o:-1)===(r=isFinite(r)?r:1)&&(o--,r++),{min:o,max:r}},e.prototype.autoScaledMinMaxValues=function(t){var e=this.chart.dateScale,i=e.firstVisibleIndex,e=e.lastVisibleIndex-i+1;return this.minMaxValues(i,e,t)},e.prototype.formatValue=function(t){return this.valueScale.formatValue(t)},e.prototype.hitTest=function(t){return this._contentFrame.containsPoint(t)},e.prototype.saveState=function(){for(var t={options:y.JsUtil.clone(this._options),valueScales:[]},e=0,i=this._valueScales;e<i.length;e++){var o=i[e];t.valueScales.push(o.saveState())}return t},e.prototype.loadState=function(t){for(var e=(t=t||{}).options||{},i=(this._options={},this._options.panelPadding=e.panelPadding,this.minHeightRatio=void 0!==e.minHeightRatio?e.minHeightRatio:.05,this.maxHeightRatio=e.maxHeightRatio||1,this.heightRatio=e.heightRatio||1,this.xGridVisible=void 0===e.showXGrid||!!e.showXGrid,this.yGridVisible=void 0===e.showYGrid||!!e.showYGrid,this.moveDirection=e.moveDirection||y.PanelMoveDirection.ANY,this.moveKind=e.moveKind||y.PanelMoveKind.NORMAL,this.state=e.state||0,this.visible=null==e.visible||e.visible,this.showIndicatorTitles=null==e.showIndicatorTitles||e.showIndicatorTitles,this.drawValueScale=null==e.drawValueScale||e.drawValueScale,this._valueScales=[]),o=t.valueScales||[t.valueScale],r=0,n=this.chart.valueScales.length;r<n;r++){var a=new y.ChartPanelValueScale({chartPanel:this});i.push(a),a.loadState(o[r])}},e.prototype.preferredValueScaleWidth=function(t){for(var e=0,i=0,o=this._valueScales;i<o.length;i++){var r=o[i];r.chartValueScale===t&&(e=Math.max(e,r.preferredWidth()))}return e},e.prototype.layout=function(t){this._layoutHtmlElements(t);for(var e=0,i=this._valueScales;e<i.length;e++)i[e].layout(t);y.JsUtil.sort(this._objects,function(t,e){return Math.roundToDecimals(t.zIndex-e.zIndex,5)})},e.prototype.draw=function(){var t=this._layer.renderer,e=this._layer.size.width,i=this._layer.size.height;if(t.save(),t.clearRect(0,0,e,i),t.translate(.5,.5),this.drawGridLines(),this.drawValueScale)for(var o=0,r=this._valueScales;o<r.length;o++)r[o].draw();for(var n=0,a=this._objects;n<a.length;n++)(h=a[n]).drawValueMarkers();e=this._contentFrame,i=e.width+this.chart.getTradingPanelWidth();t.rectPath(e.left,0,i,e.height),t.clip();for(var l=0,s=this.indicators;l<s.length;l++){var c=s[l];c.draw(),this!==this.chart.mainPanel&&c===this.indicators[0]?c.showTitle=!0:c.showTitle=this.showIndicatorTitles}for(var h,u,f=0,d=this._objects;f<d.length;f++)(h=d[f])instanceof y.Drawing?(u=h,this.chart.showDrawings?(u.draw(),u.selected&&u.drawDateMarkers()):u.tooltip.hide()):h.draw();t.restore()},e.prototype.drawGridLines=function(){var t=this.chart.xGridVisible&&this.xGridVisible,e=this.chart.yGridVisible&&this.yGridVisible;if(t||e){var i=this.actualTheme,o=this._contentFrame,r=this._layer.renderer;if(r.beginPath(),t)for(var n=0,a=this.chart.dateScale.calibrator.majorTicks;n<a.length;n++){var l=a[n];r.verLine(l.x,0,o.height)}if(e)for(var s=0,c=this.valueScale.calibrator.majorTicks;s<c.length;s++){l=c[s];r.horLine(o.left,o.left+o.width,l.y)}r.stroke(i.grid)}},e.prototype.update=function(){this.layout(this.frame),this.draw()},e.prototype.setNeedsUpdate=function(t){t&&this.setNeedsAutoScale(),this._updateAnimation.start()},e.prototype.handleResize=function(){this.layer.scale=this.chart.scale,this._layer.adjustDimensions()},e.prototype._onUpdateAnimationCallback=function(){this&&this.update()},e.prototype.destroy=function(){this._unsubscribe(),this.chartContextMenu&&this.chartContextMenu.destroy(),this._updateAnimation.destroy();for(var t=0,e=this._objects;t<e.length;t++)e[t].destroy();for(var i=0,o=this._components;i<o.length;i++)o[i].destroy();m.prototype.destroy.call(this)},e.prototype._initInstrumentPanelTitle=function(){var e=this,t={chart:this.chart,showOnClick:!0,onItemSelected:function(t){t.data("id")===y.UI.ChartContextMenu.MenuItem.FORMAT&&e.showPriceStyleFormatDialog()}},i=this._controls.title.scxAppend("div",h),o=i.scxAppend("span",u),r=i.scxAppend("span",f),n=(i.scxAppend("span",f).scxLocalize("chartPanel.title.open"),i.scxAppend("span",f)),a=(i.scxAppend("span",f).scxLocalize("chartPanel.title.high"),i.scxAppend("span",f)),l=(i.scxAppend("span",f).scxLocalize("chartPanel.title.low"),i.scxAppend("span",f)),s=(i.scxAppend("span",f).scxLocalize("chartPanel.title.volume"),i.scxAppend("span",f)),c=i.scxAppend("span",f);this._barInfoControls={rootDiv:i,symbol:o,date:r,open:n,high:a,low:l,volume:s,change:c,series:this.chart.barDataSeries()},this._updateInstrument(),this.chartContextMenu=o.scx().chartContextMenu(t)},e.prototype.showPriceStyleFormatDialog=function(){var e=this;y.UI.ViewLoader.priceStyleSettingsDialog(function(t){t.show({chart:e.chart,priceStyle:e.chart.priceStyle})})},e.prototype.updateOHLVData=function(t){var e,i,o,r;this._barInfoControls&&(e=this._barInfoControls,i='<i class="icon-arrow-'+(0<t.income?"up":t.income<0?"down":"")+'-general"></i>',o=null!=t.income?t.income:"-",r=null!=t.incomePercentage?t.incomePercentage.toFixed(2):"-",e.change.html(i+" "+o+"\n                ("+r+"%)").addClass("scxControl-change scxControl"),e.open.text(null!=t.open?this.formatter.format(t.open):"-").addClass("scxControl-open scxControl"),e.high.text(null!=t.high?this.formatter.format(t.high):"-").addClass("scxControl-high scxControl"),e.low.text(null!=t.low?this.formatter.format(t.low):"-").addClass("scxControl-low scxControl"),e.volume.text(null!=t.volume?t.volume:"-").addClass("scxControl-close scxControl"))},e.prototype._subscribe=function(){var e=this,t=this.chart;t.on(y.ChartEvent.THEME_CHANGED+i,function(){e._applyTheme()},this),t.mainPanel===this&&t.on(y.ChartEvent.INSTRUMENT_CHANGED+i,function(){e._updateInstrument()},this),t.on(y.ChartEvent.VALUE_SCALE_ADDED+i,function(){e._valueScales.push(new y.ChartPanelValueScale({chartPanel:e}))},this),t.on(y.ChartEvent.VALUE_SCALE_REMOVED+i,function(t){e._valueScales.splice(t.value,1)},this),t.on(y.ChartEvent.PRICE_STYLE_CHANGED+i,function(t){e._barInfoControls&&(e._barInfoControls.series=e.chart.primaryBarDataSeries())},this)},e.prototype._unsubscribe=function(){var t=this.chart;t&&t.off(i,this)},e.prototype._initGestures=function(){return new y.GestureArray([new y.PanGesture({handler:this._handlePanGesture,hitTest:this._panGestureHitTest}),new y.MouseWheelGesture({handler:this._handleMouseWheel,hitTest:this.hitTest}),new y.ClickGesture({handler:this._handleClickGesture,hitTest:this.hitTest}),new y.DoubleClickGesture({handler:this._handleDoubleClickGesture,hitTest:this.hitTest}),new y.MouseHoverGesture({handler:this._handleMouseHoverGesture,hitTest:this.hitTest,hoverEventEnabled:!1}),new y.MouseHoverGesture({handler:this._handleMouseMoveGesture,hitTest:this.hitTest,hoverEventEnabled:!0}),new y.ContextMenuGesture({handler:this._handleContextMenuGesture,hitTest:this.hitTest})],this)},e.prototype._panGestureHitTest=function(t){return this.moveDirection!==y.PanelMoveDirection.NONE&&this.hitTest(t)},e.prototype._handlePanGesture=function(t,e){var i=e.pointerPosition,o=this.chart;switch(t.state){case y.GestureState.STARTED:this._fire(y.PanelEvent.FORCE_MOVE_STARTED,i);break;case y.GestureState.FINISHED:this._fire(y.PanelEvent.FORCE_MOVE_FINISHED,i);break;case y.GestureState.CONTINUED:this._fire(y.PanelEvent.FORCE_MOVE_CONTINUED,i);break;default:console.warn("gesture state is invalid")}if(o.scrollEnabled)switch(t.state){case y.GestureState.STARTED:o.rootDiv.addClass(s),this._fire(y.PanelEvent.MOVE_STARTED,i);break;case y.GestureState.FINISHED:o.rootDiv.removeClass(s),this._fire(y.PanelEvent.MOVE_FINISHED,i);break;case y.GestureState.CONTINUED:var r,n=t.moveOffset,a=void 0,l=void 0;switch(this.moveDirection){case y.PanelMoveDirection.HORIZONTAL:o.crossHairType!==y.CrossHairType.NONE&&1!==t.pointerKind||!o.dateScale.scrollOnPixels(n.x)||((r=this.moveKind===y.PanelMoveKind.AUTOSCALED)||o.setNeedsLayout(),o.setNeedsUpdate(r));break;case y.PanelMoveDirection.VERTICAL:for(a=0,l=this.valueScales;a<l.length;a++)l[a]._zoomOrScrollWithUpdate(n.y,this.valueScale.scrollOnPixels);break;case y.PanelMoveDirection.ANY:if(o.dateScale.scrollOnPixels(n.x)||this.moveKind===y.PanelMoveKind.AUTOSCALED){for(a=0,l=this.valueScales;a<l.length;a++)l[a].scrollOnPixels(n.y);(r=this.moveKind===y.PanelMoveKind.AUTOSCALED)||o.setNeedsLayout(),o.setNeedsUpdate(r)}else for(a=0,l=this.valueScales;a<l.length;a++)l[a]._zoomOrScrollWithUpdate(n.y,this.valueScale.scrollOnPixels);break;default:return}this._fire(y.PanelEvent.MOVE_CONTINUED,i)}},e.prototype._handleMouseHoverGesture=function(t){this._optionControls.handleMouseHoverGesture(t)},e.prototype._handleMouseMoveGesture=function(t,e){this._fire(y.MouseEvent.MOVE,e.pointerPosition)},e.prototype._handleMouseWheel=function(t,e){var i,o;this.chart.zoomEnabled&&(i=this.contentFrame.width,o=e.pointerPosition.x/i,this.chart.dateScale._handleZoom(-t.delta*(.05*i),o),this._fire(y.MouseEvent.WHEEL,e.pointerPosition))},e.prototype._handleClickGesture=function(){var t=this.chart,e=t.selectedObject;e&&(t.selectObject(null),(this.containsDrawing(e)?this:t).setNeedsUpdate()),this._fire(y.MouseEvent.CLICK,this)},e.prototype._handleDoubleClickGesture=function(){this._fire(y.PanelEvent.DOUBLE_CLICKED,this)},e.prototype._handleContextMenuGesture=function(t,e){this._fire(y.PanelEvent.CONTEXT_MENU,{contextMenuGesture:t,event:e})},e.prototype._createContainer=function(){var t=this,e=this.chartPanelsContainer.container.scxAppend("div",n),i=this===this.chart.mainPanel,o=(this._container=e,this._layer=new y.Layer({parent:e}),this._controls.title=e.scxAppend("div",a)),r=$('<span class="'+c+" "+l+'"/>').attr("data-i18n","[title]chartPanel.menu.showHideTitles").on(y.MouseEvent.CLICK,function(){t.showIndicatorTitles=!t.showIndicatorTitles,t.setNeedsUpdate()});return r.addClass(this.showIndicatorTitles?p:d),o.append(r),this._toggleIndicatorTitles=r,i&&(this.addComponent(new y.InstrumentWatermark),this._initInstrumentPanelTitle()),this._applyTheme(),this._subscribe(),this===this.chart.mainPanel&&(o=new y.TradingPanel,this.addObjects(o)),e},e.prototype._layoutHtmlElements=function(t){m.prototype.layout.call(this,t);var e=this.chart.mainPanel===this,i=e?0:this.chart.getTradingPanelWidth(),o=this._panelsContainer.panelsContentFrame;this._contentFrame.copyFrom(t),this._contentFrame.left=o.left,this._contentFrame.width=o.width,this._layer.size={width:this.container.width(),height:this.container.height()},e?(this._barInfoControls.rootDiv.css("display",this.chart.showBarInfoInTitle?"block":"none"),this._toggleIndicatorTitles.css("display",0<this.indicators.length?"block":"none")):this._toggleIndicatorTitles.css("display",1<this.indicators.length?"block":"none");for(var r=0,n=this._components;r<n.length;r++)n[r].layout(t);this._controls.title.scxPosition(this._contentFrame.left,0).outerWidth(this._contentFrame.width+i),this._optionControls.layout(this._container)},e.prototype._updateInstrument=function(){var t;this._barInfoControls&&(t=this.chart.instrument)&&this._barInfoControls.symbol.text(t.symbol)},e.prototype._applyTheme=function(){var t=this.titleDiv;if(t){var e=this.actualTheme;t.scxTextStyle(e.title);for(var i=0,o=this._components;i<o.length;i++)o[i].applyTheme()}},e.prototype.addComponent=function(t){if(0<=this._components.indexOf(t))throw new Error("An item already exists.");(t.chartPanel=this)._components.push(t)},e.prototype.removeComponent=function(t){var e=this._components,t=e.indexOf(t);0<=t&&(e[t].destroy(),e.splice(t,1))},e);function e(t){var e=m.call(this)||this;if(e._valueScales=[],e._components=[],e._objects=[],e._contentFrame=new y.Rect,e._controls={title:null,options:null},e._barInfoControls=null,e._updateAnimation=new y.Animation({context:e,recurring:!1,callback:e._onUpdateAnimationCallback}),t.chartPanelsContainer instanceof y.ChartPanelsContainer)return e._panelsContainer=t.chartPanelsContainer,e._optionControls=new y.ChartPanelOptionControls(e),e.loadState(t),e;throw new TypeError("Invalid chart panels container.")}y.ChartPanel=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(i){"use strict";o=i.ChartPanelObject,__extends(e,o),Object.defineProperty(e.prototype,"point",{get:function(){return this._options.point},set:function(t){this._setOption("point",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extended",{get:function(){return this._options.extended},set:function(t){this._setOption("extended",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"theme",{get:function(){return this._options.theme},set:function(t){this._setOption("theme",t)},enumerable:!0,configurable:!0}),e.prototype.loadState=function(t){var e;o.prototype.loadState.call(this,t),t&&t.options&&((t=t.options)&&(e=this.suppressEvents(),(t=t.point)&&(this.point=new i.ChartPoint(t)),this.suppressEvents(e)))},e.prototype.draw=function(){var t,e,i,o,r;this.visible&&(t=this.projection,t=this.point.toPoint(t),e=this.chartPanel.contentFrame,i=this.panelValueScale,(o=this.renderer).beginPath(),null!=i.leftFrame&&(r=this.extended?e.right:t.x,o.horLine(e.left,r,t.y)),null!=i.rightFrame&&(r=this.extended?e.left:t.x,o.horLine(r,e.right,t.y)),o.stroke(this.theme))};var o,t=e;function e(t){return o.call(this,t&&{options:t})||this}i.ValueLine=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(r){"use strict";e=r.ChartPanelObject,__extends(i,e),Object.defineProperty(i.prototype,"ask",{get:function(){return this._options.ask},set:function(t){this._setOption("ask",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bid",{get:function(){return this._options.bid},set:function(t){this._setOption("bid",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"theme",{get:function(){return this._options.theme},set:function(t){this._setOption("theme",t)},enumerable:!0,configurable:!0}),i.prototype.draw=function(){var t,e=this.projection,i=this.renderer,o=this.chartPanel.contentFrame,r=this.theme||this.chart.theme.spread;this.ask&&(t=e.yByValue(this.ask),i.horLinePath(o.left,o.right,t),i.stroke(r.ask.line)),this.bid&&(t=e.yByValue(this.bid),i.horLinePath(o.left,o.right,t),i.stroke(r.bid.line))},i.prototype.drawValueMarkers=function(){function t(t,e){t&&(o.theme.fill.fillColor=e,o.theme.text.fillColor=r.HtmlUtil.isDarkColor(e)?"white":"black",o.draw(t,i.panelValueScale))}var i=this,o=this.chart.valueMarker,e=this.theme||this.chart.theme.spread;t(this.ask,e.ask.valueMarker.fill.fillColor),t(this.bid,e.bid.valueMarker.fill.fillColor)};var e,t=i;function i(t){return e.call(this,t&&{options:t})||this}r.Spread=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(l){"use strict";i=l.ChartPanelObject,__extends(e,i),e.prototype.draw=function(){if(!(this._handler.chart.timeInterval>=l.TimeSpan.MILLISECONDS_IN_DAY)){var t,e=this.projection,i=this.chartPanel.contentFrame,o=this.renderer,r=moment(e.dateByX(0)).startOf("day").hours(this._handler.time.hours).minutes(this._handler.time.minutes).toDate(),n=e.dateByRecord(e.dateScale.lastVisibleIndex+1),a=this._handler.dateFilter;for(o.beginPath();r<=n;)a&&a(r)||(t=e.xByDate(moment(r).toDate()),o.verLine(t,0,i.bottom-i.top)),r=moment(r).add(1,"day").toDate();o.stroke(this._handler.theme)}};var i,t=e;function e(t){var e=i.call(this,t&&{options:t})||this;return e._handler=t.breakLinesHandler,e}l.BreakLines=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";i=t.ChartPanelObject,__extends(o,i),Object.defineProperty(o.prototype,"date",{get:function(){return this._date},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"theme",{get:function(){return this._theme},set:function(t){this._theme=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"actualTheme",{get:function(){return this._theme||this.defaultTheme},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"defaultTheme",{get:function(){return this.chart.theme.highlightedColumn},enumerable:!0,configurable:!0}),o.prototype.checkDate=function(t){return this._date.getTime()===t.getTime()},o.prototype.draw=function(){var t,e,i,o;this.chart.highlightedColumns.visible&&(o=(t=this.chartPanel).projection,e=t.layer.renderer,i=o.xByDate(this._date),o=o.columnByX(i),o=this.chart.dateScale&&this.chart.dateScale.columnValues&&this.chart.dateScale.columnValues.visibleColumnsWidths?this.chart.dateScale.columnValues.visibleColumnsWidths[o]:this.chart.dateScale.columnWidth,e.rectPath(i-o/2,0,o,t.layer.size.height),e.fill(this.actualTheme.fill))},o.prototype.destroy=function(){this.chartPanel&&this.chartPanel.removeObjects(this),i.prototype.destroy.call(this)};var i,e=o;function o(t){var e=i.call(this,null)||this;if("object"!=typeof t)throw new Error("HighlightedColumn config must be an object.");if(t.date)return e._date=t.date,t.theme&&(e._theme=t.theme),e;throw new Error("Date for HighlightedColumn is not specified.")}t.HighlightedColumn=e}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(p){"use strict";var o,a="scxValueScaleScroll",i=(p.ScaleKind={LINEAR:"linear",LOGARITHMIC:"logarithmic"},Object.freeze(p.ScaleKind),p.ValueScaleEvents={ContextMenu:"ValueScaleContextMenu"},Object.freeze(p.ValueScaleEvents),p.ScalePriceType={AUTOMATIC:"automatic",PIXELS_PRICE:"pixels-price"},Object.freeze(p.ScalePriceType),o=p.IntlNumberFormat,__extends(t,o),t.prototype.format=function(t){if(!t)return"";var e,i,t="number"==typeof t?t:t.value;return this.isFractional?(e=Math.abs(t),i=Math.floor(e),(t<0?"-":"")+o.prototype.format.call(this,i+(e-i)*this._multiplier).replace(".","'")):o.prototype.format.call(this,t)},t.prototype.setInstrument=function(t){var e;t&&null!=t.fraction&&0!=t.fraction?(e=t.fraction.toString().length,this.setDecimalDigits(e),this._multiplier=t.fraction/Math.pow(10,e),this.isFractional=!0):(e=t?t.precision:2,this.setDecimalDigits(e),this.isFractional=!1)},t.prototype.setDecimalDigits=function(t){this._digits!==t&&(this._digits=t,o.prototype.setDecimalDigits.call(this,t))},t);function t(t){var e=o.call(this)||this;return e.isFractional=!1,e._chart=t,e}r=p.Control,__extends(n,r),Object.defineProperty(n.prototype,"chartPanel",{get:function(){return this._panel},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"chart",{get:function(){return this._panel.chart},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"projectionFrame",{get:function(){return this._projectionFrame},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"leftFrame",{get:function(){return this._leftFrame},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rightFrame",{get:function(){return this._rightFrame},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"formatter",{get:function(){return this._formatter},set:function(t){if(!t||!p.JsUtil.isFunction(t.format))throw new TypeError("Invalid formatter.");this._formatter=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"kind",{get:function(){return this._options.kind||p.ScaleKind.LINEAR},set:function(t){this._options.kind=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"valueScaleType",{get:function(){return this._valueScaleType},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"minValueRange",{get:function(){return this._minValueRange||(this._minValueRange=1e-8),this._minValueRange},set:function(t){if(!p.JsUtil.isFiniteNumberOrNaN(t))throw new TypeError("Value must be a number.");this._minValueRange=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxValueRange",{get:function(){return this._maxValueRange||(this._maxValueRange=1e11),this._maxValueRange},set:function(t){if(!p.JsUtil.isFiniteNumberOrNaN(t))throw new TypeError("Value must be a number.");this._maxValueRange=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"minVisibleValue",{get:function(){return this._options.minVisibleValue},set:function(t){if(!p.JsUtil.isFiniteNumberOrNaN(t))throw new TypeError("Value must be a number.");this._setMinVisibleValue(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxVisibleValue",{get:function(){return this._options.maxVisibleValue},set:function(t){if(!p.JsUtil.isFiniteNumberOrNaN(t))throw new TypeError("Value must be a number.");this._setMaxVisibleValue(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"autoScaleMultiplier",{get:function(){return this._options.autoScaleMultiplier||1},set:function(t){this._options.autoScaleMultiplier=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"minAllowedValue",{get:function(){return this._options.minAllowedValue},set:function(t){if(!p.JsUtil.isNumber(t))throw new TypeError("Value must be a number.");this._options.minAllowedValue=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxAllowedValue",{get:function(){return this._options.maxAllowedValue},set:function(t){if(!p.JsUtil.isNumber(t))throw new TypeError("Value must be a number.");this._options.maxAllowedValue=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"minAllowedValueRatio",{get:function(){return this._options.minAllowedValueRatio},set:function(t){if(!p.JsUtil.isPositiveNumberOrNaN(t))throw new Error("Ratio must be a positive number.");this._options.minAllowedValueRatio=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxAllowedValueRatio",{get:function(){return this._options.maxAllowedValueRatio},set:function(t){if(!p.JsUtil.isPositiveNumberOrNaN(t))throw new Error("Ratio must be a positive number or NaN.");this._options.maxAllowedValueRatio=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"minValueRangeRatio",{get:function(){return this._options.minValueRangeRatio},set:function(t){if(!p.JsUtil.isPositiveNumberOrNaN(t)||1<t)throw new Error("Ratio must be in range (0..1]");this._options.minValueRangeRatio=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxValueRangeRatio",{get:function(){return this._options.maxValueRangeRatio},set:function(t){if(!p.JsUtil.isPositiveNumberOrNaN(t)||t<1)throw new Error("Ratio must be greater or equal to 1.");this._options.maxValueRangeRatio=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"theme",{get:function(){return this._options.theme},set:function(t){this._options.theme=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"majorTickMarkLength",{get:function(){return this._options.majorTickMarkLength},set:function(t){this._options.majorTickMarkLength=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"minorTickMarkLength",{get:function(){return this._options.minorTickMarkLength},set:function(t){this._options.minorTickMarkLength=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"projection",{get:function(){return this._projection},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"padding",{get:function(){return this._options.padding},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"calibrator",{get:function(){return this._calibrator},set:function(t){this._calibrator=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"actualTheme",{get:function(){return this._options.theme||this.chart.theme.valueScale},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"chartValueScale",{get:function(){var t=this._index();return 0<=t?this.chart.valueScales[t]:null},enumerable:!0,configurable:!0}),n.prototype.applyAutoScroll=function(t){var e,i,o=this.chart.dataManager.getLastBar();Math.round(this.chart.lastVisibleRecord)>=this.chart.recordCount-1&&(this._valueScaleType===p.ScalePriceType.AUTOMATIC?this.setMinMaxVisibleValue(o.low,o.high):(e=!1,(o.close>this.maxVisibleValue||o.close<this.minVisibleValue)&&(i=o.close-this._prevClose,this.minVisibleValue=this.minVisibleValue+i,this.maxVisibleValue=this.maxVisibleValue+i,e=!0),e&&(this.chart.setNeedsLayout(),this.chart.setNeedsUpdate()))),this._prevClose=o.close},n.prototype.setMinMaxVisibleValue=function(t,e){this.minVisibleValue>t&&(this.minVisibleValue=t),this.maxVisibleValue<e&&(this.maxVisibleValue=e)},n.prototype._initGestures=function(){var i=this;return new p.GestureArray([new p.DoubleClickGesture({handler:this._handleDoubleClickGesture}),new p.PanGesture({handler:this._handlePanGesture,horizontalMoveEnabled:!1}),new p.MouseWheelGesture({handler:this._handleMouseWheelGesture}),new p.ContextMenuGesture({handler:function(t,e){i.chart.fire(p.ValueScaleEvents.ContextMenu,{target:e})},hitTest:this.hitTest})],this,this.hitTest)},n.prototype._updateFormatter=function(){var t=this.chart.locale,e=this.formatter,i=this.chart.instrument,o=3;i&&i.hasOwnProperty("precision")&&(o=i.precision),e?e.locale=t:this.formatter=new p.IntlNumberFormat(t,{minimumFractionDigits:o,maximumFractionDigits:o})},n.prototype._setMinVisibleValue=function(t){this._options.minVisibleValue=t},n.prototype._setMaxVisibleValue=function(t){this._options.maxVisibleValue=t},n.prototype._index=function(){for(var t=this._panel.valueScales,e=0;e<t.length;e++)if(t[e]===this)return e;return-1},n.prototype.needsAutoScale=function(){return isNaN(this._options.minVisibleValue)||isNaN(this._options.maxVisibleValue)},n.prototype.setNeedsAutoScale=function(){this.minVisibleValue=NaN,this.maxVisibleValue=NaN},n.prototype.autoScale=function(){if(this._valueScaleType===p.ScalePriceType.PIXELS_PRICE)this._applyPixelPerPrice();else{for(var t=this.chart.dateScale,e=t.firstVisibleIndex,i=t.lastVisibleIndex-e+1,o=1/0,r=-1/0,n=this.chartValueScale,a=0,l=this._panel.plots;a<l.length;a++){var s,c,h,u,f=l[a];f.valueScale===n&&(u=null,(u=(h=f.findDataSeries(p.DataSeriesSuffix.DATE))?(c=(s=this.projection).dateByRecord(e),s=s.dateByRecord(e+i),(c=h.binaryIndexOf(c))<0&&(c=~c),(h=h.binaryIndexOf(s))<0&&(h=~h),f.minMaxValues(c,h-c)):f.minMaxValues(e,i)).min<o&&(o=u.min),u.max>r&&(r=u.max))}(o=isFinite(o)?o:-1)===(r=isFinite(r)?r:1)&&(o--,r++);t=this.range;t&&(null!=t.min&&o>t.min&&(o=t.min),null!=t.max&&r<t.max&&(r=t.max)),this._setMinVisibleValue(o),this._setMaxVisibleValue(r*this.autoScaleMultiplier)}},n.prototype.formatValue=function(t){return this.calibrator instanceof p.PercentValueScaleCalibrator?this.calibrator.formatValue(t):this.formatter.format(t)},n.prototype.preferredWidth=function(){this.needsAutoScale()&&this.autoScale();var t=this._options,e=this.actualTheme.text,i=this.formatValue(t.minVisibleValue),o=this.formatValue(t.maxVisibleValue),i=p.DummyCanvasContext.measureText(i,e).width,o=p.DummyCanvasContext.measureText(o,e).width,e=t.padding;return Math.max(i,o)+e.left+e.right},n.prototype.hitTest=function(t){var e=this._leftContentFrame,i=this._rightContentFrame;return e&&p.Geometry.isPointInsideOrNearRect(t,e)||i&&p.Geometry.isPointInsideOrNearRect(t,i)},n.prototype.scrollOnPixels=function(t){if(!isFinite(t))throw new Error("Finite number expected.");if(!t)return!1;t=this._valueOffset(t);return this.scrollOnValue(t)},n.prototype.scrollOnValue=function(t){if(!t)return!1;var e=this.minVisibleValue+t,t=this.maxVisibleValue+t,i=this.range;return i&&(null!=i.min&&e>i.min&&(e=i.min),null!=i.max&&t<i.max&&(t=i.max)),!!this._canSetVisibleValueRange(e,t)&&(this._setMinVisibleValue(e),this._setMaxVisibleValue(t),!0)},n.prototype.zoomOnPixels=function(t){if(!isFinite(t))throw new Error("Finite number expected.");if(!t)return!1;if(this._valueScaleType==p.ScalePriceType.PIXELS_PRICE)return!1;t=this._valueOffset(t);return this.zoomOnValue(t)},n.prototype.zoomOnValue=function(t){if(!t)return!1;var e=this.minVisibleValue,i=this.maxVisibleValue,o=e-t,t=i+t;if(t-o>this.maxValueRange)return!1;var r=this.range;if(!this._canSetVisibleValueRange(o,t))if(this._canSetVisibleValueRange(e,t))o=e;else if(this._canSetVisibleValueRange(o,i))t=i;else if(!r)return!1;return r&&(null!=r.min&&o>r.min&&(o=r.min),null!=r.max&&t<r.max&&(t=r.max)),(o!==e||t!==i)&&t-o>=this.minValueRange&&(this._setMinVisibleValue(o),this._setMaxVisibleValue(t),!0)},n.prototype.setPixelsPrice=function(t){var e=this;this._pixelPrice=parseInt(t.toString()),t<=0||this._valueScaleType===p.ScalePriceType.AUTOMATIC||(this._moveToCloseLastBar(),setTimeout(function(){e._applyPixelPerPrice(),e._panel.setNeedsUpdate(),e.chart.setNeedsUpdate()}))},n.prototype._moveToCloseLastBar=function(){this.chart.scrollOnPixels(-this.chart.size.width/5),this.chart.setNeedsUpdate(!0)},n.prototype._applyPixelPerPrice=function(){var t=this.chart.instrument,e=this._panel.contentFrame.height,i=this.chart.dataManager.getDataSeries(p.DataSeriesSuffix.CLOSE),i=i.value(Math.min(this.chart.lastVisibleIndex,i.length-1)),e=e/2/this.pixelPrice,o=t?t.tickSize:1,t=t?t.precision:0,e=Math.roundToDecimals(e*o,t+1),o=i+e;this._setMinVisibleValue(i-e),this._setMaxVisibleValue(o)},n.prototype.setValueScaleType=function(t){(this._valueScaleType=t)==p.ScalePriceType.PIXELS_PRICE&&this.setPixelsPrice(this.pixelPrice)},Object.defineProperty(n.prototype,"pixelPrice",{get:function(){return parseInt(this._pixelPrice.toString())},enumerable:!0,configurable:!0}),n.prototype.getPixelsPrice=function(){if(0<this.pixelPrice)return this.pixelPrice;var t=this.chart.instrument,e=t?t.precision:0,t=t?t.tickSize:1,e=Math.roundToDecimals(this.maxVisibleValue-this.minVisibleValue,e+1),e=Math.roundToDecimals(this._panel.contentFrame.height/e*t,2);return isNaN(e)?0:parseInt(e.toString())},n.prototype._zoomOrScrollWithUpdate=function(t,e){var i=this.chartValueScale.useManualWidth,o=i||this.preferredWidth(),e=e.call(this,t),t=i||this.preferredWidth();return e&&(o===t?this._panel:this.chart).setNeedsUpdate(),e},n.prototype.saveState=function(){return{options:p.JsUtil.clone(this._options),formatter:this.formatter.saveState(),calibrator:this.calibrator.saveState()}},n.prototype.loadState=function(t){var e=(t=t||{}).options||{};this._options={},this._options.minVisibleValue=null!=e.minVisibleValue?e.minVisibleValue:NaN,this._options.maxVisibleValue=null!=e.maxVisibleValue?e.maxVisibleValue:NaN,this.minAllowedValue=null!=e.minAllowedValue?e.minAllowedValue:NaN,this.maxAllowedValue=null!=e.maxAllowedValue?e.maxAllowedValue:NaN,this.minAllowedValueRatio=e.minAllowedValue||.8,this.maxAllowedValueRatio=e.maxAllowedValueRatio||.8,this.minValueRangeRatio=e.minValueRangeRatio||.1,this.maxValueRangeRatio=e.maxValueRangeRatio||5,this.majorTickMarkLength=e.majorTickMarkLength||3,this.minorTickMarkLength=e.minorTickMarkLength||3,this._options.padding=e.padding||{left:6,top:3,right:3,bottom:3},this.range=e.range||{},this.formatter=new i(this.chart),this.formatter.setInstrument(this.chart.instrument),this.calibrator=t.calibrator?p.ValueScaleCalibrator.deserialize(t.calibrator):new p.IntervalValueScaleCalibrator,this.calibrator.formater=this.formatter},n.prototype.layout=function(t){(this.needsAutoScale()||this.maxVisibleValue-this.minVisibleValue<this.minValueRange)&&this.autoScale();var e=this._projectionFrame;e.left=0,e.top=0,e.width=this._panel.layer.size.width,e.height=this._panel.layer.size.height,e.applyPadding(this._panel.panelPadding),e.height<0&&(e.height=1),this._calibrator.calibrate(this),this._layoutContentFrames()},n.prototype._layoutContentFrames=function(){var t,e,i,o,r=this._panel,n=this.chartValueScale,a=n.leftPanelVisible,l=n.rightPanelVisible,s=this._options.padding,c=!1!==this.chart.theme.valueScale.border.strokeEnabled;a?(e=(a=n.leftPanel)&&a.container?parseFloat(a.container.css("border-left-width")):0,t=a&&a.container?parseFloat(r.container.css("border-left-width")):0,a=a&&a.container?a.contentSize.width:0,i=Math.round(Math.max(e-t,0)),(o=(o=this._leftFrame)||(this._leftFrame=new p.Rect)).left=i,o.top=0,o.width=a-Math.max(t-e),o.height=r.container.height(),(i=(i=this._leftContentFrame)||(this._leftContentFrame=new p.Rect)).left=o.left+s.right,i.top=o.top,i.width=o.width-s.left-s.right,i.height=o.height):this._leftFrame=this._leftContentFrame=null,l?(t=(a=n.rightPanel)&&a.container?parseFloat(a.container.css("border-left-width")):0,e=a&&a.contentSize?a.contentSize.width:0,i=a.frame.left+t,(o=(o=this._rightFrame)||(this._rightFrame=new p.Rect)).left=i,o.top=0,o.width=e,o.height=r.container.height(),c||--o.left,(l=(l=this._rightContentFrame)||(this._rightContentFrame=new p.Rect)).left=o.left+s.left,l.top=o.top,l.width=o.width-s.left-s.right,l.height=o.height):this._rightFrame=this._rightContentFrame=null},n.prototype.clip=function(){var t=this._leftFrame,e=this._rightFrame;if(!t&&!e)return!1;var i=this._panel.layer.renderer;return t&&i.rect(t.left,t.top,t.width,t.height),e&&i.rect(e.left,e.top,e.width,e.height),i.clip(),!0},n.prototype.draw=function(){var t=this._panel.layer.renderer;if(t.save(),this.clip()){var e=this.actualTheme,i=this._leftContentFrame,o=this._rightContentFrame,r=this._leftFrame,n=this._rightFrame,a=r&&r.right-1,l=this.majorTickMarkLength,s=this.minorTickMarkLength;t.textTheme(e.text),t.textOptions({baseline:p.TextBaseline.MIDDLE}),t.beginPath();for(var c=0,h=this.calibrator.majorTicks;c<h.length;c++){var u=h[c];i&&(t.horLine(a,a-l,u.y),t.textOptions({align:p.TextAlign.RIGHT}),t.fillText(u.text,i.right,u.y)),o&&(t.textOptions({align:p.TextAlign.LEFT}),t.fillText(u.text,o.left,u.y))}for(var f=0,d=this.calibrator.minorTicks;f<d.length;f++){u=d[f];r&&t.horLine(a,a-s,u.y),n&&t.horLine(n.left,n.left+s,u.y)}t.stroke(e.line)}t.restore()},n.prototype._handleDoubleClickGesture=function(){var t=this.chartValueScale.useManualWidth,e=t||this.preferredWidth();this.autoScale(),(e===(t||this.preferredWidth())?this._panel:this.chart).setNeedsUpdate()},n.prototype._handlePanGesture=function(t,e){var i=this.chart,o=1===e.evt.which;if((!o||i.scrollEnabled)&&(o||i.zoomEnabled))switch(t.state){case p.GestureState.STARTED:i.rootDiv.addClass(a);break;case p.GestureState.FINISHED:i.rootDiv.removeClass(a);break;case p.GestureState.CONTINUED:var r=t.moveOffset.y,n=o?this.scrollOnPixels:this.zoomOnPixels;this._zoomOrScrollWithUpdate(r,n)}},n.prototype._handleMouseWheelGesture=function(t){var e;this.chart.zoomEnabled&&(e=.05*this._panel.frame.height,this._zoomOrScrollWithUpdate(t.delta*e,this.zoomOnPixels))},n.prototype._valueOffset=function(t){var e=this._panel.contentFrame;return(this.maxVisibleValue-this.minVisibleValue)/e.height*t},n.prototype._canSetVisibleValueRange=function(t,e){var i=e-t;if(i<this.minValueRange)return!1;var o=this.minAllowedValue;if(!isNaN(o)&&t<o)return!1;o=this.maxAllowedValue;if(!isNaN(o)&&o<e)return!1;var o=this._panel.autoScaledMinMaxValues(this.chartValueScale),r=this.minAllowedValueRatio,n=this.maxAllowedValueRatio;return!(!isNaN(r)&&r<(o.min-t)/i)&&!(!isNaN(n)&&n<(e-o.max)/i)},n.prototype.destroy=function(){this.chart.off(p.ChartEvent.INSTRUMENT_CHANGED,this._handleInstrumentChange)};var r,e=n;function n(t){var e=r.call(this)||this;if(e._projectionFrame=new p.Rect,e.range={},e._pixelPrice=0,e._valueScaleType=p.ScalePriceType.AUTOMATIC,e._handleInstrumentChange=function(t){e.formatter instanceof i&&e.formatter.setInstrument(t.value)},!t)throw new Error("Config is not specified.");if(t.chartPanel instanceof p.ChartPanel)return e._panel=t.chartPanel,e._projection=new p.Projection(e.chart.dateScale,e),e.loadState(t),e._updateFormatter(),e._initGestures(),e.chart.on(p.ChartEvent.LOCALE_CHANGED+".scxValueScale",function(){e._updateFormatter()},e),e.chart.on(p.ChartEvent.INSTRUMENT_CHANGED,e._handleInstrumentChange),e;throw new TypeError("Config.chartPanel must be an instance of StockChartX.ChartPanel.")}p.ChartPanelValueScale=e}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(i){"use strict";var e,t="scxPanelSplitter",o="scxHover",r="scxSplitterMove",n=(e=i.HtmlControl,__extends(a,e),Object.defineProperty(a.prototype,"topPanel",{get:function(){return this._topPanel},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"bottomPanel",{get:function(){return this._bottomPanel},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"chart",{get:function(){return this._topPanel&&this._topPanel.chart},enumerable:!0,configurable:!0}),a.getHeight=function(){return 1},a.prototype._initGestures=function(){return new i.GestureArray([new i.MouseHoverGesture({handler:this._handleMouseHoverGesture,hoverEventEnabled:!1}),new i.PanGesture({handler:this._handlePanGesture,horizontalMoveEnabled:!1}),new i.ClickGesture({handler:function(){}})],this,this.hitTest)},a.prototype._handlePanGesture=function(t){var e=this.chart;switch(e.state){case i.ChartState.USER_DRAWING:e.cancelUserDrawing();break;case i.ChartState.RESIZING_PANELS:case i.ChartState.NORMAL:break;case i.ChartState.ZOOM_IN:return;default:throw new Error("Unable to start user drawing in this chart state.")}switch(t.state){case i.GestureState.STARTED:this._prevChartState=e.state,this._isMoving=!0,e.state=i.ChartState.RESIZING_PANELS,this._startMove();break;case i.GestureState.CONTINUED:this.move(t.moveOffset.y)&&e.updateSplitter(this);break;case i.GestureState.FINISHED:this._isMoving=!1,e.state=this._prevChartState}},a.prototype._handleMouseHoverGesture=function(t,e){switch(t.state){case i.GestureState.STARTED:this._startMove();break;case i.GestureState.FINISHED:this._stopMove(),this.chart.crossHair.setPosition(e.pointerPosition)}},a.prototype._startMove=function(){this.chart.rootDiv.addClass(r),this.container.addClass(o),this._applyTheme(!0),this.chart.crossHair.hide()},a.prototype._stopMove=function(){this.chart.rootDiv.removeClass(r),this.container.removeClass(o),this._applyTheme(!1),this.chart.crossHair.show()},a.prototype.setPanels=function(t,e,i){this._topPanel=e,this._bottomPanel=i},a.prototype.invalidateTheme=function(){this._needsTheme=!0},a.prototype._applyTheme=function(t){var e=this.chart.theme.splitter,t=t?e.hoverFillColor:e.fillColor;this.container.css("background-color",t),this._needsTheme=!1},a.prototype.move=function(t){if(0===t)return!1;var e=this._topPanel,i=this._bottomPanel,o=e.chart,t=(e.frame.height+t)/o.chartPanelsContainer.totalPanelsHeight(),o=e.heightRatio-t,o=i.heightRatio+o;return!(t<e.minHeightRatio||t>e.maxHeightRatio||o<i.minHeightRatio||o>i.maxHeightRatio)&&(e.heightRatio=t,i.heightRatio=o,!0)},a.prototype.hitTest=function(t){return!!this._isMoving||e.prototype.hitTest.call(this,t)},a.prototype._createContainer=function(){return this.chart.chartPanelsContainer.container.scxAppend("div",t)},a.prototype.layout=function(t){e.prototype.layout.call(this,t),this.frame.top+=this._topPanel.chartPanelsContainer.frame.top,this._needsTheme&&this._applyTheme(!1)},a);function a(){var t=null!==e&&e.apply(this,arguments)||this;return t._isMoving=!1,t._needsTheme=!0,t}i.ChartPanelSplitter=n}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";var e,i="scxWatermark",o=(e=t.ChartPanelHtmlComponent,__extends(r,e),r.prototype._createContainer=function(){return this.chartPanel.container.scxAppend("div",i)},r);function r(){return null!==e&&e.apply(this,arguments)||this}t.ChartPanelWatermark=o}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){"use strict";var i,o="scxWatermarkContent",r="scxWatermarkSymbol",n="scxWatermarkInfo",a=".scxInstrumentWatermark",t=(i=e.ChartPanelWatermark,__extends(l,i),l.prototype.actualTheme=function(){return this.theme||this.chart.theme.chart.instrumentWatermark},l.prototype._subscribe=function(){var t=this;this.chart.on(e.ChartEvent.INSTRUMENT_CHANGED+a,function(){t.applyText()},this).on(e.ChartEvent.SHOW_INSTRUMENT_WATERMARK_CHANGED+a,function(){t.update()},this)},l.prototype._unsubscribe=function(){var t=this.chart;t&&t.off(a,this)},l.prototype._createContainer=function(){var t=i.prototype._createContainer.call(this),e=t.scxAppend("div",o);return e.scxAppend("div",r),e.scxAppend("div",n),t},l.prototype.update=function(){var t=this.chart.showInstrumentWatermark;e.HtmlUtil.setVisibility(this.container,t),t&&(this.applyText(),i.prototype.update.call(this))},l.prototype.applyText=function(){var t,e,i=this.container;!i||(t=this.chart.instrument)&&(i.find("."+r).text(t.symbol),e=t.company,t.exchange&&(e+=" - "+t.exchange),i.find("."+n).text(e))},l.prototype.applyTheme=function(){var t,e=this.container;e&&(t=this.chart.theme.chart.instrumentWatermark,e.find("."+r).scxTextStyle(t.symbol),e.find("."+n).scxTextStyle(t.details))},l);function l(){return null!==i&&i.apply(this,arguments)||this}e.InstrumentWatermark=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";i=t.ChartPanelWatermark,__extends(o,i),Object.defineProperty(o.prototype,"actualTheme",{get:function(){return this.theme||this.chartPanel.actualTheme.watermark},enumerable:!0,configurable:!0}),o.prototype.update=function(){this.applyText(),i.prototype.update.call(this)},o.prototype.applyText=function(){var t=this.container;t&&t.text(this.text)},o.prototype.applyTheme=function(){var t=this.container;t&&t.scxTextStyle(this.actualTheme.text)};var i,e=o;function o(t){var e=i.call(this,t)||this;return t&&(e.text=t.text,e.theme=t.theme),e}t.TextWatermark=e}(StockChartX=StockChartX||{}),!function(c){"use strict";var r,t;(t=r=c.SessionPeriodUnit||(c.SessionPeriodUnit={})).Minute="minute",t.Hour="hour",t.Day="day",t.Week="week",t.Month="month",t.Quarter="quarter",t.Year="year";function h(){this._periods=[]}h.getFullPeriod=function(t){if(!Array.isArray(t))return t;for(var e=1/0,i=-1/0,o=0;o<t.length;o++)var r=t[o],e=Math.min(e,r.startIndex),i=Math.max(i,r.endIndex);return{startIndex:e,endIndex:i}},h.getLimitedPeriods=function(t,e){for(var i=e.startIndex,o=e.endIndex,r=[],n=0;n<t.length;n++){var a=t[n],l=a.startIndex,a=a.endIndex;l<=o&&i<=a&&r.push({startIndex:Math.max(l,i),endIndex:Math.min(a,o)})}return r},h.getLimitedFullPeriods=function(t,e){return t.length?this.getLimitedPeriods(t,e):[e]},h.getSplittedPeriods=function(t,e){for(var i=[],o=t.length-1;0<=o;o--)for(var r=t[o],n=r.startIndex,a=r.endIndex;n<=a;a--){for(var l=a;n<l&&h.isDateInPeriods(l,e);)l--;l<a&&l--;for(var s=l;n<s&&!h.isDateInPeriods(s,e);)s--;n<s&&s++,i.unshift({startIndex:s,endIndex:l}),a=s-1}return i},h.getPeriod=function(t,e,i){if(void 0===i&&(i=0),t.length){for(var o=t.length-1,r=o,n=h.getDatePoint(t[o],e);0<=--o;){var a=h.getDatePoint(t[o],e);if(n!==a){if(!i--)return{startIndex:o+1,endIndex:r};r=o,n=a}}return i?void 0:{startIndex:0,endIndex:r}}},h.prototype.getPeriodAgoOrOlder=function(t){void 0===t&&(t=1);var e=this._dates;if(e.length){var i=this._periods,o=e[e.length-1].getTime(),r=e[e.length-1].getDay()-t;r<0&&(r+=7);for(var n=i.length-1;0<=n;n--){var a=i[n],l=e[a.startIndex];if(l.getDay()===r||l.getTime()<o-864e5*t)return a}}},h.getPeriodStartIndex=function(t,e,i){if(void 0===i&&(i=t.length-1),!(!t.length||i<0||i>t.length-1)){for(var o=h.getDatePoint(t[i],e),r=i;0<=r;r--)if(h.getDatePoint(t[r],e)!==o)return r+1;return 0}},h.getPeriodStartTime=function(t,e,i){void 0===i&&(i=1);var o=new Date(t);switch(e){case r.Minute:return o.setMinutes(o.getMinutes()-i);case r.Hour:return o.setHours(o.getHours()-i);case r.Day:return o.setDate(o.getDate()-i);case r.Week:return o.setDate(o.getDate()-7*i);case r.Month:return o.setMonth(o.getMonth()-i);case r.Quarter:return o.setMonth(o.getMonth()-3*i);case r.Year:return o.setFullYear(o.getFullYear()-i)}},h.getPeriodTimeInterval=function(t){switch(t){case r.Minute:return c.TimeSpan.MILLISECONDS_IN_MINUTE;case r.Hour:return c.TimeSpan.MILLISECONDS_IN_HOUR;case r.Day:return c.TimeSpan.MILLISECONDS_IN_DAY;case r.Week:return c.TimeSpan.MILLISECONDS_IN_WEEK;case r.Month:return c.TimeSpan.MILLISECONDS_IN_MONTH;case r.Quarter:return 3*c.TimeSpan.MILLISECONDS_IN_MONTH;case r.Year:return c.TimeSpan.MILLISECONDS_IN_YEAR}},h.getDatePoint=function(t,e){switch(e){case r.Minute:return t.getMinutes();case r.Hour:return t.getHours();case r.Day:return t.getDate();case r.Week:var i=h.getTimeZoneTime(t)+4*c.TimeSpan.MILLISECONDS_IN_DAY;return Math.floor(i/c.TimeSpan.MILLISECONDS_IN_WEEK);case r.Month:return t.getMonth();case r.Quarter:return Math.floor(t.getMonth()/3);case r.Year:return t.getFullYear()}},h.sessionToPeriods=function(t,e){var i=[];if(!e||!e.workingTimes.length)return i;for(var o=t.length-1;0<=o;)if(h.isDateInSession(t[o],e)){for(var r=o,n=t[o].getDate();0<=--o&&n===t[o].getDate()&&h.isDateInSession(t[o],e););i.unshift({startIndex:o+1,endIndex:r})}else--o;return i},h.getTimeZoneTime=function(t){return t.getTime()-h.getTimeZoneOffset(t)},h.getTimeZoneOffset=function(t){return t.getTimezoneOffset()*c.TimeSpan.MILLISECONDS_IN_MINUTE},h.isDateInPeriods=function(t,e){if(!e.length)return!1;for(var i=0;i<e.length;i++){var o=e[i],r=o.startIndex,o=o.endIndex;if(r<t&&t<=o)return!0}return!1},h.isDateInSession=function(t,e){for(var t=moment.tz(t,e.timezoneId)._d,i=t.getTime()%c.TimeSpan.MILLISECONDS_IN_DAY,o=t.getUTCDay(),r=0;r<e.workingTimes.length;r++){var n=e.workingTimes[r],a=n.startDay,l=n.startTime,s=n.endDay,n=n.endTime;if(a<=o&&o<=s&&(l<=i&&i<=n))return!0}return!1},Object.defineProperty(h.prototype,"workingTimes",{get:function(){return this._session},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"periods",{get:function(){return this._periods},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"chart",{get:function(){return this._chart},set:function(t){this._chart=t},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"_dates",{get:function(){return this._chart.dataManager.getDataSeries(c.DataSeriesSuffix.DATE).values},enumerable:!0,configurable:!0}),h.prototype.setWorkingTimes=function(t){t&&Array.isArray(t.workingTimes)&&(this.session=t,this._periods=h.sessionToPeriods(this._dates,t))},h.prototype.getPeriod=function(t){void 0===t&&(t=0);var e=this._dates;if(e.length){var i=this._periods,o=e[e.length-1].getDay()-t;o<0&&(o+=7);for(var r=i.length-1;0<=r;r--){var n=i[r];if(e[n.startIndex].getDay()===o)return n}}},h.prototype.getInitialPeriod=function(){var t=this.getPeriod();if(t){for(var e=this._dates[t.startIndex].getTime(),i=t.startIndex;this._dates[i].getTime()<e+36e5;)i++;return{startIndex:t.startIndex,endIndex:i}}},c.Session=h}(StockChartX=StockChartX||{}),!function(s){function c(){}c.verificationFrame=function(t,e,i){if(null==e||null==i)return!1;var o=e.getFullYear()===i.getFullYear(),r=e.getMonth()===i.getMonth();switch(t){case s.Duration.DAY:return e.getDate()===i.getDate()&&r&&o;case s.Duration.WEEKLY:return c._verificationInOneWeek(e,i);case s.Duration.MONTHLY:return r&&o;case s.Duration.QUARTERLY:for(var n=e.getMonth(),a=i.getMonth(),l=0;l<12;l+=3)if(l<=n&&n<=l+2&&l<=a&&a<=l+2&&o)return!0;return!1;case s.Duration.ANNUALY:return o;default:return!1}},c._verificationInOneWeek=function(t,e){var i=(e.getTime()-t.getTime())/1e3/60/60/24;return!(i<-7||7<i)&&(0<=i?e.getDay()>=t.getDay():t.getDay()>e.getDay())},s.Frame=c}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(d){"use strict";d.PlotType={INDICATOR:"indicator",PRICE_STYLE:"priceStyle",USER:"user"},Object.freeze(d.PlotType),(t=i=d.PlotEvent||(d.PlotEvent={})).DATA_SERIES_CHANGED="plotDataSeriesChanged",t.PANEL_CHANGED="plotPanelChanged",t.THEME_CHANGED="plotThemeChanged",t.STYLE_CHANGED="plotStyleChanged",t.SHOW_VALUE_MARKERS_CHANGED="plotShowValueMarkersChanged",t.SHOW_VALUE_LINES_CHANGED="plotShowValueLinesChanged",t.EXTEND_VALUE_LINES_CHANGED="plotExtendValueLinesChanged",t.VISIBLE_CHANGED="plotVisibleChanged",t.VALUE_SCALE_CHANGED="plotValueScaleChanged",t.BASE_VALUE_CHANGED="plotBaseValueChanged";o=d.ChartPanelObject,__extends(e,o),Object.defineProperty(e.prototype,"plotThemeKey",{get:function(){return this._plotThemeKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataSeries",{get:function(){return this._dataSeries},set:function(t){this.setDataSeries(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"theme",{get:function(){return this._theme},set:function(t){var e=this._theme;this._theme=t,this.fire(i.THEME_CHANGED,t,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actualTheme",{get:function(){return this._theme||this.chart.theme.plot[this._plotThemeKey][this.plotStyle]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"plotStyle",{get:function(){var t=this._options.plotStyle;if(t)return t;t=this.constructor.defaults;return t&&t.plotStyle},set:function(t){this._setOption("plotStyle",t,i.STYLE_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showValueMarkers",{get:function(){return this._options.showValueMarkers},set:function(t){this._setOption("showValueMarkers",t,i.SHOW_VALUE_MARKERS_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showValueLines",{get:function(){return this._options.showValueLines},set:function(t){this._setOption("showValueLines",t,i.SHOW_VALUE_LINES_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extendValueLines",{get:function(){return this._options.extendValueLines},set:function(t){this._setOption("extendValueLines",t,i.EXTEND_VALUE_LINES_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"plotType",{get:function(){return this._plotType},enumerable:!0,configurable:!0}),e.prototype.update=function(){},e.prototype.setDataSeries=function(t){var e;if(t instanceof d.DataSeries)e=[t];else{if(!Array.isArray(t))throw new TypeError("Single data series or an array of data series expected.");e=t}t=this._dataSeries;t!==e&&(this._dataSeries=e,this.fire(i.DATA_SERIES_CHANGED,e,t))},e.prototype._onChartPanelChanged=function(t){this.fire(i.PANEL_CHANGED,this.chartPanel,t)},e.prototype._onValueScaleChanged=function(t){this.fire(i.VALUE_SCALE_CHANGED,this.valueScale,t)},e.prototype._onVisibleChanged=function(t){this.fire(i.VISIBLE_CHANGED,this.visible,t)},e.prototype.findDataSeries=function(t){for(var e=0,i=this._dataSeries;e<i.length;e++){var o=i[e];if(o.nameSuffix===t)return o}return null},e.prototype.minMaxValues=function(t,e){for(var i=1/0,o=-1/0,r=0,n=this._dataSeries;r<n.length;r++){var a=n[r];a.isValueDataSeries&&((a=a.minMaxValues(t,e)).min<i&&(i=a.min),a.max>o&&(o=a.max))}return{min:i,max:o}},e.prototype._valueDrawParams=function(){var t=this.chart,e=this._dataSeries[0],i=this.findDataSeries(d.DataSeriesSuffix.DATE),o=this.projection,t=(n=i?(n=t.dateScale.visibleDateRange,r=i.floorIndex(n.min),i.ceilIndex(n.max)):(r=t.firstVisibleIndex,t.lastVisibleIndex),Math.max(e.leftNearestVisibleValueIndex(r)-1,0)),r=Math.min(e.rightNearestVisibleValueIndex(n)+1,e.length-1),n=i?0:o.columnByRecord(t);return{renderer:this.renderer,projection:o,dates:i&&i.values,values:e.values,startIndex:t,endIndex:r,startColumn:n,theme:this.actualTheme}},e.prototype._barDrawParams=function(t){void 0===t&&(t=!0);for(var e=this.chart,i=this._dataSeries,o=this.projection,r=e.dataManager.getDataSeries(d.DataSeriesSuffix.DATE),n=null,a=null,l=null,s=null,c=0,h=i;c<h.length;c++){var u=h[c];switch(u.nameSuffix){case d.DataSeriesSuffix.DATE:r=u;break;case d.DataSeriesSuffix.OPEN:n=u;break;case d.DataSeriesSuffix.HIGH:a=u;break;case d.DataSeriesSuffix.LOW:l=u;break;case d.DataSeriesSuffix.CLOSE:s=u}}t=t&&r?(i=e.dateScale.visibleDateRange,f=r.floorIndex(i.min),r.ceilIndex(i.max)):(f=e.firstVisibleIndex,e.lastVisibleIndex);var i=Math.max(r.leftNearestVisibleValueIndex(f)-1,0),e=Math.min(r.rightNearestVisibleValueIndex(t)+1,r.length-1),f=o.columnByRecord(i);return{renderer:this.renderer,projection:o,values:this._dataSeries[0].values,dates:r&&r.values,open:n&&n.values,high:a&&a.values,low:l&&l.values,close:s&&s.values,startIndex:i,endIndex:e,startColumn:f,theme:this.actualTheme}},e.prototype.drawValueMarkers=function(){var t,e,i,o,r;this.showValueMarkers&&(e=(t=this._dataSeries[0]).values,o=this.chart.valueMarker,t=e[t.leftNearestVisibleValueIndex(e.length)],e=o.theme,(i=this.actualTheme).valueMarker?e=i.valueMarker:(r=void 0,r=i.strokeColor||(i.fill&&!1!==i.fill.fillEnabled?i.fill.linearGradient?i.fill.linearGradient[0]||i.fill.linearGradient[0].color:i.fill.radialGradient?i.fill.radialGradient[0].color:i.fill.fillColor:i.line&&!1!==i.line.strokeEnabled?i.line.strokeColor:e.fill.fillColor),e.fill.fillColor=r,e.text.fillColor=d.HtmlUtil.isDarkColor(r)?"white":"black"),o.draw(t,this.panelValueScale,e),this.showValueLines&&null!=t&&(r=this._dataSeries[0].length-1,o=i.valueLine,(r=new d.ValueLine({point:{record:.5+r,value:t},theme:{strokeColor:o&&i.valueLine.strokeColor||e.fill.fillColor,width:o&&i.valueLine.width||1,lineStyle:o&&o.lineStyle||d.LineStyle.DASH},extended:this.extendValueLines,visible:this.showValueLines})).chartPanel=this.chartPanel,r.valueScale=this.valueScale,r.draw()))};var i,o,t=e;function e(t){var e=o.call(this,t)||this,i=(e._plotThemeKey="",e._dataSeries=[],e._plotType=d.PlotType.USER,e.suppressEvents(!0)),t=(t&&(null!=t.dataSeries&&e.setDataSeries(t.dataSeries),null!=t.chartPanel&&(e.chartPanel=t.chartPanel),null!=t.theme&&(e.theme=t.theme),t.plotType&&(e._plotType=t.plotType),t.options&&(e._options=t.options),t.valueScale&&(e.valueScale=t.valueScale),e.plotStyle=t.plotStyle,t.zIndex&&(e.zIndex=t.zIndex)),e._options);return null==t.showValueMarkers&&(t.showValueMarkers=!0),null==t.visible&&(t.visible=!0),null==e.zIndex&&(e.zIndex=e.plotType===d.PlotType.PRICE_STYLE?30:100),e.suppressEvents(i),e}d.Plot=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(h){"use strict";o=h.Plot,__extends(e,o),Object.defineProperty(e.prototype,"settings",{get:function(){return this._settings},set:function(t){var t=h.JsUtil.merge(this._settings,t),e=!!this._handleSettings(t);this._settings=t,this.chart&&this.chart.setNeedsUpdate(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rigthMargin",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_dates",{get:function(){var t=this.chart;return t?t.dataManager.getDataSeries(h.DataSeriesSuffix.DATE).values:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_canvasWidth",{get:function(){var t=this.chart.container,e=this.chartPanel.layer.size,t=t.find("."+this.valueScale.rightPanelCssClass).outerWidth();return e.width-t-this.chart.getTradingPanelWidth()},enumerable:!0,configurable:!0}),e.prototype.update=function(){this._handleSettings(this.settings)},e.prototype.drawValueMarkers=function(){var e=this,i=(o.prototype.drawValueMarkers.call(this),this.chart.valueMarker);this._labelLines.forEach(function(t){i.theme.fill.fillColor=t.color,i.draw(t.value,e.panelValueScale)})},e.prototype._handleSettings=function(t){},e.prototype._onChartPanelChanged=function(t){var e=this.chart;e&&(this._rth.chart=e,this._eth.chart=e,this.update(),this._settingsHandled=!0,o.prototype._onChartPanelChanged.call(this,t))},e.prototype._getSizeInPixels=function(t){switch(t.unit){case h.IndicatorSizeUnit.Pixel:return t.value;case h.IndicatorSizeUnit.Percent:return t.value*this._canvasWidth/100}},e.prototype._drawLine=function(t,e,i,o){void 0===o&&(o=null),Array.isArray(t)||(t=[t]);for(var r=this.renderer,n=0;n<t.length;n++){var a=t[n],l=Array.isArray(e)?e[n]:e,s=Array.isArray(i)?i[n]:i;r.line(l,a,s,a)}r.stroke(o),r.closePath(),r.beginPath()},e.prototype._drawLabelLines=function(){var e=this;this._labelLines.forEach(function(t){e._drawLabelLine(t.label,t.y,t.color,t.width||200)})},e.prototype.getLabelTheme=function(){return this.chart.valueMarker.theme.text},e.prototype._drawLabelLine=function(t,e,i,o){void 0===o&&(o=200);var r={fillColor:i},i={strokeColor:i,lineStyle:h.LineStyle.DASH},n=this.getLabelTheme(),a=this.renderer,l=(a.textTheme(n),a.textOptions({align:h.TextAlign.CENTER,baseline:h.TextBaseline.MIDDLE}),a.textWidth(t)+8),s=this._canvasWidth,c=s-l-this.rigthMargin;a.rect(c,e-8,l,16),a.fill(r),a.fillText(t,c+l/2,e,n),a.closePath(),a.beginPath(),this._drawPrevLabelLine({renderer:a,y:e,lineEndX:c,endX:s,width:o,strokeTheme:i}),a.closePath(),a.beginPath()},e.prototype._drawPrevLabelLine=function(t){var e=t.renderer,i=t.endX,o=t.width,r=t.y,n=t.lineEndX,t=t.strokeTheme;e.line(i-o,r,n,r),e.stroke(t),e.closePath(),e.beginPath()},e.prototype._isValidDetails=function(t){return Array.isArray(t)&&0<t.length};var o,t=e;function e(){var t=null!==o&&o.apply(this,arguments)||this;return t._settingsHandled=!1,t._rth=new h.Session,t._eth=new h.Session,t._labelLines=[],t}h.AdvancedPlot=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(P){"use strict";(t=e=P.PlotEvent||(P.PlotEvent={})).COLUMN_WIDTH_RATIO_CHANGED="plotColumnWidthRatioChanged",t.MIN_WIDTH_CHANGED="plotMinWidthChanged",P.BarPlotStyle={OHLC:"OHLC",COLORED_OHLC:"coloredOHLC",HLC:"HLC",COLORED_HLC:"coloredHLC",HL:"HL",COLORED_HL:"coloredHL",CANDLE:"candle",HOLLOW_CANDLE:"hollowCandle",HEIKIN_ASHI:"heikinAshi",RENKO:"renko",LINE_BREAK:"lineBreak",POINT_AND_FIGURE:"pointAndFigure",KAGI:"kagi",CANDLE_VOLUME:"candleVolume",EQUI_VOLUME:"equiVolume",EQUI_VOLUME_SHADOW:"equiVolumeShadow"},Object.freeze(P.BarPlotStyle),n=P.Plot,__extends(m,n),Object.defineProperty(m.prototype,"columnWidthRatio",{get:function(){return this._options.columnWidthRatio||m.defaults.columnWidthRatio},set:function(t){if(P.JsUtil.isNegativeNumber(t)||1<t)throw new Error("Ratio must be in range [0..1]");this._setOption("columnWidthRatio",t,e.COLUMN_WIDTH_RATIO_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"minWidth",{get:function(){return this._options.minWidth||m.defaults.minWidth},set:function(t){if(!P.JsUtil.isPositiveNumber(t))throw new Error("Min width must be greater than 0.");this._setOption("minWidth",t,e.MIN_WIDTH_CHANGED)},enumerable:!0,configurable:!0}),m.prototype.draw=function(){if(this.visible){var t=P.BarPlotStyle;switch(this.plotStyle){case t.OHLC:case t.HLC:case t.HL:this._drawBars();break;case t.COLORED_OHLC:case t.COLORED_HLC:case t.COLORED_HL:this._drawColoredBars();break;case t.HOLLOW_CANDLE:this._drawHollowCandles();break;case t.RENKO:this._drawBricks(!0);break;case t.LINE_BREAK:this._drawBricks();break;case t.KAGI:this._drawKagi();break;case t.CANDLE_VOLUME:this._drawVolumeCandles();break;case t.EQUI_VOLUME:this._drawEquiVolumeCandles();break;case t.EQUI_VOLUME_SHADOW:this._drawEquiVolumeShadowCandles();break;default:this._drawCandles()}}},m.prototype.drawValueMarkers=function(){var t,e,i,o,r;!this.showValueMarkers||0!==(r=this._barDrawParams()).values.length&&(o=this.chart.valueMarker,t=this._valueMarkerTheme(r),e=r.values.length-1,i=r.close[e],o.draw(i,this.panelValueScale,t),this.showValueLines&&null!=i&&(o=r.theme.valueLine,(r=new P.ValueLine({point:{record:.5+e,value:i},theme:{strokeColor:o&&o.strokeColor||t.fill.fillColor,width:o&&o.width||1,lineStyle:o&&o.lineStyle||P.LineStyle.DASH},extended:this.extendValueLines,visible:this.showValueLines})).chartPanel=this.chartPanel,r.valueScale=this.valueScale,r.draw()))},m.prototype._barDrawParams=function(t){var e,i,o,r,t=n.prototype._barDrawParams.call(this,t=void 0===t?!0:t);return this._indicator&&(e=(r=this._indicator).open,i=r.high,o=r.low,r=r.close,t.open=e.values.slice(),t.high=i.values.slice(),t.low=o.values.slice(),t.close=r.values.slice(),t.open.shift(),t.high.shift(),t.low.shift(),t.close.shift(),t.values=t.close),t},m.prototype._valueMarkerTheme=function(t){var e=t.theme,i=e.valueMarker;if(i)return i;var o=t.values.length-1;if(t.close[o]>=t.open[o]){if(i=e.upCandle&&e.upCandle.valueMarker)return i}else if(i=e.downCandle&&e.downCandle.valueMarker)return i;o=this._getMarkerFillColor(t);return(i=this.chart.valueMarker.theme).fill.fillColor=o,i.text.fillColor=P.HtmlUtil.isDarkColor(o)?"white":"black",i},m.prototype._getMarkerFillColor=function(t){var e=t.values.length-1,i=t.close[e]>=t.open[e],e=P.BarPlotStyle;switch(this.plotStyle){case e.OHLC:case e.HLC:case e.HL:return t.theme.strokeColor;case e.COLORED_OHLC:case e.COLORED_HLC:case e.COLORED_HL:return t.theme[i?"upBar":"downBar"].strokeColor;case e.CANDLE:case e.HOLLOW_CANDLE:case e.HEIKIN_ASHI:case e.RENKO:case e.CANDLE_VOLUME:case e.EQUI_VOLUME:case e.EQUI_VOLUME_SHADOW:return t.theme[i?"upCandle":"downCandle"].fill.fillColor;case e.LINE_BREAK:return i?t.theme.upCandle.border.strokeColor:t.theme.downCandle.fill.fillColor;case e.POINT_AND_FIGURE:case e.KAGI:return t.theme[i?"upCandle":"downCandle"].border.strokeColor;default:return null}},m.prototype._drawBars=function(){var t=this._barDrawParams();if(0!==t.values.length){var e=t.renderer,i=t.projection,o=t.dates,r=0,n=this.plotStyle,a=n===m.Style.OHLC,l=n===m.Style.HLC;!a&&!l||(n=this.chart.dateScale.columnWidth*this.columnWidthRatio)>this.minWidth&&(r=Math.round(n/2)),e.beginPath();for(var s=t.startIndex,c=t.startColumn;s<=t.endIndex;s++,c++){var h,u=t.open[s],f=t.high[s],d=t.low[s],p=t.close[s];null!=u&&null!=f&&null!=d&&null!=p&&(h=o?i.xByDate(o[s]):i.xByColumn(c),f=i.yByValue(f),d=i.yByValue(d),a&&0<r&&(u=i.yByValue(u),e.horLine(h,h-r,u)),(a||l)&&0<r&&(u=i.yByValue(p),e.horLine(h,h+r,u)),f===d&&d--,e.verLine(h,f,d+P.CanvasOffset))}e.stroke(t.theme)}},m.prototype._drawColoredBars=function(){var t=this._barDrawParams();0!==t.values.length&&(this._drawColoredBarItems(t,!0,t.theme.upBar),this._drawColoredBarItems(t,!1,t.theme.downBar))},m.prototype._drawColoredBarItems=function(t,e,i){var o=t.renderer,r=t.projection,n=this.plotStyle,a=n===m.Style.COLORED_OHLC,l=n===m.Style.COLORED_HLC,s=0;(a||l)&&(n=this.chart.dateScale.columnWidth*this.columnWidthRatio)>this.minWidth&&(s=Math.round(n/2)),o.beginPath();for(var c=t.startIndex,h=t.startColumn;c<=t.endIndex;c++,h++){var u,f=t.open[c],d=t.high[c],p=t.low[c],y=t.close[c];null!=f&&null!=d&&null!=p&&null!=y&&e===f<=y&&(u=t.dates?r.xByDate(t.dates[c]):r.xByColumn(h),d=r.yByValue(d),p=r.yByValue(p),a&&0<s&&(f=r.yByValue(f),o.horLine(u+P.CanvasOffset,u-s+P.CanvasOffset,f)),(a||l)&&0<s&&(f=r.yByValue(y),o.horLine(u+P.CanvasOffset,u+s+P.CanvasOffset,f)),d===p&&p--,o.verLine(u,d+P.CanvasOffset,p+P.CanvasOffset))}o.stroke(i)},m.prototype._drawCandles=function(){var t,e,i=this._barDrawParams();0!==i.values.length&&(t=i.theme.downCandle.border.strokeEnabled,e=i.theme.upCandle.border.strokeEnabled,this._drawCandleItems(i,!0,!0,e),this._drawCandleItems(i,!1,!0,t),this._drawCandleItems(i,!0,!1,e),this._drawCandleItems(i,!1,!1,t))},m.prototype._drawCandleItems=function(t,e,i,o){var r=t.renderer,n=t.theme.upCandle,a=t.theme.downCandle,l=t.projection,s=this.chart.dateScale.columnWidth,c=Math.max(s*this.columnWidthRatio,this.minWidth),s=t.startIndex,h=t.startColumn,u=t.endIndex,f=t.open,d=t.high,p=t.low,y=t.close,m=Math.round(c/2),c=2*m;r.beginPath();for(var _=s,C=h;_<=u;_++,C++){var g,b=f[_],S=d[_],v=p[_],w=y[_];null!=b&&null!=S&&null!=v&&null!=w&&e===b<=w&&(g=t.dates?l.xByDate(t.dates[_]):l.xByColumn(C),b=l.yByValue(b),(w=l.yByValue(w))===b&&b--,i?c<3?r.verLine(g,w,b):o?r.rect(g-m,Math.min(b,w),c,Math.max(Math.abs(b-w),1)):r.rect(g-m+P.CanvasOffset,Math.min(b,w)+P.CanvasOffset,c-2*P.CanvasOffset,Math.max(Math.abs(b-w),1)):(S=l.yByValue(S),v=l.yByValue(v),c<3?(r.verLine(g,Math.min(b,w),S),r.verLine(g,Math.max(b,w),v)):(o?r.verLine(g,Math.min(b,w)-2*P.CanvasOffset,S-P.CanvasOffset):r.verLine(g,Math.min(b,w+P.CanvasOffset),S+P.CanvasOffset),r.verLine(g,Math.max(b,w)+P.CanvasOffset,v+P.CanvasOffset))))}s=e?n:a;i?c<3?(h={strokeColor:s.fill.fillColor},r.stroke(h)):r.fillStroke(s.fill,s.border):r.stroke(s.wick)},m.prototype._drawHollowCandles=function(){var t,e,i,o,r,n=this._barDrawParams();0!==n.values.length&&(t=n.renderer,e=n.theme.upCandle,i=n.theme.downCandle,o=n.theme.upHollowCandle,r=n.theme.downHollowCandle,this._drawHollowCandleItems(n,!0,!0,!1,!1),t.stroke(o.border),this._drawHollowCandleItems(n,!0,!0,!0,!1),t.stroke(o.wick),this._drawHollowCandleItems(n,!0,!1,!1,!1),t.fillStroke(e.fill,e.border),this._drawHollowCandleItems(n,!0,!1,!1,!0),t.stroke(e.wick),this._drawHollowCandleItems(n,!1,!0,!1,!1),t.stroke(r.border),this._drawHollowCandleItems(n,!1,!0,!0,!1),t.stroke(r.wick),this._drawHollowCandleItems(n,!1,!1,!1,!1),t.fillStroke(i.fill,i.border),this._drawHollowCandleItems(n,!1,!1,!1,!0),t.stroke(i.wick))},m.prototype._drawHollowCandleItems=function(t,e,i,o,r){for(var n=t.renderer,a=t.projection,l=null,s=this.chart.dateScale.columnWidth,c=Math.max(s*this.columnWidthRatio,3),h=Math.round(c/2),c=2*h,u=Math.round(Math.max(c,3)-2*P.CanvasOffset),f=Math.round(u/2)-2*P.CanvasOffset,d=t.startIndex-1;0<=d;d--)if(null==t.open[d]&&null==t.high[d]&&null==t.low[d]&&null==t.close[d]){l=t.close[d];break}n.beginPath();for(var p=t.startIndex,y=t.startColumn;p<=t.endIndex;p++,y++){var m,_=t.open[p],C=t.high[p],g=t.low[p],b=t.close[p];null!=_&&null!=C&&null!=g&&null!=b&&(m=(l=null==l?_:l)<=b,l=b,e===m&&i===_<b&&(m=t.dates?a.xByDate(t.dates[p]):a.xByColumn(y),_=a.yByValue(_),b=a.yByValue(b),o||r?(C=a.yByValue(C),g=a.yByValue(g),o?(n.verLine(m,Math.min(_,b),C),n.verLine(m,Math.max(_,b),g)):(n.verLine(m,Math.min(_,b)+P.CanvasOffset,C+P.CanvasOffset),n.verLine(m,Math.max(_,b)+P.CanvasOffset,g+P.CanvasOffset))):i?n.rect(m-f,Math.min(_,b),u-2*P.CanvasOffset,Math.max(Math.abs(_-b),1)):n.rect(m-h+P.CanvasOffset,Math.min(_,b)+P.CanvasOffset,c-2*P.CanvasOffset,Math.max(Math.abs(_-b),1))))}},m.prototype._drawBricks=function(t){var e=this._barDrawParams();0!==e.values.length&&(this._drawBrickItems(e,!0,t),this._drawBrickItems(e,!1,t))},m.prototype._drawBrickItems=function(t,e,i){var o=t.renderer,r=t.projection,n=this.chart.dateScale.columnWidth,a=Math.max(n*this.columnWidthRatio,this.minWidth),l=Math.round(a/2);o.beginPath();for(var s=t.startIndex,c=t.startColumn;s<=t.endIndex;s++,c++){var h=t.open[s],u=t.close[s],f=h<=u,a=2*l;null==h||null==u||e&&!f||!e&&f||(f=t.dates?r.xByDate(t.dates[s]):r.xByColumn(c),h=r.yByValue(h),(u=r.yByValue(u))===h&&h--,a<3?o.verLine(f,u,h):o.rect(f-l+P.CanvasOffset,Math.min(h,u)+P.CanvasOffset,a,Math.max(Math.abs(h-u),1)))}var d,n=e?t.theme.upCandle:t.theme.downCandle;a<3?(d={strokeColor:n.fill.fillColor},o.stroke(d)):o.fillStroke(n.fill,n.border)},m.prototype._drawKagi=function(){var t=this._barDrawParams();0!==t.values.length&&(this._drawKagiItems(t,!0),this._drawKagiItems(t,!1))},m.prototype._drawKagiItems=function(t,e){var i=t.renderer,o=t.projection,r=null,n=null,a=!1,l=null;i.beginPath();for(var s=0;s<=t.endIndex;s++){var c,h=t.open[s],u=t.close[s],f=h,d=u,p=!0;null!=h&&null!=u&&(null===n?(n=h<=u,p=!1):n?u<l&&(a=!0,f=(p=e)?h:l,d=e?l:u):l<u&&(a=!0,p=!e,f=e?l:h,d=e?u:l),c=t.dates?o.xByDate(t.dates[s]):o.xByRecord(s),s>=t.startIndex&&(n===e||a)&&(f=o.yByValue(f),d=o.yByValue(d),p?i.horLine(r,c,f):i.moveTo(c,f),i.lineTo(c,d)),r=c,l=n?a?Math.max(h,u):Math.min(h,u):a?Math.min(h,u):Math.max(h,u),a&&(n=!n,a=!1))}var y=t.theme[e?"upCandle":"downCandle"].border;i.stroke(y)},m.prototype._drawVolumeCandles=function(){var t,e,i=this._barDrawParams();0!==i.values.length&&(t=i.theme.downCandle.border.strokeEnabled,e=i.theme.upCandle.border.strokeEnabled,this._drawVolumeCandlesItems(i,!0,!0,!0,!1),this._drawVolumeCandlesItems(i,!1,!0,!0,!1),this._drawVolumeCandlesItems(i,!0,!0,!1,e),this._drawVolumeCandlesItems(i,!1,!0,!1,t),this._drawVolumeCandlesItems(i,!0,!1,!1,e),this._drawVolumeCandlesItems(i,!1,!1,!1,t))},m.prototype._drawVolumeCandlesItems=function(t,e,i,o,r){var n=t.renderer,a=t.theme.upCandle,l=t.theme.downCandle,s=t.projection,c=this.chart.dateScale.columnValues;n.beginPath();for(var h=t.startIndex,u=t.startColumn;h<=t.endIndex;h++,u++){var f,d,p=t.open[h],y=t.high[h],m=t.low[h],_=t.close[h];null!=p&&null!=y&&null!=m&&null!=_&&e===p<=_&&(f=t.dates?s.xByDate(t.dates[h]):s.xByColumn(u),p=s.yByValue(p),_=s.yByValue(_),d=Math.round(c.widths[h]),_===p&&p--,i?d<3&&o?n.verLine(f,_,p):3<=d&&!1===o&&(r?d%2==1?n.rect(f-d/2+P.CanvasOffset,Math.min(p,_),d-2*P.CanvasOffset,Math.max(Math.abs(p-_),1)):n.rect(f-d/2,Math.min(p,_),d,Math.max(Math.abs(p-_),1)):d%2==1?n.rect(f-d/2,Math.min(p,_)+P.CanvasOffset,d,Math.max(Math.abs(p-_),1)):n.rect(f-d/2+P.CanvasOffset,Math.min(p,_)+P.CanvasOffset,d-2*P.CanvasOffset,Math.max(Math.abs(p-_),1))):(y=s.yByValue(y),m=s.yByValue(m),d<3?(n.verLine(f,Math.min(p,_),y),n.verLine(f,Math.max(p,_),m)):(r?n.verLine(f,Math.min(p,_)-2*P.CanvasOffset,y-P.CanvasOffset):n.verLine(f,Math.min(p,_+P.CanvasOffset),y+P.CanvasOffset),n.verLine(f,Math.max(p,_)+P.CanvasOffset,m+P.CanvasOffset))))}a=e?a:l;i?o?(l={strokeColor:a.fill.fillColor},n.stroke(l)):!1===o&&n.fillStroke(a.fill,a.border):n.stroke(a.wick)},m.prototype._drawEquiVolumeCandles=function(){var t,e,i=this._barDrawParams(!1);0!==i.values.length&&(t=i.theme.downCandle.border.strokeEnabled,e=i.theme.upCandle.border.strokeEnabled,this._drawEquiVolumeItems(i,!0,!0,!1),this._drawEquiVolumeItems(i,!1,!0,!1),this._drawEquiVolumeItems(i,!0,!1,e),this._drawEquiVolumeItems(i,!1,!1,t))},m.prototype._drawEquiVolumeItems=function(t,e,i,o){var r=t.renderer,n=t.theme.upCandle,a=t.theme.downCandle,l=t.projection,s=this.chart.dateScale.columnValues;r.beginPath();for(var c=t.startIndex,h=t.startColumn;c<=t.endIndex;c++,h++){var u,f=t.open[c],d=t.high[c],p=t.low[c],y=t.close[c];null!=f&&null!=d&&null!=p&&null!=y&&e===f<=y&&(f=t.dates?l.xByDate(t.dates[c]):l.xByColumn(h),(y=l.yByValue(p))===(p=l.yByValue(d))&&y--,(d=Math.round(s.widths[c]))<3&&i&&r.verLine(f,y,p),!1===i&&3<=d&&(o?(u=Math.trunc(f-d/2),r.rect(u,y,d,p-y)):d%2==1?r.rect(f-d/2,y+P.CanvasOffset,d,p-y):r.rect(f-d/2+P.CanvasOffset,y+P.CanvasOffset,d-2*P.CanvasOffset,p-y)))}n=e?n:a;i?(a={strokeColor:n.fill.fillColor},r.stroke(a)):r.fillStroke(n.fill,n.border)},m.prototype._drawEquiVolumeShadowCandles=function(){var t=this._barDrawParams();0!==t.values.length&&(this._drawEquiVolumeShadowItems(t,!0,!1,!0),this._drawEquiVolumeShadowItems(t,!1,!1,!0),this._drawEquiVolumeShadowItems(t,!0,!0,!1),this._drawEquiVolumeShadowItems(t,!1,!0,!1))},m.prototype._drawEquiVolumeShadowItems=function(t,e,i,o){var r=t.renderer,n=t.theme.upCandle,a=t.theme.downCandle,l=t.projection,s=this.chart.dateScale.columnValues;r.beginPath();for(var c=t.startIndex,h=t.startColumn;c<=t.endIndex;c++,h++){var u,f,d=t.open[c],p=t.high[c],y=t.low[c],m=t.close[c];null!=d&&null!=p&&null!=y&&null!=m&&e===d<=m&&(m=Math.round(s.widths[c])-1,u=t.dates?l.xByDate(t.dates[c]):l.xByColumn(h),y=l.yByValue(y),p=l.yByValue(p),d=l.yByValue(d),y===p&&y--,m<3&&o&&r.verLine(u,y,p),i&&3<=m&&(f=Math.trunc(u-m/2),r.rect(f,y,m,p-y)),3<=m&&(f=Math.trunc(u-m/2),e?r.rect(f,d,m,y-d):r.rect(f,d,m,p-d)))}var _,n=e?n:a;o&&(_={strokeColor:n.fill.fillColor},r.stroke(_)),i?(_={strokeColor:n.fill.fillColor},r.stroke(_)):r.fillStroke(n.fill,n.border)},m.Style=P.BarPlotStyle,m.defaults={plotStyle:P.BarPlotStyle.CANDLE,minWidth:1,columnWidthRatio:.8};var e,n,t=m;function m(t){var e=n.call(this,t)||this;return t&&t.indicator&&(e._indicator=t.indicator),e._plotThemeKey="bar",e}P.BarPlot=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(i){"use strict";var o,t=i.BarStatsPlotStyle||(i.BarStatsPlotStyle={}),t=(t.TABLE="table",o=i.AdvancedPlot,__extends(e,o),Object.defineProperty(e.prototype,"settings",{get:function(){return this._settings},set:function(i){var o=!1,t=i.groupsTradeVolumeFilter.length-this._settings.groupsTradeVolumeFilter.length;0!=t?(0<t?this._addNewTables(t):(this.table.deleteTable(Math.abs(t)),this._valueMaps.splice(0,Math.abs(t))),o=!0):this._settings.groupsTradeVolumeFilter.forEach(function(t,e){t=t,e=i.groupsTradeVolumeFilter[e],t.max==e.max&&t.min==e.min||(o=!0)}),this._settings=$.extend(this._settings,i),this.setupTable(),o&&this.calcAllValue()},enumerable:!0,configurable:!0}),e.prototype._addNewTables=function(t){this.table.addNewTables(t);for(var e=0;e<t;e++){var i=r();this._valueMaps.push(i)}},e.prototype.setupTable=function(){var t=Object.entries(this._settings.groupsRows).filter(function(t){t[0];return!1!==t[1].enabled}).sort(function(t,e){t=t[1],e=e[1];return t.order-e.order});this.table.titles=t.map(function(t,e){return t[0]}),this.table.settings=this._settings.general,this.table.rowsSettings=this._settings.groupsRows,this.table.extraTableSettings=this._settings.groupsTradeVolumeFilter},e.prototype.draw=function(){var t,e,i,o;this.visible&&(t=this._barDrawParams(),o=this.chart.getTradingPanelWidth(),e=this.chart.dateScale.columnWidth,i=this.chartPanel.contentFrame.height,o=this.chartPanel.contentFrame.width+o,this.chartPanel.drawValueScale=!1,e<3||this.table.draw({params:t,valueMaps:this._valueMaps,columnWidth:e,height:i,width:o}))},e.prototype.calcValue=function(a){var l=this,s=this.dataManager.barDataSeries();a>=s.details.values.length||this._valueMaps.forEach(function(t,e,i){var e=l._settings.groupsTradeVolumeFilter[e],o=s.details.values[a],r=s.date.values[a],n=s.date.values[a-1];l.updateValueMap({item:o,filter:e,date:r,prevDate:n,valueMap:t,dataSeries:s,index:a})})},e.prototype.calcAllValue=function(){var a=this,l=this.dataManager.barDataSeries();this._valueMaps.forEach(function(r,t,e){(i=r).deltamax.max=null,i.deltamax.min=null,i.deltamin.max=null,i.deltamin.min=null,i.volume.max=null,i.volume.min=null,i.ticks.max=null,i.ticks.min=null,i.ticks.max=null,i.ticks.min=null,i.buyPercentVolume.max=null,i.buyPercentVolume.min=null,i.sellPercentVolume.max=null,i.sellPercentVolume.min=null,i.buyvolume.max=null,i.buyvolume.min=null,i.sellvolume.max=null,i.sellvolume.min=null,i.delta.max=null,i.delta.min=null,i.deltafinish.max=null,i.deltafinish.min=null;var i,n=a._settings.groupsTradeVolumeFilter[t];l.details.values.forEach(function(t,e){var i=l.date.values[e],o=l.date.values[e-1];a.updateValueMap({item:t,filter:n,date:i,prevDate:o,valueMap:r,dataSeries:l,index:e})})})},e.prototype.updateValueMap=function(t){var e=t.item,i=t.filter,o=t.index,r=t.dataSeries,n=t.valueMap,a=t.date,t=t.prevDate,l=r.close.values[o],s=0,c=new Set,r=null==t||a.getDate()!==t.getDate()||a.getMonth()!==t.getMonth()||a.getFullYear()!==t.getFullYear();if(e&&e.length){for(var h=e[0].bidInfo.volume-e[0].askInfo.volume,u=e[0].bidInfo.volume-e[0].askInfo.volume,f=0,d=0,p=0,y=e;p<y.length;p++){var m=y[p];C(i.min)&&m.volume<=i.min||C(i.max)&&m.volume>=i.max||(m.price===l&&0,f+=m.bidInfo.volume,d+=m.askInfo.volume,s+=m.volume,c.add(m.price),h<(m=m.bidInfo.volume-m.askInfo.volume)&&(h=m),m<u&&(u=m))}a=f-d,t=a+(r?0:n.deltaday.values[o-1]),r=(n.delta.values[o]=a,_(n.delta,a),n.deltaday.values[o]=t,_(n.deltaday,t),0!==s?(e=+(t/s*100).toFixed(2),n.deltaPercentDay.values[o]=e,_(n.deltaPercentDay,e)):n.deltaPercentDay.values[o]="",+(f/s*100).toFixed(2)),a=(n.buyPercentVolume.values[o]=r,_(n.buyPercentVolume,r),+(d/s*100).toFixed(2));n.sellPercentVolume.values[o]=a,_(n.sellPercentVolume,a),n.buyvolume.values[o]=f,_(n.buyvolume,f),n.sellvolume.values[o]=d,_(n.sellvolume,d);t=f-d-Math.abs(h)>=Math.abs(u)?h:u;n.deltafinish.values[o]=t,_(n.deltafinish,t),n.volume.values[o]=s,_(n.volume,s),n.deltamax.values[o]=h,n.deltamin.values[o]=u,_(n.deltamax,h),_(n.deltamin,u)}n.ticks.values[o]=c.size,_(n.ticks,c.size)},e.Style=t,e.defaults={plotStyle:t.TABLE,minWidth:1,columnWidthRatio:.8},e);function e(t){var e=o.call(this,t)||this;return e._settings={general:{font:{fontColor:"#fff",fontStyle:"400",fontFamily:"Arial",textAlign:i.TextAlign.RIGHT,fontSize:11},header:{position:"left",textColor:"#ffffff",backColor:"#0C62F7",textAlign:i.TextAlign.LEFT},marginText:7,rowMargin:1,rowHeight:20,xPadding:1},groupsRows:{delta:{enabled:!0,order:0,positive:"#0C62F7",negative:"#999999"},volume:{enabled:!0,order:1,background:"#0C62F7"},buyPercentVolume:{enabled:!0,order:2,positive:"#0C62F7",negative:"#999999"},buyvolume:{enabled:!0,order:3,background:"#0C62F7"},deltaPercentDay:{enabled:!0,order:4,positive:"#0C62F7",negative:"#999999"},deltaday:{enabled:!0,order:5,positive:"#0C62F7",negative:"#999999"},deltafinish:{enabled:!0,order:6,positive:"#0C62F7",negative:"#999999"},deltamax:{enabled:!0,order:7,positive:"#0C62F7",negative:"#999999"},deltamin:{enabled:!0,order:8,positive:"#0C62F7",negative:"#999999"},sellPercentVolume:{enabled:!0,order:9,positive:"#0C62F7",negative:"#999999"},sellvolume:{enabled:!0,order:10,background:"#999999"},ticks:{enabled:!0,order:11}},groupsTradeVolumeFilter:[{name:"Full"}]},e._valueMaps=[],e._plotThemeKey="bar",e.table=new i.MultiTable,e.dataManager=t.dataManager,e.setupTable(),e._addNewTables(e._settings.groupsTradeVolumeFilter.length),e}function _(t,e){(null==t.max||e>t.max)&&(t.max=e),(null==t.min||e<t.min)&&(t.min=e)}function C(t){return null!=t&&""!=t}function r(){return{delta:{label:"Delta",values:[]},volume:{label:"Volume",values:[]},buyvolume:{label:"Buy Volume",values:[]},deltaday:{label:"Delta Day",values:[]},ticks:{label:"Ticks",values:[]},sellvolume:{label:"Sell Volume",values:[]},deltamax:{label:"Delta Max",values:[]},deltamin:{label:"Delta Min",values:[]},sellPercentVolume:{label:"Sell % Volume",values:[]},deltafinish:{label:"Delta Finish",values:[]},buyPercentVolume:{label:"Buy % Volume",values:[]},deltaPercentDay:{label:"Delta % Day",values:[]}}}i.BarStatsPlot=t,i.getValueMap=r}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(m){"use strict";var i,t={LINE:"line",COLORED_LINE:"coloredLine",COLUMN:"column",COLORED_COLUMN:"coloredColumn"},e=(Object.freeze(t),i=m.Plot,__extends(o,i),Object.defineProperty(o.prototype,"baseValue",{get:function(){var t=this._options.baseValue;return null!=t?t:o.defaults.baseValue},set:function(t){if(!m.JsUtil.isFiniteNumber(t))throw new TypeError("Value must be a finite number.");this._setOption("baseValue",t,m.PlotEvent.BASE_VALUE_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"columnWidthRatio",{get:function(){return this._options.columnWidthRatio||o.defaults.columnWidthRatio},set:function(t){if(m.JsUtil.isNegativeNumber(t)||1<t)throw new Error("Ratio must be in range (0..1]");this._setOption("columnWidthRatio",t,m.PlotEvent.COLUMN_WIDTH_RATIO_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"minColumnWidth",{get:function(){return this._options.minColumnWidth||o.defaults.minWidth},set:function(t){if(!m.JsUtil.isPositiveNumber(t))throw new Error("Min width must be a positive number.");this._setOption("minColumnWidth",t,m.PlotEvent.MIN_WIDTH_CHANGED)},enumerable:!0,configurable:!0}),o.prototype.draw=function(){if(this.visible)switch(this.plotStyle){case t.COLORED_LINE:this._drawColoredLines();break;case t.COLUMN:this._drawColumns();break;case t.COLORED_COLUMN:this._drawColoredColumns();break;default:this._drawLines()}},o.prototype.drawValueMarkers=function(){this.plotStyle===t.COLORED_COLUMN&&this._setupValueMarkersTheme(),i.prototype.drawValueMarkers.call(this)},o.prototype._drawLines=function(){var t=this._valueDrawParams();if(0!==t.values.length){var e=t.renderer,i=t.projection,o=t.dates,r=i.yByValue(this.baseValue),n=null,a=-1/0;e.beginPath();for(var l=t.startIndex,s=t.startColumn;l<=t.endIndex;l++,s++){var c,h=t.values[l];null!=h&&((c=o?i.xByDate(o[l]):i.xByColumn(s))===n?a=Math.max(a,h):(null!==n&&e.verLine(n,i.yByValue(a)+m.CanvasOffset,r+m.CanvasOffset),a=h,n=c))}e.verLine(n,i.yByValue(a)+m.CanvasOffset,r+m.CanvasOffset),e.stroke(t.theme)}},o.prototype._drawColoredLines=function(){var s,c,h,u,t,f=this._barDrawParams();0!==f.values.length&&(s=f.renderer,c=f.projection,h=f.dates,u=c.yByValue(this.baseValue),(t=function(t,e){var i=null,o=-1/0;s.beginPath();for(var r=f.startIndex,n=f.startColumn;r<=f.endIndex;r++,n++){var a,l=f.values[r];null==l||t&&f.close[r]<f.open[r]||!t&&f.close[r]>=f.open[r]||((a=h?c.xByDate(h[r]):c.xByColumn(n))===i?o=Math.max(o,l):(null!==i&&s.verLine(a,c.yByValue(l)+m.CanvasOffset,u+m.CanvasOffset),o=l,i=a))}s.verLine(i,c.yByValue(o)+m.CanvasOffset,u+m.CanvasOffset),s.stroke(e)})(!0,f.theme.upBar),t(!1,f.theme.downBar))},o.prototype._drawColumns=function(){var t=this._barDrawParams();if(0!==t.values.length){var e,i=t.renderer,o=t.projection,r=t.dates,n=o.yByValue(this.baseValue),a=this.chart.dateScale.columnWidth,l=Math.round(Math.max(a*this.columnWidthRatio,this.minColumnWidth)/2),s=2*l,c=null,h=-1/0;i.beginPath();for(var u=t.startIndex,f=t.startColumn;u<=t.endIndex;u++,f++){var d,p=t.values[u];null!=p&&((d=r?o.xByDate(r[u]):o.xByColumn(f))===c?h=Math.max(h,p):(null!==c&&(e=o.yByValue(h),i.rect(c-l+m.CanvasOffset,Math.min(e,n)+m.CanvasOffset,s,Math.max(Math.abs(e-n),1))),h=p,c=d))}e=o.yByValue(h),i.rect(c-l+m.CanvasOffset,Math.min(e,n)+m.CanvasOffset,s,Math.max(Math.abs(e-n),1));a=t.theme;i.fillStroke(a.fill,a.line)}},o.prototype._setupValueMarkersTheme=function(){var t,e,i,o=this._barDrawParams();0!==o.values.length&&(t=this.actualTheme,i=null,e=o.values.length-1,i=o.close[e]>=o.open[e]?t.upCandle&&t.upCandle.fill.fillColor:t.downCandle&&t.downCandle.fill.fillColor,t.strokeColor=i)},o.prototype._drawColoredColumns=function(){var s,c,h,u,f,d,p,t,y=this._barDrawParams();0!==y.values.length&&(s=y.renderer,c=y.projection,h=y.dates,u=c.yByValue(this.baseValue),t=this.chart.dateScale.columnWidth,d=Math.round(Math.max(t*this.columnWidthRatio,this.minColumnWidth)/2),p=2*d,(t=function(t,e){var i=null,o=-1/0;s.beginPath();for(var r=y.startIndex,n=y.startColumn;r<=y.endIndex;r++,n++){var a,l=y.values[r];null==l||t&&y.close[r]<y.open[r]||!t&&y.close[r]>=y.open[r]||((a=h?c.xByDate(h[r]):c.xByColumn(n))===i?o=Math.max(o,l):(null!==i&&(f=c.yByValue(o),s.rect(i-d+m.CanvasOffset,Math.min(f,u)+m.CanvasOffset,p,Math.max(Math.abs(f-u),1))),o=l,i=a))}f=c.yByValue(o),s.rect(i-d+m.CanvasOffset,Math.min(f,u)+m.CanvasOffset,p,Math.max(Math.abs(f-u),1)),s.fillStroke(e.fill,e.line)})(!0,y.theme.upCandle),t(!1,y.theme.downCandle))},o.Style=t,o.defaults={plotStyle:t.LINE,baseValue:0,columnWidthRatio:.9,minWidth:3},o);function o(t){var e=i.call(this,t)||this;return t&&null!=t.columnWidthRatio&&(e.columnWidthRatio=t.columnWidthRatio),e._plotThemeKey="histogram",e}m.HistogramPlot=e}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";var e,i={SIMPLE:"simple",MOUNTAIN:"mountain",STEP:"step"},o=(Object.freeze(i),e=t.Plot,__extends(r,e),r.prototype.draw=function(){if(this.visible)switch(this.plotStyle){case i.MOUNTAIN:this._drawMountainLine();break;case i.STEP:this._drawStepLine();break;default:this._drawSimpleLine()}},r.prototype._drawSimpleLine=function(){var t=this._valueDrawParams(),e=t.values;if(0!==e.length){var i=t.renderer,o=t.projection,r=t.dates,n=null,a=null,l=1/0,s=-1/0,c=!0,h=t.startIndex,u=t.startColumn,f=t.endIndex,d=null;i.beginPath();for(var p=h,y=u;p<=f;p++,y++){var m,_,C,g,b=e[p];null!=b&&((_=b!=b)&&c||(m=r?o.xByDate(r[p]):o.xByColumn(y),c?(i.moveTo(m,o.yByValue(b)),c=!1):(c=_?!0:c)||m!==n?(l!==1/0&&(_=o.yByValue(l),g=1.8<Math.abs(d-_),Math.abs(s-l)<1e-5?g&&i.lineTo(n,_):(C=o.yByValue(s),Math.abs(C-_)<1.8?g&&i.lineTo(n,_):(g&&i.moveTo(n,_),i.lineTo(n,C),1e-5<Math.abs(a-s)&&(g=o.yByValue(a),1.8<Math.abs(g-C)&&i.moveTo(n,g))))),c?(l=1/0,s=a=-1/0,d=null):(d=o.yByValue(b),i.lineTo(m,d),l=s=a=b),n=m):(l=Math.min(l,b),s=Math.max(s,b),a=b)))}l!==1/0&&l!==s&&i.verLine(n,o.yByValue(l),o.yByValue(s)),i.stroke(t.theme.line||t.theme)}},r.prototype._drawMountainLine=function(){var t=this._valueDrawParams();if(0!==t.values.length){var e=t.renderer,i=t.projection,o=null,r=null,n=t.dates,a=1/0,l=!0,s=this.chartPanel.layer.size.height;e.fillTheme(t.theme.fill);for(var c=t.startIndex,h=t.startColumn;c<=t.endIndex;c++,h++){var u,f,d=t.values[c];null!=d&&((u=d!=d)&&l||(f=n?i.xByDate(n[c]):i.xByColumn(h),l?(e.beginPath(),e.moveTo(f,i.yByValue(d)),o=r=f,l=!1):(l=u?!0:l)||f!==r?(a!==1/0&&e.lineTo(r,i.yByValue(a)),l?(a=1/0,e.lineTo(r,s),e.lineTo(o,s),e.closePath(),e.fill(),o=f):(e.lineTo(f,i.yByValue(d)),a=d),r=f):a=Math.min(a,d)))}a!==1/0&&e.lineTo(r,i.yByValue(a)),e.lineTo(r,s),e.lineTo(o,s),e.closePath(),e.fill(),this._drawSimpleLine()}},r.prototype._drawStepLine=function(){var t=this._valueDrawParams();if(0!==t.values.length){var e=t.renderer,i=t.projection,o=t.dates,r=null,n=null,a=null,l=1/0,s=-1/0,c=!0;e.beginPath();for(var h=t.startIndex,u=t.startColumn;h<=t.endIndex;h++,u++){var f,d,p,y=t.values[h];null!=y&&((f=y!=y)&&c||(p=o?i.xByDate(o[h]):i.xByColumn(u),c?(r=p,n=i.yByValue(y),e.moveTo(p,n),l=s=y,c=!1):(c=f?!0:c)||p!==r?(c?(l=1/0,s=a=-1/0):(e.lineTo(r,n),f=i.yByValue(l),Math.abs(s-l)<1e-5?(e.lineTo(r,f),n=f):(d=i.yByValue(s),Math.abs(d-f)<1.8?(e.lineTo(r,f),n=f):(e.verLine(r,f,d),n=i.yByValue(a),e.moveTo(r,n))),l=s=a=y),r=p):(l=Math.min(l,y),s=Math.max(s,y),a=y)))}null!=a&&a!==-1/0&&(e.lineTo(p,n),e.lineTo(p,i.yByValue(a))),e.stroke(t.theme.line||t.theme)}},r.Style=i,r.defaults={plotStyle:i.SIMPLE},r);function r(t){t=e.call(this,t)||this;return t._plotThemeKey="line",t}t.LinePlot=o}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){var i,o=e.PlotEvent||(e.PlotEvent={}),t=(o.POINT_SIZE_CHANGED="plotPointSizeChanged",{DOT:"dot"}),t=(Object.freeze(t),i=e.Plot,__extends(r,i),Object.defineProperty(r.prototype,"pointSize",{get:function(){return this._options.pointSize||r.defaults.pointSize},set:function(t){if(e.JsUtil.isNegativeNumber(t))throw new TypeError("Value must be a positive number.");this._setOption("pointSize",t,o.POINT_SIZE_CHANGED)},enumerable:!0,configurable:!0}),r.prototype.draw=function(){if(this.visible){var t=this._valueDrawParams();if(0!==t.values.length){function e(t){for(var e=0,i=s.length;e<i;e++)o.circlePath(t,s[e],n),o.fill()}var o=t.renderer,i=t.projection,r=t.dates,n=this.pointSize,a=null,l=[],s=[];o.fillTheme(t.theme.fill||t.theme);for(var c=t.startIndex,h=t.startColumn;c<=t.endIndex;c++,h++){var u,f,d=t.values[c];null!=d&&((f=r?i.xByDate(r[c]):i.xByColumn(h))===a?0<=l.indexOf(d)||(u=i.yByValue(d),0<=s.indexOf(u)||(l.push(d),s.push(u))):(null!=a&&(e(a),s.length=l.length=0),a=f,l.push(d),s.push(i.yByValue(d))))}e(f)}}},r.defaults={plotStyle:(r.Style=t).DOT,pointSize:2},r);function r(t){t=i.call(this,t)||this;return t._plotThemeKey="point",t}e.PointPlot=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(C){"use strict";e=C.Plot,__extends(i,e),i.prototype.draw=function(){var t=this._barDrawParams(),e=t.theme.aboveCross,t=t.theme.belowCross;e&&t?(this.drawArea(!0,e),this.drawArea(!1,t)):this._drawOneColorArea()},i.prototype.drawArea=function(t,e){if(this.visible){var i=this._barDrawParams();if(0!==i.values.length){var o=this.renderer,r=this.projection,n=this.dataSeries[0],a=this.dataSeries[1],l=this._getIntersectionPoint(n,a,i);if(0!==l.length){var s=i.startIndex;o.beginPath();for(var c=1;c<l.length;c++){var h=null,u=void 0,f=void 0,d=l[c].x,p=l[c].y;if(t===a.values[l[c].index]>=n.values[l[c].index])s=l[c].index;else{o.moveTo(d,p);for(var y=void 0,m=l[c].index;s<m;m--)null!==n.values[m]&&null!==a.values[m]&&(u=a.values[m],d=r.xByRecord(m),p=r.yByValue(u),d===h?f=u:(f?(_=r.yByValue(f),o.lineTo(h,_),f=null):o.lineTo(d,p),h=d,y=m));f=h=null,d>=l[c-1].x&&d<=l[c].x&&null===n.values[y]&&a.values[y]&&o.lineTo(l[c-1].x,l[c-1].y);for(var _,C=s;C<=l[c].index;C++)null!==n.values[C]&&null!==a.values[C]&&(u=n.values[C],d=r.xByRecord(C),p=r.yByValue(u),d===h?f=u:(f?(_=r.yByValue(f),o.lineTo(h,_),f=null):o.lineTo(d,p),h=d))}}o.fill(e)}}}},i.prototype._drawOneColorArea=function(){if(this.visible){var t=this._barDrawParams();if(0!==t.values.length){var e=this.renderer,i=this.projection,o=null,r=null,n=this.dataSeries[0].values[t.startIndex],a=i.xByRecord(t.startIndex),l=i.yByValue(n);e.beginPath(),e.moveTo(a,l);for(var s=t.startIndex+1;s<=t.endIndex;s++)null!=(n=this.dataSeries[0].values[s])&&(a=i.xByRecord(s),l=i.yByValue(n),a===r?o=n:(o?(c=i.yByValue(o),e.lineTo(r,c),o=null):e.lineTo(a,l),a=r));(o=r=null)==(n=this.dataSeries[1].values[t.endIndex+1])&&(t.endIndex=this.dataSeries[1].rightNearestVisibleValueIndex(t.endIndex),n=this.dataSeries[1].values[t.endIndex]),a=i.xByRecord(t.endIndex),l=i.yByValue(n),e.lineTo(a,l);for(var c,s=t.endIndex;s>=t.startIndex;s--)null!=(n=this.dataSeries[1].values[s])&&(a=i.xByRecord(s),l=i.yByValue(n),a===r?o=n:(o?(c=i.yByValue(o),e.lineTo(r,c),o=null):e.lineTo(a,l),e.lineTo(a,l),r=a));null==(n=this.dataSeries[0].values[t.startIndex])&&(t.startIndex=this.dataSeries[0].rightNearestVisibleValueIndex(t.startIndex),n=this.dataSeries[0].values[t.startIndex]),a=i.xByRecord(t.startIndex),l=i.yByValue(n),e.lineTo(a,l),e.fill(t.theme)}}},i.prototype._getIntersectionPoint=function(t,e,i){var o=t.values,r=e.values,n=this.projection,a=[],e=i.startIndex,l=(null==(_=o[e])&&(_=o[e=this.dataSeries[0].rightNearestVisibleValueIndex(e)]),this._addValue(this.projection.xByRecord(e),this.projection.yByValue(_),e));a.push(l);for(var s,c,h,u,f,d,p,y,m=i.startIndex;m<=i.endIndex;m++)null==r[m]&&null==o[m]||(y=n.xByRecord(m),s=n.yByValue(o[m]),c=n.xByRecord(m+1),h=n.yByValue(o[m+1]),u=n.xByRecord(m),f=n.yByValue(r[m]),d=n.xByRecord(m+1),p=n.yByValue(r[m+1]),(y=C.Geometry.intersectionPoints({x:y,y:s},{x:c,y:h},{x:u,y:f},{x:d,y:p}))&&(l=this._addValue(y.x,y.y,m),a.push(l)));var _=o[i.endIndex],e=i.endIndex;return null==_&&(_=o[e=t.leftNearestVisibleValueIndex(e)]),l=this._addValue(n.xByRecord(e),n.yByValue(_),e),a.push(l),a},i.prototype._addValue=function(t,e,i){var o={};return o.x=t,o.y=e,o.index=i,o};var e,t=i;function i(t){return e.call(this,t)||this}C.FillPlot=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";e=t.BarPlot,__extends(o,e),Object.defineProperty(o.prototype,"boxSize",{get:function(){return this._boxSize},set:function(t){this._boxSize=t},enumerable:!0,configurable:!0}),o.prototype.draw=function(){var t,e;!this.visible||0!==(t=this._barDrawParams()).values.length&&((e=t.renderer).beginPath(),this._drawColumns(t,!0),e.stroke(t.theme.upCandle.border),e.beginPath(),this._drawColumns(t,!1),e.stroke(t.theme.downCandle.border))},o.prototype._drawColumns=function(t,e){for(var i=t.renderer,o=t.projection,r=this.boxSize,n=this.chart.dateScale.columnWidth,a=Math.max(n*this.columnWidthRatio,this.minWidth),l=Math.round(a/2),s=e?null:t.theme.downCandle.border,c=t.startIndex,h=t.startColumn;c<=t.endIndex;c++,h++){var u=t.open[c],f=t.close[c];if(null!=u&&null!=f){u=u<=f;if(e===u)for(var d=t.dates?o.xByDate(t.dates[c]):o.xByColumn(h),p=t.low[c],y=t.high[c];1e-6<y-p;){var m=o.yByValue(p),_=o.yByValue(p+r);m===_&&m--,e?a<3?i.verLine(d,m,_):(i.line(d-l,m,d+l,_),i.line(d-l,_,d+l,m)):a<3?i.verLine(d,m,_):(i.ellipsePath(d,(m+_)/2,l,(_-m)/2),i.stroke(s)),p+=r}}}};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.PointAndFigurePlot=i}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__assign=this&&this.__assign||Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},__extends=(!function(A){"use strict";(t=V=A.LabelPlotPosition||(A.LabelPlotPosition={})).Top="top",t.Bottom="bottom",A.LabelPlotStyle={Tooltip:"Tooltip"},Object.freeze(A.LabelPlotStyle),o=A.Plot,__extends(r,o),r.prototype.draw=function(){var t;!this.visible||this.chart.dateScale.columnWidth<this._barWidthTextThreshold||(t=A.LabelPlotStyle,this.plotStyle===t.Tooltip&&this._drawTooltip())},r.prototype._drawTooltip=function(){var t=this._barDrawParams();if(0!==t.values.length){var e=t.renderer,i=t.projection,o=t.dates,r=t.startIndex,n=t.endIndex,a=t.startColumn,l=this.chart,s=this.tooltip,c=this.theme,h=this._position,l=l.dataManager,u=t.values,f=l.getDataSeries(A.DataSeriesSuffix.HIGH).values,d=l.getDataSeries(A.DataSeriesSuffix.LOW).values,p=this._offset,y=c.text.fontSize;if(u.length){if(e.beginPath(),c.fill.fillEnabled){for(var m=r,_=a;m<=n;m++,_++){var C=u[m];if(null!=C){for(var g=Array.isArray(C)?C:[C],b=-1/0,S=0;S<g.length;S++)var v="object"==typeof(I=g[S])?I.value:I,w=e.textWidth(this._getFormattedText(v)),b=Math.max(b,w);var P=y*g.length+8,k=(o?i.xByDate(o[m]):i.xByColumn(_))-b/2,x=void 0,O=void 0,E="object"==typeof C?C.value:C;switch(h){case V.Top:O=this._forBars?f[m]:Math.max(0,E),x=i.yByValue(O)-p-P;break;case V.Bottom:O=this._forBars?d[m]:Math.min(0,E),x=i.yByValue(O)+p}e.rect(k-this._xPadding,x,b+2*this._xPadding,P)}}e.fill({fillColor:c.fill.fillColor}),e.fillStroke(c.fill,c.stroke)}e.textTheme(s.actualTheme.text),e.textOptions({baseline:A.TextBaseline.MIDDLE,align:A.TextAlign.CENTER});for(m=r,_=a;m<=n;m++,_++){C=u[m];if(null!=C){g=Array.isArray(C)?C:[C],k=o?i.xByDate(o[m]):i.xByColumn(_),x=void 0,O=void 0,E="object"==typeof C?C.value:C;switch(h){case V.Top:var D=y*g.length;O=this._forBars?f[m]:Math.max(0,E),x=i.yByValue(O)-p-4+y/2-D;break;case V.Bottom:O=this._forBars?d[m]:Math.min(0,E),x=i.yByValue(O)+p+4+y/2}for(S=0;S<g.length;S++){var I,T="object"==typeof(I=g[S])?I.label||I.value:I,F=x+S*c.text.fontSize,M="object"==typeof I&&I.textColor,L=void 0,L=M?__assign({},c.text,{fillColor:M}):c.text,v=this._getFormattedText(T);e.fillText(v,k,F,__assign({},L,{textBaseline:"middle",textAlign:"center"}))}}}e.closePath()}}},r.prototype._getFormattedText=function(t){return"string"==typeof t||0===t?t:this.chartPanel.formatter.format(t)},r.Style=A.LabelPlotStyle,r.defaults={plotStyle:A.LabelPlotStyle.Tooltip,position:V.Top,offset:16,xPadding:16,forBars:!1};var V,o,t=r;function r(t){var e=o.call(this,t)||this,i=r.defaults;return e._position=t&&t.position||i.position,e._offset=t&&t.offset||i.offset,e._xPadding=t&&t.xPadding||i.xPadding,e._barWidthTextThreshold=t&&t.barWidthTextThreshold||i.barWidthTextThreshold,e._forBars=t&&t.forBars||i.forBars,e._plotThemeKey="label",e}A.LabelPlot=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(T){"use strict";(t=F=T.Style||(T.Style={})).CONNECTED="connected",t.CONTINIOUS="continious",t.STEPPED="stepped",t.SOLID="solid",t.HOLLOW="hollow",(t=e=T.Duration||(T.Duration={})).DAY="day",t.WEEKLY="week",t.MONTHLY="month",t.QUARTERLY="quarter",t.ANNUALY="year",i=T.AdvancedPlot,__extends(o,i),Object.defineProperty(o.prototype,"settings",{get:function(){return this._setting},set:function(t){this._setting=t},enumerable:!0,configurable:!0}),o.prototype.draw=function(){if(this.visible){this._getBasis();var t=this._setting.general,e=t.styleLine,i={width:e.lineStyle.width,lineStyle:e.lineStyle.lineStyle,strokeColor:e.strokeColor},o=this._barDrawParams().values;switch(t.styleLine.style){case F.CONNECTED:this._drawRectangleLine(o,!0,i,!1,!1,!0),this._drawRectangleLine(o,!0,i,!0);break;case F.CONTINIOUS:this._drawRectangleLine(o,!0,i,!0);break;case F.HOLLOW:case F.SOLID:this._drawRectangleLine(o,!0,i);break;case F.STEPPED:this._drawRectangleLine(o,!0,i,!0,!0)}this._drawBands()}},o.prototype._drawBands=function(){var t,e,i=this._setting.bands;i.band1.isShow&&(t=i.band1.styleLine,e=i.band1.strokeColor,t.strokeColor=e,this._drawRectangleLine(this._valueBand11,!1,t,!0),this._drawRectangleLine(this._valueBand12,!1,t,!0)),i.band2.isShow&&(t=i.band2.styleLine,e=i.band2.strokeColor,t.strokeColor=e,this._drawRectangleLine(this._valueBand21,!1,t,!0),this._drawRectangleLine(this._valueBand22,!1,t,!0)),i.band3.isShow&&(t=i.band3.styleLine,e=i.band3.strokeColor,t.strokeColor=e,this._drawRectangleLine(this._valueBand31,!1,t,!0),this._drawRectangleLine(this._valueBand32,!1,t,!0))},o.prototype._getBasis=function(){for(var t=this._barDrawParams().values,e=t.length,i=this.chart.lastVisibleIndex,o=this._setting.bands,r=0,n=i<e?i:e,a=0;a<n;a++){var l=t[a],s=(l&&(r+=l),Math.sqrt(r/(a+1))),c=s*o.band1.coefficient,h=s*o.band2.coefficient,s=s*o.band3.coefficient;this._valueBand11[a]=l+c,this._valueBand12[a]=l-c,this._valueBand21[a]=l+h,this._valueBand22[a]=l-h,this._valueBand31[a]=l+s,this._valueBand32[a]=l-s}},o.prototype._drawRectangleLine=function(t,e,i,o,r,n){void 0===o&&(o=!1),void 0===r&&(r=!1),void 0===n&&(n=!1);var a=this._barDrawParams(),l=t.length;if(0!==l){for(var s,c,h,u,f,d,p,y,m,_=a.renderer,C=a.projection,g=this.chart,b=this._setting,S=b.label,v=S.isShowVWAPLabel,S=S.lebelLineLength,w=b.general.styleLine.style,P=g.firstVisibleIndex,b=g.lastVisibleIndex,k=this.settings.general.isShowCustomDuration,x=(o&&!k&&(_.beginPath(),s=C.xByRecord(P),c=C.yByValue(t[P]),_.moveTo(s,c)),n&&_.beginPath(),b<l?b:l),O=a.dates[0],E=!1,D=!1,I=P;I<x;I++)P<I&&!D&&(h=a.dates[I],(u=this.settings.general.customTimes)&&T.Session.isDateInSession(h,u)&&(_.stroke(i),_.closePath(),D=!0)),D&&(_.beginPath(),D=!1),k&&T.Frame.verificationFrame(this.settings.general.customDuration,O,a.dates[I])||(E||(o&&(_.beginPath(),s=C.xByRecord(I),c=C.yByValue(t[I]),_.moveTo(s,c)),E=!0),h=I+1,y=C.xByRecord(I),m=C.xByRecord(h),u=C.yByValue(t[I]),f=C.yByValue(t[h]),n?(_.moveTo(y,u),d=Math.abs(m-y)<5?Math.abs(m-y):5,_.arc(y,u,d,0,2*Math.PI)):o&&!r?_.lineTo(y,u):r?(_.horLine(y,m,u),_.verLine(m,u,f)):(_.rect(y-(p=5),u-p,m-y,10),w===F.SOLID&&(d=g.theme.drawing.abstractMarker.fill,_.fill(d))));n&&_.fill({fillColor:i.strokeColor}),v&&e&&(b=t[x-1],p=10,l=_.textWidth("VWAP"),v=C.yByValue(b),e=this._canvasWidth-p,_.horLine(y=e-l-p,m=e-S,v),_.stroke(i),this._drawTextWithBackground("VWAP",v,"#fff")),_.stroke(i)}},o.prototype._drawTextWithBackground=function(t,e,i,o){void 0===o&&(o=200);var o={fillColor:i},i=this.getLabelTheme(),r=(i.fillColor="#000",this.renderer),n=(r.closePath(),r.beginPath(),r.textTheme(i),r.textOptions({align:T.TextAlign.CENTER,baseline:T.TextBaseline.MIDDLE}),r.textWidth(t)+8),a=this._canvasWidth-10-n-this.rigthMargin;r.rect(a,e-8,n,16),r.fill(o),r.fillText(t,a+n/2,e,i)};var F,e,i,t=o;function o(t){t=i.call(this,t)||this;return t._color="#FFFF00",t._setting={general:{styleLine:{style:F.CONTINIOUS,lineStyle:{width:1,lineStyle:T.LineStyle.SOLID},strokeColor:"#FF42EC"},isShowCustomDuration:!1,customDuration:e.DAY,customTimes:{id:628,name:"US Extended Trading Hours",exchange:"CME",timezoneId:"America/New_York",workingTimes:[{startDay:4,startTime:648e5,endDay:5,endTime:612e5,tradingDay:5},{startDay:3,startTime:648e5,endTime:612e5,tradingDay:4,endDay:4},{startDay:2,startTime:648e5,endDay:3,endTime:612e5,tradingDay:3},{startDay:1,startTime:648e5,endDay:2,endTime:612e5,tradingDay:2},{startDay:0,startTime:648e5,endDay:1,endTime:612e5,tradingDay:1}]}},bands:{band1:{isShow:!1,coefficient:1,strokeColor:t._color,styleLine:{width:1,lineStyle:T.LineStyle.SOLID}},band2:{isShow:!1,coefficient:2,strokeColor:t._color,styleLine:{width:1,lineStyle:T.LineStyle.SOLID}},band3:{isShow:!1,coefficient:3,strokeColor:t._color,styleLine:{width:1,lineStyle:T.LineStyle.SOLID}}},label:{isShowVWAPLabel:!0,lebelLineLength:400}},t._valueBand11=[],t._valueBand12=[],t._valueBand21=[],t._valueBand22=[],t._valueBand31=[],t._valueBand32=[],t._plotThemeKey="line",t}T.VWAPPlot=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(s){"use strict";(t=a=s.ResizableElementPlotDirection||(s.ResizableElementPlotDirection={})).Left="left",t.Right="right",t.Top="top",t.Bottom="bottom",i=s.Rect,__extends(e,i);var a,i,t=e;function e(t){var e=i.call(this,t)||this;return e.id=t.id,e}s.ResizableRect=t;o=s.Plot,__extends(r,o),Object.defineProperty(r.prototype,"isActive",{get:function(){return null!=this._activeRect},enumerable:!0,configurable:!0}),r.prototype.draw=function(){var t,e,i,o,r;this.visible&&this._activeRect&&(t=this.renderer,e=(r=this._activeRect).left,i=r.top,o=r.width,r=r.height,t.beginPath(),t.rect(e,i,o,r),t.stroke(this._strokeTheme),t.closePath(),this._directions.left&&this._drawResizeControl(e,i+r/2),this._directions.right&&this._drawResizeControl(e+o,i+r/2),this._directions.top&&this._drawResizeControl(e+o/2,i),this._directions.bottom&&this._drawResizeControl(e+o/2,i+r))},r.prototype._drawResizeControl=function(t,e){var i=this.renderer;i.beginPath(),i.circle(t,e,this._controlSize/2),i.fill({fillColor:this._strokeTheme.strokeColor}),i.closePath()},r.prototype._onChartPanelChanged=function(t){var e=this;o.prototype._onChartPanelChanged.call(this,t),this.chart&&(this.chart.on(s.MouseEvent.WHEEL,function(){e._disableMouseMove(),e._finishResize(),e._clearActiveRect(),clearTimeout(e._mouseWheelTimeout),e._mouseWheelTimeout=setTimeout(function(){e._enableMouseMove()},100)},this),this.chart.on(s.PanelEvent.FORCE_MOVE_STARTED,function(){e._disableMouseMove();var t=e._activeControlDirection;t?e._startResize(t):e._clearActiveRect()},this),this.chart.on(s.PanelEvent.FORCE_MOVE_FINISHED,function(){e._enableMouseMove(),e._finishResize()},this),this._enableMouseMove())},r.prototype._getActiveControlDirection=function(){var t=this._activeRect,e=t.left,i=t.top,o=t.width,t=t.height,r=this._activePoint,n=this._controlSize;return this._directions.left&&e-n/2<=r.x&&r.x<=e+n/2&&i<=r.y&&r.y<=i+t?a.Left:this._directions.right&&e+o-n/2<=r.x&&r.x<=e+o+n/2&&i<=r.y&&r.y<=i+t?a.Right:this._directions.top&&e<=r.x&&r.x<=e+o&&i-n/2<=r.y&&r.y<=i+n/2?a.Top:this._directions.bottom&&e<=r.x&&r.x<=e+o&&i+t-n/2<=r.y&&r.y<=i+t+n/2?a.Bottom:void 0},r.prototype._clearActiveRect=function(){delete this._activeRect,delete this._activeRectId,delete this._activeControlDirection},r.prototype.destroy=function(){var t=this.chart;o.prototype.destroy.call(this),t&&(t.off(s.MouseEvent.MOVE,this._onMouseMove),t.off(s.MouseEvent.MOVE,this._onResize),t.off(s.MouseEvent.WHEEL,this),t.off(s.PanelEvent.FORCE_MOVE_STARTED,this),t.off(s.PanelEvent.FORCE_MOVE_FINISHED,this))},r.defaults={getRects:function(){return[]},handlers:{},directions:{left:!0,right:!0,top:!0,bottom:!0}};var o,t=r;function r(t){var l=o.call(this,t)||this,e=(l._controlSize=8,l._strokeTheme={width:1,strokeColor:"green",lineStyle:s.LineStyle.SOLID},l._enableMouseMove=function(){l.chart.on(s.MouseEvent.MOVE,l._onMouseMove,l._onMouseMove)},l._disableMouseMove=function(){l.chart.off(s.MouseEvent.MOVE,l._onMouseMove)},l._onMouseMove=function(t){if(l.visible){var e=l._activePoint=t.value,t=l._activeRect,i=(l._clearActiveRect(),l._getRects());if(i.length){for(var o=l.chart,r=i.length-1;0<=r;r--){var n=i[r],a=n.clone();if(a.left-=l._controlSize/2,a.top-=l._controlSize/2,a.width+=l._controlSize,a.height+=l._controlSize,a.containsPoint(e)){l._activeRect=n,l._activeRectId=n.id,l._activeControlDirection=l._getActiveControlDirection();break}}t!==l._activeRect&&o.setNeedsUpdate(),l._activeControlDirection?o.addCssClass(s.DrawingCursorClass.RESIZE):o.removeCssClass(s.DrawingCursorClass.RESIZE)}}},l._startResize=function(t){var e=l.chart;e.scrollEnabled=!1,e.on(s.MouseEvent.MOVE,l._onResize(t),l._onResize),l._handlers.started&&l._handlers.started(l._activeRect)},l._finishResize=function(){var t=l.chart;t.scrollEnabled=!0,t.off(s.MouseEvent.MOVE,l._onResize),l._handlers.finished&&l._handlers.finished(l._activeRect)},l._onResize=function(r){return function(t){var e=t.value,i=l._activeRect=l._getRects().find(function(t){return t.id===l._activeRectId});switch(r){case a.Left:var o=i.left-e.x;i.left-=o,i.width+=o;break;case a.Right:i.width=e.x-i.left;break;case a.Top:case a.Bottom:}l._activePoint=e,l._handlers.continued&&l._handlers.continued(l._activeRect),l.chart.setNeedsUpdate()}},r.defaults);return l._getRects=t.getRects||e.getRects,l._handlers=t.handlers||e.handlers,l._directions=t.directions||e.directions,l._plotThemeKey="label",l}s.ResizableElementPlot=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(k){"use strict";e=k.Plot,__extends(i,e),i.prototype.draw=function(){if(this.visible){for(var t=this._barDrawParams(),e=t.renderer,i=t.projection,o=t.values,r=t.startIndex,n=t.endIndex,a=t.startColumn,l=o.length-1;null==o[r]&&0<r;)r--,a--;for(;null==o[n]&&n<l;)n++;var s,c,t=this.chart.dataManager,h=t.getDataSeries(k.DataSeriesSuffix.HIGH).values,u=t.getDataSeries(k.DataSeriesSuffix.LOW).values;e.beginPath();for(var f,d,p,y,m,_=r,C=a;_<=n;_++,C++)null==(g=o[_])?l<=_&&p===k.ZigZagExtreme.Low&&(f=i.xByColumn(C),d=i.yByValue(u[_]),e.line(s,c,f,d)):p=g===k.ZigZagExtreme.Low?(s=i.xByColumn(C),c=i.yByValue(u[_]),k.ZigZagExtreme.Low):(v=i.xByColumn(C),w=i.yByValue(h[_]),e.line(s,c,v,w),k.ZigZagExtreme.High);e.stroke(this.theme.up),e.closePath(),e.beginPath();for(var g,b,S,v,w,P,_=r,C=a;_<=n;_++,C++)null==(g=o[_])?l<=_&&P===k.ZigZagExtreme.High&&(b=i.xByColumn(C),S=i.yByValue(h[_]),e.line(y,m,b,S)):P=g===k.ZigZagExtreme.High?(y=i.xByColumn(C),m=i.yByValue(h[_]),k.ZigZagExtreme.High):(v=i.xByColumn(C),w=i.yByValue(u[_]),e.line(y,m,v,w),k.ZigZagExtreme.Low);e.stroke(this.theme.down),e.closePath()}};var e,t=i;function i(t){t=e.call(this,t)||this;return t._plotThemeKey="zigZag",t}k.ZigZagPlot=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__assign=this&&this.__assign||Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},__extends=(!function(pe){"use strict";(t=e=pe.FootprintMode||(pe.FootprintMode={})).Volume="volume",t.TradesCount="tradesCount",(t=ye=pe.FootprintBarStyle||(pe.FootprintBarStyle={})).NoBars="noBars",t.DeltaPrintBars="deltaPrintBars",t.DeltaShadingBars="deltaShadingBars",t.VolumeProfileBars="volumeProfileBars",(t=me=pe.FootprintBarAlignment||(pe.FootprintBarAlignment={})).Left="left",t.Middle="middle",t.Right="right",(t=_e=pe.FootprintTextStyle||(pe.FootprintTextStyle={})).NoText="noText",t.BidDeltaAsk="bidDeltaAsk",t.BidTotalAsk="bidTotalAsk",t.BidAsk="bidAsk",(t=l=pe.FootprintProfileFilter||(pe.FootprintProfileFilter={})).NoProfileFilter="noProfileFilter",t.MaxWidthProfile="maxWidthProfile",t.MinVolumeProfile="minVolumeProfile",t.AutoMaxProfile="autoMaxProfile",(t=Ce=pe.FootprintAutoProfilingRange||(pe.FootprintAutoProfilingRange={})).Visible="visible",t.Chart="chart",(t=n=pe.FootprintVolumeFilterMode||(pe.FootprintVolumeFilterMode={})).GreaterThan="greaterThan",t.LessThan="lessThan",i=pe.AdvancedPlot,__extends(o,i),o.prototype._handleSettings=function(t){var e,i,o,r=this,n=this.chart,a=this.chartPanel;a&&(a=a.layer.size.width,e=n.container.find("."+this.valueScale.rightPanelCssClass).outerWidth(),t=t.text.initialBarWidth,i=(a-e)/t,this._settingsHandled&&t===this._settings.text.initialBarWidth||this._setRecordRange(i),this._settingsHandled||(o=function(){r._setRecordRange(i),n.off(pe.ChartEvent.HISTORY_LOADED,o)},n.on(pe.ChartEvent.HISTORY_LOADED,o)))},o.prototype._setRecordRange=function(t){var e=this.chart;null==t||t<0||(e.recordRange(t),e.firstVisibleRecord+=1,e.lastVisibleRecord+=1)},o.prototype.draw=function(){if(this.visible){var t=this.chart,e=t.dataManager,i=t.dateScale,t=t.instrument,o=i.columnWidth;if(!(o<this._maxBarWidth)){var i=this._barDrawParams(),r=i.renderer,n=i.projection,V=i.dates,N=i.startIndex,a=i.endIndex,i=i.startColumn;if(0!==V.length){var R,z,l=e.getDataSeries(pe.DataSeriesSuffix.DETAILS).values,j=e.getDataSeries(pe.DataSeriesSuffix.OPEN).values,V=e.getDataSeries(pe.DataSeriesSuffix.HIGH).values,B=e.getDataSeries(pe.DataSeriesSuffix.LOW).values,H=e.getDataSeries(pe.DataSeriesSuffix.CLOSE).values,e=this._settings,s=e.main,U=s.fillColor,X=s.strokeColor,G=s.barStrokeColor,W=s.enableOpenClose,q=s.closeOpenColor,K=s.openCloseColor,s=s.customTickSize,Y=e.font,c=e.intraBar,Z=c.barStyle,J=c.useDeltaShadingColors,$=c.sellShadeBarColor,Q=c.buyShadeBarColor,tt=c.barColor,et=c.barPocColor,it=c.barAlignment,ot=c.sellVolumeBarColor,rt=c.sellPocBarColor,nt=c.buyVolumeBarColor,at=c.buyPocBarColor,c=e.text,lt=c.textStyle,st=c.margin,ct=c.hideSides,ht=c.separator,c=c.barWidthTextThreshold,h=e.profile,ut=h.autoProfilingRange,ft=h.showPocOnlyOnBiggestBar,dt=h.strokeWidth,h=e.deltaImbalance,pt=h.enabled,yt=h.threshold,mt=h.strongBidVolumeColor,_t=h.weakBidVolumeColor,Ct=h.strongAskVolumeColor,gt=h.weakAskVolumeColor,bt=h.enableWeakBidVolume,St=h.enableWeakAskVolume,h=e.pullback,e=h.enabled,vt=h.fillColor,wt=h.strokeColor,Pt=h.textColor,kt=h.currentBidAskColor,h=s.enabled?s.value:1,s=t.tickSize*h,xt=n.yByValue(0)-n.yByValue(t.tickSize),u=n.yByValue(0)-n.yByValue(s),f=o/2,Ot=r.textWidth(ht),Et=o<c;switch(ut){case Ce.Visible:R=N,z=a;break;case Ce.Chart:R=0,z=l.length-1}for(var Dt=-1/0,It=-1/0,Tt=-1/0,d=R;d<=z;d++){var p=this._handleValue(l[d]);if(this._isValidDetails(p))for(var y=0;y<p.length;y++)var m=p[y],Dt=Math.max(Dt,this._getProfile(m)),It=Math.max(It,this._getProfile(m.bidInfo)),Tt=Math.max(Tt,this._getProfile(m.askInfo))}if(e&&!Et&&a===l.length-1){var p=this._handleValue(l[a]),_=V[a],C=B[a];if(this._isValidDetails(p)&&this._isValidDetails(this._prevDetails)){h=this._prevHigh!==_,t=this._prevLow!==C,s=this._prevIndex<a;if(h||t||s){for(var Ft=-1/0,Mt=1/0,y=0;y<p.length;y++)var Lt=p[y].price,Ft=Math.max(Ft,Lt),Mt=Math.min(Mt,Lt);var g=h?Ft:Mt;this._pullbackData=[{bidInfo:{volume:0,tradesCount:0,profile:0},askInfo:{volume:0,tradesCount:0,profile:0},volume:0,tradesCount:0,profile:0,price:g}]}else{for(d=0;d<this._pullbackData.length;d++){var At=this._pullbackData[d];At.bidInfo.isCurrent=!1,At.askInfo.isCurrent=!1}for(d=0;d<p.length;d++)for(var b=p[d],S=this,y=0;y<this._prevDetails.length;y++)!function(t){var t=S._prevDetails[t],e=S._getProfile(b.bidInfo)!==S._getProfile(t.bidInfo),i=S._getProfile(b.askInfo)!==S._getProfile(t.askInfo);if(b.price!==t.price||!e&&!i)return;var o=b.price,e=S._pullbackData.findIndex(function(t){return t.price===o}),i=b.bidInfo.volume-t.bidInfo.volume,r=b.bidInfo.tradesCount-t.bidInfo.tradesCount,n=0<S._getProfile(b.bidInfo)-S._getProfile(t.bidInfo),a=b.askInfo.volume-t.askInfo.volume,l=b.askInfo.tradesCount-t.askInfo.tradesCount,s=0<S._getProfile(b.askInfo)-S._getProfile(t.askInfo),c=b.volume-t.volume,t=b.tradesCount-t.tradesCount;-1===e?S._pullbackData.push({bidInfo:{volume:i,tradesCount:r,isCurrent:n},askInfo:{volume:a,tradesCount:l,isCurrent:s},volume:c,tradesCount:t,price:o}):((e=S._pullbackData[e]).bidInfo.volume+=i,e.bidInfo.tradesCount+=r,e.bidInfo.isCurrent=n,e.askInfo.volume+=a,e.askInfo.tradesCount+=l,e.askInfo.isCurrent=s,e.volume+=c,e.tradesCount+=t)}(y)}this._pullbackData=this._handleValue(this._pullbackData,!0)}this._prevIndex=a,this._prevHigh=_,this._prevLow=C,this._prevDetails=jQuery.extend(!0,[],p)}else delete this._prevIndex,delete this._prevHigh,delete this._prevLow,delete this._prevDetails,this._pullbackData=[];var Vt=this._isValidDetails(this._pullbackData),Nt=Vt?l.concat([this._pullbackData]):l,Rt=Vt?a+1:a;r.beginPath();for(var d=N,v=i;d<=Rt;d++,v++){p=(Bt=Vt&&a<d)?Nt[d]:this._handleValue(Nt[d]);if(this._isValidDetails(p)){for(_=-1/0,C=1/0,y=0;y<p.length;y++){g=p[y].price;_=Math.max(_,g),C=Math.min(C,g)}var w=n.xByColumn(v),zt=n.yByValue(_),jt=n.yByValue(C);r.rect(w-f,zt-u/2,o,jt-zt+u),a<=d&&(F=A=void 0,F=d===a?(A=U,X):(A=vt,wt),r.fillStroke({fillColor:A},{strokeColor:F}),r.closePath(),r.beginPath())}}for(d=N,v=i;d<=Rt;d++,v++){var Bt,p=(Bt=Vt&&a<d)?Nt[d]:this._handleValue(Nt[d]);if(this._isValidDetails(p)){for(var P=(w=n.xByColumn(v))-f,Ht=-1/0,Ut=-1/0,Xt=-1/0,y=0;y<p.length;y++)m=p[y],Ht=Math.max(Ht,this._getProfile(m)),Ut=Math.max(Ut,this._getProfile(m.bidInfo)),Xt=Math.max(Xt,this._getProfile(m.askInfo));for(var Gt=void 0,y=0;y<p.length;y++){var Wt,qt,Kt,Yt=(m=p[y]).bidInfo,Zt=m.askInfo,k=m.tradesCount,g=m.price,Jt=this._getProfile(m),x=this._getProfile(m.bidInfo),O=this._getProfile(m.askInfo),$t=O-x,Qt=p[y-1],te=p[y+1],ee=n.yByValue(g),E=ee-u/2,ie=(Gt=0===y?E+u:Gt)-E;if(!Bt){if(Z!==ye.NoBars)if(Z!==ye.DeltaPrintBars){if(this._volumeFilter(k)){var D=void 0,I=void 0;if(Z!==ye.VolumeProfileBars)D=o,I=P;else switch(D=this._getVolumeWidth(Jt,Dt,Ht,o),it){case me.Left:I=P;break;case me.Middle:I=w-D/2;break;case me.Right:I=P+o-D}pe.JsUtil.debug("footprint_no_colors")||(A=void 0,A=J&&x!==O?O<x?pe.ColorUtil.mixColors(tt,$,O?Math.min(1,x/O-1):1):pe.ColorUtil.mixColors(tt,Q,x?Math.min(1,O/x-1):1):tt,r.rect(I,E,D,ie),Gt=E,r.fillStroke({fillColor:A},{strokeColor:G}),r.closePath(),r.beginPath()),Jt!==Dt&&(ft||Jt!==Ht)||(r.rect(P,E,o,ie),r.save(),r.clip(),r.stroke({strokeColor:et,width:2*dt}),r.restore(),Jt===Dt&&r.fill({fillColor:et}),r.closePath(),r.beginPath())}}else for(var T=0;T<2;T++){var F,oe,re=(T?Zt:Yt).tradesCount;this._volumeFilter(re)&&(oe=re=F=A=I=D=void 0,oe=T?(I=P+o-(D=this._getVolumeWidth(O,Tt,Xt,f)),A=nt,F=at,re=O===Tt,O===Xt):(D=this._getVolumeWidth(x,It,Ut,f),I=P,A=ot,F=rt,re=x===It,x===Ut),r.rect(I,E,D,u),r.fill({fillColor:A}),r.closePath(),r.beginPath(),(re||!ft&&oe)&&(r.rect(P+T*f,E,f,ie),r.save(),r.clip(),r.stroke({strokeColor:F,width:2*dt}),r.restore(),r.closePath(),r.beginPath()))}!W||(k=j[d])!==(Wt=H[d])&&(n.yByValue(k),qt=n.yByValue(Wt)-xt/2,Kt=Math.min(4,o),A=k<Wt?q:K,r.rect(P,qt,Kt,ie),r.fill({fillColor:A}),r.closePath(),r.beginPath())}var ne=Math.min(Y.fontSize,u);if(lt!==_e.NoText&&!Et&&ne&&!pe.JsUtil.debug("footprint_no_text")){r.save();var ae=void 0;switch(lt){case _e.BidDeltaAsk:ae=$t.toString();break;case _e.BidTotalAsk:ae=Jt.toString();break;case _e.BidAsk:ae=ht}k=__assign({},Y);if(k.fontSize=ne,Bt&&(k.fillColor=Pt),r.textOptions({align:pe.TextAlign.CENTER,baseline:pe.TextBaseline.MIDDLE}),r.fillText(ae,w,ee,k),!ct)for(var le=lt===_e.BidAsk,T=0;T<2;T++){var M=void 0,se=void 0,ce=void 0,he=void 0,L=void 0,ue=void 0,fe=void 0,fe=T?(M=Zt,se=Ct,ce=gt,he=St,Qt&&(L=Qt.bidInfo),le?(ue=w+Ot/2+st,pe.TextAlign.LEFT):(ue=P-st+o,pe.TextAlign.RIGHT)):(M=Yt,se=mt,ce=_t,he=bt,te&&(L=te.askInfo),le?(ue=w-Ot/2-st,pe.TextAlign.RIGHT):(ue=P+st,pe.TextAlign.LEFT)),de=this._getProfile(M),A=void 0,L=(Bt?A=M.isCurrent?kt:Pt:pt&&L&&((M=this._getProfile(L))*yt<de?A=se:he&&de*yt<M&&(A=ce)),__assign({},Y));L.fontSize=ne,A&&(L.fillColor=A),r.textOptions({align:fe,baseline:pe.TextBaseline.MIDDLE}),r.fillText(de.toString(),ue,ee,L)}r.restore()}}}}}}}},o.prototype._handleValue=function(t,e){if(void 0===e&&(e=!1),!this._isValidDetails(t))return t;for(var i=this.chart.instrument,o=this._settings.main.customTickSize,r=o.enabled?o.value:1,n=e?i.tickSize*r:i.tickSize,a=-1/0,l=1/0,s=0;s<t.length;s++)var c=t[s].price,a=Math.max(a,c),l=Math.min(l,c);for(var h=[],u={},c=l;c<=a;c+=n)!function(e){u[e]=t.filter(function(t){return t.price===e}).reduce(function(t,e){return t.bidInfo.volume+=e.bidInfo.volume,t.bidInfo.tradesCount+=e.bidInfo.tradesCount,t.askInfo.volume+=e.askInfo.volume,t.askInfo.tradesCount+=e.askInfo.tradesCount,t.volume+=e.volume,t.tradesCount+=e.tradesCount,t},{bidInfo:{volume:0,tradesCount:0},askInfo:{volume:0,tradesCount:0},volume:0,tradesCount:0,price:e}),h=Object.values(u).sort(function(t,e){return t.price-e.price})}(c);if(!o.enabled||e)return h;for(var f=[],d=0;d<h.length;d+=o.value){for(var p=pe.JsUtil.clone(h[d]),s=d+1;s<Math.min(d+o.value,h.length);s++){var y=h[s],m=y.bidInfo,_=y.askInfo,C=y.volume,y=y.tradesCount;p.bidInfo.volume+=m.volume,p.bidInfo.tradesCount+=m.tradesCount,p.askInfo.volume+=_.volume,p.askInfo.tradesCount+=_.tradesCount,p.volume+=C,p.tradesCount+=y}for(c=0,s=1;s<o.value;s++)c+=s*i.tickSize;p.price+=c/o.value,f.push(p)}return f},o.prototype._getProfile=function(t){switch(this._settings.main.mode){case e.Volume:return t.volume;case e.TradesCount:return t.tradesCount}},o.prototype._getVolumeWidth=function(t,e,i,o){var r=this._settings.profile,n=r.profileFilter,a=r.filterValue;switch(n){case l.NoProfileFilter:return t*o/i;case l.MaxWidthProfile:return Math.min(o,t*o/a);case l.MinVolumeProfile:return a<=t?t*o/i:0;case l.AutoMaxProfile:return t*o/e}},o.prototype._volumeFilter=function(t){var e=this._settings.volumeFilter,i=e.enabled,o=e.mode,r=e.value;if(!i)return!0;switch(o){case n.GreaterThan:return r<t;case n.LessThan:return t<r}};var e,ye,me,_e,l,Ce,n,i,t=o;function o(){var t=i.call(this)||this;return t._settings={main:{fillColor:"#313131",strokeColor:"#85857A00",barStrokeColor:"#85857A00  ",enableOpenClose:!0,closeOpenColor:"#1ADE5D",openCloseColor:"#FF2E00",mode:e.Volume,customTickSize:{enabled:!1,value:1}},font:{fontFamily:"Open Sans",fontSize:11,fillColor:"#666666",fontWeight:"400"},intraBar:{barStyle:ye.VolumeProfileBars,useDeltaShadingColors:!0,sellShadeBarColor:"#E95050",buyShadeBarColor:"#0C62F7",barColor:"#A9A9A9",barPocColor:"#FFA500",barAlignment:me.Left,sellVolumeBarColor:"silver",sellPocBarColor:"gold",buyVolumeBarColor:"silver",buyPocBarColor:"gold"},text:{textStyle:_e.BidAsk,margin:4,hideSides:!1,separator:"x",initialBarWidth:80,barWidthTextThreshold:60},profile:{profileFilter:l.AutoMaxProfile,filterValue:4e3,autoProfilingRange:Ce.Visible,showPocOnlyOnBiggestBar:!1,strokeWidth:1},volumeFilter:{enabled:!1,mode:n.GreaterThan,value:100},deltaImbalance:{enabled:!0,threshold:3.5,strongBidVolumeColor:"#FF6347",weakBidVolumeColor:"#0C62F7",strongAskVolumeColor:"#00BD62",weakAskVolumeColor:"#0C62F7",enableWeakBidVolume:!1,enableWeakAskVolume:!1},pullback:{enabled:!0,fillColor:"#3F3F3F",strokeColor:"transparent",textColor:"#E5E5E5",currentBidAskColor:"#8B6D00"}},t._pullbackData=[],t._maxBarWidth=16,t._plotThemeKey="footprint",t}pe.FootprintPlot=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__assign=this&&this.__assign||Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},__extends=(!function(Ht){"use strict";var ot,A,V,i,Ut,Xt,Gt,Wt,o,qt="#FFFFFF",Kt={0:"#000000",20:"#0000FF",40:"#00FFFF",60:"#00FF00",80:"#FFFF00",100:"#FF0000"},r={K:1e3,M:1e6,B:1e9},Yt=((t=ot=Ht.VolumeProfileType||(Ht.VolumeProfileType={})).Volume="volume",t.TradesCount="tradesCount",t.Price="price",t.SellVolume="sellVolume",t.BuyVolume="buyVolume",(t=A=Ht.VolumeProfilePeriodType||(Ht.VolumeProfilePeriodType={})).Every="every",t.Last="last",(t=V=Ht.VolumeProfilePeriodUnit||(Ht.VolumeProfilePeriodUnit={})).Bars="bars",t.ToPresent="toPresent",t.AllBars="allBars",t.VisibleBars="visibleBars",(t=i=Ht.VolumeProfileHide||(Ht.VolumeProfileHide={})).LastProfile="lastProfile",t.AllProfiles="allProfiles",(t=Ut=Ht.VolumeProfileAlign||(Ht.VolumeProfileAlign={})).Left="left",t.Right="right",(t=Xt=Ht.VolumeProfileProfileType||(Ht.VolumeProfileProfileType={})).HollowBlocks="hollowBlocks",t.Dots="dots",t.Lines="lines",t.Hollowgram="hollowgram",t.Solidgram="solidgram",t.FilledLine="filledLine",t.HollowLine="hollowLine",t.SolidBlock="solidBlock",(t=Gt=Ht.VolumeProfileProfileColorType||(Ht.VolumeProfileProfileColorType={})).ProfileColor="profileColor",t.PeakValley="peakValley",t.HeatMap="heatMap",t.CustomBlend="customBlend",t.FpShading="fpShading",(t=Wt=Ht.VolumeProfileExtendNakedType||(Ht.VolumeProfileExtendNakedType={})).Closes="closes",t.HighsLows="highsLows",t.ClosesHighsLows="closesHighsLows",(Ht.CustomPeriodState||(Ht.CustomPeriodState={})).Hovered="hovered",{DEFAULT:"default",CUSTOM:"custom",COMPOSITE:"composite",PRICE_STATS:"priceStats"}),t=(Object.freeze(Yt),o=Ht.AdvancedPlot,__extends(N,o),Object.defineProperty(N.prototype,"isEmpty",{get:function(){return this._customPeriods.length<1},enumerable:!0,configurable:!0}),Object.defineProperty(N.prototype,"contentRightOffset",{get:function(){return this.plotStyle===Yt.PRICE_STATS&&this.isRightAlignment?this._priceStatsWidth:0},enumerable:!0,configurable:!0}),Object.defineProperty(N.prototype,"isRightAlignment",{get:function(){return this._settings.general.align===Ut.Right},enumerable:!0,configurable:!0}),N.prototype._handleSettings=function(t){var e=t.general,i=e.period,o=i.date;null!=o&&(i.date=new Date(o)),this._rth.setWorkingTimes(t.session),this._eth.setWorkingTimes(t.eth.session),this._shouldRefreshPeriodsCache(e)&&(this._periodsDataCache={}),!this._settingsHandled&&this._commonVolumeProfilePlotStyles.includes(this.plotStyle)&&(this._needsShift=!0)},N.prototype._shouldRefreshPeriodsCache=function(t){return t.type!==this._settings.general.type||t.vaCorrelation!==this._settings.general.vaCorrelation||t.smoothed.enabled!==this._settings.general.smoothed.enabled||t.smoothed.value!==this._settings.general.smoothed.value||t.customTickSize.enabled!==this._settings.general.customTickSize.enabled||t.customTickSize.value!==this._settings.general.customTickSize.value},N.prototype.getCustomPeriods=function(){return this._customPeriods},N.prototype.removePeriodsIfEmpty=function(){for(var t=0,e=this._customPeriods;t<e.length;t++){var i=e[t],o=i.startIndex,r=i.endIndex;(null==r||r<o)&&(r=o),o=Math.max(o,0),(r=Math.min(r,this.chart.recordCount-1))-o<1&&this.deleteCustomPeriod(i.id)}},N.prototype.createCustomPeriod=function(t){var e=t.startIndex,t=t.endIndex,i=((null==t||t<e)&&(t=e),e=Math.max(e,0),t=Math.min(t,this.chart.recordCount-1),+new Date),e=__assign({id:i,name:null,state:null,startIndex:e,endIndex:t},this._getCustomPeriodHighLow(e,t));return this._customPeriods.push(e),this.chart.setNeedsUpdate(),i},N.prototype.updateCustomPeriod=function(o){var r=this;this._customPeriods=this._customPeriods.map(function(t){if(t.id!==o.id)return t;var t=__assign({},t,o),e=t.startIndex,i=t.endIndex;return i<e&&(i=e),e=Math.max(e,0),i=Math.min(i,r.chart.recordCount-1),__assign({},t,{startIndex:e,endIndex:i},r._getCustomPeriodHighLow(e,i))}),this.chart.setNeedsUpdate()},N.prototype.deleteCustomPeriod=function(e){this._customPeriods=this._customPeriods.filter(function(t){return t.id!==e})},N.prototype._getCustomPeriodHighLow=function(t,e){for(var i=this.chart.dataManager,o=i.getDataSeries(Ht.DataSeriesSuffix.HIGH).values,r=i.getDataSeries(Ht.DataSeriesSuffix.LOW).values,n=-1/0,a=1/0,l=t;l<=e;l++)n=Math.max(n,o[l]),a=Math.min(a,r[l]);return{high:n,low:a}},N.prototype.draw=function(){if(this.visible){var t=this._barDrawParams(),e=t.dates,i=t.startIndex,o=t.endIndex;if(0!==e.length){var r=e.length-1,t=this._settings,n=t.general,a=n.period,l=(n.hide,n.calculateXProfiles),n=n.sessions,s=n.current,c=n.prev,h=n.days,n=t.eth,u=t.splitProfile,t=t.overlayEthOverRth;if(this._startIndex=i,this._endIndex=o,this._labelLines=[],this._periods=[],this._periodsData.set(null,[]),this._periodsData.set(this._settings,[]),this._periodsData.set(n,[]),this.plotStyle===N.Style.DEFAULT){var f=this._rth.periods,d=this._eth.periods,p=void 0;if(u)p=f;else{p=[];if([V.Bars,V.ToPresent,V.AllBars,V.VisibleBars].includes(a.unit))switch(a.unit){case V.Bars:for(var y=l,m=o;p.unshift({startIndex:Math.max(0,m-a.value+1),endIndex:m}),m-=a.value,a.type===A.Every&&0<m&&--y;);break;case V.ToPresent:if(a.date){for(var _=void 0,C=r-1;0<=C;C--)if(+a.date>+e[C]){_=C+1;break}p.unshift({startIndex:_||0,endIndex:r})}break;case V.AllBars:p.unshift({startIndex:0,endIndex:o});break;case V.VisibleBars:p.unshift({startIndex:i,endIndex:o})}else{var g=a.unit;if(Ht.TimeFrame.timeFrameToTimeInterval(this.chart.timeFrame)<=Ht.Session.getPeriodTimeInterval(g)*a.value){var y=l,b=void 0;do{for(var S=e[E=null!=b?b-1:r],v=Ht.Session.getPeriodStartTime(S,g,a.value),w=Ht.Session.getDatePoint(S,g),P=a.value,b=null,C=E-1;0<=C;C--){var k=e[C],x=Ht.Session.getDatePoint(k,g);if(a.type===A.Every&&x!==w){if(!--P){b=C+1;break}w=x}if(a.type===A.Last&&+k<v){b=C+1;break}}if(null==b)b=0;else if(o<b)continue;p.unshift({startIndex:b,endIndex:E})}while(a.type===A.Every&&0<b&&--y)}}}var O=!u||t?p:Ht.Session.getSplittedPeriods(this._rth.periods,this._eth.periods);this._drawPeriods(O),u&&this._drawPeriods(d,n)}else if(this.plotStyle===N.Style.CUSTOM)for(C=0;C<this._customPeriods.length;C++)this._drawPeriod(this._getPeriodData(this._customPeriods[C]));else if(this.plotStyle===N.Style.COMPOSITE){f=this._rth.periods.length?this._rth.periods:{startIndex:0,endIndex:r};this._drawPeriod(this._getPeriodData(f)),t&&this._eth.periods.length&&this._drawPeriod(this._getPeriodData(this._eth.periods),n)}else if(this.plotStyle===N.Style.PRICE_STATS)if(s.enabled||c.enabled||h.enabled){for(var E,w=e[r].getDate(),D=E=r,I=0,T=(s.enabled&&(I=1),c.enabled&&(I=2),void 0),F=(T=h.enabled?(O=h.count-(h.includeCurrentSession?2:1),Math.max(O,I)):I,0),M={1:"current",2:"prev"},C=r-1;-1<=C;C--){C<0&&++F;var L={startIndex:C+1,endIndex:I<F?D:E};if(C<0){this._setPriceStatsPeriodsArgs(L,M[F]);break}x=e[C].getDate();if(x!==w&&(w=x,!(2<++F&&F<T))){if(this._setPriceStatsPeriodsArgs(L,M[F]),T<=F)break;E=C,h.includeCurrentSession||1!==F||(D=C)}}this._drawPriceStats()}else this._priceStatsWidth=0;this._drawLabelLines(),this._periodsData.delete(null),this._periodsData.delete(this._settings),this._periodsData.delete(n)}}},N.prototype._drawPeriods=function(t,e){void 0===e&&(e=null);for(var i=t.length-1,o=0;o<t.length;o++){var r=t[o];r.endIndex>=this._startIndex&&r.startIndex<=this._endIndex&&this._drawPeriod(this._getPeriodData(r),e,null,o===i)}},N.prototype._setPriceStatsPeriodsArgs=function(t,e){var i=this._settings,o=i.general.sessions,r=i.eth,i=i.overlayEthOverRth;o[e=e||"days"].enabled&&(i&&(o=Ht.Session.getLimitedFullPeriods(this._eth.periods,t),i=this._getPeriodData(o),this._priceStatsPeriodsArgs.unshift([i,r,e])),o=Ht.Session.getLimitedFullPeriods(this._rth.periods,t),i=this._getPeriodData(o),this._priceStatsPeriodsArgs.unshift([i,this._settings,e]))},N.prototype._drawPriceStats=function(){for(var i=this,t=-1/0,e=0;e<this._priceStatsPeriodsArgs.length;e++)(l=(a=this._priceStatsPeriodsArgs[e])[0])&&(t=Math.max(t,l.poc));var o=this._getSizeInPixels(this._settings.general.margin),r=Object.values(this._settings.general.sessions).reduce(function(t,e){return t+(e.enabled?i._getSizeInPixels(e.width)+o:0)},0),n=this.isRightAlignment?this.chartPanel.contentFrame.width-r:0;this._priceStatsWidth=r,this.renderer.clearRect(n,0,r,this.chartPanel.contentFrame.height);for(var a,l,e=0;e<this._priceStatsPeriodsArgs.length;e++)(l=(a=this._priceStatsPeriodsArgs[e])[0])&&(l.pocCorrelation=l.poc/t),this._drawPeriod.apply(this,a);this._priceStatsPeriodsArgs=[],this._needsShift&&this._shift()&&(this._needsShift=!1)},N.prototype._shift=function(){for(var t=this._settings.general.margin,e=this._getSizeInPixels(t),i=this._periodsData.get(this._settings),o=0,r=0;r<i.length;r++)o-=i[r].width+e;var n=this.chart,a=n.dateScale,l=(n.recordCount-n.lastVisibleRecord)*a.columnWidth;return!!(o&&o<l)&&(setTimeout(function(){a.scrollOnPixels(o-l),n.setNeedsUpdate(!0)}),!0)},N.prototype._drawPeriod=function(V,t,e,N){void 0===t&&(t=null),void 0===e&&(e=null),void 0===N&&(N=!1);var i,o,r,n=V||{},a=n.startIndex,l=n.endIndex,R=n.periods,s=n.prices,z=n.profiles,j=n.profilesSum,B=n.poc,H=n.pocProfile,U=n.bidProfilesMap,X=n.askProfilesMap,G=n.high,W=n.low,c=n.vaHigh,h=n.vaLow,n=n.pocCorrelation,u=this._commonVolumeProfilePlotStyles.includes(this.plotStyle),q=u&&this._periods.includes(e),f=(q||this._periods.push(e),u||l>=this._startIndex&&a<=this._endIndex),d=this._periodsData.get(t),p=this._barDrawParams(),y=p.renderer,m=p.projection,p=this.chart,_=p.dataManager,C=p.instrument,p=p.dateScale,K=this.chartPanel.layer.size,Y=this.chartPanel.contentFrame.width,g=this._settings,b=g.general,S=b.customTickSize,Z=b.align,J=b.width,$=b.margin,Q=b.sessions,b=g.graphics,tt=b.summaryEnabled,et=b.summaryFont,b=b.showPrices,g=g.highlight,it=g.poc,ot=g.va,g=t||this._settings,t=g.profile,rt=t.type,nt=t.color,at=(t.profileColor,t.widthCorrelation),lt=t.extendNakedPocs,st=t.extendNaked,ct=t.vaInsideOpacity,t=t.vaOutsideOpacity,g=g.lines,v=g.current,ht=g.prev,g=g.dev,S=S.enabled?S.value:1,C=C.tickSize*S,ut=this._getSizeInPixels($),S=u?1:at,ft=(null!=n&&(S*=n),this.plotStyle!==Yt.PRICE_STATS?t:1),$=_.getDataSeries(Ht.DataSeriesSuffix.OPEN).values,at=_.getDataSeries(Ht.DataSeriesSuffix.CLOSE).values,n=$[a],t=at[l],_=u?0:p.columnWidth/2,$=m.xByRecord(a)-_,at=m.xByRecord(l)+_,dt=m.yByValue(0)-m.yByValue(C),p=m.yByValue(B),_=m.yByValue(c),pt=m.yByValue(h);if(u||!s){for(var w=this._getSizeInPixels(e?Q[e].width:J),yt=K.height,P=0,k=0;k<d.length;k++)P+=d[k].width+ut;switch(Z){case Ut.Left:i=P;break;case Ut.Right:i=Y-P}o=0}else{J=dt/2;switch(w=at-(P=$),yt=m.yByValue(0)-m.yByValue(C*s.length),Z){case Ut.Left:i=P;break;case Ut.Right:i=P+w}o=m.yByValue(s[s.length-1])-J}switch(Z){case Ut.Left:r=i+w;break;case Ut.Right:r=i-w}K=Math.min(i,r),C={startIndex:a,endIndex:l,width:w,endX:r,x:i,high:G,low:W,close:t,poc:B,pocY:p,vaHighY:_,vaLowY:pt};if(f){if(!(w<5)){y.closePath(),y.beginPath();var mt;if(q||(y.rect(i,o-1,r-i,yt-1),J=this._settings.general.transparency/100,y.fill({fillColor:"rgba(36,38,44,"+J+")"}),y.closePath(),y.beginPath()),V){var _t=[],Ct=this._settings.general.hide;if(this.shouldDrawPeriods(Ct))for(k=0;k<z.length&&!this.shouldNotDrawLastPeriod(Ct,N);k++){var x=s[k],gt=z[k],bt=U[x],St=X[x],vt=c!==h&&x<=c&&h<=x?ct:ft,O=void 0,wt=it.enabled&&x===B,Pt=ot.enabled&&(x===c||x===h);if(wt||Pt)O=(wt?it:ot).value;else switch(nt.type){case Gt.ProfileColor:O=nt.value;break;case Gt.PeakValley:break;case Gt.HeatMap:var kt=100*gt/H,E=Math.ceil(.05*kt)/.05,D=E&&E-20;O=D===E?Kt[D]:Ht.ColorUtil.mixColors(Kt[D],Kt[E],(kt-D)/(E-D));break;case Gt.CustomBlend:kt=nt.value,E=kt.highColor,D=kt.lowColor;O=Ht.ColorUtil.mixColors(E,D,gt/H);break;case Gt.FpShading:O=bt===St?qt:St<bt?St?Ht.ColorUtil.mixColors(qt,nt.value.buyColor,Math.min(1,bt/St-1)):"#FF0000":bt?Ht.ColorUtil.mixColors(qt,nt.value.sellColor,Math.min(1,St/bt-1)):"#00FF00"}O=Ht.ColorUtil.hexToRgba(O,vt),_t.push(O)}var I=void 0,xt=w*S;if(this.shouldDrawPeriods(Ct))for(k=0;k<z.length&&!this.shouldNotDrawLastPeriod(Ct,N);k++){var x=s[k],gt=z[k],T=m.yByValue(x),F=T-dt/2,Ot=F+dt,Et=rt===Xt.SolidBlock?xt:gt*xt/H,Dt=(O=_t[k])!==_t[k-1],It=O!==_t[k+1],M=void 0;switch(Z){case Ut.Left:M=i+Et;break;case Ut.Right:M=i-Et}var Tt={fillColor:O},Ft={strokeColor:O};switch(k||(I={profileEndX:M,profileMiddleY:T,profileY:Ot}),rt){case Xt.HollowBlocks:y.rect(M,F,Et,dt);break;case Xt.Dots:y.line(i,T,M,T),Ft.lineStyle=Ht.LineStyle.DOT;break;case Xt.Lines:y.line(i,T,M,T);break;case Xt.Hollowgram:k?(Dt&&y.moveTo(I.profileEndX,Ot),y.lineTo(M,Ot)):y.moveTo(M,Ot),y.lineTo(M,F);break;case Xt.Solidgram:Dt?y.moveTo(M,I.profileY):y.lineTo(M,Ot),y.lineTo(M,F),It&&(y.lineTo(i,F),y.lineTo(i,I.profileY),y.lineTo(I.profileEndX,I.profileY));break;case Xt.FilledLine:Dt?y.moveTo(M,T):y.lineTo(M,T),It&&(y.lineTo(i,T),y.lineTo(i,I.profileMiddleY),y.lineTo(I.profileEndX,I.profileMiddleY));break;case Xt.HollowLine:k?(Dt&&y.moveTo(I.profileEndX,I.profileMiddleY),y.lineTo(M,T)):y.moveTo(M,T);break;case Xt.SolidBlock:y.rect(M,F,Et,dt)}It&&([Xt.Solidgram,Xt.FilledLine,Xt.SolidBlock].includes(rt)?y.fill(Tt):y.stroke(Ft),y.closePath(),y.beginPath()),It&&(I={profileEndX:M,profileMiddleY:T,profileY:F})}}if(!q&&e){switch(e){case"current":mt="Current";break;case"prev":mt="Previous";break;default:mt=Q.days.count+" days"}y.textOptions({align:Ht.TextAlign.CENTER,baseline:Ht.TextBaseline.TOP}),y.fillText(mt,(i+r)/2,o+6,{fontFamily:"Open Sans",fontSize:9,fillColor:"#D0D0D2",fontWeight:"400"}),y.closePath(),y.beginPath()}if(v.poc.enabled&&this._drawLine(p,$,at,v.poc.strokeTheme),v.poc.labelEnabled&&this._labelLines.push({label:"POC",value:B,y:p,color:v.poc.strokeTheme.strokeColor}),v.va.enabled&&this._drawLine([_,pt],$,at,v.va.strokeTheme),v.va.labelEnabled&&this._labelLines.push({label:"VA High",value:c,y:_,color:v.va.strokeTheme.strokeColor},{label:"VA Low",value:h,y:pt,color:v.va.strokeTheme.strokeColor}),g.poc.enabled&&this._drawDevPoc(R,0,g.poc.strokeTheme),g.va.enabled&&this._drawDevVa(R,0,g.va.strokeTheme),!u){if(lt)for(k=0;k<d.length;k++){var L=d[k];this._drawLine(L.pocY,Math.max(L.endX,L.x),this._getIntersectBarX(L.endIndex,L.poc),v.poc.strokeTheme)}if(st.enabled)for(k=0;k<d.length;k++){var L=d[k],A=void 0;switch(st.type){case Wt.Closes:A=[L.close];break;case Wt.HighsLows:A=[L.high,L.low];break;case Wt.ClosesHighsLows:A=[L.close,L.high,L.low]}for(var Mt=[],Lt=0;Lt<A.length;Lt++){var At=m.yByValue(A[Lt]);Mt.push(At)}this._drawLine(Mt,Math.max(L.endX,L.x),this._getIntersectBarXs(L.endIndex,A),st.strokeTheme)}if(d.length&&(a=d[d.length-1],ht.poc.enabled&&this._drawLine(a.pocY,i,r,ht.poc.strokeTheme),ht.va.enabled&&this._drawLine([a.vaHighY,a.vaLowY],i,r,ht.va.strokeTheme)),tt){y.textTheme(et),y.textOptions({align:Ht.TextAlign.LEFT,baseline:Ht.TextBaseline.TOP});for(var Vt=["Vol: "+this._formatNumber(j),"Rng: "+this._formatNumber(G-W),"Ch: "+this._formatNumber(t-n)],Nt=-1/0,k=0;k<Vt.length;k++)var Rt=Vt[k],zt=y.textWidth(Rt),Nt=Math.max(Nt,zt);if(Nt<=w)for(var jt=K,Bt=o+yt+8,k=0;k<Vt.length;k++){Rt=Vt[k];y.fillText(Rt,jt,Bt+k*(et.fontSize+4),et)}y.closePath(),y.beginPath()}b&&(f=l=void 0,f=Z===Ut.Left?(l=i+w,Ut.Right):(l=i-w,Ut.Left),y.fillText(this.chartPanel.formatter.format(G),l,o,__assign({},et,{textAlign:f,textBaseline:"bottom"})),y.fillText(this.chartPanel.formatter.format(W),l,o+yt,__assign({},et,{textAlign:f,textBaseline:"bottom"})))}d.push(C)}}else d.push(C)},N.prototype.shouldDrawPeriods=function(t){return!(t.enabled&&t.value===i.AllProfiles)},N.prototype.shouldNotDrawLastPeriod=function(t,e){return t.enabled&&t.value===i.LastProfile&&e},N.prototype._getPeriodData=function(t){if(Array.isArray(t)){if(!t.length)return}else t=[t];var e=Ht.Session.getFullPeriod(t),i=e.startIndex,e=e.endIndex;if(!(e<i)){var o=i+"-"+e;if(this._periodsDataCache[o]&&e!==this.chart.dataManager.barDataSeries().close.length-1)return this._periodsDataCache[o];for(var r=this._settings.general,V=r.type,n=r.vaCorrelation,a=r.smoothed,r=r.customTickSize,l=this.chart,s=l.dataManager,c=l.instrument,l=r.enabled?r.value:1,N=c.tickSize*l,R=s.getDataSeries(Ht.DataSeriesSuffix.HIGH).values,z=s.getDataSeries(Ht.DataSeriesSuffix.LOW).values,j=s.getDataSeries(Ht.DataSeriesSuffix.DETAILS).values,h={},u={},f={},d=-1/0,p=1/0,y=0;y<t.length;y++)for(var B=t[y],H=B.startIndex,U=B.endIndex,m=H;m<=U;m++){var _=j[m],X=R[m],G=z[m],d=Math.max(d,X),p=Math.min(p,G);if(this._isValidDetails(_))for(var C=0;C<_.length;C++){var g=_[C],b=g.bidInfo,S=g.askInfo,W=g.volume,q=g.tradesCount,v=g.price,w=void 0,P=void 0,k=void 0;switch(V){case ot.Volume:w=W,P=b.volume,k=S.volume;break;case ot.TradesCount:w=q,P=b.tradesCount,k=S.tradesCount;break;case ot.Price:w=v,P=b.price,k=S.price;break;case ot.BuyVolume:w=b.volume,P=b.price,k=S.price;break;case ot.SellVolume:w=S.volume,P=b.price,k=S.price}h[v]=(h[v]||0)+w,u[v]=(u[v]||0)+(P||0),f[v]=(f[v]||0)+(k||0)}else if(V===ot.Price)for(v=G;v<=X;v+=c.tickSize)h[v]=(h[v]||0)+v,u[v]=0,f[v]=0}for(var x=Object.entries(h).sort(function(t,e){return+t[0]-+e[0]}),K=Object.entries(u).sort(function(t,e){return+t[0]-+e[0]}),Y=Object.entries(f).sort(function(t,e){return+t[0]-+e[0]}),O=[],E=[],D=[],y=0;y<x.length;y++){w=x[y][1],P=K[y][1],k=Y[y][1];O.push(w),E.push(P),D.push(k)}a.enabled&&1<a.value&&(O=this._getSmoothedValues(O,a.value),E=this._getSmoothedValues(E,a.value),D=this._getSmoothedValues(D,a.value));for(y=0;y<x.length;y++)h[v=x[y][0]]=O[y],u[v]=E[y],f[v]=D[y];for(var I=0,T=-1/0,F=c.tickSize*Math.floor(l/2),Z=d+F-(d-p)%N,v=p+F;v<=Z;v+=N){null==h[v]&&(h[v]=0),null==u[v]&&(u[v]=0),null==f[v]&&(f[v]=0);for(var M=v-F;M<=v+F;M+=c.tickSize)M!==v&&(null!=h[M]&&(h[v]+=h[M],delete h[M]),null!=u[M]&&(u[v]+=u[M],delete u[M]),null!=f[M]&&(f[v]+=f[M],delete f[M]));I+=w=h[v],T=Math.max(T,w)}for(var J=Object.entries(h).sort(function(t,e){return+t[0]-+e[0]}),L=[],A=[],y=0;y<J.length;y++){var $=J[y],v=$[0],w=$[1];L.push(+v),A.push(w)}for(var r=A.findIndex(function(t){return t===T}),s=L[r],Q=I*n,tt=r,et=r,it=T;it<Q;)tt<A.length-1&&(it+=A[++tt]),0<et&&(it+=A[--et]);a=L[tt],l=L[et],n={startIndex:i,endIndex:e,periods:t,prices:L,profiles:A,profilesSum:I,poc:s,pocProfile:T,bidProfilesMap:u,askProfilesMap:f,high:d,low:p,vaHigh:a,vaLow:l};return this._periodsDataCache[o]=n}},N.prototype._getIntersectBarX=function(t,e){for(var i=this.projection,o=this.chart.dataManager,r=o.getDataSeries(Ht.DataSeriesSuffix.HIGH).values,n=o.getDataSeries(Ht.DataSeriesSuffix.LOW).values,a=t+1;a<r.length;a++)if(r[a]>=e&&e>=n[a])return i.xByRecord(a);return this.chartPanel.layer.size.width},N.prototype._getIntersectBarXs=function(t,e){for(var i=[],o=0;o<e.length;o++){var r=this._getIntersectBarX(t,e[o]);i.push(r)}return i},N.prototype._getSmoothedValues=function(t,e){for(var i=[],o=(e-1)/2,r=0;r<t.length;r++){for(var n=t[r],a=1,l=1;l<=o;l++){var s=r-l,c=r+l;0<=s&&(n+=t[s],a++),c<t.length&&(n+=t[c],a++)}i.push(n/a)}return i},N.prototype._drawDevPoc=function(t,e,i){this._drawDevLine("poc",t,e=void 0===e?0:e,i=void 0===i?null:i)},N.prototype._drawDevVa=function(t,e,i){this._drawDevLine(["vaHigh","vaLow"],t,e=void 0===e?0:e,i=void 0===i?null:i)},N.prototype._drawDevLine=function(t,e,i,o){if(void 0===i&&(i=0),void 0===o&&(o=null),Array.isArray(t)||(t=[t]),e){Array.isArray(e)||(e=[e]);for(var r=this.renderer,n=this.projection,a=Ht.Session.getFullPeriod(e),l=a.startIndex,s=[],c=[],h=a.endIndex;l<=h;){var u=Ht.Session.getLimitedPeriods(e,{startIndex:l,endIndex:h}),f=this._getPeriodData(u),d=n.xByRecord(h)+i;s.push(f),c.push(d),h--}for(var p=0;p<t.length;p++)for(var y=t[p],m=void 0,_=0;_<s.length;_++){var f=s[_],d=c[_],C=n.yByValue(f[y]);_?(C!==m&&r.lineTo(d,m),r.lineTo(d,C)):r.moveTo(d,C),m=C}r.stroke(o||this._strokeTheme),r.closePath(),r.beginPath()}},N.prototype._formatNumber=function(t){for(var e in r){var i=t/r[e];if(1<=i&&i<1e3)return i.toFixed(2)+e}return t.toFixed(2)},N.Style=Yt,N.defaults={plotStyle:Yt.DEFAULT},N);function N(t){var e=o.call(this,t)||this;return e._strokeTheme={width:1,strokeColor:Kt[80],lineStyle:Ht.LineStyle.SOLID},e._sessionSettings={session:null,profile:{type:Xt.Solidgram,color:{type:Gt.ProfileColor,value:"#0C62F7"},widthCorrelation:.5,extendNakedPocs:!0,extendNaked:{enabled:!1,type:Wt.ClosesHighsLows,strokeTheme:__assign({},e._strokeTheme,{strokeColor:"#0C62F7"})},vaInsideOpacity:.5,vaOutsideOpacity:.5},lines:{current:{poc:{enabled:!0,strokeTheme:{width:1,strokeColor:Kt[80],lineStyle:Ht.LineStyle.SOLID},labelEnabled:!1},va:{enabled:!0,strokeTheme:{width:1,strokeColor:Kt[80],lineStyle:Ht.LineStyle.SOLID},labelEnabled:!1}},prev:{poc:{enabled:!1,strokeTheme:{width:1,strokeColor:"#8D8E30",lineStyle:Ht.LineStyle.SOLID}},va:{enabled:!1,strokeTheme:{width:1,strokeColor:"#8D8E30",lineStyle:Ht.LineStyle.SOLID}}},dev:{poc:{enabled:!1,strokeTheme:{width:1,strokeColor:"#8D8E30",lineStyle:Ht.LineStyle.SOLID}},va:{enabled:!1,strokeTheme:{width:1,strokeColor:"#8D8E30",lineStyle:Ht.LineStyle.SOLID}}}}},e._settings=__assign({general:{type:ot.Price,period:{type:A.Every,value:2,unit:Ht.SessionPeriodUnit.Week,date:null},hide:{enabled:!1,value:i.LastProfile},vaCorrelation:.7,smoothed:{enabled:!1,value:9},customTickSize:{enabled:!1,value:5},calculateXProfiles:999,align:Ut.Right,width:{value:70,unit:Ht.IndicatorSizeUnit.Pixel},margin:{value:4,unit:Ht.IndicatorSizeUnit.Pixel},sessions:{current:{enabled:!0,width:{value:70,unit:Ht.IndicatorSizeUnit.Pixel}},prev:{enabled:!0,width:{value:70,unit:Ht.IndicatorSizeUnit.Pixel}},days:{enabled:!0,count:10,includeCurrentSession:!1,width:{value:70,unit:Ht.IndicatorSizeUnit.Pixel}}},transparency:10},graphics:{summaryEnabled:!0,showPrices:!0,summaryFont:{fontFamily:"Open Sans",fontSize:12,fillColor:"#0C62F7",fontWeight:"400"}}},Ht.JsUtil.clone(e._sessionSettings),{eth:Ht.JsUtil.merge(e._sessionSettings,{profile:{color:{value:"#0C62F7"}}}),splitProfile:!1,overlayEthOverRth:!1,highlight:{poc:{enabled:!0,value:"#A1A2A5"},va:{enabled:!0,value:"#A1A2A5"}}}),e._priceStatsWidth=0,e._periodsData=new Map,e._periods=[],e._periodsDataCache={},e._customPeriods=[],e._priceStatsPeriodsArgs=[],e._commonVolumeProfilePlotStyles=[Yt.COMPOSITE,Yt.PRICE_STATS],e._needsShift=!1,e._plotThemeKey="volumeProfile",setTimeout(function(){e.chart&&e.chart.setNeedsUpdate()},1e3),e}Ht.VolumeProfilePlot=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__assign=this&&this.__assign||Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},tableMargin=(!function(s){"use strict";(t=c=s.SessionStatsStyle||(s.SessionStatsStyle={})).Line="line",t.Block="block";h=s.AdvancedPlot,__extends(e,h),Object.defineProperty(e.prototype,"rigthMargin",{get:function(){return this._getSizeInPixels(this._settings.general.margin)},enumerable:!0,configurable:!0}),e.prototype._onChartPanelChanged=function(t){h.prototype._onChartPanelChanged.call(this,t),this.chart&&(t=this.chart.dataManager,this._opens=t.getDataSeries(s.DataSeriesSuffix.OPEN).values,this._highs=t.getDataSeries(s.DataSeriesSuffix.HIGH).values,this._lows=t.getDataSeries(s.DataSeriesSuffix.LOW).values,this._closes=t.getDataSeries(s.DataSeriesSuffix.CLOSE).values)},e.prototype._handleSettings=function(t){t=t.workingTimes;this._rth.setWorkingTimes(t.rth),this._eth.setWorkingTimes(t.eth),this._setLinesData()},e.prototype._setLinesData=function(){for(var t in this._linesData){var e;this._linesData.hasOwnProperty(t)&&(e=(t=this._linesData[t]).getPeriod(),t.period=e,t.value=e&&t.getValue(e))}},e.prototype.draw=function(){if(this.visible){var t=this._barDrawParams(),e=t.renderer,i=t.projection,t=t.dates;if(0!==t.length){var o,r,n,a,l,s,c,h,t=this._settings,u=t.general.width,f=t.lines;for(o in this._labelLines=[],e.beginPath(),f)f.hasOwnProperty(o)&&(r=f[o],n=(l=this._linesData[o]).period,a=l.value,l=l.getValue,r.enabled&&n&&null!=a&&a!==1/0&&a!==-1/0&&(h=n.startIndex,s=n.endIndex,h=i.xByRecord(h),s=i.xByRecord(s),c=i.yByValue(a),this._drawLine(c,h,s,r.strokeTheme),r.devEnabled&&this._drawDevLine(n,l,r.strokeTheme),r.labelEnabled&&(h=this._getSizeInPixels(u),this._labelLines.push({label:r.label,value:a,y:c,color:r.strokeTheme.strokeColor,width:h}))));this._drawLabelLines()}}},e.prototype._drawDevLine=function(t,e,i){for(var o,r=this.renderer,n=this.projection,a=t.startIndex,l=t.endIndex,s=l;a<=s;){var c=e({startIndex:a,endIndex:s}),h=n.xByRecord(s),c=n.yByValue(c);s===l?r.moveTo(h,c):(c!==o&&r.lineTo(h,o),r.lineTo(h,c)),o=c,--s}r.stroke(__assign({},i,{strokeColor:"red"})),r.closePath(),r.beginPath()},e.prototype._drawPrevLabelLine=function(t){var e=t.renderer,i=t.endX,o=t.width,r=t.y,n=t.lineEndX,t=t.strokeTheme;if(this._settings.general.style===c.Line)h.prototype._drawPrevLabelLine.call(this,{renderer:e,endX:i,width:o,y:r,lineEndX:n,strokeTheme:t});else{var a=this.chart.dateScale.columnWidth;if(!(a<3)){for(var i=i-o,o=this.chart.dataManager.getDataSeries(s.DataSeriesSuffix.DATE).leftNearestVisibleValueIndex(this.chart.dateScale.projection.columnByX(i)),l=this.chart.dateScale.projection.xByColumn(o,!1);l<=n;l+=a)e.rect(l+4,r-6,a-8,12);e.stroke(__assign({},t,{lineStyle:s.LineStyle.SOLID})),e.closePath(),e.beginPath()}}},e.prototype.getLabelTheme=function(){return this._settings.font};var c,h,t=e;function e(t){var o=h.call(this,t)||this;return o._settings={general:{style:c.Line,width:{value:200,unit:s.IndicatorSizeUnit.Pixel},margin:{value:10,unit:s.IndicatorSizeUnit.Pixel}},font:{fontFamily:"Open Sans",fontSize:10,fillColor:"#0C62F7",fontWeight:"400"},workingTimes:{rth:null,eth:null},lines:{rthHigh:{enabled:!0,strokeTheme:{width:1,strokeColor:"#FFFF00",lineStyle:s.LineStyle.SOLID},devEnabled:!1,labelEnabled:!0,label:"RTH High"},rthLow:{enabled:!0,strokeTheme:{width:1,strokeColor:"#FFFF00",lineStyle:s.LineStyle.SOLID},devEnabled:!1,labelEnabled:!0,label:"RTH Low"},ethHigh:{enabled:!0,strokeTheme:{width:1,strokeColor:"#FFFF00",lineStyle:s.LineStyle.SOLID},devEnabled:!1,labelEnabled:!0,label:"ETH High"},ethLow:{enabled:!0,strokeTheme:{width:1,strokeColor:"#FFFF00",lineStyle:s.LineStyle.SOLID},devEnabled:!1,labelEnabled:!0,label:"ETH Low"},ibHigh:{enabled:!0,strokeTheme:{width:1,strokeColor:"#FFFF00",lineStyle:s.LineStyle.SOLID},devEnabled:!1,labelEnabled:!0,label:"IB High"},ibLow:{enabled:!0,strokeTheme:{width:1,strokeColor:"#FFFF00",lineStyle:s.LineStyle.SOLID},devEnabled:!1,labelEnabled:!0,label:"IB Low"},prevRthHigh:{enabled:!0,strokeTheme:{width:1,strokeColor:"#FFFF00",lineStyle:s.LineStyle.SOLID},devEnabled:!0,labelEnabled:!0,label:"Prev RTH High"},prevRthLow:{enabled:!0,strokeTheme:{width:1,strokeColor:"#FFFF00",lineStyle:s.LineStyle.SOLID},devEnabled:!1,labelEnabled:!0,label:"Prev RTH Low"},rthMid:{enabled:!0,strokeTheme:{width:1,strokeColor:"#FFFF00",lineStyle:s.LineStyle.SOLID},devEnabled:!1,labelEnabled:!0,label:"RTH Mid"},ethMid:{enabled:!0,strokeTheme:{width:1,strokeColor:"#FFFF00",lineStyle:s.LineStyle.SOLID},devEnabled:!1,labelEnabled:!0,label:"ETH Mid"},rthSettle:{enabled:!0,strokeTheme:{width:1,strokeColor:"#FFFF00",lineStyle:s.LineStyle.SOLID},devEnabled:!1,labelEnabled:!0,label:"RTH Settle"},rthOpen:{enabled:!0,strokeTheme:{width:1,strokeColor:"#FFFF00",lineStyle:s.LineStyle.SOLID},devEnabled:!1,labelEnabled:!0,label:"RTH Open"},prevWkHigh:{enabled:!0,strokeTheme:{width:1,strokeColor:"#FFFF00",lineStyle:s.LineStyle.SOLID},devEnabled:!1,labelEnabled:!0,label:"Prev WK High"},prevWkLow:{enabled:!0,strokeTheme:{width:1,strokeColor:"#FFFF00",lineStyle:s.LineStyle.SOLID},devEnabled:!1,labelEnabled:!0,label:"Prev WK Low"}}},o._getHigh=function(t){var e=-1/0;if(null==o._highs||0==o._highs.length)return e;for(var i=t.startIndex;i<=t.endIndex;i++)e=Math.max(e,o._highs[i]);return e},o._getLow=function(t){var e=1/0;if(null==o._lows||0==o._lows.length)return e;for(var i=t.startIndex;i<=t.endIndex;i++)e=Math.min(e,o._lows[i]);return e},o._getMid=function(t){return(o._getHigh(t)+o._getLow(t))/2},o._linesData={rthHigh:{getPeriod:function(){return o._rth.getPeriod()},getValue:o._getHigh},rthLow:{getPeriod:function(){return o._rth.getPeriod()},getValue:o._getLow},ethHigh:{getPeriod:function(){return o._eth.getPeriod()},getValue:o._getHigh},ethLow:{getPeriod:function(){return o._eth.getPeriod()},getValue:o._getLow},ibHigh:{getPeriod:function(){return o._rth.getInitialPeriod()},getValue:o._getHigh},ibLow:{getPeriod:function(){return o._rth.getInitialPeriod()},getValue:o._getLow},prevRthHigh:{getPeriod:function(){return o._rth.getPeriodAgoOrOlder(1)},getValue:o._getHigh},prevRthLow:{getPeriod:function(){return o._rth.getPeriodAgoOrOlder(1)},getValue:o._getLow},rthMid:{getPeriod:function(){return o._rth.getPeriod()},getValue:o._getMid},ethMid:{getPeriod:function(){return o._eth.getPeriod()},getValue:o._getMid},rthSettle:{getPeriod:function(){return o._rth.getPeriod(1)},getValue:function(t){if(o._closes.length)return o._closes[t.endIndex]}},rthOpen:{getPeriod:function(){return o._rth.getPeriod()},getValue:function(t){if(o._opens&&o._opens.length)return o._opens[t.startIndex]}},prevWkHigh:{getPeriod:function(){return s.Session.getPeriod(o._dates,s.SessionPeriodUnit.Week,1)},getValue:o._getHigh},prevWkLow:{getPeriod:function(){return s.Session.getPeriod(o._dates,s.SessionPeriodUnit.Week,1)},getValue:o._getLow}},o._plotThemeKey="sessionStats",o}s.SessionStatsPlot=t}(StockChartX=StockChartX||{}),!function(i){"use strict";var d,t;(i.TableStyle||(i.TableStyle={})).BAR_STATS="barStatus",(t=d=d||{}).LEFT="left",t.CENTER="center",t.RIGHT="right",(t=i.TableType||(i.TableType={})).TITLE="title",t.BARS="bars";function e(){this.height=90,this.titles=[],this.offsetY=0,this.settings={},this.rowsSettings={}}e.prototype.draw=function(t){var e=t.params,i=t.valueMap,o=t.columnWidth,r=t.width,t=t.height;this.height=this.titles.length*this.settings.rowHeight,this._drawBars({params:e,valueMap:i,titles:this.titles,columnWidth:o,height:t}),this._drawTitle({titles:this.titles,valueMap:i,params:e,width:r,columnWidth:o,height:t})},e.prototype._drawTitle=function(t){var e=t.titles,i=t.params,o=t.valueMap,r=t.columnWidth,n=t.width,t=(t.height,i.projection),i=i.renderer;this._drawColumn({values:e,valueMap:o,widthBar:r,width:n,projection:t,renderer:i})},e.prototype._drawBars=function(t){var e=t.params,i=t.valueMap,o=t.titles,r=t.columnWidth,n=(t.height,o.length);if(n)for(var a=e.projection,l=e.renderer,s=0<e.startIndex?e.startIndex-1:0,t=this.settings.font,c=(l.textTheme({fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fillColor:t.fontColor}),this.offsetY),h=0;h<n;h++){var u=i[o[h]].values,f=u.length,f=e.endIndex<f?e.endIndex+1:f;this._drawRow({values:u,widthBar:r,title:this.titles[h],valueMap:i,y:c,startIndex:s,endIndex:f,projection:a,renderer:l}),c+=this.settings.rowHeight+this.settings.rowMargin}},e.prototype._drawRow=function(t){for(var e=t.values,i=t.widthBar,o=(t.index,t.y),r=t.title,n=t.valueMap,a=t.startIndex,l=t.endIndex,s=t.projection,c=t.renderer,h=a;h<l;h++){var u=s.xByRecord(h);this._drawCell({value:e[h],title:r,x:u,y:o,valueMap:n,widthBar:i,renderer:c})}},e.prototype._drawColumn=function(t){var e=t.values,i=t.widthBar,o=t.valueMap,r=t.projection,n=t.width,a=t.renderer,t=t.record,i=Math.max(i,50),l="left"===this.settings.header.position?0:n-i+1;t&&(l=r.xByRecord(t));for(var s=this.settings.rowHeight,c=this.settings.rowMargin,h=this.offsetY,u=0;u<e.length;u++)this._drawCell({value:e[u],x:l,y:h,valueMap:o,widthBar:i,renderer:a,isHeader:!0}),h+=s+c},e.prototype._drawCell=function(t){var e=t.value,i=t.x,o=t.y,r=t.widthBar,n=t.renderer,a=t.valueMap,l=t.title,t=t.isHeader,t=void 0!==t&&t,s=(n.beginPath(),10<r&&(r-=this.settings.xPadding/2,i-=this.settings.xPadding/2),t||(i-=r/2),this.settings.rowHeight),c=(t?(u=this.settings.header.backColor,e=a[e].label):((c=this.rowsSettings[l]).positive&&0<e?u=c.positive:c.negative?u=c.negative:c.background&&(u=c.background),u=null!=e&&""!=e?p(u,0<e?e/a[l].max:e/a[l].min):"transparent"),n.rect(i,o,r,s),n.fill({fillColor:u}),null==e?"":e.toString());if(!(r<22||this.settings.rowHeight<this.settings.font.fontSize)){var h=this.settings.marginText,a=this.settings.font,l=r-2*h,u=o+s/2+a.fontSize/2,f=0,e=(t?this.settings.header:this.settings.font).textAlign,o=t?this.settings.header.textColor:a.fontColor;switch(n.textOptions({align:e}),e){case d.RIGHT:f=i+r-h;break;case d.CENTER:f=i+r/2;break;case d.LEFT:f=i+h}n.fillText(c,f,u,{fontFamily:a.fontFamily,textAlign:e,fontSize:a.fontSize,fontStyle:a.fontStyle,fillColor:o,maxWidth:l,textBaseline:"alphabetic"})}},i.Table=e;r=function(t,e){return t&&t.startsWith("#")?i.ColorUtil.hexToRgba(t,e):t&&t.startsWith("rgb")?"rgba("+(t=t.match(/\d+/g))[0]+","+t[1]+","+t[2]+","+e+")":void 0},n={};var r,n,p=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i,o=t.join("|");return o in n?n[o]:(i=r.apply(void 0,t),n[o]=i)}}(StockChartX=StockChartX||{}),30),labelMargin=8,__extends=(!function(f){"use strict";function t(){this.valueMap={},this._settings={},this._extraTables=[],this._rowsSettings={},this._titles=[],this.extraTableSettings=[]}Object.defineProperty(t.prototype,"titles",{set:function(e){this._titles=e,this._extraTables.forEach(function(t){return t.titles=e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowsSettings",{set:function(t){var e=this;this._rowsSettings=jQuery.extend({},this._rowsSettings,t),this._extraTables.forEach(function(t){return t.rowsSettings=e._rowsSettings})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"settings",{get:function(){return this._settings},set:function(t){var e=this;this._settings=jQuery.extend({},this._settings,t),this._extraTables.forEach(function(t){return t.settings=e._settings})},enumerable:!0,configurable:!0}),t.prototype.addNewTables=function(t){void 0===t&&(t=1);for(var e=0;e<t;e++){var i=new f.Table;i.titles=this._titles,i.settings=this._settings,i.rowsSettings=this._rowsSettings,this._extraTables.push(i)}},t.prototype.deleteTable=function(t){void 0===t&&(t=1);for(var e=0;e<t;e++)this._extraTables.shift()},t.prototype.draw=function(t){var o=this,r=t.params,n=t.columnWidth,a=t.height,l=t.valueMaps,s=t.width,c=0,h=r.renderer,u=0;this._extraTables.length&&(u=tableMargin),this._extraTables.forEach(function(t,e){var i=o.extraTableSettings[e].name;1<o._extraTables.length&&h.fillText(null!=i?i:"",labelMargin,c+u/2,{fontSize:11,fillColor:"#fff",textBaseline:"top",textAlign:f.TextAlign.LEFT}),t.offsetY=c+u,t.draw({params:r,valueMap:l[e],columnWidth:n,height:a,width:s}),c+=t.height+u})},f.MultiTable=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__assign=this&&this.__assign||Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},__awaiter=this&&this.__awaiter||function(n,a,l,s){return new(l=l||Promise)(function(t,e){function i(t){try{r(s.next(t))}catch(t){e(t)}}function o(t){try{r(s.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(i,o)}r((s=s.apply(n,a||[])).next())})},__generator=this&&this.__generator||function(o,r){var n,a,l,s={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(i){return function(t){var e=[i,t];if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(l=a[2&e[0]?"return":e[0]?"throw":"next"])&&!(l=l.call(a,e[1])).done)return l;switch(a=0,(e=l?[0,l.value]:e)[0]){case 0:case 1:l=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,a=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(l=0<(l=s.trys).length&&l[l.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!l||e[1]>l[0]&&e[1]<l[3])){s.label=e[1];break}if(6===e[0]&&s.label<l[1]){s.label=l[1],l=e;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(e);break}l[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(o,s)}catch(t){e=[6,t],a=0}finally{n=l=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},__extends=(!function(p){"use strict";var i=jQuery;p.ZIndexVolume=29,p.IndicatorDataSeries={OPEN:"Open",HIGH:"High",LOW:"Low",CLOSE:"Close",VOLUME:"Volume",DETAILS:"Details",MEDIAN:"Median",TYPICAL:"Typical",WEIGHTED:"Weighted"},Object.freeze(p.IndicatorDataSeries),p.IndicatorParam={SOURCE:"Source",SOURCE2:"Source2",PERIODS:"Periods",R2_SCALE:"R2 Scale",STANDARD_DEVIATIONS:"Standard Deviations",MA_PERIOD:"Moving Average Period",SMOOTH:"Smooth",MA_TYPE:"Moving Average Type",SHIFT:"Shift",BAND_PCT:"Band PCT",PCT_K_PERIODS:"%K Periods",PCT_K_SMOOTHING:"%K Smoothing",PCT_K_DOUBLE_SMOOTHING:"%K Double Smoothing",PCT_D_PERIODS:"%D Periods",PCT_D_MA_TYPE:"%D Moving Average Type",RATE_OF_CHANGE:"Rate of Change",SHORT_CYCLE:"Short Cycle",LONG_CYCLE:"Long Cycle",SIGNAL_PERIODS:"Signal Periods",LINE_WIDTH:"Line Width",LINE_STYLE:"Line Style",LINE_COLOR:"Line Color",LINE_ENABLED:"Line Enabled",LINE2_WIDTH:"Line 2 Width",LINE2_STYLE:"Line 2 Style",LINE2_COLOR:"Line 2 Color",LINE2_ENABLED:"Line 2 Enabled",LINE3_WIDTH:"Line 3 Width",LINE3_STYLE:"Line 3 Style",LINE3_ENABLED:"Line 3 Enabled",LINE3_COLOR:"Line 3 Color",LINE4_WIDTH:"Line 4 Width",LINE4_STYLE:"Line 4 Style",LINE4_COLOR:"Line 4 Color",LINE4_ENABLED:"Line 5 Enabled",LINE5_WIDTH:"Line 5 Width",LINE5_STYLE:"Line 5 Style",LINE5_COLOR:"Line 5 Color",LINE5_ENABLED:"Line 6 Enabled",LABEL_COLOR:"Label Color",LABEL_ENABLED:"Label Enabled",LABEL2_COLOR:"Label 2 Color",LABEL2_ENABLED:"Label 2 Enabled",LABEL3_COLOR:"Label 3 Color",LABEL3_ENABLED:"Label 3 Enabled",LABEL4_COLOR:"Label 4 Color",LABEL4_ENABLED:"Label 4 Enabled",FILL_ABOVE:"Fill Above",FILL_BELOW:"Fill Below",FILL_ENABLED:"Fill Enabled",FAST:"Fast",SLOW:"Slow",VOLUME_DIVISOR:"Volume Divisor",OFFSET_MULTIPLIER:"Offset Multiplier",ENVELOPE_PERCENTAGE:"Envelope Percentage",BAR_COUNT:"Bar Count",Q_PERIODS:"%Q Periods",T_COUNT:"Count",V_FACTOR:"Factor",FORECAST:"Forecast",INTERMEDIATE:"Intermediate",VOLATILITY_PERIOD:"Volatility Period",BARS_REQUIRED_TO_PLOT:"Bars Required To Plot",EMA1:"ema1",EMA2:"ema2",CONVERSION_PERIODS:"Conversion Line Periods",BASE_PERIODS:"Base Line Periods",LOGIN_SPAN2_PERIODS:"Logging Span2 Periods",DISPLACEMENT:"Displacement",LIMIT_VALUE:"Limit Value"},Object.freeze(p.IndicatorParam),p.IchimokuDataSeriesNames={Tenka:"Tenkan Sen",Kijun:"Kijun Sen",Chikou:"Chikou Span",SenkouA:"Senkou Span A",SenkouB:"Senkou Span B"},Object.freeze(p.IchimokuDataSeriesNames);var l="scxPanelTitleCaption",s="scxPanelTitleIcon",c="scxIndicatorRemoveIcon",h="scxPanelTitleValue",e="scxIndicatorCollapseHide",o="scxIndicatorCollapseShow",u="scxIndicatorTitle",t=(p.AutoScaleMultiplierValue=5,Object.defineProperty(r,"registeredIndicators",{get:function(){return this._indicators.registeredItems},enumerable:!0,configurable:!0}),r.register=function(t){this._indicators.register(t.className,t)},r.deserialize=function(t){if(!t)return null;var e="string"==typeof t?JSON.parse(t):t,e=this._indicators.createInstance(e.className);return e.loadState(t),e},r._indicators=new p.ClassRegistrar,r);function r(){}n=p.IndicatorBase,__extends(f,n),Object.defineProperty(f,"className",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"chart",{get:function(){return this._chart},set:function(t){if(t&&!(t instanceof p.Chart))throw new TypeError("Chart must be an instance of StockChartX.Chart.");this._removeControls(),(this._chart=t)&&this._options.valueScaleIndex&&(this.valueScale=this._chart.valueScales[this._options.valueScaleIndex]),this._onChartChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"chartPanel",{get:function(){return this._panel},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"valueScale",{get:function(){return this._valueScale},set:function(t){if(t&&!(t instanceof p.ValueScale))throw new TypeError("Value scale must be an instance of StockChartX.ValueScale.");this._valueScale=t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"isOverlay",{get:function(){return this._isOverlay},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"panelHeightRatio",{get:function(){return this._options.panelHeightRatio},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"className",{get:function(){return this.constructor.className},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"showValueMarkers",{get:function(){return this._options.showValueMarkers},set:function(t){this._options.showValueMarkers!==(t=!!t)&&(this._options.showValueMarkers=t,this.updateTitleControlsVisibility())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"coloredVolumeTheme",{get:function(){return this._options.coloredVolumeTheme},set:function(t){this._options.coloredVolumeTheme=t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"showValuesInTitle",{get:function(){return this._options.showValuesInTitle},set:function(t){this._options.showValuesInTitle!==(t=!!t)&&(this._options.showValuesInTitle=t,this.updateTitleControlsVisibility())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"allowContextMenu",{get:function(){return this._options.allowContextMenu},set:function(t){this._options.allowContextMenu!==(t=!!t)&&(this._options.allowContextMenu=t,this.updateTitleControlsVisibility())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"showParamsInTitle",{get:function(){return this._options.showParamsInTitle},set:function(t){this._options.showParamsInTitle!==(t=!!t)&&(this._options.showParamsInTitle=t,this.updateTitleControlsVisibility())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"showTitle",{get:function(){return this._options.showTitle},set:function(t){this._options.showTitle!==t&&(this._options.showTitle=t,this.updateTitleControlsVisibility())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"showLineLevels",{get:function(){return this._options.showLineLevels},set:function(t){this._options.showLineLevels=t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"allowSettingsDialog",{get:function(){return this._options.allowSettingsDialog},set:function(t){this._options.allowSettingsDialog!==(t=!!t)&&(this._options.allowSettingsDialog=t)},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"parameters",{get:function(){return this._options.parameters},set:function(t){this._options.parameters=t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"fieldNames",{get:function(){return this._dataSeriesNames},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"plots",{get:function(){for(var t=[],e=0,i=this._plotItems;e<i.length;e++){var o=i[e];t.push(o.plot)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"linePlots",{get:function(){for(var t=[],e=0,i=this._plots;e<i.length;e++){var o=i[e];"label"!==o.plotThemeKey&&t.push(o)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"labelPlots",{get:function(){for(var t=[],e=0,i=this._plots;e<i.length;e++){var o=i[e];"label"===o.plotThemeKey&&t.push(o)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"visible",{get:function(){return this._options.visible},set:function(t){this._options.visible=t=!!t;for(var e=0,i=this._plotItems.length;e<i;e++){var o=this._plotItems[e].plot;o&&(o.visible=t)}},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"zIndex",{get:function(){return this._options.zIndex},set:function(t){this._options.zIndex=t;for(var e=0,i=this.plots;e<i.length;e++)i[e].zIndex=this._options.zIndex},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"canMergeUp",{get:function(){return 0<this._panel.getIndex()},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"canMergeDown",{get:function(){return this._panel.getIndex()<this.chart.chartPanels.length-1},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"canUnmergeUp",{get:function(){return 1<this._panel.indicators.length&&this._panel!==this.chart.mainPanel},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"canUnmergeDown",{get:function(){return 1<this._panel.indicators.length||this._panel===this.chart.mainPanel},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"isInitialized",{get:function(){return 0<this._plotItems.length},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"values",{get:function(){return this.updateIndicator(),this._values},set:function(t){this._values=t},enumerable:!0,configurable:!0}),f.prototype.getPlotName=function(t){return""},f.prototype.getPlots=function(){return this._plotItems.map(function(t){return t.plot})},f.prototype.serialize=function(){var t=this._panel,e=(t&&(this._options.panelHeightRatio=t.heightRatio),this.valueScale?this._options.valueScaleIndex=this.valueScale.index:delete this._options.valueScaleIndex,i.extend(!0,{},this._options));return t&&(e.panelIndex=t.getIndex()),e.className=this.className,e._prevParams=this._options.parameters,e.zIndex=this.zIndex,this.removeLineLevels(),e},f.prototype._initPanel=function(){var t,e=this.className;e===p.VOL.className||e===p.VolumeUpDown.className||e===p.ADL.className||e===p.VOLMA.className||e===p.VolumeOscillator.className||e===p.OBV.className||e===p.VROC.className||e===p.ChaikinOscillator.className?(t=new p.IntlNumberFormat,e===p.VROC.className?t.setDecimalDigits(2):t.setDecimalDigits(0),this._panel&&(this._panel.valueScale.formatter=t,this._panel.valueScale.calibrator.formater=t,this._panel.valueScale.calibrator.divider=1e6,this._panel.valueScale.calibrator.suffix="M")):this._panel&&(this._panel.valueScale.calibrator.divider=null,this._panel.valueScale.calibrator.suffix=null)},f.prototype._updatePlotItem=function(t){return!1},f.prototype._needsCustomScale=function(){return this.className===p.VOL.className||this.className===p.VolumeUpDown.className},f.prototype.clearDataSeries=function(t){},f.prototype.update=function(t){if(void 0===t&&(t=!1),this._resetValues(),this.setDefaultSettings(),this.chart){this.setupIndicator();for(var e=this.chart.recordCount,i=0,o=this._values.dataSeriesArray;i<o.length;i++){var r=o[i];r.initialize(e+1,r.name)}for(var n=0;n<=e+1;n++)this.updateIndicator(n);if(this._panel||this._addPanel(),1!==this._panel.state||this._panel.visible){this._initPanelTitle(t);for(var a=0,l=this._plotItems;a<l.length;a++){var s=l[a];this._panel.removePlot(s.plot)}if(0!==this._plotItems.length){for(n=0;n<this._plotItems.length;n++){var c,h=this._plotItems[n];this._updatePlotItem(n)||(c=this._values.get(n).toDataSeries(0),c=this._ichimokuSeries(c),c=this._dataSeriesPeriod(c),h.plot=this._plots[n],h.plot.dataSeries=c,h.dataSeries=c,c=void(h.plot.showValueMarkers=this.showValueMarkers),c=h.plot.plotStyle===p.HistogramPlot.Style.COLUMN?this._getHistogramTheme(n):this._getTheme(h.plot,n),h.plot.theme=c,h.color=this._getColor(h.plot)),h.plot.visible=this._getVisible(h.plot),h.plot.valueScale=this._valueScale,this.zIndex&&(h.plot.zIndex=this.zIndex)}this._needsCustomScale&&this._setAutoScaleMultiplier(this.valueScale);for(var u=0,f=this._plotItems;u<f.length;u++){var s=f[u],d=this._getColor(s.plot);this._addPanelPlot(s.plot,d),s.plot.update()}this._fillPlot&&this._drawFillPlot(),this.updateHoverRecord(),this._updatePanelTitle(),this.removeLineLevels(),this.showLineLevels&&this._panel.addDrawings(this._lineLevels)}}}},f.prototype._ichimokuSeries=function(t){var e=t;return this.className===p.Ichimoku.className&&(t.name===p.IchimokuDataSeriesNames.Chikou&&(e=this.shiftInToThePast(t,this.displacement)),t.name!==p.IchimokuDataSeriesNames.SenkouA&&t.name!==p.IchimokuDataSeriesNames.SenkouB||(e=this.shiftInToTheFuture(t,this.displacement))),e},f.prototype._getTheme=function(t,e){return"label"===t.plotThemeKey?this._getLabelTheme(e):this._lineTheme(e)},f.prototype._getColor=function(t){t=t.theme;return t.strokeColor||t.fill.fillColor},f.prototype._getVisible=function(t){return this.visible},f.prototype._resetValues=function(){this.currentBar=0},f.prototype.setDefaultSettings=function(){if(this._isInitialized=!1,this._needsDefaults&&(this.values=new p.DataSeriesCollection,this.setDefaults(),this._needsDefaults=!1),this._prevParams)for(var t in this._prevParams)this._prevParams.hasOwnProperty(t)&&this.setParameterValue(t,this._prevParams[t]);this.multiBars=new p.MultiBars(this),this.multiBars=this.multiBars,this._prevParams={}},f.prototype.addPlot=function(t,e,i,o,r){var n,a,l,s,c,h=this;if(this.chart)return a=new p.TADataSeries(e,this),l=this._plots.length,s=this._addLineParameters(this._plots.length,t,o,r),c=i?(n=this._getHistogramTheme(l),new p.HistogramPlot({dataSeries:a,plotStyle:i,theme:n,columnWidthRatio:o})):(n=this._lineTheme(l),this.linePlot(n,a)),this._plots.push(c),this.values.add(a),function(){s(),h._removePlot(c),h.values.remove(e)}},f.prototype.addBarPlot=function(){var t,e=this;if(this.chart)return t=new p.BarPlot({indicator:this}),this._plots.push(t),function(){e._removePlot(t)}},f.prototype.addLabelPlot=function(t,e){var i,o,r,n=this;if(this.chart)return i=this._addLineParameters(this._plots.length,null,null,null),o=new p.TADataSeries(t,this),r=new p.LabelPlot(__assign({dataSeries:o},e)),this._plots.push(r),this.values.add(o),function(){i(),n._removePlot(r),n.values.remove(t)}},f.prototype.addFillPlot=function(t,e,i,o){var r;this.chart&&(r=void 0,t=new p.TADataSeries(t,this),e=new p.TADataSeries(e,this),this._addFillParameters(i,o),r=this._fillTheme(),this._fillPlot=this.fillPlot(r,t,e))},f.prototype.addLine=function(t,e){e=new p.HorizontalLineDrawing({point:{record:0,value:e},theme:{line:{strokeColor:t,width:1}},locked:!0});e.selectable=!1,e.removable=!1,this._lineLevels.push(e)},f.prototype._removePlot=function(e){this._panel.removePlot(e),this._plots=this._plots.filter(function(t){return t!==e}),this._plotItems=this._plotItems.filter(function(t){return t.plot!==e})},f.prototype._fillTheme=function(){return{belowCross:{fillColor:this.getParameterValue(p.IndicatorParam.FILL_BELOW)},aboveCross:{fillColor:this.getParameterValue(p.IndicatorParam.FILL_ABOVE)}}},f.prototype._getHistogramTheme=function(t){var e,i,o,r;switch(t){case 0:e=p.IndicatorParam.LINE_COLOR,i=p.IndicatorParam.LINE_ENABLED,o=this.getParameterValue(e)||this.chart.theme.plot.indicator.line1.strokeColor,r=null==this.getParameterValue(i)||this.getParameterValue(i);break;case 1:e=p.IndicatorParam.LINE2_COLOR,i=p.IndicatorParam.LINE2_ENABLED,o=this.getParameterValue(e)||this.chart.theme.plot.indicator.line3.strokeColor,r=null==this.getParameterValue(i)||this.getParameterValue(i);break;case 2:e=p.IndicatorParam.LINE3_COLOR,i=p.IndicatorParam.LINE3_ENABLED,o=this.getParameterValue(e)||this.chart.theme.plot.indicator.line2.strokeColor,r=null==this.getParameterValue(i)||this.getParameterValue(i);break;default:return null}return{line:{strokeEnabled:!1},fill:{fillEnabled:r,fillColor:this.chart.theme.chart.background.some(p.HtmlUtil.isDarkColor)||"white"!==o?o:"grey"}}},f.prototype._getLabelTheme=function(t){var e,i,o,r;switch(t){case 0:e=p.IndicatorParam.LABEL_COLOR,i=p.IndicatorParam.LABEL_ENABLED,o=this.getParameterValue(e)||this.chart.theme.plot.indicator.line1.strokeColor,r=null==this.getParameterValue(i)||this.getParameterValue(i);break;case 1:e=p.IndicatorParam.LABEL2_COLOR,i=p.IndicatorParam.LABEL2_ENABLED,o=this.getParameterValue(e)||this.chart.theme.plot.indicator.line2.strokeColor,r=null==this.getParameterValue(i)||this.getParameterValue(i);break;case 2:e=p.IndicatorParam.LABEL3_COLOR,i=p.IndicatorParam.LABEL3_ENABLED,o=this.getParameterValue(e)||this.chart.theme.plot.indicator.line3.strokeColor,r=null==this.getParameterValue(i)||this.getParameterValue(i);break;case 3:e=p.IndicatorParam.LABEL4_COLOR,i=p.IndicatorParam.LABEL4_ENABLED,o=this.getParameterValue(e)||this.chart.theme.plot.indicator.line4.strokeColor,r=null==this.getParameterValue(i)||this.getParameterValue(i);break;default:return null}return{fill:{fillEnabled:r,fillColor:o}}},f.prototype._addPanel=function(){if(!this._panel)if(this._isOverlay)this._panel=this._chart.mainPanel;else{try{this._panel=this._chart.addChartPanel(this._chart.chartPanels.length,this.panelHeightRatio,!0)}catch(t){return this._chart.removeIndicators(this),void this._chart.setNeedsUpdate()}this._initPanel(),this._chart.layout(),this._panel.setNeedsAutoScale()}},f.prototype.linePlot=function(t,e){return new p.LinePlot({dataSeries:e,theme:t})},f.prototype.fillPlot=function(t,e,i){return new p.FillPlot({dataSeries:[e,i],theme:t})},f.prototype.draw=function(){},f.prototype._drawFillPlot=function(){var t=this.values.get(p.IchimokuDataSeriesNames.SenkouA),e=this.values.get(p.IchimokuDataSeriesNames.SenkouB),t=t.toDataSeries(0),e=e.toDataSeries(0),t=this._ichimokuSeries(t),e=this._ichimokuSeries(e);this._fillPlot.dataSeries=[t,e],this._fillPlot.theme=this._fillTheme(),this.visible?this._fillPlot.visible=this.getParameterValue(p.IndicatorParam.FILL_ENABLED):this._fillPlot.visible=!1,this._panel.addPlot(this._fillPlot)},f.prototype._removeControls=function(){this._titleControls&&(this._unSubscribeEvents(),this._titleControls.rootDiv.remove(),this._titleControls=null)},f.prototype._onChartChanged=function(){},f.prototype.destroy=function(){var t=this.chart,e=this._panel;e&&e!==t.mainPanel&&0<e.indicators.length&&e.indicators[0]._initPanel(),this._titleContextMenu&&this._titleContextMenu.destroy(),this._parametersContextMenu&&this._parametersContextMenu.destroy(),this._fillPlot&&e.removePlot(this._fillPlot),this._removeControls(),this.chart=null,this._panel=null},f.prototype.getInfoAbout=function(){return""},f.prototype.showInfoDialog=function(){var e=this;p.UI.ViewLoader.indicatorInfoDialog(function(t){t.show({chart:e.chart,indicator:e})})},f.prototype.showSettingsDialog=function(){var e=this;p.UI.ViewLoader.indicatorSettingsDialog(function(t){t.show({chart:e.chart,indicator:e,done:function(){e.update(),e._panel.setNeedsUpdate(!0)}})})},f.prototype.updateHoverRecord=function(t){if(this.showValuesInTitle){null==t&&(t=this._chart.hoveredRecord);for(var e=0,i=this._plotItems;e<i.length;e++){var o=i[e],r=o.dataSeries?o.dataSeries.length:0;r<=0||((null==t||t<0||r<=t)&&(t=r-1),r=o.dataSeries.valueAtIndex(t),r=isNaN(r)||null===r?"n/a":this._panel.formatValue(r),o.titleValueSpan.text(r))}}},f.prototype._addPanelPlot=function(t,e){this._panel.addPlot(t),this._initPanelTitle();for(var i=0,o=this._plotItems;i<o.length;i++){var r=o[i];if(!r.plot)return r.plot=t,r.dataSeries=t.dataSeries[0],r.color=e,this._updatePanelTitle(),r}},f.prototype._initPanelTitle=function(o){var r=this;if(void 0===o&&(o=!1),this._panel.visible&&(!this._titleControls||o)){var t=this._titleControls={},e={menuContainer:null,showOnClick:!0,indicator:this,onItemSelected:function(t,e){var i=t.data("id");switch(i){case p.UI.IndicatorContextMenu.MenuItem.ABOUT:r.showInfoDialog();break;case p.UI.IndicatorContextMenu.MenuItem.SETTINGS:r.showSettingsDialog();break;case p.UI.IndicatorContextMenu.MenuItem.SHOW_PARAMS:r.showParamsInTitle=e,r._panel.setNeedsUpdate();break;case p.UI.IndicatorContextMenu.MenuItem.SHOW_MARKERS:r.showValueMarkers=e,r._panel.setNeedsUpdate();break;case p.UI.IndicatorContextMenu.MenuItem.SHOW_VALUES:r.showValuesInTitle=e,r._panel.setNeedsUpdate();break;case p.UI.IndicatorContextMenu.MenuItem.VISIBLE:r.visible=e,r.updateTitleControlsVisibility(),r._panel.setNeedsUpdate();break;case p.UI.IndicatorContextMenu.MenuItem.LINE_LEVELS:r.showLineLevels=e,r.update(o),r._panel.setNeedsUpdate(!0);break;case p.UI.IndicatorContextMenu.MenuItem.MERGE_UP:r._merge(!0);break;case p.UI.IndicatorContextMenu.MenuItem.MERGE_DOWN:r._merge(!1);break;case p.UI.IndicatorContextMenu.MenuItem.UNMERGE_UP:r._unmerge(!0);break;case p.UI.IndicatorContextMenu.MenuItem.UNMERGE_DOWN:r._unmerge(!1);break;case p.UI.IndicatorContextMenu.MenuItem.DELETE:r._remove();break;case void 0:break;default:throw new Error("Unknown menu item '"+i+"'")}}};if(this._panel.titleDiv){var i=t.rootDiv=this._panel.titleDiv.scxAppend("div",u);o&&this._panel.titleDiv.children(".scxIndicatorTitle").html(""),t.name=i.scxAppend("div",l).text(this.name),this.allowContextMenu&&(this._titleContextMenu=t.name.scx().indicatorContextMenu(e),t.parameters=i.scxAppend("div",l),this._parametersContextMenu=t.parameters.scx().indicatorContextMenu(e)),this._removeTitle=i.scxAppend("span",[s,c]).on("click",function(){r._remove()});for(var n=0,a=this._plots.length;n<a;n++)this._plotItems.push({titlePlotSpan:i.scxAppend("span",h),titleValueSpan:i.scxAppend("span",h)});this.updateTitleControlsVisibility(),this._subscribeEvents()}}},f.prototype._merge=function(t){var e,i,o=this.chart,r=this._panel.getIndex(),n=t?r-1:r+1;this._panel.removePlot(this._fillPlot),n<0||n>=o.chartPanels.length||(t&&this._needsCustomScale()&&1===r&&(this.valueScale=o.addValueScale(),this.valueScale.rightPanelVisible=!1),e=this.serialize(),i=o.chartPanels[n],e.panelIndex=n,n=o.addIndicators(e),i!==o.mainPanel&&i.indicators[0]===n&&n._initPanel(),t&&this._needsCustomScale()&&1===r&&(n.zIndex=p.ZIndexVolume),o.removeIndicators(this),o.setNeedsUpdate(!0))},f.prototype._setAutoScaleMultiplier=function(t){t&&(this._panel.getValueScale(t).autoScaleMultiplier=p.AutoScaleMultiplierValue)},f.prototype.removeLineLevels=function(){this._panel.forceRemoveDrawings(this._lineLevels)},f.prototype._unmerge=function(t){this._panel.removePlot(this._fillPlot);var e=t?this._panel.getIndex():this._panel.getIndex()+1;try{var i=this.chart.addChartPanel(e);i.layout(i.frame),this.chart.removeValueScale(this.valueScale),this._merge(t)}catch(t){p.Localization.localizeText(this.chart,"indicator.all.notification.noMoreSpace").then(function(t){p.UI.Notification.warning(t)})}},f.prototype._updatePanelTitle=function(){return __awaiter(this,void 0,void 0,function(){var e,i,o,r;return __generator(this,function(t){switch(t.label){case 0:return this._setTitle(this.name,this._titleControls.name),[4,this._localizedParameters(this._titleParameters())];case 1:for(e=t.sent(),this._titleControls.parameters&&this._titleControls.parameters.text("()"===e?"":e),this._setlocalizedAtribute(this._removeTitle,"indicator.all.removeIndicator"),i=function(t){var e=o._plotItems[t],t=e.dataSeries.name;e.titlePlotSpan.css("color",e.color),p.Localization.localizeText(o._chart,"indicator.all.panelTitle."+t,{defaultValue:t}).then(function(t){e.titlePlotSpan.text(t)}),e.titleValueSpan.css("color",e.color),p.Localization.localizeText(o._chart,"indicator.all.panelTitle."+t,{defaultValue:t}).then(function(t){e.titleValueSpan.attr("title",t)})},o=this,r=0;r<this._plotItems.length;r++)i(r);return[2]}})})},f.prototype._localizedParameters=function(e){return __awaiter(this,void 0,void 0,function(){var i=this;return __generator(this,function(t){return p.JsUtil.flattenArray(e)?[2,Promise.all(e.map(function(e){return __awaiter(i,void 0,void 0,function(){return __generator(this,function(t){return[2,p.Localization.localizeText(this._chart,"indicator.all.parameter."+e,{defaultValue:e})]})})})).then(function(t){return"("+t.join(", ")+")"})]:[2]})})},f.prototype.updateTitleControlsVisibility=function(){var t=this.showValueMarkers,e=this.showValuesInTitle?"inline-block":"none",i=this._titleControls;i&&(i.parameters&&i.parameters.css("display",this.showParamsInTitle?"inline-block":"none"),i.name.css("opacity",this.visible?"1":"0.5"),i.rootDiv.css("display",this.showTitle?"block":"none"));for(var o=0,r=this._plotItems;o<r.length;o++){var n=r[o];n.plot&&(n.plot.showValueMarkers=t),n.titlePlotSpan.css("display",this._plotItems.length<=1?"none":e),n.titleValueSpan.css("display",e)}this._fillPlot&&(this._fillPlot.visible=this.visible,this._drawFillPlot())},f.prototype._initIndicator=function(){this._options.parameters={}},f.prototype._subscribeEvents=function(){var e=this;this._chart.on(p.ChartEvent.HOVER_RECORD_CHANGED+".scxIndicator",function(t){e.updateHoverRecord(t.value)},this)},f.prototype._unSubscribeEvents=function(){this._chart&&this._chart.off(p.ChartEvent.HOVER_RECORD_CHANGED+".scxIndicator",this)},f.prototype._remove=function(){var t=this._chart;t.removeIndicators(this),t.setNeedsUpdate(!0)},f.prototype.loadState=function(t){if(!(t=t||{})||"object"!=typeof t)throw new TypeError("Config expected.");var e=this._chart=t.chart||this.chart;if(this._options={panelHeightRatio:t.panelHeightRatio,showParamsInTitle:!0,allowContextMenu:!0,showValueMarkers:!0,showValuesInTitle:!0,allowSettingsDialog:!0,visible:!0,showTitle:!0,showLineLevels:!1},this.allowSettingsDialog=null==t.allowSettingsDialog||t.allowSettingsDialog,this.showParamsInTitle=null==t.showParamsInTitle||t.showParamsInTitle,this.showValueMarkers=null==t.showValueMarkers||t.showValueMarkers,this.showValuesInTitle=null==t.showValuesInTitle||t.showValuesInTitle,this.allowContextMenu=null==t.allowContextMenu||t.allowContextMenu,this.visible=null==t.visible||t.visible,this.coloredVolumeTheme=null!=t.coloredVolumeTheme?t.coloredVolumeTheme:null,this._options.valueScaleIndex=t.valueScaleIndex,this.showTitle=null==t.showTitle||t.showTitle,this._prevParams=t._prevParams,this.showLineLevels=null!=t.showLineLevels&&t.showLineLevels,this.zIndex=t.zIndex,e&&(null!=t.panelIndex&&(this._panel=e.chartPanelsContainer.panels[t.panelIndex]),t.valueScaleIndex&&(this.valueScale=e.valueScales[t.valueScaleIndex])),t.parameters)for(var i in t.parameters)t.parameters.hasOwnProperty(i)&&this.setParameterValue(i,t.parameters[i]);this._initPanel()},f.prototype._collapseIndicatorName=function(t){this._collapseIndicatorTitle=!t,this._collapseIndicatorIcon&&(this._collapseIndicatorTitle?this._collapseIndicatorIcon.removeClass(e).addClass(o):this._collapseIndicatorIcon.removeClass(o).addClass(e)),this._panel&&this._panel.setNeedsUpdate()};var n,a=f;function f(){var t=n.call(this)||this;return t.localizedSettings={},t._isOverlay=!1,t._plotItems=[],t._usePrimaryDataSeries=!0,t._collapseIndicatorTitle=!1,t._needsDefaults=!0,t._plots=[],t._lineLevels=[],t._options={showParamsInTitle:!0,showValueMarkers:!0,showValuesInTitle:!0,allowSettingsDialog:!0,allowContextMenu:!0,visible:!0,showTitle:!0,showLineLevels:!1},t.allowSettingsDialog=!1,t.showParamsInTitle=!0,t.showValueMarkers=!0,t.showValuesInTitle=!0,t.visible=!0,t.coloredVolumeTheme=null,t.showTitle=!0,t._initIndicator(),t}p.Indicator=a,p.JsUtil.applyMixins(a,[t])}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(r){(t=r.IndicatorSizeUnit||(r.IndicatorSizeUnit={})).Pixel="pixel",t.Percent="percent",r.IndicatorSettingsProxy=function(t,e){for(var i in t){var o=t[i];t.hasOwnProperty(i)&&r.JsUtil.isObject(o)&&(t[i]=r.IndicatorSettingsProxy(o,e))}return new Proxy(t,{set:function(t,e,i){return console.log(e,i),t[e]=i,!0}})},e=r.Indicator,__extends(i,e),Object.defineProperty(i.prototype,"settings",{get:function(){return this._settings},set:function(t){var e;this.chart&&(t=r.JsUtil.merge(this._settings,t),e=!!this._handleSettings(t),this._settings=t,this.chart.setNeedsUpdate(e))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"renderer",{get:function(){return this._panel&&this._panel.layer.renderer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"projection",{get:function(){return this._panel&&this._panel.getProjection(this.valueScale)},enumerable:!0,configurable:!0}),i.prototype._onChartChanged=function(){this._handleSettings(this._settings),this._settingsHandled=!0,e.prototype._onChartChanged.call(this)},i.prototype._handleSettings=function(t){},i.prototype._getVisiblePeriod=function(){var t,e,i=this.chart,o=i.dataManager.getDataSeries(r.DataSeriesSuffix.DATE);return e=o?(e=i.dateScale.visibleDateRange,t=o.floorIndex(e.min),o.ceilIndex(e.max)):(t=i.firstVisibleIndex,i.lastVisibleIndex),{startIndex:Math.max(o.leftNearestVisibleValueIndex(t)-1,0),endIndex:Math.min(o.rightNearestVisibleValueIndex(e)+1,o.length-1)}},i.prototype._getBarValue=function(t,e){var i=this.details.get(e=void 0===e?0:e);if(!this._isValidDetails(i))return 0;for(var o=0,r=0;r<i.length;r++)o+=t(i[r]);return o},i.prototype._isValidDetails=function(t){return Array.isArray(t)&&0<t.length};var e,t=i;function i(){var t=e.call(this)||this;return t._settingsHandled=!1,t}r.AdvancedIndicator=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"DM"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="DM",this.period=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line2.strokeColor,"ADX"),this.addPlot(this.indicatorTheme.line1.strokeColor,"+DI"),this.addPlot(this.indicatorTheme.line3.strokeColor,"-DI")},o.prototype.setConfigure=function(){this._dmPlus=new e.TADataSeries("dmPlus",this),this._dmMinus=new e.TADataSeries("dmMinus",this),this._sumDmPlus=new e.TADataSeries("sumDmPlus",this),this._sumDmMinus=new e.TADataSeries("sumDmMinus",this),this._sumTr=new e.TADataSeries("sumTr",this),this._tr=new e.TADataSeries("tr",this)},o.prototype.onBarUpdate=function(){var t,e,i,o=this.values.get("ADX"),r=this.values.get("+DI"),n=this.values.get("-DI"),a=this.high.get(0),l=this.low.get(0),s=a-l;0===this.currentBar?(this._tr.set(s),this._dmPlus.set(0),this._dmMinus.set(0),this._sumTr.set(0),this._sumDmPlus.set(0),this._sumDmMinus.set(this._dmMinus.get(0)),o.set(50)):(i=this.low.get(1),e=this.high.get(1),t=this.close.get(1),this._tr.set(Math.max(Math.abs(l-t),Math.max(s,Math.abs(a-t)))),this._dmPlus.set(i-l<a-e?Math.max(a-e,0):0),this._dmMinus.set(a-e<i-l?Math.max(i-l,0):0),s=this._sumDmPlus.get(1),t=this._sumDmMinus.get(1),a=this._sumTr.get(1),this.currentBar<this.period?(this._sumTr.set(a+this._tr.get(0)),this._sumDmPlus.set(s+this._dmPlus.get(0)),this._sumDmMinus.set(t+this._dmMinus.get(0))):(this._sumTr.set(a-this._sumTr.get(1)/this.period+this._tr.get(0)),this._sumDmPlus.set(s-s/this.period+this._dmPlus.get(0)),this._sumDmMinus.set(t-t/this.period+this._dmMinus.get(0))),e=100*(0===this._sumTr.get(0)?0:this._sumDmPlus.get(0)/this._sumTr.get(0)),i=100*(0===this._sumTr.get(0)?0:this._sumDmMinus.get(0)/this._sumTr.get(0)),l=Math.abs(e-i),o.set(0==(a=e+i)?50:((this.period-1)*o.get(1)+100*l/a)/this.period),r.set(e),n.set(i))};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.DM=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(n){t=n.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"ADL"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"period",{get:function(){return this.getParameterValue(n.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(n.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="ADL",this.period=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},i.prototype.setConfigure=function(){},i.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.high.get(0),i=this.low.get(0),o=this.close.get(0),r=this.volume.get(0),o=(0===this.currentBar?0:t.get(1))+(0!==n.JsUtil.approxCompare(e,i)?(o-i-(e-o))/(e-i)*r:0);t.set(o)};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}n.ADL=e,n.Indicator.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"APZ"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"bandPct",{get:function(){return this.getParameterValue(e.IndicatorParam.BAND_PCT)},set:function(t){this.setParameterValue(e.IndicatorParam.BAND_PCT,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="APZ",this.period=20,this.bandPct=2,this._isOverlay=!0,this.addPlot(this.indicatorTheme.line2.strokeColor,"Upper"),this.addPlot(this.indicatorTheme.line3.strokeColor,"Lower")},o.prototype.setConfigure=function(){this._ema1=this.EMA(null,this._newPeriod),this._emaEMA=this.EMA(this._ema1,this._newPeriod),this._emaRange=this.EMA(this.Range(),this.period)},o.prototype.onBarUpdate=function(){var t,e,i=this.values.get("Lower"),o=this.values.get("Upper");this.currentBar<this.period||(e=this.bandPct*this._emaRange.values.get(0).get(0),t=this._emaEMA.values.get(0).get(0)-e,e=this._emaEMA.values.get(0).get(0)+e,i.set(t),o.set(e))};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.APZ=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"EMA"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="EMA",this.period=14,this._isOverlay=!0,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._constant1=2/(1+this.period),this._constant2=1-2/(1+this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=0===this.currentBar?this.input.get(0):this.input.get(0)*this._constant1+this._constant2*t.get(1);t.set(e)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.EMA=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"ATR"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="ATR",this.period=14,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t,e=this.high.get(0),i=this.low.get(0),o=this.values.get(this.name);e=0===this.currentBar?e-i:(t=this.close.get(1),i=Math.max(Math.abs(i-t),Math.max(e-i,Math.abs(e-t))),((Math.min(this.currentBar+1,this.period)-1)*o.get(1)+i)/Math.min(this.currentBar+1,this.period)),o.set(e)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.ATR=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(i){e=i.AdvancedIndicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"BarStats"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(i.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(i.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="BarStats",this.period=14,this._isOverlay=!1,this.showValueMarkers=!1,this.showParamsInTitle=!1,this.showValuesInTitle=!1,this.showLineLevels=!1;var t=this.linePlots.length,e=this._lineTheme(t),t=(this._addLineParameters(t,this.indicatorTheme.line1.strokeColor,void 0,void 0),this.chart.dataManager);this._plots.push(new i.BarStatsPlot({theme:e,dataManager:t}))},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){this._plots[0].calcValue(this.currentBar)},o.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return t.settings=this._plots[0].settings,t},o.prototype.loadState=function(t){this.settings=t.settings};var e,t=o;function o(){return null!==e&&e.apply(this,arguments)||this}i.BarStats=t,i.Indicator.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"SMA"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="SMA",this.period=14,this._isOverlay=!0,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._priorSum=0,this._sum=0},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=(this.isFirstTickOfBar&&(this._priorSum=this._sum),this._priorSum=this._sum,this._sum=this._priorSum+this.input.get(0)-(this.currentBar>=this.period?this.input.get(this.period):0),this._sum/(this.currentBar<this.period?this.currentBar+1:this.period));t.set(e)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.SMA=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"SUM"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="SUM",this.period=14,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.input.get(0)+(0<this.currentBar?t.get(1):0)-(this.currentBar>=this.period?this.input.get(this.period):0);t.set(e)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.SUM=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(r){t=r.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"CMO"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(r.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(r.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"period",{get:function(){return this.getParameterValue(r.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(r.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="CMO",this.period=14,this._isOverlay=!1,this.inputSeriesKind=r.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},i.prototype.setConfigure=function(){this._down=new r.TADataSeries("Down",this),this._up=new r.TADataSeries("Up",this),this._sumDown=this.SUM(this._down,this.period),this._sumUp=this.SUM(this._up,this.period)},i.prototype.onBarUpdate=function(){var t=this.values.get(this.name);if(0===this.currentBar)return this._down.set(0),void this._up.set(0);var e=this.input.get(0),i=this.input.get(1),o=Math.max(i-e,0),e=Math.max(e-i,0),i=(this._down.set(o),this._up.set(e),this._sumDown.values.get(0).get(0)),o=this._sumUp.values.get(0).get(0),e=0===r.JsUtil.approxCompare(o,i)?0:(o-i)/(o+i)*100;t.set(e)};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}r.CMO=e,r.Indicator.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"MAX"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="MAX",this.period=14,this._isOverlay=!0,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._lastBar=0,this._lastMax=0,this._runningMax=0,this._runningBar=0,this._thisBar=0},o.prototype.onBarUpdate=function(){var t,e=this.values.get(this.name);if(0===this.currentBar)return this._runningMax=this.input.get(0),this._lastMax=this.input.get(0),this._runningBar=0,this._lastBar=0,this._thisBar=0,t=this.input.get(0),void e.set(t);if(this.currentBar-this._runningBar>=this.period){this._runningMax=Number.MIN_VALUE;for(var i=Math.min(this.currentBar,this.period-1);0<i;i--)this.input.get(i)>=this._runningMax&&(this._runningMax=this.input.get(i),this._runningBar=this.currentBar-i)}this._thisBar!==this.currentBar&&(this._lastMax=this._runningMax,this._lastBar=this._runningBar,this._thisBar=this.currentBar),this.input.get(0)>=this._lastMax?(this._runningMax=this.input.get(0),this._runningBar=this.currentBar):(this._runningMax=this._lastMax,this._runningBar=this._lastBar),t=this._runningMax,e.set(t)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.MAX=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"MIN"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="MIN",this.period=14,this._isOverlay=!0,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._lastBar=0,this._lastMin=0,this._runningMin=0,this._runningBar=0,this._thisBar=0},o.prototype.onBarUpdate=function(){var t,e=this.values.get(this.name);if(0===this.currentBar)return this._runningMin=this.input.get(0),this._lastMin=this.input.get(0),this._runningBar=0,this._lastBar=0,this._thisBar=0,t=this.input.get(0),void e.set(t);if(this.currentBar-this._runningBar>=this.period){this._runningMin=Number.MAX_VALUE;for(var i=Math.min(this.currentBar,this.period-1);0<i;i--)this.input.get(i)<=this._runningMin&&(this._runningMin=this.input.get(i),this._runningBar=this.currentBar-i)}this._thisBar!==this.currentBar&&(this._lastMin=this._runningMin,this._lastBar=this._runningBar,this._thisBar=this.currentBar),this.input.get(0)<=this._lastMin?(this._runningMin=this.input.get(0),this._runningBar=this.currentBar):(this._runningMin=this._lastMin,this._runningBar=this._lastBar),t=this._runningMin,e.set(t)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.MIN=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(h){t=h.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"ADX"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"period",{get:function(){return this.getParameterValue(h.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(h.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="ADX",this.period=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line1.strokeColor,25),this.addLine(this.levelsTheme.line2.strokeColor,75)},i.prototype.setConfigure=function(){this._dmPlus=new h.TADataSeries("dmPlus",this),this._dmMinus=new h.TADataSeries("dmPlus",this),this._sumDmPlus=new h.TADataSeries("dmPlus",this),this._sumDmMinus=new h.TADataSeries("dmPlus",this),this._sumTr=new h.TADataSeries("dmPlus",this),this._tr=new h.TADataSeries("dmPlus",this)},i.prototype.onBarUpdate=function(){var t,e,i,o,r,n,a,l=this.values.get(this.name),s=this.high.get(0),c=this.low.get(0);0===this.currentBar?(this._tr.set(o=s-c),this._dmPlus.set(0),this._dmMinus.set(0),this._sumTr.set(o),this._sumDmPlus.set(0),this._sumDmMinus.set(0),l.set(50)):(t=this.high.get(1),e=this.low.get(1),n=this.close.get(1),o=Math.max(Math.abs(c-n),Math.max(s-c,Math.abs(s-n))),n=e-c<s-t?Math.max(s-t,0):0,s=s-t<e-c?Math.max(e-c,0):0,this._tr.set(o),this._dmPlus.set(n),t=void this._dmMinus.set(s),c=e=void 0,c=this.currentBar<this.period?(t=this._sumTr.get(1)+o,e=this._sumDmPlus.get(1)+n,this._sumDmMinus.get(0)+s):(i=this._sumTr.get(1),r=this._sumDmPlus.get(1),a=this._sumDmMinus.get(1),t=i-i/this.period+o,e=r-r/this.period+n,a-a/this.period+s),this._sumTr.set(t),this._sumDmPlus.set(e),this._sumDmMinus.set(c),t=this._sumTr.get(0),i=100*(0===h.JsUtil.approxCompare(t,0)?0:e/t),o=100*(0===h.JsUtil.approxCompare(t,0)?0:c/t),r=Math.abs(i-o),a=0===h.JsUtil.approxCompare(n=i+o,0)?50:((this.period-1)*l.get(1)+100*r/n)/this.period,l.set(a))};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}h.ADX=e,h.Indicator.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){e=t.Indicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"OBV"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="OBV",this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t,e,i,o=this.values.get(this.name);0===this.currentBar?o.set(0):(t=this.close.get(0),e=this.close.get(1),i=this.volume.get(0),e<t?o.set(o.get(1)+i):t<e?o.set(o.get(1)-i):o.set(o.get(1)))};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.OBV=i,t.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"ROC"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="ROC",this.period=14,this._isOverlay=!1,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line5.strokeColor,0)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t,e=this.values.get(this.name);this.currentBar<=this.period?e.set(this.input.get(0)):(t=this.input.get(Math.min(this.currentBar,this.period)),t=(this.input.get(0)-t)/t*100,e.set(t))};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.ROC=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"VOL"},enumerable:!0,configurable:!0}),o.prototype._getLineParametersKeys=function(t){return[e.IndicatorParam.LINE_COLOR]},o.prototype.setDefaults=function(){this.name="VOL",this._isOverlay=!1,this.addPlot("#3452F1",this.name,e.HistogramPlot.Style.COLUMN)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){this.values.get(this.name).set(this.volume.get(0))};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.VOL=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"VMA"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"volatilityPeriod",{get:function(){return this.getParameterValue(e.IndicatorParam.VOLATILITY_PERIOD)},set:function(t){this.setParameterValue(e.IndicatorParam.VOLATILITY_PERIOD,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="VMA",this.period=9,this.volatilityPeriod=9,this._isOverlay=!0,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._sc=2/(this.period+1),this._cmo=this.CMO(this.input,this.volatilityPeriod)},o.prototype.onBarUpdate=function(){var t,e=this.values.get(this.name);0===this.currentBar?e.set(this.input.get(0)):(t=Math.abs(this._cmo.values.get(0).get(0))/100,t=this._sc*t*this.input.get(0)+(1-this._sc*t)*e.get(1),e.set(t))};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.VMA=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(n){t=n.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"BOP"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"period",{get:function(){return this.getParameterValue(n.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(n.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"smooth",{get:function(){return this.getParameterValue(n.IndicatorParam.SMOOTH)},set:function(t){this.setParameterValue(n.IndicatorParam.SMOOTH,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="BOP",this.period=14,this.smooth=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name,n.HistogramPlot.Style.COLUMN)},i.prototype.setConfigure=function(){this._bop=new n.TADataSeries("bop",this),this._sma=this.SMA(this._bop,this.smooth)},i.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.high.get(0),i=this.low.get(0),o=this.close.get(0),r=this.open.get(0),o=(0===n.JsUtil.approxCompare(e-i,0)?this._bop.set(0):this._bop.set((o-r)/(e-i)),this._sma.values.get(0).get(0));t.set(o)};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}n.BOP=e,n.Indicator.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"PPO"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"smooth",{get:function(){return this.getParameterValue(e.IndicatorParam.SMOOTH)},set:function(t){this.setParameterValue(e.IndicatorParam.SMOOTH,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"slow",{get:function(){return this.getParameterValue(e.IndicatorParam.SLOW)},set:function(t){this.setParameterValue(e.IndicatorParam.SLOW,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fast",{get:function(){return this.getParameterValue(e.IndicatorParam.FAST)},set:function(t){this.setParameterValue(e.IndicatorParam.FAST,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="PPO",this.period=14,this.fast=12,this.slow=26,this.smooth=9,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line2.strokeColor,"Default"),this.addPlot(this.indicatorTheme.line3.strokeColor,"PPOSmoothed"),this.addLine(this.levelsTheme.line5.strokeColor,0)},o.prototype.setConfigure=function(){this._emaFast=this.EMA(null,this.fast),this._emaSlow=this.EMA(null,this.slow),this._values0=this.values.get("Default")},o.prototype.onBarUpdate=function(){var t=this.values.get("PPOSmoothed"),e=this.values.get("Default"),i=this._emaSlow.values.get(0).get(0),i=(this._emaFast.values.get(0).get(0)-i)/i*100;e.set(i||0);e=this.EMA(this._values0,this.smooth).values.get(0).get(0);t.set(e)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.PPO=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"TSF"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"forecast",{get:function(){return this.getParameterValue(e.IndicatorParam.FORECAST)},set:function(t){this.setParameterValue(e.IndicatorParam.FORECAST,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="TSF",this.period=14,this.forecast=3,this._isOverlay=!0,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._avg=this._divisor=this._intercept=this._myPeriod=this._priorSumXY=this._priorSumY=this._slope=this._sumX=this._sumX2=this._sumY=this._sumXY=0,this._sum=this.SUM(this.input,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._sum.values.get(0),i=(this.isFirstTickOfBar&&(this._priorSumY=this._sumY,this._priorSumXY=this._sumXY,this._myPeriod=Math.min(this.currentBar+1,this.period),this._sumX=this._myPeriod*(this._myPeriod-1)*.5,this._sumX2=this._myPeriod*(this._myPeriod+1)*.5,this._divisor=this._myPeriod*(this._myPeriod+1)*(2*this._myPeriod+1)/6-this._sumX2*this._sumX2/this._myPeriod),this.input.get(0)),e=(this._sumXY=this._priorSumXY-(this.currentBar>=this.period?this._priorSumY:0)+this._myPeriod*i,this._sumY=this._priorSumY+i-(this.currentBar>=this.period?this.input.get(this.period):0),this._avg=this._sumY/this._myPeriod,this._slope=(this._sumXY-this._sumX2*this._avg)/this._divisor,this._intercept=(e.get(0)-this._slope*this._sumX)/this._myPeriod,0===this.currentBar?i:this._intercept+this._slope*(this._myPeriod-1+this.forecast));t.set(e)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.TSF=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(o){t=o.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"TSI"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"period",{get:function(){return this.getParameterValue(o.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(o.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(o.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(o.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fast",{get:function(){return this.getParameterValue(o.IndicatorParam.FAST)},set:function(t){this.setParameterValue(o.IndicatorParam.FAST,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"slow",{get:function(){return this.getParameterValue(o.IndicatorParam.SLOW)},set:function(t){this.setParameterValue(o.IndicatorParam.SLOW,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="TSI",this.period=14,this.fast=3,this.slow=14,this._isOverlay=!1,this.inputSeriesKind=o.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},i.prototype.setConfigure=function(){this._constant1=2/(1+this.slow),this._constant2=1-2/(1+this.slow),this._constant3=2/(1+this.fast),this._constant4=1-2/(1+this.fast),this._fastEma=new o.TADataSeries("fastEma",this),this._fastAbsEma=new o.TADataSeries("fastAbsEma",this),this._slowEma=new o.TADataSeries("slowEma",this),this._slowAbsEma=new o.TADataSeries("slowAbsEma",this)},i.prototype.onBarUpdate=function(){var t,e,i=this.values.get(this.name);0===this.currentBar?(this._fastAbsEma.set(0),this._fastEma.set(0),this._slowAbsEma.set(0),this._slowEma.set(0),i.set(0)):(e=(t=this.input.get(0)-this.input.get(1))*this._constant1+this._constant2*this._slowEma.get(1),this._slowEma.set(e),e=this._slowEma.get(0)*this._constant3+this._constant4*this._fastEma.get(1),this._fastEma.set(e),e=Math.abs(t)*this._constant1+this._constant2*this._slowAbsEma.get(1),this._slowAbsEma.set(e),t=this._slowAbsEma.get(0)*this._constant3+this._constant4*this._fastAbsEma.get(1),this._fastAbsEma.set(t),e=o.JsUtil.equals(this._fastAbsEma.get(0),0)?0:100*this._fastEma.get(0)/this._fastAbsEma.get(0),i.set(e))};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}o.TSI=e,o.Indicator.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"PFE"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"smooth",{get:function(){return this.getParameterValue(e.IndicatorParam.SMOOTH)},set:function(t){this.setParameterValue(e.IndicatorParam.SMOOTH,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="PFE",this.period=14,this.smooth=10,this._isOverlay=!1,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line5.strokeColor,0)},o.prototype.setConfigure=function(){this._div=new e.TADataSeries("dmPlus",this),this._pfeSeries=new e.TADataSeries("dmPlus",this),this._singlePfeSeries=new e.TADataSeries("dmPlus",this),this._ema=this.EMA(this._pfeSeries,this.smooth)},o.prototype.onBarUpdate=function(){var t,e=this.values.get(this.name),i=this.input.get(0);if(this.currentBar<this.period)return n=0===this.currentBar?1:Math.sqrt(Math.pow(this.input.get(1)-i,2)+1),this._singlePfeSeries.set(n),t=this._singlePfeSeries.get(0)+(0<this.currentBar?this._div.get(1):0),void this._div.set(t);var o=this.input.get(0),r=this.input.get(this.period),n=Math.sqrt(Math.pow(o-i,2)+1),o=(this._singlePfeSeries.set(n),t=this._singlePfeSeries.get(0)+this._div.get(1)-this._singlePfeSeries.get(this.period),this._div.set(t),(i<r?-1:1)*(Math.sqrt(Math.pow(i-r,2)+Math.pow(this.period,2))/this._div.get(0))),n=(this._pfeSeries.set(o),this._ema.values.get(0).get(0));e.set(n)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.PFE=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"WMA"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="WMA",this.period=14,this._isOverlay=!0,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._priorSum=0,this._priorWsum=0,this._sum=0,this._wsum=0},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=(this.isFirstTickOfBar&&(this._priorWsum=this._wsum,this._priorSum=this._sum,this._myPeriod=Math.min(this.currentBar+1,this.period)),this._wsum=this._priorWsum-(this.currentBar>=this.period?this._priorSum:0)+this._myPeriod*this.input.get(0),this._sum=this._priorSum+this.input.get(0)-(this.currentBar>=this.period?this.input.get(this.period):0),this._wsum/(.5*this._myPeriod*(this._myPeriod+1)));t.set(e)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.WMA=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){e=t.Indicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"HML"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="HML",this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.high.get(0)-this.low.get(0);t.set(e)};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.HML=i,t.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"RSI"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"smooth",{get:function(){return this.getParameterValue(e.IndicatorParam.SMOOTH)},set:function(t){this.setParameterValue(e.IndicatorParam.SMOOTH,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="RSI",this.period=14,this.smooth=3,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line2.strokeColor,this.name),this.addPlot(this.indicatorTheme.line3.strokeColor,"Avg"),this.addLine(this.levelsTheme.line1.strokeColor,30),this.addLine(this.levelsTheme.line1.strokeColor,70)},o.prototype.setConfigure=function(){this._constant1=2/(1+this.smooth),this._constant2=1-2/(1+this.smooth),this._constant3=this.period-1,this._down=new e.TADataSeries("dmPlus",this),this._up=new e.TADataSeries("dmPlus",this),this._avgDown=new e.TADataSeries("dmPlus",this),this._avgUp=new e.TADataSeries("dmPlus",this),this._smaDown=this.SMA(this._down,this.period),this._smaUp=this.SMA(this._up,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.values.get("Avg");if(0===this.currentBar)return this._down.set(0),this._up.set(0),void(this.period<3&&e.set(50));var i,o=this.input.get(0),r=this.input.get(1),n=Math.max(r-o,0),o=Math.max(o-r,0);this._down.set(n),this._up.set(o),this.currentBar+1<this.period?this.currentBar+1===this.period-1&&e.set(50):(this.currentBar+1===this.period?(this._avgDown.set(this._smaDown.values.get(0).get(0)),this._avgUp.set(this._smaUp.values.get(0).get(0))):(i=(this._avgDown.get(1)*this._constant3+n)/this.period,r=(this._avgUp.get(1)*this._constant3+o)/this.period,this._avgDown.set(i),this._avgUp.set(r)),n=0===(i=this._avgDown.get(0))?100:100-100/(1+this._avgUp.get(0)/i),t.set(n),o=this._constant1*n+this._constant2*e.get(1),e.set(o))};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.RSI=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(r){t=r.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"MFI"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"period",{get:function(){return this.getParameterValue(r.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(r.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="MFI",this.period=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line1.strokeColor,20),this.addLine(this.levelsTheme.line2.strokeColor,80)},i.prototype.setConfigure=function(){this._negative=new r.TADataSeries("Negative",this),this._positive=new r.TADataSeries("Positive",this),this._sumNegative=this.SUM(this._negative,this.period),this._sumPositive=this.SUM(this._positive,this.period)},i.prototype.onBarUpdate=function(){var t,e,i,o=this.values.get(this.name);i=0===this.currentBar?50:(e=(t=this.typical.get(0))<(i=this.typical.get(1))?t*this.volume.get(0):0,i=i<t?t*this.volume.get(0):0,this._negative.set(e),this._positive.set(i),t=this._sumNegative.values.get(0).get(0),e=this._sumPositive.values.get(0).get(0),r.JsUtil.equals(t,0)?50:100-100/(1+e/t)),o.set(i)};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}r.MFI=e,r.Indicator.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"ASI"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"limitValue",{get:function(){return this.getParameterValue(e.IndicatorParam.LIMIT_VALUE)},set:function(t){this.setParameterValue(e.IndicatorParam.LIMIT_VALUE,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="ASI",this.limitValue=.5,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._swingIndex=this.SwingIndex(this.limitValue)},o.prototype.onBarUpdate=function(){var t,e;this.currentBar<1||(t=this.values.get(this.name),e=this._swingIndex.values.get(0).get(0)+t.get(1),t.set(e))};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.ASI=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(i){t=i.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"CRS"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(i.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(i.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind2",{get:function(){return this.getParameterValue(i.IndicatorParam.SOURCE2)},set:function(t){this.setParameterValue(i.IndicatorParam.SOURCE2,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="CRS",this.inputSeriesKind=i.DataSeriesSuffix.CLOSE,this.inputSeriesKind2=i.DataSeriesSuffix.OPEN,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.input.get(0)/this.input2.get(0);1===e&&(e=i.nullValue),t.set(e)};var t,e=o;function o(){return null!==t&&t.apply(this,arguments)||this}i.CRS=e,i.Indicator.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){e=t.Indicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"EFI"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="EFI",this.addPlot(this.indicatorTheme.line2.strokeColor,"Indicator"),this.addPlot(this.indicatorTheme.line3.strokeColor,"Signal")},o.prototype.setConfigure=function(){this._ema=this.EMA(this.values.get("Indicator"),2)},o.prototype.onBarUpdate=function(){var t,e,i,o;this.currentBar<2||(t=this.values.get("Indicator"),e=this.values.get("Signal"),i=this.close,o=this.volume,i=(i.get(1)-i.get(0))*o.get(0),t.set(i),o=this._ema.values.get(0),e.set(o.get(0)))};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.EFI=i,t.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"GRI"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="GRI",this.period=14,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._max=this.MAX(this.high,this.period),this._min=this.MIN(this.low,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._max.values.get(0),i=this._min.values.get(0),e=Math.log(e.get(0)-i.get(0))/Math.log(this.period);t.set(e)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.GRI=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"IMI"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="IMI",this.period=14,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._prevUpSum=0,this._prevDnSum=0,this._upSum=0,this._dnSum=0},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.close,i=this.open,i=(e.get(0)>i.get(0)?this._upSum=this._prevUpSum+(e.get(0)-i.get(0)):this._dnSum=this._prevDnSum+(i.get(0)-e.get(0)),this._upSum/(this._upSum+this._dnSum)*100);t.set(i),this._prevUpSum=this._upSum,this._prevDnSum=this._dnSum};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.IMI=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(n){t=n.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"CCI"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"period",{get:function(){return this.getParameterValue(n.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(n.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="CCI",this.period=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line5.strokeColor,200),this.addLine(this.levelsTheme.line5.strokeColor,100),this.addLine(this.levelsTheme.line5.strokeColor,0),this.addLine(this.levelsTheme.line5.strokeColor,-100),this.addLine(this.levelsTheme.line5.strokeColor,-200)},i.prototype.setConfigure=function(){this._sma=this.SMA(this.typical,this.period)},i.prototype.onBarUpdate=function(){var t=this.values.get(this.name);if(0===this.currentBar)t.set(0);else{for(var e=0,i=this._sma.values.get(0).get(0),o=Math.min(this.currentBar,this.period-1);0<=o;o--)e+=Math.abs(this.typical.get(o)-i);var r=(this.typical.get(0)-i)/(0===n.JsUtil.approxCompare(e,0)?1:e/Math.min(this.period,this.currentBar+1)*.015);t.set(r)}};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}n.CCI=e,n.Indicator.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"RSS"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ema1",{get:function(){return this.getParameterValue(e.IndicatorParam.EMA1)},set:function(t){this.setParameterValue(e.IndicatorParam.EMA1,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ema2",{get:function(){return this.getParameterValue(e.IndicatorParam.EMA2)},set:function(t){this.setParameterValue(e.IndicatorParam.EMA2,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="RSS",this.ema1=10,this.ema2=40,this.period=4,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line1.strokeColor,20),this.addLine(this.levelsTheme.line1.strokeColor,80)},o.prototype.setConfigure=function(){this._spread=new e.TADataSeries("spread",this),this._rs=new e.TADataSeries("rs",this),this._ema1=this.EMA(null,this.ema1),this._ema2=this.EMA(null,this.ema2),this._rsi=this.RSI(this._spread,this.period,1),this._sma=this.SMA(this._rs,5)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._ema1.values.get(0),i=this._ema2.values.get(0),e=e.get(0)-i.get(0),i=(this._spread.set(e),this._rs.set(this._rsi.values.get(0).get(0)),this._sma.values.get(0).get(0));t.set(i)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.RSS=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"HMA"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="HMA",this.period=14,this._isOverlay=!0,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._diffSeries=new e.TADataSeries("Down",this),this._wma1=this.WMA(this.input,this.period/2),this._wma2=this.WMA(this.input,this.period),this._wmaDiffSeries=this.WMA(this._diffSeries,Math.floor(Math.sqrt(this.period)))},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._wma1.values.get(0).get(0),i=this._wma2.values.get(0).get(0);this._diffSeries.set(2*e-i);e=this._wmaDiffSeries.values.get(0).get(0);t.set(e)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.HMA=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){e=t.Indicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"PNB"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="PNB",this._isOverlay=!0,this.addPlot(this.indicatorTheme.line2.strokeColor,"Prime Bands Top"),this.addPlot(this.indicatorTheme.line3.strokeColor,"Prime Bands Bottom")},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t,e,i=this.values.get("Prime Bands Top"),o=this.values.get("Prime Bands Bottom"),r=this.low,n=this.high,a=r.get(0);for(this._i=a;1<this._i;--this._i)if(this.isPrime(this._i)){e=this._i;break}for(o.set(e),a=n.get(0),this._i=a;this._i<2*a;++this._i)if(this.isPrime(this._i)){t=this._i;break}i.set(t)},o.prototype.isPrime=function(t){if(3<t){if(!(t%2))return!1;if(!(t%3))return!1}for(var e=5,i=2,o=Math.sqrt(t)+1;e<=o;){if(!(t%e))return!1;e+=i,i=6-i}return!0};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.PNB=i,t.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"TMA"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="TMA",this.period=15,this._isOverlay=!0,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._p1=0,(this._p2=0)==(1&this.period)?(this._p1=this.period/2,this._p2=this._p1+1):(this._p1=(this.period+1)/2,this._p2=this._p1),this._sma0=this.SMA(this.input,this._p1),this._sma=this.SMA(this._sma0,this._p2)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._sma.values.get(0).get(0);t.set(e)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.TMA=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"NVI"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="NVI",this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.volume;this.currentBar<1?t.set(1):(e=e.get(0)<e.get(1)?(e=this.input.get(1),t.get(1)+(this.input.get(0)-e)/e*t.get(1)):t.get(1),t.set(e))};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.NVI=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"PVI"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="PVI",this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.volume;this.currentBar<2?t.set(1):(e=e.get(0)>e.get(1)?(e=this.input.get(1),t.get(1)+(this.input.get(0)-e)/e*t.get(1)):t.get(1),t.set(e))};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.PVI=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"PVT"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="PVT",this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t,e,i;this.currentBar<2||(t=this.values.get(this.name),e=this.volume,i=this.input.get(1),i=(this.input.get(0)-i)/i*e.get(0)+t.get(1),t.set(i/=1e4))};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.PVT=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"TVI"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"limitValue",{get:function(){return this.getParameterValue(e.IndicatorParam.LIMIT_VALUE)},set:function(t){this.setParameterValue(e.IndicatorParam.LIMIT_VALUE,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="TVI",this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.limitValue=.5,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._tvi=0},o.prototype.onBarUpdate=function(){var t,e;this.currentBar<1||(t=this.values.get(this.name),(e=this.input.get(0)-this.input.get(1))>this.limitValue?this._direction=1:e<-this.limitValue&&(this._direction=-1),e<=this.limitValue&&e>=-this.limitValue&&(this._direction=this._lastDirection),this._lastDirection=this._direction,1===this._direction?this._tvi=this._tvi+this.volume.get(0):-1===this._direction&&(this._tvi=this._tvi-this.volume.get(0)),this._tvi/=1e4,t.set(this._tvi))};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.TVI=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"TMF"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="TMF",this.period=14,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._ema=this.EMA(this.volume,this.period),this._ema2=this.EMA(this.values.get(this.name),this.period),this._high=new e.TADataSeries("high",this),this._low=new e.TADataSeries("low",this)},o.prototype.onBarUpdate=function(){var t,e,i,o;this.currentBar<1||(t=this._ema.values.get(0),e=this.values.get(this.name),o=this._high,i=this._low,o.set(Math.max(this.high.get(0),this.close.get(1))),i.set(Math.min(this.low.get(0),this.close.get(1))),e.set((this.close.get(0)-i.get(0)-(o.get(0)-this.close.get(0)))/(o.get(0)-i.value(0))*this.volume.get(0)),o=this._ema2.values.get(0),e.set(o.get(0)/t.get(0)))};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.TMF=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"WWS"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="WWS",this.period=14,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this._isOverlay=!0,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t,e;this.currentBar<1||(e=(t=this.values.get(this.name)).get(1)+1/this.period*(this.input.get(0)-t.get(1)),t.set(e))};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.WWS=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"CFO"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="CFO",this.period=14,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._tsf=this.TSF(this.input,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._tsf.values.get(0),e=(this.input.get(0)-e.get(0))/this.input.get(0)*100;t.set(e)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.CFO=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"EFT"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="EFT",this.period=14,this.addPlot(this.indicatorTheme.line2.strokeColor,"Indicator"),this.addPlot(this.indicatorTheme.line3.strokeColor,"Indicator Trigger")},o.prototype.setConfigure=function(){this._max=this.MAX(this.median,this.period),this._min=this.MIN(this.median,this.period),this._value1=0,this._prevValue1=0,this._prevFish=0},o.prototype.onBarUpdate=function(){var t=this.values.get("Indicator"),e=this.values.get("Indicator Trigger"),i=this._max.values.get(0),o=this._min.values.get(0),i=(i.get(0)!==o.get(0)?this._value1=.66*((this.median.get(0)-o.get(0))/(i.get(0)-o.get(0))-.5)+.67*this._prevValue1:this._value1=0,.99<this._value1&&(this._value1=.999),this._value1<-.99&&(this._value1=-.999),.5*Math.log((1+this._value1)/(1-this._value1))+.5*this._prevFish);t.set(i),e.set(this._prevFish),this._prevValue1=this._value1,this._prevFish=i};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.EFT=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"PGO"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="PGO",this.period=14,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._sma=this.SMA(this.close,this.period),this._tr=this.TrueRange(null,this.period),this._ema=this.EMA(this._tr,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._sma.values.get(0),i=this._ema.values.get(0);0!==i.get(0)?t.set((this.close.get(0)-e.get(0))/i.get(0)):t.set(null)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.PGO=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){e=t.Indicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"PNO"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="PNO",this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._top=0,this._bottom=0},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.close.get(0);e<10&&(e*=10);for(var i=e;1<i;--i)if(this._isPrime(i)){this._bottom=i;break}for(i=e;i<2*e;++i)if(this._isPrime(i)){this._top=i;break}Math.abs(e-this._top)<Math.abs(e-this._bottom)?t.set(e-this._top):t.set(e-this._bottom)},o.prototype._isPrime=function(t){if(3<t){if(!(t%2))return!1;if(!(t%3))return!1}for(var e=5,i=2,o=Math.sqrt(t)+1;e<=o;){if(!(t%e))return!1;e+=i,i=6-i}return!0};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.PNO=i,t.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){e=t.Indicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"WAD"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="WAD",this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t,e,i;this.currentBar<1||(t=this.values.get(0),e=this.close.get(1),this.high.get(0)>e&&(e=this.high.get(0)),i=this.close.get(1),this.low.get(0)<i&&(i=this.low.get(0)),i=this.close.get(0)>this.close.get(1)?this.close.get(0)-i:this.close.get(0)<this.close.get(1)?this.close.get(0)-e:0,t.set(i+t.get(1)))};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.WAD=i,t.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"RIND"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"periodQ",{get:function(){return this.getParameterValue(e.IndicatorParam.Q_PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.Q_PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"smooth",{get:function(){return this.getParameterValue(e.IndicatorParam.SMOOTH)},set:function(t){this.setParameterValue(e.IndicatorParam.SMOOTH,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="RIND",this.periodQ=3,this.smooth=10,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._stochRange=new e.TADataSeries("stochRange",this),this._val1=new e.TADataSeries("val",this),this._ema=this.EMA(this._stochRange,this.smooth),this._min=this.MIN(this._val1,this.periodQ),this._max=this.MAX(this._val1,this.periodQ)},o.prototype.onBarUpdate=function(){var t,e,i,o,r=this.values.get(this.name);0===this.currentBar?this._stochRange.set(50):(o=this.high.get(0),t=this.low.get(0),e=this.close.get(0),i=this.close.get(1),o=Math.max(o,i)-Math.min(t,i),this._val1.set(t=i<e?o/(e-i):o),e=this._min.values.get(0).get(0),i=this._max.values.get(0).get(0),this._stochRange.set(0<i-e?(t-e)/(i-e)*100:100*(t-e)),o=this._ema.values.get(0),r.set(o.get(0)))};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.RIND=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"DEMA"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="DEMA",this.period=14,this._isOverlay=!0,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._ema=this.EMA(this.input,this.period),this._emaEma=this.EMA(this._ema,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._ema.values.get(0),i=this._emaEma.values.get(0),e=2*e.get(0)-i.get(0);t.set(e)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.DEMA=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(n){t=n.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"KAMA"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(n.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(n.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"period",{get:function(){return this.getParameterValue(n.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(n.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fast",{get:function(){return this.getParameterValue(n.IndicatorParam.FAST)},set:function(t){this.setParameterValue(n.IndicatorParam.FAST,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"slow",{get:function(){return this.getParameterValue(n.IndicatorParam.SLOW)},set:function(t){this.setParameterValue(n.IndicatorParam.SLOW,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="KAMA",this.period=14,this.fast=25,this.slow=40,this._isOverlay=!1,this.inputSeriesKind=n.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},i.prototype.setConfigure=function(){this._fastCF=2/(this.fast+1),this._slowCF=2/(this.slow+1),this._diffSeries=new n.TADataSeries("diffSeries",this),this._sum=this.SUM(this._diffSeries,this.period)},i.prototype.onBarUpdate=function(){var t,e,i=this.values.get(this.name),o=this.input.get(0),r=0<this.currentBar?Math.abs(o-this.input.get(1)):o;this._diffSeries.set(r),this.currentBar<this.period?i.set(o):(r=Math.abs(o-this.input.get(this.period)),t=this._sum.values.get(0).get(0),n.JsUtil.equals(t,0)?i.set(i.get(1)):(r=(e=i.get(1))+Math.pow(r/t*(this._fastCF-this._slowCF)+this._slowCF,2)*(o-e),i.set(r)))};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}n.KAMA=e,n.Indicator.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"DBox"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="DBox",this.period=5,this._isOverlay=!0,this.addPlot(this.indicatorTheme.line1.strokeColor,"Top"),this.addPlot(this.indicatorTheme.line1.strokeColor,"Bottom")},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){for(var t=this.high,e=this.low,i=this.values.get("Top"),o=this.values.get("Bottom"),r=e.get(0),n=t.get(0),a=null,l=null,s=0;s<this.period&&1<=this.currentBar-s;s++)var c=s+1,n=Math.max(n,t.value(this.currentBar-s)),r=Math.min(r,e.value(this.currentBar-s)),a=c===this.period?n:a,l=this.period?r:l;i.set(a),o.set(l)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.DBox=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"TEMA"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="TEMA",this.period=14,this._isOverlay=!0,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._ema1=this.EMA(this.input,this.period),this._ema2=this.EMA(this._ema1,this.period),this._ema3=this.EMA(this._ema2,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=3*this._ema1.values.get(0).get(0)-3*this._ema2.values.get(0).get(0)+this._ema3.values.get(0).get(0);t.set(e)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.TEMA=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(c){(t=c.VWAPValueBand||(c.VWAPValueBand={})).BAND_11="VWAPValueBand11",t.BAND_12="VWAPValueBand12",t.BAND_21="VWAPValueBand21",t.BAMD_22="VWAPValueBand22",t.BAND_31="VWAPValueBand31",t.BAND_32="VWAPValueBand32",e=c.AdvancedIndicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"VWAP"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"showValueMarkers",{get:function(){return!1},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(c.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(c.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"setting",{get:function(){return this._vwapPlot.settings},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"settings",{set:function(t){var e=c.JsUtil.merge(this._settings,t),i=!!this._handleSettings(e);this._vwapPlot.settings=t,this._settings=e,this.chart.setNeedsUpdate(i)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){var t,e,i;this.name=o.className,this.period=0,this._isOverlay=!0,this.chart&&(t=new c.TADataSeries(this.name,this),e=this.linePlots.length,i=this._lineTheme(e),this._addLineParameters(e,this.indicatorTheme.line1.strokeColor,void 0,void 0),this._vwapPlot=new c.VWAPPlot({dataSeries:t,theme:i}),this._plots.push(this._vwapPlot),this.values.add(t))},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(t){var e=this.values.get(this.name),i=this.volume,o=this.typical,r=this.chart.getDataSeries(".date").values,n=(this.isFirstTickOfBar&&(this._firstDate=r[0]),this.setting.general.isShowCustomDuration);this.currentBar<this.period||n&&c.Frame.verificationFrame(this.setting.general.customDuration,this._firstDate,r[this.currentBar])?e.set(null):n?this._setDuration({values:e,volume:i,typical:o,dateList:r}):(0===(t=t||r.length-1)&&e.set(null),n=r[t],r=r[t-1],c.Frame.verificationFrame(this.setting.general.customDuration,n,r)||(this.comPriceVolume=0,this.comVolume=0),t=this._calculateComVolumes({index:0,volume:i,typical:o,date:n,comPriceVolume:this.comPriceVolume,comVolume:this.comVolume}),this.comPriceVolume=t.comPriceVolume,this.comVolume=t.comVolume,r=this.comPriceVolume/this.comVolume,e.set(isNaN(r)||0==r?null:r))},o.prototype._calculateComVolumes=function(t){var e=t.volume.get(t.index),i=e*t.typical.get(t.index),o=this.setting.general.customTimes;return o&&c.Session.isDateInSession(t.date,o)||(t.comPriceVolume+=i,t.comVolume+=e),{comPriceVolume:t.comPriceVolume,comVolume:t.comVolume}},o.prototype._handleSettings=function(t){return!!this._vwapPlot&&(this._vwapPlot.settings=t,this._settings=t,this.update(!0),!0)},o.prototype._setDuration=function(t){if(t.dateList.length){var e,i=this.setting.general.customDuration,o=0,r=0,n=0;do{var a=t.dateList[o],l=this._calculateComVolumes({index:o,volume:t.volume,typical:t.typical,date:a,comPriceVolume:r,comVolume:n}),r=l.comPriceVolume,n=l.comVolume}while(e=t.dateList[++o],c.Frame.verificationFrame(i,e,a)&&o<t.values.values.length);var s=r/n;c.Frame.verificationFrame(i,this._firstDate,e)?t.values.set(null):t.values.set(isNaN(s)||0==s?null:s)}};var e,t=o;function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.comPriceVolume=0,t.comVolume=0,t}c.VWAP=t,c.Indicator.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"TRIX"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"signalPeriod",{get:function(){return this.getParameterValue(e.IndicatorParam.SIGNAL_PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.SIGNAL_PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="TRIX",this.period=14,this.signalPeriod=3,this._isOverlay=!1,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line2.strokeColor,"Default"),this.addPlot(this.indicatorTheme.line3.strokeColor,"TRIXSignal"),this.addLine(this.levelsTheme.line1.strokeColor,0)},o.prototype.setConfigure=function(){this._ema1=this.EMA(this.input,this.period),this._ema2=this.EMA(this._ema1,this.period),this._emaTriple=this.EMA(this._ema2,this.period),this._default=this.values.get("Default"),this._trixSignal=this.values.get("TRIXSignal"),this._emaDefault=this.EMA(this._default,this.signalPeriod)},o.prototype.onBarUpdate=function(){var t,e;0!==this.currentBar&&(t=this._emaTriple.values.get(0).get(0),e=this._emaTriple.values.get(0).get(1),this._default.set((t-e)/t*100),this._trixSignal.set(this._emaDefault.values.get(0).get(0)))};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.TRIX=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"ADXR"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="ADXR",this.period=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line1.strokeColor,25),this.addLine(this.levelsTheme.line2.strokeColor,75)},o.prototype.setConfigure=function(){this._adx=this.ADX(null,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._adx.values.get("ADX"),i=e.get(0),i=this.currentBar<this.period?(i+e.get(this.currentBar))/2:(i+e.get(this.period))/2;t.set(i)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.ADXR=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"FOSC"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="FOSC",this.period=14,this._isOverlay=!1,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line1.strokeColor,0)},o.prototype.setConfigure=function(){this._tsf=this.TSF(this.input,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.input.get(0),e=(e-this._tsf.values.get(0).get(0))/e*100;t.set(e)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.FOSC=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"MACD"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fast",{get:function(){return this.getParameterValue(e.IndicatorParam.FAST)},set:function(t){this.setParameterValue(e.IndicatorParam.FAST,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"slow",{get:function(){return this.getParameterValue(e.IndicatorParam.SLOW)},set:function(t){this.setParameterValue(e.IndicatorParam.SLOW,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"smooth",{get:function(){return this.getParameterValue(e.IndicatorParam.SMOOTH)},set:function(t){this.setParameterValue(e.IndicatorParam.SMOOTH,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="MACD",this.period=14,this.fast=12,this.slow=26,this.smooth=9,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,"MACD"),this.addPlot(this.indicatorTheme.line3.strokeColor,"Down"),this.addPlot(this.indicatorTheme.histogram.color,"Diff",e.HistogramPlot.Style.COLUMN),this.addLine("gray",0)},o.prototype.setConfigure=function(){this._constant1=2/(1+this.fast),this._constant2=1-2/(1+this.fast),this._constant3=2/(1+this.slow),this._constant4=1-2/(1+this.slow),this._constant5=2/(1+this.smooth),this._constant6=1-2/(1+this.smooth),this._fastEma=new e.TADataSeries("fastEma",this),this._slowEma=new e.TADataSeries("slowEma",this)},o.prototype.onBarUpdate=function(){var t,e,i,o,r=this.input.get(0),n=this.values.get("MACD"),a=this.values.get("Down"),l=this.values.get("Diff");0===this.currentBar?(this._fastEma.set(r),this._slowEma.set(r),n.set(0),a.set(0),l.set(0)):(o=(e=(t=this._constant1*r+this._constant2*this._fastEma.get(1))-(r=this._constant3*r+this._constant4*this._slowEma.get(1)))-(i=this._constant5*e+this._constant6*a.get(1)),this._fastEma.set(t),this._slowEma.set(r),n.set(e),a.set(i),l.set(o))};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.MACD=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"VROC"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"smooth",{get:function(){return this.getParameterValue(e.IndicatorParam.SMOOTH)},set:function(t){this.setParameterValue(e.IndicatorParam.SMOOTH,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="VROC",this.period=14,this._isOverlay=!1,this.smooth=3,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line5.strokeColor,0)},o.prototype.setConfigure=function(){this._smaVolume=new e.TADataSeries("dmPlus",this),this._sma=this.SMA(this._smaVolume,this.smooth)},o.prototype.onBarUpdate=function(){var t,e=this.values.get(this.name);this.currentBar<this.period?e.set(null):(t=this.volume.get(Math.min(this.currentBar,this.period-1)),t=100*this.volume.get(0)/((0===t?1:t)-100),this._smaVolume.set(t),t=this._sma.values.get(0),e.set(t.get(0)))};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.VROC=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"RAVI"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"shortCycle",{get:function(){return this.getParameterValue(e.IndicatorParam.SHORT_CYCLE)},set:function(t){this.setParameterValue(e.IndicatorParam.SHORT_CYCLE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"longCycle",{get:function(){return this.getParameterValue(e.IndicatorParam.LONG_CYCLE)},set:function(t){this.setParameterValue(e.IndicatorParam.LONG_CYCLE,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="RAVI",this.shortCycle=9,this.longCycle=14,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._vidyaShort=this.VIDYA(this.input,this.shortCycle),this._vidyaLong=this.VIDYA(this.input,this.longCycle)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._vidyaShort.values.get(0),i=this._vidyaLong.values.get(0);t.set(Math.abs(e.get(0)-i.get(0))/i.get(0)*100)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.RAVI=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"VIDYA"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"r2Scale",{get:function(){return this.getParameterValue(e.IndicatorParam.R2_SCALE)},set:function(t){this.setParameterValue(e.IndicatorParam.R2_SCALE,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="VIDYA",this.period=14,this.r2Scale=.65,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this._isOverlay=!0,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._lr=this.LinearRegression(this.input,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._lr.values.get(0),i=this.input.get(1),e=e.get(0)*this.r2Scale;t.set(e*this.input.get(0)+(1-e)*i)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.VIDYA=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"VOLMA"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="VOLMA",this.period=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._ema=this.EMA(this.volume,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._ema.values.get(0);t.set(e.get(0))};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.VOLMA=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"ZLEMA"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="ZLEMA",this.period=14,this._isOverlay=!0,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._k=2/(this.period+1),this._oneMinusK=1-this._k,this._lag=Math.ceil((this.period-1)/2)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.currentBar<this._lag?this.input.get(0):this._k*(2*this.input.get(0)-this.input.get(this._lag))+this._oneMinusK*t.get(1);t.set(e)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.ZLEMA=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"Range"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="Range",this.period=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.high.get(0)-this.low.get(0);t.set(e)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.Range=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"StdDev"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="StdDev",this.period=14,this._isOverlay=!1,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._sumSeries=new e.TADataSeries("SumSeries",this)},o.prototype.onBarUpdate=function(){var t,e=this.values.get(this.name);if(this.currentBar<1)this._sumSeries.set(this.input.get(0)),t=0;else{this._sumSeries.set(this.input.get(0)+this._sumSeries.get(1)-(this.currentBar>=this.period?this.input.get(this.period):0));for(var i=this._sumSeries.get(0)/Math.min(this.currentBar+1,this.period),o=0,r=Math.min(this.currentBar,this.period-1);0<=r;r--)o+=(this.input.get(r)-i)*(this.input.get(r)-i);t=Math.sqrt(o/Math.min(this.currentBar+1,this.period))}e.set(t)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.StdDev=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"Aroon"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="Aroon",this.period=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line2.strokeColor,"Up"),this.addPlot(this.indicatorTheme.line3.strokeColor,"Down"),this.addLine(this.levelsTheme.line1.strokeColor,30),this.addLine(this.levelsTheme.line2.strokeColor,70)},o.prototype.setConfigure=function(){this._runningMax=0,this._runningMaxBar=0,this._runningMin=0,this._runningMinBar=0},o.prototype.onBarUpdate=function(){var t=this.high.get(0),e=this.low.get(0),i=this.values.get("Down"),o=this.values.get("Up");if(0===this.currentBar)return i.set(0),o.set(0),this._runningMax=t,this._runningMin=e,this._runningMaxBar=0,void(this._runningMinBar=0);var r=Math.min(this.period,this.currentBar);if(this.currentBar-this._runningMaxBar>=this.period){this._runningMax=Number.MIN_VALUE;for(var n=r;0<n;n--)this.high.get(n)>=this._runningMax&&(this._runningMax=this.high.get(n),this._runningMaxBar=this.currentBar-n)}if(this.currentBar-this._runningMinBar>=this.period){this._runningMin=Number.MAX_VALUE;for(n=r;0<n;n--)this.low.get(n)<=this._runningMin&&(this._runningMin=this.low.get(n),this._runningMinBar=this.currentBar-n)}t>=this._runningMax&&(this._runningMax=t,this._runningMaxBar=this.currentBar),e<=this._runningMin&&(this._runningMin=e,this._runningMinBar=this.currentBar);t=(r-(this.currentBar-this._runningMaxBar))/r*100,o.set(t),e=(r-(this.currentBar-this._runningMinBar))/r*100;i.set(e)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.Aroon=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"Momentum"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="Momentum",this.period=14,this._isOverlay=!1,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.indicatorTheme.line1.strokeColor,0)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=0!==this.currentBar?this.input.get(0)-this.input.get(Math.min(this.currentBar,this.period)):0;t.set(e)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.Momentum=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(i){t=i.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"Stochastics"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"periodD",{get:function(){return this.getParameterValue(i.IndicatorParam.PCT_D_PERIODS)},set:function(t){this.setParameterValue(i.IndicatorParam.PCT_D_PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"periodK",{get:function(){return this.getParameterValue(i.IndicatorParam.PCT_K_PERIODS)},set:function(t){this.setParameterValue(i.IndicatorParam.PCT_K_PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"smooth",{get:function(){return this.getParameterValue(i.IndicatorParam.SMOOTH)},set:function(t){this.setParameterValue(i.IndicatorParam.SMOOTH,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="Stochastics",this.periodD=7,this.periodK=14,this.smooth=3,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line2.strokeColor,"StochasticsD"),this.addPlot(this.indicatorTheme.line3.strokeColor,"StochasticsK"),this.addLine(this.levelsTheme.line1.strokeColor,20),this.addLine(this.levelsTheme.line1.strokeColor,80)},o.prototype.setConfigure=function(){this._den=new i.TADataSeries("den",this),this._nom=new i.TADataSeries("nom",this),this._fastK=new i.TADataSeries("fastK",this),this._min=this.MIN(this.low,this.periodK),this._max=this.MAX(this.high,this.periodK),this._smaFastK=this.SMA(this._fastK,this.smooth),this._k=this.values.get("StochasticsK"),this._d=this.values.get("StochasticsD"),this._smaK=this.SMA(this._k,this.periodD)},o.prototype.onBarUpdate=function(){var t=this._min.values.get(0).get(0),e=this.close.get(0)-t,e=(this._nom.set(e),this._max.values.get(0).get(0)-t);this._den.set(e),t=0===i.JsUtil.approxCompare(this._den.get(0),0)?0===this.currentBar?50:this._fastK.get(1):Math.min(100,Math.max(0,100*this._nom.get(0)/this._den.get(0))),this._fastK.set(t),this._k.set(this._smaFastK.values.get(0).get(0)),this._d.set(this._smaK.values.get(0).get(0))};var t,e=o;function o(){return null!==t&&t.apply(this,arguments)||this}i.Stochastics=e,i.Indicator.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(i){t=i.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"StochasticsFast"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"periodD",{get:function(){return this.getParameterValue(i.IndicatorParam.PCT_D_PERIODS)},set:function(t){this.setParameterValue(i.IndicatorParam.PCT_D_PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"periodK",{get:function(){return this.getParameterValue(i.IndicatorParam.PCT_K_PERIODS)},set:function(t){this.setParameterValue(i.IndicatorParam.PCT_K_PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="StochasticsFast",this.periodD=3,this.periodK=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line2.strokeColor,"StochasticsD"),this.addPlot(this.indicatorTheme.line3.strokeColor,"StochasticsK"),this.addLine(this.levelsTheme.line1.strokeColor,20),this.addLine(this.levelsTheme.line1.strokeColor,80)},o.prototype.setConfigure=function(){this._den=new i.TADataSeries("den",this),this._nom=new i.TADataSeries("nom",this),this._min=this.MIN(this.low,this.periodK),this._max=this.MAX(this.high,this.periodK),this._k=this.values.get("StochasticsK"),this._d=this.values.get("StochasticsD"),this._smaK=this.SMA(this._k,this.periodD)},o.prototype.onBarUpdate=function(){var t=this._min.values.get(0).get(0),e=this.close.get(0)-t,e=(this._nom.set(e),this._max.values.get(0).get(0)-t);this._den.set(e),t=0===i.JsUtil.approxCompare(this._den.get(0),0)?0===this.currentBar?50:this._k.get(1):Math.min(100,Math.max(0,100*this._nom.get(0)/this._den.get(0))),this._k.set(t),this._d.set(this._smaK.values.get(0).get(0))};var t,e=o;function o(){return null!==t&&t.apply(this,arguments)||this}i.StochasticsFast=e,i.Indicator.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"MAEnvelopes"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"envelopePercentage",{get:function(){return this.getParameterValue(e.IndicatorParam.ENVELOPE_PERCENTAGE)},set:function(t){this.setParameterValue(e.IndicatorParam.ENVELOPE_PERCENTAGE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maType",{get:function(){return this.getParameterValue(e.IndicatorParam.MA_TYPE)},set:function(t){this.setParameterValue(e.IndicatorParam.MA_TYPE,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="MAEnvelopes",this.period=14,this.envelopePercentage=1.5,this.maType=2,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this._isOverlay=!0,this.addPlot(this.indicatorTheme.line2.strokeColor,"Upper"),this.addPlot(this.indicatorTheme.line1.strokeColor,"Middle"),this.addPlot(this.indicatorTheme.line3.strokeColor,"Lower")},o.prototype.setConfigure=function(){this._ema=this.EMA(this.input,this.period),this._hma=this.HMA(this.input,this.period),this._sma=this.SMA(this.input,this.period),this._tma=this.TMA(this.input,this.period),this._tema=this.TEMA(this.input,this.period),this._wma=this.WMA(this.input,this.period),this._variable=this.VMA(this.input,this.period),this._wws=this.WWS(this.input,this.period),this._vidya=this.VIDYA(this.input,this.period)},o.prototype.onBarUpdate=function(){var t=0,e=this.values.get("Middle"),i=this.values.get("Upper"),o=this.values.get("Lower");switch(this.maType){case 0:t=this._ema.values.get(0).get(0),e.set(t);break;case 1:t=this._hma.values.get(0).get(0),e.set(t);break;case 2:t=this._sma.values.get(0).get(0),e.set(t);break;case 3:t=this._tma.values.get(0).get(0),e.set(t);break;case 4:t=this._tema.values.get(0).get(0),e.set(t);break;case 5:t=this._wma.values.get(0).get(0),e.set(t);break;case 6:t=this._variable.values.get(0).get(0),e.set(t);break;case 7:t=this._wws.values.get(0).get(0),e.set(t);break;case 8:t=this._vidya.values.get(0).get(0),e.set(t)}var r=t+t*this.envelopePercentage/100,n=t-t*this.envelopePercentage/100;i.set(r),o.set(n)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.MAEnvelopes=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"NBarsDown"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"barCount",{get:function(){return this.getParameterValue(e.IndicatorParam.BAR_COUNT)},set:function(t){this.setParameterValue(e.IndicatorParam.BAR_COUNT,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="NBarsDown",this.period=14,this.barCount=3,this._isOverlay=!1,this.barDown=!0,this.lowerHigh=!0,this.lowerLow=!0,this.addPlot(this.indicatorTheme.line3.strokeColor,this.name,e.HistogramPlot.Style.COLUMN)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name);if(this.currentBar<this.barCount)t.set(0);else{for(var e=!1,i=0;i<this.barCount+1;i++){if(i===this.barCount){e=!0;break}if(!(this.close.get(i)<this.close.get(i+1)))break;if(this.barDown&&!(this.close.get(i)<this.open.get(i)))break;if(this.lowerHigh&&!(this.high.get(i)<this.high.get(i+1)))break;if(this.lowerLow&&!(this.low.get(i)<this.low.get(i+1)))break}t.set(e?1:0)}};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.NBarsDown=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"VolumeUpDown"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="VolumeUpDown",this._isOverlay=!1,this.addPlot("green","VolumeUp",e.HistogramPlot.Style.COLUMN),this.addPlot("red","VolumeDown",e.HistogramPlot.Style.COLUMN),this.addLine(this.levelsTheme.line5.strokeColor,0)},o.prototype._getLineParametersKeys=function(t){switch(t){case 0:return[e.IndicatorParam.LINE_COLOR,e.IndicatorParam.LINE_ENABLED];case 1:return[e.IndicatorParam.LINE2_COLOR,e.IndicatorParam.LINE2_ENABLED];case 2:return[e.IndicatorParam.LINE3_COLOR,e.IndicatorParam.LINE3_ENABLED];case 3:return[e.IndicatorParam.LINE4_COLOR,e.IndicatorParam.LINE4_ENABLED];case 4:return[e.IndicatorParam.LINE5_COLOR,e.IndicatorParam.LINE5_ENABLED]}},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t=this.values.get("VolumeUp"),e=this.values.get("VolumeDown");this.close.get(0)>=this.open.get(0)?(e.set(null),t.set(this.volume.get(0))):(t.set(null),e.set(this.volume.get(0)))};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.VolumeUpDown=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"NBarsUp"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"barCount",{get:function(){return this.getParameterValue(e.IndicatorParam.BAR_COUNT)},set:function(t){this.setParameterValue(e.IndicatorParam.BAR_COUNT,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="NBarsUp",this.period=14,this._isOverlay=!1,this.barCount=3,this.barUp=!0,this.higherHigh=!0,this.higherLow=!0,this.addPlot(this.indicatorTheme.histogram.color,this.name,e.HistogramPlot.Style.COLUMN)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name);if(this.currentBar<this.barCount)t.set(0);else{for(var e=!1,i=0;i<this.barCount+1;i++){if(i===this.barCount){e=!0;break}if(!(this.close.get(i)>this.close.get(i+1)))break;if(this.barUp&&!(this.close.get(i)>this.open.get(i)))break;if(this.higherHigh&&!(this.high.get(i)>this.high.get(i+1)))break;if(this.higherLow&&!(this.low.get(i)>this.low.get(i+1)))break}t.set(e?1:0)}};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.NBarsUp=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"LogChange"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="LogChange",this.period=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t,e=this.values.get(this.name);0!==this.currentBar&&(t=0<(t=Math.abs(this.close.get(0)-this.close.get(1)))?Math.log(t):0,e.set(t))};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.LogChange=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"Bollinger"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"numStdDev",{get:function(){return this.getParameterValue(e.IndicatorParam.STANDARD_DEVIATIONS)},set:function(t){this.setParameterValue(e.IndicatorParam.STANDARD_DEVIATIONS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="Bollinger",this.period=14,this.numStdDev=2,this._isOverlay=!0,this.addPlot(this.indicatorTheme.line2.strokeColor,"UpperBand"),this.addPlot(this.indicatorTheme.line1.strokeColor,"MiddleBand"),this.addPlot(this.indicatorTheme.line3.strokeColor,"LowerBand")},o.prototype.setConfigure=function(){this._sma=this.SMA(null,this.period),this._stdDev=this.StdDev(null,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get("UpperBand"),e=this.values.get("MiddleBand"),i=this.values.get("LowerBand"),o=this._sma.values.get("SMA"),r=this._stdDev.values.get("StdDev"),n=o.get(0)+this.numStdDev*r.get(0),r=o.get(0)-this.numStdDev*r.get(0);t.set(n),e.set(o.get(0)),i.set(r)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.Bollinger=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(s){t=s.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"AroonOscillator"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"period",{get:function(){return this.getParameterValue(s.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(s.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="AroonOscillator",this.period=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line1.strokeColor,0)},i.prototype.setConfigure=function(){},i.prototype.onBarUpdate=function(){var t,e=this.values.get(this.name);if(0===this.currentBar)t=0;else{for(var i=Math.min(this.period,this.currentBar),o=-1,r=-1,n=Number.MIN_VALUE,a=Number.MAX_VALUE,l=i;0<=l;l--)0<=s.JsUtil.approxCompare(this.high.get(i-l),n)&&(n=this.high.get(i-l),o=this.currentBar-i+l),s.JsUtil.approxCompare(this.low.get(i-l),a)<=0&&(a=this.low.get(i-l),r=this.currentBar-i+l);t=(i-(this.currentBar-o))/i*100-(i-(this.currentBar-r))/i*100}e.set(t)};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}s.AroonOscillator=e,s.Indicator.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){e=t.Indicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"TypicalPrice"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="TypicalPrice",this._isOverlay=!0,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.typical.get(0);t.set(e)};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.TypicalPrice=i,t.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){e=t.Indicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"MedianPrice"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="MedianPrice",this._isOverlay=!0,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.median.get(0);t.set(e)};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.MedianPrice=i,t.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){e=t.Indicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"WeightedClose"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="WeightedClose",this.period=14,this._isOverlay=!0,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.high.get(0),i=this.low.get(0),o=this.close.get(0);t.set((e+i+2*o)/4)};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.WeightedClose=i,t.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"SwingIndex"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"limitValue",{get:function(){return this.getParameterValue(e.IndicatorParam.LIMIT_VALUE)},set:function(t){this.setParameterValue(e.IndicatorParam.LIMIT_VALUE,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="SwingIndex",this.limitValue=.5,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t,e=this.values.get(this.name);if(this.limitValue<=0)return null;this._oy=this.open.get(1),this._ot=this.open.get(0),this._ht=this.high.get(0),this._lt=this.low.get(0),this._cy=this.close.get(1),this._ct=this.close.get(0),!(Math.abs(this._ht-this._cy)>Math.abs(this._lt-this._cy))&&Math.abs(this._lt-this._cy)>Math.abs(this._ht-this._cy)?this._k=Math.abs(this._lt-this._cy):this._k=Math.abs(this._ht-this._cy),this._a=Math.abs(this._ht-this._cy),this._b=Math.abs(this._lt-this._cy),this._c=Math.abs(this._ht-this._lt),this._a>this._b&&this._a>this._c?this._r=Math.abs(this._ht-this._cy)-.5*Math.abs(this._lt-this._cy)+.25*Math.abs(this._cy-this._oy):this._b>this._a&&this._b>this._c?this._r=Math.abs(this._lt-this._cy)-.5*Math.abs(this._ht-this._cy)+.25*Math.abs(this._cy-this._oy):this._c>this._a&&this._c>this._b&&(this._r=Math.abs(this._ht-this._lt)+.25*Math.abs(this._cy-this._oy)),t=0<this._r&&0<this.limitValue?50*(this._ct-this._cy+.5*(this._ct-this._ot)+.25*(this._cy-this._oy))/this._r*this._k/this.limitValue:0,e.set(t)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.SwingIndex=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){e=t.Indicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"ElderThermometer"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="ElderThermometer",this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t,e,i;this.currentBar<1||(t=this.values.get(this.name),e=this.volume,i=this.high,i=Math.abs(i.get(0)-i.get(1)),e=Math.abs(e.get(1)-e.get(0)),i=Math.max(i,e),t.set(i))};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.ElderThermometer=i,t.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){i=e.Indicator,__extends(o,i),Object.defineProperty(o,"className",{get:function(){return"HistoricalVolatility"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="HistoricalVolatility",this.period=14,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._stdSeries=new e.TADataSeries("stdSeries",this),this._stdDev=this.StdDev(this._stdSeries,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.input;this.currentBar<2||(e=Math.log(e.get(0)/e.get(1)),this._stdSeries.set(e),e=this._stdDev.values.get(0).get(0)*Math.sqrt(this._barHistory),t.set(e))};var i,t=o;function o(){var t=null!==i&&i.apply(this,arguments)||this;return t._barHistory=10,t}e.HistoricalVolatility=t,e.Indicator.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){e=t.Indicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"MarketFacilitationIndex"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="MarketFacilitationIndex",this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){this.values.get(this.name).set(this.high.get(0)-this.low.get(0)/(this.volume.get(0)/1e8))};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.MarketFacilitationIndex=i,t.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"PerformanceIndex"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="PerformanceIndex",this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t,e=this.values.get(this.name);this.currentBar<2?this._firstPrice=this.input.get(0):(t=(this.input.get(0)-this._firstPrice)/this._firstPrice*100,e.set(t))};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.PerformanceIndex=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"McGinleysDynamic"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="McGinleysDynamic",this.period=14,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this._isOverlay=!0,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._ema=this.EMA(this.input,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._ema.values.get(0),e=e.get(1)+(this.input.get(0)-e.get(1))/(this.input.get(0)/e.get(1)*125);t.set(e)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.McGinleysDynamic=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"LinearRegression"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="LinearRegression",this.period=14,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){if(!(this.currentBar<this.period+1)){for(var t=this.values.get(0),e=0,i=this.period,o=new Array(i),r=1,n=this.period,a=this.period+1;1<a;a--){var l=this.input.get(n);o[r]=l,r++,n--}for(var s=0,c=0,h=0,u=0,f=0,d=1;d<i+1;d++)s+=d,c+=o[d],h+=d*d,u+=o[d]*o[d],f+=o[d]*d;var p=f-s*c/(d=i),y=h-s*s/d,m=u-c*c/d;t.set(e=p*p&&y*m?p*p/(y*m):e)}};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.LinearRegression=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"CenterOfGravity"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="CenterOfGravity",this.period=14,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){for(var t=this.values.get(this.name),e=0,i=0,o=1,r=this.period;0<r;r--)e+=this.input.get(r)*(o+1),i+=this.input.get(r),o++;t.set(+e/i)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.CenterOfGravity=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"CoppockCurve"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="CoppockCurve",this.period=14,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._roc=this.ROC(this.input,14),this._roc1=this.ROC(this.input,11),this._series=new e.TADataSeries("series",this),this._wma=this.WMA(this._series,11)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._roc.values.get(0),i=this._roc1.values.get(0),e=e.get(0)+i.get(0);this._series.set(e);e=this._wma.values.get(0).get(0);t.set(e)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.CoppockCurve=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){e=t.Indicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"TrueRange"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="TrueRange",this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.high.get(0)-this.low.get(0),i=Math.abs(this.high.get(0)-this.close.get(0)),o=Math.abs(this.close.get(0)-this.low.get(0)),r=0;t.set(r=(r=(r=r<e?e:r)<i?i:r)<o?o:r)};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.TrueRange=i,t.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"LinearRegressionForecast"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="LinearRegressionForecast",this.period=14,this._isOverlay=!0,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){if(!(this.currentBar<this.period+1)){for(var t=this.values.get(0),e=this.period,i=new Array(e),o=1,r=this.period,n=this.period+1;1<n;n--){var a=this.input.get(r);i[o]=a,o++,r--}for(var l=0,s=0,c=0,h=0,u=1;u<e+1;u++)l+=u,s+=i[u],c+=u*u,h+=i[u]*u;var f=(h-l*s/(u=e))/(c-l*l/u),d=1/u*s-parseInt(u/2,10)*f;t.set(u*f+d)}};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.LinearRegressionForecast=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"LinearRegressionSlope"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="LinearRegressionSlope",this.period=14,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){if(!(this.currentBar<this.period+1)){for(var t=this.values.get(0),e=this.period,i=new Array(e),o=1,r=this.period,n=this.period+1;1<n;n--){var a=this.input.get(r);i[o]=a,o++,r--}for(var l=0,s=0,c=0,h=0,u=1;u<e+1;u++)l+=u,s+=i[u],c+=u*u,h+=i[u]*u;t.set((h-l*s/(u=e))/(c-l*l/u))}};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.LinearRegressionSlope=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"LinearRegressionIntercept"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="LinearRegressionIntercept",this.period=14,this._isOverlay=!0,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){if(!(this.currentBar<this.period+1)){for(var t=this.values.get(0),e=this.period,i=new Array(e),o=1,r=this.period,n=this.period+1;1<n;n--){var a=this.input.get(r);i[o]=a,o++,r--}for(var l=0,s=0,c=0,h=0,u=1;u<e+1;u++)l+=u,s+=i[u],c+=u*u,h+=i[u]*u;var f=(h-l*s/(u=e))/(c-l*l/u),f=1/u*s-parseInt(u/2,10)*f;t.set(f)}};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.LinearRegressionIntercept=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"HighLowBands"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="HighLowBands",this.period=14,this._isOverlay=!0,this.addPlot(this.indicatorTheme.line2.strokeColor,"Upper"),this.addPlot(this.indicatorTheme.line1.strokeColor,"Middle"),this.addPlot(this.indicatorTheme.line3.strokeColor,"Lower")},o.prototype.setConfigure=function(){this._vidyaHigh=this.VIDYA(this.high,this.period),this._vidyaClose=this.VIDYA(this.close,this.period),this._vidyaLow=this.VIDYA(this.low,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get("Upper"),e=this.values.get("Middle"),i=this.values.get("Lower"),o=this._vidyaHigh.values.get(0),r=this._vidyaClose.values.get(0),n=this._vidyaLow.values.get(0);t.set(o.get(0)),e.set(r.get(0)),i.set(n.get(0))};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.HighLowBands=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"ElderRay"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maType",{get:function(){return this.getParameterValue(e.IndicatorParam.MA_TYPE)},set:function(t){this.setParameterValue(e.IndicatorParam.MA_TYPE,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="ElderRay",this.period=14,this.maType=2,this.addPlot(this.indicatorTheme.line2.strokeColor,"BullPower"),this.addPlot(this.indicatorTheme.line3.strokeColor,"BearPower")},o.prototype.setConfigure=function(){this._ema=this.EMA(this.input,this.period),this._hma=this.HMA(this.input,this.period),this._sma=this.SMA(this.input,this.period),this._tma=this.TMA(this.input,this.period),this._tema=this.TEMA(this.input,this.period),this._wma=this.WMA(this.input,this.period),this._variable=this.VMA(this.input,this.period),this._wws=this.WWS(this.input,this.period),this._vidya=this.VIDYA(this.input,this.period)},o.prototype.onBarUpdate=function(){var t=0,e=this.values.get("BullPower"),i=this.values.get("BearPower");switch(this.maType){case 0:t=this._ema.values.get(0).get(0);break;case 1:t=this._hma.values.get(0).get(0);break;case 2:t=this._sma.values.get(0).get(0);break;case 3:t=this._tma.values.get(0).get(0);break;case 4:t=this._tema.values.get(0).get(0);break;case 5:t=this._wma.values.get(0).get(0);break;case 6:t=this._variable.values.get(0).get(0);break;case 7:t=this._wws.values.get(0).get(0);break;case 8:t=this._vidya.values.get(0).get(0)}e.set(this.high.get(0)-t),i.set(t-this.low.get(0))};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.ElderRay=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(r){t=r.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"StochRSI"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(r.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(r.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"period",{get:function(){return this.getParameterValue(r.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(r.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="StochRSI",this.period=14,this.inputSeriesKind=r.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line1.strokeColor,.8),this.addLine(this.levelsTheme.line2.strokeColor,.5),this.addLine(this.levelsTheme.line3.strokeColor,.2)},i.prototype.setConfigure=function(){this._rsi=this.RSI(this.input,this.period,1),this._min=this.MIN(this._rsi,this.period),this._max=this.MAX(this._rsi,this.period)},i.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._rsi.values.get(0).get(0),i=this._min.values.get(0).get(0),o=this._max.values.get(0).get(0),e=r.JsUtil.equals(e,i)||r.JsUtil.equals(o,i)?0:(e-i)/(o-i);t.set(e)};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}r.StochRSI=e,r.Indicator.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"DeviationToMA"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="DeviationToMA",this.period=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t,e=this.values.get(this.name);0!==this.currentBar&&0!==(t=this.getAverage(this.close,this.currentBar))&&(t=(this.close.get(0)-t)/t,e.set(t))};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.DeviationToMA=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(a){t=a.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"ChaikinMoneyFlow"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"period",{get:function(){return this.getParameterValue(a.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(a.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="ChaikinMoneyFlow",this.period=21,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},i.prototype.setConfigure=function(){this._moneyFlow=new a.TADataSeries("moneyFlow",this),this._sumMoneyFlow=this.SUM(this._moneyFlow,this.period),this._sumVolume=this.SUM(this.volume,this.period)},i.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.close.get(0),i=this.low.get(0),o=this.high.get(0),r=this.volume.get(0),n=this._sumVolume.values.get(0),r=r*(e-i-(o-e))/(0===a.JsUtil.approxCompare(o-i,0)?1:o-i),e=(this._moneyFlow.set(r),100*this._sumMoneyFlow.values.get(0).get(0)/n.get(0));t.set(e)};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}a.ChaikinMoneyFlow=e,a.Indicator.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"ChaikinVolatility"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maPeriod",{get:function(){return this.getParameterValue(e.IndicatorParam.MA_PERIOD)},set:function(t){this.setParameterValue(e.IndicatorParam.MA_PERIOD,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rocPeriod",{get:function(){return this.getParameterValue(e.IndicatorParam.RATE_OF_CHANGE)},set:function(t){this.setParameterValue(e.IndicatorParam.RATE_OF_CHANGE,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="ChaikinVolatility",this.maPeriod=10,this.rocPeriod=10,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._ema=this.EMA(this.Range(),this.maPeriod)},o.prototype.onBarUpdate=function(){var t=this.values.get(0),e=this._ema.values.get(0),i=e.get(Math.min(this.currentBar,this.rocPeriod)),e=0===this.currentBar?e.get(0):(e.get(0)-i)/i*100;e!==Number.NEGATIVE_INFINITY&&e!==Number.POSITIVE_INFINITY||(e=0),t.set(e)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.ChaikinVolatility=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(r){t=r.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"ChaikinOscillator"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"period",{get:function(){return this.getParameterValue(r.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(r.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fast",{get:function(){return this.getParameterValue(r.IndicatorParam.FAST)},set:function(t){this.setParameterValue(r.IndicatorParam.FAST,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"slow",{get:function(){return this.getParameterValue(r.IndicatorParam.SLOW)},set:function(t){this.setParameterValue(r.IndicatorParam.SLOW,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="ChaikinOscillator",this.period=14,this.fast=3,this.slow=10,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},i.prototype.setConfigure=function(){this._cummulative=new r.TADataSeries("Comulative",this),this._moneyFlow=new r.TADataSeries("MoneyFlow",this),this._emaFast=this.EMA(this._cummulative,this.fast),this._emaSlow=this.EMA(this._moneyFlow,this.slow)},i.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.close.get(0),i=this.low.get(0),o=this.high.get(0),e=this.volume.get(0)*(e-i-(o-e))/(0===r.JsUtil.approxCompare(o-i,0)?1:o-i),o=(this._moneyFlow.set(e),e+(0===this.currentBar?0:this._cummulative.get(1))),i=(this._cummulative.set(o),this._emaFast.values.get(0)),e=this._emaSlow.values.get(0),o=i.get(0)-e.get(0);t.set(o)};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}r.ChaikinOscillator=e,r.Indicator.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"PriceOscillator"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fast",{get:function(){return this.getParameterValue(e.IndicatorParam.FAST)},set:function(t){this.setParameterValue(e.IndicatorParam.FAST,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"slow",{get:function(){return this.getParameterValue(e.IndicatorParam.SLOW)},set:function(t){this.setParameterValue(e.IndicatorParam.SLOW,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"smooth",{get:function(){return this.getParameterValue(e.IndicatorParam.SMOOTH)},set:function(t){this.setParameterValue(e.IndicatorParam.SMOOTH,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="PriceOscillator",this.period=14,this.fast=12,this.slow=26,this.smooth=9,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line5.strokeColor,0)},o.prototype.setConfigure=function(){this._smoothEma=new e.TADataSeries("dmPlus",this),this._emaFast=this.EMA(null,this.fast),this._emaSlow=this.EMA(null,this.slow),this._emaSmooth=this.EMA(this._smoothEma,this.smooth)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._emaFast.values.get(0),i=this._emaSlow.values.get(0),e=e.get(0)-i.get(0),i=(this._smoothEma.set(e),this._emaSmooth.values.get(0).get(0));t.set(i)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.PriceOscillator=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"DonchianChannel"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="DonchianChannel",this.period=14,this._isOverlay=!0,this.addPlot(this.indicatorTheme.line2.strokeColor,"Upper"),this.addPlot(this.indicatorTheme.line1.strokeColor,"Middle"),this.addPlot(this.indicatorTheme.line3.strokeColor,"Lower")},o.prototype.setConfigure=function(){this._max=this.MAX(this.high,this.period),this._min=this.MIN(this.low,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get("Middle"),e=this.values.get("Upper"),i=this.values.get("Lower"),o=this._max.values.get(0),r=this._min.values.get(0),e=(e.set(o.get(0)),i.set(r.get(0)),(o.get(0)+r.get(0))/2);t.set(e)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.DonchianChannel=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"KeyReversalDown"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="KeyReversalDown",this.period=1,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._max=this.MAX(this.high,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._max.values.get(0);this.currentBar<this.period+1||(e=this.high.get(0)>e.get(1)&&this.close.get(0)<this.close.get(1)?1:0,t.set(e))};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.KeyReversalDown=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"KeyReversalUp"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="KeyReversalUp",this.period=1,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._min=this.MIN(this.low,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._min.values.get(0);this.currentBar<this.period+1||(e=this.low.get(0)<e.get(1)&&this.close.get(0)>this.close.get(1)?1:0,t.set(e))};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.KeyReversalUp=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(o){t=o.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"EasyOfMovement"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"period",{get:function(){return this.getParameterValue(o.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(o.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"smooth",{get:function(){return this.getParameterValue(o.IndicatorParam.SMOOTH)},set:function(t){this.setParameterValue(o.IndicatorParam.SMOOTH,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"volumeDivisor",{get:function(){return this.getParameterValue(o.IndicatorParam.VOLUME_DIVISOR)},set:function(t){this.setParameterValue(o.IndicatorParam.VOLUME_DIVISOR,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="EasyOfMovement",this.period=14,this.volumeDivisor=1e4,this.smooth=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line5.strokeColor,0)},i.prototype.setConfigure=function(){this._emv=new o.TADataSeries("dmPlus",this),this._ema=this.EMA(this._emv,this.smooth)},i.prototype.onBarUpdate=function(){var t,e,i=this.values.get(this.name);0!==this.currentBar&&(t=this.median.get(0)-this.median.get(1),e=this.volume.get(0)/this.volumeDivisor/(this.high.get(0)-this.low.get(0)),t=0===o.JsUtil.approxCompare(e,0)?0:t/e,this._emv.set(t),e=this._ema.values.get(0),i.set(e.get(1)))};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}o.EasyOfMovement=e,o.Indicator.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"VolumeOscillator"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fast",{get:function(){return this.getParameterValue(e.IndicatorParam.FAST)},set:function(t){this.setParameterValue(e.IndicatorParam.FAST,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"slow",{get:function(){return this.getParameterValue(e.IndicatorParam.SLOW)},set:function(t){this.setParameterValue(e.IndicatorParam.SLOW,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="VolumeOscillator",this.period=14,this._isOverlay=!1,this.fast=12,this.slow=26,this.addPlot(this.indicatorTheme.histogram.color,this.name,e.HistogramPlot.Style.COLUMN)},o.prototype.setConfigure=function(){this._smaFast=this.SMA(this.volume,this.fast),this._smaSlow=this.SMA(this.volume,this.slow)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._smaFast.values.get(0),i=this._smaSlow.values.get(0),e=e.get(0)-i.get(0);t.set(e)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.VolumeOscillator=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"WillamsR"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="WillamsR",this.period=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line1.strokeColor,-25),this.addLine(this.levelsTheme.line1.strokeColor,-75)},o.prototype.setConfigure=function(){this._max=this.MAX(this.high,this.period),this._min=this.MIN(this.low,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._max.values.get(0),i=this._min.values.get(0),e=-100*(e.get(0)-this.close.get(0))/(e.get(0)-i.get(0)==0?1:e.get(0)-i.get(0));t.set(e)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.WillamsR=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"KeltnerChannel"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"offsetMultiplier",{get:function(){return this.getParameterValue(e.IndicatorParam.OFFSET_MULTIPLIER)},set:function(t){this.setParameterValue(e.IndicatorParam.OFFSET_MULTIPLIER,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="KeltnerChannel",this.period=10,this.offsetMultiplier=1.5,this._isOverlay=!0,this.addPlot(this.indicatorTheme.line2.strokeColor,"Upper"),this.addPlot(this.indicatorTheme.line1.strokeColor,"Middle"),this.addPlot(this.indicatorTheme.line3.strokeColor,"Lower")},o.prototype.setConfigure=function(){this._diff=new e.TADataSeries("diffSeries",this),this._smaDiff=this.SMA(this._diff,this.period),this._smaTypical=this.SMA(this.typical,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get("Middle"),e=this.values.get("Upper"),i=this.values.get("Lower"),o=this.high.get(0)-this.low.get(0),o=(this._diff.set(o),this._smaTypical.values.get(0).get(0)),r=this._smaDiff.values.get(0).get(0)*this.offsetMultiplier,n=o+r,r=o-r;t.set(o),e.set(n),i.set(r)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.KeltnerChannel=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(n){t=n.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"UltimateOscillator"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fast",{get:function(){return this.getParameterValue(n.IndicatorParam.FAST)},set:function(t){this.setParameterValue(n.IndicatorParam.FAST,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"slow",{get:function(){return this.getParameterValue(n.IndicatorParam.SLOW)},set:function(t){this.setParameterValue(n.IndicatorParam.SLOW,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"intermediate",{get:function(){return this.getParameterValue(n.IndicatorParam.INTERMEDIATE)},set:function(t){this.setParameterValue(n.IndicatorParam.INTERMEDIATE,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="UltimateOscillator",this.fast=7,this.intermediate=14,this.slow=28,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line1.strokeColor,30),this.addLine(this.levelsTheme.line2.strokeColor,50),this.addLine(this.levelsTheme.line3.strokeColor,70)},i.prototype.setConfigure=function(){this._constant1=this.slow/this.fast,this._constant2=this.slow/this.intermediate,this._constant3=this._constant1+this._constant2+1,this._buyingPressure=new n.TADataSeries("buyingPressure",this),this._trueRange=new n.TADataSeries("trueRange",this),this._sumBpFast=this.SUM(this._buyingPressure,this.fast),this._sumBpIntermediate=this.SUM(this._buyingPressure,this.intermediate),this._sumBpSlow=this.SUM(this._buyingPressure,this.slow),this._sumTrFast=this.SUM(this._trueRange,this.fast),this._sumTrIntermediate=this.SUM(this._trueRange,this.intermediate),this._sumTrSlow=this.SUM(this._trueRange,this.slow)},i.prototype.onBarUpdate=function(){var t,e,i,o,r=this.values.get(this.name);0===this.currentBar?r.set(0):(o=this.high.get(0),t=this.low.get(0),i=this.close.get(0),e=this.close.get(1),i=i-Math.min(t,e),this._buyingPressure.set(i),i=Math.max(Math.max(o-t,o-e),e-t),this._trueRange.set(i),n.JsUtil.equals(this._sumTrFast.values.get(0).get(0),0)||n.JsUtil.equals(this._sumTrIntermediate.values.get(0).get(0),0)||n.JsUtil.equals(this._sumTrSlow.values.get(0).get(0),0)?r.set(r.get(1)):(o=(this._sumBpFast.values.get(0).get(0)/this._sumTrFast.values.get(0).get(0)*this._constant1+this._sumBpIntermediate.values.get(0).get(0)/this._sumTrIntermediate.values.get(0).get(0)*this._constant2+this._sumBpSlow.values.get(0).get(0)/this._sumTrSlow.values.get(0).get(0))/this._constant3*100,r.set(o)))};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}n.UltimateOscillator=e,n.Indicator.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){e.IchimokuColor={Tenka:"rgb(4, 150, 255)",Kijun:"rgb(153, 21, 21)",Chikou:"rgb(69, 153, 21)",SenkouA:"rgb(0, 128, 0)",SenkouB:"rgb(255, 0, 0)",BelowFill:"rgba(255, 0, 0, 0.5)",AboveFill:"rgba(46, 188, 3, 0.5)"},Object.freeze(e.IndicatorDataSeries);t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"Ichimoku"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"conversionLinePeriods",{get:function(){return this.getParameterValue(e.IndicatorParam.CONVERSION_PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.CONVERSION_PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"baseLinePeriods",{get:function(){return this.getParameterValue(e.IndicatorParam.BASE_PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.BASE_PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"loggingSpan2Periods",{get:function(){return this.getParameterValue(e.IndicatorParam.LOGIN_SPAN2_PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.LOGIN_SPAN2_PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"displacement",{get:function(){return this.getParameterValue(e.IndicatorParam.DISPLACEMENT)},set:function(t){this.setParameterValue(e.IndicatorParam.DISPLACEMENT,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="Ichimoku",this.conversionLinePeriods=9,this.baseLinePeriods=26,this.loggingSpan2Periods=52,this.displacement=26,this._isOverlay=!0,this.addPlot(e.IchimokuColor.Tenka,e.IchimokuDataSeriesNames.Tenka),this.addPlot(e.IchimokuColor.Kijun,e.IchimokuDataSeriesNames.Kijun),this.addPlot(e.IchimokuColor.Chikou,e.IchimokuDataSeriesNames.Chikou),this.addPlot(e.IchimokuColor.SenkouA,e.IchimokuDataSeriesNames.SenkouA),this.addPlot(e.IchimokuColor.SenkouB,e.IchimokuDataSeriesNames.SenkouB),this.addFillPlot(e.IchimokuDataSeriesNames.SenkouA,e.IchimokuDataSeriesNames.SenkouB,e.IchimokuColor.AboveFill,e.IchimokuColor.BelowFill)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){for(var t=this.values.get("Tenkan Sen"),e=this.values.get("Kijun Sen"),i=this.values.get("Chikou Span"),o=this.values.get("Senkou Span A"),r=this.values.get("Senkou Span B"),n=this.high,a=this.low,l=this.close,s=this.conversionLinePeriods,c=this.baseLinePeriods,h=this.loggingSpan2Periods,u=a.get(0),f=n.get(0),d={chikouSpan:l.get(0),tenkanSen:null,kijunSen:null,senkouSpanB:null,senkouSpanA:null},p=0;p<h&&0<=this.currentBar-p;p++){var y=p+1,u=Math.min(u,a.value(this.currentBar-p)),f=Math.max(f,n.value(this.currentBar-p));d.tenkanSen=y===s?(u+f)/2:d.tenkanSen,d.kijunSen=y===c?(u+f)/2:d.kijunSen,d.senkouSpanB=y===h?(u+f)/2:d.senkouSpanB}d.senkouSpanA=null!==d.tenkanSen&&null!==d.kijunSen?(d.tenkanSen+d.kijunSen)/2:null,t.set(d.tenkanSen),e.set(d.kijunSen),i.set(d.chikouSpan),r.set(d.senkouSpanB),o.set(d.senkouSpanA)};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.Ichimoku=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(i){t=i.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"Supertrend"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(i.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(i.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"multiplier",{get:function(){return this.getParameterValue(i.IndicatorParam.OFFSET_MULTIPLIER)},set:function(t){this.setParameterValue(i.IndicatorParam.OFFSET_MULTIPLIER,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="Supertrend",this.period=7,this.multiplier=3,this._isOverlay=!0;var t=this.indicatorTheme.line2.strokeColor,e=this.indicatorTheme.line3.strokeColor;this.addPlot(t,"Upper"),this.addPlot(e,"Lower"),this.addLabelPlot(t,"Buy Signal",i.LabelPlotStyle.Tooltip,i.LabelPlotPosition.Bottom),this.addLabelPlot(e,"Sell Signal",i.LabelPlotStyle.Tooltip,i.LabelPlotPosition.Top)},o.prototype.setConfigure=function(){this._calculateSupertrend()},o.prototype.onBarUpdate=function(){var t=this.values.get("Upper"),e=this.values.get("Lower"),i=this.values.get("Buy Signal"),o=this.values.get("Sell Signal"),r=this._supertrend[this.currentBar]||NaN,n=this._getIsSell()||this._getIsSell(-1);this._isBuySignal=this._isSell&&!n,t.set(r),e.set(n?r:NaN),i.set(this._isBuySignal?"Buy":null),o.set(this._isSellSignal?"Sell":null),this._isSellSignal=!this._isSell&&n,this._isSell=n},o.prototype._calculateSupertrend=function(){this._supertrend=[];for(var t=this._chart.primaryBarDataSeries(),e=t.high.values,i=t.low.values,o=t.close.values,r=e.length,n=this._supertrend,a=0,l=0,s=0,c=0;c<r;c++){var h=this.period,u=this.multiplier,h=Math.min(c+1,h),f=0===c,d=e[c],p=i[c],y=o[c],m=o[c-1],_=n[c-1]||0,C=f?d-p:Math.max(d,m)-Math.min(p,m),f=f?C:(a*(h-1)+C)/h,C=(d+p)/2,h=u*f,d=C+h,p=C-h,u=d<l||l<m?d:l,C=s<p||m<s?p:s,h=void 0,h=_===l?y<=u?u:C:C<=y?C:u,a=f,l=u,s=C;n.push(h)}},o.prototype._getIsSell=function(t){for(var e=this.currentBar-(t=void 0===t?0:t),i=this._supertrend,o=i[e],r=i[1+e],n=1;r<=o;){if(r<o)return!0;r=i[e+ ++n]}return!1};var t,e=o;function o(){return null!==t&&t.apply(this,arguments)||this}i.Supertrend=e,i.Indicator.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"RainbowOscillator"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"lookback",{get:function(){return this.getParameterValue(e.IndicatorParam.LOOKBACK)},set:function(t){this.setParameterValue(e.IndicatorParam.LOOKBACK,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="RainbowOscillator",this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.period=2,this.lookback=10,this._isOverlay=!1,this.addPlot(this.indicatorTheme.histogram.color,"Upper RO",e.HistogramPlot.Style.COLUMN),this.addPlot(this.indicatorTheme.histogram.color2,"Lower RO",e.HistogramPlot.Style.COLUMN),this.addPlot(this.indicatorTheme.line2.strokeColor,"Upper RB"),this.addPlot(this.indicatorTheme.line3.strokeColor,"Lower RB")},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){for(var t=this.values.get("Upper RO"),e=this.values.get("Lower RO"),i=this.values.get("Upper RB"),o=this.values.get("Lower RB"),r=this.input,n=this.period,a=this.lookback,n=Math.min(this.currentBar+1,n),a=Math.min(this.currentBar+1,a),l=[],s=-1/0,c=1/0,h=-1/0,u=1/0,f=0,d=0;d<a+n-1;d++)l.push(r.get(d));for(d=0;d<a;d++){var p=(l=this._maSeries(l,n))[0],y=r.get(d),s=Math.max(s,p),c=Math.min(c,p),h=Math.max(h,y),u=Math.min(u,y);f+=p}f/=a;var m=h-u,_=m?(r.get(0)-f)/m*100:0,m=m?(s-c)/m*100:0;t.set(0<_?_:NaN),e.set(_<0?_:NaN),i.set(m),o.set(-m)},o.prototype._maSeries=function(t,e){for(var i=[],o=0;o<t.length;o++){for(var r=0,n=0;n<e;n++)r+=t[Math.min(this.currentBar,o+n)];i.push(r/e)}return i};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.RainbowOscillator=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){e=t.AdvancedIndicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"Footprint"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="Footprint",this._isOverlay=!0,this.chart&&(this._addLineParameters(this._plots.length,"#3452F1",null,null),this._plots.push(new t.FootprintPlot))},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){this.values.get(this.name).set(this.close.get(0))};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.Footprint=i,t.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){e=t.AdvancedIndicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"VolumeProfile"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="VolumeProfile",this._isOverlay=!0,this.chart&&(this._addLineParameters(this._plots.length,"#0C62F7",null,null),this._plots.push(new t.VolumeProfilePlot))},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){this.values.get(this.name).set(this.close.get(0))};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.VolumeProfile=i,t.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(m){i=m.AdvancedIndicator,__extends(e,i),Object.defineProperty(e,"className",{get:function(){return"CustomVolumeProfile"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"settings",{get:function(){return this._volumeProfilePlot.settings},set:function(t){this._volumeProfilePlot.settings=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isActive",{get:function(){return this._resizableElementPlot.isActive},enumerable:!0,configurable:!0}),e.prototype.setDefaults=function(){var d,t,p=this,y=this.chart;this.name="CustomVolumeProfile",this._isOverlay=!0,this.zIndex=2e3,y&&(this._addLineParameters(this._plots.length,"#3452F1",null,null),d=new m.VolumeProfilePlot({plotStyle:m.VolumeProfilePlot.Style.CUSTOM}),t=new m.ResizableElementPlot({getRects:function(){for(var t=p.projection,e=y.instrument,i=y.dateScale,o=(p._loadStatePeriods(),d.getCustomPeriods()),r=i.columnWidth/2-.5,n=(t.yByValue(0)-t.yByValue(e.tickSize))/2-.5,a=[],l=0;l<o.length;l++){var s=o[l],c=s.id,h=s.startIndex,u=s.endIndex,f=s.high,s=s.low,h=t.xByRecord(h)-r,u=t.xByRecord(u)+r,f=t.yByValue(f)-n,s=t.yByValue(s)+n,c=new m.ResizableRect({id:c,left:h,top:f,width:u-h,height:s-f});a.push(c)}return a},handlers:{started:function(){p._isResizing=!0},continued:function(t){var e=p.projection,i=t.id,o=t.left,t=t.width,r=e.recordByX(o),e=e.recordByX(o+t);d.updateCustomPeriod({id:i,startIndex:r,endIndex:e})},finished:function(t){!0===p._isResizing&&(p._isResizing=!1,d.removePeriodsIfEmpty(),d.isEmpty&&p.chart.removeIndicators(p))}}}),this._resizableElementPlot=t,this._volumeProfilePlot=d,this._plots.push(this._volumeProfilePlot,this._resizableElementPlot))},e.prototype.start=function(){var t=this,e=this.chart,i=this._resizableElementPlot,o=this._volumeProfilePlot;e&&(e.on(m.PanelEvent.MOVE_CONTINUED,function(){t._isResizing=!0},this),e.on(m.MouseEvent.CLICK,function(){if(t._isResizing)return t._isResizing=!1,o.removePeriodsIfEmpty(),void(o.isEmpty&&t.chart.removeIndicators(t));t._selectedPeriodId?(delete t._selectedPeriodId,t._unsubscribe(),i.visible=!0):(i.visible=!1,t._selectedPeriodId=o.createCustomPeriod({startIndex:e.hoveredRecord}))},this),e.on(m.MouseEvent.MOVE,function(){t._selectedPeriodId&&o.updateCustomPeriod({id:t._selectedPeriodId,endIndex:e.hoveredRecord})},this))},e.prototype._unsubscribe=function(){var t=this.chart;t&&(t.off(m.MouseEvent.CLICK,this),t.off(m.MouseEvent.MOVE,this),t.off(m.PanelEvent.MOVE_CONTINUED,this))},e.prototype.setConfigure=function(){},e.prototype.update=function(){this._isResizing||i.prototype.update.call(this)},e.prototype.onBarUpdate=function(){this.values.get(this.name).set(this.close.get(0))},e.prototype.serialize=function(){var t=i.prototype.serialize.call(this),e=(t.templateId=this.templateId,this.projection);return t.periods=this._volumeProfilePlot.getCustomPeriods().map(function(t){return{startDate:e.dateByRecord(t.startIndex),endDate:e.dateByRecord(t.endIndex)}}),t},e.prototype.loadState=function(t){i.prototype.loadState.call(this,t),this._statePeriods=t.periods,this.templateId=t.templateId,this._loadStatePeriods()},e.prototype._loadStatePeriods=function(){if(this._statePeriods){var t=this.projection,e=this._volumeProfilePlot,i=this._statePeriods;if(Array.isArray(i)&&t&&e){for(var o=0,r=i;o<r.length;o++){var n,a=r[o];null!=a.startDate&&null!=a.endDate&&(n=e.createCustomPeriod({startIndex:t.recordByDate(new Date(a.startDate))}),e.updateCustomPeriod({endIndex:t.recordByDate(new Date(a.endDate)),id:n}))}this.chart.setNeedsUpdate(),this._statePeriods=null}}},e.prototype.destroy=function(){this._unsubscribe(),this._volumeProfilePlot=null,this._resizableElementPlot=null,i.prototype.destroy.call(this)};var i,t=e;function e(){var t=null!==i&&i.apply(this,arguments)||this;return t._isResizing=!1,t}m.CustomVolumeProfile=t,m.Indicator.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.AdvancedIndicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"CompositeProfile"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){var t;this.name="CompositeProfile",this._isOverlay=!0,this.chart&&(this._addLineParameters(this._plots.length,"#0C62F7",null,null),t=new e.VolumeProfilePlot({plotStyle:e.VolumeProfilePlot.Style.COMPOSITE}),this._plots.push(t))},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){this.values.get(this.name).set(this.close.get(0))};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.CompositeProfile=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){t=e.AdvancedIndicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"PriceStats"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){var t;this.name="PriceStats",this._isOverlay=!0,this.chart&&(this._addLineParameters(this._plots.length,"#0C62F7",null,null),(t=new e.VolumeProfilePlot({plotStyle:e.VolumeProfilePlot.Style.PRICE_STATS})).settings.general.customTickSize.enabled=!0,t.settings.general.type="volume",t.settings.general.customTickSize.value=1,t.settings.session={id:628,name:"US Extended Trading Hours",exchange:"CME",timezoneId:"America/New_York",isDefault:!0,workingTimes:[{id:0,startDay:4,startTime:648e5,endDay:5,endTime:612e5,tradingDay:5,sessionId:628},{id:0,startDay:3,startTime:648e5,endDay:4,endTime:612e5,tradingDay:4,sessionId:628},{id:0,startDay:2,startTime:648e5,endDay:3,endTime:612e5,tradingDay:3,sessionId:628},{id:0,startDay:1,startTime:648e5,endDay:2,endTime:612e5,tradingDay:2,sessionId:628},{id:0,startDay:0,startTime:648e5,endDay:1,endTime:612e5,tradingDay:1,sessionId:628}]},t.settings.lines.current.poc.strokeTheme.strokeColor="#FE00E5",t.settings.lines.current.va.strokeTheme.strokeColor="#A1A2A5",t.settings.lines.prev.poc.strokeTheme.strokeColor="#A1A2A5",t.settings.lines.prev.va.strokeTheme.strokeColor="#A1A2A5",t.settings.lines.dev.poc.strokeTheme.strokeColor="#A1A2A5",t.settings.lines.dev.va.strokeTheme.strokeColor="#A1A2A5",this._plots.push(t))},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){this.values.get(this.name).set(this.close.get(0))};var t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}e.PriceStats=i,e.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){e=t.AdvancedIndicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"SessionStats"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="SessionStats",this._isOverlay=!0,this.chart&&(this._addLineParameters(this._plots.length,"#3452F1",null,null),this._plots.push(new t.SessionStatsPlot))},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){this.values.get(this.name).set(this.close.get(0))};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.SessionStats=i,t.Indicator.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__assign=this&&this.__assign||Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},__extends=(!function(n){(t=a=n.VolumeBreakdownPlot||(n.VolumeBreakdownPlot={})).Up="Up",t.Down="Down",(t=e=n.VolumeBreakdownDeltaType||(n.VolumeBreakdownDeltaType={})).BidAsk="bidAsk",t.UptickDowntick="uptickDowntick",(t=i=n.VolumeBreakdownType||(n.VolumeBreakdownType={})).Volume="volume",t.Ticks="ticks",t.Price="price",(t=l=n.VolumeBreakdownMode||(n.VolumeBreakdownMode={})).Delta="delta",t.DeltaBars="deltaBars",t.DeltaMomentum="deltaMomentum",t.BuyVolume="buyVolume",t.SellVolume="sellVolume",(o=n.VolumeBreakdownAccumulate||(n.VolumeBreakdownAccumulate={})).All="all",s=n.AdvancedIndicator,__extends(r,s),Object.defineProperty(r,"className",{get:function(){return"VolumeBreakdown"},enumerable:!0,configurable:!0}),r.prototype.serialize=function(){var t=s.prototype.serialize.call(this);return t.settings=this._settings,t},r.prototype.loadState=function(t){s.prototype.loadState.call(this,t),t&&t.settings&&(this.settings=t.settings)},r.prototype.setDefaults=function(){this.name="VolumeBreakdown",this._isOverlay=!1,this._removePlots=this._addPlots()},r.prototype.setConfigure=function(){var t=this._settings.general.avaragePeriod,t=t.enabled?t.value:1;this._delta=new n.TADataSeries("delta",this),this._vb=new n.TADataSeries("vb",this),this._sma=this.SMA(this._vb,t)},r.prototype.onBarUpdate=function(){var t,e,i,o,r,n;this._chart&&(n=(t=this._settings).general.mode,t=t.sizeFilter.sizeFilter,e=this.values.get(a.Up),i=this.values.get(a.Down),this._deltaModes.includes(n)&&this._delta.set(this._getDelta()),this._vb.set(this._getVb()),r=(o=this._sma.values.get(0)).get(0),n===l.DeltaBars&&(n=o.get(1),this.open.set(n),this.high.set(Math.max(n,r)),this.low.set(Math.min(n,r)),this.close.set(r)),0===r||t.enabled&&Math.abs(r)>t.value?(e.set(null),i.set(null)):0<r?(e.set(r),i.set(null)):(e.set(null),i.set(r)))},r.prototype.draw=function(){this._drawZeroLine()},r.prototype._handleSettings=function(t){var e=this._settings.general.avaragePeriod,i=t.general.avaragePeriod,t=(this._settings=t,i.enabled?i.value:1);return t!==(e.enabled?e.value:1)&&(this._sma=this.SMA(this._vb,t)),this._settingsHandled&&(this._removePlots=this._addPlots(),this.update(!0)),!0},r.prototype._addPlots=function(){var t=this._settings.general,e=t.mode,i=t.upFillColor,o=t.downFillColor;switch(this._removePlots.forEach(function(t){return t()}),e){case l.Delta:return[this.addPlot(i,a.Up,n.HistogramPlot.Style.COLUMN),this.addPlot(o,a.Down,n.HistogramPlot.Style.COLUMN)];case l.DeltaBars:return[this.addPlot(i,a.Up,n.HistogramPlot.Style.COLUMN),this.addPlot(o,a.Down,n.HistogramPlot.Style.COLUMN),this.addBarPlot()];case l.DeltaMomentum:return[this.addPlot(i,a.Up,n.HistogramPlot.Style.COLUMN),this.addPlot(o,a.Down,n.HistogramPlot.Style.COLUMN)];case l.BuyVolume:case l.SellVolume:return[this.addPlot(i,a.Up,n.HistogramPlot.Style.COLUMN)]}},r.prototype._getTheme=function(){return this.chart.theme.plot.bar.candle},r.prototype._getColor=function(){return this._settings.general.upFillColor},r.prototype._getVisible=function(t){return this._settings.general.mode===l.DeltaBars?t instanceof n.BarPlot:s.prototype._getVisible.call(this,t)},r.prototype._getHistogramTheme=function(t){var e,i=this._settings.general,o=i.upStrokeColor,r=i.downStrokeColor,i=s.prototype._getHistogramTheme.call(this,t),t=this.values.dataSeriesArray[t];if(!t)return i;switch(t.name){case a.Up:e=o;break;case a.Down:e=r}return e?__assign({},i,{line:{strokeEnabled:!0,width:1,strokeColor:e,lineStyle:n.LineStyle.SOLID}}):i},r.prototype._drawZeroLine=function(){var t,e,i,o,r=this._getVisiblePeriod(),n=r.startIndex,r=r.endIndex;r<=n||(t=this._settings.general.zeroLine).enabled&&(e=this.renderer,i=this.projection,o=this.chart.dateScale.columnWidth,(n=i.xByRecord(n))&&(n-=o/2),(r=i.xByRecord(r))&&(r+=o/2),o=i.yByValue(0),e.beginPath(),e.line(n,o,r,o),e.stroke(t.strokeTheme),e.closePath())},r.prototype._getVb=function(){switch(this._settings.general.mode){case l.Delta:return this._delta.get(0);case l.DeltaBars:return this._getDelta();case l.DeltaMomentum:return this._getDeltaMomentum();case l.BuyVolume:return this._getVolume(function(t){return t.askInfo});case l.SellVolume:return this._getVolume(function(t){return t.bidInfo})}},r.prototype._getDelta=function(){switch(this._settings.general.type){case i.Volume:return this._getValue(function(t){return t.askInfo.volume-t.bidInfo.volume});case i.Ticks:return this._getValue(function(t){return t.askInfo.tradesCount-t.bidInfo.tradesCount});case i.Price:return this._getValue(function(t){return t.askInfo.price-t.bidInfo.price})}},r.prototype._getDeltaMomentum=function(){var t=this._delta.get(0);if(!t)return t;for(var e=0<t,i=0,o=this._delta.get(++i);e?0<o:o<0;)t+=o,o=this._delta.get(++i);return t},r.prototype._getVolume=function(e){switch(this._settings.general.type){case i.Volume:return this._getValue(function(t){return e(t).volume});case i.Ticks:return this._getValue(function(t){return e(t).tradesCount});case i.Price:return this._getValue(function(t){return e(t).price})}},r.prototype._getValue=function(t){var e=this._settings.general.accumulate;if(!e.enabled)return this._getBarValue(t);var i=this.chart.dataManager.getDataSeries(n.DataSeriesSuffix.DATE).values,i=e.value!==o.All?n.Session.getPeriodStartIndex(i,e.value,this.currentBar-1):0;return this._getAccumulatedValue(i,t)},r.prototype._getAccumulatedValue=function(t,e){for(var i=this._getBarValue(e),o=this.currentBar-1,r=0;--o>=t;)i+=this._getBarValue(e,++r);return i};var a,e,i,l,o,s,t=r;function r(){var t=null!==s&&s.apply(this,arguments)||this;return t._settings={general:{deltaType:e.BidAsk,type:i.Volume,mode:l.Delta,accumulate:{enabled:!1,value:n.SessionPeriodUnit.Day},avaragePeriod:{enabled:!1,value:3},zeroLine:{enabled:!0,strokeTheme:{width:1,strokeColor:"#FFFF00",lineStyle:n.LineStyle.SOLID}},upFillColor:"#0C62F7",upStrokeColor:"#000000",downFillColor:"#C93B3B",downStrokeColor:"#000000"},sizeFilter:{sizeFilter:{enabled:!1,value:10}}},t._deltaModes=[l.Delta,l.DeltaBars,l.DeltaMomentum],t._removePlots=[],t}n.VolumeBreakdown=t,n.Indicator.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(l){(i=e=l.ZigZagChangeUnit||(l.ZigZagChangeUnit={})).Points="points",i.Ticks="ticks",(i=a=l.ZigZagExtreme||(l.ZigZagExtreme={})).High="high",i.Low="low",t=l.AdvancedIndicator,__extends(o,t),o.prototype.setConfigure=function(){delete this._extreme,delete this._extremeValue,delete this._prevExtreme,delete this._prevExtremeValue,delete this._lastExtreme,delete this._lastExtremeValue,delete this._isUp,delete this._isDown},o.prototype.removePrevExteme=function(t){for(var e=this.values.get(l.LabelPlotPosition.Top),i=this.values.get(l.LabelPlotPosition.Bottom),o=this.values.get("ZigZag"),r=0,n=o.get(r);n!==t;)if(n=o.get(++r),r>this.currentBar)return;var a=this.currentBar-r;this._removeFromValues(a,e,i,o)},o.prototype._removeFromValues=function(t,e,i,o){e.value(t,null),i.value(t,null),o.value(t,null)},o.prototype._setExtreme=function(){var t,e=this._getMinChange(),i=this.high.get(0),o=this.low.get(0);{if(1!==this.currentBar)return this._lastExtreme===a.High&&i>this._lastExtremeValue?(this.removePrevExteme(a.High),t=this._prevExtremeValue,this._setExtremeData(a.High),void(this._prevExtremeValue=t)):this._lastExtreme===a.Low&&o<this._lastExtremeValue?(this.removePrevExteme(a.Low),t=this._prevExtremeValue,this._setExtremeData(a.Low),void(this._prevExtremeValue=t)):void(this._lastExtreme===a.Low?i-this._lastExtremeValue>=e&&this._getIsHigh()?this._setExtremeData(a.High):this._setExtremeData(null):this._lastExtremeValue-o>=e&&this._getIsLow()?this._setExtremeData(a.Low):this._setExtremeData(null));for(var r=0;this.currentBar- --r<this.values.recordCount&&!(e<=this.high.get(r)-o););for(var n=0;this.currentBar- --n<this.values.recordCount&&!(e<=i-this.low.get(n)););this._setExtremeData(r<n?a.High:a.Low)}},o.prototype._setExtremeData=function(t){t?(this._extreme=t,this._extremeValue=(t===a.High?this.high:this.low).get(0),this._prevExtreme=this._lastExtreme,this._prevExtremeValue=this._lastExtremeValue,this._lastExtreme=this._extreme,this._lastExtremeValue=this._extremeValue,this._isUp=t===a.High,this._isDown=t===a.Low):this._extreme&&(this._isUp=this._extreme===a.Low,this._isDown=this._extreme===a.High,this._extreme=null,this._extremeValue=null)},o.prototype._getChange=function(){var t=this._extreme?this._prevExtremeValue:this._lastExtremeValue;return null==t?0:this._isUp?this.high.get(0)-t:t-this.low.get(0)},o.prototype._getConvertedChange=function(){var t=this._getChange();return this._changeUnit===e.Ticks&&(t/=this.chart.instrument.tickSize),t},o.prototype._getMinChange=function(){return this._minChange*this.chart.instrument.tickSize},o.prototype._getIsHigh=function(){for(var t=this._getMinChange(),e=0,i=this.high.get(e);this.currentBar- --e<this.values.recordCount;)if(this.low.get(e)+t<=i)return!0;return!1},o.prototype._getIsLow=function(){for(var t=this._getMinChange(),e=0,i=this.low.get(e);this.currentBar- --e<this.values.recordCount;)if(i<=this.high.get(e)-t)return!0;return!1};var e,a,t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}l.ZigZagBase=i}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__assign=this&&this.__assign||Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},__extends=(!function(h){i=h.ZigZagBase,__extends(e,i),Object.defineProperty(e,"className",{get:function(){return"ZigZag"},enumerable:!0,configurable:!0}),e.prototype.setDefaults=function(){this.name="ZigZag",this._isOverlay=!0,this._removePlots=this._addPlots()},e.prototype.onBarUpdate=function(){var t,e,i,o,r,n;this.currentBar&&this.chart&&(this._setExtreme(),t=(e=this._settings.parameters).showRealtimeSwing,e=e.minTicksRev,i=this.chart.instrument.tickSize,o=this.values.get(h.LabelPlotPosition.Top),r=this.values.get(h.LabelPlotPosition.Bottom),n=this.values.get("ZigZag"),this.currentBar===this.values.recordCount-1&&t&&this._getChange()>=e*i&&this._setExtremeData(n.get(1)===h.ZigZagExtreme.High?h.ZigZagExtreme.Low:h.ZigZagExtreme.High),o.set(this._extreme===h.ZigZagExtreme.High?this._getData():null),r.set(this._extreme===h.ZigZagExtreme.Low?this._getData():null),n.set(this._extreme))},e.prototype._handleSettings=function(t){var e=t.parameters,i=e.upStrokeColor,o=e.downStrokeColor,r=e.minChange,n=e.textColor,a=e.dataBoxBackground,e=e.dataBoxBorder,l=t.dataBox.fields.priceChange;this._settings=t,this._minChange=r,this._changeUnit=l.unit,this._labelPlotTheme={text:{fontFamily:"Open Sans",fontSize:12,fillColor:n},fill:{fillEnabled:a.enabled,fillColor:a.value},stroke:{strokeEnabled:e.enabled,width:1,strokeColor:e.value,lineStyle:h.LineStyle.SOLID}},this._zigZagPlotTheme={up:{width:1,strokeColor:i,lineStyle:h.LineStyle.SOLID},down:{width:1,strokeColor:o,lineStyle:h.LineStyle.SOLID}},this._settingsHandled&&(this._removePlots=this._addPlots(),this.update(!0))},e.prototype._addPlots=function(){var t=this._settings.parameters,e=t.showZigZagLine,i=t.dataBoxOffset,t=t.barWidthTextThreshold,i=(this._removePlots.forEach(function(t){return t()}),{offset:i,barWidthTextThreshold:t,forBars:!0}),t=[this.addLabelPlot(h.LabelPlotPosition.Top,__assign({},i,{position:h.LabelPlotPosition.Top})),this.addLabelPlot(h.LabelPlotPosition.Bottom,__assign({},i,{position:h.LabelPlotPosition.Bottom}))];return e&&t.push(this.addZigZagPlot()),t},e.prototype.addZigZagPlot=function(){var t,e,i=this;if(this.chart)return t=new h.TADataSeries("ZigZag",this),e=new h.ZigZagPlot({dataSeries:t}),this._plots.push(e),this.values.add(t),function(){i._removePlot(e),i.values.remove("ZigZag")}},e.prototype._getTheme=function(t,e){return t instanceof h.LabelPlot?this._labelPlotTheme:t instanceof h.ZigZagPlot?this._zigZagPlotTheme:i.prototype._getTheme.call(this,t,e)},e.prototype._getColor=function(){},e.prototype._getData=function(){var t,e=this._settings.dataBox,i=e.fields,o=i.delta,r=i.volume,n=i.price,i=i.priceChange,e=e.inverseSortingForDownSwing,a=this.high.get(0),l=this.low.get(0),s=[],c=(this.currentBar===this.values.recordCount-1||(o.enabled&&(c=void 0,0<(t=this._getBarValue(function(t){return t.askInfo.volume-t.bidInfo.volume}))?c=o.positiveTextColor:t<0&&(c=o.negativeTextColor),s.push([o.order,{value:""+t,textColor:c}])),r.enabled&&(t=this.volume.get(0),s.push([r.order,""+t])),n.enabled&&(t=this._extreme===h.ZigZagExtreme.High?a:l,s.push([n.order,t]))),i.enabled&&(o=this._getConvertedChange(),t=i.unit===h.ZigZagChangeUnit.Points?o:""+o,s.push([i.order,t])),this._extreme===h.ZigZagExtreme.Low&&e?function(t,e){return e[0]-t[0]}:function(t,e){return t[0]-e[0]});return s.sort(c).map(function(t){return t[1]})};var i,t=e;function e(){var t=null!==i&&i.apply(this,arguments)||this;return t._settings={parameters:{showZigZagLine:!0,upStrokeColor:"#0C62F7",downStrokeColor:"#C93B3B",minChange:12,dataBoxOffset:5,barWidthTextThreshold:4,textColor:"#ffffff",dataBoxBackground:{enabled:!0,value:"#717171"},dataBoxBorder:{enabled:!0,value:"#717171"},showRealtimeSwing:!0,minTicksRev:10},dataBox:{fields:{delta:{enabled:!0,order:1,positiveTextColor:"#0C62F7",negativeTextColor:"#C93B3B"},volume:{enabled:!0,order:2},price:{enabled:!0,order:3},priceChange:{enabled:!0,order:4,unit:h.ZigZagChangeUnit.Points}},inverseSortingForDownSwing:!0}},t._removePlots=[],t}h.ZigZag=t,h.Indicator.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__assign=this&&this.__assign||Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},__extends=(!function(a){(e=l=a.ZigZagOscillatorPlot||(a.ZigZagOscillatorPlot={})).Up="Up",e.Down="Down",i=a.IntlNumberFormat,__extends(t,i),Object.defineProperty(t.prototype,"mode",{set:function(t){this._mode=t},enumerable:!0,configurable:!0}),t.prototype.format=function(t){var e;return this._mode===a.ZigZagChangeUnit.Ticks?(t/(null!=(e=this.chart.instrument)&&null!=e.tickSize?e.tickSize:.25)).toFixed(0):i.prototype.format.call(this,t)};var l,i,o=t;function t(t){var e=i.call(this)||this;return e.chart=t,e}a.ZigZagOscillatorFormatter=o;r=a.ZigZagBase,__extends(n,r),Object.defineProperty(n,"className",{get:function(){return"ZigZagOscillator"},enumerable:!0,configurable:!0}),n.prototype._initPanel=function(){var t=new o(this.chart);t.mode=this._settings.parameters.showChange.unit,this._panel.valueScale.formatter=t,this._panel.valueScale.calibrator.formater=t},n.prototype.loadState=function(t){r.prototype.loadState.call(this,t),t&&t.settings&&(this._settings=t.settings)},n.prototype.serialize=function(){var t=r.prototype.serialize.call(this);return t.settings=this._settings,t},n.prototype.setDefaults=function(){this.name="ZigZagOscillator",this._isOverlay=!1,this._removePlots=this._addPlots()},n.prototype.onBarUpdate=function(){var t,e,i,o,r,n;this.currentBar&&this.chart&&(this._setExtreme(),i=this._settings.parameters.showChange,n=this._isUp?this._getChange():-this._getChange(),t=this.values.get(l.Up),e=this.values.get(l.Down),o=this.values.get("ZigZag"),t.set(this._isUp?n:null),e.set(this._isDown?n:null),o.set(this._extreme),i.enabled&&(t=this.values.get(a.LabelPlotPosition.Top),e=this.values.get(a.LabelPlotPosition.Bottom),o=this.currentBar===this.values.recordCount-1,i=this._extreme===a.ZigZagExtreme.High||o&&this._isUp,o=this._extreme===a.ZigZagExtreme.Low||o&&this._isDown,r=this._getConvertedChange(),n={value:n,label:this._changeUnit===a.ZigZagChangeUnit.Ticks?""+r:r},t.set(i?n:null),e.set(o?n:null)))},n.prototype._removeFromValues=function(t,e,i,o){},n.prototype.draw=function(){this._drawBands()},n.prototype._handleSettings=function(t){var e=t.parameters,i=e.minChange,e=e.showChange;return this._settings=t,this._minChange=i,this._changeUnit=e.unit,this._panel&&(t=this._panel.valueScale.formatter)instanceof o&&(t.mode=this._changeUnit),this._settingsHandled&&(this._removePlots=this._addPlots(),this.update(!0)),!0},n.prototype._addPlots=function(){var t=this._settings.parameters,e=t.barWidthTextThreshold,i=t.upFillColor,o=t.downFillColor,r=t.fillBarGaps,t=t.showChange,r=(this._removePlots.forEach(function(t){return t()}),r?1:.5),i=[this.addPlot(i,l.Up,a.HistogramPlot.Style.COLUMN,r),this.addPlot(o,l.Down,a.HistogramPlot.Style.COLUMN,r)];return t.enabled&&i.push(this.addLabelPlot(a.LabelPlotPosition.Top,__assign({},o={offset:4,barWidthTextThreshold:e},{position:a.LabelPlotPosition.Top})),this.addLabelPlot(a.LabelPlotPosition.Bottom,__assign({},o,{position:a.LabelPlotPosition.Bottom}))),i},n.prototype._getTheme=function(t,e){return t instanceof a.LabelPlot?this._labelPlotTheme:r.prototype._getTheme.call(this,t,e)},n.prototype._drawBands=function(){var t,e,i,o,r=this._getVisiblePeriod(),n=r.startIndex,r=r.endIndex;r<=n||(t=(e=this._settings).upperBand,e=e.lowerBand,o=this.projection,i=this.chart.dateScale.columnWidth,(n=o.xByRecord(n))&&(n-=i/2),(o=o.xByRecord(r))&&(o+=i/2),this._drawBand(t,n,o),this._drawBand(e,n,o))},n.prototype._drawBand=function(t,e,i){var o=t.strokeColor,r=t.top,t=t.bottom,n=this.renderer,a=this.projection,r=a.yByValue(r),a=a.yByValue(t);a<=r||(t=(r+a)/2,a=a-r,n.beginPath(),n.line(e,t,i,t),n.stroke({width:a,strokeColor:o}),n.closePath())};var r,e=n;function n(){var t=null!==r&&r.apply(this,arguments)||this;return t._settings={parameters:{minChange:12,barWidthTextThreshold:4,upFillColor:"#0C62F7",upStrokeColor:"#0C62F7",downFillColor:"#C93B3B",downStrokeColor:"#C93B3B",fillBarGaps:!0,showChange:{enabled:!0,unit:a.ZigZagChangeUnit.Points}},upperBand:{strokeColor:"#0C62F7",top:10,bottom:8},lowerBand:{strokeColor:"#C93B3B",top:-8,bottom:-10}},t._labelPlotTheme={text:{fontFamily:"Open Sans",fontSize:12,fillColor:"#ffffff"},fill:{fillEnabled:!1},stroke:{strokeEnabled:!1}},t._removePlots=[],t}a.ZigZagOscillator=e,a.Indicator.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(i){"use strict";i.CrossHairType={NONE:"none",MARKERS:"markers",CROSS:"cross",CROSS_BARS:"crossBars",DOT:"dot"},Object.freeze(i.CrossHairType);var o,e=".scxCrossHair",t=(o=i.ChartComponent,__extends(r,o),Object.defineProperty(r.prototype,"crossHairType",{get:function(){return this._options.crossHairType},set:function(t){var e=this._options.crossHairType;e!==t&&(this._options.crossHairType=t,this._view.updateVisibility(),this.chart.fireValueChanged(i.ChartEvent.CROSS_HAIR_CHANGED,t,e))},enumerable:!0,configurable:!0}),r.prototype._subscribe=function(){var t=this;o.prototype._subscribe&&o.prototype._subscribe.call(this),this.chart.on(i.ChartEvent.THEME_CHANGED+e,function(){t.applyTheme()},this).on(i.ChartEvent.LOCALE_CHANGED+e,function(){t.update()},this).on(i.ChartEvent.TIME_INTERVAL_CHANGED+e,function(){t.update()},this)},r.prototype._unsubscribe=function(){this.chart.off(e,this),o.prototype._unsubscribe&&o.prototype._unsubscribe.call(this)},r.prototype.layout=function(){this._view.layout()},r.prototype.applyTheme=function(){this._view.applyTheme()},r.prototype.update=function(){this._view.updateMarkers(),this._view.updatePosition(!0)},r.prototype.show=function(){this.visible=!0,this._view.updatePosition(!0),this._view.updateVisibility(!0)},r.prototype.hide=function(){this.visible=!1,this._view.updateVisibility(!1)},r.prototype.saveState=function(){return i.JsUtil.clone(this._options)},r.prototype.loadState=function(t){this._options={},this.crossHairType=t&&t.crossHairType||i.CrossHairType.NONE},r.prototype.setPosition=function(t,e){this._view.setPosition(t,e)},r.prototype.handleMouseHoverGesture=function(t,e){switch(t.state){case i.GestureState.STARTED:this._view.updateVisibility(!0);break;case i.GestureState.FINISHED:this._view.updateVisibility(!1);break;case i.GestureState.CONTINUED:this.crossHairType!==i.CrossHairType.NONE&&this.setPosition(e.pointerPosition)}},r.prototype.destroy=function(){this._view.destroy(),o.prototype.destroy.call(this)},r);function r(t){var e=o.call(this,t)||this;return e._view=new i.CrossHairView(e),e.visible=!0,e.loadState(t),e.chart&&e._subscribe(),e}i.CrossHair=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(g){"use strict";var a,c={HOR_LINE:"scxCrossHairHorLine",VER_LINE:"scxCrossHairVerLine",DOT_CURSOR:"scxDotCursor",NOTE:"scxCrossHairMarker",DATE_MARKER:"scxCrossHairDateMarker",VALUE_MARKER:"scxCrossHairValueMarker",CROSS_HAIR:"scxCrossHair",CROSS_HAIR_CONTAINER:"scxCrossHairContainer",CROSS_HAIR_TRADING_BUTTON:"scxCrossHairTradingButton"},t=(Object.freeze(c),a=g.HtmlComponent,__extends(h,a),Object.defineProperty(h.prototype,"chart",{get:function(){return this._crossHair.chart},enumerable:!0,configurable:!0}),h.prototype._createContainer=function(){return this.chart.rootDiv.scxAppend("div",c.CROSS_HAIR_CONTAINER)},h._applyMarkerTheme=function(t,e){t.scxTextStyle(e.text).scxFill(e.fill)},h._updateValueMarkerMetrics=function(t){var e=t.$control;e.text()||e.text("1"),t.halfHeight=e.height()/2},h._updateDateMarkerMetrics=function(t,e){var i=t.$control,e=(i.text(e).width("auto"),Math.round(1.2*i.width()));t.halfWidth=Math.round(e/2),i.width(e)},h.prototype._createValueMarker=function(){return{visible:!0,halfHeight:0,$control:this.container.scxAppend("span",[c.NOTE,c.VALUE_MARKER])}},h.prototype._createDateMarker=function(){return{visible:!0,halfWidth:0,$control:this.container.scxAppend("span",[c.NOTE,c.DATE_MARKER])}},h.prototype._createTradingButton=function(){return{visible:!0,halfHeight:0,$control:this.container.scxAppend("span",[c.NOTE,c.CROSS_HAIR_TRADING_BUTTON])}},h.prototype._createControls=function(){var t=this.container;this._controls={lines:{visible:!0,$horLine:t.scxAppend("div",c.HOR_LINE),$verLine:t.scxAppend("div",c.VER_LINE)},leftMarkers:[],rightMarkers:[],tradingButton:[],topMarker:this._createDateMarker(),bottomMarker:this._createDateMarker()},this.applyTheme(),this.updateVisibility(!1)},h.prototype._syncValueMarkers=function(){var t=this._controls.leftMarkers,e=this._controls.rightMarkers,i=this._controls.tradingButton,o=this.chart.valueScales,r=t.length-o.length;if(0<r)t.splice(-r,r),e.splice(-r,r),i.splice(-r,r);else if(r<0){for(var n=0;n<-r;n++)t.push(this._createValueMarker()),e.push(this._createValueMarker()),i.push(this._createTradingButton());this.applyTheme(),this.updateVisibility(!1),this._tradingButtonHandler()}},h.prototype.layout=function(){a.prototype.layout.call(this),this._controls||this._createControls(),this._syncValueMarkers();for(var t=this.chart,e=this._controls,i=t.chartPanelsContainer.panelsContentFrame,o=(e.lines.$horLine.css("left",i.left).width(i.width),e.lines.$verLine.css("top",i.top).height(i.height),t.valueScales),r=0;r<o.length;r++){var n=o[r].leftPanel.frame,n=(n&&(e.leftMarkers[r].$control.css("left",n.left+1).outerWidth(n.width-2),e.tradingButton[r].$control.css("left",n.left-15).text("+").outerWidth(15)),o[r].rightPanel.frame);n&&(e.rightMarkers[r].$control.css("left",n.left+1).outerWidth(n.width-2),e.tradingButton[r].$control.css("left",n.left-15).text("+").outerWidth(15))}i=t.dateScale,t=i.topPanel.frame,t&&e.topMarker.$control.css("top",t.top+1).outerHeight(t.height-1).css("line-height",t.height-2+"px"),t=i.bottomPanel.frame;t&&e.bottomMarker.$control.css("top",t.top+1).outerHeight(t.height-1).css("line-height",t.height-1+"px")},h.prototype.applyTheme=function(){var t=this.chart.theme.crossHair,e=this._controls;e.lines.$horLine.scxBorder("border-top",t.line),e.lines.$verLine.scxBorder("border-left",t.line);for(var i=0,o=e.leftMarkers;i<o.length;i++){var r=o[i];h._applyMarkerTheme(r.$control,t)}for(var n=0,a=e.rightMarkers;n<a.length;n++){r=a[n];h._applyMarkerTheme(r.$control,t)}for(var l=0,s=e.tradingButton;l<s.length;l++){r=s[l];h._applyMarkerTheme(r.$control,t)}h._applyMarkerTheme(e.topMarker.$control,t),h._applyMarkerTheme(e.bottomMarker.$control,t),this.updateMarkers()},h.prototype.update=function(){},h.prototype.updateVisibility=function(t){var e=this._controls;if(e){for(var i=this._crossHair.crossHairType,o=this.chart.rootDiv,r=(!(t=this._crossHair.visible&&t&&i!==g.CrossHairType.NONE)||i!==g.CrossHairType.CROSS&&i!==g.CrossHairType.CROSS_BARS?o.removeClass(c.CROSS_HAIR):o.addClass(c.CROSS_HAIR),t&&i===g.CrossHairType.DOT?o.addClass(c.DOT_CURSOR):o.removeClass(c.DOT_CURSOR),t&&i!==g.CrossHairType.NONE),n=this.chart.valueScales,a=0;a<n.length&&!(a>=e.leftMarkers.length);a++){var l=r&&n[a].leftPanelVisible,s=r&&n[a].rightPanelVisible;e.leftMarkers[a].visible=l,e.tradingButton[a].visible=l,e.rightMarkers[a].visible=s,e.tradingButton[a].visible=s,g.HtmlUtil.setVisibility(e.leftMarkers[a].$control,l),g.HtmlUtil.setVisibility(e.tradingButton[a].$control,l),g.HtmlUtil.setVisibility(e.rightMarkers[a].$control,s),g.HtmlUtil.setVisibility(e.tradingButton[a].$control,s)}o=i===g.CrossHairType.CROSS||i===g.CrossHairType.CROSS_BARS,i=e.lines.visible=t&&o,t=(g.HtmlUtil.setVisibility(e.lines.$horLine,i),g.HtmlUtil.setVisibility(e.lines.$verLine,i),this.chart.dateScale),o=e.topMarker.visible=r&&t.topPanelVisible,i=e.bottomMarker.visible=r&&t.bottomPanelVisible;g.HtmlUtil.setVisibility(e.topMarker.$control,o),g.HtmlUtil.setVisibility(e.bottomMarker.$control,i)}},h.prototype.setPosition=function(t,e){this._position=t,e?this._positionAnimation.start():this.updatePosition()},h.prototype.updatePosition=function(t){if(this._positionAnimation){this._positionAnimation.stop();var e=this._position;if(e){var i=this.chart,o=i.findPanelAt(e.y);if(o){var r=i.valueScale.leftPanel,n=i.valueScale.rightPanel;if(e.x>o.frame.width-n.getWidth()||r.visible&&e.x<r.getWidth())this.updateVisibility(!1);else{var a,l,s,c=this._controls,n=this._prevPosition,r=this._crossHair.crossHairType;if(n.x===e.x&&!0!==t||(n.x=e.x,l=(s=i.dateScale).projection,r===g.CrossHairType.CROSS_BARS&&(e.x=l.xByRecord(l.recordByX(e.x,!0))),c.lines.visible&&c.lines.$verLine.css("left",e.x),r=c.topMarker,a=c.bottomMarker,(r.visible||a.visible)&&(l=l.dateByColumn(l.columnByX(e.x)),s=s.formatDate(l),this._updateDateMarker(r,s),this._updateDateMarker(a,s))),n.y!==e.y||!0===t){n.y=e.y,c.lines.visible&&c.lines.$horLine.css("top",e.y);for(var h=i.valueScales,u=e.y-o.frame.top-i.chartPanelsContainer.frame.top,f=0;f<h.length;f++){var d,p,y,m=c.leftMarkers[f],_=c.rightMarkers[f],C=c.tradingButton[f];(m.visible||_.visible)&&(p=(d=o.valueScales[f]).projection.valueByY(u),y=i.instrument.tickSize,p&&(this.markerValue=Math.round(p/y)*y,this._updateValueMarker(m,d.formatValue(p)),this._updateValueMarker(_,d.formatValue(p)),this._updateTradingButton(C,!1)))}}}}}}},h.prototype.updateMarkers=function(){var t=this._controls;if(t){for(var e=0,i=t.leftMarkers;e<i.length;e++){var o=i[e];h._updateValueMarkerMetrics(o)}for(var r=0,n=t.rightMarkers;r<n.length;r++){o=n[r];h._updateValueMarkerMetrics(o)}var a=this.chart.dateScale.formatDate(new Date(0));h._updateDateMarkerMetrics(t.topMarker,a),h._updateDateMarkerMetrics(t.bottomMarker,a)}},h.prototype._updateValueMarker=function(t,e){t.visible&&t.$control.text(e).css("top",this._position.y-t.halfHeight)},h.prototype._updateTradingButton=function(t,e){e?t.visible&&(t.$control.css("top",this._position.y-t.halfHeight-7),g.HtmlUtil.setVisibility(t.$control,t.visible)):g.HtmlUtil.setVisibility(t.$control,!1)},h.prototype._updateDateMarker=function(t,e){var i;t.visible&&(i=this.container.width(),i=this._position.x>i-t.halfWidth?i-2*t.halfWidth:this._position.x-t.halfWidth,t.$control.text(e).css("left",Math.max(i,0)))},h.prototype._tradingButtonHandler=function(){var t={crossHairView:this,tradingButton:this._controls.tradingButton};new g.UI.TradingCrossHairButton(t).setHandler()},h);function h(t){var e=a.call(this)||this;return e._position=null,e._prevPosition={},e._positionAnimation=new g.Animation({callback:e.updatePosition}),e._crossHair=t,e}g.CrossHairView=t}(StockChartX=StockChartX||{}),StockChartX=StockChartX||{},this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__awaiter=this&&this.__awaiter||function(n,a,l,s){return new(l=l||Promise)(function(t,e){function i(t){try{r(s.next(t))}catch(t){e(t)}}function o(t){try{r(s.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(i,o)}r((s=s.apply(n,a||[])).next())})},__generator=this&&this.__generator||function(o,r){var n,a,l,s={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(i){return function(t){var e=[i,t];if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(l=a[2&e[0]?"return":e[0]?"throw":"next"])&&!(l=l.call(a,e[1])).done)return l;switch(a=0,(e=l?[0,l.value]:e)[0]){case 0:case 1:l=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,a=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(l=0<(l=s.trys).length&&l[l.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!l||e[1]>l[0]&&e[1]<l[3])){s.label=e[1];break}if(6===e[0]&&s.label<l[1]){s.label=l[1],l=e;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(e);break}l[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(o,s)}catch(t){e=[6,t],a=0}finally{n=l=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},__extends=(!function(r){"use strict";var i,t=".scxLocalChartStateHandler",e=(i=r.ChartHandler,__extends(o,i),o.prototype._subscribe=function(){$(window).on("beforeunload"+t,this,this._onBeforeUnloadWindow)},o.prototype._unsubscribe=function(){$(window).off(t,this._onBeforeUnloadWindow)},o.prototype._onBeforeUnloadWindow=function(t){var i=this,t=t.data;t.autoSave&&t.save().catch(function(e){return __awaiter(i,void 0,void 0,function(){return __generator(this,function(t){return[2,r.UI.Notification.error(e.message,this.chart)]})})})},o.prototype.save=function(){return __awaiter(this,void 0,void 0,function(){var e,i;return __generator(this,function(t){switch(t.label){case 0:return(i=this.chart)?(e=this._generateKey(),i=JSON.stringify(i.saveState()),[4,(new r.LocalDataStore).save(e,i)]):[2];case 1:return t.sent(),[2]}})})},o.prototype.load=function(){return __awaiter(this,void 0,void 0,function(){var e,i,o;return __generator(this,function(t){switch(t.label){case 0:return(e=this.chart)?(i=this._generateKey(),[4,(new r.LocalDataStore).load(i)]):[2,!1];case 1:i=t.sent();try{o=JSON.parse(i)}catch(t){throw new Error("Chart state is corrupted.")}try{e.loadState(o)}catch(t){throw new Error("Load chart state failed: "+t)}return[2,!!i]}})})},o.prototype.clear=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return this.chart?(e=this._generateKey(),[4,(new r.LocalDataStore).clear(e)]):[2];case 1:return t.sent(),[2]}})})},o.prototype._generateKey=function(){return"chart|"+window.location.pathname},o);function o(t){var e=i.call(this,t&&t.chart)||this;return e.autoSave=!0,e.autoLoad=!0,t&&(null!=t.autoSave&&(e.autoSave=t.autoSave),null!=t.autoLoad&&(e.autoLoad=t.autoLoad)),e._subscribe(),e}r.LocalChartStateHandler=e}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(r){"use strict";var e,i="scxFullWindow",n="scxFullScreen",o=".scxWindowModeHandler",a={FullscreenChanged:"scxFullscreenChanged",FullWindowChanged:"scxFullWindowChanged"},t=(Object.freeze(a),r.WindowMode={NORMAL:"normal",FULL_SCREEN:"full-screen",FULL_WINDOW:"full-window"},Object.freeze(r.WindowMode),e=r.ChartHandler,__extends(l,e),Object.defineProperty(l.prototype,"mode",{get:function(){return this._mode},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"prevMode",{get:function(){return this._prevMode},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"isInFullWindowMode",{get:function(){var t=this._mode;return t===r.WindowMode.FULL_WINDOW||t===r.WindowMode.FULL_SCREEN},enumerable:!0,configurable:!0}),l.prototype._subscribe=function(){var t=["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange",""].join(o+", ");$(document).on(t,this,this._onFullScreenChanged),$(window).on("resize"+o,this,this._onWindowResize)},l.prototype._unsubscribe=function(){$(document).off(o,this._onFullScreenChanged),$(window).off(o,this._onWindowResize)},l.prototype._onWindowResize=function(t){t=t.data;t.isInFullWindowMode&&t.adjustFullWindowSize()},l.prototype._onFullScreenChanged=function(t){t.data._handleFullscreenChange(t)},l.prototype.setMode=function(t){if(this._mode!==t){this._prevMode=this._mode,this._mode=t;try{switch(t){case r.WindowMode.NORMAL:this._exitFullscreen(),this._exitFullWindow();break;case r.WindowMode.FULL_SCREEN:this._enterFullWindow(),this._enterFullscreen();break;case r.WindowMode.FULL_WINDOW:this._exitFullscreen(),this._enterFullWindow();break;default:throw new Error("$Unknown window mode: "+t)}this.chart.fireValueChanged(r.ChartEvent.WINDOW_MODE_CHANGED,t,this._prevMode)}catch(t){r.UI.Notification.error(t,this.chart)}}},l.prototype._enterFullscreen=function(){if(!r.HtmlUtil.isFullscreenEnabled())throw new Error("Fullscreen mode is not enabled.");var t=this.chart.container[0];this._isSelfRaisedEvent=!0,r.HtmlUtil.enterFullscreen(t),r.UI.HtmlContainer.instance.reset($(t)),$(document).trigger(a.FullscreenChanged,this.chart)},l.prototype._exitFullscreen=function(){this._isSelfRaisedEvent=!0,r.HtmlUtil.exitFullscreen(),$(document).trigger(a.FullscreenChanged,this.chart),$("body").removeClass(n),r.UI.HtmlContainer.instance.reset(),$("body").trigger("click")},l.prototype._handleFullscreenChange=function(t){var e,i,o;if(this._isSelfRaisedEvent)return this._isSelfRaisedEvent=!1,e=$("body"),this.mode===r.WindowMode.FULL_SCREEN&&(e.addClass(n),this.adjustFullWindowSize()),void $(window).trigger(a.FullscreenChanged,this.chart);this.mode===r.WindowMode.FULL_SCREEN&&(e=!1,(i=$(t.target))&&$(i).is(this.chart.container)?e=!0:(o=r.Environment.browser)!==r.Browser.firefox&&o!==r.Browser.ie||(e=!(i=o===r.Browser.firefox?t.target.mozFullScreenElement:t.target.msFullscreenElement)),e&&this.setMode(this._prevMode||r.WindowMode.NORMAL))},l.prototype._enterFullWindow=function(){var t=this.chart;this._preFullWindowSize||(this._preFullWindowSize=t.cssSize),t.container.addClass(i),this.adjustFullWindowSize(),$(window).trigger(a.FullWindowChanged,t)},l.prototype._exitFullWindow=function(){var t=this.chart;t.container.removeClass(i),t.cssSize=this._preFullWindowSize,this._preFullWindowSize=null,$(window).trigger(a.FullWindowChanged,t),t.setNeedsUpdate()},l.prototype.adjustFullWindowSize=function(){var t=this.chart,e=t.container,i=t.scrollEnabled&&null!=t.scrollbar?t.scrollbar.outerHeight:0;e.outerWidth(window.innerWidth-3).outerHeight(window.innerHeight-3),t.size={width:e.innerWidth()-1,height:e.innerHeight()-t.rootDiv.position().top-1-i-42},t.setNeedsUpdate()},l);function l(t){t=e.call(this,t)||this;return t._mode=r.WindowMode.NORMAL,t._subscribe(),t}r.WindowModeHandler=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";t.Key={SHIFT:16,CTRL:17,ALT:18};var e,i=".scxKeyboardHandler",o=(e=t.ChartHandler,__extends(r,e),r.prototype._subscribe=function(){$(window).on("keydown"+i,this,this._handleKeyDown)},r.prototype._unsubscribe=function(){$(window).off(i,this._handleKeyDown)},r.prototype._handleKeyDown=function(t){var e=t.data;!e.chart.keyboardEventsEnabled||t.target!==document.activeElement||$(t.target).hasClass("modal-open")||$(t.target).hasClass("form-control")||e._handleKey(t)},r.prototype._handleKey=function(t){var e=t.ctrlKey||t.metaKey,i=this.chart;switch(t.keyCode){case 107:i.zoomEnabled&&(i.zoomOnPixels(.05*i.size.width),i.setNeedsUpdate(!0));break;case 109:i.zoomEnabled&&(i.zoomOnPixels(-.05*i.size.width),i.setNeedsUpdate(!0));break;case 37:i.scrollEnabled&&(i.scrollOnPixels(.05*i.size.width),i.setNeedsUpdate(!0));break;case 39:i.scrollEnabled&&(i.scrollOnPixels(-.05*i.size.width),i.setNeedsUpdate(!0));break;case 46:var o=i.selectedObject,r=o&&o.chartPanel;if(!r)return;o.tooltip.hide(),r.removeDrawings(o);break;case 67:if(!e)return;i._copyDrawing();break;case 86:if(!e)return;i._pasteDrawing();break;default:return}t.preventDefault()},r);function r(t){t=e.call(this,t)||this;return t._subscribe(),t}t.KeyboardHandler=o}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(i){"use strict";o=i.ChartHandler,__extends(e,o),Object.defineProperty(e.prototype,"chartPanel",{get:function(){return this.chart.mainPanel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._spread.visible},set:function(t){this._spread.visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ask",{get:function(){return this._spread.ask},set:function(t){this._spread.ask=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bid",{get:function(){return this._spread.bid},set:function(t){this._spread.bid=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"theme",{get:function(){return this._spread.theme},set:function(t){this._spread.theme=t},enumerable:!0,configurable:!0}),e.prototype.layout=function(){var t=this.chartPanel,e=this._spread;this.visible&&!t.containsObject(e)?t.addObjects(e):!this.visible&&t.containsObject(e)&&t.removeObjects(e)};var o,t=e;function e(t){var e=o.call(this,t.chart)||this;return e._spread=new i.Spread,e.ask=t.ask,e.bid=t.bid,e.theme=t.theme,e}i.SpreadHandler=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(s){"use strict";i=s.Control,__extends(e,i),Object.defineProperty(e.prototype,"highlightedColumns",{get:function(){return this._highlightedColumns},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chartPanel",{get:function(){return this._chart.mainPanel},enumerable:!0,configurable:!0}),e.prototype._initGestures=function(){return new s.GestureArray([new s.ClickGesture({handler:this._handleClickGesture,hitTest:this._hitTest,keys:[s.Key.CTRL]})],this)},e.prototype._handleClickGesture=function(t,e){var e=e.pointerPosition.x,i=this.chart,e=this.chartPanel.projection.recordByX(e),i=i.primaryBar(e);i&&(this._processBarDate(i.date),this.chartPanel.setNeedsUpdate())},e.prototype._processBarDate=function(t){var e=this._innerColumnIndex(t);-1===e?this._add({date:t}):this._remove(e)},e.prototype.add=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=this.chart,o=0,r=s.JsUtil.flattenArray(t);o<r.length;o++){var n,a=r[o],l=null;s.JsUtil.isNumber(a)||a instanceof Date?l=i.primaryBar(a):"object"==typeof a&&(l=a.date?a:"object"==typeof(n=a.column)&&n.date?n:i.primaryBar(n)),l&&-1===this._innerColumnIndex(l.date)&&this._add({date:l.date,theme:s.JsUtil.isNumber(a)?null:a.theme})}},e.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return this.chartPanel.removeObjects(this._highlightedColumns),void(this._highlightedColumns=[]);for(var i=this.chart,o=0,r=s.JsUtil.flattenArray(t);o<r.length;o++){var n=r[o],n="object"==typeof n&&n.date?n:i.primaryBar(n);if(!n)return;n=this._innerColumnIndex(n.date);-1!==n&&this._remove(n)}},e.prototype._add=function(t){var e=new s.HighlightedColumn(t);this._highlightedColumns.push(e),this.chartPanel.addObjects(e),this.chart.fireValueChanged(s.ChartEvent.HIGHLIGHTED_COLUMN_ADDED,t.date)},e.prototype._remove=function(t){t=this._highlightedColumns.splice(t,1)[0];this.chartPanel.removeObjects(t),this.chart.fireValueChanged(s.ChartEvent.HIGHLIGHTED_COLUMN_REMOVED,t.date)},e.prototype._innerColumnIndex=function(t){for(var e=0;e<this._highlightedColumns.length;e++)if(this._highlightedColumns[e].checkDate(t))return e;return-1},e.prototype._hitTest=function(t){return this.chartPanel.hitTest(t)},e.prototype.destroy=function(){for(var t=0,e=this._highlightedColumns;t<e.length;t++)e[t].destroy();this._highlightedColumns=[]};var i,t=e;function e(t){var e=i.call(this)||this;return e._highlightedColumns=[],e._visible=!0,e._chart=t,e}s.HighlightedColumnHandler=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(i){"use strict";var o,r={hours:0,minutes:0},t=(o=i.ChartHandler,__extends(e,o),Object.defineProperty(e.prototype,"time",{get:function(){return this._time},set:function(t){t.hours=24<t.hours||t.hours<0?0:t.hours,t.minutes=60<t.minutes||t.hours<0?0:t.minutes,this._time=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"theme",{get:function(){return this._theme},set:function(t){this._theme=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chartPanel",{get:function(){return this.chart.mainPanel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._breakLines.visible},set:function(t){this._breakLines.visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateFilter",{get:function(){return this._dateFilter},set:function(t){this._dateFilter=t},enumerable:!0,configurable:!0}),e.prototype.layout=function(){var t=this.chartPanel,e=this._breakLines;this.visible&&!t.containsObject(e)?t.addObjects(e):!this.visible&&t.containsObject(e)&&t.removeObjects(e)},e);function e(t){var e=o.call(this,t.chart)||this;return e._theme=t.theme||e.chart.theme.dateScale.breakLine.stroke,e._time=t.time||r,e._dateFilter=t.dateFilter,e._breakLines=new i.BreakLines({breakLinesHandler:e}),e}i.BreakLinesHandler=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(r){"use strict";t=r.Handler,__extends(i,t),i.prototype.saveImage=function(t,o){html2canvas(t,{onrendered:function(t){var e,i;o?o(t):t.msToBlob?navigator.msSaveBlob(t.msToBlob(),"Chart.png"):(e=document.createElement("a"),i=t.toDataURL().replace(/^data:image\/[^;]/,"data:application/octet-stream"),r.Environment.isIOS||r.Environment.isAndroid?(i=t.toDataURL(),e.target="_blank"):e.download="Chart.png",e.href=i,document.body.appendChild(e),e.click(),document.body.removeChild(e))}})};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}r.SaveImageHandler=e}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";var e,n=[{priceStyle:t.LinePriceStyle.className,columnWidth:0},{priceStyle:t.ColoredBarPriceStyle.className,columnWidth:2},{priceStyle:t.CandlePriceStyle.className,columnWidth:6},{priceStyle:t.CandlePriceStyle.className,columnWidth:1/0}],i=(e=t.ChartHandler,__extends(o,e),o.prototype.adopt=function(){if(this.enabled)for(var t=this.chart,e=t.dateScale.columnWidth,i=0,o=n.length;i<o-1;i++){var r=n[i];r.columnWidth<e&&e<n[i+1].columnWidth&&(t.priceStyleKind=r.priceStyle)}},o);function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.enabled=!1,t}t.SmartPriceStyleHandler=i}(StockChartX=StockChartX||{}),!function(l){"use strict";l.ComparisonSource={OPEN:".open",HIGH:".high",LOW:".low",CLOSE:".close"},Object.freeze(l.ComparisonSource);Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panel",{get:function(){return this.chart.mainPanel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseSource",{get:function(){return this._options.baseSource||l.ComparisonSource.CLOSE},set:function(t){this._options.baseSource=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"instrumentsCompare",{get:function(){return this._instrumentsCompare},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"basePrice",{get:function(){return this._basePrice},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseIndex",{get:function(){return l.JsUtil.isNumber(this._options.baseIndex)?this._options.baseIndex:this.chart.firstVisibleIndex},set:function(t){this._options.baseIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readyLoadMoreHistory",{get:function(){return this.instrumentsCompare.every(function(t){return!1!==t.readyLoadMoreHistory})},enumerable:!0,configurable:!0}),e.prototype.compare=function(t,e,i){this._instrumentsCompare.push(new l.InstrumentCompare({instrumentComparisonHandler:this,instrument:t,source:e||this.baseSource,lineWidth:i.lineWidth,lineColor:i.lineColor,lineStyle:i.lineStyle})),this._applyPerCentValueScale()},e.prototype.cancelComparing=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=this._instrumentsCompare,o=0,r=0!==t.length?l.JsUtil.flattenArray(t):i.slice(0);o<r.length;o++){var n=r[o],a=i.indexOf(n);n.destroy(),this._instrumentsCompare.splice(a,1)}0===i.length&&this._cancelPerCentValueScale(),this.panel.update()},e.prototype._calculateDataSeries=function(){var t=this._chart,e=t.dataManager.findDataSeries(this.baseSource),i=t.firstVisibleIndex,o=t.lastVisibleIndex+1,r=e.valueAtIndex(this.baseIndex);this._basePrice=r;for(var n=0,a=this._instrumentsCompare;n<a.length;n++)a[n].calculateDataSeries(r,i,o)},e.prototype._applyPerCentValueScale=function(){var t=this._chart.mainPanel.valueScale;t.calibrator instanceof l.PercentValueScaleCalibrator?t.calibrator.basePriceHolder=this:(this._options.prevValueScale=t.saveState(),t.calibrator=new l.PercentValueScaleCalibrator({basePriceHolder:this}))},e.prototype._cancelPerCentValueScale=function(){var t=this._chart.mainPanel.valueScale,e=this._options.prevValueScale;t.calibrator instanceof l.PercentValueScaleCalibrator&&(t.calibrator=l.ValueScaleCalibrator.deserialize(e.calibrator))},e.prototype._updateInstruments=function(){this._instrumentsCompare.forEach(function(t){return t.update()})},e.prototype.update=function(t){(t=void 0===t?!1:t)&&this._updateInstruments(),this._calculateDataSeries()},e.prototype._onTimeFrameChange=function(){this.instrumentsCompare.forEach(function(t){return t.onTimeFrameChange()})},e.prototype._onMoreHistoryRequested=function(){this.instrumentsCompare.sort(function(t,e){t=t.instrument.symbol,e=e.instrument.symbol;return t<e?-1:e<t?1:0}).filter(function(t,e,i){i=i[e-1];return!i||t.instrument.symbol!==i.instrument.symbol}).forEach(function(t){return t.onMoreHistoryRequested()})},e.prototype._updateHoverRecord=function(e){this.instrumentsCompare.forEach(function(t){return t.updateHoverRecord(e)})},e.prototype._subscribeEvents=function(){var e=this;this.chart.on(l.ChartEvent.TIME_FRAME_CHANGED,function(){return e._onTimeFrameChange()},this),this.chart.on(l.ChartEvent.MORE_HISTORY_REQUESTED,function(){return e._onMoreHistoryRequested()},this),this.chart.on(l.ChartEvent.HOVER_RECORD_CHANGED,function(t){return e._updateHoverRecord(t.value)},this)},e.prototype._unSubscribeEvents=function(){this.chart.off(l.ChartEvent.TIME_FRAME_CHANGED,this),this.chart.off(l.ChartEvent.MORE_HISTORY_REQUESTED,this),this.chart.off(l.ChartEvent.HOVER_RECORD_CHANGED,this)},e.prototype.saveState=function(){return this._options.instrumentsOptions=this.instrumentsCompare.map(function(t){return t.saveState()}),l.JsUtil.clone(this._options)},e.prototype.loadState=function(t){for(var e=0,i=(this._options=t).instrumentsOptions;e<i.length;e++){var o=i[e];this._instrumentsCompare.push(new l.InstrumentCompare(jQuery.extend({instrumentComparisonHandler:this},o)))}0<this.instrumentsCompare.length&&this._applyPerCentValueScale()},e.prototype.destroy=function(){this._unSubscribeEvents(),this.cancelComparing()};var t=e;function e(t){this._chart=t,this._options={},this._instrumentsCompare=[],this._subscribeEvents()}l.InstrumentComparisonHandler=t}(StockChartX=StockChartX||{}),!function(h){"use strict";var n="scxPanelTitleCaption",a="scxPanelTitleValue",l="scxIndicatorTitle",s="scxPanelTitleIcon",c="scxIndicatorRemoveIcon",u=".comparing",i=1,o="solid";function e(t){this.loadState(t),this._panel=t.instrumentComparisonHandler.panel,this._instrumentComparisonHandler=t.instrumentComparisonHandler,this._setValues(t),this._init(),this._initPanelTitle()}Object.defineProperty(e.prototype,"panel",{get:function(){return this._panel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chart",{get:function(){return this._panel.chart},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._plot.visible},set:function(t){this._plot.visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowSettingsDialog",{get:function(){return this._options.allowSettingsDialog},set:function(t){this._options.allowSettingsDialog=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowAboutDialog",{get:function(){return this._options.allowAboutDialog},set:function(t){this._options.allowAboutDialog=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowCheckValueMarker",{get:function(){return this._options.allowCheckValueMarker},set:function(t){this._options.allowCheckValueMarker=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showValueMarker",{get:function(){return this._plot.showValueMarkers},set:function(t){this._plot.showValueMarkers=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"plot",{get:function(){return this._plot},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"source",{get:function(){return this._options.source},set:function(t){this._options.source=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"instrument",{get:function(){return this._options.instrument},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineColor",{get:function(){return this._options.lineColor},set:function(t){this._options.lineColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineStyle",{get:function(){return this._options.lineStyle},set:function(t){this._options.lineStyle=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineWidth",{get:function(){return this._options.lineWidth},set:function(t){this._options.lineWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readyLoadMoreHistory",{get:function(){return this._currentBarsRequest&&!this.chart.datafeed.isRequestAlive(this._currentBarsRequest)},enumerable:!0,configurable:!0}),e.prototype._init=function(){var t=this.instrument,e=this.chart.theme.chart.background,t=new h.LinePlot({dataSeries:[new h.DataSeries(u+t.symbol)],theme:this._options.plotTheme||{strokeColor:this.lineColor||h.HtmlUtil.getRandomColorVisibleOn(e),width:this._options.lineWidth||i,lineStyle:this._options.lineStyle||o}});this._plot=t,this.showValueMarker=!0,this._options.plot&&t.loadState(this._options.plot),this.panel.addPlot(t),this._requestBars()},e.prototype.calculateDataSeries=function(t,e,i){if(this.visible){this._synchronize();var o=this.instrument.symbol,r=this._comparingDelta,n=this.chart.dataManager.findDataSeries(o+this.source);if(h.JsUtil.isNumber(r)&&o&&n){var o=this._plot.findDataSeries(u+o),a=n.valueAtIndex(e-r),l=[];o.clear();for(var s=e;s<i;s++){var c=n.valueAtIndex(s-r),c=(c-(a=a||c))*t/a+t;c&&(l[s]=c)}o.add(l)}}},e.prototype._synchronize=function(){var t=this.instrument.symbol,t=this.chart.dataManager.barDataSeries(t),t=t.date&&t.date.length,e=this.chart.primaryDataSeries(h.DataSeriesSuffix.DATE).length;this._comparingDelta=e-t},e.prototype._setValues=function(t){this.lineColor=t.lineColor,this.lineWidth=t.lineWidth,this.lineStyle=t.lineStyle},e.prototype._initPanelTitle=function(){var t,e,i,o,r=this;this.panel.visible&&!this._titleControls&&(i=this.instrument,e=(t=this._titleControls={}).rootDiv=this.panel.titleDiv.scxAppend("div",l),t.name=e.scxAppend("span",n).text(i.symbol),(i=t.parameters=e.scxAppend("span",n)).scxAppend("span").text("("),this._titleParameters={source:i.scxAppend("span"),value:i.scxAppend("span",a)},i.scxAppend("span").text(")"),o=e.scxAppend("span",[s,c]).attr("title","Cancel compare").on("click",function(){r._instrumentComparisonHandler.cancelComparing(r)}),e.css("color",this.plot.theme.strokeColor),h.Localization.localizeText(this.chart,"compareInstrument.cancelCompare").then(function(t){o.attr("title",t)}),this._updateTitle(),this.updateTitleControlsVisibility())},e.prototype.updateTitleControlsVisibility=function(){var t=this._titleControls,e=this._titleParameters;t&&(t.name.css("opacity",this.visible?"1":"0.5"),e.source.css("opacity",this.visible?"1":"0.5"),this.visible||e.value.text(""))},e.prototype._updateTitle=function(){this._titleParameters.source.scxLocalize("compareInstrument.source"+this.source,this.source),this.chart.localize(this._titleParameters.source)},e.prototype.updateHoverRecord=function(t){var e,i;this.visible&&(t=t||this.chart.hoveredRecord,e=this.instrument.symbol,i=this.source,i=(e=this.chart.dataManager.findDataSeries(e+i))&&e.valueAtIndex(t-this._comparingDelta),isNaN(i)||this._titleParameters.value.text(this.panel.formatValue(i)))},e.prototype.updateVisibility=function(){this.visible||this.plot.dataSeries.forEach(function(t){return t.clear()}),this._instrumentComparisonHandler.update(),this.panel.setNeedsUpdate(!0)},e.prototype.update=function(){this._synchronize(),this._updateTitle()},e.prototype.onTimeFrameChange=function(){this._requestBars()},e.prototype.onMoreHistoryRequested=function(){this._requestMoreBars()},e.prototype._sendBarsRequest=function(){var t=this._newBarsRequest,e=this._currentBarsRequest,i=this.chart.datafeed;i&&t&&(e&&(i.cancel(e),this._currentBarsRequest=null),t.id||(t.id=h.Datafeed.nextRequestId()),t.chart=this.chart,this._currentBarsRequest=t,i.send(t),this._newBarsRequest=null)},e.prototype._requestMoreBars=function(){var t=this.instrument,e=this.chart.dataManager.findDataSeries(t.symbol+h.DataSeriesSuffix.DATE).firstValue;e&&(this._newBarsRequest={kind:h.RequestKind.MORE_BARS,count:h.DEFAULT_BARS_COUNT,endDate:e,instrument:t},this._sendBarsRequest())},e.prototype._requestBars=function(){var t=this.chart.recordCount<h.DEFAULT_BARS_COUNT?h.DEFAULT_BARS_COUNT:this.chart.recordCount;this._newBarsRequest={kind:h.RequestKind.BARS,count:0!==t?t:h.DEFAULT_BARS_COUNT,instrument:this.instrument},this._sendBarsRequest()},e.prototype.saveState=function(){return this._options.plot=this.plot.saveState(),this._options.plotTheme=this.plot.actualTheme,h.JsUtil.clone(this._options)},e.prototype.loadState=function(t){t={instrument:t.instrument,allowAboutDialog:t.allowAboutDialog,allowCheckValueMarker:t.allowCheckValueMarker,allowSettingsDialog:t.allowSettingsDialog,plot:t.plot,plotTheme:t.plotTheme,source:t.source};this._options=jQuery.extend({},e.defaults,t)},e.prototype.destroy=function(){this.panel.removePlot(this.plot),this._titleControls.rootDiv.remove()},e.defaults={allowSettingsDialog:!1,allowAboutDialog:!1,allowCheckValueMarker:!0},h.InstrumentCompare=e}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(a){"use strict";a.ZoomInMode={DATE_RANGE:"dateRange",RECT:"rect"},Object.freeze(a.ZoomInMode);var e,r={ZOOM_RECTANGLE:"scxZoomRectangle",ZOOM_IN:"scxZoomIn"},t=(Object.freeze(r),e=a.Control,__extends(i,e),Object.defineProperty(i.prototype,"theme",{get:function(){return this._theme||this.chart.theme.zoomIn},set:function(t){this._theme=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"container",{get:function(){return this.panel.container},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"chart",{get:function(){return this.panel.chart},enumerable:!0,configurable:!0}),i.prototype._initGestures=function(){return new a.GestureArray([new a.ClickGesture({handler:this._handleMouseClickGesture,hitTest:this.hitTest}),new a.MouseHoverGesture({handler:this._handleMouseMoveGesture,hitTest:this.hitTest})],this)},i.prototype._handleMouseClickGesture=function(t,e){if(this.chart.state===a.ChartState.ZOOM_IN){this._panelTop=this.panel.frame.top,this._panelHeight=this.panel.frame.height;var i=this._panelTop;if(this._addPoint({x:e.pointerPosition.x,y:e.pointerPosition.y-i}),1===this._points.length)this._createControls();else if(2===this._points.length)return void this.finishDraw();this.updateVisibility(!0),this.setPosition()}},i.prototype._handleMouseMoveGesture=function(t,e){null!=this._startPoint&&this.movePosition({x:e.pointerPosition.x,y:e.pointerPosition.y-this._panelTop})},i.prototype.hitTest=function(t){return this.panel.contentFrame.containsPoint(t)},i.prototype._createControls=function(){this.panel&&(this._controls={rectangle:this.container.scxAppend("div",r.ZOOM_RECTANGLE)},this.applyTheme(),this.updateVisibility(!1))},i.prototype._addPoint=function(t){null==this._points&&(this._points=[]),this._points.push(t)},i.prototype.finishDraw=function(){var t=this.chart,e=t.dateScale.projection,i=this._points,o=(t.state=a.ChartState.NORMAL,this.updateVisibility(!1),e.recordByX(Math.min(i[0].x,i[1].x))),e=e.recordByX(Math.max(i[0].x,i[1].x));if(o>=t.recordCount)t.fireValueChanged(a.ChartEvent.ZOOM_IN_FINISHED);else{if(o<e){if(o<0&&e<=(o=0))return;t.recordRange(o,e),t.setNeedsUpdate(),this.zoomMode===a.ZoomInMode.RECT?this._setScalesValues(i[0].y,i[1].y):t.setNeedsAutoScale()}this._points=null,this.container.find("."+r.ZOOM_RECTANGLE).remove(),t.fireValueChanged(a.ChartEvent.ZOOM_IN_FINISHED)}},i.prototype.cancelDraw=function(){this._points=null,this.panel&&(this.updateVisibility(!1),this.container.find("."+r.ZOOM_RECTANGLE).remove())},i.prototype.applyTheme=function(){var t=this.theme;this._controls.rectangle.scxBorder("border",t.border).scxFill(t.fill)},i.prototype.updateVisibility=function(t){var e=this._controls;this._controls&&(t?this.container.addClass(r.ZOOM_IN):this.container.removeClass(r.ZOOM_IN),a.HtmlUtil.setVisibility(e.rectangle,t))},i.prototype.setPosition=function(t){this._startPoint=this._points[0],t?this._positionAnimation.start():this.draw()},i.prototype.movePosition=function(t,e){this._movePoint=t,e?this._positionAnimation.start():this.draw()},i.prototype.draw=function(){var t,e,i,o,r,n;this._positionAnimation&&(this._positionAnimation.stop(),(n=this._startPoint)&&((t=null==this._movePoint?n:this._movePoint).x>this.panel.contentFrame.width&&(t.x=this.panel.contentFrame.width),r=o=i=e=0,this.zoomMode===a.ZoomInMode.DATE_RANGE?(i=0,o=Math.abs(t.x-n.x),r=this._panelHeight,e=(n.x>t.x?t:n).x):(o=Math.abs(t.x-n.x),r=Math.abs(t.y-n.y),i=n.x<=t.x?(e=n.x,(n.y<=t.y?n:t).y):(e=t.x,n.y<=t.y?t.y-r:t.y)),(n=this._controls.rectangle).scxFrame({left:e,top:i,width:o,height:r}),n.css("position","absolute")))},i.prototype._setScalesValues=function(t,e){for(var i=0,o=this.chart.chartPanels;i<o.length;i++)for(var r=0,n=o[i].valueScales;r<n.length;r++){var a=n[r],l=a.projection.valueByY(t),s=a.projection.valueByY(e);a.minVisibleValue=Math.min(l,s),a.maxVisibleValue=Math.max(l,s)}},i.prototype.destroy=function(){this._controls.rectangle.remove(),this._controls=null},i);function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._positionAnimation=new a.Animation({callback:t.draw}),t.zoomMode=a.ZoomInMode.DATE_RANGE,t._panelTop=0,t._panelHeight=0,t}a.ZoomInView=t}(StockChartX=StockChartX||{}),!function(r){"use strict";function n(t){null!=(t=t||{}).x&&(this.x=t.x),null!=t.y&&(this.y=t.y),null!=t.date&&(this.date="string"==typeof t.date?new Date(t.date):t.date),null!=t.value&&(this.value=t.value),null!=t.record&&(this.record=t.record)}r.XPointBehavior={X:"x",RECORD:"record",DATE:"date"},Object.freeze(r.XPointBehavior),r.YPointBehavior={Y:"y",VALUE:"value"},Object.freeze(r.YPointBehavior),n.convert=function(t,e,i){var o={};switch(e.x){case r.XPointBehavior.X:o.x=t.x;break;case r.XPointBehavior.RECORD:o.record=null!=t.x?i.recordByX(t.x,!1):null;break;case r.XPointBehavior.DATE:o.date=null!=t.x?i.dateByX(t.x):null;break;default:throw new Error("Unknown X point behavior: "+e.x)}switch(e.y){case r.YPointBehavior.Y:o.y=t.y;break;case r.YPointBehavior.VALUE:o.value=null!=t.y?i.valueByY(t.y):null;break;default:throw new Error("Unknown Y point behavior: "+e.y)}return new n(o)},n.prototype.clear=function(){delete this.x,delete this.y,delete this.date,delete this.value,delete this.record},n.prototype.getX=function(t){return null!=this.x?this.x:null!=this.date?t.xByDate(this.date):null!=this.record?t.xByRecord(this.record,!1):null},n.prototype.getDate=function(t){return null!=this.x?t.dateByX(this.x):null!=this.date?this.date:null!=this.record?t.dateByX(t.xByRecord(this.record,!1)):null},n.prototype.getRecord=function(t){return null!=this.x?t.recordByX(this.x,!1):null!=this.date?t.recordByX(t.xByDate(this.date,!1),!1):null!=this.record?this.record:null},n.prototype.getY=function(t){return null!=this.y?this.y:null!=this.value?t.yByValue(this.value):null},n.prototype.getValue=function(t){return null!=this.value?this.value:null!=this.y?t.valueByY(this.y):null},n.prototype.toPoint=function(t){return{x:this.getX(t),y:this.getY(t)}},n.prototype.moveTo=function(t,e,i){return this.moveToX(t,i).moveToY(e,i)},n.prototype.moveToPoint=function(t,e){return this.moveTo(t.x,t.y,e)},n.prototype.moveToX=function(t,e){return null!=this.x?this.x=t:null!=this.date?this.date=null!=t?e.dateByX(t):null:null!=this.record&&(this.record=null!=t?e.recordByX(t,!1):null),this},n.prototype.moveToY=function(t,e){return null!=this.y?this.y=t:null!=this.value&&(this.value=null!=t?e.valueByY(t):null),this},n.prototype.translate=function(t,e,i){var o=this.getX(i),r=this.getY(i);return this.moveTo(null!=o?o+t:null,null!=r?r+e:null,i)},n.prototype.clone=function(){return new n(this)},r.ChartPoint=n}(StockChartX=StockChartX||{}),!function(t){"use strict";var e;(e=t.TextAlign||(t.TextAlign={})).LEFT="left",e.CENTER="center",e.RIGHT="right",(e=t.TextBaseline||(t.TextBaseline={})).TOP="top",e.MIDDLE="middle",e.BOTTOM="bottom",e.ALPHABETIC="alphabetic"}(StockChartX=StockChartX||{}),!function(o){"use strict";function i(){}Object.defineProperty(i.prototype,"canvas",{get:function(){return this._canvas},set:function(t){this._canvas=t,this._context=t.getContext("2d")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),i.prototype._setLineDashFunc=function(){var t,e=this._lineDashFunc;e||(e=(t=this._context).setLineDash?function(t){this.setLineDash(t)}:"mozDash"in t?function(t){this.mozDash=t}:"webkitLineDash"in t?function(t){this.webkitLineDash=t}:function(t){},this._lineDashFunc=e)},i.prototype.save=function(){this._context.save()},i.prototype.restore=function(){this._context.restore()},i.prototype.translate=function(t,e){this._context.translate(t,e)},i.prototype.rotate=function(t){this._context.rotate(t)},i.prototype.scale=function(t,e){this._context.scale(t,e)},i.prototype.clearRect=function(t,e,i,o){this._context.clearRect(t,e,i,o)},i.prototype.clip=function(){this._context.clip()},i.prototype.textWidth=function(t){return this._context.measureText(t).width},i.prototype.beginPath=function(){this._context.beginPath()},i.prototype.closePath=function(){this._context.closePath()},i.prototype.moveTo=function(t,e){this._context.moveTo(t,e)},i.prototype.lineTo=function(t,e){this._context.lineTo(t,e)},i.prototype.line=function(t,e,i,o){var r=this._context;r.moveTo(t,e),r.lineTo(i,o)},i.prototype.linePath=function(t,e,i,o){this.beginPath(),this.line(t,e,i,o)},i.prototype.verLine=function(t,e,i){this.line(t,e,t,i)},i.prototype.verLinePath=function(t,e,i){this.beginPath(),this.verLine(t,e,i)},i.prototype.horLine=function(t,e,i){this.line(t,i,e,i)},i.prototype.horLinePath=function(t,e,i){this.beginPath(),this.horLine(t,e,i)},i.prototype.polyline=function(t){var e=t.length;if(0!==e)for(var i=this._context,o="object"==typeof t[0],r=o?1:2,n=0;n<e;n+=r){var a,l=void 0,s=void 0;s=o?(l=(a=t[n]).x,a.y):(l=t[n],t[n+1]),0===n?i.moveTo(l,s):i.lineTo(l,s)}},i.prototype.polylinePath=function(t){this.beginPath(),this.polyline(t)},i.prototype.polygon=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];0<t.length&&(this.polyline(t),this._context.closePath())},i.prototype.polygonPath=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.beginPath(),this.polygon.apply(this,t)},i.prototype.rect=function(t,e,i,o){this._context.rect(t,e,i,o)},i.prototype.rectPath=function(t,e,i,o){this.beginPath(),this.rect(t,e,i,o)},i.prototype.circle=function(t,e,i){this.arc(t,e,i,0,2*Math.PI)},i.prototype.circlePath=function(t,e,i){this.beginPath(),this.circle(t,e,i)},i.prototype.ellipse=function(t,e,i,o){var r=this._context;r.save(),r.translate(t,e),i!==o&&r.scale(1,o/i),this.circle(0,0,i),r.restore()},i.prototype.ellipsePath=function(t,e,i,o){this.beginPath(),this.ellipse(t,e,i,o)},i.prototype.arc=function(t,e,i,o,r,n){this._context.arc(t,e,i,o,r,n)},i.prototype.arcPath=function(t,e,i,o,r,n){this.beginPath(),this.arc(t,e,i,o,r,n)},i.prototype.bezierCurve=function(t,e,i,o,r,n){this._context.bezierCurveTo(t,e,i,o,r,n)},i.prototype.quadraticCurve=function(t,e,i,o){this._context.quadraticCurveTo(t,e,i,o)},i.prototype.image=function(t,e,i,o,r){o&&r?this._context.drawImage(t,e,i,o,r):this._context.drawImage(t,e,i)},i.prototype.textOptions=function(t){var e=this._context;t.align&&(e.textAlign=t.align),t.baseline&&(e.textBaseline=t.baseline)},i.prototype.textTheme=function(t){var e;t&&(e=this._context,t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline),e.font=i._getFont(t),this.fillTheme(t),this.strokeTheme(t))},i._getFont=function(t){return t?(t.fontStyle||o.FontDefaults.fontStyle)+" "+(t.fontVariant||o.FontDefaults.fontVariant)+" "+(t.fontWeight||o.FontDefaults.fontWeight)+" "+(t.fontSize||o.FontDefaults.fontSize)+"px "+(t.fontFamily||o.FontDefaults.fontFamily):o.FontDefaults.fontSize+"px "+o.FontDefaults.fontFamily},i.prototype.fillText=function(t,e,i,o){var r;o&&(this.textTheme(o),r=o.maxWidth),this._context.fillText(t,e,i,r)},i.prototype.strokeTheme=function(t,e){t&&(e||!1!==t.strokeEnabled)&&(e=this._context,(t.strokePriority||o.StrokeDefaults.strokePriority)===o.StrokePriority.COLOR&&(e.strokeStyle=t.strokeColor||o.StrokeDefaults.strokeColor),e.lineCap=t.lineCap||o.StrokeDefaults.lineCap,e.lineJoin=t.lineJoin||o.StrokeDefaults.lineJoin,e.lineWidth=t.width||o.StrokeDefaults.width,t=i._getDashArray(t.lineStyle||o.StrokeDefaults.lineStyle),this._setLineDashFunc(),this._lineDashFunc.call(e,t))},i.prototype.stroke=function(t,e){!t||!e&&!1===t.strokeEnabled||(this.strokeTheme(t,e),this._context.stroke())},i.prototype.fillTheme=function(t,e){t&&(e||!1!==t.fillEnabled)&&(t.fillPriority,e=void 0,e=t.linearGradient?this._linearGradientFillStyle(t.linearGradient):t.radialGradient?this._radialGradientFillStyle(t.radialGradient):t.fillColor||"black",this._context.fillStyle=e)},i.prototype.fill=function(t,e,i){if(t){if(!e&&!1===t.fillEnabled)return;this.fillTheme(t,e)}this._context.fill(i)},i.prototype.fillStroke=function(t,e){this.fill(t),this.stroke(e)},i.prototype.fillStrokeTheme=function(t,e){this.fillTheme(t),this.strokeTheme(e)},i.prototype._linearGradientFillStyle=function(t){var e=this._context.createLinearGradient(0,0,0,this._canvas.height);if("string"==typeof t[0])for(var i=t.length,o=1/i,r=o,n=0;n<i;n++)e.addColorStop(r=n===i-1?1:r,t[n]),r+=o;else for(var a=0,l=t;a<l.length;a++){var s=l[a];e.addColorStop(s.stop,s.color)}return e},i.prototype._radialGradientFillStyle=function(t){var e=t[0],i=e.center,o=e.radius,r=e.stop,r=void 0===r?.5:r,e=e.color,t=t[1],n=t.center,a=t.radius,l=t.stop,l=void 0===l?1:l,t=t.color,i=this._context.createRadialGradient(i.x,i.y,o,n.x,n.y,a);return i.addColorStop(r,e),i.addColorStop(l,t),i},i._getDashArray=function(t){var e=o.LineStyle,i=o.DashArray;switch(t){case e.DASH:return i.DASH;case e.DOT:return i.DOT;case e.DASH_DOT:return i.DASH_DOT;default:return[]}},o.CanvasRenderer=i}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(i){"use strict";i.CanvasOffset=.5;o=i.Component,__extends(e,o),Object.defineProperty(e.prototype,"canvas",{get:function(){return this._canvas},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this._scale},set:function(t){this._scale=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return{width:this._width||0,height:this._height||0}},set:function(t){var e=this._canvas,i=this.scale*(window.devicePixelRatio||1),o=!1;this._width!==t.width&&(e.attr("width",t.width*i),this._width=t.width,o=!0),this._height!==t.height&&(e.attr("height",t.height*i),this._height=t.height,o=!0),o&&this.renderer.scale(i,i)},enumerable:!0,configurable:!0}),e.prototype.adjustDimensions=function(){this.size=this.size},e.prototype.destroy=function(){this._parent&&(this._parent.remove(),this._parent=null),this._canvas=null,this._renderer=null},e.prototype._setup=function(t){this._canvas=t.scxAppendCanvas().css({height:"100%",width:"100%"}),this._renderer.canvas=this._canvas.get(0)};var o,t=e;function e(t){var e=o.call(this)||this;return e._renderer=new i.CanvasRenderer,e._scale=2,e._parent=t.parent,e._setup(e._parent),t.size&&(e.size=t.size),e}i.Layer=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(r){"use strict";i=r.ChartComponent,__extends(e,i),Object.defineProperty(e.prototype,"actualTheme",{get:function(){return this.theme||this.chart.theme.selectionMarker},enumerable:!0,configurable:!0}),e.prototype.draw=function(e,t){var i=this,o=this.actualTheme;e.beginPath(),r.JsUtil.flattenedArray(t,function(t){return i._drawMarker(e,t)}),e.fillStroke(o.fill,o.line)},e.prototype._drawMarker=function(t,e){var i=this.width;t.moveTo(e.x+i,e.y),t.circle(e.x,e.y,i)};var i,t=e;function e(t){var e=i.call(this,t)||this;return e.width=null,e.theme=null,t&&(e.theme=t.theme,e.width=t.width),e}r.SelectionMarker=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(c){"use strict";var n;(t=n=c.DrawingEvent||(c.DrawingEvent={})).PANEL_CHANGED="drawingPanelChanged",t.VALUE_SCALE_CHANGED="drawingValueScaleChanged",t.VISIBLE_CHANGED="drawingVisibleChanged",t.POINTS_CHANGED="drawingPointsChanged",t.LOCKED_CHANGED="drawingLockedChanged",t.RESIZABLE_CHANGED="drawingResizableChanged",t.SELECTABLE_CHANGED="drawingSelectableChanged",t.SELECTED_CHANGED="drawingSelectedChanged",t.THEME_CHANGED="drawingThemeChanged",t.DRAG_STARTED="drawingDragStarted",t.DRAG_FINISHED="chartUserDrawingDragFinished",t.DOUBLE_CLICK="chartDrawingDoubleClick",t.CONTEXT_MENU="chartDrawingContextMenu",c.MagnetPoint={BAR:"bar",HIGH:"high",LOW:"low",OPEN:"open",CLOSE:"close"},c.MagnetMode={NONE:"none",ALWAYS:"always",NEAR:"near"},c.DrawingDragPoint={NONE:null,ALL:-1,MOVE_POINT1:1,MOVE_POINT2:2};var l=0,s=1,t=(c.DrawingCursorClass={CREATE:"scxDrawingCreate",MOVE:"scxDrawingMove",RESIZE:"scxDrawingResize",RESIZE_EW:"scxDrawingResizeEW",RESIZE_NS:"scxDrawingResizeNS",RESIZE_NESW:"scxDrawingResizeNESW",RESIZE_NWSE:"scxDrawingResizeNWSE"},c.minPointsDistance=5,Object.defineProperty(e,"registeredDrawings",{get:function(){return this._drawings.registeredItems},enumerable:!0,configurable:!0}),e.register=function(t){this._drawings.register(t.className,t)},e.deserialize=function(t){if(!t)return null;var t="string"==typeof t?JSON.parse(t):t,e=this._drawings.createInstance(t.className);return e.loadState(t),e},e._drawings=new c.ClassRegistrar,e);function e(){}r=c.ChartPanelObject,__extends(o,r),Object.defineProperty(o,"subClassName",{get:function(){return"abstract"},enumerable:!0,configurable:!0}),Object.defineProperty(o,"className",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"_defaults",{get:function(){return this.constructor.defaults},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"className",{get:function(){return this.constructor.className},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"chartPoints",{get:function(){var t=this._options.points;return this._lastCreatePoint?t.concat(this._lastCreatePoint):t},set:function(t){this.setChartPoints(t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"locked",{get:function(){return this._options.locked},set:function(t){this._setOption("locked",t,n.LOCKED_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"resizable",{get:function(){return this._options.resizable},set:function(t){this._setOption("resizable",t,n.RESIZABLE_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"selectable",{get:function(){return this._options.selectable},set:function(t){this._setOption("selectable",t,n.SELECTABLE_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"removable",{get:function(){var t=this._options.removable;return null==t||t},set:function(t){this._setOption("removable",t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"canRemove",{get:function(){return this.selectable&&this.removable&&!this.isMoving()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"theme",{get:function(){return this._options.theme},set:function(t){this._options.theme=t,this.fire(n.THEME_CHANGED,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"actualTheme",{get:function(){var t=this._options.theme;return t||this.defaultTheme},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"defaultTheme",{get:function(){var t=this.chart;if(!t)return null;t=t.theme.drawing;return t[this.className]||t[this.constructor.subClassName]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"createPointBehavior",{get:function(){return this._options.createPointBehavior},set:function(t){this._options.createPointBehavior=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"magnetMode",{get:function(){return this._options.magnetMode},set:function(t){this._options.magnetMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"magnetPoint",{get:function(){return this._options.magnetPoint},set:function(t){this._options.magnetPoint=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"selected",{get:function(){return this._selected},set:function(t){var e,i=this._selected;i!==(t=!!t)&&(this._selected=t,(e=this.chart)&&(t?e.selectedObject=this:this===e.selectedObject&&(e.selectedObject=null)),this._onSelectedChanged(),this.fire(n.SELECTED_CHANGED,t,i))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"canHandleEvents",{get:function(){return this.visible&&this.chart.showDrawings},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"canSelect",{get:function(){return this.selectable},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"canMove",{get:function(){return this.selectable&&!this.locked},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"canResize",{get:function(){return this.selectable&&this.resizable&&!this.locked},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pointsNeeded",{get:function(){return 1},enumerable:!0,configurable:!0}),o.prototype.pointsLocalizationKeys=function(){return null},o.prototype._onSelectedChanged=function(){},o.prototype._onChartPanelChanged=function(t){this.tooltip.applyTheme(),this.fire(n.PANEL_CHANGED,this.chartPanel,t)},o.prototype._onValueScaleChanged=function(t){this.fire(n.VALUE_SCALE_CHANGED,this.valueScale,t)},o.prototype._onVisibleChanged=function(t){this.fire(n.VISIBLE_CHANGED,this.visible,t)},o.prototype._optionValue=function(t){var e=this._options[t];return null!=e?e:this._defaults[t]},o.prototype._isLargeEnough=function(){var t=this.cartesianPoints();if(1===t.length)return!0;for(var e=1;e<t.length;e++){var i=t[e-1],o=t[e];if(Math.abs(i.x-o.x)>c.minPointsDistance||Math.abs(i.y-o.y)>c.minPointsDistance)return!0}return!1},o.prototype._initGestures=function(){this._gestures=new c.GestureArray([new c.ClickGesture({handler:this._handleClickGesture,hitTest:this._clickGestureHitTest}),new c.DoubleClickGesture({handler:this._handleDoubleClickGesture,hitTest:this.hitTest}),new c.ContextMenuGesture({handler:this._handleContextMenuGesture,hitTest:this._clickGestureHitTest}),new c.PanGesture({handler:this._handlePanGestureInternal,hitTest:this._panGestureHitTest,button:c.MouseButton.LEFT}),new c.MouseHoverGesture({handler:this._handleMouseHoverGestureInternal,enterEventEnabled:!0,hoverEventEnabled:!0,leaveEventEnabled:!0,hitTest:this.hitTest})],this)},o.prototype._handleMouseHoverGestureInternal=function(t,e){var i=this.tooltip;if(this.chart.showDrawingTooltips&&this._drawingState!==s){if(!this._handleMouseHoverGesture(t,e))switch(t.state){case c.GestureState.STARTED:case c.GestureState.CONTINUED:this.showTooltip(e.pointerPosition);break;case c.GestureState.FINISHED:this.hideTooltip()}}else i.hide()},o.prototype._handleMouseHoverGesture=function(t,e){return!1},o.prototype._clickGestureHitTest=function(t){return this.visible&&this.canSelect&&this.hitTest(t)},o.prototype._panGestureHitTest=function(t){return this.visible&&this.canMove&&this.hitTest(t)},o.prototype._handlePanGestureInternal=function(t,e){if(this._drawingState=t.state!==c.GestureState.FINISHED?s:l,this._contextMenu&&t.state===c.GestureState.CONTINUED&&this._contextMenu.hide(),this.tooltip.hide(),t.state===c.GestureState.CONTINUED&&this.magnetMode!==c.MagnetMode.NONE&&(e.pointerPosition=this._magnetizePoint(e.pointerPosition)),!this.canResize||!this._handlePanGesture(t,e))switch(t.state){case c.GestureState.STARTED:var i=this.chart.selectedObject;if(this._setDragPoint(c.DrawingDragPoint.ALL),this.changeCursor(c.DrawingCursorClass.MOVE),i!==this)return void this.setNeedsUpdateChart();break;case c.GestureState.FINISHED:this._setDragPoint(c.DrawingDragPoint.NONE);break;case c.GestureState.CONTINUED:if(this._dragPoint===c.DrawingDragPoint.ALL)if(this.magnetMode!==c.MagnetMode.NONE&&1===this.chartPoints.length){i=this._magnetizePoint(e.pointerPosition);this.chartPoints[0].moveToPoint(i,this.projection)}else for(var o=this.projection,r=t.moveOffset,n=0,a=this.chartPoints;n<a.length;n++)a[n].translate(r.x,r.y,o)}t.state===c.GestureState.FINISHED&&this.changeCursor(),this.setNeedsUpdatePanel()},o.prototype._magnetizePoint=function(t){if(this.magnetMode===c.MagnetMode.NONE)return t;var e=this.projection,i=e.recordByX(t.x);if(i<0||i>=this.chart.recordCount)return t;var o=this.chart.primaryBar(i);if(!o)return t;var r={x:e.xByRecord(i),y:0};switch(this.magnetPoint){case c.MagnetPoint.OPEN:r.y=e.yByValue(o.open);break;case c.MagnetPoint.HIGH:r.y=e.yByValue(o.high);break;case c.MagnetPoint.LOW:r.y=e.yByValue(o.low);break;case c.MagnetPoint.CLOSE:r.y=e.yByValue(o.close);break;case c.MagnetPoint.BAR:switch(this.magnetMode){case c.MagnetMode.NEAR:return(r.y=e.yByValue(o.high),this._canMagnetizeToPoint(t,r))?r:(r.y=e.yByValue(o.low),this._canMagnetizeToPoint(t,r)?r:(r.y=e.yByValue(o.open),this._canMagnetizeToPoint(t,r)?r:(r.y=e.yByValue(o.close),this._canMagnetizeToPoint(t,r)?r:t)));case c.MagnetMode.ALWAYS:var n=e.yByValue(o.high),a=e.yByValue(o.low),l=e.yByValue(o.open),s=e.yByValue(o.close),n=[{y:n,distance:Math.abs(n-t.y)},{y:a,distance:Math.abs(a-t.y)},{y:l,distance:Math.abs(l-t.y)},{y:s,distance:Math.abs(s-t.y)}],a=n.reduce(function(t,e){return e.distance<t.distance?e:t},n[0]);return r.y=a.y,r}}return this._canMagnetizeToPoint(t,r)?r:t},o.prototype._canMagnetizeToPoint=function(t,e){switch(this.magnetMode){case c.MagnetMode.NONE:return!1;case c.MagnetMode.ALWAYS:return!0;case c.MagnetMode.NEAR:var i=c.Geometry.DEVIATION,o=void 0;c.Geometry.DEVIATION=c.Geometry.MAGNET_DEVIATION;try{o=c.Geometry.isPointNearPoint(t,e)}finally{c.Geometry.DEVIATION=i}return o;default:throw new Error("Unknown magnet mode: "+this.magnetMode)}},o.prototype._handleClickGesture=function(){!this.selected&&this.canSelect&&(this.select(),this.setNeedsUpdateChart())},o.prototype._handleDoubleClickGesture=function(){this.fire(n.DOUBLE_CLICK,this),this.selectable&&this._showSettingsDialog()},o.prototype._handleContextMenuGesture=function(t,e){this.fire(n.CONTEXT_MENU,this),this.selectable&&(this.chart.localize(this._contextMenu.container),this._contextMenu.show(e.evt))},o.prototype._handleUserDrawingPoint=function(t){return!1},o.prototype._handleUserDrawingClickGesture=function(t,e){this.chartPanel||e.chartPanel.addDrawings(this);e=this._normalizeUserDrawingPoint(e.pointerPosition);if(this._lastCreatePoint=null,this._handleUserDrawingPoint(e)||this.appendChartPoint(e),this.chartPoints.length>=this.pointsNeeded){if(!this._isLargeEnough())return void this.chartPoints.pop();this._finishUserDrawing()}this.setNeedsUpdatePanel()},o.prototype._handleUserDrawingMoveGesture=function(t,e){0<this.chartPoints.length&&(this._lastCreatePoint=this._normalizeUserDrawingPoint(e.pointerPosition),this.setNeedsUpdatePanel())},o.prototype._normalizeUserDrawingPoint=function(t){return c.ChartPoint.convert(t,this.createPointBehavior,this.projection)},o.prototype._showSettingsDialog=function(){var e=this;this.chart&&c.UI.ViewLoader.drawingSettingsDialog(function(t){t.show({chart:e.chart,drawing:e})})},o.prototype.setChartPoints=function(t){if(t||(e=[]),t instanceof c.ChartPoint)e=[t];else if(Array.isArray(t))for(var e=[],i=0,o=t;i<o.length;i++){var r=o[i];e.push(new c.ChartPoint(r))}else e=[new c.ChartPoint(t)];this._setOption("points",e,n.POINTS_CHANGED)},o.prototype.setChartPointsWithNormalize=function(t){t=t.map(this._normalizeUserDrawingPoint.bind(this));this.setChartPoints(t)},o.prototype.appendChartPoint=function(t){var e=this._options.points;return e.push(new c.ChartPoint(t)),e},o.prototype.cartesianPoint=function(t){t=this.chartPoints[t];return t&&t.toPoint(this.projection)},o.prototype.cartesianPoints=function(){var e=this.projection;return this.chartPoints.map(function(t){return t.toPoint(e)})},o.prototype.select=function(){!this.selected&&this.canSelect&&this.chart.selectObject(this)},o.prototype.translate=function(t,e){for(var i=this.projection,o=0,r=this.chartPoints;o<r.length;o++)r[o].translate(t,e,i)},o.prototype.bounds=function(){return null},o.prototype.startUserDrawing=function(){this._createClickGesture=new c.ClickGesture({hitTest:function(){return!0},handler:this._handleUserDrawingClickGesture,context:this}),this._createMoveGesture=new c.MouseHoverGesture({enterEventEnabled:!1,leaveEventEnabled:!1,hitTest:function(){return!0},handler:this._handleUserDrawingMoveGesture,context:this}),this.chartPoints=[],this.selected=!0,this.remove()},o.prototype._finishUserDrawing=function(){this._createClickGesture=null,this._createMoveGesture=null,this._lastCreatePoint=null,this.tooltip.applyTheme(),this.chart._finishUserDrawing()},o.prototype.hitTest=function(t){return!1},o.prototype.handleEvent=function(t){return this._createClickGesture?this._createClickGesture.handleEvent(t)||this._createMoveGesture.handleEvent(t):this._gestures.handleEvent(t)},o.prototype._handlePanGesture=function(t,e){return!1},o.prototype._setDragPoint=function(t){this._dragPoint!==t&&(this._dragPoint=t,this._dragPoint===c.DrawingDragPoint.NONE?this.fire(n.DRAG_FINISHED):(this.fire(n.DRAG_STARTED),this.select()))},o.prototype._getSelectionMarkerWidth=function(t){return(t&&t.line&&t.line.width||1)+2},o.prototype._drawSelectionMarkers=function(t){var e;t&&((e=this.chart.selectionMarker).width=this._getSelectionMarkerWidth(this.actualTheme),e.draw(this.renderer,t))},o.prototype._drawSelectionMarkersIfSelected=function(t){this.selected&&this._drawSelectionMarkers(t)},o.prototype.saveState=function(){var t=r.prototype.saveState.call(this);return t.className=this.className,t},o.prototype.loadState=function(t){r.prototype.loadState.call(this,t=t||{});var e=t,t=t.options||{},i=this.suppressEvents(!0);this.createPointBehavior||(this.createPointBehavior=e.createPointBehavior||this._defaults.createPointBehavior||o.defaults.createPointBehavior),this.chartPoints=e.point||e.points||t&&t.points,null==t.visible&&(this.visible=null==e.visible||e.visible),null==t.selectable&&(this.selectable=null==e.selectable||e.selectable),null==t.locked&&(this.locked=null!=e.locked&&e.locked),null==t.resizable&&(this.resizable=null==e.resizable||e.resizable),null==t.theme&&(this.theme=e.theme),t.magnetMode||(this.magnetMode=e.magnetMode||c.MagnetMode.NONE),t.magnetPoint||(this.magnetPoint=e.magnetPoint||c.MagnetPoint.BAR),null==this.zIndex&&(this.zIndex=e.zIndex||this._defaults.zIndex||o.defaults.zIndex),this.suppressEvents(i)},o.prototype.drawValueMarkers=function(){},o.prototype.drawDateMarkers=function(){},o.prototype.clone=function(){var t=o.deserialize(this.saveState());return t.chartPanel=this.chartPanel,t},o.prototype.remove=function(){var t=this.chartPanel;return!!t&&(t.forceRemoveDrawings(this),this.setNeedsUpdatePanel(),!(this.chartPanel=null))},o.prototype.setNeedsUpdateChart=function(){var t=this.chart;t&&t.setNeedsUpdate()},o.prototype.setNeedsUpdatePanel=function(){var t=this.chartPanel;t&&t.setNeedsUpdate()},o.prototype.isMoving=function(){return this._drawingState===s},o.prototype.destroy=function(){this.chart.rootDiv.removeClass(c.DrawingCursorClass.MOVE),r.prototype.destroy.call(this)},o.defaults={createPointBehavior:{x:c.XPointBehavior.DATE,y:c.YPointBehavior.VALUE},zIndex:2e3};var r,i=o;function o(t){var o=r.call(this,t)||this;return o._drawingState=l,o._selected=!1,o._dragPoint=c.DrawingDragPoint.NONE,o.loadState(t),o._initGestures(),o._contextMenu=new c.UI.DrawingContextMenu({drawing:o,onShow:function(){o.select()},onItemSelected:function(t,e){var i=t.data("id");if(o.chart)switch(i){case c.UI.DrawingContextMenu.MenuItem.SETTINGS:o._showSettingsDialog();break;case c.UI.DrawingContextMenu.MenuItem.CLONE:o.chart._copyDrawing(),o.chart._pasteDrawing();break;case c.UI.DrawingContextMenu.MenuItem.DELETE:o.canRemove&&o.remove();break;default:throw new Error("Unknown menu item "+i)}}}),o}c.Drawing=i,c.JsUtil.applyMixins(i,[t])}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(i){"use strict";var e,o=i.DrawingEvent||(i.DrawingEvent={}),t=(o.DOT_RADIUS_CHANGED="drawingDotRadiusChanged",e=i.Drawing,__extends(r,e),Object.defineProperty(r,"className",{get:function(){return"dot"},enumerable:!0,configurable:!0}),Object.defineProperty(r,"subClassName",{get:function(){return"abstractMarker"},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"radius",{get:function(){return this._options.radius||this._defaults.radius||r.defaults.radius},set:function(t){if(i.JsUtil.isNegativeNumber(t))throw new TypeError("Radius must be a positive number.");this._setOption("radius",t,o.DOT_RADIUS_CHANGED)},enumerable:!0,configurable:!0}),r.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start"]},r.prototype.bounds=function(){var t=this.cartesianPoint(0);if(!t)return null;var e=this.radius;return{left:t.x-e,top:t.y-e,width:2*e,height:2*e}},r.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoint(0);return!!e&&i.Geometry.isPointInsideOrNearCircle(t,e,this.radius)},r.prototype.draw=function(){var t,e,i;!this.visible||(t=this.cartesianPoint(0))&&(e=this.renderer,i=this.actualTheme,e.circlePath(t.x,t.y,this.radius),e.fillStroke(i.fill,i.stroke),this._drawSelectionMarkersIfSelected(t))},r.defaults={radius:5},r);function r(t){return e.call(this,t)||this}i.DotDrawing=t,i.Drawing.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(h){"use strict";e=h.Drawing,__extends(i,e),Object.defineProperty(i,"className",{get:function(){return"note"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"label",{get:function(){return this._options.label||this._defaults.label||""},set:function(t){0!==t.length&&(this._options.label=t[0])},enumerable:!0,configurable:!0}),i.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start"]},i.prototype.bounds=function(){var t=this.cartesianPoint(0);if(!t)return null;var e=this._radius;return{left:t.x-e,top:t.y-2.7*e,width:2*e,height:2*e+7}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoint(0);return!!e&&(h.Geometry.isPointInsideOrNearCircle(t,{x:e.x,y:e.y-20},this._radius)||h.Geometry.isPointNearPoint(t,e))},i.prototype.draw=function(){var t,e,i,o,r,n,a,l,s,c;!this.visible||(t=this.cartesianPoint(0))&&(e=this.actualTheme,s=h.DummyCanvasContext.textWidth(this.label,e.text),i=this._radius=12+s/3,o=this.renderer,r=t.x,a=t.y-(n=18+s),l=6+s/9,s=12+s,o.linePath(r-(c=i/2),a,r+c,a),o.circle(r,a,i),o.moveTo(r+c+l,2+a),o.bezierCurve(r+c+l,a,r+10,a+s,r,a+n),o.bezierCurve(r,a+n,r-10,a+s,r-c-l,a),o.fillStroke(e.fill,e.stroke),o.linePath(r-(i-1.5),a,r+(i-1.5),a),o.circle(r,a,i-3),o.fillStroke(e.centerPointFill,e.stroke),o.textOptions({align:h.TextAlign.CENTER,baseline:h.TextBaseline.MIDDLE}),o.fillText(this.label,r,a,e.text),this._drawSelectionMarkersIfSelected(t))},i.defaults={label:"N"};var e,t=i;function i(t){t=e.call(this,t)||this;return t._radius=12,t}h.NoteDrawing=t,h.Drawing.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(i){"use strict";var e,o=i.DrawingEvent||(i.DrawingEvent={}),t=(o.SIZE_CHANGED="drawingSizeChanged",e=i.Drawing,__extends(r,e),Object.defineProperty(r,"subClassName",{get:function(){return"abstractMarker"},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"size",{get:function(){return this._options.size||this._defaults.size||r.defaults.size},set:function(t){this._setOption("size",t,o.SIZE_CHANGED)},enumerable:!0,configurable:!0}),r.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start"]},r.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.bounds();return e&&i.Geometry.isPointInsideOrNearRect(t,e)},r.defaults={size:{width:14,height:14}},r);function r(t){return e.call(this,t)||this}i.GeometricMarkerDrawingBase=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(o){"use strict";t=o.GeometricMarkerDrawingBase,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"square"},enumerable:!0,configurable:!0}),i.prototype.bounds=function(){var t=this.cartesianPoint(0),e=this.size;return t?{left:Math.round(t.x-e.width/2),top:Math.round(t.y-e.height/2),width:e.width,height:e.height}:null},i.prototype.draw=function(){var t,e,i;!this.visible||(t=this.bounds())&&(e=this.renderer,i=this.actualTheme,e.rectPath(t.left+o.CanvasOffset,t.top+o.CanvasOffset,t.width,t.height),e.fillStroke(i.fill,i.stroke),this._drawSelectionMarkersIfSelected(this.cartesianPoint(0)))},i.defaults={size:{width:10,height:10}};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}o.SquareDrawing=e,o.Drawing.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";e=t.GeometricMarkerDrawingBase,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"diamond"},enumerable:!0,configurable:!0}),o.prototype.bounds=function(){var t=this.cartesianPoint(0);if(!t)return null;var e=this.size;return{left:Math.round(t.x-e.width/2),top:Math.round(t.y-e.height/2),width:e.width,height:e.height}},o.prototype.draw=function(){var t,e,i,o;!this.visible||(t=this.cartesianPoint(0))&&(e=this.renderer,i=this.size,o=Math.round(i.width/2),i=Math.round(i.height/2),e.polygonPath(t.x-o,t.y,t.x,t.y-i,t.x+o,t.y,t.x,t.y+i),o=this.actualTheme,e.fillStroke(o.fill,o.stroke),this._drawSelectionMarkersIfSelected(t))},o.defaults={size:{width:10,height:10}};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.DiamondDrawing=i,t.Drawing.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(l){"use strict";(t=e=l.DrawingEvent||(l.DrawingEvent={})).ARROW_HEAD_RATIO_CHANGED="drawingArrowHeadRatioChanged",t.ARROW_TAIL_RATIO_CHANGED="drawingArrowTailRatioChanged",i=l.GeometricMarkerDrawingBase,__extends(o,i),Object.defineProperty(o.prototype,"headRatio",{get:function(){return this._options.headRatio||this._defaults.headRatio||o.defaults.headRatio},set:function(t){if(!l.JsUtil.isPositiveNumber(t)||1<=t)throw new Error("Value must be in range (0..1).");this._setOption("headRatio",t,e.ARROW_HEAD_RATIO_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tailRatio",{get:function(){return this._options.tailRatio||this._defaults.tailRatio||o.defaults.tailRatio},set:function(t){if(!l.JsUtil.isPositiveNumber(t)||1<=t)throw new Error("Value must be in range (0..1).");this._setOption("tailRatio",t,e.ARROW_TAIL_RATIO_CHANGED)},enumerable:!0,configurable:!0}),o.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start"]},o.prototype.draw=function(){var t,e,i,o,r,n,a;!this.visible||(t=this.cartesianPoint(0))&&(e=this.renderer,i=this.actualTheme,r=(o=this.size).width/2,n=o.width*this.tailRatio/2,a=o.height*this.headRatio,e.save(),e.translate(t.x,t.y),e.rotate(this._angle*Math.PI/180),e.polygonPath(0,0,-r,-a+l.CanvasOffset,-n,-a+l.CanvasOffset,-n,-o.height+l.CanvasOffset,n,-o.height+l.CanvasOffset,n,-a+l.CanvasOffset,r,-a+l.CanvasOffset),e.fillStroke(i.fill,i.stroke),this.selected&&this._drawSelectionMarkers({x:0,y:0}),e.restore())},o.defaults={size:null,headRatio:.5,tailRatio:.5};var e,i,t=o;function o(t){t=i.call(this,t)||this;return t._angle=0,t}l.ArrowDrawingBase=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";e=t.ArrowDrawingBase,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"arrowUp"},enumerable:!0,configurable:!0}),o.prototype.bounds=function(){var t=this.cartesianPoint(0);if(!t)return null;var e=this.size;return{left:Math.round(t.x-e.width/2),top:t.y,width:e.width,height:e.height}};var e,i=o;function o(t){t=e.call(this,t)||this;return t._angle=180,t}t.ArrowUpDrawing=i,t.Drawing.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";e=t.ArrowDrawingBase,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"arrowDown"},enumerable:!0,configurable:!0}),o.prototype.bounds=function(){var t=this.cartesianPoint(0);if(!t)return null;var e=this.size;return{left:Math.round(t.x-e.width/2),top:Math.round(t.y-e.height),width:e.width,height:e.height}};var e,i=o;function o(){return null!==e&&e.apply(this,arguments)||this}t.ArrowDownDrawing=i,t.Drawing.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";e=t.ArrowDrawingBase,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"arrowLeft"},enumerable:!0,configurable:!0}),o.prototype.bounds=function(){var t=this.cartesianPoint(0);if(!t)return null;var e=this.size;return{left:t.x,top:Math.round(t.y-e.height/2),width:e.width,height:e.height}};var e,i=o;function o(t){t=e.call(this,t)||this;return t._angle=90,t}t.ArrowLeftDrawing=i,t.Drawing.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(t){"use strict";e=t.ArrowDrawingBase,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"arrowRight"},enumerable:!0,configurable:!0}),o.prototype.bounds=function(){var t=this.cartesianPoint(0);if(!t)return null;var e=this.size;return{left:t.x-e.width,top:Math.round(t.y-e.height/2),width:e.width,height:e.height}};var e,i=o;function o(t){t=e.call(this,t)||this;return t._angle=-90,t}t.ArrowRightDrawing=i,t.Drawing.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(f){"use strict";t=f.ArrowDrawingBase,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"arrow"},enumerable:!0,configurable:!0}),i.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.end"]},i.prototype.bounds=function(){var t=this.cartesianPoints();if(t.length<this.pointsNeeded)return null;var e=f.Geometry.length(t[0],t[1]);return{left:t[0].x-e,top:t[0].y-e,width:2*e,height:2*e}},Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();return 1<e.length&&f.Geometry.isPointNearPolyline(t,e)},i.prototype._handlePanGesture=function(t,e){switch(t.state){case f.GestureState.STARTED:if(f.Geometry.isPointNearPoint(this.cartesianPoint(0),e.pointerPosition))this._setDragPoint(0);else{if(!f.Geometry.isPointNearPoint(this.cartesianPoint(1),e.pointerPosition))return!1;this._setDragPoint(1)}return this.changeCursor(f.DrawingCursorClass.RESIZE),!0;case f.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype.draw=function(){var t,e,i,o,r,n,a,l,s,c,h,u;!this.visible||2===(t=this.cartesianPoints()).length&&(e=t[0].x,i=t[0].y,o=t[1].x,r=t[1].y,n=Math.sqrt((o-e)*(o-e)+(r-i)*(r-i)),a=Math.sqrt((e-e)*(e-e)+(r-i)*(r-i)),n=Math.acos(((o-e)*(e-e)+(r-i)*(r-i))/(n*a)),a=this.renderer,l=this.actualTheme,s=f.Geometry.length({x:e,y:i},{x:o,y:r}),c=50*this.tailRatio/2,h=s*this.headRatio,a.save(),a.translate(e,i),o<=e&&r<=i?u=i===r?-Math.PI/2:-n:e<=o&&r<=i?u=r===i?Math.PI/2:n:e<=o&&i<=r?u=o===e?2*Math.PI:Math.PI-n:o<=e&&i<=r&&(u=Math.PI+n),u&&a.rotate(u),a.polygonPath(0,0,0,-s,-25,-h,-c,-h,-c,f.CanvasOffset,c,f.CanvasOffset,c,-h,25,-h,0,-s),a.fillStroke(l.fill,l.stroke),a.restore(),this._drawSelectionMarkersIfSelected(t))};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}f.Arrow=e,f.Drawing.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(i){"use strict";t=i.Drawing,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"lineSegment"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),o.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.end"]},o.prototype.bounds=function(){var t=this.cartesianPoints();return t.length<this.pointsNeeded?null:{left:Math.min(t[0].x,t[1].x),top:Math.min(t[0].y,t[1].y),width:Math.abs(t[0].x-t[1].x),height:Math.abs(t[0].y-t[1].y)}},o.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();return 1<e.length&&i.Geometry.isPointNearPolyline(t,e)},o.prototype._handlePanGesture=function(t,e){switch(t.state){case i.GestureState.STARTED:if(i.Geometry.isPointNearPoint(this.cartesianPoint(0),e.pointerPosition))this._setDragPoint(0);else{if(!i.Geometry.isPointNearPoint(this.cartesianPoint(1),e.pointerPosition))return!1;this._setDragPoint(1)}return this.changeCursor(i.DrawingCursorClass.RESIZE),!0;case i.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},o.prototype.draw=function(){var t,e;this.visible&&(1<(t=this.cartesianPoints()).length&&((e=this.renderer).polylinePath(t),e.stroke(this.actualTheme.line)),this._drawSelectionMarkersIfSelected(t))};var t,e=o;function o(){return null!==t&&t.apply(this,arguments)||this}i.LineSegmentDrawing=e,i.Drawing.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(l){"use strict";t=l.Drawing,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"rectangle"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),i.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.end"]},i.prototype.bounds=function(){var t=this.cartesianPoints();return t.length<this.pointsNeeded?null:{left:Math.min(t[0].x,t[1].x),top:Math.min(t[0].y,t[1].y),width:Math.abs(t[0].x-t[1].x),height:Math.abs(t[0].y-t[1].y)}},i.prototype._markerPoints=function(t){if(!(t=t||this.bounds()))return(e=this.cartesianPoint(0))&&[e];var e=Math.round(t.left+t.width/2),i=Math.round(t.top+t.height/2),o=t.left+t.width,r=t.top+t.height;return[{x:t.left,y:t.top},{x:e,y:t.top},{x:o,y:t.top},{x:o,y:i},{x:o,y:r},{x:e,y:r},{x:t.left,y:r},{x:t.left,y:i}]},i.prototype._normalizePoints=function(){var t,e,i=this.bounds();i&&(t=this.projection,(e=this.chartPoints)[0].moveTo(i.left,i.top,t),e[1].moveTo(i.left+i.width,i.top+i.height,t))},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();return 1<e.length&&l.Geometry.isPointNearRectPoints(t,e[0],e[1])},i.prototype._handlePanGesture=function(t,e){switch(t.state){case l.GestureState.STARTED:this._normalizePoints();var i=this._markerPoints();if(i&&1<i.length)for(var o=0;o<i.length;o++)if(l.Geometry.isPointNearPoint(e.pointerPosition,i[o]))return this._setDragPoint(o),this._updateCursor(),!0;break;case l.GestureState.CONTINUED:if(this._dragPoint<0)break;var r=this.projection,n=this.chartPoints,a=e.pointerPosition;switch(this._dragPoint){case 0:n[0].moveTo(a.x,a.y,r);break;case 1:n[0].moveToY(a.y,r);break;case 2:n[0].moveToY(a.y,r),n[1].moveToX(a.x,r);break;case 3:n[1].moveToX(a.x,r);break;case 4:n[1].moveTo(a.x,a.y,r);break;case 5:n[1].moveToY(a.y,r);break;case 6:n[0].moveToX(a.x,r),n[1].moveToY(a.y,r);break;case 7:n[0].moveToX(a.x,r)}return!0}return!1},i.prototype._updateCursor=function(){var t;switch(this._dragPoint){case 0:case 4:t=l.DrawingCursorClass.RESIZE_NWSE;break;case 1:case 5:t=l.DrawingCursorClass.RESIZE_NS;break;case 2:case 6:t=l.DrawingCursorClass.RESIZE_NESW;break;case 3:case 7:t=l.DrawingCursorClass.RESIZE_EW}t&&this.changeCursor(t)},i.prototype.draw=function(){var t,e,i;this.visible&&((t=this.bounds())&&(i=this.renderer,e=this.actualTheme,i.rectPath(t.left+l.CanvasOffset,t.top+l.CanvasOffset,t.width,t.height),i.fillStroke(e.fill,e.line)),this.selected&&(i=this._markerPoints(t),this._drawSelectionMarkers(i)))};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}l.RectangleDrawing=e,l.Drawing.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(r){"use strict";t=r.Drawing,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"triangle"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 3},enumerable:!0,configurable:!0}),i.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.middle","drawing.all.dialog.end"]},i.prototype.bounds=function(){var t=this.cartesianPoints();if(t.length<this.pointsNeeded)return null;var e=Math.min(t[0].x,t[1].x,t[2].x),i=Math.min(t[0].y,t[1].y,t[2].y);return{left:e,top:i,width:Math.max(t[0].x,t[1].x,t[2].x)-e,height:Math.max(t[0].y,t[1].y,t[2].y)-i}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();return 1<e.length&&r.Geometry.isPointNearPolygon(t,e)},i.prototype._handlePanGesture=function(t,e){switch(t.state){case r.GestureState.STARTED:for(var i=this.cartesianPoints(),o=0;o<i.length;o++)if(r.Geometry.isPointNearPoint(e.pointerPosition,i[o]))return this._setDragPoint(o),this.changeCursor(r.DrawingCursorClass.RESIZE),!0;break;case r.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype.draw=function(){var t,e,i;this.visible&&(1<(t=this.cartesianPoints()).length&&(e=this.renderer,i=this.actualTheme,e.polygonPath.apply(e,t),e.fillStroke(i.fill,i.line)),this._drawSelectionMarkersIfSelected(t))};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}r.TriangleDrawing=e,r.Drawing.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(r){"use strict";t=r.Drawing,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"circle"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),i.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.end"]},i.prototype.bounds=function(){var t=this.cartesianPoints();if(t.length<this.pointsNeeded)return null;var e=r.Geometry.length(t[0],t[1]);return{left:t[0].x-e,top:t[0].y-e,width:2*e,height:2*e}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();return 1<e.length&&r.Geometry.isPointNearCircle(t,e[0],e[1])},i.prototype._handlePanGesture=function(t,e){switch(t.state){case r.GestureState.STARTED:var i=this._markerPoints();if(i&&1<i.length)for(var o=0;o<i.length;o++)if(r.Geometry.isPointNearPoint(e.pointerPosition,i[o]))return this._setDragPoint(o),this._updateCursor(),!0;break;case r.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[1].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype._updateCursor=function(){var t;switch(this._dragPoint){case 0:case 2:t=r.DrawingCursorClass.RESIZE_EW;break;case 1:case 3:t=r.DrawingCursorClass.RESIZE_NS}t&&this.changeCursor(t)},i.prototype.draw=function(){var t,e,i,o;!this.visible||0!==(t=this.cartesianPoints()).length&&(1<t.length&&(e=this.renderer,i=this.actualTheme,o=r.Geometry.length(t[0],t[1]),e.circlePath(t[0].x,t[0].y,o),e.fillStroke(i.fill,i.line)),this.selected&&(o=this._markerPoints(t),this._drawSelectionMarkers(o)))},i.prototype._markerPoints=function(t){if(0===(t=t||this.cartesianPoints()).length)return null;var e=t[0];if(1===t.length)return[{x:e.x,y:e.y}];t=r.Geometry.length(t[0],t[1]);return[{x:e.x-t,y:e.y},{x:e.x,y:e.y-t},{x:e.x+t,y:e.y},{x:e.x,y:e.y+t}]};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}r.CircleDrawing=e,r.Drawing.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(n){"use strict";t=n.Drawing,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"ellipse"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),i.prototype._markerPoints=function(t){if(0===(t=t||this.cartesianPoints()).length)return null;var e=t[0];if(1===t.length)return[{x:e.x,y:e.y}];var i=n.Geometry.xProjectionLength(t[0],t[1]),t=n.Geometry.yProjectionLength(t[0],t[1]);return[{x:e.x-i,y:e.y},{x:e.x,y:e.y-t},{x:e.x+i,y:e.y},{x:e.x,y:e.y+t}]},i.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.end"]},i.prototype.bounds=function(){var t=this.cartesianPoints();if(t.length<this.pointsNeeded)return null;var e=n.Geometry.xProjectionLength(t[0],t[1]),i=n.Geometry.yProjectionLength(t[0],t[1]);return{left:t[0].x-e,top:t[0].y-i,width:2*e,height:2*i}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();return 1<e.length&&n.Geometry.isPointNearEllipse(t,e[0],e[1])},i.prototype._handlePanGesture=function(t,e){switch(t.state){case n.GestureState.STARTED:var i=this._markerPoints();if(i&&1<i.length)for(var o=0;o<i.length;o++)if(n.Geometry.isPointNearPoint(e.pointerPosition,i[o]))return this._setDragPoint(o),this._updateCursor(),!0;break;case n.GestureState.CONTINUED:if(0<=this._dragPoint){switch(this._dragPoint){case 0:case 2:this.chartPoints[1].moveToX(e.pointerPosition.x,this.projection);break;case 1:case 3:this.chartPoints[1].moveToY(e.pointerPosition.y,this.projection)}return!0}}return!1},i.prototype._updateCursor=function(){var t;switch(this._dragPoint){case 0:case 2:t=n.DrawingCursorClass.RESIZE_EW;break;case 1:case 3:t=n.DrawingCursorClass.RESIZE_NS}t&&this.changeCursor(t)},i.prototype.draw=function(){var t,e,i,o,r;!this.visible||0!==(t=this.cartesianPoints()).length&&(1<t.length&&(e=this.renderer,i=this.actualTheme,r=n.Geometry.xProjectionLength(t[0],t[1]),o=n.Geometry.yProjectionLength(t[0],t[1]),e.ellipsePath(t[0].x,t[0].y,r,o),e.fillStroke(i.fill,i.line)),this.selected&&(r=this._markerPoints(t),this._drawSelectionMarkers(r)))};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}n.EllipseDrawing=e,n.Drawing.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(r){"use strict";t=r.Drawing,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"horizontalLine"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showValueMarker",{get:function(){var t=this._options.showValueMarker;return null!=t?t:i.defaults.showValueMarker},set:function(t){this._options.showValueMarker=!!t},enumerable:!0,configurable:!0}),i.prototype.bounds=function(){var t=this.cartesianPoint(0);if(!t)return null;var e=this.chartPanel.contentFrame;return{left:e.left,top:t.y,width:e.width,height:1}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoint(0);return t&&r.Geometry.isValueNearValue(t.y,e.y)},i.prototype.draw=function(){var t,e,i;!this.visible||(t=this.cartesianPoint(0))&&(i=this.renderer,e=this.chartPanel.contentFrame,i.linePath(e.left,t.y,e.right,t.y),i.stroke(this.actualTheme.line),this.selected&&(i=Math.round(e.left+e.width/2),this._drawSelectionMarkers({x:i,y:t.y})))},i.prototype.drawValueMarkers=function(){var t,e,i,o;!this.showValueMarker||(o=this.chartPoints[0])&&(t=this.chart.valueMarker,e=this.actualTheme.line.strokeColor,i=this.panelValueScale,o=o.getValue(i.projection),t.theme.fill.fillColor=e,t.theme.text.fillColor=r.HtmlUtil.isDarkColor(e)?"white":"black",t.draw(o,i))},i.defaults={showValueMarker:!0};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}r.HorizontalLineDrawing=e,r.Drawing.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(r){"use strict";t=r.Drawing,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"verticalLine"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showDateMarker",{get:function(){var t=this._options.showDateMarker;return null!=t?t:i.defaults.showDateMarker},set:function(t){this._options.showDateMarker=!!t},enumerable:!0,configurable:!0}),i.prototype.bounds=function(){var t=this.cartesianPoint(0);if(!t)return null;var e=this.chartPanel.contentFrame;return{left:t.x,top:e.top,width:1,height:e.height}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoint(0);return t&&r.Geometry.isValueNearValue(t.x,e.x)},i.prototype._handlePanGesture=function(t,e){return this.showDateMarker&&this.chart.dateScale.setNeedsUpdate(),!1},i.prototype.draw=function(){var t,e,i;!this.visible||(t=this.cartesianPoint(0))&&(i=this.renderer,e=this.chartPanel.contentFrame,i.linePath(t.x,0,t.x,e.bottom-e.top),i.stroke(this.actualTheme.line),this.selected&&(i=Math.round(e.height/2),this._drawSelectionMarkers({x:t.x,y:i})))},i.prototype.drawDateMarkers=function(){var t,e,i,o;!this.showDateMarker||(e=this.chartPoints[0])&&(t=this.chart.dateMarker,e=e.getDate(this.projection),i=this.actualTheme.line.strokeColor,o=this.chart.dateScale,t.theme.fill.fillColor=i,t.theme.text.fillColor=r.HtmlUtil.isDarkColor(i)?"white":"black",t.theme.stroke.strokeColor=r.HtmlUtil.isDarkColor(i)?r.HtmlUtil.lighten(i,.5):r.HtmlUtil.lighten(i,-.5),t.draw(e,o))},i.defaults={showDateMarker:!0};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}r.VerticalLineDrawing=e,r.Drawing.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(r){"use strict";e=r.Drawing,__extends(i,e),Object.defineProperty(i,"className",{get:function(){return"polygon"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return this._pointsNeeded},enumerable:!0,configurable:!0}),i.prototype.bounds=function(){var t=this.cartesianPoints();if(t.length<2)return null;var e=Math.max.apply(Math,t.map(function(t){return t.x})),i=Math.min.apply(Math,t.map(function(t){return t.x})),o=Math.max.apply(Math,t.map(function(t){return t.y})),t=Math.min.apply(Math,t.map(function(t){return t.y}));return{left:i,top:t,width:Math.abs(e-i),height:Math.abs(o-t)}},i.prototype.hitTest=function(t){return!!this.canHandleEvents&&r.Geometry.isPointNearPolygon(t,this.cartesianPoints())},i.prototype._handleUserDrawingPoint=function(t){var e=this.chartPoints.length;if(1<e){var e=this.cartesianPoint(e-1),i=new r.ChartPoint(t).toPoint(this.projection);if(r.Geometry.isPointNearPoint(i,e))return this._finishUserDrawing(),!0}return this.appendChartPoint(t),!0},i.prototype._handlePanGesture=function(t,e){switch(t.state){case r.GestureState.STARTED:for(var i=this.cartesianPoints(),o=0;o<i.length;o++)if(r.Geometry.isPointNearPoint(e.pointerPosition,i[o]))return this._setDragPoint(o),this.changeCursor(r.DrawingCursorClass.RESIZE),!0;break;case r.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype.draw=function(){var t,e,i;this.visible&&(t=this.cartesianPoints(),e=this.renderer,i=this.actualTheme,1<t.length&&(e.polygonPath.apply(e,t),e.fillStroke(i.fill,i.line)),this._drawSelectionMarkersIfSelected(t))};var e,t=i;function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._pointsNeeded=Number.MAX_VALUE,t}r.PolygonDrawing=t,r.Drawing.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(r){"use strict";t=r.Drawing,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"polyline"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return Number.MAX_VALUE},enumerable:!0,configurable:!0}),i.prototype.bounds=function(){var t=this.cartesianPoints();if(t.length<2)return null;var e=Math.max.apply(Math,t.map(function(t){return t.x})),i=Math.min.apply(Math,t.map(function(t){return t.x})),o=Math.max.apply(Math,t.map(function(t){return t.y})),t=Math.min.apply(Math,t.map(function(t){return t.y}));return{left:i,top:t,width:Math.abs(e-i),height:Math.abs(o-t)}},i.prototype.hitTest=function(t){return!!this.canHandleEvents&&r.Geometry.isPointNearPolyline(t,this.cartesianPoints())},i.prototype._handleUserDrawingPoint=function(t){var e=this.chartPoints.length;if(1<e){var e=this.cartesianPoint(e-1),i=new r.ChartPoint(t).toPoint(this.projection);if(r.Geometry.isPointNearPoint(i,e))return this._finishUserDrawing(),!0}return this.appendChartPoint(t),!0},i.prototype._handlePanGesture=function(t,e){switch(t.state){case r.GestureState.STARTED:for(var i=this.cartesianPoints(),o=0;o<i.length;o++)if(r.Geometry.isPointNearPoint(e.pointerPosition,i[o]))return this._setDragPoint(o),this.changeCursor(r.DrawingCursorClass.RESIZE),!0;break;case r.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype.draw=function(){if(this.visible){var t=this.cartesianPoints(),e=this.renderer,i=this.actualTheme;if(1<t.length){e.beginPath(),e.moveTo(t[0].x,t[0].y);for(var o=1;o<t.length;o++)e.lineTo(t[o].x,t[o].y);e.stroke(i.line)}this._drawSelectionMarkersIfSelected(t)}};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}r.PolylineDrawing=e,r.Drawing.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(e){"use strict";i=e.Drawing,__extends(o,i),Object.defineProperty(o,"className",{get:function(){return"freeHand"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pointsNeeded",{get:function(){return Number.MAX_VALUE},enumerable:!0,configurable:!0}),o.prototype._handleUserDrawingPoint=function(t){return this._drawingPoints++,this.appendChartPoint(t),2<=this._drawingPoints&&this._finishUserDrawing(),!0},o.prototype._handleUserDrawingMoveGesture=function(t,e){var i,o=this.chartPoints.length;0<o&&(e=e.pointerPosition,i=this._normalizeUserDrawingPoint(e),o=this.chartPoints[o-1],Math.round(i.value)===Math.round(o.value)&&e.x===o.x||(this.appendChartPoint(i),this.chartPanel.setNeedsUpdate()))},o.prototype.bounds=function(){var t=this.cartesianPoints();if(t.length<2)return null;var e=t.reduce(function(t,e){return Math.max(t,e.x)},-1/0),i=t.reduce(function(t,e){return Math.min(t,e.x)},1/0),o=t.reduce(function(t,e){return Math.max(t,e.y)},-1/0),t=t.reduce(function(t,e){return Math.min(t,e.y)},1/0);return{left:i,top:t,width:Math.abs(e-i),height:Math.abs(o-t)}},o.prototype.hitTest=function(t){return!!this.canHandleEvents&&e.Geometry.isPointNearPolyline(t,this.cartesianPoints())},o.prototype.draw=function(){if(this.visible){var t=this.cartesianPoints();if(0!==t.length){var e=this.renderer,i=this.actualTheme;if(1<t.length){e.beginPath(),e.moveTo(t[0].x,t[0].y);for(var o=1;o<t.length;o++)e.lineTo(t[o].x,t[o].y);e.stroke(i.line)}this.selected&&this._drawSelectionMarkers([t[0],t[t.length-1]])}}};var i,t=o;function o(){var t=null!==i&&i.apply(this,arguments)||this;return t._drawingPoints=0,t}e.FreeHandDrawing=t,e.Drawing.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(r){"use strict";e=r.Drawing,__extends(i,e),Object.defineProperty(i,"className",{get:function(){return"cyclicLines"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),i.prototype.pointsLocalizationKeys=function(){return["drawingSettingDialog.start","drawingSettingDialog.end"]},i.prototype.bounds=function(){if(this.cartesianPoints().length<this.pointsNeeded||this._drawingPoints)return null;var t=this.chartPanel.contentFrame,e=this._drawingPoints,i=e[1],e=e[e.length-1];return{left:Math.min(i[0].x,e[0].x),top:0,width:Math.abs(i[0].x-e[0].x),height:t.height}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;if(this.chartPoints.length<2)return!1;for(var e=0,i=this._drawingPoints;e<i.length;e++){var o=i[e];if(r.Geometry.isPointNearLine(t,o[0],o[1]))return!0}return!1},i.prototype._handlePanGesture=function(t,e){switch(t.state){case r.GestureState.STARTED:if(r.Geometry.isPointNearPoint(this.cartesianPoint(0),e.pointerPosition))this._setDragPoint(0);else{if(!r.Geometry.isPointNearPoint(this.cartesianPoint(1),e.pointerPosition))return!1;this._setDragPoint(1)}return this.changeCursor(r.DrawingCursorClass.RESIZE),!0;case r.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype.draw=function(){if(this.visible){var t=this.cartesianPoints();if(0!==t.length){if(this._drawingPoints=[t],1<t.length){for(var e=this.renderer,i=this.chartPanel.contentFrame,o=this._calculateXPointsForLines(),r={min:0,max:i.height},n=0,a=o;n<a.length;n++){var l=a[n],s={x:l,y:r.min},l={x:l,y:r.max};e.linePath(s.x,s.y,l.x,l.y),e.stroke(this.actualTheme.line),this._drawingPoints.push([s,l])}e.polylinePath(t),e.stroke(this.actualTheme.line)}this._drawSelectionMarkersIfSelected(t)}}},i.prototype._calculateXPointsForLines=function(){for(var t=this.chartPanel.contentFrame.width,e=this.cartesianPoints(),i=e[0].x,o=e[1].x,r=[i,o],n=(i===o?o=this._isDirectionRight?o+1:o-1:this._isDirectionRight=i<o,o-i),a=o;;){var l=a+n;if(!(i<o&&l<t||o<i&&0<l))break;r.push(a=l)}return r};var e,t=i;function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._drawingPoints=[],t}r.CyclicLinesDrawing=t,r.Drawing.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(f){"use strict";var e,i=f.DrawingEvent||(f.DrawingEvent={}),t=(i.TEXT_CHANGED="drawingTextChanged",e=f.Drawing,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"text"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"text",{get:function(){return this._options.text||""},set:function(t){this._setOption("text",t=t||"",i.TEXT_CHANGED),this._updateLines()},enumerable:!0,configurable:!0}),o.prototype._updateLines=function(){this._lines=this.text.split("\n")},o.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start"]},o.prototype.bounds=function(){var t=this.cartesianPoint(0);if(!t)return null;var e=this._lines.reduce(function(t,e){return t.length>=e.length?t:e}),i=this.actualTheme,e=f.DummyCanvasContext.measureText(e,i.text);return{left:t.x,top:t.y-e.height/2,width:e.width,height:e.height*this._lines.length+this._lines.length}},o.prototype._finishUserDrawing=function(){var e=this;f.Drawing.prototype._finishUserDrawing.call(this),f.UI.ViewLoader.drawingSettingsDialog(function(t){t.show({chart:e.chart,drawing:e,cancel:function(){e.chartPanel.removeDrawings(e)},always:function(){e.chartPanel&&e.chartPanel.setNeedsUpdate()}})})},o.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.bounds();return e&&f.Geometry.isPointInsideOrNearRect(t,e)},o.prototype.loadState=function(t){e.prototype.loadState.call(this,t),this._updateLines()},o.prototype.draw=function(){if(this.visible){var t=this._lines;if(0!==t.length){var e=this.cartesianPoint(0);if(e){var i=this.renderer,o=this.actualTheme.text,r=(i.textTheme(o),i.textOptions({baseline:f.TextBaseline.MIDDLE,align:f.TextAlign.LEFT}),this.bounds()),n=f.DummyCanvasContext.measureText(t[0],o).height,a=Math.round(n/2),l=e.y,s="underline"===o.decoration;s&&i.beginPath();for(var c=0,h=t;c<h.length;c++){var u=h[c];i.fillText(u,e.x,l),l+=a,s&&i.line(e.x,l,e.x+r.width,l),l+=a}s&&i.stroke({strokeColor:o.fillColor}),this.selected&&(l=(e.y+(e.y+r.height-n))/2,t=[{x:e.x-5,y:l},{x:e.x+r.width+5,y:l}],this._drawSelectionMarkers(t))}}}},o);function o(t){t=e.call(this,t)||this;return t._lines=[],t._updateLines(),t}f.TextDrawing=t,f.Drawing.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(d){"use strict";var e=d.DrawingEvent||(d.DrawingEvent={});e.URL_CHANGED="drawingUrlChanged";var i,l=10,s=10,t=(i=d.Drawing,__extends(o,i),Object.defineProperty(o,"className",{get:function(){return"image"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"url",{get:function(){return this._options.url||""},set:function(t){this._setOption("url",t,e.URL_CHANGED),this._reloadImage()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"size",{get:function(){return this._options.size},set:function(t){this._setOption("size",t,e.SIZE_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"actualSize",{get:function(){var t=this.size;if(t)return t;t=this._image;return t?{width:t.width,height:t.height}:null},enumerable:!0,configurable:!0}),o.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start"]},o.prototype._reloadImage=function(){this._image&&(this._image.src=this.url,this._image.crossOrigin="Anonymous")},o.prototype.bounds=function(){var t=this.cartesianPoint(0);if(!t)return null;var e=this.actualSize;return e?{left:t.x,top:t.y,width:e.width||l,height:e.height||s}:null},o.prototype._markerPoints=function(t){t=t||this.cartesianPoint(0);var e=this._image,i=t.x,o=t.y;if(e.width<=0)return{x:Math.round(i+l/2),y:Math.round(o+s/2)};var e=this.actualSize,r=i+e.width,e=o+e.height,n=Math.round((i+r)/2),a=Math.round((o+e)/2);return[t,{x:n,y:o},{x:r,y:o},{x:r,y:a},{x:r,y:e},{x:n,y:e},{x:i,y:e},{x:i,y:a}]},o.prototype._finishUserDrawing=function(){var e=this;i.prototype._finishUserDrawing.call(this),d.UI.ViewLoader.drawingSettingsDialog(function(t){t.show({chart:e.chart,drawing:e,cancel:function(){e.chartPanel.removeDrawings(e)},always:function(){e.chartPanel&&e.chartPanel.setNeedsUpdate()}})})},o.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.bounds();return e&&d.Geometry.isPointInsideOrNearRect(t,e)},o.prototype.loadState=function(t){i.prototype.loadState.call(this,t),this._reloadImage()},o.prototype._handlePanGesture=function(t,e){switch(t.state){case d.GestureState.STARTED:var i=this._markerPoints();if(i&&1<i.length)for(var o=0;o<i.length;o++)if(d.Geometry.isPointNearPoint(e.pointerPosition,i[o]))return this._setDragPoint(o),this._updateCursor(),!0;break;case d.GestureState.CONTINUED:if(this._dragPoint<0)break;var r,n,a,l=this.projection,s=this.chartPoints[0],c=e.pointerPosition,h=this.actualSize,u=t.moveOffset,f=s.toPoint(l);switch(this._dragPoint){case 0:h&&(n=h.width,r=h.height,a=h.width/h.height,h.width-=u.x,h.height=h.width/a,s.moveTo(f.x+(n-h.width),f.y+(r-h.height),l));break;case 1:s.moveToY(c.y,l),h&&(h.height-=s.getY(l)-f.y);break;case 2:h&&(r=h.height,a=h.width/h.height,h.height-=u.y,h.width=h.height*a,s.moveToY(f.y+(r-h.height),l));break;case 3:h&&(h.width+=u.x);break;case 4:h&&(a=h.width/h.height,h.width+=u.x,h.height=h.width/a);break;case 5:h&&(h.height+=u.y);break;case 6:h&&(n=h.width,a=h.width/h.height,h.width-=u.x,h.height=h.width/a,s.moveToX(f.x+(n-h.width),l));break;case 7:s.moveToX(c.x,l),h&&(h.width-=s.getX(l)-f.x);break;default:return!0}return this.size=h,!0}return!1},o.prototype._updateCursor=function(){var t;switch(this._dragPoint){case 0:case 4:t=d.DrawingCursorClass.RESIZE_NWSE;break;case 1:case 5:t=d.DrawingCursorClass.RESIZE_NS;break;case 2:case 6:t=d.DrawingCursorClass.RESIZE_NESW;break;case 3:case 7:t=d.DrawingCursorClass.RESIZE_EW}t&&this.changeCursor(t)},o.prototype.draw=function(){var t,e,i,o,r;!this.visible||(t=this.cartesianPoint(0))&&(e=this.renderer,i=t.x,o=t.y,0<this._image.width?(r=this.size)?(r.width<0&&(i+=r.width),r.height<0&&(o+=r.height),e.image(this._image,i,o,Math.abs(r.width),Math.abs(r.height))):e.image(this._image,i,o):(e.rectPath(i,o,l,s),e.line(i,o,i+l,o+s),e.line(i,o+s,i+l,o),e.stroke({strokeColor:"red",width:1})),this.selected&&this._drawSelectionMarkers(this._markerPoints(t)))},o);function o(t){var e=i.call(this,t)||this;return e._image=new Image,e._image.onload=function(){var t=e.chartPanel;t&&t.setNeedsUpdate()},e.url=t&&t.url,e}d.ImageDrawing=t,d.Drawing.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(C){"use strict";i=C.Drawing,__extends(e,i),Object.defineProperty(e,"className",{get:function(){return"balloon"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._options.text||""},set:function(t){this._setOption("text",t=t||"",C.DrawingEvent.TEXT_CHANGED),this._updateLines()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cornerRadius",{get:function(){return this._options.cornerRadius||this._defaults.corderRadius||e.defaults.corderRadius},set:function(t){if(t&&!C.JsUtil.isPositiveNumber(t))throw new Error("Corder radius must be a positive number.");this._options.cornerRadius=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchorSize",{get:function(){return this._options.anchorSize||this._defaults.anchorSize||e.defaults.anchorSize},set:function(t){this._options.anchorSize=t},enumerable:!0,configurable:!0}),e.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start"]},e.prototype.bounds=function(){if(!this._leftTopPoint)return null;if(!this.cartesianPoint(0))return null;var t=this._leftTopPoint.x,e=this._leftTopPoint.y;return{left:t,top:e,width:Math.abs(this._rightBottomPoint.x-t),height:Math.abs(this._rightBottomPoint.y-e)}},e.prototype._finishUserDrawing=function(){var e=this;i.prototype._finishUserDrawing.call(this),C.UI.ViewLoader.drawingSettingsDialog(function(t){t.show({chart:e.chart,drawing:e,cancel:function(){e.chartPanel.removeDrawings(e)},always:function(){e.chartPanel&&e.chartPanel.setNeedsUpdate()}})})},e.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.bounds();return e&&C.Geometry.isPointInsideOrNearRect(t,e)},e.prototype.loadState=function(t){i.prototype.loadState.call(this,t),this._updateLines()},e.prototype.draw=function(){if(this.visible){var t=this.cartesianPoint(0);if(t){var e=this._lines,i=e.reduce(function(t,e){return t.length>=e.length?t:e}),o=this.renderer,r=this.actualTheme,n=r.text,a=C.DummyCanvasContext.measureText(i,r.text),l=Math.ceil(a.width/2),i=this.cornerRadius,s=l+i,c=Math.ceil(this.anchorSize.width/2),h=this.anchorSize.height,u=t.y-h,h=u-a.height*e.length-h,f=(o.linePath(t.x,t.y,t.x-c,u),o.lineTo(t.x-l,u),t.x-s),s=(o.quadraticCurve(f,u,f,u-i),o.lineTo(f,h+i),o.quadraticCurve(f,h,t.x-l,h),o.lineTo(t.x+l,h),t.x+s),d=(o.quadraticCurve(s,h,s,h+i),o.lineTo(s,u-i),o.quadraticCurve(s,u,t.x+l,u),o.lineTo(t.x+c,u),o.closePath(),o.fillStroke(r.fill,r.line),this._leftTopPoint={x:f,y:h},this._rightBottomPoint={x:s,y:t.y},o.textTheme(r.text),o.textOptions({baseline:C.TextBaseline.MIDDLE,align:C.TextAlign.LEFT}),"underline"===n.decoration),p=Math.round(h+2*a.height/3+1);d&&o.beginPath();for(var y=0,m=e;y<m.length;y++){var _=m[y];o.fillText(_,t.x-l,p),d&&(_=5*a.height/9-1,o.line(t.x-l,p+_,t.x+l,p+_)),p+=a.height}d&&o.stroke({strokeColor:n.fillColor}),this._drawSelectionMarkersIfSelected(t)}}},e.prototype._updateLines=function(){this._lines=this.text.split("\n")},e.defaults={corderRadius:5,anchorSize:{width:10,height:10}};var i,t=e;function e(t){t=i.call(this,t)||this;return t._lines=[],t._updateLines(),t}C.BalloonDrawing=t,C.Drawing.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(f){"use strict";f.MeasureArrowDrawingMode={START:"start",END:"end",BOTH:"both"};e=f.Drawing,__extends(i,e),Object.defineProperty(i,"className",{get:function(){return"measure"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),i.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.end"]},Object.defineProperty(i.prototype,"cornerRadius",{get:function(){var t=this._options.cornerRadius;return null!=t?t:i.defaults.cornerRadius},set:function(t){if(t&&!f.JsUtil.isPositiveNumber(t))throw new Error("Corder radius must be a positive number.");this._options.cornerRadius=t},enumerable:!0,configurable:!0}),i.prototype.bounds=function(){var t=this.cartesianPoints();return t.length<this.pointsNeeded?null:{left:Math.min(t[0].x,t[1].x),top:Math.min(t[0].y,t[1].y),width:Math.abs(t[0].x-t[1].x),height:Math.abs(t[0].y-t[1].y)}},i.prototype._markerPoints=function(t){if(!(t=t||this.bounds()))return(e=this.cartesianPoint(0))&&[e];var e=Math.round(t.left+t.width/2),i=Math.round(t.top+t.height/2),o=t.left+t.width,r=t.top+t.height;return[{x:t.left,y:t.top},{x:e,y:t.top},{x:o,y:t.top},{x:o,y:i},{x:o,y:r},{x:e,y:r},{x:t.left,y:r},{x:t.left,y:i}]},i.prototype._normalizePoints=function(){var t,e,i=this.bounds();i&&(t=this.projection,(e=this.chartPoints)[0].moveTo(i.left,i.top,t),e[1].moveTo(i.left+i.width,i.top+i.height,t))},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();return 1<e.length&&f.Geometry.isPointNearRectPoints(t,e[0],e[1])},i.prototype._handlePanGesture=function(t,e){switch(t.state){case f.GestureState.STARTED:var i=this._markerPoints();if(i&&1<i.length)for(var o=0;o<i.length;o++)if(f.Geometry.isPointNearPoint(e.pointerPosition,i[o]))return this._isXDirectionInverted=-1===this._xDirection,this._isYDirectionInverted=1===this._yDirection,this._normalizePoints(),this._setDragPoint(o),this._updateCursor(),!0;break;case f.GestureState.CONTINUED:if(0<=this._dragPoint){var r=this.projection,n=this.chartPoints,a=e.pointerPosition;switch(this._dragPoint){case 0:n[0].moveTo(a.x,a.y,r);break;case 1:n[0].moveToY(a.y,r);break;case 2:n[0].moveToY(a.y,r),n[1].moveToX(a.x,r);break;case 3:n[1].moveToX(a.x,r);break;case 4:n[1].moveTo(a.x,a.y,r);break;case 5:n[1].moveToY(a.y,r);break;case 6:n[0].moveToX(a.x,r),n[1].moveToY(a.y,r);break;case 7:n[0].moveToX(a.x,r)}return!0}}return!1},i.prototype._updateCursor=function(){var t;switch(this._dragPoint){case 0:case 4:t=f.DrawingCursorClass.RESIZE_NWSE;break;case 1:case 5:t=f.DrawingCursorClass.RESIZE_NS;break;case 2:case 6:t=f.DrawingCursorClass.RESIZE_NESW;break;case 3:case 7:t=f.DrawingCursorClass.RESIZE_EW}t&&this.changeCursor(t)},i.prototype._duration=function(){var t=this.bounds();if(!t)return"";var e=moment(this.projection.dateByX(t.left)),t=moment(this.projection.dateByX(t.left+t.width)),i="years",o=t.diff(e,i);return 0===(o=0===(o=0===(o=0===(o=0===(o=0===o?t.diff(e,i="months"):o)?t.diff(e,i="weeks"):o)?t.diff(e,i="days"):o)?t.diff(e,i="hours"):o)?t.diff(e,i="minutes"):o)&&(o=t.diff(e,i="seconds")),o*=this._xDirection,moment.duration(o,i).humanize(!0).replace("in","")},i.prototype.draw=function(){var t,e,i,o,r,n,a,l,s,c,h,u=this;!this.visible||(t=this.bounds())&&(f.Localization.localizeText(this.chart,"drawing.all.bars").then(function(t){u._textBars=t}),l=Math.round(t.left+t.width/2),s=Math.round(t.top+t.height/2),n=t.left+t.width,i=t.top+t.height,e=this.renderer,h={x:t.left,y:s},n={x:n,y:s},s={x:l,y:t.top},l={x:l,y:i},i=this.actualTheme,e.rectPath(t.left,t.top,t.width,t.height),e.fillStroke(i.fill,i.border),r=this.chartPoints[0],c=this.chartPoints[1],a=this._isXDirectionInverted?r.x<c.x:r.x>c.x,o=this._isYDirectionInverted?r.y>c.y:r.y<c.y,this._xDirection=a?-1:1,this._yDirection=o?-1:1,a=1===this._xDirection?f.MeasureArrowDrawingMode.END:f.MeasureArrowDrawingMode.START,o=1===this._yDirection?f.MeasureArrowDrawingMode.START:f.MeasureArrowDrawingMode.END,this._drawArrowHeadLine(h,n,a),this._drawArrowHeadLine(s,l,o),h=this.projection,n=r.getValue(h),a=c.getValue(h),s=this.chart.barsBetweenPoints(r,c),o=this.panelValueScale.formatValue((n-a)*this._yDirection),h=f.DummyCanvasContext.measureText(o,i.balloon.text),r=(s*this._xDirection).toFixed()+" "+this._textBars+", "+this._duration(),c=f.DummyCanvasContext.measureText(r,i.balloon.text),n=h.height+c.height+2,a=Math.max(h.width,c.width)+2,h=(c=(s=t.top+t.height+4)+h.height)+h.height,this._drawRoundRect(l=l.x-a/2,s,a,n),e.textTheme(i.balloon.text),e.textOptions({baseline:f.TextBaseline.ALPHABETIC,align:f.TextAlign.LEFT}),e.fillText(o,3+l,c),e.fillText(r,3+l,h),this.selected&&this._drawSelectionMarkers(this._markerPoints(t)))},i.prototype._drawArrowHeadLine=function(t,e,i){var o,r,n=this.renderer,a=this.actualTheme,l=(n.linePath(t.x,t.y,e.x,e.y),n.stroke(a.line),e.x-t.x),s=e.y-t.y,c=(e.x>t.x?-90:90)*Math.PI/180;switch(i){case f.MeasureArrowDrawingMode.BOTH:(o=Math.atan(s/l)+c)===Math.PI&&(o=0),0===(r=Math.atan(s/l)-c)&&(r=Math.PI),this._drawArrow(t,o),this._drawArrow(e,r);break;case f.MeasureArrowDrawingMode.START:(o=Math.atan(s/l)+c)===Math.PI&&(o=0),this._drawArrow(t,o);break;case f.MeasureArrowDrawingMode.END:0===(r=Math.atan(s/l)-c)&&(r=Math.PI),this._drawArrow(e,r)}},i.prototype._drawArrow=function(t,e){var i=this.renderer,o=this.actualTheme;i.save(),i.translate(t.x,t.y),i.rotate(e),i.polygonPath(0,0,5,5,0,0,-5,5),i.stroke(o.line),i.restore()},i.prototype._drawRoundRect=function(t,e,i,o,r){null==r&&(r=this.cornerRadius);var n=this.renderer,i=t+(i+=r),o=e+(o+=r),i=(n.horLinePath(t+r,i-r,e),n.quadraticCurve(i,e,i,e+r),n.lineTo(i,o-r),n.quadraticCurve(i,o,i-r,o),n.lineTo(t+r,o),n.quadraticCurve(t,o,t,o-r),n.lineTo(t,e+r),n.quadraticCurve(t,e,t+r,e),n.closePath(),this.actualTheme.balloon);n.fillStroke(i.fill,i.border)},i.defaults={cornerRadius:5};var e,t=i;function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._isXDirectionInverted=!1,t._isYDirectionInverted=!1,t._xDirection=1,t._yDirection=1,t}f.MeasureDrawing=t,f.Drawing.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(l){"use strict";var t,e="scxMeasureTool",i=(t=l.Drawing,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"measureTool"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),o.prototype.bounds=function(){var t=this.cartesianPoints();return t.length<this.pointsNeeded?null:{left:Math.min(t[0].x,t[1].x),top:Math.min(t[0].y,t[1].y),width:Math.abs(t[0].x-t[1].x),height:Math.abs(t[0].y-t[1].y)}},o.prototype._createInfoControls=function(){var t;this._infoControls||(t=this.chartPanel.container.scxAppend("div",e),this._infoControls={rootDiv:t,firstPoint:t.scxAppend("div"),lastPoint:t.scxAppend("div"),range:t.scxAppend("div"),bars:t.scxAppend("div")})},o.prototype._finishUserDrawing=function(){t.prototype._finishUserDrawing.call(this),this.remove()},o.prototype.remove=function(){return this._infoControls&&(this._infoControls.rootDiv.remove(),this._infoControls=null),t.prototype.remove.call(this)},o.prototype.draw=function(){var t,e;!this.visible||0!==(t=this.cartesianPoints()).length&&(1<t.length&&((e=this.renderer).polylinePath(t),e.stroke(this.actualTheme.line)),this._drawSelectionMarkersIfSelected(t),this._drawValues(t),this._drawInfo())},o.prototype._drawValues=function(t){var e=this.renderer,i=this.projection,o=this.actualTheme,r=this._getSelectionMarkerWidth(o)+5,n=this.chartPoints,a=n[0].getValue(i),a=this.chartPanel.formatValue(a);e.textOptions({baseline:l.TextBaseline.BOTTOM}),e.textTheme(o.text),e.fillText(a,t[0].x,t[0].y-r),1<n.length&&(o=n[1].getValue(i),a=this.chartPanel.formatValue(o),e.fillText(a,t[1].x,t[1].y-r))},o.prototype._drawInfo=function(){this._createInfoControls();var t=this.actualTheme,e=this.projection,i=this._infoControls,o=this.chartPoints,r=this.chartPanel,n=r.chart.dateScale,a=o[0].getDate(e),l=o[0].getValue(e);i.firstPoint.text(n.formatDate(a)+" "+r.formatValue(l)),1<o.length&&(a=o[1].getDate(e),e=o[1].getValue(e),i.lastPoint.text(n.formatDate(a)+" "+r.formatValue(e)),n=e-l,(a=this.chart.instrument)&&a.tickSize?i.range.text("Range (Pips) "+r.formatValue(n/a.tickSize)):i.range.text("Range "+r.formatValue(n)),e=this.chart.barsBetweenPoints(o[0],o[1]),i.bars.text("Bars "+e)),i.rootDiv.scxPosition(this.chartPanel.contentFrame.left,0).scxTextStyle(t.text).scxFill(t.fill)},o);function o(){return null!==t&&t.apply(this,arguments)||this}l.MeasureToolDrawing=i,l.Drawing.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(r){"use strict";r.FibonacciLevelTextHorPosition={LEFT:"left",CENTER:"center",RIGHT:"right"},r.FibonacciLevelTextVerPosition={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"},r.FibonacciLevelLineExtension={NONE:"none",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",BOTH:"both"};var n,e,t={createPointBehavior:null,levels:[{value:.382},{value:.5},{value:.618},{value:1}],showTrendLine:!0,showLevelLines:!0,showLevelBackgrounds:!0,showLevelValues:!0,showLevelPrices:!0,showLevelPercents:!0,levelTextHorPosition:r.FibonacciLevelTextHorPosition.RIGHT,levelTextVerPosition:r.FibonacciLevelTextVerPosition.BOTTOM},i=((i=n=r.DrawingEvent||(r.DrawingEvent={})).LEVELS_CHANGED="drawingLevelsChanged",i.SHOW_TREND_LINE_CHANGED="drawingShowTrendLineChanged",i.SHOW_LEVEL_LINES_CHANGED="drawingShowLevelLinesChanged",i.SHOW_LEVEL_BACKGROUNDS_CHANGED="drawingShowLevelBackgroundsChanged",i.SHOW_LEVEL_VALUES_CHANGED="drawingShowLevelValuesChanged",i.SHOW_LEVEL_PRICES_CHANGED="drawingShowLevelPricesChanged",i.SHOW_LEVEL_PERCENTS_CHANGED="drawingShowLevelPercentsChanged",i.LEVEL_TEXT_HOR_POSITION_CHANGED="drawingLevelTextHorPositionChanged",i.LEVEL_TEXT_VER_POSITION_CHANGED="drawingLevelTextVerPositionChanged",i.LEVEL_LINES_EXTENSION_CHANGED="drawingLevelLinesExtensionChanged",i.REVERSE_CHANGED="drawingReverseChanged",e=r.Drawing,__extends(o,e),Object.defineProperty(o,"subClassName",{get:function(){return"fibonacci"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"levels",{get:function(){return this._optionValue("levels")||o.defaults.levels},set:function(t){if(null!=t&&!Array.isArray(t))throw new TypeError("Levels must be an array of numbers.");for(var e=0,i=t.length;e<i-1;e++)for(var o,r=e+1;r<i;r++)t[e].value>t[r].value&&(o=t[e],t[e]=t[r],t[r]=o);this._options.levels=t,this.fire(n.LEVELS_CHANGED,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"showTrendLine",{get:function(){var t=this._optionValue("showTrendLine");return null!=t?t:o.defaults.showTrendLine},set:function(t){this._setOption("showTrendLine",t,n.SHOW_TREND_LINE_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"showLevelLines",{get:function(){var t=this._optionValue("showLevelLines");return null!=t?t:o.defaults.showLevelLines},set:function(t){this._setOption("showLevelLines",t,n.SHOW_LEVEL_LINES_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"showLevelBackgrounds",{get:function(){var t=this._optionValue("showLevelBackgrounds");return null!=t?t:o.defaults.showLevelBackgrounds},set:function(t){this._setOption("showLevelBackgrounds",t,n.SHOW_LEVEL_BACKGROUNDS_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"showLevelValues",{get:function(){var t=this._optionValue("showLevelValues");return null!=t?t:o.defaults.showLevelValues},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"showLevels",{set:function(t){this._setOption("showLevelValues",t,n.SHOW_LEVEL_VALUES_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"showLevelPrices",{get:function(){var t=this._optionValue("showLevelPrices");return null!=t?t:o.defaults.showLevelPrices},set:function(t){this._setOption("showLevelPrices",t,n.SHOW_LEVEL_PRICES_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"showLevelPercents",{get:function(){var t=this._optionValue("showLevelPercents");return null!=t?t:o.defaults.showLevelPercents},set:function(t){this._setOption("showLevelPercents",t,n.SHOW_LEVEL_PERCENTS_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"levelTextHorPosition",{get:function(){var t=this._optionValue("levelTextHorPosition");return null!=t?t:o.defaults.levelTextHorPosition},set:function(t){this._setOption("levelTextHorPosition",t,n.LEVEL_TEXT_HOR_POSITION_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"levelTextVerPosition",{get:function(){var t=this._optionValue("levelTextVerPosition");return null!=t?t:o.defaults.levelTextVerPosition},set:function(t){this._setOption("levelTextVerPosition",t,n.LEVEL_TEXT_VER_POSITION_CHANGED)},enumerable:!0,configurable:!0}),o.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.end"]},o.prototype._showSettingsDialog=function(){var e=this;this.chart&&r.UI.ViewLoader.fibonacciDrawingSettingsDialog(function(t){t.show({chart:e.chart,drawing:e})})},o.prototype._applyTextPosition=function(){var t=this.renderer,e=this._textBaselineFromVerPosition(),i=this._graphicsTextAlign();t.textOptions({align:i,baseline:e})},o.prototype._textBaselineFromVerPosition=function(){var t=r.FibonacciLevelTextVerPosition,e=r.TextBaseline;switch(this.levelTextVerPosition){case t.MIDDLE:return e.MIDDLE;case t.TOP:return e.BOTTOM;case t.BOTTOM:return e.TOP;default:throw new Error("Unsupported level text vertical position: "+this.levelTextVerPosition)}},o.prototype._graphicsTextAlign=function(){var t=r.FibonacciLevelTextHorPosition,e=r.TextAlign;switch(this.levelTextHorPosition){case t.CENTER:return e.CENTER;case t.LEFT:return e.RIGHT;case t.RIGHT:return e.LEFT;default:throw new Error("Unsupported level text horizontal position: "+this.levelTextHorPosition)}},o.prototype._isLevelVisible=function(t){return null==t.visible||t.visible},o.prototype._adjustXWithTextOffset=function(t){switch(this.levelTextHorPosition){case r.FibonacciLevelTextHorPosition.LEFT:return t-this._textOffset;case r.FibonacciLevelTextHorPosition.RIGHT:return t+this._textOffset;default:return t}},o.prototype._adjustYWithTextOffset=function(t){switch(this.levelTextVerPosition){case r.FibonacciLevelTextVerPosition.TOP:return t-this._textOffset;case r.FibonacciLevelTextVerPosition.BOTTOM:return t+this._textOffset;default:return t}},o.prototype._formatLevelValue=function(t){return this.showLevelPercents?Number(100*t.value).toFixed(2)+"%":Number(t.value).toFixed(3)},o.prototype._formatPriceAtY=function(t){return Number(this.projection.valueByY(t)).toFixed(3)},o.prototype._levelValueOffsetFromVerPosition=function(t,e){var i=r.FibonacciLevelTextVerPosition,o=(t||e).line.width;switch(this.levelTextVerPosition){case i.TOP:return-o/2;case i.BOTTOM:return o/2;default:return 0}},o.prototype._levelValueOffsetFromHorPosition=function(t,e){var i=r.FibonacciLevelTextHorPosition,o=(t||e).line.width;switch(this.levelTextHorPosition){case i.LEFT:return-o/2;case i.RIGHT:return o/2;default:return 0}},o.defaults=t,o);function o(t){t=e.call(this,t)||this;return t._textOffset=2,t}r.FibonacciDrawingBase=i}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(d){"use strict";t=d.FibonacciDrawingBase,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"fibonacciArcs"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),i.prototype.bounds=function(){var i=this,t=this.cartesianPoints();if(t.length<this.pointsNeeded)return null;var e=d.Geometry.length(t[0],t[1]),o=this.levels.reduce(function(t,e){return i._isLevelVisible(e)?Math.max(t,e.value):t},Number.MIN_VALUE),e=Math.round(e*o);return{left:t[0].x-e,top:t[0].y-e,width:2*e,height:2*e}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();if(e.length<this.pointsNeeded)return!1;if(this.showTrendLine&&d.Geometry.isPointNearPolyline(t,e))return!0;if(this.showLevelLines||this.showLevelBackgrounds)for(var i=d.Geometry.length(e[0],e[1]),o=0,r=this.levels;o<r.length;o++){var n=r[o];if(this._isLevelVisible(n)){n=Math.round(i*n.value);if(d.Geometry.isPointNearCircle(t,e[0],n))return!0}}return this.selected&&d.Geometry.isPointNearPoint(t,e)},i.prototype._handlePanGesture=function(t,e){switch(t.state){case d.GestureState.STARTED:var i=this.cartesianPoint(1);if(i&&d.Geometry.isPointNearPoint(e.pointerPosition,i))return this._setDragPoint(1),this.changeCursor(d.DrawingCursorClass.RESIZE),!0;break;case d.GestureState.CONTINUED:if(1===this._dragPoint)return this.chartPoints[1].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype.draw=function(){if(this.visible){var t=this.cartesianPoints();if(0!==t.length){var e=this.renderer,i=this.actualTheme;if(1<t.length){var o=d.Geometry.length(t[0],t[1]),r=t[0].x,n=t[0].y,a=void 0;this._applyTextPosition();for(var l=0,s=this.levels;l<s.length;l++){var c,h,u,f=s[l];this._isLevelVisible(f)&&(u=f.theme||i,c=Math.round(o*f.value),this.showLevelBackgrounds&&(h=u.fill||i.fill,e.circlePath(r,n,c),a?(e.circle(r,n,a),e.fill(h,!"evenodd","evenodd")):e.fill(h,!0)),this.showLevelLines&&(e.circlePath(r,n,c),e.stroke(u.line||i.line)),this.showLevelValues&&(h=this._formatLevelValue(f),f=this._levelValueOffsetFromVerPosition(u,i),u=u.text||i.text,e.fillText(h,r,n+c+f,u)),a=c)}this.showTrendLine&&(e.polylinePath(t),e.stroke(i.trendLine))}this._drawSelectionMarkersIfSelected(t)}}};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}d.FibonacciArcsDrawing=e,d.Drawing.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(y){"use strict";t=y.FibonacciDrawingBase,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"fibonacciEllipses"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),i.prototype.bounds=function(){var i=this,t=this.cartesianPoints();if(t.length<this.pointsNeeded)return null;var e=y.Geometry.xProjectionLength(t[0],t[1]),o=y.Geometry.yProjectionLength(t[0],t[1]),r=this.levels.reduce(function(t,e){return i._isLevelVisible(e)?Math.max(t,e.value):t},Number.MIN_VALUE),e=Math.round(e*r),o=Math.round(o*r);return{left:t[0].x-e,top:t[0].y-o,width:2*e,height:2*o}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();if(e.length<this.pointsNeeded)return!1;if(this.showTrendLine&&y.Geometry.isPointNearPolyline(t,e))return!0;if(this.showLevelLines||this.showLevelBackgrounds)for(var i=y.Geometry.xProjectionLength(e[0],e[1]),o=y.Geometry.yProjectionLength(e[0],e[1]),r=0,n=this.levels;r<n.length;r++){var a=n[r];if(this._isLevelVisible(a)){var l=Math.round(i*a.value),a=Math.round(o*a.value);if(y.Geometry.isPointNearEllipseWithRadiuses(t,e[0],l,a))return!0}}return this.selected&&y.Geometry.isPointNearPoint(t,e)},i.prototype._handlePanGesture=function(t,e){switch(t.state){case y.GestureState.STARTED:var i=this.cartesianPoint(1);if(i&&y.Geometry.isPointNearPoint(e.pointerPosition,i))return this._setDragPoint(1),this.changeCursor(y.DrawingCursorClass.RESIZE),!0;break;case y.GestureState.CONTINUED:if(1===this._dragPoint)return this.chartPoints[1].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype.draw=function(){if(this.visible){var t=this.cartesianPoints();if(0!==t.length){var e=this.renderer,i=this.actualTheme;if(1<t.length){var o=t[0].x,r=t[0].y,n=y.Geometry.xProjectionLength(t[0],t[1]),a=y.Geometry.yProjectionLength(t[0],t[1]),l=void 0;this._applyTextPosition();for(var s=0,c=this.levels;s<c.length;s++){var h,u,f,d,p=c[s];this._isLevelVisible(p)&&(h=p.theme||i,d=Math.round(n*p.value),u=Math.round(a*p.value),this.showLevelBackgrounds&&(f=h.fill||i.fill,e.save(),e.beginPath(),e.translate(o,r),d!==u&&e.scale(1,u/d),e.circle(0,0,d),l?(e.circle(0,0,l),e.fill(f,!1,"evenodd")):e.fill(f),e.restore(),l=d),this.showLevelLines&&(e.ellipsePath(o,r,d,u),e.stroke(h.line||i.line)),this.showLevelValues&&(f=this._formatLevelValue(p),d=this._levelValueOffsetFromVerPosition(h,i),p=h.text||i.text,e.fillText(f,o,r+u+d,p)))}this.showTrendLine&&(e.polylinePath(t),e.stroke(i.trendLine))}this._drawSelectionMarkersIfSelected(t)}}};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}y.FibonacciEllipsesDrawing=e,y.Drawing.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(l){"use strict";var t,e={levels:[{value:0},{value:.2361},{value:.382},{value:.5},{value:.618},{value:.764},{value:1}],reverse:!1,levelTextVerPosition:l.FibonacciLevelTextVerPosition.MIDDLE,levelLinesExtension:l.FibonacciLevelLineExtension.NONE},e=(t=l.FibonacciDrawingBase,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"fibonacciRetracements"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"reverse",{get:function(){var t=this._optionValue("reverse");return null!=t?t:i.defaults.reverse},set:function(t){this._setOption("reverse",t,l.DrawingEvent.REVERSE_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"levelLinesExtension",{get:function(){var t=this._optionValue("levelLinesExtension");return null!=t?t:i.defaults.levelLinesExtension},set:function(t){this._setOption("levelLinesExtension",t,l.DrawingEvent.LEVEL_LINES_EXTENSION_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),i.prototype.bounds=function(){var i=this,t=this.cartesianPoints();if(t.length<this.pointsNeeded)return null;var e=this._linesXRange(t),o=this.levels.reduce(function(t,e){return i._isLevelVisible(e)?Math.max(t,e.value):t},Number.MIN_VALUE),o=this.reverse?Math.round((t[0].y-t[1].y)*o+t[1].y):Math.round((t[1].y-t[0].y)*o+t[0].y),r={x:e.min,y:o},e={x:e.max,y:o};return{left:Math.min(t[0].x,t[1].x,r.x,e.x),top:Math.min(t[0].y,t[1].y,r.y,e.y),width:Math.abs(Math.max(t[0].x,t[1].x)-Math.min(t[0].x,t[1].x)),height:Math.abs(Math.max(t[0].y,t[1].y,r.y,e.y)-Math.min(t[0].y,t[1].y,r.y,e.y))}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();if(e.length<this.pointsNeeded)return!1;if(this.showTrendLine&&l.Geometry.isPointNearPolyline(t,e))return!0;if(this.showLevelLines||this.showLevelBackgrounds)for(var i=this._linesXRange(e),o=0,r=this.levels;o<r.length;o++){var n=r[o];if(this._isLevelVisible(n)){var n=this.reverse?Math.round((e[0].y-e[1].y)*n.value+e[1].y):Math.round((e[1].y-e[0].y)*n.value+e[0].y),a={x:i.min,y:n},n={x:i.max,y:n};if(l.Geometry.isPointNearLine(t,a,n))return!0}}return this.selected&&l.Geometry.isPointNearPoint(t,e)},i.prototype._handlePanGesture=function(t,e){switch(t.state){case l.GestureState.STARTED:var i=this.cartesianPoints();if(1<i.length)for(var o=0;o<i.length;o++)if(l.Geometry.isPointNearPoint(e.pointerPosition,i[o]))return this._setDragPoint(o),this.changeCursor(l.DrawingCursorClass.RESIZE),!0;break;case l.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype.draw=function(){if(this.visible){var t=this.cartesianPoints();if(0!==t.length){var e=this.renderer,i=this.actualTheme;if(1<t.length){var o=this._linesXRange(t),r=void 0,n=void 0;this.showLevelValues&&(n=this._levelTextX(o),this._applyTextPosition());for(var a=0,l=this.levels;a<l.length;a++){var s,c,h,u=l[a];this._isLevelVisible(u)&&(h=u.theme||i,s=this.reverse?Math.round((t[0].y-t[1].y)*u.value+t[1].y):Math.round((t[1].y-t[0].y)*u.value+t[0].y),this.showLevelBackgrounds&&(r&&(e.polygonPath(o.min,r,o.max,r,o.max,s,o.min,s),e.fill(h.fill||i.fill)),r=s),this.showLevelLines&&(e.linePath(o.min,s,o.max,s),e.stroke(h.line||i.line)),this.showLevelValues&&(u=this._formatLevelValue(u),c=this._levelValueOffsetFromHorPosition(h,i),this.showLevelPrices&&(u+=" ("+this._formatPriceAtY(s)+")"),e.textTheme(h.text||i.text),(h=this._levelTextAlign())&&e.textOptions({align:h}),e.fillText(u,n,this._adjustYWithTextOffset(s)+c)))}}1<t.length&&this.showTrendLine&&(e.polylinePath(t),e.stroke(i.trendLine)),this._drawSelectionMarkersIfSelected(t)}}},i.prototype._levelTextX=function(t){var e,i=l.FibonacciLevelTextHorPosition;switch(this.levelTextHorPosition){case i.CENTER:e=(t.min+t.max)/2;break;case i.LEFT:e=t.min;break;case i.RIGHT:e=t.max;break;default:throw new Error("Unknown text horizontal position: "+this.levelTextHorPosition)}return e=this._adjustXWithTextOffset(e)},i.prototype._levelTextAlign=function(){var t=this.levelLinesExtension,e=l.FibonacciLevelLineExtension,i=l.FibonacciLevelTextHorPosition;switch(this.levelTextHorPosition){case i.RIGHT:if(t===e.RIGHT||t===e.BOTH)return l.TextAlign.RIGHT;break;case i.LEFT:if(t===e.LEFT||t===e.BOTH)return l.TextAlign.LEFT}},i.prototype._linesXRange=function(t){var e=l.FibonacciLevelLineExtension,i=this.chartPanel.contentFrame,o=Math.min(t[0].x,t[1].x),r=Math.max(t[0].x,t[1].x);switch(this.levelLinesExtension){case e.NONE:break;case e.LEFT:o=i.left;break;case e.RIGHT:r=i.right;break;case e.BOTH:o=i.left,r=i.right;break;default:throw new Error("Unknown level lines extension: "+this.levelLinesExtension)}return{min:o,max:r}},i.prototype._adjustXWithTextOffset=function(t){var e=t,i=l.FibonacciLevelLineExtension,o=this.levelLinesExtension,t=l.FibonacciLevelTextHorPosition;switch(this.levelTextHorPosition){case t.LEFT:o===i.LEFT||o===i.BOTH?e+=this._textOffset:e-=this._textOffset;break;case t.RIGHT:o===i.RIGHT||o===i.BOTH?e-=this._textOffset:e+=this._textOffset}return e},i.defaults=e,i);function i(){return null!==t&&t.apply(this,arguments)||this}l.FibonacciRetracementsDrawing=e,l.Drawing.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(v){"use strict";t=v.FibonacciDrawingBase,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"fibonacciFan"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),i.prototype.bounds=function(){var i=this,t=this.cartesianPoints();if(t.length<this.pointsNeeded)return null;var e=t[0].x,o=t[0].y,r=t[1].x,n=t[1].y,a=this.chartPanel.contentFrame,a=r<e?a.left:a.right,l=this.levels.reduce(function(t,e){return i._isLevelVisible(e)?Math.max(t,e.value):t},Number.MIN_VALUE),s=this.levels.reduce(function(t,e){return i._isLevelVisible(e)?Math.min(t,e.value):t},Number.MAX_VALUE),s=Math.round((o-n)*s+n),s=Math.round(o+(a-e)*(s-o)/(r-e)),l=Math.round((o-n)*l+n),n=Math.round(o+(a-e)*(l-o)/(r-e));return{left:Math.min(t[0].x,t[1].x,a),top:Math.min(t[0].y,t[1].y,n,s),width:Math.abs(Math.max(t[0].x,t[1].x,a)-Math.min(t[0].x,t[1].x,a)),height:Math.abs(Math.max(t[0].y,t[1].y,n,s)-Math.min(t[0].y,t[1].y,n,s))}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();if(e.length<this.pointsNeeded)return!1;var i=e[0].x,o=e[0].y,r=e[1].x,n=e[1].y,a=this.chartPanel.contentFrame.right;if(this.showTrendLine&&v.Geometry.isPointNearPolyline(t,e))return!0;if(this.showLevelLines||this.showLevelBackgrounds)for(var l=0,s=this.levels;l<s.length;l++){var c=s[l];if(this._isLevelVisible(c)){c=Math.round((o-n)*c.value+n),c=Math.round(o+(a-i)*(c-o)/(r-i));if(v.Geometry.isPointNearLine(t,{x:i,y:o},{x:a,y:c}))return!0}}return this.selected&&v.Geometry.isPointNearPoint(t,e[1])},i.prototype._handlePanGesture=function(t,e){switch(t.state){case v.GestureState.STARTED:var i=this.cartesianPoints();if(1<i.length)for(var o=0;o<i.length;o++)if(v.Geometry.isPointNearPoint(e.pointerPosition,i[o]))return this._setDragPoint(o),this.changeCursor(v.DrawingCursorClass.RESIZE),!0;break;case v.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype.draw=function(){if(this.visible){var t=this.cartesianPoints();if(0!==t.length){var e=this.renderer,i=this.actualTheme;if(1<t.length)for(var o=t[0].x,r=t[0].y,n=t[1].x,a=t[1].y,l=this.chartPanel.contentFrame,s=n<o,c=s?l.left:l.right,h=[],l=this._textBaselineFromVerPosition(),u=(e.textOptions({align:s?v.TextAlign.LEFT:v.TextAlign.RIGHT,baseline:l}),0),f=0,d=this.levels;f<d.length;f++){var p,y,m,_,C,g,b,S=d[f];this._isLevelVisible(S)&&(y=S.theme||i,p=Math.round((r-a)*S.value+a),p=Math.round(r+(c-o)*(p-r)/(n-o)),this.showLevelBackgrounds&&(2===h.length?(e.polygonPath(h[0].x,h[0].y,h[1].x,h[1].y,o,r,c,p),e.fill(y.fill||i.fill),h[0]={x:c,y:p},h[1]={x:o,y:r}):(h.push({x:c,y:p}),h.push({x:o,y:r}))),this.showLevelLines&&(e.linePath(o,r,c,p),e.stroke(y.line||i.line)),y=y.text||i.text,this.showLevelValues&&(m=v.HtmlUtil.getFontSize(y),b=this.chartPanel.contentFrame.width,_=this.chartPanel.contentFrame.height,g=C=void 0,g=p<m?(C=s?Math.abs(o)*Math.abs(p)/(Math.abs(p)+Math.abs(r)):b-(b-Math.abs(o))*Math.abs(p)/(Math.abs(p)+Math.abs(r)),m):(C=s?c+3:c-3,p),_-m<p&&(C=s?o*(p-_)/(p-r):b-(b-o)*(p-_)/(p-r),g=_-m),b=this._formatLevelValue(S),this.showLevelPrices&&(b+=" ("+this._formatPriceAtY(p)+")"),g+=u,u+=m+m/10,r<g&&(g-=2*(m+m/10)),e.fillText(b,C,g,y)))}1<t.length&&this.showTrendLine&&(e.polylinePath(t),e.stroke(i.trendLine)),this._drawSelectionMarkersIfSelected(t)}}},i.defaults={levels:[{value:.382},{value:.5},{value:.618}],levelTextVerPosition:v.FibonacciLevelTextVerPosition.MIDDLE};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}v.FibonacciFanDrawing=e,v.Drawing.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(d){"use strict";var t,e={levels:[{value:0},{value:1},{value:2},{value:3},{value:5},{value:8},{value:13},{value:21},{value:34},{value:55},{value:89}],levelLinesExtension:d.FibonacciLevelLineExtension.BOTH},e=(t=d.FibonacciDrawingBase,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"fibonacciTimeZones"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"levelLinesExtension",{get:function(){var t=this._optionValue("levelLinesExtension");return null!=t?t:i.defaults.levelLinesExtension},set:function(t){this._setOption("levelLinesExtension",t,d.DrawingEvent.LEVEL_LINES_EXTENSION_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),i.prototype.bounds=function(){var i=this,t=this.cartesianPoints();if(t.length<this.pointsNeeded)return null;var e=this.levels.reduce(function(t,e){return i._isLevelVisible(e)?Math.max(t,e.value):t},Number.MIN_VALUE),e=Math.round((t[1].x-t[0].x)*e+t[0].x);return{left:Math.min(t[0].x,e),top:this.chartPanel.frame.top,width:Math.abs(Math.max(t[0].x,e)-Math.min(t[0].x,e)),height:this.chartPanel.frame.height}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();if(e.length<2)return!1;if(this.showTrendLine&&d.Geometry.isPointNearPolyline(t,e))return!0;if(this.showLevelLines||this.showLevelBackgrounds)for(var i=this._linesYRange(e),o=0,r=this.levels;o<r.length;o++){var n=r[o];if(this._isLevelVisible(n)){var n=Math.round((e[1].x-e[0].x)*n.value+e[0].x),a={x:n,y:i.max},n={x:n,y:i.min};if(d.Geometry.isPointNearLine(t,a,n))return!0}}return this.selected&&d.Geometry.isPointNearPoint(t,e)},i.prototype._handlePanGesture=function(t,e){switch(t.state){case d.GestureState.STARTED:var i=this.cartesianPoints();if(1<i.length)for(var o=0;o<i.length;o++)if(d.Geometry.isPointNearPoint(e.pointerPosition,i[o]))return this._setDragPoint(o),this.changeCursor(d.DrawingCursorClass.RESIZE),!0;break;case d.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype.draw=function(){if(this.visible){var t=this.cartesianPoints();if(0!==t.length){var e=this.renderer,i=this.actualTheme;if(1<t.length){var o=this._linesYRange(t),r=void 0,n=void 0;if(this.showLevelValues){this._applyTextPosition();var a=void 0;switch(this.levelTextVerPosition){case d.FibonacciLevelTextVerPosition.MIDDLE:n=(o.min+o.max)/2;break;case d.FibonacciLevelTextVerPosition.TOP:n=o.min,a=d.TextBaseline.TOP;break;case d.FibonacciLevelTextVerPosition.BOTTOM:n=o.max,a=d.TextBaseline.BOTTOM}a&&e.textOptions({baseline:a})}for(var l=0,s=this.levels;l<s.length;l++){var c,h,u,f=s[l];this._isLevelVisible(f)&&(u=f.theme||i,c=Math.round((t[1].x-t[0].x)*f.value+t[0].x),this.showLevelBackgrounds&&(r&&(e.polygonPath(r,o.min,r,o.max,c,o.max,c,o.min),e.fill(u.fill||i.fill)),r=c),this.showLevelLines&&(e.linePath(c,o.min,c,o.max),e.stroke(u.line||i.line)),this.showLevelValues&&(f=Number(f.value).toFixed(0),h=this._levelValueOffsetFromHorPosition(u,i),u=u.text||i.text,e.fillText(f,this._adjustXWithTextOffset(c)+h,n,u)))}}1<t.length&&this.showTrendLine&&(e.polylinePath(t),e.stroke(i.trendLine)),this._drawSelectionMarkersIfSelected(t)}}},i.prototype._linesYRange=function(t){var e=d.FibonacciLevelLineExtension,i=this.chartPanel.contentFrame,o=Math.max(t[0].y,t[1].y),r=Math.min(t[0].y,t[1].y);switch(this.levelLinesExtension){case e.NONE:break;case e.TOP:r=0;break;case e.BOTTOM:o=i.height;break;case e.BOTH:r=0,o=i.height;break;default:throw new Error("Unknown level lines extension: "+this.levelLinesExtension)}return{min:r,max:o}},i.defaults=e,i);function i(){return null!==t&&t.apply(this,arguments)||this}d.FibonacciTimeZonesDrawing=e,d.Drawing.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(l){"use strict";var t,e={levels:[{value:0},{value:.2361},{value:.382},{value:.5},{value:.618},{value:.764},{value:1},{value:1.618},{value:2.618},{value:3.618},{value:4.236}],reverse:!1,levelTextVerPosition:l.FibonacciLevelTextVerPosition.MIDDLE,levelLinesExtension:l.FibonacciLevelLineExtension.NONE},e=(t=l.FibonacciDrawingBase,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"fibonacciExtensions"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"reverse",{get:function(){var t=this._optionValue("reverse");return null!=t?t:i.defaults.reverse},set:function(t){this._setOption("reverse",t,l.DrawingEvent.REVERSE_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"levelLinesExtension",{get:function(){var t=this._optionValue("levelLinesExtension");return null!=t?t:i.defaults.levelLinesExtension},set:function(t){this._setOption("levelLinesExtension",t,l.DrawingEvent.LEVEL_LINES_EXTENSION_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 3},enumerable:!0,configurable:!0}),i.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.middle","drawing.all.dialog.end"]},i.prototype.bounds=function(){var i=this,t=this.cartesianPoints();if(t.length<this.pointsNeeded)return null;var e=this.levels.reduce(function(t,e){return i._isLevelVisible(e)?Math.max(t,e.value):t},Number.MIN_VALUE),e=this.reverse?Math.round((t[0].y-t[1].y)*e+t[2].y):Math.round((t[1].y-t[0].y)*e+t[2].y);return{left:Math.min(t[0].x,t[1].x,t[2].x),top:Math.min(t[0].y,t[1].y,t[2].y,e),width:Math.abs(Math.max(t[0].x,t[1].x,t[2].x)-Math.min(t[0].x,t[1].x,t[2].x)),height:Math.abs(Math.max(t[0].y,t[1].y,t[2].y,e)-Math.min(t[0].y,t[1].y,t[2].y,e))}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();if(e.length<this.pointsNeeded)return!1;if(this.showTrendLine&&l.Geometry.isPointNearPolyline(t,e))return!0;if(this.showLevelLines||this.showLevelBackgrounds)for(var i=this._linesXRange(e),o=0,r=this.levels;o<r.length;o++){var n=r[o];if(this._isLevelVisible(n)){var n=this.reverse?Math.round((e[0].y-e[1].y)*n.value+e[2].y):Math.round((e[1].y-e[0].y)*n.value+e[2].y),a={x:i.min,y:n},n={x:i.max,y:n};if(l.Geometry.isPointNearLine(t,a,n))return!0}}return this.selected&&l.Geometry.isPointNearPoint(t,e)},i.prototype._handlePanGesture=function(t,e){switch(t.state){case l.GestureState.STARTED:var i=this.cartesianPoints();if(1<i.length)for(var o=0;o<i.length;o++)if(l.Geometry.isPointNearPoint(e.pointerPosition,i[o]))return this._setDragPoint(o),this.changeCursor(l.DrawingCursorClass.RESIZE),!0;break;case l.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype.draw=function(){if(this.visible){var t=this.cartesianPoints();if(0!==t.length){var e=this.renderer,i=this.actualTheme;if(2<t.length){var o=this._linesXRange(t),r=void 0,n=void 0;this.showLevelValues&&(r=this._valueTextX(o),this._applyTextPosition());for(var a=0,l=this.levels;a<l.length;a++){var s,c,h,u,f=l[a];this._isLevelVisible(f)&&(s=f.theme||i,c=this.reverse?Math.round((t[0].y-t[1].y)*f.value+t[2].y):Math.round((t[1].y-t[0].y)*f.value+t[2].y),this.showLevelBackgrounds&&(n&&(e.polygonPath(o.min,n,o.max,n,o.max,c,o.min,c),e.fill(s.fill||i.fill)),n=c),this.showLevelLines&&(e.linePath(o.min,c,o.max,c),e.stroke(s.line||i.line)),this.showLevelValues&&(f=this._formatLevelValue(f),h=this._levelValueOffsetFromVerPosition(s,i),this.showLevelPrices&&(f+=" ("+this._formatPriceAtY(c)+")"),(u=this._levelTextAlign())&&e.textOptions({align:u}),u=s.text||i.text,e.fillText(f,r,this._adjustYWithTextOffset(c)+h,u)))}}1<t.length&&this.showTrendLine&&(e.polylinePath(t),e.stroke(i.trendLine)),this.selected&&this._drawSelectionMarkers(t)}}},i.prototype._levelTextAlign=function(){var t=this.levelLinesExtension,e=l.FibonacciLevelLineExtension,i=l.FibonacciLevelTextHorPosition;switch(this.levelTextHorPosition){case i.RIGHT:if(t===e.RIGHT||t===e.BOTH)return l.TextAlign.RIGHT;break;case i.LEFT:if(t===e.LEFT||t===e.BOTH)return l.TextAlign.LEFT}},i.prototype._linesXRange=function(t){var e=l.FibonacciLevelLineExtension,i=this.chartPanel.contentFrame,o=Math.min(t[1].x,t[2].x),r=Math.max(t[1].x,t[2].x);switch(this.levelLinesExtension){case e.NONE:break;case e.LEFT:o=i.left;break;case e.RIGHT:r=i.right;break;case e.BOTH:o=i.left,r=i.right;break;default:throw new Error("Unknown level lines extension: "+this.levelLinesExtension)}return{min:o,max:r}},i.prototype._valueTextX=function(t){var e,i=l.FibonacciLevelTextHorPosition;switch(this.levelTextHorPosition){case i.CENTER:e=(t.min+t.max)/2;break;case i.LEFT:e=t.min;break;case i.RIGHT:e=t.max;break;default:throw new Error("Unknown text horizontal position: "+this.levelTextHorPosition)}return e=this._adjustXWithTextOffset(e)},i.prototype._adjustXWithTextOffset=function(t){var e=t,i=l.FibonacciLevelLineExtension,o=this.levelLinesExtension,t=l.FibonacciLevelTextHorPosition;switch(this.levelTextHorPosition){case t.LEFT:o===i.LEFT||o===i.BOTH?e+=this._textOffset:e-=this._textOffset;break;case t.RIGHT:o===i.RIGHT||o===i.BOTH?e-=this._textOffset:e+=this._textOffset}return e},i.defaults=e,i);function i(){return null!==t&&t.apply(this,arguments)||this}l.FibonacciExtensionsDrawing=e,l.Drawing.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(_){"use strict";t=_.Drawing,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"andrewsPitchfork"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 3},enumerable:!0,configurable:!0}),i.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.middle","drawing.all.dialog.end"]},i.prototype.bounds=function(){var t=this.cartesianPoints();if(t.length<this.pointsNeeded)return null;var e=t[0],i=t[1],o=t[2],r=e.x,e=e.y,n=i.x,i=i.y,a=o.x,o=o.y,l=(a-n)/2+n,s=(o-i)/2+i,c=n-(r-l),h=i-(e-s),r=a-(r-l),l=o-(e-s),e=Math.sqrt(n*c+i*h),s={x:n+(c-n)*e,y:i+(h-i)*e},c=Math.sqrt(a*r+o*l),n={x:a+(r-a)*c,y:o+(l-o)*c};return{left:Math.min(t[0].x,t[1].x,t[2].x,s.x,n.x),top:Math.min(t[0].y,t[1].y,t[2].y,s.y,n.y),width:Math.abs(Math.max(t[0].x,t[1].x,t[2].x,s.x,n.x)-Math.min(t[0].x,t[1].x,t[2].x,s.x,n.x)),height:Math.abs(Math.max(t[0].y,t[1].y,t[2].y,s.y,n.y))-Math.min(t[0].y,t[1].y,t[2].y,s.y,n.y)}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();if(e.length<3)return!1;var i=e[0],o=e[1],e=e[2],r=i.x,n=i.y,a=o.x,l=o.y,s=e.x,c=e.y,h=(s-a)/2+a,u=(c-l)/2+l,f=a-(r-h),d=l-(n-u),p=s-(r-h),y=c-(n-u),m=Math.sqrt(r*h+n*u),h={x:r+(h-r)*m,y:n+(u-n)*m},r=Math.sqrt(a*f+l*d),u={x:a+(f-a)*r,y:l+(d-l)*r},n=Math.sqrt(s*p+c*y),m={x:s+(p-s)*n,y:c+(y-c)*n};return _.Geometry.isPointNearLine(t,o,e)||_.Geometry.isPointNearLine(t,i,h)||_.Geometry.isPointNearLine(t,o,u)||_.Geometry.isPointNearLine(t,e,m)},i.prototype._handlePanGesture=function(t,e){switch(t.state){case _.GestureState.STARTED:var i=this.cartesianPoints();if(1<i.length)for(var o=0;o<i.length;o++)if(_.Geometry.isPointNearPoint(e.pointerPosition,i[o]))return this._setDragPoint(o),this.changeCursor(_.DrawingCursorClass.RESIZE),!0;break;case _.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype.draw=function(){var t,e,i,o,r,n,a,l,s,c,h,u,f,d,p,y;!this.visible||0!==(t=this.cartesianPoints()).length&&(e=this.renderer,i=this.actualTheme,2<t.length?(o=t[0].x,r=t[0].y,n=t[1].x,a=t[1].y,u=n-(o-(d=((l=t[2].x)-n)/2+n)),f=a-(r-(h=((s=t[2].y)-a)/2+a)),p=l-(o-d),y=s-(r-h),c=o+(d-o)*(d=Math.sqrt(o*d+r*h)),h=r+(h-r)*d,u=n+(u-n)*(d=Math.sqrt(n*u+a*f)),f=a+(f-a)*d,p=l+(p-l)*(d=Math.sqrt(l*p+s*y)),y=s+(y-s)*d,e.linePath(o,r,c,h),e.line(n,a,u,f),e.line(l,s,p,y),e.line(n,a,l,s),e.stroke(i.line)):1<t.length&&(e.polylinePath(t),e.stroke(i.line)),this._drawSelectionMarkersIfSelected(t))};var t,e=i;function i(){return null!==t&&t.apply(this,arguments)||this}_.AndrewsPitchforkDrawing=e,_.Drawing.register(e)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(p){"use strict";e=p.Drawing,__extends(i,e),Object.defineProperty(i,"className",{get:function(){return"trendChannel"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),i.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.middle","drawing.all.dialog.end"]},i.prototype.bounds=function(){var t=this.cartesianPoints();if(t.length<this.pointsNeeded)return null;var e=t[0].x,i=t[0].y,o=t[1].x,r=t[1].y,n=t[2].x,a=t[2].y,l=n+(o-e),s=r+(a-i),c=e-(n-e),h=i-(a-i),o=o-e+c,e=r-(a-i),r=Math.sqrt(n*l+a*s),i=Math.round(n+(l-n)*r),n=Math.round(a+(s-a)*r),a=Math.sqrt(c*o+h*e),r=Math.round(c+(o-c)*a),a=Math.round(h+(e-h)*a);return{left:Math.min(t[0].x,t[1].x,t[2].x,i,r,l,c,o),top:Math.min(t[0].y,t[1].y,t[2].y,n,a,s,h,e),width:Math.abs(Math.max(t[0].x,t[1].x,t[2].x,l,c,o,i,r)-Math.min(t[0].x,t[1].x,t[2].x,l,c,o,i,r)),height:Math.abs(Math.max(t[0].y,t[1].y,t[2].y,s,h,e,n,a)-Math.min(t[0].y,t[1].y,t[2].y,s,h,e,n,a))}},i.prototype._finishUserDrawing=function(){e.prototype._finishUserDrawing.call(this);var t=this.cartesianPoints(),t=p.ChartPoint.convert({x:t[0].x,y:t[0].y-20},this.createPointBehavior,this.projection);this.appendChartPoint(t)},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();if(e.length<this.pointsNeeded)return!1;var i=e[0].x,o=e[0].y,r=e[1].x,n=e[1].y,a=e[2].x,e=e[2].y,l=a+(r-i),s=n+(e-o),c=i-(a-i),h=o-(e-o),u=r-i+c,f=n-(e-o),d=Math.sqrt(i*r+o*n),r=Math.round(i+(r-i)*d),n=Math.round(o+(n-o)*d),d=Math.sqrt(a*l+e*s),l=Math.round(a+(l-a)*d),s=Math.round(e+(s-e)*d),d=Math.sqrt(c*u+h*f),u=Math.round(c+(u-c)*d),f=Math.round(h+(f-h)*d);return p.Geometry.isPointNearLine(t,{x:i,y:o},{x:r,y:n})||p.Geometry.isPointNearLine(t,{x:a,y:e},{x:l,y:s})||p.Geometry.isPointNearLine(t,{x:c,y:h},{x:u,y:f})},i.prototype._handlePanGesture=function(t,e){switch(t.state){case p.GestureState.STARTED:var i=this.cartesianPoints();if(1<i.length)for(var o=0;o<i.length;o++)if(p.Geometry.isPointNearPoint(e.pointerPosition,i[o]))return this._setDragPoint(o),this.changeCursor(p.DrawingCursorClass.RESIZE),!0;break;case p.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),0===this._dragPoint&&this.chartPoints[2].translate(t.moveOffset.x,t.moveOffset.y,this.projection),!0}return!1},i.prototype.draw=function(){var t,e,i,o,r,n,a,l,s,c,h,u,f,d,p,y;!this.visible||0!==(t=this.cartesianPoints()).length&&(e=this.renderer,i=this.actualTheme,2<t.length?(o=t[0].x,r=t[0].y,c=t[1].x,h=t[1].y,u=(n=t[2].x)+(c-o),f=h+((a=t[2].y)-r),s=r-(a-r),p=c-o+(l=o-(n-o)),y=h-(a-r),d=Math.sqrt(o*c+r*h),c=Math.round(o+(c-o)*d),h=Math.round(r+(h-r)*d),d=Math.sqrt(n*u+a*f),u=Math.round(n+(u-n)*d),f=Math.round(a+(f-a)*d),d=Math.sqrt(l*p+s*y),p=Math.round(l+(p-l)*d),y=Math.round(s+(y-s)*d),e.linePath(o,r,c,h),e.line(n,a,u,f),e.line(l,s,p,y),e.stroke(i.line)):1<t.length&&(e.polylinePath(t),e.stroke(i.line)),this._drawSelectionMarkersIfSelected(t))};var e,t=i;function i(){return null!==e&&e.apply(this,arguments)||this}p.TrendChannelDrawing=t,p.Drawing.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(b){"use strict";var e,i=b.DrawingEvent||(b.DrawingEvent={}),t=(i.RANGE_RATIO_CHANGED="drawingRangeRatioChanged",e=b.Drawing,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"errorChannel"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rangeRatio",{get:function(){return this._optionValue("rangeRatio")||o.defaults.rangeRatio},set:function(t){if("number"!=typeof t)throw new TypeError("Range ratio must be a number.");if(!b.JsUtil.isPositiveNumber(t))throw new Error("Range ratio must be a number greater than 0.");this._options.rangeRatio=t,this.fire(i.RANGE_RATIO_CHANGED,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),o.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.end"]},o.prototype.bounds=function(){var t=this._drawingPoints;return!t||t.length<6?null:{left:Math.min(t[0].x,t[1].x),top:Math.min(t[0].y,t[1].y,t[2].y,t[3].y,t[4].y,t[5].y),width:Math.abs(t[1].x-t[0].x),height:Math.abs(Math.max(t[0].y,t[1].y,t[2].y,t[3].y,t[4].y,t[5].y)-Math.min(t[0].y,t[1].y,t[2].y,t[3].y,t[4].y,t[5].y))}},o.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;if(this.chartPoints.length<this.pointsNeeded)return!1;var e=this._drawingPoints;return!!e&&(b.Geometry.isPointNearLine(t,e[0],e[1])||b.Geometry.isPointNearLine(t,e[2],e[3])||b.Geometry.isPointNearLine(t,e[4],e[5]))},o.prototype._handlePanGesture=function(t,e){switch(t.state){case b.GestureState.STARTED:if(b.Geometry.isPointNearPoint(this.cartesianPoint(0),e.pointerPosition))this._setDragPoint(0);else{if(!b.Geometry.isPointNearPoint(this.cartesianPoint(1),e.pointerPosition))return!1;this._setDragPoint(1)}return this.changeCursor(b.DrawingCursorClass.RESIZE),!0;case b.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},o.prototype._finishUserDrawing=function(){e.prototype._finishUserDrawing.call(this);var t=this.cartesianPoints();t.length<2||(t[0].x>t[1].x&&(this.chartPoints[0].moveToPoint(t[1],this.projection),this.chartPoints[1].moveToPoint(t[0],this.projection)),this._drawingPoints=this._calculateDrawingPoints(t))},o.prototype.draw=function(){var t,e,i;!this.visible||0!==(t=this.cartesianPoints()).length&&(1<t.length&&(e=t[0].x,t[1].x<e&&(e=t[1],t[1]=t[0],t[0]=e),e=this._drawingPoints=this._calculateDrawingPoints(t),this._moveMainLineYPoint(e[2].y,e[3].y),(i=this.renderer).beginPath(),i.line(e[0].x,e[0].y,e[1].x,e[1].y),i.line(e[2].x,e[2].y,e[3].x,e[3].y),i.line(e[4].x,e[4].y,e[5].x,e[5].y),i.stroke(this.actualTheme.line),t=this._getMainLinePoints()),this._drawSelectionMarkersIfSelected(t))},o.prototype._calculateDrawingPoints=function(t){for(var e=t[0],t=t[1],i=this.projection,o=this.chart.primaryBarDataSeries(),r=i.recordByX(e.x),n=i.recordByX(t.x),a=Math.min(r,n),l=Math.max(r,n),s=o.high,c=0,h=a;h<=l;h++)s.valueAtIndex(h)>c&&(c=s.valueAtIndex(h));for(var u=o.low,f=c,h=a;h<=l;h++)u.valueAtIndex(h)<f&&(f=u.valueAtIndex(h));for(var r=(c-f)*this.rangeRatio,d=l-a+1,p=[],h=0;h<d;h++)p.push(o.low.valueAtIndex(a+h));var n=b.DrawingCalculationUtil.calculateLinearRegression(p),y=n.slope,n=n.firstValue,y=n+y*(d-1),m=i.yByValue(n+r),_=i.yByValue(y+r),C=i.yByValue(n),g=i.yByValue(y),n=i.yByValue(n-r),i=i.yByValue(y-r);return[{x:e.x,y:m},{x:t.x,y:_},{x:e.x,y:C},{x:t.x,y:g},{x:e.x,y:n},{x:t.x,y:i}]},o.prototype._getMainLinePoints=function(){return[this._drawingPoints[2],this._drawingPoints[3]]},o.prototype._moveMainLineYPoint=function(t,e){this.chartPoints[0].moveToY(t,this.projection),this.chartPoints[1].moveToY(e,this.projection)},o.defaults={rangeRatio:.5},o);function o(){return null!==e&&e.apply(this,arguments)||this}b.ErrorChannelDrawing=t,b.Drawing.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(g){"use strict";e=g.Drawing,__extends(i,e),Object.defineProperty(i,"className",{get:function(){return"quadrantLines"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"drawingPoints",{get:function(){return this._drawingPoints||(this._drawingPoints=this._calculateDrawingPoints(this.cartesianPoints())),this._drawingPoints},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),i.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.end"]},i.prototype.bounds=function(){var t=this.cartesianPoints();if(t.length<this.pointsNeeded)return null;var e=this.drawingPoints;return{left:Math.min(t[0].x,t[1].x),top:e[0][0].y,width:Math.abs(t[0].x-t[1].x),height:Math.abs(e[4][0].y-e[0][0].y)}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;if(this.chartPoints.length<2)return!1;for(var e=this.drawingPoints,i=0;i<5;i++)if(g.Geometry.isPointNearLine(t,e[i][0],e[i][1]))return!0;return!1},i.prototype._handlePanGesture=function(t,e){switch(t.state){case g.GestureState.STARTED:if(g.Geometry.isPointNearPoint(this.cartesianPoint(0),e.pointerPosition))this._setDragPoint(0);else{if(!g.Geometry.isPointNearPoint(this.cartesianPoint(1),e.pointerPosition))return!1;this._setDragPoint(1)}return this.changeCursor(g.DrawingCursorClass.RESIZE),!0;case g.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype._finishUserDrawing=function(){e.prototype._finishUserDrawing.call(this);var t=this.cartesianPoints();t[0].x>t[1].x&&(this.chartPoints[0].moveToPoint(t[1],this.projection),this.chartPoints[1].moveToPoint(t[0],this.projection)),this._drawingPoints=this._calculateDrawingPoints(t)},i.prototype.draw=function(){if(this.visible){var t=this.cartesianPoints();if(0!==t.length){if(1<t.length){var e=this.renderer,i=this._drawingPoints=this._calculateDrawingPoints(t);this._moveMainLineYPoint(i[2][0].y,i[2][1].y),e.beginPath();for(var o=0;o<5;o++)e.line(i[o][0].x,i[o][0].y,i[o][1].x,i[o][1].y);e.stroke(this.actualTheme.line)}this.selected&&this._drawSelectionMarkers(this.cartesianPoints())}}},i.prototype._calculateDrawingPoints=function(t){for(var e=t[0],i=t[1],o=this.projection,t=o.recordByX(e.x),r=o.recordByX(i.x),n=Math.min(t,r),a=Math.max(t,r),l=0,s=this.chart.primaryDataSeries(g.DataSeriesSuffix.HIGH),c=n;c<=a;c++){var h=s.valueAtIndex(c);l<h&&(l=h)}for(var u=l,f=this.chart.primaryDataSeries(g.DataSeriesSuffix.LOW),c=n;c<=a;c++){var d=f.valueAtIndex(c);d<u&&(u=d)}for(var p=l+(l-u)/4,y=[],c=0;c<5;c++){p-=(l-u)/4;var m=o.yByValue(p),_=e.x,C=i.x;y.push([{x:_,y:m},{x:C,y:m}])}return y},i.prototype._moveMainLineYPoint=function(t,e){this.chartPoints[0].moveToY(t,this.projection),this.chartPoints[1].moveToY(e,this.projection)};var e,t=i;function i(){return null!==e&&e.apply(this,arguments)||this}g.QuadrantLinesDrawing=t,g.Drawing.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(w){"use strict";e=w.Drawing,__extends(i,e),Object.defineProperty(i,"className",{get:function(){return"raffRegression"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),i.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.end"]},i.prototype.bounds=function(){var t=this._drawingPoints;return!t||t.length<6?null:{left:Math.min(t[0].x,t[1].x),top:Math.min(t[0].y,t[1].y,t[2].y,t[3].y,t[4].y,t[5].y),width:Math.abs(t[1].x-t[0].x),height:i._calculateBoundsHeight(t)}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;if(this.chartPoints.length<this.pointsNeeded)return!1;var e=this._drawingPoints;return!!this._drawingPoints&&(w.Geometry.isPointNearLine(t,e[0],e[1])||w.Geometry.isPointNearLine(t,e[2],e[3])||w.Geometry.isPointNearLine(t,e[4],e[5]))},i.prototype._handlePanGesture=function(t,e){switch(t.state){case w.GestureState.STARTED:if(w.Geometry.isPointNearPoint(this.cartesianPoint(0),e.pointerPosition))this._setDragPoint(0);else{if(!w.Geometry.isPointNearPoint(this.cartesianPoint(1),e.pointerPosition))return!1;this._setDragPoint(1)}return this.changeCursor(w.DrawingCursorClass.RESIZE),!0;case w.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype._finishUserDrawing=function(){e.prototype._finishUserDrawing.call(this);var t=this.cartesianPoints();t[0].x>t[1].x&&(this.chartPoints[0].moveToPoint(t[1],this.projection),this.chartPoints[1].moveToPoint(t[0],this.projection)),this._drawingPoints=this._calculateDrawingPoints(t)},i.prototype.draw=function(){var t,e,i;!this.visible||(t=this.cartesianPoints()).length<1||(1<t.length&&(e=t[0].x,t[1].x<e&&(e=t[1],t[1]=t[0],t[0]=e),(e=this.renderer).beginPath(),i=this._drawingPoints=this._calculateDrawingPoints(t),this._moveMainLineYPoint(i[2].y,i[3].y),e.line(i[0].x,i[0].y,i[1].x,i[1].y),e.line(i[2].x,i[2].y,i[3].x,i[3].y),e.line(i[4].x,i[4].y,i[5].x,i[5].y),t=this._getMainLinePoints(),e.stroke(this.actualTheme.line)),this._drawSelectionMarkersIfSelected(t))},i.prototype._calculateDrawingPoints=function(t){for(var e=t[0],t=t[1],i=this.projection,o=i.recordByX(e.x),r=i.recordByX(t.x),n=this.chart.primaryBarDataSeries(),a=Math.min(o,r),l=Math.min(Math.max(o,r),n.date.length-1),s=l-a+1,c=[],h=0;h<s;h++)c.push(n.close.valueAtIndex(a+h));for(var o=w.DrawingCalculationUtil.calculateLinearRegression(c),u=o.slope,f=o.firstValue,r=f+u*(s-1),d=0,p=0,h=a,y=0;h<=l;h++,y++){var m=f+u*y,_=n.high.valueAtIndex(h)-m,m=m-n.low.valueAtIndex(h);0<_&&d<_&&(d=_),0<m&&p<m&&(p=m)}var o=Math.max(d,p),C=i.yByValue(f+o),g=i.yByValue(r+o),b=i.yByValue(f),S=i.yByValue(r),v=i.yByValue(f-o),i=i.yByValue(r-o);return[{x:e.x,y:C},{x:t.x,y:g},{x:e.x,y:b},{x:t.x,y:S},{x:e.x,y:v},{x:t.x,y:i}]},i.prototype._getMainLinePoints=function(){return[this._drawingPoints[2],this._drawingPoints[3]]},i.prototype._moveMainLineYPoint=function(t,e){this.chartPoints[0].moveToY(t,this.projection),this.chartPoints[1].moveToY(e,this.projection)},i._calculateBoundsHeight=function(t){var e=Math.min(t[0].y,t[1].y),t=Math.max(t[4].y,t[5].y);return Math.abs(e-t)};var e,t=i;function i(){return null!==e&&e.apply(this,arguments)||this}w.RaffRegressionDrawing=t,w.Drawing.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(y){"use strict";e=y.Drawing,__extends(i,e),Object.defineProperty(i,"className",{get:function(){return"tironeLevels"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"drawingPoints",{get:function(){return this._drawingPoints||(this._drawingPoints=this._calculateDrawingPoints(this.cartesianPoints())),this._drawingPoints},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),i.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.end"]},i.prototype.bounds=function(){var t=this.cartesianPoints();if(t.length<this.pointsNeeded)return null;var e=this.drawingPoints;return{left:t[0].x,top:e[0].y,width:t[1].x-t[0].x,height:Math.abs(e[0].y-e[5].y)}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;if(this.chartPoints.length<this.pointsNeeded)return!1;var e=this.drawingPoints;return y.Geometry.isPointNearLine(t,e[0],e[1])||y.Geometry.isPointNearLine(t,e[2],e[3])||y.Geometry.isPointNearLine(t,e[4],e[5])},i.prototype._handlePanGesture=function(t,e){switch(t.state){case y.GestureState.STARTED:if(y.Geometry.isPointNearPoint(this.cartesianPoint(0),e.pointerPosition))this._setDragPoint(0);else{if(!y.Geometry.isPointNearPoint(this.cartesianPoint(1),e.pointerPosition))return!1;this._setDragPoint(1)}return this.changeCursor(y.DrawingCursorClass.RESIZE),!0;case y.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype._finishUserDrawing=function(){e.prototype._finishUserDrawing.call(this);var t=this.cartesianPoints();t[0].x>t[1].x&&(this.chartPoints[0].moveToPoint(t[1],this.projection),this.chartPoints[1].moveToPoint(t[0],this.projection)),this._drawingPoints=this._calculateDrawingPoints(t)},i.prototype.draw=function(){var t,e,i;!this.visible||0!==(t=this.cartesianPoints()).length&&(1<t.length&&(e=this._drawingPoints=this._calculateDrawingPoints(t),this._moveMainLineYPoint(e[2].y,e[3].y),(i=this.renderer).beginPath(),i.line(e[0].x,e[0].y,e[1].x,e[1].y),i.line(e[2].x,e[2].y,e[3].x,e[3].y),i.line(e[4].x,e[4].y,e[5].x,e[5].y),i.stroke(this.actualTheme.line),t=this._getMainLinePoints()),this._drawSelectionMarkersIfSelected(t))},i.prototype._calculateDrawingPoints=function(t){for(var e=t[0],t=t[1],i=this.projection,o=i.recordByX(e.x),r=i.recordByX(t.x),n=Math.min(o,r),a=Math.max(o,r),l=this.chart.primaryDataSeries(y.DataSeriesSuffix.HIGH),s=0,c=n;c<=a;c++){var h=l.valueAtIndex(c);s<h&&(s=h)}for(var u=this.chart.primaryDataSeries(y.DataSeriesSuffix.LOW),f=s,c=n;c<=a;c++){var d=u.valueAtIndex(c);d<f&&(f=d)}var o=i.yByValue(s-(s-f)/3),r=o,n=i.yByValue(f+(s-f)/2),p=n,i=i.yByValue(f+(s-f)/3);return[{x:e.x,y:o},{x:t.x,y:r},{x:e.x,y:n},{x:t.x,y:p},{x:e.x,y:i},{x:t.x,y:i}]},i.prototype._getMainLinePoints=function(){var t=this.drawingPoints;return[t[2],t[3]]},i.prototype._moveMainLineYPoint=function(t,e){this.chartPoints[0].moveToY(t,this.projection),this.chartPoints[1].moveToY(e,this.projection)};var e,t=i;function i(){return null!==e&&e.apply(this,arguments)||this}y.TironeLevelsDrawing=t,y.Drawing.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(i){"use strict";e=i.Drawing,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"speedLines"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"extend",{get:function(){return this._extend},set:function(t){this._extend=t},enumerable:!0,configurable:!0}),o.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.end"]},o.prototype.bounds=function(){var t=this._drawingPoints;return!t||t.length<6?null:{left:Math.min(t[0].x,t[1].x),top:Math.min(t[0].y,t[1].y,t[2].y,t[3].y,t[4].y,t[5].y),width:Math.abs(t[1].x-t[0].x),height:Math.abs(Math.max(t[0].y,t[1].y,t[2].y,t[3].y,t[4].y,t[5].y)-Math.min(t[0].y,t[1].y,t[2].y,t[3].y,t[4].y,t[5].y))}},o.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;if(this.chartPoints.length<this.pointsNeeded)return!1;var e=this._drawingPoints;return!!this._drawingPoints&&(i.Geometry.isPointNearLine(t,e[0],e[1])||i.Geometry.isPointNearLine(t,e[2],e[3])||i.Geometry.isPointNearLine(t,e[4],e[5]))},o.prototype._handlePanGesture=function(t,e){switch(t.state){case i.GestureState.STARTED:if(i.Geometry.isPointNearPoint(this._markersPoints[0],e.pointerPosition))this._setDragPoint(0);else{if(!i.Geometry.isPointNearPoint(this._markersPoints[1],e.pointerPosition))return!1;this._setDragPoint(1)}return this.changeCursor(i.DrawingCursorClass.RESIZE),!0;case i.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},o.prototype.draw=function(){var t,e,i;!this.visible||0!==(t=this.cartesianPoints()).length&&(1<t.length&&(e=this.renderer,i=this._drawingPoints=this._calculateDrawingPoints(t),e.beginPath(),e.line(i[0].x,i[0].y,i[1].x,i[1].y),e.line(i[2].x,i[2].y,i[3].x,i[3].y),e.line(i[4].x,i[4].y,i[5].x,i[5].y),e.stroke(this.actualTheme.line),t=this._markersPoints),this._drawSelectionMarkersIfSelected(t))},o.prototype._calculateDrawingPoints=function(t){var e,i=t[0].x,o=t[0].y,r=t[1].x,n=t[1].y,a=this.chart.primaryBarDataSeries(),l=a.high,a=a.low,s=l.valueAtIndex(this.projection.recordByX(i)),c=a.valueAtIndex(this.projection.recordByX(i)),l=l.valueAtIndex(this.projection.recordByX(r)),a=a.valueAtIndex(this.projection.recordByX(r)),h=c<l,u=0,f=0;return f=(u=(h=h&&a<s?n<o:h)?(o=this.projection.yByValue(c),n=this.projection.yByValue(l),e=c+.333*(l-c),this.projection.yByValue(c+.667*(l-c))):(o=this.projection.yByValue(s),n=this.projection.yByValue(a),e=s-.333*(s-a),this.projection.yByValue(s-.667*(s-a))),this.projection.yByValue(e)),i=this.projection.xByRecord(this.projection.recordByX(t[0].x)),r=this.projection.xByRecord(this.projection.recordByX(t[1].x)),this._markersPoints=[{x:i,y:o},{x:r,y:n}],this.extend&&(h=r-i,l=Math.sqrt(i*r+o*n),r=Math.round(i+h*l),n=Math.round(o-(o-n)*l),u=Math.round(o-(o-u)*l),f=Math.round(o-(o-f)*l)),[{x:i,y:o},{x:r,y:n},{x:i,y:o},{x:r,y:u},{x:i,y:o},{x:r,y:f}]};var e,t=o;function o(){var t=null!==e&&e.apply(this,arguments)||this;return t._extend=!0,t}i.SpeedLinesDrawing=t,i.Drawing.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(r){"use strict";(i=e=r.DrawingEvent||(r.DrawingEvent={})).ANGLES_CHANGED="drawingAnglesChanged",i.SHOW_ANGLE_LINE_CHANGED="drawingShowAngleLineChanged",t=r.Drawing,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"gannFan"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"angles",{get:function(){return this._optionValue("angles")||o.defaults.angles},set:function(t){if(null!=t&&!Array.isArray(t))throw new TypeError("Angles must be an array of numbers.");this._options.angles=t,this.fire(e.ANGLES_CHANGED,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),o.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.end"]},o.prototype.bounds=function(){var t=this.cartesianPoints();if(t.length<2)return null;this._drawingPoints=this._calculateDrawingPoints(t);var e=this._drawingPoints[0][1],i=this._drawingPoints[this._drawingPoints.length-1][1];return{left:Math.min(t[0].x,t[1].x,e.x,i.x),top:Math.min(t[0].y,t[1].y,e.y,i.y),width:Math.abs(Math.max(t[0].x,t[1].x,e.x,i.x)-Math.min(t[0].x,t[1].x,e.x,i.x)),height:Math.abs(Math.max(t[0].y,t[1].y,e.y,i.y)-Math.min(t[0].y,t[1].y,e.y,i.y))}},o.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;if(this.cartesianPoints().length<this.pointsNeeded)return!1;for(var e=0,i=this._drawingPoints;e<i.length;e++){var o=i[e];if(r.Geometry.isPointNearLine(t,o[0],o[1]))return!0}return!1},o.prototype._handlePanGesture=function(t,e){switch(t.state){case r.GestureState.STARTED:if(r.Geometry.isPointNearPoint(this.cartesianPoint(0),e.pointerPosition))this._setDragPoint(0);else{if(!r.Geometry.isPointNearPoint(this.cartesianPoint(1),e.pointerPosition))return!1;this._setDragPoint(1)}return this.changeCursor(r.DrawingCursorClass.RESIZE),!0;case r.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},o.prototype.draw=function(){if(this.visible){var t=this.cartesianPoints();if(0!==t.length){if(1<t.length){var e=this.renderer;e.beginPath(),this._drawingPoints=this._calculateDrawingPoints(t);for(var i=0,o=this._drawingPoints;i<o.length;i++){var r=o[i];e.line(r[0].x,r[0].y,r[1].x,r[1].y)}e.stroke(this.actualTheme.line)}this._drawSelectionMarkersIfSelected(t)}}},o.prototype._calculateDrawingPoints=function(t){for(var e=t[0].x,i=t[0].y,o=t[1].x,r=t[1].y,n=this.chartPanel.contentFrame,a=o<e?n.left:n.right,l=[],s=0,c=this.angles;s<c.length;s++){var h=c[s],r=i-Math.round(i-t[1].y)*h.value;l.push([{x:e,y:i},{x:o,y:r}])}for(var u=0,f=l;u<f.length;u++){var d=f[u],i=d[0].y;r=d[1].y,e=d[0].x,o=d[1].x,d[1].x=a,d[1].y=Math.round(i+(a-e)*(r-i)/(o-e))}return l},o.defaults={angles:[{value:.125},{value:.25},{value:.3333},{value:.5},{value:1},{value:2},{value:3},{value:4},{value:8}]};var e,t,i=o;function o(){return null!==t&&t.apply(this,arguments)||this}r.GannFanDrawing=i,r.Drawing.register(i)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(n){"use strict";e=n.Drawing,__extends(i,e),Object.defineProperty(i,"className",{get:function(){return"trendAngle"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"radius",{get:function(){return this._options.radius||i.defaults.radius},set:function(t){this._setOption("radius",t)},enumerable:!0,configurable:!0}),i.prototype.bounds=function(){var t=this.cartesianPoints();return t.length<this.pointsNeeded?null:{left:Math.min(t[0].x,t[1].x),top:Math.min(t[0].y,t[1].y),width:Math.abs(t[0].x-t[1].x),height:Math.abs(t[0].y-t[1].y)}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e,i=this.cartesianPoints();return null==this._dragPoint&&null!=this._arctan&&(this._angleCorrection=!0,e=Math.tan(this._arctan)*(i[0].x-i[1].x)+i[0].y,i[0].x===i[1].x&&i[0].y===e||(i[1].y=e)),1<i.length&&n.Geometry.isPointNearPolyline(t,i)},i.prototype._handlePanGesture=function(t,e){switch(t.state){case n.GestureState.STARTED:var i,o,r;if(n.Geometry.isPointNearPoint(this.cartesianPoint(0),e.pointerPosition)&&null==this._arctan)this._setDragPoint(0);else{if(!n.Geometry.isPointNearPoint(this.cartesianPoint(1),e.pointerPosition))return null!=this._arctan&&(i=this.cartesianPoints(),r=(o=Math.tan(this._arctan))*(i[0].x-i[1].x)+i[0].y,(i[0].x!==i[1].x||i[0].y!==r)&&o<this._tanMax&&o>this._tanMin&&(this.chartPoints[1].value=this.projection.valueByY(r))),!1;this._setDragPoint(1)}return this.changeCursor(n.DrawingCursorClass.RESIZE),!0;case n.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype.draw=function(){var t,e,i;this.visible&&(t=this.cartesianPoints(),null==this._dragPoint&&this._arctan&&this._angleCorrection&&(e=(i=Math.tan(this._arctan))*(t[0].x-t[1].x)+t[0].y,(t[0].x!==t[1].x||t[0].y!==e)&&i<this._tanMax&&i>this._tanMin&&(t[1].y=e)),1<t.length&&((i=this.renderer).polylinePath(t),i.stroke(this.actualTheme.line),this._calculateAngle(t)),this._drawSelectionMarkersIfSelected(t))},i.prototype._calculateAngle=function(t){var e=Math.atan((t[1].y-t[0].y)/(t[0].x-t[1].x)),i=isNaN(e)?90:Math.round(e*(180/Math.PI)),e=(this._arctan=e,-i*Math.PI/180),o=!1;i<=0&&t[1].x<=t[0].x&&(i=180+i,e+=Math.PI),0<i&&t[1].x<=t[0].x&&t[1].y>t[0].y&&(i-=180,e+=Math.PI,o=!0),i<0&&t[1].x>t[0].x&&(o=!0),this._drawTrendAngle(i.toFixed(0),e,o,t)},i.prototype._drawTrendAngle=function(t,e,i,o){var r=this.renderer;r.horLinePath(o[0].x,o[0].x+this.radius,o[0].y),r.stroke(this.actualTheme.horizontalLine),r.arcPath(o[0].x,o[0].y,this.radius,e,0,i),r.stroke(this.actualTheme.arc),r.fillText(t.toString()+"°",o[0].x+this._textOffset+this.radius,o[0].y+this._textOffset,this.actualTheme.text)},i.defaults={radius:30};var e,t=i;function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._tanMax=0x3a052cf8639b6a,t._tanMin=-0x3a052cf8639b6a,t._textOffset=4,t._angleCorrection=!1,t}n.TrendAngleDrawing=t,n.Drawing.register(t)}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(i){"use strict";(t=o=i.TradingToolState||(i.TradingToolState={}))[t.NONE=0]="NONE",t[t.MOVING=1]="MOVING",r=i.ChartPanelObject,__extends(e,r),Object.defineProperty(e.prototype,"locked",{get:function(){return this._locked},set:function(t){this._locked=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canHandleEvents",{get:function(){return this.visible},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canMove",{get:function(){return!this.locked},enumerable:!0,configurable:!0}),e.prototype._onChartPanelChanged=function(t){var e=this;r.prototype._onChartPanelChanged.call(this,t),this.chartPanel&&(this._initButtonsInternal(),this.chart.on(i.ChartEvent.THEME_CHANGED,function(){return e._changeButtonsTheme()},this),this.update())},e.prototype.update=function(){},e.prototype.initButtons=function(){return null},e.prototype._initButtonsInternal=function(){var t=this.initButtons();t&&(this._eventHandlers=new i.HandlersEvents(t))},e.prototype._changeButtonsTheme=function(){var e=this;this._eventHandlers&&this.chart&&this._eventHandlers.handlers.forEach(function(t){return t.chartTheme=e.chart.theme})},e.prototype._initGestures=function(){this._gestures=new i.GestureArray([new i.DoubleClickGesture({handler:this._handleDoubleClickGesture,hitTest:this.hitTest}),new i.PanGesture({handler:this._handlePanGestureInternal,hitTest:this._panGestureHitTest,button:i.MouseButton.LEFT})],this)},e.prototype._handleDoubleClickGesture=function(t,e){return!1},e.prototype._panGestureHitTest=function(t){return this.visible&&this.canMove&&this.hitTest(t)},e.prototype._handlePanGestureInternal=function(t,e){if(this._handlePanGesture(t,e))switch(t.state){case i.GestureState.STARTED:this.changeCursor(i.DrawingCursorClass.RESIZE_NS);break;case i.GestureState.CONTINUED:this._tradingToolState=o.MOVING;break;case i.GestureState.FINISHED:this._tradingToolState=o.NONE,this.changeCursor()}this.setNeedsUpdatePanel()},e.prototype.hitTest=function(t){return!1},e.prototype.handleEvent=function(t){return!(!this._eventHandlers||!this._eventHandlers.handleEvent(t))||this._gestures.handleEvent(t)},e.prototype._handlePanGesture=function(t,e){return!1},e.prototype.remove=function(){var t=this.chartPanel;return!!t&&(this.chart.off(i.ChartEvent.THEME_CHANGED,this),t.removeObjects(this),this.setNeedsUpdatePanel(),this.destroy(),!0)},e.prototype.draw=function(){this._eventHandlers&&this._eventHandlers.draw(),r.prototype.draw.call(this)},e.prototype.setNeedsUpdatePanel=function(){var t=this.chartPanel;t&&t.setNeedsUpdate()},e.prototype.destroy=function(){this._eventHandlers&&this._eventHandlers.destroy(),r.prototype.destroy.call(this)};var o,r,t=e;function e(){var t=r.call(this,{})||this;return t._tradingToolState=o.NONE,t.visible=!0,t._initGestures(),t.locked=!1,t.zIndex=300,t}i.TradingTool=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__extends=(!function(r){"use strict";r.TradingPanelEvents={TRADING_AREA_CLICKED:"TRADING_AREA_CLICKED"},r.TradingPanelUnit={Pixels:"pixels",Percents:"percent"},Object.freeze(r.TradingPanelUnit);o=r.TradingTool,__extends(e,o),Object.defineProperty(e.prototype,"theme",{get:function(){return this.chart.theme.tradingPanel},enumerable:!0,configurable:!0}),e.prototype.drawValueMarkers=function(){this.valueMarkerConfig&&this.visible&&this.chart.valueMarker.draw(this.valueMarkerConfig.price,this.chart.mainPanel.valueScale,r.getDefaultValueMarkerTheme(this.valueMarkerBackground,this.theme.markerFontColor))},e.prototype._initGestures=function(){this._gestures=new r.GestureArray([new r.ClickGesture({handler:this._handleClick,hitTest:this.hitTest}),new r.MouseHoverGesture({handler:this._handleHover,hitTest:function(){return!0}})],this)},e.prototype.hitTest=function(t){var e=this.chartPanel.contentFrame;return this.visible&&t.x>=e.right&&t.x<=e.width+2*this.chart.tradingPanelWidth&&t.y>e.top&&t.y<e.height},e.prototype._handleClick=function(t,e){var i=this.chartPanel.contentFrame,o=this.projection.valueByY(e.pointerPosition.y);this._isInSellArea(i,e.pointerPosition)?this.fire(r.TradingPanelEvents.TRADING_AREA_CLICKED,{price:o,event:e,side:r.OrderAction.SELL}):this._isInBuyArea(i,e.pointerPosition)&&this.fire(r.TradingPanelEvents.TRADING_AREA_CLICKED,{price:o,event:e,side:r.OrderAction.BUY})},e.prototype._handleHover=function(t,e){var i=this.chartPanel.contentFrame,o=(this.valueMarkerConfig=e.pointerPosition,this.theme);this._isInSellArea(i,e.pointerPosition)?(this.shouldChartUpdate=!0,this.valueMarkerBackground=o.sellMarkerBackground,this.isSell=!0,this._setPrice()):this._isInBuyArea(i,e.pointerPosition)?(this.valueMarkerBackground=o.buyMarkerBackground,this.shouldChartUpdate=!0,this.isSell=!1,this._setPrice()):(this.shouldChartUpdate&&(this.shouldChartUpdate=!1,this.chart.setNeedsUpdate()),this.valueMarkerConfig=null),this.shouldChartUpdate&&this.chart.setNeedsUpdate()},e.prototype._setPrice=function(){var t=this.projection.valueByY(this.valueMarkerConfig.y),e=1/this.chart.instrument.tickSize,t=Math.ceil(t*e)/e;this.valueMarkerConfig.y=this.projection.yByValue(t),this.valueMarkerConfig.price=t},e.prototype._isInSellArea=function(t,e){t=t.right+this.chart.tradingPanelWidth;return e.x>=t&&e.x<=t+this.chart.tradingPanelWidth},e.prototype._isInBuyArea=function(t,e){return e.x>=t.right&&e.x<=t.right+this.chart.tradingPanelWidth},e.prototype.draw=function(){var t,e,i;this.chart&&this.visible&&(t=this.renderer,e=this.chartPanel.contentFrame,i=this.theme,t.save(),t.beginPath(),t.clearRect(e.right,0,this.chart.getTradingPanelWidth(),e.height),t.rectPath(e.right,0,this.chart.tradingPanelWidth,e.height),t.fill({fillColor:i.buyPanelBackground}),t.rectPath(e.right+this.chart.tradingPanelWidth,0,this.chart.tradingPanelWidth,e.height),t.fill({fillColor:i.sellPanelBackground}),t.closePath(),t.restore(),this._drawHoverLine(t,e),o.prototype.draw.call(this))},e.prototype._drawHoverLine=function(t,e){var i;this.valueMarkerConfig&&(e=e.right,this.isSell&&(e+=this.chart.tradingPanelWidth),i=this.valueMarkerConfig.y,t.beginPath(),t.moveTo(e,i),t.lineTo(e+this.chart.tradingPanelWidth,i),t.stroke({width:1,strokeColor:this.valueMarkerBackground}),t.closePath())};var o,t=e;function e(){var t=o.call(this)||this;return t.zIndex=2500,t}r.TradingPanel=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__awaiter=this&&this.__awaiter||function(n,a,l,s){return new(l=l||Promise)(function(t,e){function i(t){try{r(s.next(t))}catch(t){e(t)}}function o(t){try{r(s.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(i,o)}r((s=s.apply(n,a||[])).next())})},__generator=this&&this.__generator||function(o,r){var n,a,l,s={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(i){return function(t){var e=[i,t];if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(l=a[2&e[0]?"return":e[0]?"throw":"next"])&&!(l=l.call(a,e[1])).done)return l;switch(a=0,(e=l?[0,l.value]:e)[0]){case 0:case 1:l=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,a=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(l=0<(l=s.trys).length&&l[l.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!l||e[1]>l[0]&&e[1]<l[3])){s.label=e[1];break}if(6===e[0]&&s.label<l[1]){s.label=l[1],l=e;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(e);break}l[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(o,s)}catch(t){e=[6,t],a=0}finally{n=l=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},LengthUnit={Percents:"percents",Pixels:"pixels"},LengthType=(Object.freeze(LengthUnit),{Solid:"solid",Dotted:"dotted",Dashed:"dashed"}),LineTypeMap=(Object.freeze(LengthType),(_a={})[LengthType.Solid]=StockChartX.LineStyle.SOLID,_a[LengthType.Dashed]=StockChartX.LineStyle.DASH,_a[LengthType.Dotted]=StockChartX.LineStyle.DOT,_a),defaultTheme={ocoStopLimit:"rgb(0,51,233,1)",ocoStopOrder:"rgb(255,108,28,1)",orderBarLength:25,orderBarUnit:"percent",buy:{limit:{length:3,lengthUnit:"pixels",lineColor:"rgb(255,230,142,1)",lineType:"dashed"},market:{length:1,lengthUnit:"pixels",lineColor:"rgb(255,161,109,1)",lineType:"dashed"},stop:{length:2,lengthUnit:"pixels",lineColor:"rgb(255,238,180,1)",lineType:"solid"},stopLimit:{length:2,lengthUnit:"percents",lineColor:null,lineType:"dotted"}},sell:{limit:{length:3,lengthUnit:"pixels",lineColor:"rgb(255,230,142,1)",lineType:"dashed"},market:{length:1,lengthUnit:"pixels",lineColor:"rgb(255,161,109,1)",lineType:"dashed"},stop:{length:2,lengthUnit:"pixels",lineColor:"rgb(255,238,180,1)",lineType:"solid"},stopLimit:{length:2,lengthUnit:"percents",lineColor:null,lineType:"dotted"}}},__extends=(!function(u){"use strict";u.OrderAction={BUY:"buy",SELL:"sell"},Object.freeze(u.OrderAction),u.OrderKind={MARKET:"market",STOP:"stop",LIMIT:"limit",STOP_LIMIT:"stopLimit"},Object.freeze(u.OrderKind);(t={})[u.OrderKind.STOP]="SM",t[u.OrderKind.MARKET]="M",t[u.OrderKind.LIMIT]="L",t[u.OrderKind.STOP_LIMIT]="SL";var e=t;function f(t){var e=t.quantity.toString();return e=t.iceQuantity?"("+e+")"+t.iceQuantity:e}u.OrderState={PENDING_SUBMIT:"pendingSubmit",PENDING_CANCEL:"pendingCancel",PENDING_REPLACE:"pendingReplace",SUBMITTED:"submitted",ACCEPTED:"accepted"},Object.freeze(u.OrderState),u.OrderTimeInForce={GOOD_TILL_DATE:"goodTillDate",DAY:"day",FOK:"FOK",IOC:"IOC",GOOD_TILL_CANCEL:"goodTillCanceled"},Object.freeze(u.OrderTimeInForce),u.OrderBarEvents={CREATE_ORDER_SETTINGS_CLICKED:"createOrderSettingsClicked",ORDER_CREATED:"orderCreated",ORDER_UPDATED:"orderUpdated",ORDER_SETTINGS_CLICKED:"orderSettingsClicked",ACCEPT_ORDER_CLICKED:"acceptOrderClicked",CANCEL_ORDER_CLICKED:"cancelOrderClicked",ORDER_PRICE_CHANGED:"orderPriceChanged"};d=u.TradingTool,__extends(i,d),Object.defineProperty(i.prototype,"order",{get:function(){return this._order},set:function(t){this._order=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"theme",{get:function(){return this._theme||this.defaultTheme},set:function(t){this._theme=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"actualTheme",{get:function(){return this.theme[this.order.action][this.order.kind]},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"defaultTheme",{get:function(){return this.chart.theme.orderBar},enumerable:!0,configurable:!0}),i.prototype._getCancelButtonOptions=function(){return this._cancelButtonOptions},i.prototype._onCancelButtonClick=function(t){this.fire(u.OrderBarEvents.CANCEL_ORDER_CLICKED,{order:this.order,event:t}),this.autoRemove&&this.remove()},i.prototype._handleDoubleClickGesture=function(t,e){return this.modifyOrder=!0,this.fire(u.OrderBarEvents.ORDER_SETTINGS_CLICKED),d.prototype._handleDoubleClickGesture.call(this,t,e)},i.prototype._handlePanGesture=function(t,e){switch(t.state){case u.GestureState.STARTED:this._oldOrder=u.JsUtil.clone(this._order);break;case u.GestureState.CONTINUED:var i=this.projection.valueByY(e.pointerPosition.y);this.order.price=i,this.order.stopPrice=i;break;case u.GestureState.FINISHED:this._oldOrder.price!==this.order.price&&this.fire(u.OrderBarEvents.ORDER_PRICE_CHANGED,this.order,this._oldOrder)}return!0},i.prototype.initButtons=function(){var t=this.chart.theme,e=this.renderer,i=this._getColors.bind(this),e=new u.Button({renderer:e,type:u.ButtonType.CANCEL,chartTheme:t,options:this._getCancelButtonOptions.bind(this),onClick:this._onCancelButtonClick.bind(this)});return e.theme={line:{strokeColor:"#fff"},get fill(){return{fillColor:i().fillColor}}},[e]},i.prototype._getLineWidth=function(){var t=this.theme,e=t.orderBarLength;return t.orderBarUnit===LengthUnit.Percents?(100<e?100:e)/100*(this.chartPanel.contentFrame.right-this.figureOffset-this.cancelSize-this._textWidth):e},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.projection.yByValue(this.order.price),i=this.chartPanel.contentFrame.width,o=i-this._getLineWidth()-this._textWidth;return u.Geometry.isValueNearValue(t.y,e)&&(t.x>=o||t.x<=i)},i.prototype.draw=function(){var t,e,i,o,r,n,a,l,s,c,h;this.chart&&this.visible&&this.order&&(t=this.renderer,e=this.chartPanel.contentFrame,o=this.order,e=e.right,i=this.actualTheme,o=this.projection.yByValue(o.price),r=this.order.kind,n=this.figureOffset,c=this.cancelSize,a=e-this._getLineWidth()-n-c,l=this._getColors(),t.beginPath(),this._cancelButtonOptions={position:{x:e-c/2,y:o},size:c},e-=c,t.textOptions({baseline:u.TextBaseline.MIDDLE,align:u.TextAlign.LEFT}),this._textWidth=t.textWidth(p(r)+" "+f(this._order)),c=this._textWidth,h=this.xPadding,t.rectPath((s=a-c)-h,o-n,c+2*h,2*n),a+=n,t.fillStroke({fillColor:l.fillColor},{strokeColor:l.figureColor}),c=f(this._order),t.fillText(c+" "+p(r),s,o,{fillColor:"#fff",fontWeight:"600",fontSize:10}),t.horLinePath(a,e,o),h=LineTypeMap[i.lineType],t.stroke({width:i.length,strokeColor:l.strokeColor,lineStyle:h},!0),t.closePath(),d.prototype.draw.call(this))},i.prototype._getColors=function(){var t=this.actualTheme,e=t.lineColor;return this.order.isOco&&(e="stop"===this.order.kind?this.theme.ocoStopOrder:this.theme.ocoStopLimit),{fillColor:t.lineColor,strokeColor:t.lineColor,figureColor:e}},i.prototype.drawValueMarkers=function(){var t,e,i;this.order&&this.visible&&(t=this.chart.valueMarker,e=this.panelValueScale,i={fill:{fillColor:this._getColors().fillColor},text:{fillColor:"#fff",fontSize:11}},t.draw(this.order.price,e,i))},i.prototype.update=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.setNeedsUpdatePanel(),[2]})})},i.prototype.destroy=function(){var t=this;this.chartPanel.orders.forEach(function(e){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(t){return[2,e.update()]})})}),d.prototype.destroy.call(this)};var d,t=i;function i(t){var e=d.call(this)||this,i=(e._textWidth=0,e.xPadding=10,e.cancelSize=11,e.figureOffset=10,e.modifyOrder=!1,t.order);if(i)return e.order=i,e.autoRemove=!!t.autoRemove,e;throw e.remove(),new Error("Order is not assigned.")}function p(t){return e[t]||t}u.OrderBar=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),__awaiter=this&&this.__awaiter||function(n,a,l,s){return new(l=l||Promise)(function(t,e){function i(t){try{r(s.next(t))}catch(t){e(t)}}function o(t){try{r(s.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(i,o)}r((s=s.apply(n,a||[])).next())})},__generator=this&&this.__generator||function(o,r){var n,a,l,s={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(i){return function(t){var e=[i,t];if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(l=a[2&e[0]?"return":e[0]?"throw":"next"])&&!(l=l.call(a,e[1])).done)return l;switch(a=0,(e=l?[0,l.value]:e)[0]){case 0:case 1:l=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,a=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(l=0<(l=s.trys).length&&l[l.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!l||e[1]>l[0]&&e[1]<l[3])){s.label=e[1];break}if(6===e[0]&&s.label<l[1]){s.label=l[1],l=e;break}if(l&&s.label<l[2]){s.label=l[2],s.ops.push(e);break}l[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(o,s)}catch(t){e=[6,t],a=0}finally{n=l=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},__extends=(!function(h){"use strict";h.PositionKind={SHORT:"short",LONG:"long"},Object.freeze(h.PositionKind),h.PositionBarEvents={CLOSE_POSITION_CLICKED:"closePositionClicked"};var u,f=0,d=0,t=(u=h.TradingTool,__extends(e,u),Object.defineProperty(e.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"theme",{get:function(){return this._theme},set:function(t){this._theme=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actualTheme",{get:function(){return this.theme||this.defaultTheme},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultTheme",{get:function(){return this.chart.theme.positionBar[this.position.kind]},enumerable:!0,configurable:!0}),e.prototype._getCloseButtonOptions=function(){return this._closeButtonOptions},e.prototype._onCloseButtonClick=function(){this.fire(h.PositionBarEvents.CLOSE_POSITION_CLICKED,this),this.autoRemove&&this.remove()},e.prototype.initButtons=function(){return[new h.Button({renderer:this.renderer,type:h.ButtonType.CANCEL,chartTheme:this.chart.theme,options:this._getCloseButtonOptions.bind(this),onClick:this._onCloseButtonClick.bind(this)})]},e.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.projection.yByValue(this.position.price);return h.Geometry.isValueNearValue(t.y,e)},e.prototype.draw=function(){var t,e,i,o,r,n,a,l,s,c;this.visible&&(t=this.renderer,i=.1*(e=this.chartPanel.contentFrame).width,o=.04*e.width,r=this.position,n=e.width,a=this.actualTheme,l=this.projection.yByValue(r.price),s=this._localizedKind||this.position.kind,this._tradingToolState===h.TradingToolState.NONE?(c=n,t.horLinePath(c,n-=i,l),t.stroke(a.line),n-=o,t.textOptions({baseline:h.TextBaseline.MIDDLE,align:h.TextAlign.CENTER}),t.fillText(r.quantity.toString(),n-d/2,l,a.quantity.text),n-=d,t.fillText(s,(n-=o)-f/2,l,a.kind.text),n-=f,this._closeButtonOptions={position:{x:(n-=o)-5,y:l},size:10},n-=10):this._closeButtonOptions=null,t.horLinePath(e.left,n,l),t.stroke(a.line),u.prototype.draw.call(this))},e.prototype.drawValueMarkers=function(){var t,e;this.position&&this.visible&&(t=this.chart.valueMarker,e=this.panelValueScale,t.draw(this.position.price,e,this.actualTheme.price))},e.prototype.update=function(e){return void 0===e&&(e=!0),__awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return e?[4,this._localizeValues()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this._updateTextWidth(),this.setNeedsUpdatePanel(),[2]}})})},e.prototype._updateTextWidth=function(){var t,e=this.renderer;e&&(t=this._localizedKind||this.position.kind,t=Math.round(e.textWidth(t)),e=Math.round(e.textWidth(this.position.quantity.toString())),d<e&&(d=e),f<t&&(f=t))},e.prototype._localizeValues=function(){return __awaiter(this,void 0,void 0,function(){var e,i;return __generator(this,function(t){switch(t.label){case 0:return e="trading.position.kind."+this.position.kind,[4,this.chart.localizeText(e)];case 1:return i=t.sent(),this._localizedKind=i!==e?i:this.position.kind,[2]}})})},e.prototype.destroy=function(){var t=this;d=f=0,this.chartPanel.positions.forEach(function(e){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(t){return[2,e.update(!1)]})})}),u.prototype.destroy.call(this)},e);function e(t){var e=u.call(this)||this,i=t.position;if(i)return e.position=i,e.autoRemove=!!t.autoRemove,e;throw e.remove(),new Error("Position is not assigned.")}h.PositionBar=t}(StockChartX=StockChartX||{}),this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}());!function(n){"use strict";n.ButtonType={ACCEPT:"accept",CANCEL:"cancel",NONE:"none"},Object.freeze(n.ButtonType);i=n.Control,__extends(e,i),Object.defineProperty(e.prototype,"options",{get:function(){return this._options()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"theme",{get:function(){return this._theme||this.defaultTheme},set:function(t){this._theme=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chartTheme",{set:function(t){this._chartTheme=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultTheme",{get:function(){return this._chartTheme.button[this.type]},enumerable:!0,configurable:!0}),e.prototype._initGestures=function(){return new n.GestureArray([new n.PanGesture({handler:this._handlePanGesture,button:n.MouseButton.LEFT}),new n.MouseHoverGesture({handler:this._handleOnMouseHover})],this,this._hitTest)},e.prototype._hitTest=function(t){var e=this.options;if(!e)return!1;var i=e.position,e=e.size/2,o={x:i.x-e,y:i.y+e},i={x:i.x+e,y:i.y-e};return n.Geometry.isPointInsideOrNearRectPoints(t,o,i)},e.prototype._handleOnMouseHover=function(t){this.changeCursor(t.state!==n.GestureState.FINISHED)},e.prototype._handlePanGesture=function(t,e){t.state===n.GestureState.FINISHED&&this._hitTest(e.pointerPosition)&&this._onClick&&this._onClick(e)},e.prototype.draw=function(){var t=this.options;if(t){var e=this._renderer,i=t.size,o=i/2,r=t.position;switch(e.rectPath(r.x-o,r.y-o,i,i),e.fill(this.theme.fill),e.beginPath(),o-=.1*i,this.type){case n.ButtonType.ACCEPT:e.moveTo(r.x-o,r.y),e.lineTo(r.x,r.y+o),e.lineTo(r.x+o,r.y-o);break;case n.ButtonType.CANCEL:e.line(r.x-(o/=2),r.y-o,r.x+o,r.y+o),e.line(r.x-o,r.y+o,r.x+o,r.y-o)}e.stroke(this.theme.line)}},e.prototype.destroy=function(){this.changeCursor()},e.prototype.changeCursor=function(t){var e=$(".scxContainer");t?e.addClass("scxCursorPointer"):e.removeClass("scxCursorPointer")};var i,t=e;function e(t){var e=i.call(this)||this;return e._renderer=t.renderer,e._options=t.options,e.type=t.type||n.ButtonType.NONE,e.chartTheme=t.chartTheme,e._onClick=t.onClick,e}n.Button=t}(StockChartX=StockChartX||{}),function(t){"use strict";function e(t){this._handlers=t}Object.defineProperty(e.prototype,"handlers",{get:function(){return this._handlers},enumerable:!0,configurable:!0}),e.prototype.handleEvent=function(e){var i=!1;return this._handlers.forEach(function(t){t.handleEvent(e)&&(i=!0)}),i},e.prototype.destroy=function(){this._handlers.forEach(function(t){return t.destroy()})},e.prototype.draw=function(){this._handlers.forEach(function(t){return t.draw()})},t.HandlersEvents=e}(StockChartX=StockChartX||{}),function(a){!function(n){"use strict";function t(t){this._crossHairView=t.crossHairView,this._tradingButton=t.tradingButton,this._chart=t.crossHairView.chart}t.prototype.setHandler=function(){for(var t=0,e=this._tradingButton;t<e.length;t++)e[t].$control.scx().tradingContextMenu(this._menuConfig())},t.prototype._menuConfig=function(){var r=this;return{menuContainer:null,showOnClick:!0,crossHairView:this._crossHairView,chart:this._chart,quantity:a.DEFAULT_QUANTITY,onItemSelected:function(t,e){var i=t.data("id");switch(i){case n.TradingContextMenu.MenuItem.NEW_ORDER:r._handleNewOrder(!0,!1,a.OrderAction.BUY,a.OrderKind.MARKET);break;case n.TradingContextMenu.MenuItem.BUY:var o=r._crossHairView.isAboveMarket?a.OrderKind.LIMIT:a.OrderKind.STOP;r._handleNewOrder(!1,!0,a.OrderAction.BUY,o);break;case n.TradingContextMenu.MenuItem.SELL:o=r._crossHairView.isAboveMarket?a.OrderKind.STOP:a.OrderKind.LIMIT;r._handleNewOrder(!1,!0,a.OrderAction.SELL,o);break;case n.TradingContextMenu.MenuItem.BUY_MARKET:r._handleNewOrder(!1,!0,a.OrderAction.BUY,a.OrderKind.MARKET);break;case n.TradingContextMenu.MenuItem.SELL_MARKET:r._handleNewOrder(!1,!0,a.OrderAction.SELL,a.OrderKind.MARKET);break;case void 0:break;default:throw new Error("Unknown menu item '"+i+"'")}}}},t.prototype._handleNewOrder=function(t,e,i,o){var r=this._crossHairView.tradingPrice;r&&(r=new a.OrderBar({order:{price:r,quantity:a.DEFAULT_QUANTITY,stopPrice:r,kind:o,state:a.OrderState.PENDING_SUBMIT,timeInForce:a.OrderTimeInForce.GOOD_TILL_CANCEL,action:i}}),e&&(this._chart.mainPanel.addObjects(r),this._chart.fire(a.OrderBarEvents.ORDER_CREATED,{sender:this,type:a.OrderBarEvents.ORDER_CREATED,target:r})),t&&r.fire.call(this._chart.mainPanel,a.OrderBarEvents.CREATE_ORDER_SETTINGS_CLICKED,r))},n.TradingCrossHairButton=t}(a.UI||(a.UI={}))}(StockChartX=StockChartX||{}),function(r){"use strict";var n=jQuery;function t(){}t.localize=function(t,e){t=t.locale;this._localize(t).then(function(){(e=e||n(document)).localize&&e.localize()})},t.localizeText=function(t,e,i){if(!e)return null;t=t instanceof r.Chart?t.locale:t||this.fallbackLocale;return this._localize(t).then(function(){var t;return i?(t={interpolation:{prefix:"{",suffix:"}"},replace:i.replace,defaultValue:i.defaultValue,context:i.context,count:i.count},i18next.t(e,t)):i18next.t(e)})},t._localize=function(t){var o=this;return new Promise(function(e,i){o._isInialized?i18next.language!==t?i18next.changeLanguage(t,function(){return e()}):e():(o._isInialized=!0,i18next.use(i18nextXHRBackend),i18next.init({debug:!1,lng:t,fallbackLng:o.fallbackLocale,backend:{loadPath:r.Environment.Path.locales+"{{lng}}.json"}},function(t){t?i():(jqueryI18next.init(i18next,n,{parseDefaultValueFromContent:!0,handleName:"localize"}),e())}))})},t._isInialized=!1,t.fallbackLocale="en",r.Localization=t}(StockChartX=StockChartX||{});