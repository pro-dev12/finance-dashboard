/**
 * StockChartX Web & Mobile
 * @version v2.22.2
 * @link http://www.modulusfe.com/products/web-mobile-stock-chart-library/stockchartx-html5-web-mobile/
 * @license Copyright 2012 to 2017 by Modulus Financial Engineering, Inc., Scottsdale, AZ USA
 * http://www.modulusfe.com
 * 
 * Your license agreement requires the use of the Modulus LicensePing.com licensing mechanism.
 * The mechanism monitors the usage and distribution patterns of our intellectual property.
 * If the usage or distribution patterns indicate that our licensing mechanism has either
 * been removed, altered, tampered with or that our intellectual property may be misused in
 * any form, our legal team may initiate contact with you to investigate the matter further.
 * 
 * Removal or modification of this license mechanism by any means whatsoever (editing the code,
 * removing the LicensePing.com URL reference, etc.) constitutes willful and criminal copyright
 * infringement in addition to giving rise to claims by Modulus Financial Engineering, Inc.
 * against you, as the developer, and your company as a whole for, among others:
 * 
 * (1) Copyright Infringement;
 * (2) False Designation of Origin;
 * (3) Breach of Contract;
 * (4) Misappropriation of Trade Secrets;
 * (5) Interference with Contract; and
 * (6) Interference with Prospective Business Relations.
 * 
 * 17 USC � 506 - Criminal offenses
 * (a) Criminal Infringement.
 * Any person who willfully infringes a copyright shall be punished as provided under section
 * 2319 of title 18, if the infringement was committed for purposes of commercial advantage
 * or private financial gain.
 * 
 * 18 USC � 2319 - Criminal infringement of a copyright
 * (a) Any person who commits an offense under section 506 (a)(1)(A) of title 17 shall be imprisoned
 * not more than 5 years, or fined in the amount set forth in this title (up to $150,000), or both,
 * if the offense consists of the reproduction or distribution, including by electronic means, during
 * any 180-day period, of at least 10 copies, of 1 or more copyrighted works, which have a total retail
 * value of more than $2,500.
 * 
 * For more information, review the license agreement associated with this software and source
 * code at http://www.modulusfe.com/tos or contact us at legal@modulusfe.com.
 */
!function(n){"use strict";n.DataSeriesSuffix={DATE:".date",OPEN:".open",HIGH:".high",LOW:".low",CLOSE:".close",VOLUME:".volume",TICKS_COUNT:".ticks_count",DETAILS:".details",HEIKIN_ASHI:".heikin_ashi",RENKO:".renko",LINE_BREAK:".line_break",POINT_AND_FIGURE:".point_and_figure",KAGI:"kagi",MEDIAN:".median",TYPICAL:".typical",WEIGHTED:".weighted"},Object.freeze(n.DataSeriesSuffix);var t=(Object.defineProperty(o.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t||""},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"values",{get:function(){return this._values},set:function(t){if(!Array.isArray(t))throw new TypeError("An array of values expected.");this._values=t||[]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"length",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"nameSuffix",{get:function(){var t=this.name,e=t.lastIndexOf(".");return 0<=e?t.substr(e):null},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isValueDataSeries",{get:function(){return this.nameSuffix!==n.DataSeriesSuffix.DATE},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isDateDataSeries",{get:function(){return this.nameSuffix===n.DataSeriesSuffix.DATE},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"firstValue",{get:function(){return this._values[0]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"lastValue",{get:function(){var t=this._values;return 0<t.length?t[t.length-1]:null},enumerable:!0,configurable:!0}),o.prototype.valueAtIndex=function(t,e){var i=this._values,o=i[t];return void 0!==e&&(i[t]=e),o},o.prototype.initialize=function(t,e){this._name=e,this.recordCount=t,this._values=new Array(t+1);for(var i=0;i<this._values.length;i++)this._values[i]=0},o.prototype.setValue=function(t,e){this._values[t]=e},o.prototype.value=function(t){return 0<=t&&t<this._values.length?this._values[t]:n.nullValue},o.prototype.add=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this._values;Array.isArray(t)?n.JsUtil.flattenedArray(t,function(t){return i.push(t)}):i.push(t)},o.prototype.addArray=function(t){this._values.push(t)},o.prototype.insert=function(t,e){var i=this._values;Array.isArray(e)?i.splice.apply(i,[t,0].concat(e)):i.splice(t,0,e)},o.prototype.updateLast=function(t){var e=this._values;0<e.length&&(e[e.length-1]=t)},o.prototype.clear=function(){this._values.length=0},o.prototype.trim=function(t){var e=this._values,i=e.length-Math.max(t,0);return 0<i?e.splice(0,i):i=0,i},o.prototype.itemsCountBetweenValues=function(t,e){for(var i=0,o=0,r=this._values;o<r.length;o++){var n=r[o];null!=n&&t<=n&&n<=e&&i++}return i},o.prototype.minMaxValues=function(t,e){var i=this._values;(null==t||t<0||t>=i.length-1)&&(t=0),null==e&&(e=i.length-t);for(var o,r=Math.min(t+e-1,i.length-1),n={min:1/0,max:-1/0},a=t;a<=r;a++)null!=(o=i[a])&&(o<n.min&&(n.min=o),o>n.max&&(n.max=o));return n},o.prototype.floorIndex=function(t){var e=this.binaryIndexOf(t);if(0===e){var i=this._values;if(0===i.length)return-1;if(i[0]>t)return-1}return 0<=e?e:~e-1},o.prototype.ceilIndex=function(t){var e=this.binaryIndexOf(t);return 0<=e?e:~e},o.prototype.binaryIndexOf=function(t){var e=this._values;if(0===e.length)return-1;for(var i=0,o=e.length-1;i<=o;){var r=(i+o)/2|0,n=e[r];if(n<t)i=1+r;else{if(!(t<n))return r;o=r-1}}return e[o]<t?~i:~Math.max(o,0)},o.prototype.leftNearestVisibleValueIndex=function(t){for(var e=this._values,i=t=Math.min(t,e.length-1);0<=i;i--)if(null!=e[i])return i;return 0},o.prototype.rightNearestVisibleValueIndex=function(t){for(var e=this._values,i=e.length,o=t;o<i;o++)if(null!=e[o])return o;return i-1},o.fromField=function(t,e){var i=new o;return i.fromField(t,e),i},o.prototype.toField=function(t){var e=new o;return e.name=t||this.name,e.recordCount=this._values.length,e._values=[0].concat(this._values),e._values.push(0),e},o.prototype.fromField=function(t,e){for(var i=t.recordCount,o=t._values.slice(1,e+i),r=0;r<e-1;r++)o[r]=null;for(;r<i;)o[r]===n.nullValue&&(o[r]=null),r++;this._values=o},o);function o(t){var e,i;if(this.recordCount=0,this._m_values=[],t)if("string"==typeof t)e=t;else{if("object"!=typeof t)throw new TypeError("Unknown config.");e=t.name,i=t.values}else;this.name=e,this.values=i||[]}n.DataSeries=t}(StockChartX=StockChartX||{});var __extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(n){"use strict";n.nullValue=-987653421;var r,t=(r=n.DataSeries,__extends(a,r),Object.defineProperty(a.prototype,"dataAgregator",{get:function(){return this._dataAgregator},set:function(t){this._dataAgregator=t},enumerable:!0,configurable:!0}),a.prototype.value=function(t,e){var i=this.values,o=i[t];return void 0!==e&&(i[t]=e),null!=o?o:n.nullValue},a.prototype.fill=function(t,e,i){for(var o=t;o<e;o++)this.value(o,i)},a.fromDataSeries=function(t,e){if(!t)return null;var i=new a(e||t.name,t.recordCount||t.values.length);return i.values=[0].concat(t.values),i.values.push(0),i},a.prototype.toDataSeries=function(t){for(var e=new a(this.name,this.recordCount),i=this.recordCount,o=this.values.slice(1,t+i),r=0;r<t-1;r++)o[r]=null;for(;r<i;)o[r]===n.nullValue&&(o[r]=null),r++;return e.values=o,e},a.prototype.average=function(t,e){for(var i=0,o=t+e,r=t;r<o;r++)i+=this.value(r);return i/e},a.prototype.set=function(t){this.setLastValue(0,t)},a.prototype.get=function(t){return this.value(this.getIndex(t))},a.prototype.setLastValue=function(t,e){this.value(this.getIndex(t),e)},a.prototype.reset=function(t){this.recordCount=t},a.prototype.getIndex=function(t,e){return e?e-t:this._dataAgregator?this._dataAgregator.currentBar-t:0},a);function a(t,e){var i=r.call(this)||this;i.name=t,e instanceof n.Indicator?(i._dataAgregator=e,i.recordCount=e.chart.recordCount):null!=e&&(i.recordCount=e),i.values=new Array(i.recordCount+1);for(var o=0;o<i.values.length;o++)i.values[o]=0;return i}n.TADataSeries=t}(StockChartX=StockChartX||{}),function(t){"use strict";var e=(Object.defineProperty(i.prototype,"high",{get:function(){return this.multiBars.high},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"low",{get:function(){return this.multiBars.low},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"close",{get:function(){return this.multiBars.close},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"open",{get:function(){return this.multiBars.open},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"volume",{get:function(){return this.multiBars.volume},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"details",{get:function(){return this.multiBars.details},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"input",{get:function(){return this.multiBars.input},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"input2",{get:function(){return this.multiBars.input2},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"median",{get:function(){return this.multiBars.median},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"typical",{get:function(){return this.multiBars.typical},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"weighted",{get:function(){return this.multiBars.weighted},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"inputs",{get:function(){return this.multiBars.inputs},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"multiBars",{get:function(){return this._multiBars},set:function(t){this._multiBars=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentBar",{get:function(){return this._currentBar},set:function(t){this._currentBar=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isFirstTickOfBar",{get:function(){return this._isFirstTickOfBar},set:function(t){this._isFirstTickOfBar=t},enumerable:!0,configurable:!0}),i.prototype.setupIndicator=function(){this.setConfigure(),this._isInitialized=!0},i.prototype.updateIndicator=function(){if(!this._canUpdate())return!1;var t=null===this.parentDataAggregator||this.parentDataAggregator===this;if(this._isInUpdate=!0,t||this.currentBar===this.parentDataAggregator.currentBar||(this.currentBar=this.parentDataAggregator.currentBar),this.currentBar===this._prevBar?this._isFirstTickOfBar=!1:this._isFirstTickOfBar=!0,this._prevBar=this.currentBar,this.childrenIndicator&&this.childrenIndicator.onBarUpdate(),this.onBarUpdate(),this._isInUpdate=!1,!t&&this.currentBar>=this.parentDataAggregator.currentBar)return!1;this.currentBar++},i.prototype.setDefaults=function(){},i.prototype.setConfigure=function(){},i.prototype.onBarUpdate=function(){},i.prototype.equalInput=function(t){return this.input===t},i.prototype._canUpdate=function(){return!(this._isInUpdate||!this._isInitialized)},i.prototype.getAverage=function(t,e){for(var i=0,o=e-1;0<=o;o--)i+=t.value(o);return i/e},i);function i(){this.parentDataAggregator=null,this._currentBar=0}t.DataAgregator=e}(StockChartX=StockChartX||{}),function(t){var e=(i.prototype.add=function(t){var e=t.name;this._objectsByType.containsKey(e)||this._objectsByType.add(e,this._values),this._values.push(t)},i.prototype.get=function(t,e){var i=this._objectsByType.get(e);if(Array.isArray(i))for(var o=0,r=i;o<r.length;o++){var n=r[o];if(e===n.name&&t(n))return n}else{if(!i)return null;if(t(i))return i}},i);function i(){this._objectsByType=new t.Dictionary,this._values=[]}t.ObjectCache=e}(StockChartX=StockChartX||{}),function(n){"use strict";var e,t;(t=e=n.InputSeriesKind||(n.InputSeriesKind={})).close=".close",t.volume=".volume",t.high=".high",t.low=".low",t.open=".open",t.weighted=".weighted",t.median=".median",t.typical=".typical",t.details=".details";var i=(Object.defineProperty(o.prototype,"instrument",{get:function(){return this._instrument},set:function(t){this._instrument=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"timeFrame",{get:function(){return this._timeFrame},set:function(t){this._timeFrame=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"input",{get:function(){return this._input},set:function(t){this._input=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"input2",{get:function(){return this._input2},set:function(t){this._input2=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputs",{get:function(){return this._inputs},set:function(t){this._inputs=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"barsArray",{get:function(){return this._barsArray},set:function(t){this._barsArray=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"high",{get:function(){return this._high},set:function(t){this._high=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"low",{get:function(){return this._low},set:function(t){this._low=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"close",{get:function(){return this._close},set:function(t){this._close=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"open",{get:function(){return this._open},set:function(t){this._open=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"details",{get:function(){return this._details},set:function(t){this._details=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"median",{get:function(){return this._median},set:function(t){this._median=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"typical",{get:function(){return this._typical},set:function(t){this._typical=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"weighted",{get:function(){return this._weighted},set:function(t){this._weighted=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"recordCount",{get:function(){return this._recordCount},set:function(t){this._recordCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),o.prototype._init=function(){if(this._chart){var t=this._chart;if(this._computedDataSeries=new n.ComputedDataSeries(t),this._barsArray=t.barDataSeries(),this._instrument=t.instrument,Array.isArray(this._indicator.inputSeriesKind)){this._inputs=new n.DataSeriesCollection;for(var e=0,i=this._indicator.inputSeriesKind;e<i.length;e++){var o=i[e],r=this._setInput(o);r.dataAgregator=this._indicator,this._inputs.add(r)}}this._input=this._setInput(this._indicator.inputSeriesKind),this._input&&(this._input.dataAgregator=this._indicator),this._input2=this._setInput(this._indicator.inputSeriesKind2),this._input2&&(this._input2.dataAgregator=this._indicator),this._open=this._createOpenTADataSeries(),this._open.dataAgregator=this._indicator,this._high=this._createHighTADataSeries(),this._high.dataAgregator=this._indicator,this._low=this._createLowTADataSeries(),this._low.dataAgregator=this._indicator,this._close=this._createCloseTADataSeries(),this._close.dataAgregator=this._indicator,this._volume=this._createVolumeTADataSeries(),this._volume.dataAgregator=this._indicator,this._details=this._createDetailsTADataSeries(),this._details.dataAgregator=this._indicator,this._median=this._createMedianTADataSeries(),this._median.dataAgregator=this._indicator,this._typical=this._createTypicalTADataSeries(),this._typical.dataAgregator=this._indicator,this._weighted=this._createWeightedTADataSeries(),this._weighted.dataAgregator=this._indicator,this.recordCount=this._input?this._input.recordCount:this._high.recordCount,this.name=this._input?this._input.name:this._high.name}},o.prototype._setInput=function(t){switch(t){case e.high:return this._createHighTADataSeries();case e.low:return this._createLowTADataSeries();case e.close:return this._createCloseTADataSeries();case e.open:return this._createOpenTADataSeries();case e.volume:return this._createVolumeTADataSeries();case e.details:return this._createDetailsTADataSeries();case e.weighted:return this._createWeightedTADataSeries();case e.median:return this._createMedianTADataSeries();case e.typical:return this._createTypicalTADataSeries()}},o.prototype._createOpenTADataSeries=function(){return this._createTADataSeries(n.DataSeriesSuffix.OPEN,n.IndicatorDataSeries.OPEN)},o.prototype._createHighTADataSeries=function(){return this._createTADataSeries(n.DataSeriesSuffix.HIGH,n.IndicatorDataSeries.HIGH)},o.prototype._createLowTADataSeries=function(){return this._createTADataSeries(n.DataSeriesSuffix.LOW,n.IndicatorDataSeries.LOW)},o.prototype._createCloseTADataSeries=function(){return this._createTADataSeries(n.DataSeriesSuffix.CLOSE,n.IndicatorDataSeries.CLOSE)},o.prototype._createVolumeTADataSeries=function(){return this._createTADataSeries(n.DataSeriesSuffix.VOLUME,n.IndicatorDataSeries.VOLUME)},o.prototype._createDetailsTADataSeries=function(){return this._createTADataSeries(n.DataSeriesSuffix.DETAILS,n.IndicatorDataSeries.DETAILS)},o.prototype._createMedianTADataSeries=function(){var t=this._computedDataSeries.median;return n.TADataSeries.fromDataSeries(t,n.IndicatorDataSeries.MEDIAN)},o.prototype._createWeightedTADataSeries=function(){var t=this._computedDataSeries.weighted;return n.TADataSeries.fromDataSeries(t,n.IndicatorDataSeries.WEIGHTED)},o.prototype._createTypicalTADataSeries=function(){var t=this._computedDataSeries.typical;return n.TADataSeries.fromDataSeries(t,n.IndicatorDataSeries.TYPICAL)},o.prototype._createTADataSeries=function(t,e){if(!t)return null;if(void 0===e)switch(t){case n.DataSeriesSuffix.OPEN:e=n.IndicatorDataSeries.OPEN;break;case n.DataSeriesSuffix.HIGH:e=n.IndicatorDataSeries.HIGH;break;case n.DataSeriesSuffix.LOW:e=n.IndicatorDataSeries.LOW;break;case n.DataSeriesSuffix.CLOSE:e=n.IndicatorDataSeries.CLOSE;break;case n.DataSeriesSuffix.VOLUME:e=n.IndicatorDataSeries.VOLUME;break;case n.DataSeriesSuffix.DETAILS:e=n.IndicatorDataSeries.DETAILS}var i=this._indicator._usePrimaryDataSeries?this._chart.primaryDataSeries(t):this._chart.getDataSeries(t);return n.TADataSeries.fromDataSeries(i,e)},o);function o(t){this._indicator=t,this._chart=t.chart,this._init()}n.MultiBars=i}(StockChartX=StockChartX||{}),function(c){"use strict";var t=(Object.defineProperty(e.prototype,"median",{get:function(){return this._calculateMedian(),this._median},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"typical",{get:function(){return this._calculateTypical(),this._typical},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weighted",{get:function(){return this._calculateWeighted(),this._weighted},enumerable:!0,configurable:!0}),e.prototype._calculateMedian=function(){this._median=new c.DataSeries(c.DataSeriesSuffix.MEDIAN),this._median.clear();for(var t=this._chart.primaryBarDataSeries(),e=t.high.values,i=t.low.values,o=e.length,r=this._median.values,n=0;n<o;n++){var a=(e[n]+i[n])/2;r.push(a)}},e.prototype._calculateTypical=function(){this._typical=new c.DataSeries(c.DataSeriesSuffix.TYPICAL),this._typical.clear();for(var t=this._chart.primaryBarDataSeries(),e=t.high.values,i=t.low.values,o=t.close.values,r=e.length,n=this._typical.values,a=0;a<r;a++){var l=(e[a]+i[a]+o[a])/3;n.push(l)}},e.prototype._calculateWeighted=function(){this._weighted=new c.DataSeries(c.DataSeriesSuffix.WEIGHTED),this._weighted.clear();for(var t=this._chart.primaryBarDataSeries(),e=t.high.values,i=t.low.values,o=t.close.values,r=t.open.values,n=e.length,a=this._weighted.values,l=0;l<n;l++){var s=(e[l]+i[l]+o[l]+r[l])/4;a.push(s)}},e);function e(t){this._chart=t}c.ComputedDataSeries=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(n){"use strict";var e,t=(e=n.DataAgregator,__extends(i,e),i.prototype.getCachedIndicator=function(t,e){return this._cachedIndicators.get(t,e)},i.prototype.cachedIndicator=function(t,e,i,o,r){return t.chart=this.chart,t.setDefaultSettings(),t.parentDataAggregator=this,e instanceof n.Indicator&&(t.childrenIndicator=e,t.multiBars.input=e.values.get(0)),e instanceof n.TADataSeries&&(t.multiBars.input=e),i&&(t.period=i),o&&(t.smooth=o),r&&(t.limitValue=r),t.setupIndicator(),this._cachedIndicators.add(t),t},i.prototype.SMA=function(e,i){if(e instanceof n.Indicator){var o=e.values.get(0);return(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(o)},"SMA"))&&t.setConfigure(),t||this.cachedIndicator(new n.SMA,e,i)}var t;return(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"SMA"))&&t.setConfigure(),t||this.cachedIndicator(new n.SMA,e,i)},i.prototype.TMA=function(e,i){var t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"TMA");return t&&t.setConfigure(),t||this.cachedIndicator(new n.TMA,e,i)},i.prototype.TEMA=function(e,i){var t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"TEMA");return t&&t.setConfigure(),t||this.cachedIndicator(new n.TEMA,e,i)},i.prototype.CMO=function(e,i){var t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"CMO");return t&&t.setConfigure(),t||this.cachedIndicator(new n.CMO,e,i)},i.prototype.StdDev=function(e,i){if(e instanceof n.Indicator){var o=e.values.get(0);return(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(o)},"StdDev"))&&t.setConfigure(),t||this.cachedIndicator(new n.StdDev,e,i)}var t;return(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"StdDev"))&&t.setConfigure(),t||this.cachedIndicator(new n.StdDev,e,i)},i.prototype.EMA=function(e,i){if(e instanceof n.Indicator){var o=e.values.get(0);return(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(o)},"EMA"))&&t.setConfigure(),t||this.cachedIndicator(new n.EMA,e,i)}var t;return(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"EMA"))&&t.setConfigure(),t||this.cachedIndicator(new n.EMA,e,i)},i.prototype.VMA=function(e,i){if(e instanceof n.Indicator){var o=e.values.get(0);return(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(o)},"VMA"))&&t.setConfigure(),t||this.cachedIndicator(new n.VMA,e,i)}var t;return(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"VMA"))&&t.setConfigure(),t||this.cachedIndicator(new n.VMA,e,i)},i.prototype.WWS=function(e,i){if(e instanceof n.Indicator){var o=e.values.get(0);return(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(o)},"WWS"))&&t.setConfigure(),t||this.cachedIndicator(new n.WWS,e,i)}var t;return(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"WWS"))&&t.setConfigure(),t||this.cachedIndicator(new n.WWS,e,i)},i.prototype.SUM=function(e,i){var t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"SUM");return t&&t.setConfigure(),t||this.cachedIndicator(new n.SUM,e,i)},i.prototype.ADX=function(e,i){var t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"ADX");return t&&t.setConfigure(),t||this.cachedIndicator(new n.ADX,e,i)},i.prototype.Range=function(){var e=this,t=this.getCachedIndicator(function(t){return t.equalInput(e.high)},"Range");return t&&t.setConfigure(),t||this.cachedIndicator(new n.Range,this.high,null)},i.prototype.MAX=function(e,i){if(e instanceof n.Indicator){var o=e.values.get(0);return(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(o)},"MAX"))&&t.setConfigure(),t||this.cachedIndicator(new n.MAX,e,i)}var t;return(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"MAX"))&&t.setConfigure(),t||this.cachedIndicator(new n.MAX,e,i)},i.prototype.MIN=function(e,i){if(e instanceof n.Indicator){var o=e.values.get(0);return(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(o)},"MIN"))&&t.setConfigure(),t||this.cachedIndicator(new n.MIN,e,i)}var t;return(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"MIN"))&&t.setConfigure(),t||this.cachedIndicator(new n.MIN,e,i)},i.prototype.TrueRange=function(e,i){if(e instanceof n.Indicator){var o=e.values.get(0);return(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(o)},"TrueRange"))&&t.setConfigure(),t||this.cachedIndicator(new n.TrueRange,e,i)}var t;return(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"TrueRange"))&&t.setConfigure(),t||this.cachedIndicator(new n.TrueRange,e,i)},i.prototype.VIDYA=function(e,i){if(e instanceof n.Indicator){var o=e.values.get(0);return(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(o)},"VIDYA"))&&t.setConfigure(),t||this.cachedIndicator(new n.VIDYA,e,i)}var t;return(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"VIDYA"))&&t.setConfigure(),t||this.cachedIndicator(new n.VIDYA,e,i)},i.prototype.HML=function(e,i){if(e instanceof n.Indicator){var o=e.values.get(0);return(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(o)},"HML"))&&t.setConfigure(),t||this.cachedIndicator(new n.HML,e,i)}var t;return(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"HML"))&&t.setConfigure(),t||this.cachedIndicator(new n.HML,e,i)},i.prototype.ROC=function(e,i){if(e instanceof n.Indicator){var o=e.values.get(0);return(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(o)},"ROC"))&&t.setConfigure(),t||this.cachedIndicator(new n.ROC,e,i)}var t;return(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"ROC"))&&t.setConfigure(),t||this.cachedIndicator(new n.ROC,e,i)},i.prototype.LinearRegression=function(e,i){if(e instanceof n.Indicator){var o=e.values.get(0);return(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(o)},"LinearRegression"))&&t.setConfigure(),t||this.cachedIndicator(new n.LinearRegression,e,i)}var t;return(t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"LinearRegression"))&&t.setConfigure(),t||this.cachedIndicator(new n.LinearRegression,e,i)},i.prototype.TSF=function(e,i){var t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"TSF");return t&&t.setConfigure(),t||this.cachedIndicator(new n.TSF,e,i)},i.prototype.RSI=function(e,i,o){var t=this.getCachedIndicator(function(t){return t.period===i&&t.smooth===o&&t.equalInput(e)},"RSI");return t&&t.setConfigure(),t||this.cachedIndicator(new n.RSI,e,i,o)},i.prototype.HMA=function(e,i){var t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"HMA");return t&&t.setConfigure(),t||this.cachedIndicator(new n.HMA,e,i)},i.prototype.WMA=function(e,i){var t=this.getCachedIndicator(function(t){return t.period===i&&t.equalInput(e)},"WMA");return t&&t.setConfigure(),t||this.cachedIndicator(new n.WMA,e,i)},i.prototype.LogChange=function(e){var t=this.getCachedIndicator(function(t){return t.equalInput(e)},"LogChange");return t&&t.setConfigure(),t||this.cachedIndicator(new n.LogChange,e,null)},i.prototype.SwingIndex=function(t){var e=this,i=this.getCachedIndicator(function(t){return t.equalInput(e.high)},"SwingIndex");return i&&i.setConfigure(),i||this.cachedIndicator(new n.SwingIndex,this.high,null,null,t)},i);function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._cachedIndicators=new n.ObjectCache,t}n.CachedIndicator=t}(StockChartX=StockChartX||{});var __extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),__awaiter=this&&this.__awaiter||function(n,a,l,s){return new(l=l||Promise)(function(t,e){function i(t){try{r(s.next(t))}catch(t){e(t)}}function o(t){try{r(s.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(i,o)}r((s=s.apply(n,a||[])).next())})},__generator=this&&this.__generator||function(i,o){var r,n,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,n&&(a=n[2&e[0]?"return":e[0]?"throw":"next"])&&!(a=a.call(n,e[1])).done)return a;switch(n=0,a&&(e=[0,a.value]),e[0]){case 0:case 1:a=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,n=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(a=0<(a=l.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){l.label=e[1];break}if(6===e[0]&&l.label<a[1]){l.label=a[1],a=e;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(e);break}a[2]&&l.ops.pop(),l.trys.pop();continue}e=o.call(i,l)}catch(t){e=[6,t],n=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};!function(h){"use strict";var e,t;(t=e=h.MovingAverageType||(h.MovingAverageType={}))[t.exponentialMovingAverage=0]="exponentialMovingAverage",t[t.hullMovingAverage=1]="hullMovingAverage",t[t.simpleMovingAverage=2]="simpleMovingAverage",t[t.triangularMovingAverage=3]="triangularMovingAverage",t[t.TEMA=4]="TEMA",t[t.weightedMovingAverage=5]="weightedMovingAverage",t[t.variable=6]="variable",t[t.wws=7]="wws",t[t.vidya=8]="vidya";var i,o=(i=h.CachedIndicator,__extends(r,i),Object.defineProperty(r.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"indicatorTheme",{get:function(){return this.chart.theme.plot.indicator},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"levelsTheme",{get:function(){return this.chart.theme.plot.indicator.levels},enumerable:!0,configurable:!0}),r.prototype.hasParameter=function(t){return void 0!==this._options.parameters[t]},r.prototype.getParameterValue=function(t){return this._options.parameters||(this._options.parameters={}),this._options.parameters[t]},r.prototype.setParameterValue=function(t,e){this._options.parameters||(this._options.parameters={}),this._options.parameters[t]=e},r.prototype._addLineParameters=function(t,e,i,o){this._options.parameters||(this._options.parameters={});var r=this._options.parameters,n=this._getLineParametersKeys(t);return r[n[0]]=this.getParameterValue(n[0])||e,null!=n[1]&&(r[n[1]]=this.getParameterValue(n[1])||i||1),null!=n[2]&&(r[n[2]]=this.getParameterValue(n[2])||o||h.LineStyle.SOLID),null!=n[3]&&(r[n[3]]=null==this.getParameterValue(n[3])||this.getParameterValue(n[3])),function(){n.forEach(function(t){delete r[t]})}},r.prototype._getLineParametersKeys=function(t){switch(t){case 0:return[h.IndicatorParam.LINE_COLOR,h.IndicatorParam.LINE_WIDTH,h.IndicatorParam.LINE_STYLE,h.IndicatorParam.LINE_ENABLED];case 1:return[h.IndicatorParam.LINE2_COLOR,h.IndicatorParam.LINE2_WIDTH,h.IndicatorParam.LINE2_STYLE,h.IndicatorParam.LINE2_ENABLED];case 2:return[h.IndicatorParam.LINE3_COLOR,h.IndicatorParam.LINE3_WIDTH,h.IndicatorParam.LINE3_STYLE,h.IndicatorParam.LINE3_ENABLED];case 3:return[h.IndicatorParam.LINE4_COLOR,h.IndicatorParam.LINE4_WIDTH,h.IndicatorParam.LINE4_STYLE,h.IndicatorParam.LINE4_ENABLED];case 4:return[h.IndicatorParam.LINE5_COLOR,h.IndicatorParam.LINE5_WIDTH,h.IndicatorParam.LINE5_STYLE,h.IndicatorParam.LINE5_ENABLED]}},r.prototype._lineTheme=function(t){var e,i,o,r,n,a,l,s;switch(t){case 0:e=h.IndicatorParam.LINE_COLOR,i=h.IndicatorParam.LINE_WIDTH,o=h.IndicatorParam.LINE_STYLE,r=h.IndicatorParam.LINE_ENABLED,n=this.getParameterValue(e)||this.indicatorTheme&&this.indicatorTheme.line1.strokeColor,a=this.getParameterValue(i)||this.indicatorTheme&&this.indicatorTheme.line1.width,s=this.getParameterValue(o)||this.indicatorTheme&&this.indicatorTheme.line1.lineStyle,l=this.getParameterValue(r);break;case 1:e=h.IndicatorParam.LINE2_COLOR,i=h.IndicatorParam.LINE2_WIDTH,o=h.IndicatorParam.LINE2_STYLE,r=h.IndicatorParam.LINE2_ENABLED,n=this.getParameterValue(e)||this.indicatorTheme&&this.indicatorTheme.line2.strokeColor,a=this.getParameterValue(i)||this.indicatorTheme&&this.indicatorTheme.line2.width,s=this.getParameterValue(o)||this.indicatorTheme&&this.indicatorTheme.line2.lineStyle,l=this.getParameterValue(r);break;case 2:e=h.IndicatorParam.LINE3_COLOR,i=h.IndicatorParam.LINE3_WIDTH,o=h.IndicatorParam.LINE3_STYLE,r=h.IndicatorParam.LINE3_ENABLED,n=this.getParameterValue(e)||this.indicatorTheme&&this.indicatorTheme.line3.strokeColor,a=this.getParameterValue(i)||this.indicatorTheme&&this.indicatorTheme.line3.width,s=this.getParameterValue(o)||this.indicatorTheme&&this.indicatorTheme.line3.lineStyle,l=this.getParameterValue(r);break;case 3:e=h.IndicatorParam.LINE4_COLOR,i=h.IndicatorParam.LINE4_WIDTH,o=h.IndicatorParam.LINE4_STYLE,r=h.IndicatorParam.LINE4_ENABLED,n=this.getParameterValue(e)||this.indicatorTheme&&this.indicatorTheme.line4.strokeColor,a=this.getParameterValue(i)||this.indicatorTheme&&this.indicatorTheme.line4.width,s=this.getParameterValue(o)||this.indicatorTheme&&this.indicatorTheme.line4.lineStyle,l=this.getParameterValue(r);break;case 4:e=h.IndicatorParam.LINE5_COLOR,i=h.IndicatorParam.LINE5_WIDTH,o=h.IndicatorParam.LINE5_STYLE,r=h.IndicatorParam.LINE5_ENABLED,n=this.getParameterValue(e)||this.indicatorTheme&&this.indicatorTheme.line5.strokeColor,a=this.getParameterValue(i)||this.indicatorTheme&&this.indicatorTheme.line5.width,s=this.getParameterValue(o)||this.indicatorTheme&&this.indicatorTheme.line5.lineStyle,l=this.getParameterValue(r);break;default:return null}var c=this.chart.theme.chart.background;return c.some(h.HtmlUtil.isDarkColor)?"#505050"===n&&(n="white"):c.some(h.HtmlUtil.isDarkColor)||"white"===n&&(n="#505050"),{strokeEnabled:l,width:a,strokeColor:n,lineStyle:s}},r.prototype._addFillParameters=function(t,e){this._options.parameters||(this._options.parameters={});var i=this._options.parameters;i[h.IndicatorParam.FILL_ABOVE]=this.getParameterValue(h.IndicatorParam.FILL_ABOVE)||t||"rgba(24, 172, 8, 0.5)",i[h.IndicatorParam.FILL_BELOW]=this.getParameterValue(h.IndicatorParam.FILL_BELOW)||e||"rgba(255, 0, 0, 0.5)",i[h.IndicatorParam.FILL_ENABLED]=null==this.getParameterValue(h.IndicatorParam.FILL_ENABLED)||this.getParameterValue(h.IndicatorParam.FILL_ENABLED)},r.prototype._addLabelParameters=function(t,e){this._options.parameters||(this._options.parameters={});var i=this._options.parameters;0===t&&(i[h.IndicatorParam.LABEL_COLOR]=this.getParameterValue(h.IndicatorParam.LABEL_COLOR)||e,i[h.IndicatorParam.LABEL_ENABLED]=null==this.getParameterValue(h.IndicatorParam.LABEL_ENABLED)||this.getParameterValue(h.IndicatorParam.LABEL_ENABLED)),1===t&&(i[h.IndicatorParam.LABEL2_COLOR]=this.getParameterValue(h.IndicatorParam.LABEL2_COLOR)||e,i[h.IndicatorParam.LABEL2_ENABLED]=null==this.getParameterValue(h.IndicatorParam.LABEL2_ENABLED)||this.getParameterValue(h.IndicatorParam.LABEL2_ENABLED)),2===t&&(i[h.IndicatorParam.LABEL3_COLOR]=this.getParameterValue(h.IndicatorParam.LABEL3_COLOR)||e,i[h.IndicatorParam.LABEL3_ENABLED]=null==this.getParameterValue(h.IndicatorParam.LABEL3_ENABLED)||this.getParameterValue(h.IndicatorParam.LABEL3_ENABLED)),3===t&&(i[h.IndicatorParam.LABEL4_COLOR]=this.getParameterValue(h.IndicatorParam.LABEL4_COLOR)||e,i[h.IndicatorParam.LABEL4_ENABLED]=null==this.getParameterValue(h.IndicatorParam.LABEL4_ENABLED)||this.getParameterValue(h.IndicatorParam.LABEL4_ENABLED))},r.prototype.shiftInToThePast=function(t,e){if(t.values.length<=e)return t;for(var i=0;i<e;i++)t.add(null);var o=new h.DataSeries(t.name),r=t.values;return r.splice(0,e),o.add(r),o},r.prototype.shiftInToTheFuture=function(t,e){for(var i=new h.DataSeries(t.name),o=0;o<=t.length+e;o++)o<e?i.add(null):i.add(t.values[o-e]);return i},r.prototype._dataSeriesPeriod=function(t){if(!this.period)return t;for(var e=0;e<this.period;e++)t.value(e,null);return t},r.prototype._setTitle=function(i,o){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,h.Localization.localizeText(this.chart,"indicator."+i+".shortName",{defaultValue:i})];case 1:return e=t.sent(),o.text(e),[2]}})})},r.prototype._setlocalizedAtribute=function(i,o){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,h.Localization.localizeText(this.chart,o)];case 1:return e=t.sent(),i.attr("title",e),[2]}})})},r.prototype._getMaTypeString=function(t){switch(t){case e.simpleMovingAverage:return"Simple";case e.exponentialMovingAverage:return"Exponential";case e.triangularMovingAverage:return"Triangular";case e.hullMovingAverage:return"Hull";case e.TEMA:return"TEMA";case e.weightedMovingAverage:return"Weighted";case e.variable:return"Variable";case e.wws:return"Wws";case e.vidya:return"Vidya";default:return""}},r.prototype._titleParameters=function(){var i=this,o=[];return Object.keys(this._options.parameters).map(function(t){var e;(-1===t.indexOf("Line")&&-1===t.indexOf(h.IndicatorParam.FILL_BELOW)&&-1===t.indexOf(h.IndicatorParam.FILL_ABOVE)&&-1===t.indexOf(h.IndicatorParam.FILL_ENABLED)&&t!==h.IndicatorParam.DISPLACEMENT||t===h.IndicatorParam.CONVERSION_PERIODS||t===h.IndicatorParam.BASE_PERIODS)&&(t===h.IndicatorParam.MA_TYPE?(e=i._getMaTypeString(i._options.parameters[t]),o.push(e)):t===h.IndicatorParam.SOURCE?o.push(i.input.name):t===h.IndicatorParam.SOURCE2?o.push(i.input2.name):o.push(i._options.parameters[t]))}),0<o.length&&(this.indicatorHasParameters=!0),o},r.allIndicators=function(){var e=[];return Object.keys(h.Indicator.registeredIndicators).map(function(t){e.push(h.Indicator.registeredIndicators[t].className)}),e||[]},r);function r(){var t=null!==i&&i.apply(this,arguments)||this;return t._options={},t.indicatorHasParameters=!1,t}h.IndicatorBase=o}(StockChartX=StockChartX||{}),function(o){var t=(Object.defineProperty(e.prototype,"dataSeriesArray",{get:function(){return this._dataSeriesArray},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recordCount",{get:function(){return this.get(0).recordCount},enumerable:!0,configurable:!0}),e.prototype.addNew=function(t,e){var i=new o.TADataSeries(t);return this.add(i),i},e.prototype.add=function(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];o.JsUtil.flattenedArray(t,function(t){e._dataSeriesArray.push(t)})},e.prototype.indexOf=function(t){for(var e=0;e<this._dataSeriesArray.length;e++)if(this._dataSeriesArray[e].name===t)return e;return-1},e.prototype.rename=function(t,e){var i=this.indexOf(t);-1!==i&&(this._dataSeriesArray[i].name=e)},e.prototype.remove=function(){for(var i=this,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.JsUtil.flattenedArray(t,function(t){var e=i.indexOf(t);-1!==e&&i._dataSeriesArray.splice(e,1)})},e.prototype.clear=function(){this._dataSeriesArray=[]},e.prototype.get=function(t){if("string"!=typeof t)return-1!==(e=t)&&e<this._dataSeriesArray.length?this._dataSeriesArray[e]:new o.TADataSeries;var e,i=t;return-1!==(e=this.indexOf(i))?this._dataSeriesArray[e]:new o.TADataSeries(i)},e.prototype.copy=function(t,e){var i=this.indexOf(e);if(-1!==i)for(var o=this._dataSeriesArray[i],r=o.recordCount,n=1;n<r+1;n++)t.valueAtIndex(n,o.value(n))},e);function e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this;this._dataSeriesArray=[],t&&0!==t.length&&o.JsUtil.flattenedArray(t,function(t){if(!(t instanceof o.TADataSeries))throw new TypeError("DataSeries is not an instance of StockChartX.TADataSeries.");i.add(t)})}o.DataSeriesCollection=t}(StockChartX=StockChartX||{}),function(){"use strict";var t=/\s*[,;]\s*/,e=("INSERT MODULUS CLIENT ID HERE".split(t),"INSERT DOMAIN NAME HERE".split(t),"INSERT VR CODE HERE".split(t),"".split(t).filter(function(t){return t.indexOf("INSERT TRUSTED DOMAINS")<0}));[].concat(e)}(StockChartX=StockChartX||{}),function(t){"use strict";var e,i;(i=e=t.Browser||(t.Browser={}))[i.UNKNOWN=0]="UNKNOWN",i[i.ie=1]="ie",i[i.firefox=2]="firefox",i[i.opera=3]="opera",i[i.konqueror=4]="konqueror",i[i.iron=5]="iron",i[i.safari=6]="safari",i[i.chrome=7]="chrome",i[i.edge=8]="edge";var o="",r="view/",n="locales/",a=(Object.defineProperty(l.prototype,"root",{get:function(){return this._root||o},set:function(t){this._root=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"view",{get:function(){return this._view||this.root+r},set:function(t){this._view=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"locales",{get:function(){return this._locales||this.root+n},set:function(t){this._locales=t},enumerable:!0,configurable:!0}),l);function l(){}t.Environment={isMobile:!1,isPhone:!1,isIOS:!1,isAndroid:!1,osVersion:"0",browser:e.UNKNOWN,browserVersion:"0",Path:new a},function(){switch(Detectizr.detect({detectDeviceMode:!1,detectScreen:!1,detectOS:!0,detectBrowser:!0,detectPlugins:!1}),Detectizr.os.name){case"ios":t.Environment.isIOS=!0;break;case"android":t.Environment.isAndroid=!0}switch(t.Environment.osVersion=Detectizr.os.major+"."+Detectizr.os.minor,t.Environment.browserVersion=Detectizr.browser.major,Detectizr.browser.name){case"ie":t.Environment.browser=e.ie;break;case"firefox":t.Environment.browser=e.firefox;break;case"opera":t.Environment.browser=e.opera;break;case"konqueror":t.Environment.browser=e.konqueror;break;case"iron":t.Environment.browser=e.iron;break;case"safari":t.Environment.browser=e.safari;break;case"chrome":t.Environment.browser=e.chrome;break;case"edge":t.Environment.browser=e.edge}switch(Detectizr.device.type){case"mobile":t.Environment.isPhone=!0;break;case"tablet":t.Environment.isMobile=!0;break;default:t.Environment.isMobile=!1}}(),Object.freeze(t.Environment)}(StockChartX=StockChartX||{}),function(t){"use strict";var e=(Object.defineProperty(i.prototype,"count",{get:function(){return this._length},enumerable:!0,configurable:!0}),i.prototype.add=function(t,e){if(this.containsKey(t))throw new Error("An item with the same key already exists.");this._dict[t]=e,this._length++},i.prototype.remove=function(t){return!!this.containsKey(t)&&(delete this._dict[t],this._length--,!0)},i.prototype.clear=function(){this._length=0,this._dict={}},i.prototype.containsKey=function(t){return void 0!==this._dict[t]},i.prototype.get=function(t){return this.containsKey(t)?this._dict[t]:null},i);function i(t){if(this._length=0,this._dict={},t)if(Array.isArray(t))for(var e=0,i=t;e<i.length;e++){var o=i[e];this.add(o.key,o.value)}else this.add(t.key,t.value)}t.Dictionary=e}(StockChartX=(StockChartX=StockChartX||{})||{});var __decorate=this&&this.__decorate||function(t,e,i,o){var r,n=arguments.length,a=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var l=t.length-1;0<=l;l--)(r=t[l])&&(a=(n<3?r(a):3<n?r(e,i,a):r(e,i))||a);return 3<n&&a&&Object.defineProperty(e,i,a),a},__awaiter=this&&this.__awaiter||function(n,a,l,s){return new(l=l||Promise)(function(t,e){function i(t){try{r(s.next(t))}catch(t){e(t)}}function o(t){try{r(s.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(i,o)}r((s=s.apply(n,a||[])).next())})},__generator=this&&this.__generator||function(i,o){var r,n,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,n&&(a=n[2&e[0]?"return":e[0]?"throw":"next"])&&!(a=a.call(n,e[1])).done)return a;switch(n=0,a&&(e=[0,a.value]),e[0]){case 0:case 1:a=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,n=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(a=0<(a=l.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){l.label=e[1];break}if(6===e[0]&&l.label<a[1]){l.label=a[1],a=e;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(e);break}a[2]&&l.ops.pop(),l.trys.pop();continue}e=o.call(i,l)}catch(t){e=[6,t],n=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};!function(t){"use strict";var e=(i.ensureLocalStorageAvailable=function(t,e,i){var o=i.value;return i.value=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!localStorage)throw new Error("Local storage is not available.");return o.apply(this,t)},i},i.prototype.save=function(e,i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return localStorage.setItem(e,i),[2]})})},i.prototype.load=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,localStorage.getItem(e)]})})},i.prototype.clear=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return e?localStorage.removeItem(e):localStorage.clear(),[2]})})},__decorate([i.ensureLocalStorageAvailable],i.prototype,"save",null),__decorate([i.ensureLocalStorageAvailable],i.prototype,"load",null),__decorate([i.ensureLocalStorageAvailable],i.prototype,"clear",null),i);function i(){}t.LocalDataStore=e}(StockChartX=StockChartX||{}),function(t){"use strict";var e=(Object.defineProperty(i.prototype,"registeredItems",{get:function(){return this._constructors},enumerable:!0,configurable:!0}),i.prototype.register=function(t,e){if(!t)throw new Error("Class name is not specified.");if(!e)throw new Error("Constructor is not specified.");if(this._constructors[t])throw new Error("'"+t+"' already registered.");this._constructors[t]=e},i.prototype.resolve=function(t){if(!t)throw new Error("Class name is not specified.");return this._constructors[t]},i.prototype.createInstance=function(t){var e=this.resolve(t);if(!e)throw new Error("'"+t+"' is not registered.");return new e},i);function i(){this._constructors={}}t.ClassRegistrar=e}(StockChartX=StockChartX||{}),function(t){"use strict";var e=(l.isNumber=function(t){return"number"==typeof t},l.isFiniteNumber=function(t){return this.isNumber(t)&&isFinite(t)},l.isFiniteNumberOrNaN=function(t){return this.isNumber(t)&&(isFinite(t)||isNaN(t))},l.isPositiveNumber=function(t){return this.isFiniteNumber(t)&&0<t},l.isNegativeNumber=function(t){return this.isFiniteNumber(t)&&t<0},l.isPositiveNumberOrNaN=function(t){return this.isNumber(t)&&(isNaN(t)||0<t&&isFinite(t))},l.isFunction=function(t){return!!(t&&t.constructor&&t.call&&t.apply)},l.isObject=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},l.shallowClone=function(t){return jQuery.extend(!0,{},t)},l.clone=function(t){var e=jQuery.extend(!0,{},t);for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];if(Array.isArray(o))for(var r=0,n=o.length;r<n;r++)"object"==typeof o[r]&&(o[r]=this.clone(o[r]))}return e},l.merge=function(t,e,i){void 0===i&&(i=!0),null==t&&(t={}),null==e&&(e={});var o,r,n=i?jQuery.extend(!0,{},t,e):t;for(var a in n){n.hasOwnProperty(a)&&e.hasOwnProperty(a)&&(o=n[a],r=e[a],Array.isArray(o)?n[a]=r:l.isObject(o)&&(n[a]=l.merge(o,r,!1)))}return n},l.extend=function(t,e){function i(){}var o=t.prototype;for(var r in i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t,o)t.prototype[r]=o[r]},l.applyMixins=function(i,t){t.forEach(function(e){Object.getOwnPropertyNames(e).forEach(function(t){Object.getOwnPropertyDescriptor(e,t).enumerable&&"constructor"!==t&&(i[t]=e[t])}),Object.getOwnPropertyNames(e.prototype).forEach(function(t){"constructor"!==t&&(i.prototype[t]=e.prototype[t])})})},l.padStr=function(t,e){for(var i=e.width-t.length,o=0;o<i;o++)t=e.alignLeft?""+t+e.padding:""+e.padding+t;return t},l.filterText=function(t){return $("<div></div>").text(t).html().trim()},l.flattenArray=function(t){var i=this;return t.reduce(function(t,e){return Array.isArray(e)?t.concat(i.flattenArray(e)):t.concat(e)},[])},l.flattenedArray=function(t,e){if(Array.isArray(t))for(var i=0,o=t;i<o.length;i++){var r=o[i];this.flattenedArray(r,e)}else e(t)},l.sort=function(t,e){for(var i=!0,o=0,r=t.length;i;){i=!1,o++;for(var n=0;n<r-o;n++){var a=t[n],l=t[n+1];0<e(a,l)&&(t[n]=l,t[n+1]=a,i=!0)}}},l.binarySearch=function(t,e){var i=t;if(0===i.length)return-1;for(var o=0,r=i.length-1;o<=r;){var n=(o+r)/2|0,a=i[n];if(a<e)o=1+n;else{if(!(e<a))return n;r=n-1}}return i[r]<e?~o:~Math.max(r,0)},l.log=function(t){return Math.log(t)},l.approxCompare=function(t,e){return Math.abs(t-e)<2220446049250313e-31?0:e<t?1:-1},l.equals=function(t,e){return Math.abs(t-e)<1e-10},l.calculateDigitsOnTickSize=function(t){if(.9999999999999998<=t)return 0;for(var e=0;t*=10,++e,1e-8<Math.abs(this.truncateEx(t)-t););return e=Math.min(e,15)},l.truncateEx=function(t){var e=Math.trunc(t),i=Math.ceil(e+1);return Math.abs(t-i)<1e-8?i:e},l.debug=function(t){var e=new URL(window.location.href).searchParams.get("debug");return!!e&&e.split(",").includes(t)},l);function l(){}t.JsUtil=e,Math.roundToDecimals=function(t,e){return Number(Math.round(t+"E"+e).toString()+"E-"+e)},Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)})}(StockChartX=StockChartX||{}),function(t){"use strict";var e=(i.mixColors=function(t,e,i){void 0===i&&(i=.5);for(var o="#",r=0;r<3;r++){var n=t.substring(1+2*r,3+2*r),a=e.substring(1+2*r,3+2*r),l=parseInt(n,16),s=parseInt(a,16);o+=("0"+Math.floor(l*(1-i)+s*i).toString(16)).slice(-2)}return o},i.hexToRgba=function(t,e){void 0===e&&(e=1);var i=t.match(/\w\w/g).map(function(t){return parseInt(t,16)});return"rgba("+i[0]+","+i[1]+","+i[2]+","+e+")"},i);function i(){}t.ColorUtil=e}(StockChartX=StockChartX||{}),function(i){"use strict";i.TimeSpan={MILLISECONDS_IN_YEAR:31556926e3,MILLISECONDS_IN_MONTH:2629743830,MILLISECONDS_IN_WEEK:6048e5,MILLISECONDS_IN_DAY:864e5,MILLISECONDS_IN_HOUR:36e5,MILLISECONDS_IN_MINUTE:6e4,MILLISECONDS_IN_SECOND:1e3},Object.freeze(i.TimeSpan),i.Periodicity={TICK:"t",RENKO:"r",VOLUME:"v",RANGE:"range",REVS:"revs",SECOND:"s",MINUTE:"",HOUR:"h",DAY:"d",WEEK:"w",MONTH:"m",YEAR:"y"},Object.freeze(i.Periodicity);var t=(e.prototype.toString=function(){return this.interval+" "+e.periodicityToString(this.periodicity)},e.periodicityToString=function(t){switch(t){case i.Periodicity.TICK:return"tick";case i.Periodicity.RANGE:return"range";case i.Periodicity.VOLUME:return"volume";case i.Periodicity.RENKO:return"renko";case i.Periodicity.REVS:return"revs";case i.Periodicity.SECOND:return"second";case i.Periodicity.MINUTE:return"minute";case i.Periodicity.HOUR:return"hour";case i.Periodicity.DAY:return"day";case i.Periodicity.WEEK:return"week";case i.Periodicity.MONTH:return"month";case i.Periodicity.YEAR:return"year";default:throw new Error("Unsupported periodicity: "+t)}},e.periodicityToShortString=function(t){switch(t){case i.Periodicity.TICK:return"tick";case i.Periodicity.SECOND:return"sec";case i.Periodicity.MINUTE:return"min";case i.Periodicity.HOUR:return"hr";case i.Periodicity.DAY:return"day";case i.Periodicity.WEEK:return"wk";case i.Periodicity.MONTH:return"mo";case i.Periodicity.YEAR:return"yr";default:throw new Error("Unsupported periodicity: "+t)}},e.timeFrameToTimeInterval=function(t){switch(t.periodicity){case i.Periodicity.TICK:case i.Periodicity.REVS:case i.Periodicity.RANGE:case i.Periodicity.VOLUME:case i.Periodicity.RENKO:return t.interval;case i.Periodicity.SECOND:return t.interval*i.TimeSpan.MILLISECONDS_IN_SECOND;case i.Periodicity.MINUTE:return t.interval*i.TimeSpan.MILLISECONDS_IN_MINUTE;case i.Periodicity.HOUR:return t.interval*i.TimeSpan.MILLISECONDS_IN_HOUR;case i.Periodicity.DAY:return t.interval*i.TimeSpan.MILLISECONDS_IN_DAY;case i.Periodicity.WEEK:return t.interval*i.TimeSpan.MILLISECONDS_IN_WEEK;case i.Periodicity.MONTH:return t.interval*i.TimeSpan.MILLISECONDS_IN_MONTH;case i.Periodicity.YEAR:return t.interval*i.TimeSpan.MILLISECONDS_IN_YEAR;default:return 0}},e.timeIntervalToTimeFrame=function(t){if(t>=i.TimeSpan.MILLISECONDS_IN_YEAR)return new e(i.Periodicity.YEAR,t/i.TimeSpan.MILLISECONDS_IN_YEAR);if(t>=i.TimeSpan.MILLISECONDS_IN_MONTH)return new e(i.Periodicity.MONTH,t/i.TimeSpan.MILLISECONDS_IN_MONTH);if(t>=i.TimeSpan.MILLISECONDS_IN_WEEK&&t%i.TimeSpan.MILLISECONDS_IN_WEEK==0)return new e(i.Periodicity.WEEK,t/i.TimeSpan.MILLISECONDS_IN_WEEK);if(t>=i.TimeSpan.MILLISECONDS_IN_DAY)return new e(i.Periodicity.DAY,t/i.TimeSpan.MILLISECONDS_IN_DAY);if(t>=i.TimeSpan.MILLISECONDS_IN_HOUR)return new e(i.Periodicity.HOUR,t/i.TimeSpan.MILLISECONDS_IN_HOUR);if(t>=i.TimeSpan.MILLISECONDS_IN_MINUTE)return new e(i.Periodicity.MINUTE,t/i.TimeSpan.MILLISECONDS_IN_MINUTE);if(t>=i.TimeSpan.MILLISECONDS_IN_SECOND)return new e(i.Periodicity.SECOND,t/i.TimeSpan.MILLISECONDS_IN_SECOND);throw new Error("Unsupported time interval: "+t)},e);function e(t,e){this.periodicity=t||i.Periodicity.MINUTE,this.interval=i.JsUtil.isFiniteNumber(e)?e:1}i.TimeFrame=t}(StockChartX=(StockChartX=StockChartX||{})||{}),function(t){"use strict";var e=(Object.defineProperty(i,"registeredFormatters",{get:function(){return this._registrar.registeredItems},enumerable:!0,configurable:!0}),i.register=function(t,e){"string"==typeof t?this._registrar.register(t,e):this._registrar.register(t.className,t)},i.deserialize=function(t){if(!t)return null;var e=this._registrar.createInstance(t.className);return e.loadState(t),e},i._registrar=new t.ClassRegistrar,i);function i(){}var o=(Object.defineProperty(r,"className",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"locale",{get:function(){return this._locale},set:function(t){this._locale!==t&&(this._locale=t,this._onLocaleChanged&&this._onLocaleChanged())},enumerable:!0,configurable:!0}),r.prototype.saveState=function(){return{className:this.constructor.className,locale:this.locale}},r.prototype.loadState=function(t){this._locale=t&&t.locale},r);function r(t){this._locale=t}t.NumberFormat=o,t.JsUtil.applyMixins(o,[e])}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(i){"use strict";var o,t=(o=i.NumberFormat,__extends(e,o),Object.defineProperty(e,"className",{get:function(){return"StockChartX.IntlNumberFormat"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._numberFormat.resolvedOptions()},set:function(t){this._createFormat(t)},enumerable:!0,configurable:!0}),e.prototype._onLocaleChanged=function(){this._createFormat()},e.prototype._createFormat=function(t){var e=this.locale||"en";t=t||this._numberFormat&&this._numberFormat.resolvedOptions(),this._numberFormat=new Intl.NumberFormat(e,t||void 0)},e.prototype.format=function(t){return this._numberFormat.format(t)},e.prototype.setDecimalDigits=function(t){if(i.JsUtil.isNegativeNumber(t))throw new Error("Value must be greater or equal to zero.");var e=this._numberFormat.resolvedOptions();e.minimumFractionDigits=e.maximumFractionDigits=t,this._createFormat(e)},e.prototype.saveState=function(){var t=o.prototype.saveState.call(this);return t.options=i.JsUtil.clone(this.options),t},e.prototype.loadState=function(t){o.prototype.loadState.call(this,t),this._createFormat(t&&t.options)},e);function e(t,e){var i=o.call(this,t)||this;return i._createFormat(e),i}i.IntlNumberFormat=t,i.NumberFormat.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(l){"use strict";var i,t=(i=l.NumberFormat,__extends(e,i),Object.defineProperty(e,"className",{get:function(){return"StockChartX.CustomNumberFormat"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatString",{get:function(){return this._formatString},set:function(t){this._formatString=t,this._parseFormat()},enumerable:!0,configurable:!0}),e.prototype._parseFormat=function(){var t=this.formatString;if(!t||"string"!=typeof t)throw new TypeError("Format specifier must be a string.");var e=/%(\+)?([0 ]|'(.))?(-)?([0-9]+)?(\.([0-9]+))?([bcdfoxXeEgG])/g.exec(t);this._options={sign:"+"===e[1],padding:null==e[2]?" ":"'"===e[2].substring(0,1)?e[3]:e[2],alignLeft:"-"===e[4],width:null!=e[5]&&e[5],precision:null!=e[7]&&e[7],type:e[8]}},e.prototype.format=function(t){var e=Number(t),i=this._options,o="";switch(i.type){case"b":o=e.toString(2);break;case"c":o=String.fromCharCode(e);break;case"d":o=parseInt(e,10).toString();break;case"f":o=!1===i.precision?t.toString():e.toFixed(i.precision);break;case"o":o=e.toString(8);break;case"x":o=e.toString(16).toLowerCase();break;case"X":o=e.toString(16).toUpperCase();break;case"e":case"E":o=!1===i.precision?e.toExponential():e.toExponential(i.precision),o="e"===i.type?o.toLowerCase():o.toUpperCase();break;case"g":case"G":var r=!1===i.precision?t.toString():e.toFixed(i.precision),n=!1===i.precision?e.toExponential():e.toExponential(i.precision),o=r.length<n.length?r:n;o="g"===i.type?o.toLowerCase():o.toUpperCase();break;default:throw new Error('Unknown value type "'+i.type+'" detected.')}var a=!1!==i.width&&i.width>o.length;switch(a&&!i.alignLeft&&" "!==i.padding&&(o=l.JsUtil.padStr(o,i),a=!1),i.type){case"d":case"f":case"e":case"E":case"g":case"G":t<0?"-"!==o[0]&&(o="-"+o):i.sign&&(o="+"+o)}return a&&(o=l.JsUtil.padStr(o,i)),o},e.prototype.saveState=function(){var t=i.prototype.saveState.call(this);return t.formatString=this.formatString,t},e.prototype.loadState=function(t){i.prototype.loadState.call(this,t),this.formatString=t&&t.formatString},e);function e(t){var e=i.call(this)||this;return e.formatString=t||"%f",e}l.CustomNumberFormat=t,l.NumberFormat.register(t)}(StockChartX=StockChartX||{}),function(t){"use strict";var e=(Object.defineProperty(i,"registeredFormatters",{get:function(){return this._formatters.registeredItems},enumerable:!0,configurable:!0}),i.register=function(t,e){"string"==typeof t?this._formatters.register(t,e):this._formatters.register(t.className,t)},i.deserialize=function(t){if(!t)return null;var e=this._formatters.createInstance(t.className);return e.loadState(t),e},i._formatters=new t.ClassRegistrar,i);function i(){}var o=(Object.defineProperty(r,"className",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"locale",{get:function(){return this._locale},set:function(t){this._locale!==t&&(this._locale=t,this._onLocaleChanged&&this._onLocaleChanged())},enumerable:!0,configurable:!0}),r.prototype.saveState=function(){return{className:this.constructor.className,locale:this.locale}},r.prototype.loadState=function(t){this.locale=t.locale},r);function r(){}t.DateTimeFormat=o,t.JsUtil.applyMixins(o,[e])}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var i,e=(i=t.DateTimeFormat,__extends(o,i),Object.defineProperty(o,"className",{get:function(){return"StockChartX.CustomDateTimeFormat"},enumerable:!0,configurable:!0}),o.prototype.format=function(t,e){if("none"===(e=e||this.formatString))return"";var i=moment(t);return moment.locale(this.locale),i.format(e)},o.prototype.saveState=function(){var t=i.prototype.saveState.call(this);return t.formatString=this.formatString,t},o.prototype.loadState=function(t){i.prototype.loadState.call(this,t),this.formatString=t.formatString},o);function o(t){var e=i.call(this)||this;return e.formatString=null,e.formatString=t,e}t.CustomDateTimeFormat=e,t.DateTimeFormat.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(o){"use strict";o.DateTimeFormatName={YEAR_MONTH:"year-month",MONTH_DAY:"month-day",DATE:"date",SHORT_DATE_TIME:"short_date_time",LONG_DATE_TIME:"long_date_time",SHORT_TIME:"short_time",LONG_TIME:"long_time"};var i,t=(i=o.DateTimeFormat,__extends(e,i),Object.defineProperty(e,"className",{get:function(){return"StockChartX.TimeIntervalDateTimeFormat"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeInterval",{get:function(){return this._timeInterval},set:function(t){if(!o.JsUtil.isPositiveNumber(t))throw new Error("Time interval must be a positive number.");this._timeInterval=t},enumerable:!0,configurable:!0}),e.prototype._onLocaleChanged=function(){this._clearFormatters()},e.prototype._clearFormatters=function(){this._formatters={}},e.prototype._createFormatter=function(t){var e=this.locale||"en";return new IntlPolyfill.DateTimeFormat(e,t)},e.prototype.format=function(t){var e=this._timeInterval;if(e>=o.TimeSpan.MILLISECONDS_IN_YEAR)return t.getFullYear().toString();var i=o.DateTimeFormatName;return e>=o.TimeSpan.MILLISECONDS_IN_MONTH?this.formatter(i.YEAR_MONTH).format(t):e>=o.TimeSpan.MILLISECONDS_IN_DAY?this.formatter(i.DATE).format(t):e>=o.TimeSpan.MILLISECONDS_IN_MINUTE||e>=o.TimeSpan.MILLISECONDS_IN_SECOND?this.formatter(i.SHORT_DATE_TIME).format(t):this.formatter(i.LONG_DATE_TIME).format(t)},e.prototype.formatWithFormatter=function(t,e){return this.formatter(e).format(t)},e.prototype.formatter=function(t){var e=this._formatters[t];if(e)return e;var i=o.DateTimeFormatName;switch(t){case i.YEAR_MONTH:e=this._createFormatter({year:"numeric",month:"short"});break;case i.MONTH_DAY:e=this._createFormatter({month:"short",day:"2-digit"});break;case i.DATE:e=this._createFormatter({year:"numeric",month:"short",day:"2-digit"});break;case i.SHORT_DATE_TIME:e=this._createFormatter({year:"numeric",month:"short",day:"2-digit",hour:"2-digit",hour12:!1,minute:"2-digit"});break;case i.LONG_DATE_TIME:e=this._createFormatter({year:"numeric",month:"short",day:"2-digit",hour:"2-digit",hour12:!1,minute:"2-digit",second:"2-digit"});break;case i.SHORT_TIME:e=this._createFormatter({hour:"2-digit",hour12:!1,minute:"2-digit"});break;case i.LONG_TIME:e=this._createFormatter({hour:"2-digit",hour12:!1,minute:"2-digit",second:"2-digit"});break;default:throw new Error("Unknown formatter name: "+t)}return this._formatters[t]=e},e.prototype.saveState=function(){var t=i.prototype.saveState.call(this);return t.timeInterval=this.timeInterval,t},e.prototype.loadState=function(t){i.prototype.loadState.call(this,t),this._timeInterval=t&&t.timeInterval},e);function e(t){var e=i.call(this)||this;return e._formatters={},e._timeInterval=t,e}o.TimeIntervalDateTimeFormat=t,o.DateTimeFormat.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(i){"use strict";var o,t=(o=i.DateTimeFormat,__extends(e,o),Object.defineProperty(e,"className",{get:function(){return"StockChartX.CustomTimeIntervalDateTimeFormat"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeInterval",{get:function(){return this._timeInterval},set:function(t){if(!i.JsUtil.isPositiveNumber(t))throw new Error("Time interval must be a positive number.");this._timeInterval=t},enumerable:!0,configurable:!0}),e.prototype._onLocaleChanged=function(){this._formatter.locale=this.locale||"en"},e.prototype.format=function(t){return this._formatter.formatString=this._findFormat(),this._formatter.format(t)},e.prototype._findFormat=function(){var t=this._timeInterval;return t>=i.TimeSpan.MILLISECONDS_IN_YEAR?"YYYY":t>=i.TimeSpan.MILLISECONDS_IN_MONTH?"MMM YYYY":t>=i.TimeSpan.MILLISECONDS_IN_DAY?"D MMM YYYY":t>=i.TimeSpan.MILLISECONDS_IN_MINUTE?"D MMM YYYY HH:mm":t>=i.TimeSpan.MILLISECONDS_IN_SECOND?"D MMM YYYY HH:mm:ss":"D MMM YYYY HH:mm:ss.SSS"},e.prototype.saveState=function(){var t=o.prototype.saveState.call(this);return t.timeInterval=this.timeInterval,t},e.prototype.loadState=function(t){o.prototype.loadState.call(this,t),this._timeInterval=t&&t.timeInterval},e);function e(t){var e=o.call(this)||this;return e._formatter=new i.CustomDateTimeFormat,e._timeInterval=t,e}i.CustomTimeIntervalDateTimeFormat=t,i.DateTimeFormat.register(t)}(StockChartX=StockChartX||{}),function(f){"use strict";var t=(e.prototype.onRequstCanceled=function(t){0===this._requests.count&&t.chart.hideWaitingBar()},e.prototype.onRequestCompleted=function(t,e){var i=t.chart,o=i.dataManager,r=i.firstVisibleRecord,n=i.lastVisibleRecord,a=t.kind===f.RequestKind.MORE_BARS?i.primaryBarDataSeries().low.length:0,l=t.instrument;switch(t.kind){case f.RequestKind.BARS:o.clearBarDataSeries(l),o.appendInstrumentBars(l,e);break;case f.RequestKind.MORE_BARS:o.insertInstrumentBars(l,0,e);break;default:throw new Error("Unknown request kind: "+t.kind)}i.updateComputedDataSeries();var s,c,h,u=i.primaryBarDataSeries().low.length-a;l&&(u=Math.round(i.lastVisibleIndex-i.firstVisibleIndex)),t.kind===f.RequestKind.BARS?!f.Environment.isMobile&&0<u&&(i.barsCount?(s=Math.min(u,n*u/i.barsCount),c=n-r,h=Math.max(0,s-c),i.recordRange(h,s)):i.recordRange(u)):t.kind!==f.RequestKind.MORE_BARS||l||(i.firstVisibleRecord=u<0?0:r+u,i.lastVisibleRecord=n+Math.abs(u)),i.barsCount=u,i.fireValueChanged(f.ChartEvent.HISTORY_LOADED,t),this._requests.remove(t.id),i.hideWaitingBar(),i.updateIndicators(),i.setNeedsAutoScale(),i.setNeedsUpdate(!0),i.dateScale.onMoreHistoryRequestCompleted()},e.nextRequestId=function(){return++this._requestId},e.prototype.send=function(t){this._requests.add(t.id,t),t.chart.showWaitingBar()},e.prototype.cancel=function(t){this._requests.remove(t.id)},e.prototype.destroy=function(){this._requests.clear()},e.prototype.isRequestAlive=function(t){return this._requests.containsKey(t.id)},e._requestId=0,e);function e(){this._requests=new f.Dictionary}f.Datafeed=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(s){"use strict";var i,t=(i=s.Datafeed,__extends(e,i),e.prototype.send=function(t){i.prototype.send.call(this,t),this._loadData(t)},e.prototype._buildUrl=function(t){if(!this._urlBuilder)throw new Error("Url builder is not provided.");return this._urlBuilder(t)},e.prototype._loadData=function(e){var i=this,t=this._buildUrl(e);$.get(t,function(t){i.isRequestAlive(e)&&(i._processResult(t,e),i.subscribeToRealtime(e))}).fail(function(){i.onRequstCanceled(e),s.UI.Notification.error("Unable to load data file.",e.chart)})},e.prototype._processResult=function(t,e){var i=this._parseBars(t,e);this.onRequestCompleted(e,i)},e.prototype.subscribeToRealtime=function(t){var e,r=this,n=t.chart,a=(e=t).instrument||e.chart.instrument;this.realtimeSubscription[a.symbol]=setInterval(function(){var t,e,i,o=r._getLastBar(n,n.instrument.symbol==a.symbol?null:a);o&&(t=o.close+Math.random()*o.close/100*(50<100*Math.random()?1:-1),e=o.volume+Math.random()*o.volume/100*(50<100*Math.random()?1:-1),i={date:new Date,instrument:a,volume:e,price:t},r.processQuote(n,i))},300)},e.prototype.processQuote=function(t,e){if(null!=e.instrument.symbol){var i=t.instrument.symbol==e.instrument.symbol?null:e.instrument,o=this._getLastBar(t,i);if(o){var r=o.date.getTime(),n=r+t.timeInterval,a=new Date(n);if(!(e.date.getTime()<r||0===e.price)){if(new Date(e.date)>=a||null===o){for(null===o&&e.date<a&&(n=r);e.date.getTime()>=n+t.timeInterval;)n+=t.timeInterval;var l={open:e.price,high:e.price,low:e.price,close:e.price,volume:e.volume,date:new Date(n)};i?t.dataManager.appendInstrumentBars(i,l):t.appendBars(l),t.applyAutoScroll(s.BarsUpdateKind.NEW_BAR)}else o.close=e.price,o.volume=o.volume+e.volume/1e3,o.high<e.price&&(o.high=e.price),o.low>e.price&&(o.low=e.price),this._updateLastBar(o,t,i),t.applyAutoScroll(s.BarsUpdateKind.TICK);t.updateIndicators(),t.updateComputedDataSeries(),t.setNeedsUpdate()}}}},e.prototype._updateLastBar=function(t,e,i){var o=i&&i.symbol!==e.instrument.symbol?i.symbol:"",r=e.dataManager.barDataSeries(o);r.open.updateLast(t.open),r.high.updateLast(t.high),r.low.updateLast(t.low),r.close.updateLast(t.close),r.volume.updateLast(t.volume),r.date.updateLast(t.date),e.setNeedsUpdate()},e.prototype._getLastBar=function(t,e){var i=e&&e.symbol||"",o=t.dataManager.barDataSeries(i,!0);return 0===o.date.values.length?null:{open:o.open.lastValue,high:o.high.lastValue,low:o.low.lastValue,close:o.close.lastValue,volume:o.volume.lastValue,date:o.date.lastValue}},e.prototype._parseBars=function(t,e){var i=[],o=t.split("\n"),r=this._dateFormat(e),n=moment.locale(),a=0;moment.locale("en");for(var l=0,s=o;l<s.length;l++){var c=s[l].split(this.separator),h=moment(c[0],r).toDate();if(e.endDate&&h>=e.endDate)break;o.length-a==8&&(c[2]="2");var u={date:h,open:this._round(parseFloat(c[1])),high:this._round(parseFloat(c[2])),low:this._round(parseFloat(c[3])),close:this._round(parseFloat(c[4])),volume:this._round(parseInt(c[5],10))};u.details=this._generateDetails(u,a++),i.push(u)}return 1<i.length&&i[0].date.getTime()>i[1].date.getTime()&&i.reverse(),moment.locale(n),i},e.prototype._generateDetails=function(t,e){for(var i=t.high,o=t.low,r=t.volume.toFixed(0),n=r.length-1,a=[],l=o,s=0;l<=i;l+=this._priceStep){var c=n-s,h=Math.max(1,s),u=Math.max(1,c),f=+(r[s]+r[c]);a.push({bidInfo:{volume:Math.round(f/h),tradesCount:Math.round(f/h),price:l},askInfo:{volume:Math.round(f/u),tradesCount:Math.round(f/u),price:l},volume:f,tradesCount:f,price:l}),++s>n&&(s=0)}return a},e.prototype._round=function(t){return Math.round(4*t)/4},e.prototype.destroy=function(){for(var t in i.prototype.destroy.call(this),this.realtimeSubscription)clearInterval(this.realtimeSubscription[t])},e);function e(t){var e=i.call(this)||this;return e._priceStep=.25,e.realtimeSubscription={},e._dateFormat=t.dateFormat,e._urlBuilder=t.urlBuilder,e.separator=t.separator||",",e}s.CsvDatafeed=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(s){"use strict";var i,t=(i=s.Datafeed,__extends(e,i),e.prototype.send=function(t){this._loadData(t),i.prototype.send.call(this,t)},e.prototype._loadData=function(t){this.dataServer.getHistory(this._processResult.bind(this,t),t)},e.prototype._processResult=function(t,e){var i=this._bars.get(t.id)||[];i.push.apply(i,this._convertBars(e.Bars,t)),!1!==e.IsTail&&(this.subscribe(t),this.onRequestCompleted(t,i),this._bars.remove(t.id)),this._bars.containsKey(t.id)||this._bars.add(t.id,i)},e.prototype.subscribe=function(t){var e=t.chart.instrument;e&&this.dataServer.subscribeQuote(this._processMainQuote.bind(this,t.chart),e),t.instrument&&this.dataServer.subscribeQuote(this._processQuote.bind(this,t.chart),t.instrument)},e.prototype._processMainQuote=function(t,e){if((e=this._convertQuote(e)).symbol.symbol===t.instrument.symbol){var i,o,r=this._getLastBar(t);if(r&&(o=(i=r.date.getTime())+t.timeInterval,!(e.date.getTime()<i||0===e.price)))if(new Date(e.date)>=new Date(o)||null===r){for(null===r&&e.date<o&&(o=i);e.date>=o+t.timeInterval;)o+=t.timeInterval;var n={open:e.price,high:e.price,low:e.price,close:e.price,volume:e.volume,date:new Date(o)};t.appendBars(n),t.dateScale.applyAutoScroll(s.BarsUpdateKind.NEW_BAR)}else r.close=e.price,r.volume=r.volume+e.volume/1e3,r.high<e.price&&(r.high=e.price),r.low>e.price&&(r.low=e.price),this._updateLastBar(r,t),t.dateScale.applyAutoScroll(s.BarsUpdateKind.TICK)}},e.prototype._processQuote=function(t,e){var i,o,r=(e=this._convertQuote(e)).symbol||t.instrument,n=+t.timeInterval,a=this._getLastBar(t,r);if(a&&(o=(i=a.date.getTime())+n,!(e.date.getTime()<i||0===e.price)))if(new Date(e.date)>=new Date(o)||null===a){for(null===a&&e.date<o&&(o=i);e.date>=o+n;)o+=n;var l={open:e.price,high:e.price,low:e.price,close:e.price,volume:e.volume,date:new Date(o)};t.dataManager.appendInstrumentBars(r,l),t.dateScale.applyAutoScroll(s.BarsUpdateKind.NEW_BAR)}else a.close=e.price,a.volume=a.volume+e.volume/1e3,a.high<e.price&&(a.high=e.price),a.low>e.price&&(a.low=e.price),this._updateLastBar(a,t,r),t.dateScale.applyAutoScroll(s.BarsUpdateKind.TICK)},e.prototype._updateLastBar=function(t,e,i){var o=i&&i.symbol!==e.instrument.symbol?i.symbol:"",r=e.dataManager.barDataSeries(o);r.open.updateLast(t.open),r.high.updateLast(t.high),r.low.updateLast(t.low),r.close.updateLast(t.close),r.volume.updateLast(t.volume),r.date.updateLast(t.date),e.setNeedsUpdate(!0)},e.prototype._getLastBar=function(t,e){var i=e&&e.symbol||"",o=t.dataManager.barDataSeries(i,!0);return 0===o.date.values.length?null:{open:o.open.lastValue,high:o.high.lastValue,low:o.low.lastValue,close:o.close.lastValue,volume:o.volume.lastValue,date:o.date.lastValue}},e.prototype._convertQuote=function(t){return{symbol:{symbol:t.Symbol.Symbol,company:t.Symbol.Company,exchange:t.Symbol.Exchange,type:t.Symbol.Type},price:t.Price,bid:t.Bid,bidSize:t.BidSize,ask:t.Ask,askSize:t.AskSize,volume:t.Volume,date:new Date(t.Date)}},e.prototype._convertBars=function(t,r){var n=[],e=moment.locale();return moment.locale("en"),$.each(t,function(t,e){var i,o=moment(e.Date).toDate();r.endDate&&o>=r.endDate||(i={open:e.Open,close:e.Close,high:e.High,low:e.Low,volume:e.Volume,date:new Date(e.Date)},n.push(i))}),1<n.length&&n[0].date.getTime()>n[1].date.getTime()&&n.reverse(),moment.locale(e),n},e);function e(t){var e=i.call(this)||this;return e._bars=new s.Dictionary,e.dataServer=t,e}s.DataServerDatafeed=t}(StockChartX=StockChartX||{}),function(){"use strict";(StockChartX||(StockChartX={})).RequestKind={BARS:"bars",MORE_BARS:"moreBars"}}(),function(h){!function(t){"use strict";var e=(c.generateUniqueEventID=function(){var t=String.fromCharCode(Math.floor(25*Math.random()+65));do{var e=Math.floor(42*Math.random()+48);(e<58||64<e)&&(t+=String.fromCharCode(e))}while(t.length<32);return t},c.prototype.subscribe=function(t,e){var i=c.generateUniqueEventID();return this.messageSubscribers[t][i]=e,i},c.prototype.notify=function(t,e,i){return(null!=e&&null!==this.messageSubscribers[t][e]||null!==(e=c.getFirstSubscriberId(this.messageSubscribers[t])))&&("history"===t&&!1===i.IsTail?this.messageSubscribers[t][e](i):(this.messageSubscribers[t][e](i),delete this.messageSubscribers[t][e]),!0)},c.prototype.connect=function(){var l=this;if(null!=this.ws&&1===this.ws.readyState)return!1;var t="MozWebSocket"in window?"MozWebSocket":"WebSocket"in window?"WebSocket":null;return null!=t&&(this.ws=new window[t]("ws://"+this.config.SERVER_HOST+":"+this.config.SERVER_PORT+"/"),this.ws.onopen=function(){l.loggingIn&&l.sendQuery({MsgType:"LoginRequest",Login:l.userCredentials.login,Password:l.userCredentials.password})},this.ws.onclose=function(){l.loggingOut||(l.loggingIn=!1)},this.ws.onmessage=function(t){var e=jQuery.parseJSON(t.data);switch(e.MsgType){case"LoginResponse":null!==e.Error?l.notify("login",null,{Success:!1,Reason:e.Error}):l.notify("login",null,{Success:!0});break;case"LogoutResponse":l.loggingOut=!1,l.disconnect();break;case"DataFeedListResponse":l.notify("dataFeeds",null,e.DataFeeds);break;case"HistoryResponse":l.notify("history",e.ID,{ID:e.ID,Bars:e.Bars,IsTail:e.Tail});break;case"NewTickResponse":for(var i=0,o=e.Tick;i<o.length;i++){var r=o[i],n=l.messageSubscribers.quotes[r.Symbol.Symbol];for(var a in n)n.hasOwnProperty(a)&&n[a](r)}}},!0)},c.prototype.disconnect=function(){null!=this.ws&&1===this.ws.readyState&&(this.ws.close(),this.ws=null)},c.prototype.sendQuery=function(t){this.ws&&1===this.ws.readyState&&this.ws.send(JSON.stringify(t))},c.prototype.doLogin=function(t,e){this.subscribe("login",t),this.userCredentials.login=e.Login,this.userCredentials.password=e.Password,this.loggingIn=!0,this.connect()},c.prototype.doLogout=function(){this.loggingOut=!0,this.sendQuery({MsgType:"LogoutRequest"}),this.disconnect()},c.getFirstSubscriberId=function(t){for(var e in t)if(t.hasOwnProperty(e))return e;return null},c.prototype.getDataFeeds=function(t){this.subscribe("dataFeeds",t),this.sendQuery({MsgType:"DataFeedListRequest"})},c.prototype.subscribeQuote=function(t,e){var i="quotes",o=this._dataFeedOptionsSelect(this.dataFeedOption.val());this.messageSubscribers[i][e.symbol],this.messageSubscribers[i][e.symbol]=[],this.messageSubscribers[i][e.symbol].push(t),this.sendQuery({MsgType:"SubscribeRequest",Symbol:{DataFeed:o,Exchange:e.exchange,Symbol:e.symbol,Company:e.company,Type:1}})},c.prototype.unsubscribeQuote=function(t,e){var i=this._dataFeedOptionsSelect(this.dataFeedOption.val()),o=this.messageSubscribers.quotes[e.symbol];if(o){for(var r in o)o.hasOwnProperty(r)&&o[r]===t&&o.splice(r,1);0===o.length&&delete this.messageSubscribers.quotes[e.symbol],this.sendQuery({MsgType:"UnsubscribeRequest",Symbol:{DataFeed:i,Exchange:e.exchange,Symbol:e.symbol,Company:e.company,Type:1}})}},c.prototype.getHistory=function(t,e){var i,o,r=this.subscribe("history",t),n=e.chart,a=this._dataFeedOptionsSelect(this.dataFeedOption.val()),l=c.convertPeriodicity(n.timeFrame.periodicity);e.kind===h.RequestKind.MORE_BARS&&(i=e.endDate,o=4628592e5);var s={MsgType:"HistoryRequest",Selection:{Id:r,Symbol:{DataFeed:a,Exchange:n.instrument.exchange,Symbol:e.instrument?e.instrument.symbol:n.instrument.symbol,Company:n.instrument.company,Type:1},Periodicity:l,Interval:n.timeFrame.interval,barsCount:e.count,From:o,To:i}};return this.sendQuery(s),r},c.convertPeriodicity=function(t){switch(t){case h.Periodicity.SECOND:return 0;case h.Periodicity.MINUTE:return 1;case h.Periodicity.HOUR:return 2;case h.Periodicity.DAY:return 3;case h.Periodicity.WEEK:return 4;case h.Periodicity.MONTH:return 5;case h.Periodicity.YEAR:return 6}},c.prototype._dataFeedOptionsSelect=function(t){switch(t){case"0":return"DDF";case"1":return"Simulation DataFeed"}},c);function c(t){this.ws=null,this.loggingIn=null,this.loggingOut=null,this.userCredentials={login:"",password:""},this.messageSubscribers={login:[],logout:[],dataFeeds:[],quotes:[],history:[]},this.dataFeedOption=$("#scxDataFeedDropDown"),this.config=$.extend({SERVER_HOST:null,SERVER_PORT:null},t)}t.DataServer=e}(h.DataServer||(h.DataServer={}))}(StockChartX=StockChartX||{}),function(n){"use strict";var a=jQuery;a.fn.extend({scxGetFrame:function(t){var e,i,o=this.outerWidth(),r=this.outerHeight();return t?(e=t.offset(),(i=this.offset()).left-=e.left,i.top-=e.top):i=this.position(),new n.Rect({left:i.left,top:i.top,width:o,height:r})},scxSize:function(){return{width:this.outerWidth(),height:this.outerHeight()}},scxContentSize:function(){return{width:this.innerWidth(),height:this.innerHeight()}},scxAppendCanvas:function(){return a("<canvas></canvas>").css("position","absolute").appendTo(this)},scxAppend:function(t,e){var i=a("<"+t+"></"+t+">").appendTo(this);if(e)if("string"==typeof e)i.addClass(e);else for(var o=0,r=e;o<r.length;o++){var n=r[o];i.addClass(n)}return i},scxPrepend:function(t,e){var i=a("<"+t+"></"+t+">").prependTo(this);if(e)if("string"==typeof e)i.addClass(e);else for(var o=0,r=e;o<r.length;o++){var n=r[o];i.addClass(n)}return i},scxFrame:function(t){this.css("left",t.left).css("top",t.top).outerWidth(t.width).outerHeight(t.height)},scxPosition:function(t,e){return this.css("left",t).css("top",e),this},scxClientToLocalPoint:function(t,e){var i=this.offset();return{x:Math.round(t-i.left),y:Math.round(e-i.top)}},scxLocalToClientPoint:function(t,e){var i=this.offset();return{x:Math.round(t+i.left),y:Math.round(e+i.top)}},scxTextStyle:function(t){return this.css("color",t.fillColor).css("font-size",t.fontSize+"px").css("font-family",t.fontFamily).css("font-style",t.fontStyle)},scxBorder:function(t,e){return this.css(t,e.width+"px "+e.lineStyle+" "+e.strokeColor)},scxFill:function(t){return!1===t.fillEnabled?this:this.css("background-color",t.fillColor)},scxLocalize:function(t,e){return e&&this.text(e),this.attr("data-i18n",t)}})}(StockChartX=StockChartX||{}),function(t){"use strict";var e=(a.getLineWidth=function(t){return t&&!1===t.strokeEnabled?0:t&&t.width||1},a.getFontSize=function(t){return t&&t.fontSize||12},a.isDarkColor=function(t){return tinycolor(t).isDark()},a.toRgbString=function(t){return tinycolor(t).toRgbString()},a.toRgba=function(t){return tinycolor(t).toRgb()},a.toHexString=function(t){return tinycolor(t).toHexString()},a.lighten=function(t,e){void 0===e&&(e=0);var i=a.toRgbString(t).replace(/[^0-9a-f]/gi,"");i.length<6&&(i=i[0]+i[0]+i[1]+i[1]+i[2]+i[2]);for(var o,r="#",n=0;n<3;n++)o=parseInt(i.substr(2*n,2),16),r+=("00"+(o=Math.round(Math.min(Math.max(0,o+255*e),255)).toString(16))).substr(o.length);return r},a.setVisibility=function(t,e){t&&t.css("visibility",e?"visible":"hidden")},a.setBackground=function(t,e){if(Array.isArray(e)){if(0===e.length)throw new Error("Invalid theme: 'background' must be a color or array of colors.");1===e.length?a.setBackgroundColor(t,e[0]):a.setGradientBackground(t,e)}else a.setBackgroundColor(t,e)},a.isFullscreenEnabled=function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled},a.enterFullscreen=function(t){var e=t||document.body;if(e.requestFullscreen)e.requestFullscreen();else if(e.msRequestFullscreen)e.msRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else{if(!e.webkitRequestFullscreen)throw new Error("Fullscreen mode is not supported.");e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}},a.exitFullscreen=function(){document.fullscreenElement?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},a.setGradientBackground=function(t,e){var i="startColorstr="+a.toHexString(e[1]),o="endColorstr="+a.toHexString(e[0]);t.css("background","-webkit-gradient(linear,left bottom,left top,color-stop(0, "+e[0]+"), color-stop(1, "+e[1]+"))").css("background","linear-gradient(to top, "+e[0]+", "+e[1]+")").css("filter","progid:DXImageTransform.Microsoft.gradient(GradientType=0, "+i+", "+o+")")},a.setBackgroundColor=function(t,e){t.css("background",e)},a.removeUnsecureTags=function(t){for(var e=$(t),i=0,o=["script","embed","object","applet","iframe","frame","frameset"];i<o.length;i++){var r=o[i];e.find(r).remove()}return e},a.getRandomColorVisibleOn=function(t){var e=Array.isArray(t)?tinycolor.mix(tinycolor(t[0]),tinycolor(t[t.length]),50):tinycolor(t),i=tinycolor.mix(e,tinycolor.random());return e.isDark()?i.lighten().toRgbString():i.darken().toRgbString()},a);function a(){}t.HtmlUtil=e}(StockChartX=StockChartX||{});var __assign=this&&this.__assign||Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};!function(i){"use strict";var t,e,o;i.StrokePriority={COLOR:"color"},Object.freeze(i.StrokePriority),i.FillPriority={COLOR:"color"},Object.freeze(i.FillPriority),(e=t=i.LineStyle||(i.LineStyle={})).SOLID="solid",e.DASH="dash",e.DOT="dot",e.DASH_DOT="dash-dot",Object.freeze(t),(o=i.FontStyle||(i.FontStyle={})).Normal="normal",Object.freeze(o),i.FontDefaults={fontFamily:"Arial",fontSize:12,fontStyle:o.Normal,fontVariant:"normal",fontWeight:"normal"},i.DefaultText={fontFamily:"Calibri",fontSize:11,fillColor:"black"},i.StrokeDefaults={strokePriority:"color",strokeColor:"black",width:1,lineStyle:t.SOLID,lineJoin:"miter",lineCap:"butt"},i.DashArray={DOT:[1,7],DASH:[7,7],DASH_DOT:[7,7,1,7]},i.getDefaultWatermarkStyles=function(t){return{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:o.Normal,fillColor:t},details:{fontFamily:"Arial",fontSize:40,fontStyle:o.Normal,fillColor:t}}},i.getDefaultValueMarkerTheme=function(t,e){return{text:__assign({},i.DefaultText,{fillColor:e}),fill:{fillColor:t}}}}(StockChartX=StockChartX||{}),function(t){"use strict";t.Dark={name:"Dark",chart:{background:["#1B1C26"],border:{width:1,strokeColor:"grey",lineStyle:t.LineStyle.SOLID},instrumentWatermark:t.getDefaultWatermarkStyles("white")},splitter:{fillColor:"#292C38",hoverFillColor:"white"},chartPanel:{grid:{width:1,strokeColor:"#292C38"},title:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white"},instrumentWatermark:t.getDefaultWatermarkStyles("white")},tradingPanel:{tradingBarUnit:"pixels",tradingBarLength:40,buyPanelBackground:"rgba(72, 149, 245, 0.3)",sellPanelBackground:"rgba(201, 59, 59, 0.3)",buyMarkerBackground:"rgb(72, 149, 245)",sellMarkerBackground:"rgb(201, 59, 59)",markerFontColor:"#fff"},valueScale:{fill:{fillColor:"#1B1C26"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"rgba(255,255,255, 0.7)"},line:{width:1,strokeColor:"#505050"},border:{width:0,strokeColor:"darkgray",lineStyle:t.LineStyle.SOLID},valueMarker:t.getDefaultValueMarkerTheme("green","black")},dateScale:{fill:{fillColor:"#1B1C26"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#FFFFFF"},line:{width:1,strokeColor:"#505050"},border:{width:0,strokeColor:"darkgray",lineStyle:t.LineStyle.SOLID},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"#FFFFFF"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:t.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"#545454",width:1,lineStyle:t.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"#000000"},line:{width:1,strokeColor:"darkgray",lineStyle:t.LineStyle.DASH},fill:{fillColor:"#FFFFFF"}},zoomIn:{border:{width:1,strokeColor:"white",lineStyle:t.LineStyle.SOLID},fill:{fillColor:"rgba(255, 255, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"white"}}},line:{simple:{width:1,strokeColor:"white"},mountain:{line:{width:1,strokeColor:"white"},fill:{linearGradient:["rgba(63, 167, 225, 0.4) ","rgba(63, 167, 225, 0)"]}},step:{width:1,strokeColor:"white"}},histogram:{line:{width:1,strokeColor:"white"},coloredLine:{upBar:{width:1,strokeColor:"grey"},downBar:{width:1,strokeColor:"red"}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"green"}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"red"}}}},bar:{OHLC:{width:1,strokeColor:"white"},HLC:{width:1,strokeColor:"white"},HL:{width:1,strokeColor:"white"},coloredOHLC:{upBar:{width:1,strokeColor:"#3FA7E1"},downBar:{width:1,strokeColor:"#E85050"}},coloredHLC:{upBar:{width:1,strokeColor:"#3FA7E1"},downBar:{width:1,strokeColor:"#E85050"}},coloredHL:{upBar:{width:1,strokeColor:"#3FA7E1"},downBar:{width:1,strokeColor:"#E85050"}},candle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"#3FA7E1"},wick:{width:1,strokeColor:"white"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"#E85050"},wick:{width:1,strokeColor:"white"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"#3FA7E1"},wick:{width:1,strokeColor:"white"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"#E85050"},wick:{width:1,strokeColor:"white"}}},renko:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"#3FA7E1"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"#E85050"}}},lineBreak:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#3FA7E1"},fill:{fillEnabled:!0,fillColor:"#3FA7E1"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#E85050"},fill:{fillEnabled:!0,fillColor:"#E85050"}}},hollowCandle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"#3FA7E1"},wick:{width:1,strokeColor:"white"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"#E85050"},wick:{width:1,strokeColor:"white"}},upHollowCandle:{border:{width:1,strokeColor:"#3FA7E1"},wick:{width:1,strokeColor:"#3FA7E1"}},downHollowCandle:{border:{width:1,strokeColor:"#E85050"},wick:{width:1,strokeColor:"#E85050"}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"#3FA7E1"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"#E85050"}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"#3FA7E1"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"#E85050"}}},candleVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"#3FA7E1"},wick:{width:1,strokeColor:"white"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"#E85050"},wick:{width:1,strokeColor:"white"}}},equiVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#3FA7E1"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#E85050"}}},equiVolumeShadow:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#3FA7E1"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#E85050"}}}},indicator:{line1:{width:1,lineStyle:t.LineStyle.SOLID,strokeColor:"white"},line2:{width:1,lineStyle:t.LineStyle.SOLID,strokeColor:"#3FA7E1"},line3:{width:1,lineStyle:t.LineStyle.SOLID,strokeColor:"#E85050"},line4:{width:1,lineStyle:t.LineStyle.SOLID,strokeColor:"#0000FF"},line5:{width:1,lineStyle:t.LineStyle.SOLID,strokeColor:"yellow"},histogram:{color:"#32CD32"},blackText:{fontFamily:"Arial",fontSize:10,fontStyle:t.FontStyle.Normal,fillColor:"black"},levels:{line1:{width:1,lineStyle:t.LineStyle.SOLID,strokeColor:"#FF0000"},line2:{width:1,lineStyle:t.LineStyle.SOLID,strokeColor:"#32CD32"},line3:{width:1,lineStyle:t.LineStyle.SOLID,strokeColor:"#FFD500"},line4:{width:1,lineStyle:t.LineStyle.SOLID,strokeColor:"#0000FF"},line5:{width:1,lineStyle:t.LineStyle.SOLID,strokeColor:"#808080"}}}},selectionMarker:{line:{strokeColor:"white",width:1},fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},fill:{fillColor:"orange"},centerPointFill:{fillColor:"rgb(68, 68, 68)"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(255, 255, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:t.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(255, 255, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"white"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},fill:{fillColor:"rgba(0, 0, 0, 0.8)"}},abstract:{line:{strokeColor:"white",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"white",decoration:""}},trendAngle:{line:{strokeColor:"white",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"white",decoration:""},arc:{strokeColor:"white",width:1,lineStyle:t.LineStyle.DOT},horizontalLine:{strokeColor:"white",width:1,lineStyle:t.LineStyle.DOT}},abstractMarker:{fill:{fillColor:"white"}},fibonacci:{trendLine:{strokeColor:"white",width:1,lineStyle:t.LineStyle.DASH},line:{strokeColor:"white",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"white"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#FFFFFF",decoration:""}},image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"white",fontWeight:"normal",fontStyle:t.FontStyle.Normal,decoration:""},border:{enabled:!0,width:1,color:"orange",lineStyle:t.LineStyle.SOLID},fill:{enabled:!0,color:"rgb(44, 44, 44)"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white"}}}},highlightedColumn:{fill:{fillColor:"rgba(90, 130, 182, 0.45)"}},button:{accept:{fill:{fillColor:"white"},line:{strokeColor:"green",width:1}},cancel:{fill:{fillColor:"white"},line:{strokeColor:"red",width:1}},none:{fill:{fillColor:"white"}}},positionBar:{short:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},long:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},orderBar:{buy:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}},sell:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:t.FontStyle.Normal,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}}}}}(StockChartX=StockChartX||{}),function(t){"use strict";t.Theme={Dark:t.Dark,Light:{name:"Light",scrollingPanelBackgroud:{fill:{fillColor:"#000"}},chart:{background:["#FFFFFF"],border:{width:1,strokeColor:"rgba(21, 22, 29, 0.1)",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:"normal",fillColor:"#0d0d0d"},details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#1b1b1b"}}},splitter:{fillColor:"#999",hoverFillColor:"#DDD"},chartPanel:{grid:{width:1,strokeColor:"#CCC"},title:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},watermark:{text:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#666"}}},valueScale:{fill:{fillColor:"#FFF"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:0,strokeColor:"#CCC",lineStyle:"solid"},valueMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"}}},dateScale:{fill:{fillColor:"#FFF"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:0,strokeColor:"#CCC",lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:t.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"#545454",width:1,lineStyle:t.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},line:{width:1,strokeColor:"#333",lineStyle:"dashed"},fill:{fillColor:"#15161D"}},zoomIn:{border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"#555"}}},line:{simple:{width:1,strokeColor:"#555"},mountain:{line:{width:1,strokeColor:"#555"},fill:{linearGradient:["rgba(63, 225, 147, 0.4) ","rgba(63, 225, 147, 0)"]}},step:{width:1,strokeColor:"#555"}},histogram:{line:{width:1,strokeColor:"#555"},coloredLine:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"green"}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"red"}}}},bar:{OHLC:{width:1,strokeColor:"#555"},HLC:{width:1,strokeColor:"#555"},HL:{width:1,strokeColor:"#555"},coloredOHLC:{upBar:{width:1,strokeColor:"#61D07F"},downBar:{width:1,strokeColor:"#E85050"}},coloredHLC:{upBar:{width:1,strokeColor:"#61D07F"},downBar:{width:1,strokeColor:"#E85050"}},coloredHL:{upBar:{width:1,strokeColor:"#61D07F"},downBar:{width:1,strokeColor:"#E85050"}},candle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#61D07F"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#E85050"},wick:{width:1,strokeColor:"#555"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#61D07F"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#E85050"},wick:{width:1,strokeColor:"#555"}}},renko:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#61D07F"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#E85050"}}},lineBreak:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#61D07F"},fill:{fillEnabled:!0,fillColor:"#61D07F"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#E85050"},fill:{fillEnabled:!0,fillColor:"#E85050"}}},hollowCandle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#61D07F"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#E85050"},wick:{width:1,strokeColor:"#555"}},upHollowCandle:{border:{width:1,strokeColor:"#61D07F"},wick:{width:1,strokeColor:"#61D07F"}},downHollowCandle:{border:{width:1,strokeColor:"#E85050"},wick:{width:1,strokeColor:"#E85050"}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"#61D07F"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"#E85050"}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"#61D07F"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"#E85050"}}},candleVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"#61D07F"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"#E85050"},wick:{width:1,strokeColor:"#555"}}},equiVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#61D07F"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#E85050"}}},equiVolumeShadow:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#61D07F"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#E85050"}}}},indicator:{line1:{width:1,lineStyle:"solid",strokeColor:"#20908A"},line2:{width:1,lineStyle:"solid",strokeColor:"#EBBD79"},line3:{width:1,lineStyle:"solid",strokeColor:"#3452F1"},line4:{width:1,lineStyle:"solid",strokeColor:"#C04672"},line5:{width:1,lineStyle:"solid",strokeColor:"#8F73DC"},histogram:{color:"#32CD32"},blackText:{fontFamily:"Arial",fontSize:10,fontStyle:"normal",fillColor:"black"},levels:{line1:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FFD500"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"#808080"}}}},selectionMarker:{line:{strokeColor:"#777",width:1},fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"#15C"},centerPointFill:{fillColor:"white"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:t.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"black"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"rgba(255, 255, 255, 0.8)"}},abstract:{line:{strokeColor:"#555",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},trendAngle:{line:{strokeColor:"#555",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""},arc:{strokeColor:"#555",width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"#555",width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"#555"}},fibonacci:{trendLine:{strokeColor:"black",width:1,lineStyle:"dash"},line:{strokeColor:"black",width:1},fill:{fillColor:"rgba(0, 0, 0, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"black"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"black",fontWeight:"normal",fontStyle:"normal",decoration:""},border:{enabled:!0,width:1,color:"#15C",lineStyle:t.LineStyle.SOLID},fill:{enabled:!0,color:"white"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}}},highlightedColumn:{fill:{fillColor:"rgba(90, 130, 182, 0.45)"}},button:{accept:{fill:{fillColor:"#BDBDBD"},line:{strokeColor:"green",width:1}},cancel:{fill:{fillColor:"#BDBDBD"},line:{strokeColor:"red",width:1}},none:{fill:{fillColor:"#BDBDBD"}}},positionBar:{short:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},long:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},orderBar:{buy:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}},sell:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}}}},Beet:{name:"Beet",scrollingPanelBackgroud:{fill:{fillColor:"#000"}},chart:{background:["rgb(255, 255, 255)","rgb(255, 255, 255)"],border:{width:1,strokeColor:"grey",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:"normal",fillColor:"#0d0d0d"},details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#1b1b1b"}}},splitter:{fillColor:"#999",hoverFillColor:"#DDD"},chartPanel:{grid:{width:1,strokeColor:"#CCC"},title:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"}},valueScale:{fill:{fillColor:"#dbd0d8"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},valueMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"}}},dateScale:{fill:{fillColor:"#dbd0d8"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:t.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"red",width:1,lineStyle:t.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},line:{width:1,strokeColor:"#333",lineStyle:"dashed"},fill:{fillColor:"#696969"}},zoomIn:{border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"#555"}}},line:{simple:{width:1,strokeColor:"#555"},mountain:{line:{width:1,strokeColor:"#555"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},step:{width:1,strokeColor:"#555"}},histogram:{line:{width:1,strokeColor:"#555"},coloredLine:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"green"}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"red"}}}},bar:{OHLC:{width:1,strokeColor:"#555"},HLC:{width:1,strokeColor:"#555"},HL:{width:1,strokeColor:"#555"},coloredOHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHL:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},candle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},renko:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},lineBreak:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"green"},fill:{fillEnabled:!0,fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"red"},fill:{fillEnabled:!0,fillColor:"red"}}},hollowCandle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}},upHollowCandle:{border:{width:1,strokeColor:"green"},wick:{width:1,strokeColor:"green"}},downHollowCandle:{border:{width:1,strokeColor:"red"},wick:{width:1,strokeColor:"red"}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},candleVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},equiVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},equiVolumeShadow:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#808080"}}}},indicator:{line1:{width:1,lineStyle:"solid",strokeColor:"#505050"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"yellow"},histogram:{color:"#32CD32"},blackText:{fontFamily:"Arial",fontSize:10,fontStyle:"normal",fillColor:"black"},levels:{line1:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FFD500"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"yellow"}}}},selectionMarker:{line:{strokeColor:"#777",width:1},fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"#15C"},centerPointFill:{fillColor:"white"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:t.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"black"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"rgba(255, 255, 255, 0.8)"}},abstract:{line:{strokeColor:"#555",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},trendAngle:{line:{strokeColor:"#555",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""},arc:{strokeColor:"#555",width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"#555",width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"#555"}},fibonacci:{trendLine:{strokeColor:"black",width:1,lineStyle:"dash"},line:{strokeColor:"black",width:1},fill:{fillColor:"rgba(0, 0, 0, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"black"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"black",fontWeight:"normal",fontStyle:"normal",decoration:""},border:{enabled:!0,width:1,color:"#15C",lineStyle:t.LineStyle.SOLID},fill:{enabled:!0,color:"white"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}}},highlightedColumn:{fill:{fillColor:"rgba(90, 130, 182, 0.45)"}},button:{accept:{fill:{fillColor:"#B9B0B6"},line:{strokeColor:"green",width:1}},cancel:{fill:{fillColor:"#B9B0B6"},line:{strokeColor:"red",width:1}},none:{fill:{fillColor:"#B9B0B6"}}},positionBar:{short:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},long:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},orderBar:{buy:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}},sell:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}}}},Cyan:{name:"Cyan",scrollingPanelBackgroud:{fill:{fillColor:"#000"}},chart:{background:["rgb(255, 255, 255)","rgb(255, 255, 255)"],border:{width:1,strokeColor:"grey",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:"normal",fillColor:"#0d0d0d"},details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#1b1b1b"}}},splitter:{fillColor:"#999",hoverFillColor:"#DDD"},chartPanel:{grid:{width:1,strokeColor:"#CCC"},title:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"}},valueScale:{fill:{fillColor:"#ebedf0"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},valueMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"}}},dateScale:{fill:{fillColor:"#ebedf0"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:t.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"red",width:1,lineStyle:t.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},line:{width:1,strokeColor:"#333",lineStyle:"dashed"},fill:{fillColor:"#696969"}},zoomIn:{border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"#555"}}},line:{simple:{width:1,strokeColor:"#555"},mountain:{line:{width:1,strokeColor:"#555"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},step:{width:1,strokeColor:"#555"}},histogram:{line:{width:1,strokeColor:"#555"},coloredLine:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"green"}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"red"}}}},bar:{OHLC:{width:1,strokeColor:"#555"},HLC:{width:1,strokeColor:"#555"},HL:{width:1,strokeColor:"#555"},coloredOHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHL:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},candle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},renko:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},lineBreak:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"green"},fill:{fillEnabled:!0,fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"red"},fill:{fillEnabled:!0,fillColor:"red"}}},hollowCandle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}},upHollowCandle:{border:{width:1,strokeColor:"green"},wick:{width:1,strokeColor:"green"}},downHollowCandle:{border:{width:1,strokeColor:"red"},wick:{width:1,strokeColor:"red"}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},candleVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},equiVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},equiVolumeShadow:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#808080"}}}},indicator:{line1:{width:1,lineStyle:"solid",strokeColor:"#505050"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"yellow"},histogram:{color:"#32CD32"},blackText:{fontFamily:"Arial",fontSize:10,fontStyle:"normal",fillColor:"black"},levels:{line1:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FFD500"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"yellow"}}}},selectionMarker:{line:{strokeColor:"#777",width:1},fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"#15C"},centerPointFill:{fillColor:"white"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:t.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"black"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"rgba(255, 255, 255, 0.8)"}},abstract:{line:{strokeColor:"#555",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},trendAngle:{line:{strokeColor:"#555",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""},arc:{strokeColor:"#555",width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"#555",width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"#555"}},fibonacci:{trendLine:{strokeColor:"black",width:1,lineStyle:"dash"},line:{strokeColor:"black",width:1},fill:{fillColor:"rgba(0, 0, 0, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"black"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"black",fontWeight:"normal",fontStyle:"normal",decoration:""},border:{enabled:!0,width:1,color:"#15C",lineStyle:t.LineStyle.SOLID},fill:{enabled:!0,color:"white"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}}},highlightedColumn:{fill:{fillColor:"rgba(90, 130, 182, 0.45)"}},button:{accept:{fill:{fillColor:"#BDBDBD"},line:{strokeColor:"green",width:1}},cancel:{fill:{fillColor:"#BDBDBD"},line:{strokeColor:"red",width:1}},none:{fill:{fillColor:"#BDBDBD"}}},positionBar:{short:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},long:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},orderBar:{buy:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}},sell:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}}}},Gray:{name:"Gray",scrollingPanelBackgroud:{fill:{fillColor:"#000"}},chart:{background:["rgb(255, 255, 255)","rgb(255, 255, 255)"],border:{width:1,strokeColor:"grey",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:"normal",fillColor:"#0d0d0d"},details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#1b1b1b"}}},splitter:{fillColor:"#999",hoverFillColor:"#DDD"},chartPanel:{grid:{width:1,strokeColor:"#CCC"},title:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"}},valueScale:{fill:{fillColor:"#d8d8d8"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},valueMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"}}},dateScale:{fill:{fillColor:"#d8d8d8"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:t.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"red",width:1,lineStyle:t.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},line:{width:1,strokeColor:"#333",lineStyle:"dashed"},fill:{fillColor:"#696969"}},zoomIn:{border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"#555"}}},line:{simple:{width:1,strokeColor:"#555"},mountain:{line:{width:1,strokeColor:"#555"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},step:{width:1,strokeColor:"#555"}},histogram:{line:{width:1,strokeColor:"#555"},coloredLine:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"green"}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"red"}}}},bar:{OHLC:{width:1,strokeColor:"#555"},HLC:{width:1,strokeColor:"#555"},HL:{width:1,strokeColor:"#555"},coloredOHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHL:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},candle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},renko:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},lineBreak:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"green"},fill:{fillEnabled:!0,fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"red"},fill:{fillEnabled:!0,fillColor:"red"}}},hollowCandle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}},upHollowCandle:{border:{width:1,strokeColor:"green"},wick:{width:1,strokeColor:"green"}},downHollowCandle:{border:{width:1,strokeColor:"red"},wick:{width:1,strokeColor:"red"}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},candleVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},equiVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},equiVolumeShadow:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"#808080"}}}},indicator:{line1:{width:1,lineStyle:"solid",strokeColor:"#505050"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"yellow"},histogram:{color:"#32CD32"},blackText:{fontFamily:"Arial",fontSize:10,fontStyle:"normal",fillColor:"black"},levels:{line1:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FFD500"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"yellow"}}}},selectionMarker:{line:{strokeColor:"#777",width:1},fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"#15C"},centerPointFill:{fillColor:"white"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:t.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"black"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"rgba(255, 255, 255, 0.8)"}},abstract:{line:{strokeColor:"#555",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},trendAngle:{line:{strokeColor:"#555",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""},arc:{strokeColor:"#555",width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"#555",width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"#555"}},fibonacci:{trendLine:{strokeColor:"black",width:1,lineStyle:"dash"},line:{strokeColor:"black",width:1},fill:{fillColor:"rgba(0, 0, 0, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"black"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"black",fontWeight:"normal",fontStyle:"normal",decoration:""},border:{enabled:!0,width:1,color:"#15C",lineStyle:t.LineStyle.SOLID},fill:{enabled:!0,color:"white"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}}},highlightedColumn:{fill:{fillColor:"rgba(90, 130, 182, 0.45)"}},button:{accept:{fill:{fillColor:"#BDBDBD"},line:{strokeColor:"green",width:1}},cancel:{fill:{fillColor:"#BDBDBD"},line:{strokeColor:"red",width:1}},none:{fill:{fillColor:"#BDBDBD"}}},positionBar:{short:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},long:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},orderBar:{buy:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}},sell:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}}}},Olive:{name:"Olive",scrollingPanelBackgroud:{fill:{fillColor:"#000"}},chart:{background:["rgb(255, 255, 255)","rgb(255, 255, 255)"],border:{width:1,strokeColor:"grey",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:"normal",fillColor:"#0d0d0d"},details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#1b1b1b"}}},splitter:{fillColor:"#999",hoverFillColor:"#DDD"},chartPanel:{grid:{width:1,strokeColor:"#CCC"},title:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"}},valueScale:{fill:{fillColor:"#e2e7da"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},valueMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"}}},dateScale:{fill:{fillColor:"#e2e7da"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:t.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"red",width:1,lineStyle:t.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},line:{width:1,strokeColor:"#333",lineStyle:"dashed"},fill:{fillColor:"#696969"}},zoomIn:{border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"#555"}}},line:{simple:{width:1,strokeColor:"#555"},mountain:{line:{width:1,strokeColor:"#555"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},step:{width:1,strokeColor:"#555"}},histogram:{line:{width:1,strokeColor:"#555"},coloredLine:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"green"}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"red"}}}},bar:{OHLC:{width:1,strokeColor:"#555"},HLC:{width:1,strokeColor:"#555"},HL:{width:1,strokeColor:"#555"},coloredOHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHL:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},candle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},renko:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},lineBreak:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"green"},fill:{fillEnabled:!0,fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"red"},fill:{fillEnabled:!0,fillColor:"red"}}},hollowCandle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}},upHollowCandle:{border:{width:1,strokeColor:"green"},wick:{width:1,strokeColor:"green"}},downHollowCandle:{border:{width:1,strokeColor:"red"},wick:{width:1,strokeColor:"red"}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},candleVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},equiVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},equiVolumeShadow:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}}},indicator:{line1:{width:1,lineStyle:"solid",strokeColor:"#505050"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"yellow"},histogram:{color:"#32CD32"},blackText:{fontFamily:"Arial",fontSize:10,fontStyle:"normal",fillColor:"black"},levels:{line1:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FFD500"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"#808080"}}}},selectionMarker:{line:{strokeColor:"#777",width:1},fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"#15C"},centerPointFill:{fillColor:"white"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:t.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"black"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"rgba(255, 255, 255, 0.8)"}},abstract:{line:{strokeColor:"#555",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},trendAngle:{line:{strokeColor:"#555",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""},arc:{strokeColor:"#555",width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"#555",width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"#555"}},fibonacci:{trendLine:{strokeColor:"black",width:1,lineStyle:"dash"},line:{strokeColor:"black",width:1},fill:{fillColor:"rgba(0, 0, 0, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"black"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"black",fontWeight:"normal",fontStyle:"normal",decoration:""},border:{enabled:!0,width:1,color:"#15C",lineStyle:t.LineStyle.SOLID},fill:{enabled:!0,color:"white"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}}},highlightedColumn:{fill:{fillColor:"rgba(90, 130, 182, 0.45)"}},button:{accept:{fill:{fillColor:"#BDBDBD"},line:{strokeColor:"green",width:1}},cancel:{fill:{fillColor:"#BDBDBD"},line:{strokeColor:"red",width:1}},none:{fill:{fillColor:"#BDBDBD"}}},positionBar:{short:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},long:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},orderBar:{buy:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}},sell:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}}}},Orange:{name:"Orange",scrollingPanelBackgroud:{fill:{fillColor:"#000"}},chart:{background:["rgb(255, 255, 255)","rgb(255, 255, 255)"],border:{width:1,strokeColor:"grey",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:"normal",fillColor:"#0d0d0d"},details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#1b1b1b"}}},splitter:{fillColor:"#999",hoverFillColor:"#DDD"},chartPanel:{grid:{width:1,strokeColor:"#CCC"},title:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"}},valueScale:{fill:{fillColor:"#f1dcd4"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},valueMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"}}},dateScale:{fill:{fillColor:"#f1dcd4"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:t.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"red",width:1,lineStyle:t.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},line:{width:1,strokeColor:"#333",lineStyle:"dashed"},fill:{fillColor:"#696969"}},zoomIn:{border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"#555"}}},line:{simple:{width:1,strokeColor:"#555"},mountain:{line:{width:1,strokeColor:"#555"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},step:{width:1,strokeColor:"#555"}},histogram:{line:{width:1,strokeColor:"#555"},coloredLine:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"green"}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"red"}}}},bar:{OHLC:{width:1,strokeColor:"#555"},HLC:{width:1,strokeColor:"#555"},HL:{width:1,strokeColor:"#555"},coloredOHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHL:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},candle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},renko:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},lineBreak:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"green"},fill:{fillEnabled:!0,fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"red"},fill:{fillEnabled:!0,fillColor:"red"}}},hollowCandle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}},upHollowCandle:{border:{width:1,strokeColor:"green"},wick:{width:1,strokeColor:"green"}},downHollowCandle:{border:{width:1,strokeColor:"red"},wick:{width:1,strokeColor:"red"}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},candleVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},equiVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},equiVolumeShadow:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}}},indicator:{line1:{width:1,lineStyle:"solid",strokeColor:"#505050"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"yellow"},histogram:{color:"#32CD32"},blackText:{fontFamily:"Arial",fontSize:10,fontStyle:"normal",fillColor:"black"},levels:{line1:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FFD500"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"#808080"}}}},selectionMarker:{line:{strokeColor:"#777",width:1},fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"#15C"},centerPointFill:{fillColor:"white"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:t.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"black"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"rgba(255, 255, 255, 0.8)"}},abstract:{line:{strokeColor:"#555",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},trendAngle:{line:{strokeColor:"#555",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""},arc:{strokeColor:"#555",width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"#555",width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"#555"}},fibonacci:{trendLine:{strokeColor:"black",width:1,lineStyle:"dash"},line:{strokeColor:"black",width:1},fill:{fillColor:"rgba(0, 0, 0, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"black"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"black",fontWeight:"normal",fontStyle:"normal",decoration:""},border:{enabled:!0,width:1,color:"#15C",lineStyle:t.LineStyle.SOLID},fill:{enabled:!0,color:"white"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}}},highlightedColumn:{fill:{fillColor:"rgba(90, 130, 182, 0.45)"}},button:{accept:{fill:{fillColor:"#A07B76"},line:{strokeColor:"green",width:1}},cancel:{fill:{fillColor:"#A07B76"},line:{strokeColor:"red",width:1}},none:{fill:{fillColor:"#A07B76"}}},positionBar:{short:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},long:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},orderBar:{buy:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}},sell:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}}}},Purple:{name:"Purple",scrollingPanelBackgroud:{fill:{fillColor:"#000"}},chart:{background:["rgb(255, 255, 255)","rgb(255, 255, 255)"],border:{width:1,strokeColor:"grey",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:"normal",fillColor:"#0d0d0d"},details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#1b1b1b"}}},splitter:{fillColor:"#999",hoverFillColor:"#DDD"},chartPanel:{grid:{width:1,strokeColor:"#CCC"},title:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"}},valueScale:{fill:{fillColor:"#e5dfee"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},valueMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"}}},dateScale:{fill:{fillColor:"#e5dfee"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:t.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"red",width:1,lineStyle:t.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},line:{width:1,strokeColor:"#333",lineStyle:"dashed"},fill:{fillColor:"#696969"}},zoomIn:{border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"#555"}}},line:{simple:{width:1,strokeColor:"#555"},mountain:{line:{width:1,strokeColor:"#555"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},step:{width:1,strokeColor:"#555"}},histogram:{line:{width:1,strokeColor:"#555"},coloredLine:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"green"}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"red"}}}},bar:{OHLC:{width:1,strokeColor:"#555"},HLC:{width:1,strokeColor:"#555"},HL:{width:1,strokeColor:"#555"},coloredOHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHL:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},candle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},renko:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},lineBreak:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"green"},fill:{fillEnabled:!0,fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"red"},fill:{fillEnabled:!0,fillColor:"red"}}},hollowCandle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}},upHollowCandle:{border:{width:1,strokeColor:"green"},wick:{width:1,strokeColor:"green"}},downHollowCandle:{border:{width:1,strokeColor:"red"},wick:{width:1,strokeColor:"red"}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},candleVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},equiVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},equiVolumeShadow:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}}},indicator:{line1:{width:1,lineStyle:"solid",strokeColor:"#505050"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"yellow"},histogram:{color:"#32CD32"},blackText:{fontFamily:"Arial",fontSize:10,fontStyle:"normal",fillColor:"black"},levels:{line1:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FFD500"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"#808080"}}}},selectionMarker:{line:{strokeColor:"#777",width:1},fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"#15C"},centerPointFill:{fillColor:"white"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:t.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"black"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"rgba(255, 255, 255, 0.8)"}},abstract:{line:{strokeColor:"#555",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},trendAngle:{line:{strokeColor:"#555",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""},arc:{strokeColor:"#555",width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"#555",width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"#555"}},fibonacci:{trendLine:{strokeColor:"black",width:1,lineStyle:"dash"},line:{strokeColor:"black",width:1},fill:{fillColor:"rgba(0, 0, 0, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"black"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"black",fontWeight:"normal",fontStyle:"normal",decoration:""},border:{enabled:!0,width:1,color:"#15C",lineStyle:t.LineStyle.SOLID},fill:{enabled:!0,color:"white"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}}},highlightedColumn:{fill:{fillColor:"rgba(90, 130, 182, 0.45)"}},button:{accept:{fill:{fillColor:"#8F809A"},line:{strokeColor:"green",width:1}},cancel:{fill:{fillColor:"#8F809A"},line:{strokeColor:"red",width:1}},none:{fill:{fillColor:"#8F809A"}}},positionBar:{short:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},long:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},orderBar:{buy:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}},sell:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}}}},Sky:{name:"Sky",scrollingPanelBackgroud:{fill:{fillColor:"#000"}},chart:{background:["rgb(255, 255, 255)","rgb(255, 255, 255)"],border:{width:1,strokeColor:"grey",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:"normal",fillColor:"#0d0d0d"},details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#1b1b1b"}}},splitter:{fillColor:"#999",hoverFillColor:"#DDD"},chartPanel:{grid:{width:1,strokeColor:"#CCC"},title:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"}},valueScale:{fill:{fillColor:"#d6e2f0"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},valueMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"}}},dateScale:{fill:{fillColor:"#d6e2f0"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:t.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"red",width:1,lineStyle:t.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},line:{width:1,strokeColor:"#333",lineStyle:"dashed"},fill:{fillColor:"#696969"}},zoomIn:{border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"#555"}}},line:{simple:{width:1,strokeColor:"#555"},mountain:{line:{width:1,strokeColor:"#555"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},step:{width:1,strokeColor:"#555"}},histogram:{line:{width:1,strokeColor:"#555"},coloredLine:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"green"}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"red"}}}},bar:{OHLC:{width:1,strokeColor:"#555"},HLC:{width:1,strokeColor:"#555"},HL:{width:1,strokeColor:"#555"},coloredOHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHL:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},candle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},renko:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},lineBreak:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"green"},fill:{fillEnabled:!0,fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"red"},fill:{fillEnabled:!0,fillColor:"red"}}},hollowCandle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}},upHollowCandle:{border:{width:1,strokeColor:"green"},wick:{width:1,strokeColor:"green"}},downHollowCandle:{border:{width:1,strokeColor:"red"},wick:{width:1,strokeColor:"red"}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},candleVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},equiVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},equiVolumeShadow:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}}},indicator:{line1:{width:1,lineStyle:"solid",strokeColor:"#505050"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"yellow"},histogram:{color:"#32CD32"},blackText:{fontFamily:"Arial",fontSize:10,fontStyle:"normal",fillColor:"black"},levels:{line1:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FFD500"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"#808080"}}}},selectionMarker:{line:{strokeColor:"#777",width:1},fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"#15C"},centerPointFill:{fillColor:"white"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:t.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"black"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"rgba(255, 255, 255, 0.8)"}},abstract:{line:{strokeColor:"#555",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},trendAngle:{line:{strokeColor:"#555",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""},arc:{strokeColor:"#555",width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"#555",width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"#555"}},fibonacci:{trendLine:{strokeColor:"black",width:1,lineStyle:"dash"},line:{strokeColor:"black",width:1},fill:{fillColor:"rgba(0, 0, 0, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"black"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"black",fontWeight:"normal",fontStyle:"normal",decoration:""},border:{enabled:!0,width:1,color:"#15C",lineStyle:t.LineStyle.SOLID},fill:{enabled:!0,color:"white"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}}},highlightedColumn:{fill:{fillColor:"rgba(90, 130, 182, 0.45)"}},button:{accept:{fill:{fillColor:"#BDBDBD"},line:{strokeColor:"green",width:1}},cancel:{fill:{fillColor:"#BDBDBD"},line:{strokeColor:"red",width:1}},none:{fill:{fillColor:"#BDBDBD"}}},positionBar:{short:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},long:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},orderBar:{buy:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}},sell:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}}}},Teal:{name:"Teal",scrollingPanelBackgroud:{fill:{fillColor:"#000"}},chart:{background:["rgb(255, 255, 255)","rgb(255, 255, 255)"],border:{width:1,strokeColor:"grey",lineStyle:"solid"},instrumentWatermark:{symbol:{fontFamily:"Arial",fontSize:70,fontStyle:"normal",fillColor:"#0d0d0d"},details:{fontFamily:"Arial",fontSize:40,fontStyle:"normal",fillColor:"#1b1b1b"}}},splitter:{fillColor:"#999",hoverFillColor:"#DDD"},chartPanel:{grid:{width:1,strokeColor:"#CCC"},title:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"}},valueScale:{fill:{fillColor:"#dee5e5"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},valueMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"}}},dateScale:{fill:{fillColor:"#dee5e5"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"#333"},line:{width:1,strokeColor:"#CCC"},border:{width:1,strokeColor:"#CCC",lineStyle:"solid"},dateMarker:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"green"},stroke:{strokePriority:"color",strokeColor:"#696969",width:1,lineStyle:t.LineStyle.SOLID,lineJoin:"miter",lineCap:"butt"}},breakLine:{stroke:{strokeColor:"red",width:1,lineStyle:t.LineStyle.DASH}}},crossHair:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"white"},line:{width:1,strokeColor:"#333",lineStyle:"dashed"},fill:{fillColor:"#696969"}},zoomIn:{border:{width:1,strokeColor:"darkgray",lineStyle:"solid"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},plot:{point:{dot:{fill:{fillColor:"#555"}}},line:{simple:{width:1,strokeColor:"#555"},mountain:{line:{width:1,strokeColor:"#555"},fill:{fillColor:"rgba(0, 0, 255, 0.5)"}},step:{width:1,strokeColor:"#555"}},histogram:{line:{width:1,strokeColor:"#555"},coloredLine:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},column:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"blue"}},coloredColumn:{upBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"green"}},downBar:{line:{strokeEnabled:!1,width:1,strokeColor:"#555"},fill:{fillColor:"red"}}}},bar:{OHLC:{width:1,strokeColor:"#555"},HLC:{width:1,strokeColor:"#555"},HL:{width:1,strokeColor:"#555"},coloredOHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHLC:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},coloredHL:{upBar:{width:1,strokeColor:"green"},downBar:{width:1,strokeColor:"red"}},candle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},heikinAshi:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},renko:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},lineBreak:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"green"},fill:{fillEnabled:!0,fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"red"},fill:{fillEnabled:!0,fillColor:"red"}}},hollowCandle:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}},upHollowCandle:{border:{width:1,strokeColor:"green"},wick:{width:1,strokeColor:"green"}},downHollowCandle:{border:{width:1,strokeColor:"red"},wick:{width:1,strokeColor:"red"}}},pointAndFigure:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},kagi:{upCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"green"}},downCandle:{border:{strokeEnabled:!0,width:1,strokeColor:"red"}}},candleVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"green"},wick:{width:1,strokeColor:"#555"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"white"},fill:{fillColor:"red"},wick:{width:1,strokeColor:"#555"}}},equiVolume:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}},equiVolumeShadow:{upCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"green"}},downCandle:{border:{strokeEnabled:!1,width:1,strokeColor:"#CCC"},fill:{fillColor:"red"}}}},indicator:{line1:{width:1,lineStyle:"solid",strokeColor:"#505050"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,strokeColor:"#FF0000"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"yellow"},histogram:{color:"#32CD32"},blackText:{fontFamily:"Arial",fontSize:10,fontStyle:"normal",fillColor:"black"},levels:{line1:{width:1,lineStyle:"solid",strokeColor:"#FF0000"},line2:{width:1,lineStyle:"solid",strokeColor:"#32CD32"},line3:{width:1,lineStyle:"solid",strokeColor:"#FFD500"},line4:{width:1,lineStyle:"solid",strokeColor:"#0000FF"},line5:{width:1,lineStyle:"solid",strokeColor:"#808080"}}}},selectionMarker:{line:{strokeColor:"#777",width:1},fill:{fillColor:"black"}},drawing:{note:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"#15C"},centerPointFill:{fillColor:"white"}},measure:{line:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},border:{width:1,strokeColor:"white",strokeEnabled:!0,lineStyle:t.LineStyle.DASH},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"},balloon:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},border:{width:1,strokeColor:"darkgray",strokeEnabled:!0,lineStyle:t.LineStyle.SOLID},fill:{fillEnabled:!0,fillColor:"rgba(0, 0, 255, 0.5)"}}},measureTool:{line:{width:1,strokeColor:"black"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"black"},fill:{fillColor:"rgba(255, 255, 255, 0.8)"}},abstract:{line:{strokeColor:"#555",width:1},fill:{fillColor:"rgba(255, 255, 255, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},trendAngle:{line:{strokeColor:"#555",width:1},text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""},arc:{strokeColor:"#555",width:1,lineStyle:"dot"},horizontalLine:{strokeColor:"#555",width:1,lineStyle:"dot"}},abstractMarker:{fill:{fillColor:"#555"}},fibonacci:{trendLine:{strokeColor:"black",width:1,lineStyle:"dash"},line:{strokeColor:"black",width:1},fill:{fillColor:"rgba(0, 0, 0, 0.3)"},text:{fontFamily:"Calibri",fontSize:12,fillColor:"black"}},arrowUp:{fill:{fillColor:"limegreen"}},arrowDown:{fill:{fillColor:"red"}},text:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"#555",decoration:""}},image:{noImage:{line:{strokeColor:"red",width:1}}}},tooltip:{text:{fontFamily:"Calibri",fontSize:12,fillColor:"black",fontWeight:"normal",fontStyle:"normal",decoration:""},border:{enabled:!0,width:1,color:"#15C",lineStyle:t.LineStyle.SOLID},fill:{enabled:!0,color:"white"}},spread:{ask:{line:{width:1,strokeColor:"#00D533"},valueMarker:{fill:{fillColor:"#00D533"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}},bid:{line:{width:1,strokeColor:"#F20500"},valueMarker:{fill:{fillColor:"#F20500"},text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"white"}}}},highlightedColumn:{fill:{fillColor:"rgba(90, 130, 182, 0.45)"}},button:{accept:{fill:{fillColor:"#BDBDBD"},line:{strokeColor:"green",width:1}},cancel:{fill:{fillColor:"#BDBDBD"},line:{strokeColor:"red",width:1}},none:{fill:{fillColor:"#BDBDBD"}}},positionBar:{short:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},long:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},orderBar:{buy:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"green",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"green"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}},sell:{market:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stop:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},limit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}},stopLimit:{pendingSubmit:{line:{strokeColor:"grey",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"grey"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingCancel:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},pendingReplace:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},submitted:{line:{strokeColor:"orange",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fontStyle:"normal",fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"orange"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}},accepted:{line:{strokeColor:"red",width:1},kind:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},quantity:{text:{fontFamily:"Calibri",fontSize:11,fillColor:"black",decoration:""}},price:{fill:{fillColor:"red"},text:{fontFamily:"Calibri",fontSize:11,fillColor:"white",decoration:""}}}}}}}}}(StockChartX=StockChartX||{});__awaiter=this&&this.__awaiter||function(n,a,l,s){return new(l=l||Promise)(function(t,e){function i(t){try{r(s.next(t))}catch(t){e(t)}}function o(t){try{r(s.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(i,o)}r((s=s.apply(n,a||[])).next())})},__generator=this&&this.__generator||function(i,o){var r,n,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,n&&(a=n[2&e[0]?"return":e[0]?"throw":"next"])&&!(a=a.call(n,e[1])).done)return a;switch(n=0,a&&(e=[0,a.value]),e[0]){case 0:case 1:a=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,n=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(a=0<(a=l.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){l.label=e[1];break}if(6===e[0]&&l.label<a[1]){l.label=a[1],a=e;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(e);break}a[2]&&l.ops.pop(),l.trys.pop();continue}e=o.call(i,l)}catch(t){e=[6,t],n=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};!function(i){"use strict";var t=this,o=jQuery,e="scxThemes",r=(n.save=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,(new i.LocalDataStore).save(e,JSON.stringify(i.Theme))];case 1:return t.sent(),[2]}})})},n.load=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,(new i.LocalDataStore).load(e)];case 1:return[2,t.sent()]}})})},n.autoSave=!1,n);function n(){}i.ThemeStore=r,o(function(){return __awaiter(t,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,r.load()];case 1:return e=t.sent(),i.Theme=o.extend(!0,{},i.Theme,e?JSON.parse(e):null),[3,3];case 2:return t.sent(),i.UI.Notification.error("Themes are not loaded."),[3,3];case 3:return o(window).on("beforeunload.scxThemeStore",function(){r.autoSave&&r.save()}),[2]}})})})}(StockChartX=StockChartX||{}),function(t){"use strict";var e=(Object.defineProperty(i.prototype,"bottom",{get:function(){return this.top+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){return this.left+this.width},enumerable:!0,configurable:!0}),i.prototype.clone=function(){return new i(this)},i.prototype.equals=function(t){return t&&this.left===t.left&&this.top===t.top&&this.width===t.width&&this.height===t.height},i.prototype.toString=function(){return"[left: "+this.left+", top: "+this.top+", width: "+this.width+", height: "+this.height+"]"},i.prototype.containsPoint=function(t){return t.x>=this.left&&t.x<=this.right&&t.y>=this.top&&t.y<=this.bottom},i.prototype.cropLeft=function(t){var e=t.right;this.left<e&&(this.width=this.right-e,this.left=e)},i.prototype.cropRight=function(t){this.right>=t.left&&(this.width=t.left-1-this.left)},i.prototype.cropTop=function(t){var e=t.bottom;this.top<e&&(this.height=this.bottom-e,this.top=e)},i.prototype.cropBottom=function(t){this.bottom>t.top&&(this.height=t.top-this.top)},i.prototype.copyFrom=function(t){this.left=t.left,this.top=t.top,this.width=t.width,this.height=t.height},i.prototype.applyPadding=function(t){t.left&&(this.left+=t.left,this.width-=t.left),t.top&&(this.top+=t.top,this.height-=t.top),t.right&&(this.width-=t.right),t.bottom&&(this.height-=t.bottom)},i);function i(t){this.left=0,this.top=0,this.width=0,this.height=0,t=t||{},this.left=t.left||0,this.top=t.top||0,this.width=t.width||0,this.height=t.height||0}t.Rect=e}(StockChartX=StockChartX||{}),function(t){"use strict";var l;(l=t.Geometry||(t.Geometry={})).REGULAR_DEVIATION=t.Environment.isMobile?20:5,l.MAGNET_DEVIATION=t.Environment.isMobile?40:15,l.DEVIATION=l.REGULAR_DEVIATION,l.length=function(t,e){var i=Math.abs(e.x-t.x),o=Math.abs(e.y-t.y),r=Math.sqrt(i*i+o*o);return Math.round(r)},l.xProjectionLength=function(t,e){return Math.abs(t.x-e.x)},l.yProjectionLength=function(t,e){return Math.abs(t.y-e.y)},l.isValueNearValue=function(t,e){return Math.abs(t-e)<=l.DEVIATION},l.isValueBetweenOrNearValues=function(t,e,i){return t>=Math.min(e,i)-l.DEVIATION&&t<=Math.max(e,i)+l.DEVIATION},l.isPointNearPoint=function(t,e){if(Array.isArray(e)){for(var i=0,o=e;i<o.length;i++){var r=o[i];if(this.isPointNearPoint(t,r))return!0}return!1}return this.isValueNearValue(t.x,e.x)&&this.isValueNearValue(t.y,e.y)},l.isPointNearRectPoints=function(t,e,i){var o=Math.min(e.x,i.x),r=Math.max(e.x,i.x),n=Math.min(e.y,i.y),a=Math.max(e.y,i.y);return!!this.isPointNearLine(t,{x:o,y:a},{x:o,y:n})||(!!this.isPointNearLine(t,{x:o,y:n},{x:r,y:n})||(!!this.isPointNearLine(t,{x:r,y:n},{x:r,y:a})||this.isPointNearLine(t,{x:r,y:a},{x:o,y:a})))},l.isPointInsideOrNearRect=function(t,e){return this.isValueBetweenOrNearValues(t.x,e.left,e.left+e.width)&&this.isValueBetweenOrNearValues(t.y,e.top,e.top+e.height)},l.isPointInsideOrNearRectPoints=function(t,e,i){var o=Math.min(e.x,i.x),r=Math.max(e.x,i.x),n=Math.min(e.y,i.y),a=Math.max(e.y,i.y);return this.isValueBetweenOrNearValues(t.x,o,r)&&this.isValueBetweenOrNearValues(t.y,n,a)},l.isPointNearCircle=function(t,e,i){var o=this.length(e,t),r="number"==typeof i?i:this.length(e,i);return this.isValueNearValue(o,r)},l.isPointInsideOrNearCircle=function(t,e,i){var o=this.length(e,t),r="number"==typeof i?i:this.length(e,i);return this.isValueBetweenOrNearValues(o,0,r)},l.isPointNearPolygon=function(t,e){if(e.length<2)return!1;for(var i=0;i<e.length-1;i++)if(this.isPointNearLine(t,e[i],e[i+1]))return!0;return this.isPointNearLine(t,e[e.length-1],e[0])},l.isPointNearLine=function(t,e,i){if(!this.isPointInsideOrNearRectPoints(t,e,i))return!1;if(Math.abs(e.x-i.x)<=l.DEVIATION)return!0;var o=(e.y-i.y)/(e.x-i.x),r=Math.abs(180*Math.atan(o)/Math.PI);if(Math.abs(r-90)<=10||Math.abs(r-270)<=10){var n=(t.y-(e.y-e.x*o))/o;return this.isValueNearValue(n,t.x)}var a=e.y+o*(t.x-e.x);return this.isValueNearValue(a,t.y)},l.isPointNearPolyline=function(t,e){for(var i=0,o=e.length;i<o-1;i++)if(this.isPointNearLine(t,e[i],e[i+1]))return!0;return!1},l.isPointNearEllipse=function(t,e,i){var o=Math.abs(i.x-e.x),r=Math.abs(i.y-e.y);return this.isPointNearEllipseWithRadiuses(t,e,o,r)},l.isPointNearEllipseWithRadiuses=function(t,e,i,o){var r=t.x-e.x,n=t.y-e.y,a=r*r/(i*i)+n*n/(o*o);return.8<a&&a<1.3},l.intersectionPoints=function(t,e,i,o){var r=(t.x-e.x)*(o.y-i.y)-(t.y-e.y)*(o.x-i.x),n=(t.x-i.x)*(o.y-i.y)-(t.y-i.y)*(o.x-i.x),a=(t.x-e.x)*(t.y-i.y)-(t.y-e.y)*(t.x-i.x),l=0==n&&0==r?0:n/r,s=0==a&&0==r?0:a/r;if(0<=l&&l<=1&&0<=s&&s<=1)return{x:t.x+l*(e.x-t.x),y:t.y+l*(e.y-t.y)}}}(StockChartX=StockChartX||{}),function(t){"use strict";var e=(i.prototype.suppressEvents=function(t){void 0===t&&(t=!0);var e=this._suppressEvents;return this._suppressEvents=t,e},i.prototype.on=function(t,e,i){return this._eventsDispatcher.on(t,e,i),this},i.prototype.off=function(t,e){return this._eventsDispatcher.off(t,e),this},i.prototype.fire=function(t,e){this._suppressEvents||(e&&(e.sender=this),this._eventsDispatcher.fire(t,e))},i.prototype.fireValueChanged=function(t,e,i){this.fireTargetValueChanged(this,t,e,i)},i.prototype.fireTargetValueChanged=function(t,e,i,o){var r;this._suppressEvents||((r=this._event).target=t||this,r.value=i,r.oldValue=o,this.fire(e,r))},i);function i(){this._eventsDispatcher=new t.EventsDispatcher,this._suppressEvents=!1,this._event={type:null,sender:this,target:this,value:void 0,oldValue:void 0}}t.EventableObject=e}(StockChartX=StockChartX||{}),function(u){"use strict";u.EVENT_DELIMITER=" ";var t=(e.prototype.on=function(t,e,i){for(var o=t.split(u.EVENT_DELIMITER),r=this._listeners,n=0,a=o;n<a.length;n++){var l,s,c,h=a[n];h&&(s=(l=h.split("."))[0],c=l[1]||"",r[s]||(r[s]=[]),r[s].push({name:c,handler:e,target:i}))}},e.prototype.off=function(t,e){for(var i=0,o=t.split(u.EVENT_DELIMITER);i<o.length;i++){var r=o[i];if(r){var n=r.split("."),a=n[0],l=n[1]||"";if(a)this._off(a,l,e);else{var s=this._listeners;for(var c in s)s.hasOwnProperty(c)&&this._off(c,l,e)}}}},e.prototype._off=function(t,e,i){e=e||"";var o=this._listeners[t];if(o){for(var r=0;r<o.length;r++)o[r].name!==e||i&&i!==o[r].target||(o.splice(r,1),r--);0===o.length&&delete this._listeners[t]}},e.prototype.fire=function(t,e){var i=this._listeners[t];if(i){(e=e||{}).type=t;for(var o=0,r=i;o<r.length;o++){r[o].handler(e)}}},e);function e(){this._listeners={}}u.EventsDispatcher=t}(StockChartX=StockChartX||{}),function(t){"use strict";var e=(i.prototype.suppressEvents=function(t){void 0===t&&(t=!0);var e=this._suppressEvents;return this._suppressEvents=t,e},i.prototype.fire=function(t,e,i){var o=this.chart;o&&!this._suppressEvents&&o.fireTargetValueChanged(this,t,e,i)},i);function i(){this._suppressEvents=!1}t.ChartEventsExtender=e}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),__awaiter=this&&this.__awaiter||function(n,a,l,s){return new(l=l||Promise)(function(t,e){function i(t){try{r(s.next(t))}catch(t){e(t)}}function o(t){try{r(s.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(i,o)}r((s=s.apply(n,a||[])).next())})},__generator=this&&this.__generator||function(i,o){var r,n,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,n&&(a=n[2&e[0]?"return":e[0]?"throw":"next"])&&!(a=a.call(n,e[1])).done)return a;switch(n=0,a&&(e=[0,a.value]),e[0]){case 0:case 1:a=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,n=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(a=0<(a=l.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){l.label=e[1];break}if(6===e[0]&&l.label<a[1]){l.label=a[1],a=e;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(e);break}a[2]&&l.ops.pop(),l.trys.pop();continue}e=o.call(i,l)}catch(t){e=[6,t],n=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};!function(h){"use strict";var u=jQuery,a=30,l=0;h.ViewsPath="view/",h.ChartState={NORMAL:0,RESIZING_PANELS:1,USER_DRAWING:2,ZOOM_IN:3},Object.freeze(h.ChartState),h.ChartEvent={WINDOW_MODE_CHANGED:"chartWindowModeChanged",TOOLBAR_LOADED:"chartToolbarLoaded",SCROLLBAR_LOADED:"chartScrollbarLoaded",STATE_CHANGED:"chartStateChanged",TIME_INTERVAL_CHANGED:"chartTimeIntervalChanged",INDICATOR_ADDED:"chartIndicatorAdded",INDICATOR_REMOVED:"chartIndicatorRemoved",THEME_CHANGED:"chartThemeChanged",GLOBAL_THEME_CHANGED:"chartGlobalThemeChanged",PRICE_STYLE_CHANGED:"chartPriceStyleChanged",HOVER_RECORD_CHANGED:"chartHoverRecordChanged",INSTRUMENT_CHANGED:"chartInstrumentChanged",SYMBOL_ENTERED:"chartSymbolEntered",TIME_FRAME_CHANGED:"chartTimeFrameChanged",CROSS_HAIR_CHANGED:"chartCrossHairChanged",STATE_LOADED:"chartStateLoaded",LOCALE_CHANGED:"chartLocaleChanged",ENABLE_KEYBOARD_EVENTS_CHANGED:"chartEnableKeyboardEventsChanged",ENABLE_MOUSE_EVENTS_CHANGED:"chartEnableMouseEventsChanged",VALUE_SCALE_ADDED:"chartValueScaleAdded",VALUE_SCALE_REMOVED:"chartValueScaleRemoved",USER_DRAWING_STARTED:"chartUserDrawingStarted",USER_DRAWING_FINISHED:"chartUserDrawingFinished",USER_DRAWING_CANCELLED:"chartUserDrawingCancelled",PANEL_ADDED:"chartPanelAdded",PANEL_REMOVED:"chartPanelRemoved",DATE_SCALE_THEME_CHANGED:"dateScaleThemeChanged",FIRST_VISIBLE_RECORD_CHANGED:"firstVisibleRecordChanged",LAST_VISIBLE_RECORD_CHANGED:"lastVisibleRecordChanged",HISTORY_LOADED:"chartHistoryLoaded",MORE_HISTORY_REQUESTED:"chartMoreHistoryRequested",ZOOM_IN_STARTED:"chartZoomInStarted",ZOOM_IN_FINISHED:"chartZoomInFinished",ZOOM_IN_CANCELLED:"chartZoomInCancelled",SHOW_INSTRUMENT_WATERMARK_CHANGED:"chartShowInstrumentWatermarkChanged",HIGHLIGHTED_COLUMN_ADDED:"highlightedColumnAdded",HIGHLIGHTED_COLUMN_REMOVED:"highlightedColumnRemoved",SHOW_WAITING_BAR:"showWaitingBar",HIDE_WAITING_BAR:"hideWaitingBar"},Object.freeze(h.ChartEvent);var t="scxRootContainer",e="scxContainer",r="scxBackground",i="scxUnSelective",n="scxTheme",o={interval:1,periodicity:h.Periodicity.DAY},s={interval:3,periodicity:h.Periodicity.DAY};h.DEFAULT_BARS_COUNT=384,h.DEFAULT_QUANTITY=1;var c=".scxChart",f="localize";h.version="2.22.2";var d,p=(d=h.EventableObject,__extends(y,d),Object.defineProperty(y,"version",{get:function(){return h.version},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"rootDiv",{get:function(){return this._rootDiv},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"dateScale",{get:function(){return this._dateScale},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"valueScales",{get:function(){return this._valueScales},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"valueScale",{get:function(){return this._valueScales[0]},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"chartPanelsContainer",{get:function(){return this._chartPanelsContainer},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"dataManager",{get:function(){return this._dataManager},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"timeInterval",{get:function(){return h.TimeFrame.timeFrameToTimeInterval(this.timeFrame)},set:function(t){var e=parseInt(t,10);if(!h.JsUtil.isPositiveNumber(e))throw new Error("Time interval must be greater than 0.");this._timeFrame=h.TimeFrame.timeIntervalToTimeFrame(e),this.fireValueChanged(h.ChartEvent.TIME_INTERVAL_CHANGED,e)},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"timeFrame",{get:function(){return this._timeFrame},set:function(t){var e=t;if(!h.JsUtil.isPositiveNumber(e.interval))throw new Error("Time frame must be greater than 0.");this._newBarsRequest={kind:h.RequestKind.BARS,startDate:this._startDate,endDate:this._endDate},this._timeFrame=e},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"chartPanelsFrame",{get:function(){return this._chartPanelsFrame},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"incomePercentagePrecision",{get:function(){return this._incomePercentagePrecision},set:function(t){if(t<0)throw new Error("Income percentage precision can't be negative");this._incomePercentagePrecision=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"incomePrecision",{get:function(){return this._incomePrecision},set:function(t){if(t<0)throw new Error("Income precision can't be negative");this._incomePrecision=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"instrument",{get:function(){return this._instrument},set:function(t){var e,i=this._instrument;i!==t&&(null==t.precision&&(e=t.tickSize.toString().split(".")[1],t.precision=null!=e?e.length:2),this._instrument=t,this._newBarsRequest={kind:h.RequestKind.BARS,startDate:this._startDate,endDate:this._endDate},this.fireValueChanged(h.ChartEvent.INSTRUMENT_CHANGED,t,i))},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"indicators",{get:function(){return this._indicators},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"valueMarker",{get:function(){return this._valueMarker},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"dateMarker",{get:function(){return this._dateMarker},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"locale",{get:function(){return this._options.locale},set:function(t){var e=this._options.locale;e!==t&&(this._options.locale=t,this.localize(),this.fireValueChanged(h.ChartEvent.LOCALE_CHANGED,t,e))},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"keyboardEventsEnabled",{get:function(){return this._options.enableKeyboardEvents},set:function(t){this._options.enableKeyboardEvents=t,this.fireValueChanged(h.ChartEvent.ENABLE_KEYBOARD_EVENTS_CHANGED,this._options.enableKeyboardEvents)},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"mouseEventsEnabled",{get:function(){return this._options.enableMouseEvents},set:function(t){this._options.enableMouseEvents=t,this.fireValueChanged(h.ChartEvent.ENABLE_MOUSE_EVENTS_CHANGED,this._options.enableMouseEvents)},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"scrollEnabled",{get:function(){return this._options.scrollEnabled},set:function(t){this._options.scrollEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"valueScaleType",{get:function(){return this.mainPanel.valueScale.valueScaleType},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"zoomEnabled",{get:function(){return this._options.zoomEnabled},set:function(t){this._options.zoomEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"zoomAutoSave",{get:function(){return this._options.zoomAutoSave},set:function(t){this._options.zoomAutoSave=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"scale",{get:function(){return this._options.scale},set:function(t){if(t<=0)throw new Error("Please provide positive values more than 0");if(1===t)throw new Error("\n                    You can set 1 only in the initial config, it depends on canvas restrictions.\n                    https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/scale\n                ");this._options.scale=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"theme",{get:function(){return this._options.theme},set:function(t){var e=this._options.theme;this._options.theme=t,e&&u("body").removeClass(""+n+e.name),t&&t.name&&!h.Theme[t.name]&&(h.Theme[t.name]=t),this.applyTheme(),this.fireValueChanged(h.ChartEvent.THEME_CHANGED,t,e)},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"showBarInfoInTitle",{get:function(){return this._options.showBarInfoInTitle},set:function(t){this._options.showBarInfoInTitle=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"showInstrumentWatermark",{get:function(){return this._options.showInstrumentWatermark},set:function(t){var e=this.showInstrumentWatermark;t!==e&&(this._options.showInstrumentWatermark=t,this.fireValueChanged(h.ChartEvent.SHOW_INSTRUMENT_WATERMARK_CHANGED,t,e))},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"priceStyle",{get:function(){return this._priceStyle},set:function(t){var e,i,o,r,n,a,l=this.priceStyle;l!==t&&(e=this.dateRange(),this._priceStyle.destroy(),(t.chart=this)._priceStyle=t,this._priceStyle.apply(),r=(o=(i=this.dateScale).projection).recordByX(o.xByDate(e.startDate,!1),!1),n=o.recordByX(o.xByDate(e.endDate,!1),!1),(a=this.smartPriceStyleHandler)&&a.enabled||(i.canSetVisibleRecord(r)&&i.canSetVisibleRecord(n)?(this.firstVisibleRecord=r,this.lastVisibleRecord=n-1-r>this.recordCount?this.recordCount:n-1,this.lastVisibleRecord-this.firstVisibleRecord<i.minVisibleRecords?this.setNeedsAutoScaleAll():this.setNeedsAutoScale()):this.setNeedsAutoScaleAll()),this.setNeedsLayout(),this.setNeedsUpdate(),this.fireValueChanged(h.ChartEvent.PRICE_STYLE_CHANGED,t,l))},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"priceStyleKind",{get:function(){var t=this.priceStyle;return t&&t.constructor.className},set:function(t){var e=this.priceStyle,i=this.priceStyle=h.PriceStyle.create(t);e&&(i.showValueLines=e.showValueLines,i.extendValueLines=e.extendValueLines);for(var o=0,r=this.chartPanels;o<r.length;o++){r[o].handleResize()}},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"hoveredRecord",{get:function(){return this._hoverRecord},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"crossHair",{get:function(){return this._crossHair},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"sessionBreakLines",{get:function(){return this._sessionBreakLines},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"selectedObject",{get:function(){return this._selectedObject},set:function(t){this._selectedObject=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"selectionMarker",{get:function(){return this._selectionMarker},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"showDrawings",{get:function(){return this._showDrawings},set:function(t){this._showDrawings=!!t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"showDrawingTooltips",{get:function(){return this._showDrawingTooltips},set:function(t){this._showDrawingTooltips=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"stayInDrawingMode",{get:function(){return this._stayInDrawingMode},set:function(t){this._stayInDrawingMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"xGridVisible",{get:function(){return this._options.xGridVisible},set:function(t){this._options.xGridVisible=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"yGridVisible",{get:function(){return this._options.yGridVisible},set:function(t){this._options.yGridVisible=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"state",{get:function(){return this._state},set:function(t){var e=this._state;e!==t&&(this._state=t,this.fireValueChanged(h.ChartEvent.STATE_CHANGED,t,e))},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"windowModeHandler",{get:function(){return this._windowModeHandler},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"windowMode",{get:function(){return this._windowModeHandler.mode},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"keyboardHandler",{get:function(){return this._keyboardHandler},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"size",{get:function(){return{width:this._rootDiv.width(),height:this._rootDiv.height()}},set:function(t){this._container.css("width","auto").css("height","auto"),this._rootDiv.width(t.width).height(t.height)},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"cssSize",{get:function(){return this._cssSize},set:function(t){this._cssSize=t,this.windowMode===h.WindowMode.NORMAL&&(this._rootDiv.css(this._cssSize),this._container.css("width","").css("height",""))},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"mainPanel",{get:function(){return this._priceStyle.chartPanel||this._chartPanelsContainer.panels[0]},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"recordCount",{get:function(){return this.primaryDataSeries(h.DataSeriesSuffix.DATE).length},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"firstVisibleRecord",{get:function(){return this._dateScale.firstVisibleRecord},set:function(t){this._dateScale.firstVisibleRecord=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"lastVisibleRecord",{get:function(){return this._dateScale.lastVisibleRecord},set:function(t){this._dateScale.lastVisibleRecord=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"firstVisibleIndex",{get:function(){return this._dateScale.firstVisibleIndex},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"lastVisibleIndex",{get:function(){return this._dateScale.lastVisibleIndex},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"chartPanels",{get:function(){return this._chartPanelsContainer.panels},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"barsCount",{get:function(){return this._barsCount},set:function(t){this._barsCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"spread",{get:function(){return this._spread},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"highlightedColumns",{get:function(){return this._highlightedColumns},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"crossHairType",{get:function(){return this._crossHair.crossHairType},set:function(t){this._crossHair.crossHairType=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"useWaitingBar",{get:function(){return this._useWaitingBar},set:function(t){this._useWaitingBar=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"zoomInView",{get:function(){return this._zoomInView},set:function(t){this._zoomInView=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"datafeed",{get:function(){return this._datafeed},set:function(t){this._datafeed=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"navigation",{get:function(){return this._navigation},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"toolbar",{get:function(){return this._toolbar},set:function(t){this._toolbar=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"scrollbar",{get:function(){return this._scrollbar},set:function(t){this._scrollbar=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"multiChartRootContainer",{get:function(){return this._multiChartRootContainer},set:function(t){this._multiChartRootContainer=t},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"smartPriceStyleHandler",{get:function(){return this._smartPriceStyleHandler},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"instrumentComparisonHandler",{get:function(){return this._instrumentComparisonHandler},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"readyLoadMoreHistory",{get:function(){return this._currentBarsRequest&&!this.datafeed.isRequestAlive(this._currentBarsRequest)&&this._instrumentComparisonHandler.readyLoadMoreHistory},enumerable:!0,configurable:!0}),y.prototype._handleLocalizeEvent=function(t,e){t.data.localize(e)},y.prototype._handleWindowResizeEvent=function(t,e){var i=t.data,o=i.cssSize;i.setNeedsLayout(),i.updateTradingPanelWidth(),"string"!=typeof o.width&&"string"!=typeof o.height||t.data.setNeedsUpdate(!0),this.scrollEnabled&&null!=this.scrollbar&&this.scrollbar.adjustDimensions(),i.setNeedsUpdate(!0)},y.prototype.updateTradingPanelWidth=function(){var t,e=this.theme.tradingPanel;t=e.tradingBarUnit===h.TradingPanelUnit.Pixels?e.tradingBarLength:(this.mainPanel.chartPanelsContainer.frame.width-this.valueScale.rightPanel.frame.width)*e.tradingBarLength/100,this.tradingPanelWidth=t/2},y.prototype.updateOHLVData=function(t){this.mainPanel.updateOHLVData(t)},y.prototype.localize=function(t){h.Localization.localize(this,t)},y.prototype.localizeText=function(e,i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,h.Localization.localizeText(this,e,{replace:i})]})})},y.prototype.setDates=function(t,e){this._startDate=t,this._endDate=e,this._newBarsRequest={startDate:t,endDate:e,kind:h.RequestKind.BARS}},y.prototype.sendBarsRequest=function(){var t=this._newBarsRequest;this._datafeed&&t&&(this._currentBarsRequest&&(this._datafeed.cancel(this._currentBarsRequest),this._currentBarsRequest=null),t.id||(t.id=h.Datafeed.nextRequestId()),(t.chart=this)._currentBarsRequest=t,this._datafeed.send(t),this._newBarsRequest=null)},y.prototype.requestMoreBars=function(){this.readyLoadMoreHistory&&(this._newBarsRequest={kind:h.RequestKind.MORE_BARS,count:h.DEFAULT_BARS_COUNT,endDate:this._dataManager.dateDataSeries.firstValue},this.sendBarsRequest(),this.fireValueChanged(h.ChartEvent.MORE_HISTORY_REQUESTED))},y.prototype.getBounds=function(){return new h.Rect({left:0,top:0,width:this._rootDiv.width(),height:this._rootDiv.height()})},y.prototype.selectObject=function(t){var e=this._selectedObject;return!(!e&&!t)&&((e!==t||!t.selected)&&(e&&(e.selected=!1),t&&(t.selected=!0),this.selectedObject=t,this.setNeedsUpdate(),!0))},y.prototype.addValueScale=function(t){var e=this.valueScales;if(t)for(var i=0,o=e;i<o.length;i++){if(o[i]===t)throw new Error("Value scale has been added already.")}else t=new h.ValueScale({chart:this});return e.push(t),this.fireValueChanged(h.ChartEvent.VALUE_SCALE_ADDED,t),t},y.prototype.removeValueScale=function(t){if(Array.isArray(t))for(var e=0,i=t;e<i.length;e++){var o=i[e];this.removeValueScale(o)}else for(var r=this.valueScales,n=0;n<r.length;n++)if(r[n]===t){if(0===n)throw new Error("Cannot remove main scale.");r.splice(n,1),this.fireValueChanged(h.ChartEvent.VALUE_SCALE_REMOVED,n);break}},y.prototype.applyAutoScroll=function(t){this.mainPanel.valueScale.applyAutoScroll(t),t===h.BarsUpdateKind.NEW_BAR&&this.dateScale.applyAutoScroll(t)},y.prototype.addIndicators=function(t){if(Array.isArray(t)){for(var e=[],i=0,o=t;i<o.length;i++){var r=o[i];e.push(this.addIndicators(r))}return e}if((c=t)instanceof h.Indicator){for(var n=this._indicators,a=0,l=n;a<l.length;a++){if((r=l[a])===c)return c}return c.chart=this,n.push(c),c.update(),this.fireValueChanged(h.ChartEvent.INDICATOR_ADDED,c),this.setNeedsLayout(),this.setNeedsUpdate(),c}if("object"!=typeof c)throw new TypeError("Unknown indicator.");var s=u.extend(!0,{chart:this},c),c=h.Indicator.deserialize(s);return this.addIndicators(c)},y.prototype.removeIndicators=function(t,o){var r=this;if(void 0===o&&(o=!0),Array.isArray(t))for(var e=0,i=t;e<i.length;e++){(c=i[e])&&this.removeIndicators(c,o)}else for(var n=this._indicators,a=t,l=function(t){var e,i=t.chartPanel;i&&(i.removePlot(t.plots),t.removeLineLevels(),o&&0===i.plots.length&&i!==r.mainPanel&&r._chartPanelsContainer.removePanel(i),((e=i===r.mainPanel)&&0===i.indicators.length||!e&&1===i.indicators.length)&&(i.showIndicatorTitles=!0)),t.destroy(),r.setNeedsUpdate(!0),r.fireValueChanged(h.ChartEvent.INDICATOR_REMOVED,t)},s=0;s<n.length;s++)if(a){if(n[s]===a){n.splice(s,1),l(a);break}}else{var c=n[s];n.splice(s,1),l(c),s--}},y.prototype.updateIndicators=function(){for(var t=0,e=this._indicators;t<e.length;t++){e[t].update()}},y.prototype.saveIndicatorsState=function(){for(var t=[],e=this.chartPanels,i=this._indicators,o=0,r=e;o<r.length;o++)for(var n=r[o],a=0,l=i;a<l.length;a++){var s=l[a];s.chartPanel===n&&t.push(s.serialize())}return t},y.prototype.loadIndicatorsState=function(t){"string"==typeof t&&(t=JSON.parse(t)),this.removeIndicators(),t&&this.addIndicators(t)},y.prototype.savePlotsState=function(){for(var t={},e=this.chartPanels,i=this._indicators,o=0,r=e;o<r.length;o++)for(var n=r[o],a=0,l=i;a<l.length;a++){var s=l[a],c=s.plots[0];s.chartPanel===n&&c instanceof h.AdvancedPlot&&(t[s.className]=c.settings)}return t},y.prototype.loadPlotsState=function(t){"string"==typeof t&&(t=JSON.parse(t));for(var e=this.chartPanels,i=this._indicators,o=0,r=e;o<r.length;o++)for(var n=r[o],a=0,l=i;a<l.length;a++){var s=l[a],c=s.plots[0];s.chartPanel===n&&c instanceof h.AdvancedPlot&&(c.settings=t[s.className])}},y.prototype.saveDrawingsState=function(){for(var t=[],e=0,i=this._chartPanelsContainer.panels;e<i.length;e++)for(var o=0,r=i[e].drawings;o<r.length;o++){var n=r[o];t.push(n.saveState())}return t},y.prototype.loadDrawingsState=function(t){if("string"==typeof t&&(t=JSON.parse(t)),this.removeDrawings(),t)for(var e=this._chartPanelsContainer.panels,i=0,o=t;i<o.length;i++){var r,n=o[i],a=e[n.panelIndex];a&&((r=h.Drawing.deserialize(n))&&a.addDrawings(r))}},y.prototype.removeDrawings=function(){for(var t=0,e=this._chartPanelsContainer.panels;t<e.length;t++){e[t].removeDrawings()}},y.prototype.saveState=function(){for(var t=[],e=0,i=this.valueScales;e<i.length;e++){var o=i[e];t.push(o.saveState())}return{chart:u.extend(!0,{},this._options),timeFrame:this._timeFrame,periodToLoad:this.periodToLoad,priceStyle:this._priceStyle.saveState(),dateScale:this._dateScale.saveState(),valueScales:t,crossHair:this._crossHair.saveState(),chartPanelsContainer:this._chartPanelsContainer.saveState(),instrumentComparisonHandler:this.instrumentComparisonHandler.saveState(),indicators:this.saveIndicatorsState(),barsCount:this.zoomAutoSave&&this._barsCount,plots:this.savePlotsState(),drawings:this.saveDrawingsState()}},y.prototype.loadState=function(t){if(!t)return this.sendBarsRequest(),void this.localize();"string"==typeof t&&(t=JSON.parse(t)),this.suppressEvents(),this.removeIndicators(),this._loadOptionsState(t.chart),this._dateScale.loadState(t.dateScale),this._restoreValueScales(t),this._crossHair.loadState(t.crossHair),this._chartPanelsContainer.loadState(t.chartPanelsContainer),t.timeFrame&&(this._timeFrame=t.timeFrame),t.periodToLoad&&(this.periodToLoad=t.periodToLoad),t.priceStyle&&(this._priceStyle=h.PriceStyle.deserialize(t.priceStyle)),(this._priceStyle.chart=this)._priceStyle.apply(!1),this.layout(),this.localize(),this.loadIndicatorsState(t.indicators),this.loadPlotsState(t.plots),this.loadDrawingsState(t.drawings),this.instrumentComparisonHandler.loadState(t.instrumentComparisonHandler),this._barsCount=t.barsCount,this.suppressEvents(!1),this.theme=this.theme,this.fireValueChanged(h.ChartEvent.STATE_LOADED),this.sendBarsRequest()},y.prototype._restoreValueScales=function(t){for(var e=this.valueScales,i=0,o=e;i<o.length;i++){o[i].destroy()}for(var r=t.valueScales||[t.valueScale],n=e.length=0;n<r.length;n++){var a=new h.ValueScale({chart:this});e.push(a),a.loadState(r[n])}0===e.length&&e.push(new h.ValueScale({chart:this}))},y.prototype.startUserDrawing=function(t){switch(this.state){case h.ChartState.USER_DRAWING:case h.ChartState.RESIZING_PANELS:this.cancelUserDrawing();break;case h.ChartState.NORMAL:break;default:throw new Error("Unable to start user drawing in this chart state.")}this.state=h.ChartState.USER_DRAWING,this.selectObject(null),this.addCssClass(h.DrawingCursorClass.CREATE),t.startUserDrawing(),this.selectedObject=t,this.fireValueChanged(h.ChartEvent.USER_DRAWING_STARTED,t)},y.prototype.cancelUserDrawing=function(){var t;this.state===h.ChartState.USER_DRAWING&&((t=this._selectedObject.chartPanel)&&t.removeDrawings(this._selectedObject),this.selectObject(null),this.removeCssClass(h.DrawingCursorClass.CREATE),this.state=h.ChartState.NORMAL,this.fireValueChanged(h.ChartEvent.USER_DRAWING_CANCELLED))},y.prototype._finishUserDrawing=function(){var t;this.removeCssClass(h.DrawingCursorClass.CREATE),this.state=h.ChartState.NORMAL,this.fireValueChanged(h.ChartEvent.USER_DRAWING_FINISHED,this._selectedObject),this.stayInDrawingMode&&(t=h.Drawing.deserialize({className:this._selectedObject.className}),this.startUserDrawing(t))},y.prototype.startZoomIn=function(t){this.zoomInView=new h.ZoomInView,this.zoomInView.zoomMode=t,this.state=h.ChartState.ZOOM_IN,this.fireValueChanged(h.ChartEvent.ZOOM_IN_STARTED)},y.prototype.cancelZoomIn=function(){this.zoomInView&&this.state===h.ChartState.ZOOM_IN&&(this.state=h.ChartState.NORMAL,this.fireValueChanged(h.ChartEvent.ZOOM_IN_CANCELLED),this.zoomInView.cancelDraw())},y.prototype.setNeedsAutoScaleAll=function(){this._dateScale.setNeedsAutoScale(),this._chartPanelsContainer.setNeedsAutoScale()},y.prototype.setWindowMode=function(t){this._windowModeHandler.setMode(t)},y.prototype.setNeedsLayout=function(){this.layout()},y.prototype.layout=function(){var t=this.getBounds(),e=this._dateScale.layoutScalePanel(t);this._chartPanelsFrame=this._chartPanelsContainer.layoutScalePanel(e);var i=new h.Rect({left:e.left,top:t.top,width:e.width,height:t.height}),o=new h.Rect({left:this._chartPanelsFrame.left,top:t.top,width:this._chartPanelsFrame.width,height:t.height});this._dateScale.layout(i,o),this._chartPanelsContainer.layout(this._chartPanelsFrame),this._crossHair.layout(),this.spread.layout(),this._sessionBreakLines.layout();for(var r=!1,n=0,a=this.chartPanels;n<a.length;n++){if(1===a[n].state){r=!0;break}}if(h.JsUtil.sort(this.indicators,function(t,e){return t.zIndex-e.zIndex}),!r)for(var l=0,s=this.indicators;l<s.length;l++){var c=s[l];if(!c.isInitialized&&c.plots.length){this.updateIndicators(),this.setNeedsAutoScale(),this.layout();break}}},y.prototype.draw=function(){this._dateScale.draw(),this._navigation.draw(),this._chartPanelsContainer.draw()},y.prototype.getContentWidth=function(){return this.mainPanel.contentFrame.width+(this.valueScale.rightPanelVisible?this.valueScale.rightPanel.frame.width:0)},y.prototype.getContentRightMargin=function(){var t=this.valueScale;return(t.rightPanelVisible?t.rightPanel.frame.width:0)+this.getTradingPanelWidth()},y.prototype.getTradingPanelWidth=function(){var t=this.mainPanel.tradingPanel;return t&&t.visible?2*this.tradingPanelWidth:0},y.prototype.update=function(){var t=this.size,e=this._prevSize;this.instrumentComparisonHandler&&this.instrumentComparisonHandler.update();var i=e.width!==t.width||e.height!==t.height;this._prevSize=t;var o=this._needsAutoscale;o&&(this.setNeedsAutoScale(),this._needsAutoscale=!1),(i||o)&&this.layout(),this.draw()},y.prototype.setNeedsUpdate=function(t){this._needsAutoscale=t,this._updateAnimation.start()},y.prototype._onUpdateAnimationCallback=function(){this.update()},y.prototype.updateSplitter=function(t){this._chartPanelsContainer.layoutSplitterPanels(t)},y.prototype.destroy=function(t){void 0===t&&(t=!0),this._unsubscribeEvents(),h.UI.HtmlContainer.instance.reset(),this.toolbar&&(this.toolbar.chart=null),this._keyboardHandler.destroy(),this._windowModeHandler.destroy(),this.stateHandler&&this.stateHandler.destroy(),this._datafeed&&this._datafeed.destroy(),this._priceStyle.destroy(),this._crossHair.destroy(),this._selectionMarker.destroy(),this._chartPanelsContainer.destroy(),this.valueScale.destroy(),this.dateScale.destroy(),this._navigation.destroy(),this._updateAnimation.destroy(),this._highlightedColumns.destroy(),this.scrollbar&&(this.scrollbar.chart=null);for(var e=0,i=this._indicators;e<i.length;e++){i[e].destroy()}this._container&&(t?this._container.remove():this._container.empty(),this._container=null)},y.prototype.showWaitingBar=function(t){this.fire(h.ChartEvent.SHOW_WAITING_BAR,{type:h.ChartEvent.SHOW_WAITING_BAR,sender:this,target:this}),this.useWaitingBar&&(this._waitingBar||(this._waitingBar=this._container.scx().waitingBar()),this._waitingBar.show(t))},y.prototype.hideWaitingBar=function(t){this._waitingBar&&this.useWaitingBar&&this._waitingBar.hide(t),this.fire(h.ChartEvent.HIDE_WAITING_BAR,{type:h.ChartEvent.HIDE_WAITING_BAR,sender:this,target:this})},y.prototype._copyDrawing=function(){for(var t,e=0,i=this.chartPanels;e<i.length;e++){for(var o=0,r=i[e].drawings;o<r.length;o++){var n=r[o];if(n.selected){t=n;break}}if(t)break}t&&t.chart&&(this._copyBuffer=t.clone())},y.prototype._pasteDrawing=function(){if(this._copyBuffer){for(var t=this._copyBuffer.chartPanel,e=0,i=this.chartPanels;e<i.length;e++){if(i[e]===t){var o=this._copyBuffer.clone();return t.addDrawings(o),this._translateClonedDrawing(o),void t.setNeedsUpdate()}}this._copyBuffer=null}},y.prototype._translateClonedDrawing=function(t){var e,i,o=t.bounds(),r=a,n=l;o?(e=o.left+o.width,i=this._copyBuffer.chartPanel.contentFrame.width,e+Math.abs(r)<i?t.translate(r,n):t.translate(-r,n)):t.translate(r,n)},y.prototype.handleResize=function(){this.updateTradingPanelWidth()},y.prototype._handleMouseEvents=function(t){var e,i=t.data,o=t.originalEvent,r=void 0!==t.pageX?t.pageX:o.pageX,n=void 0!==t.pageY?t.pageY:o.pageY,a=o&&o.changedTouches;if(!i.mouseEventsEnabled)return!0;!r&&!n&&a&&0<a.length&&(r=(e=a[a.length-1]).pageX,n=e.pageY);var l={pointerPosition:i._rootDiv.scxClientToLocalPoint(r,n),evt:t};if(i._updateHoverRecord.call(i,l.pointerPosition.x),t.toElement&&u(t.toElement).hasClass("scxTooltip"))return!1;switch(i._dateScale.handleEvent(l)||i._chartPanelsContainer.handleEvent(l),i._highlightedColumns.handleEvent(l),t.type){case"click":case"mousedown":case"touchstart":case"touchend":if(!l.stopPropagation)return!0}return t.preventDefault(),t.stopPropagation(),!1},y.prototype.saveImage=function(t){this.saveImageHandler.saveImage(this._rootDiv,t)},y.prototype._loadOptionsState=function(t){t=t||{},this._options={theme:t.theme||h.Theme.Dark,locale:t.locale||"en",enableKeyboardEvents:void 0===t.enableKeyboardEvents||!!t.enableKeyboardEvents,enableMouseEvents:void 0===t.enableMouseEvents||!!t.enableMouseEvents,showBarInfoInTitle:void 0===t.showBarInfoInTitle||!!t.showBarInfoInTitle,priceStyle:h.CandlePriceStyle.className,showInstrumentWatermark:null==t.showInstrumentWatermark||t.showInstrumentWatermark,xGridVisible:null==t.xGridVisible||t.xGridVisible,yGridVisible:null==t.yGridVisible||t.yGridVisible,scrollEnabled:null==t.scrollEnabled||t.scrollEnabled,zoomEnabled:null==t.zoomEnabled||t.zoomEnabled,zoomAutoSave:null!=t.zoomAutoSave&&t.zoomAutoSave,scale:null!=t.scale?t.scale:2}},y.prototype._layoutHtmlElements=function(){this._container.addClass(t),this._rootDiv=this._container.scxAppend("div",e).addClass(i).css(this.cssSize),this._rootDiv.scxAppend("div",r)},y.prototype.applyTheme=function(){var t=this.theme,e=t.chart,i=""+n+t.name;u("body").hasClass(i)||u("body").addClass(i);var o=this._container.find("."+r);h.HtmlUtil.setBackground(o,e.background),this._valueMarker.theme=t.valueScale.valueMarker,this._dateMarker.theme=t.dateScale.dateMarker,this.updateIndicators()},y.prototype._subscribeEvents=function(){var t=this,e=[f,h.ChartEvent.INDICATOR_ADDED,h.ChartEvent.TOOLBAR_LOADED,h.ChartEvent.LOCALE_CHANGED];this._rootDiv.on(["mouseenter","mouseleave","mousedown","mousemove","mouseup","click","dblclick","mousewheel","DOMMouseScroll","contextmenu","touchstart","touchmove","touchend",""].join(c+", "),this,this._handleMouseEvents),this.on(e.join(c+", "),function(){return t.localize()}),u("body").on(f+c,this,this._handleLocalizeEvent),u(window).on("resize"+c,this,this._handleWindowResizeEvent)},y.prototype._unsubscribeEvents=function(){this._rootDiv&&this._rootDiv.off(c),this.off(c),u("body").off(f+c,this._handleLocalizeEvent),u(window).off("resize"+c,this._handleWindowResizeEvent)},y.prototype._updateHoverRecord=function(t){var e=this._dateScale.projection.recordByX(t);e!==this._hoverRecord&&(this._hoverRecord=e,this.fireValueChanged(h.ChartEvent.HOVER_RECORD_CHANGED,e))},y.prototype.barDataSeries=function(){return this._dataManager.barDataSeries()},y.prototype.getCommonDataSeries=function(){return this.barDataSeries()},y.prototype.addDataSeries=function(t,e){return this._dataManager.addDataSeries(t,e)},y.prototype.removeDataSeries=function(t){this._dataManager.removeDataSeries(t)},y.prototype.clearDataSeries=function(t){this._dataManager.clearDataSeries(t);for(var e=0,i=this._indicators;e<i.length;e++){i[e].clearDataSeries(t)}},y.prototype.trimDataSeries=function(t){this.dataManager.trimDataSeries(t)},y.prototype.getDataSeries=function(t){return this._dataManager.getDataSeries(t)},y.prototype.primaryDataSeries=function(t,e){void 0===e&&(e="");var i=e+this.priceStyle.primaryDataSeriesSuffix(t)+t;return this.getDataSeries(i)},y.prototype.primaryBarDataSeries=function(t){var e=h.DataSeriesSuffix;return{date:this.primaryDataSeries(e.DATE,t),open:this.primaryDataSeries(e.OPEN,t),high:this.primaryDataSeries(e.HIGH,t),low:this.primaryDataSeries(e.LOW,t),close:this.primaryDataSeries(e.CLOSE,t),volume:this.primaryDataSeries(e.VOLUME,t),ticksCount:this.primaryDataSeries(e.TICKS_COUNT,t)}},y.prototype.primaryBar=function(t,e){var i=this.primaryBarDataSeries(e);return this.dataManager.bar(t,i)},y.prototype.findDataSeries=function(t){return this._dataManager.findDataSeries(t)},y.prototype.appendBars=function(t){this._dataManager.appendBars(t),this.updateIndicators()},y.prototype.addChartPanel=function(t,e,i){return this._chartPanelsContainer.addPanel(t,e,i)},y.prototype.findPanelAt=function(t){return this._chartPanelsContainer.findPanelAt(t)},y.prototype.setNeedsAutoScale=function(){this._chartPanelsContainer.setNeedsAutoScale()},y.prototype.scrollOnPixels=function(t){this._dateScale.scrollOnPixels(t)},y.prototype.scrollOnRecords=function(t){this._dateScale.scrollOnRecords(t)},y.prototype.zoomOnPixels=function(t){this._dateScale.zoomOnPixels(t)},y.prototype.zoomOnRecords=function(t){this._dateScale.zoomOnRecords(t)},y.prototype.setPixelsPrice=function(t){this.mainPanel.valueScale.setPixelsPrice(t)},y.prototype.setValueScaleType=function(t){this.mainPanel.valueScale.setValueScaleType(t)},y.prototype.getPixelsPrice=function(){return this.mainPanel.valueScale.getPixelsPrice()},Object.defineProperty(y.prototype,"pixelsPrice",{get:function(){return this.mainPanel.valueScale.pixelPrice},enumerable:!0,configurable:!0}),y.prototype.visibleDataRange=function(){return{firstVisibleDataRecord:Math.max(this.firstVisibleRecord,0),lastVisibleDataRecord:Math.min(this.lastVisibleRecord,this.recordCount)}},y.prototype.recordRange=function(t,e){if(null==t&&null==e)return{firstVisibleRecord:this.firstVisibleRecord,lastVisibleRecord:this.lastVisibleRecord};var i=this.recordCount;if(null==e){var o=t;if(!h.JsUtil.isFiniteNumber(o)||o<=0)throw new TypeError("Positive number expected.");this.firstVisibleRecord=Math.max(i-o,0),this.lastVisibleRecord=i-1}else{if(!h.JsUtil.isFiniteNumber(t)||t<0)throw new TypeError("First record must be a positive number or 0.");if(!h.JsUtil.isFiniteNumber(e))throw new TypeError("Last record must be a positive number.");if(e<=t)throw new Error("Last record must be greater than first record.");this.firstVisibleRecord=t,this.lastVisibleRecord=e}},y.prototype.barsBetweenPoints=function(t,e){var i,o,r,n,a=this.dateScale.projection,l=0,s=this.primaryDataSeries(h.DataSeriesSuffix.CLOSE).length;return 0<s&&(i=new h.ChartPoint(t).getRecord(a),o=new h.ChartPoint(e).getRecord(a),l=0<=i&&i<s||0<=o&&o<s?(r=Math.min(Math.max(i,0),s-1),n=Math.min(Math.max(o,0),s-1),Math.trunc(n)-Math.trunc(r)+(i<=o?1:-1)):i<=0&&s<=o?s:o<=0&&s<=i?-s:0),l},y.prototype.dateRange=function(t,e){var i=this.dateScale,o=i.projection;if(!t&&!e){var r=i.projectionFrame;return{startDate:o.dateByX(r.left),endDate:o.dateByX(r.right)}}var n=o.recordByX(o.xByDate(t,!1),!1),a=o.recordByX(o.xByDate(e,!1),!1);this.firstVisibleRecord=n,this.lastVisibleRecord=a-1},y.prototype.reload=function(){this._newBarsRequest={kind:h.RequestKind.BARS,startDate:this._startDate,endDate:this._endDate},this.sendBarsRequest()},y.prototype.updateComputedDataSeries=function(){this.instrumentComparisonHandler.update(!0),this.priceStyle.updateComputedDataSeries()},y.prototype.addCssClass=function(t){this.rootDiv.addClass(t)},y.prototype.removeCssClass=function(t){this.rootDiv.removeClass(t)},y);function y(t){var e=d.call(this)||this;if(e._valueScales=[],e._chartPanelsFrame=new h.Rect,e.tradingPanelWidth=20,e._indicators=[],e._options={},e._showDrawings=!0,e._showDrawingTooltips=!0,e._stayInDrawingMode=!1,e._state=h.ChartState.NORMAL,e._needsAutoscale=!1,e._useWaitingBar=!0,e._updateAnimation=new h.Animation({context:e,recurring:!1,callback:e._onUpdateAnimationCallback}),e.saveImageHandler=new h.SaveImageHandler,e._logoDrawed=!1,e._prevSize={width:null,height:null},"object"!=typeof t)throw new Error("Config must be an object.");if(!t.container)throw new Error("Chart container is not specified.");if(e._container=u(t.container),0===e._container.length)throw new Error("Unable to find HTML element by selector "+t.container+".");if(e._cssSize={width:t.width||"100%",height:t.height||"100%"},h.JsUtil.isNumber(e._cssSize.width)&&e._cssSize.width<=0)throw new Error("Width must be a positive number.");if(h.JsUtil.isNumber(e._cssSize.height)&&e._cssSize.height<=0)throw new Error("Height must be a positive number.");return e.instrument=t.instrument,e.instrumentsRepository=t.instrumentsRepository,t.timeInterval?e.timeInterval=t.timeInterval:e._timeFrame=t.timeFrame||o,t.periodToLoad&&(e.periodToLoad=t.periodToLoad||s),e.incomePrecision=t.incomePrecision,e.incomePercentagePrecision=t.incomePercentagePrecision,e._datafeed=t.datafeed,e._loadOptionsState(t),e._valueMarker=new h.ValueMarker,e._dateMarker=new h.DateMarker,e._selectionMarker=new h.SelectionMarker({chart:e}),e._layoutHtmlElements(),e.applyTheme(),e._dataManager=new h.DataManager,e._dataManager.addBarDataSeries(),e._dateScale=new h.DateScale({chart:e}),e.valueScales.push(new h.ValueScale({chart:e})),e._chartPanelsContainer=new h.ChartPanelsContainer({chart:e}),e._crossHair=new h.CrossHair({chart:e}),null!=t.crossHair&&(e.crossHairType=t.crossHair),e._sessionBreakLines=new h.BreakLinesHandler({chart:e}),e._priceStyle=new h.CandlePriceStyle({chart:e}),e._priceStyle.apply(),null!=t.priceStyle&&(e.priceStyleKind=t.priceStyle),e._subscribeEvents(),e._spread=new h.SpreadHandler({chart:e}),e._highlightedColumns=new h.HighlightedColumnHandler(e),e._windowModeHandler=new h.WindowModeHandler(e),e._instrumentComparisonHandler=new h.InstrumentComparisonHandler(e),null!=t.useWaitingBar&&(e.useWaitingBar=t.useWaitingBar),e.layout(),!1!==t.showToolbar&&(h.JsUtil.isFunction(t.onToolbarLoaded)&&e.on(h.ChartEvent.TOOLBAR_LOADED,t.onToolbarLoaded),e.toolbar=e._container.scx().toolbar(e)),!1!==t.showScrollbar&&(h.JsUtil.isFunction(t.onScrollbarLoaded)&&e.on(h.ChartEvent.SCROLLBAR_LOADED,t.onScrollbarLoaded),e.scrollbar=e._container.scx().scrollbar(e)),t.fullWindowMode&&e._windowModeHandler.setMode(h.WindowMode.FULL_WINDOW),e._keyboardHandler=new h.KeyboardHandler(e),null!=t.keyboardEventsEnabled&&(e.keyboardEventsEnabled=t.keyboardEventsEnabled),e._smartPriceStyleHandler=new h.SmartPriceStyleHandler(e),!1!==t.showNavigation&&(e._navigation=e._rootDiv.scx().chartNavigation(e)),t.stateHandler?e.stateHandler=t.stateHandler:e.stateHandler=new h.LocalChartStateHandler({chart:e,autoSave:!0===t.autoSave}),e}h.Chart=p}(StockChartX=StockChartX||{}),function(e){"use strict";jQuery.fn.StockChartX=function(t){return t.container=this,new e.Chart(t)}}(StockChartX=StockChartX||{}),function(u){"use strict";var f=".chartsContainer",d="scxChartContainer",p="scxNonActiveBorder",y="scxActiveBorder",t=(Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toolbar",{get:function(){return this._toolbar},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollbar",{get:function(){return this._scrollbar},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"containerDisplacement",{get:function(){return this._displacement},set:function(t){this._displacement=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"charts",{get:function(){return this._chartsItems.map(function(t){return t.chart})},enumerable:!0,configurable:!0}),e.prototype.addChart=function(t){var n=this,a=this,e=$('<div class="'+d+" "+p+'"></div>').appendTo(this._parent),i=t?e.StockChartX(t):e.StockChartX({width:0,height:0,showToolbar:!1});i.multiChartRootContainer=this._parent;var l,s,c,h,o=i.keyboardEventsEnabled,r=i.mouseEventsEnabled;return i.keyboardEventsEnabled=!1,i.mouseEventsEnabled=!1,i.on(u.ChartEvent.ENABLE_KEYBOARD_EVENTS_CHANGED+f,function(t){l=t.target,s=t.value}).on(u.ChartEvent.ENABLE_MOUSE_EVENTS_CHANGED+f,function(t){c=t.target,h=t.value}),this._toolbar||(this._toolbar=new u.UI.Toolbar({parent:this._parent.parent(),chart:i}),e.removeClass(p),e.addClass(y),i===l&&(o=s),o&&(i.keyboardEventsEnabled=!0),i===c&&(r=h),r&&(i.mouseEventsEnabled=!0)),e.mousedown(function(t){for(var e=$(t.currentTarget),i=0,o=n._chartsItems;i<o.length;i++){var r=o[i];r.chart.off(f),e.is(r.container)?(r.container.addClass(y),r.container.removeClass(p),r.chart===l&&(r.keyboardEventsEnabled=s),r.keyboardEventsEnabled&&(r.chart.keyboardEventsEnabled=!0),r.chart===c&&(r.mouseEventsEnabled=h),r.mouseEventsEnabled&&(r.chart.mouseEventsEnabled=!0),a._toolbar.chart=r.chart):(r.container.removeClass(y),r.container.addClass(p),r.chart===l&&(r.keyboardEventsEnabled=s),r.keyboardEventsEnabled&&(r.chart.keyboardEventsEnabled=!1),r.chart===c&&(r.mouseEventsEnabled=h),r.mouseEventsEnabled&&(r.chart.mouseEventsEnabled=!1)),r.chart.on(u.ChartEvent.ENABLE_KEYBOARD_EVENTS_CHANGED+f,function(t){l=t.target,s=t.value}).on(u.ChartEvent.ENABLE_MOUSE_EVENTS_CHANGED+f,function(t){c=t.target,h=t.value})}}),this._chartsItems.push({container:e,chart:i,keyboardEventsEnabled:o,mouseEventsEnabled:r}),e.css("z-index","0"),e.css("float","left"),this._parent.css({top:0,left:0,height:"100%",width:"100%",display:"block",clear:"both",overflow:"hidden"}),this._parent.parent().css({height:"100%",width:"100%",clear:"both",overflow:"hidden"}),i},e.prototype.resizeCharts=function(){if(!this._isFullWindowMode&&!this._isFullScreenMode){switch(this._chartsItems.length){case 1:this._maxChartsCountX=1,this._maxChartsCountY=1;break;case 2:this._maxChartsCountX=1,this._maxChartsCountY=2;break;case 3:this._maxChartsCountX=1,this._maxChartsCountY=3;break;default:this._maxChartsCountX=2,this._maxChartsCountY=2}for(var t=this._parent.parent().parent(),e=t.height()/this._maxChartsCountY-2,i=t.width()/this._maxChartsCountX-2,o=0,r=this._chartsItems;o<r.length;o++){var n=r[o];n.chart.size={width:i-this.containerDisplacement.width,height:e-this.containerDisplacement.height-25},n.chart.setNeedsAutoScale(),n.chart.setNeedsUpdate()}this._parent.parent().width(t.width()).height(t.height())}},e.prototype._fullScreenChange=function(t,e){e.windowMode===u.WindowMode.FULL_SCREEN?(this.toolbar.prependTo(e.container),this.parent.parent().parent().css({width:window.outerWidth,height:window.outerHeight}),this._isFullScreenMode=!0):(this._isFullWindowMode||this.toolbar.prependTo(this._parent.parent()),this.parent.parent().parent().css({width:"100%",height:"100%"}),this._isFullScreenMode=!1),this.resizeCharts()},e.prototype._fullWindowChange=function(t,e){switch(e.windowMode){case u.WindowMode.FULL_WINDOW:case u.WindowMode.FULL_SCREEN:this._isFullWindowMode=!0,this.toolbar.prependTo(e.container),this.containerDisplacement.width=6,this.containerDisplacement.height=42,e.container.css({"z-index":"1",position:"absolute","background-color":$("body").css("background-color")}),this._parent.parent().css({width:"100%",height:"100%"}),e.size={width:this._parent.width()-this.containerDisplacement.width,height:this._parent.height()-this.containerDisplacement.height-25},e.setNeedsAutoScale(),e.setNeedsUpdate();break;default:this._isFullWindowMode=!1,this._isFullScreenMode||(this.toolbar.prependTo(this._parent.parent()),e.container.css("background-color","transparent")),this.containerDisplacement.width=2,this.containerDisplacement.height=20,e.container.css("z-index","0"),e.container.css("position","relative")}this.resizeCharts()},e);function e(t){var i=this;this._maxChartsCountX=1,this._maxChartsCountY=1,this._chartsItems=[],this._displacement={width:2,height:20},this._isFullWindowMode=!1,this._isFullScreenMode=!1,this._parent=t,$(window).resize(function(){return i.resizeCharts()}),$(window).on("scxFullscreenChanged",this,function(t,e){return i._fullScreenChange(t,e)}),$(window).on("scxFullWindowChanged",this,function(t,e){return i._fullWindowChange(t,e)})}u.ChartsContainer=t}(StockChartX=StockChartX||{}),StockChartX=StockChartX||{},function(){"use strict";(StockChartX||(StockChartX={})).Component=function(){}}();__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var e,i=(e=t.Component,__extends(o,e),o.prototype.destroy=function(){this._unsubscribe&&this._unsubscribe()},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.Handler=i}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var i,e=(i=t.Handler,__extends(o,i),Object.defineProperty(o.prototype,"chart",{get:function(){return this._chart},set:function(t){var e=this._chart;e!==t&&(this._onChartChanging&&this._onChartChanging(),this._chart=t,this._onChartChanged&&this._onChartChanged(e))},enumerable:!0,configurable:!0}),o);function o(t){var e=i.call(this)||this;return e._chart=t,e}t.ChartHandler=e}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var e,i=(e=t.Component,__extends(o,e),o);function o(){return null!==e&&e.apply(this,arguments)||this}t.VisualComponent=i}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var e,i=(e=t.VisualComponent,__extends(o,e),Object.defineProperty(o.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),o.prototype.layout=function(){this._container||(this._container=this._createContainer(),this.update())},o.prototype.update=function(){this.applyTheme()},o.prototype._removeContainer=function(){this._container&&(this._container.remove(),this._container=null)},o.prototype.destroy=function(){this._removeContainer()},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.HtmlComponent=i}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var i,e=(i=t.HtmlComponent,__extends(o,i),Object.defineProperty(o.prototype,"chart",{get:function(){return this._chart},set:function(t){this._chart!==t&&(this._onChartChanging(),this._chart=t,this._onChartChanged())},enumerable:!0,configurable:!0}),o.prototype._onChartChanging=function(){this._removeContainer()},o);function o(t){var e=i.call(this)||this;return t&&(e.chart=t.chart),e}t.ChartHtmlComponent=e}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var i,e=(i=t.HtmlComponent,__extends(o,i),Object.defineProperty(o.prototype,"chartPanel",{get:function(){return this._panel},set:function(t){this._panel!==t&&(this._onChartPanelChanging(),this._panel=t,this._onChartPanelChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"chart",{get:function(){return this._panel&&this._panel.chart},enumerable:!0,configurable:!0}),o.prototype._onChartPanelChanging=function(){this._unsubscribe&&this._unsubscribe(),this._removeContainer()},o.prototype._onChartPanelChanged=function(){this._subscribe&&this._subscribe()},o.prototype.destroy=function(){this._unsubscribe&&this._unsubscribe(),i.prototype.destroy.call(this)},o);function o(t){var e=i.call(this)||this;return t&&(e.chartPanel=t.chartPanel),e}t.ChartPanelHtmlComponent=e}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var i,e=(i=t.Component,__extends(o,i),Object.defineProperty(o.prototype,"chart",{get:function(){return this._chart},set:function(t){this._chart!==t&&(this._onChartChanging(),this._chart=t,this._onChartChanged())},enumerable:!0,configurable:!0}),o.prototype._onChartChanging=function(){this._unsubscribe&&this._unsubscribe()},o.prototype._onChartChanged=function(){this._subscribe&&this._subscribe()},o.prototype.destroy=function(){this._unsubscribe&&this._unsubscribe()},o);function o(t){var e=i.call(this)||this;return t&&(e._chart=t.chart),e}t.ChartComponent=e}(StockChartX=StockChartX||{}),StockChartX=StockChartX||{};__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){"use strict";var i,t=(i=e.Component,__extends(o,i),o.prototype.hitTest=function(t){return!1},o.prototype.layout=function(t){},o.prototype.handleEvent=function(t,e){return void 0===e&&(e=!0),this._gestures.handleEvent(t,e)},o);function o(){var t=i.call(this)||this;return t._gestures=t._initGestures&&t._initGestures()||new e.GestureArray,t}e.Control=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){"use strict";var i,t=(i=e.Control,__extends(o,i),Object.defineProperty(o.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"frame",{get:function(){return this._frame},enumerable:!0,configurable:!0}),o.prototype.hitTest=function(t){return e.Geometry.isPointInsideOrNearRect(t,this._frame)},o.prototype.layout=function(t){this._container||(this._container=this._createContainer()),this._container.scxFrame(t),this._frame.copyFrom(t)},o.prototype._removeContainer=function(){this._container&&(this._container.remove(),this._container=null)},o.prototype.destroy=function(){this._removeContainer()},o);function o(){var t=null!==i&&i.apply(this,arguments)||this;return t._frame=new e.Rect,t}e.HtmlControl=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var i,e=(i=t.HtmlControl,__extends(o,i),Object.defineProperty(o.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),o.prototype.destroy=function(){this._unsubscribe&&this._unsubscribe(),i.prototype.destroy.call(this)},o);function o(t){var e=i.call(this)||this;if(!t)throw new TypeError("Config is not specified.");return e._chart=t.chart,e}t.ChartHtmlControl=e}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(n){"use strict";var t=(Object.defineProperty(e,"registeredPriceStyles",{get:function(){return this._priceStyles.registeredItems},enumerable:!0,configurable:!0}),e.register=function(t,e){"string"==typeof t?this._priceStyles.register(t,e):this._priceStyles.register(t.className,t)},e.create=function(t){return this._priceStyles.createInstance(t)},e.deserialize=function(t){if(!t)return null;var e=this._priceStyles.createInstance(t.className);return e.loadState(t),e},e._priceStyles=new n.ClassRegistrar,e);function e(){}var o,i=(o=n.ChartComponent,__extends(r,o),Object.defineProperty(r,"className",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"className",{get:function(){return this.constructor.className},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"plot",{get:function(){return this._plot},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"chartPanel",{get:function(){return this._plot&&this._plot.chartPanel},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"showValueLines",{get:function(){var t=this._options.showValueLines;return null!=t?t:r.defaults.showValueLines},set:function(t){this._options.showValueLines=t,this._updatePlot()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"extendValueLines",{get:function(){var t=this._options.extendValueLines;return null!=t?t:r.defaults.extendValueLines},set:function(t){this._options.extendValueLines=t,this._updatePlot()},enumerable:!0,configurable:!0}),r.prototype._onChartChanging=function(){this.destroy()},r.prototype._updatePlot=function(){var t=this.plot;t&&(t.showValueLines=this.showValueLines,t.extendValueLines=this.extendValueLines)},r.prototype.saveState=function(){return{className:this.constructor.className,options:n.JsUtil.clone(this._options)}},r.prototype.loadState=function(t){this._options=t&&n.JsUtil.clone(t.options)||{}},r.prototype.apply=function(t){void 0===t&&(t=!0);var e=this.chart;if(e){var i=this._plot;if(i||(this._plot=i=this.createPlot(),this._updatePlot()),!i)throw new Error("Price style plot is not created.");this.updateComputedDataSeries(),e.updateIndicators();var o=n.DataSeriesSuffix;i.dataSeries=[e.primaryDataSeries(o.CLOSE),e.primaryDataSeries(o.OPEN),e.primaryDataSeries(o.HIGH),e.primaryDataSeries(o.LOW),e.primaryDataSeries(o.DATE)],e.mainPanel.addPlot(i),t&&e.mainPanel.setNeedsAutoScale(),e.setNeedsUpdate()}},r.prototype.dataSeriesSuffix=function(){return""},r.prototype.primaryDataSeriesSuffix=function(t){var e=n.DataSeriesSuffix;switch(t){case e.OPEN:case e.HIGH:case e.LOW:case e.CLOSE:return this.dataSeriesSuffix();default:return""}},r.prototype.removeComputedDataSeries=function(){var t,e,i=this.chart;i&&(t=this.dataSeriesSuffix(),e=n.DataSeriesSuffix,t&&(i.removeDataSeries(t+e.DATE),i.removeDataSeries(t+e.OPEN),i.removeDataSeries(t+e.HIGH),i.removeDataSeries(t+e.LOW),i.removeDataSeries(t+e.CLOSE),i.removeDataSeries(t+e.VOLUME)))},r.prototype.updateComputedDataSeries=function(){},r.prototype._calculateAtr=function(t){var e=new n.ATR;e._usePrimaryDataSeries=!1,e.chart=this.chart,e.setDefaultSettings(),e.setupIndicator(),e.period=t;for(var i=0;i<e.high.recordCount-1;i++)e.updateIndicator();if(!e.values)return null;var o=e.values.get(0);if(!o)return null;var r=o.lastValue;return r?Math.roundToDecimals(r,5):null},r.prototype.destroy=function(){var t=this._plot,e=t&&t.chartPanel;e&&e.removePlot(t),this.removeComputedDataSeries()},r.defaults={showValueLines:!1,extendValueLines:!1},r);function r(t){var e,i=o.call(this,t)||this;return i._options={},t&&(i.chart=t.chart,e={className:"",options:t.options},i.loadState(e)),i}n.PriceStyle=i,n.JsUtil.applyMixins(i,[t])}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var e,i=(e=t.PriceStyle,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"bar"},enumerable:!0,configurable:!0}),o.prototype.createPlot=function(){return new t.BarPlot({plotStyle:t.BarPlot.Style.OHLC,plotType:t.PlotType.PRICE_STYLE})},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.BarPriceStyle=i,t.PriceStyle.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var e,i=(e=t.PriceStyle,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"HLBar"},enumerable:!0,configurable:!0}),o.prototype.createPlot=function(){return new t.BarPlot({plotStyle:t.BarPlot.Style.HL,plotType:t.PlotType.PRICE_STYLE})},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.HLBarPriceStyle=i,t.PriceStyle.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var e,i=(e=t.PriceStyle,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"HLCBar"},enumerable:!0,configurable:!0}),o.prototype.createPlot=function(){return new t.BarPlot({plotStyle:t.BarPlot.Style.HLC,plotType:t.PlotType.PRICE_STYLE})},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.HLCBarPriceStyle=i,t.PriceStyle.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var e,i=(e=t.PriceStyle,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"coloredHLBar"},enumerable:!0,configurable:!0}),o.prototype.createPlot=function(){return new t.BarPlot({plotStyle:t.BarPlot.Style.COLORED_HL,plotType:t.PlotType.PRICE_STYLE})},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.ColoredHLBarPriceStyle=i,t.PriceStyle.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var e,i=(e=t.PriceStyle,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"coloredHLCBar"},enumerable:!0,configurable:!0}),o.prototype.createPlot=function(){return new t.BarPlot({plotStyle:t.BarPlot.Style.COLORED_HLC,plotType:t.PlotType.PRICE_STYLE})},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.ColoredHLCBarPriceStyle=i,t.PriceStyle.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var e,i=(e=t.PriceStyle,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"candle"},enumerable:!0,configurable:!0}),o.prototype.createPlot=function(){return new t.BarPlot({plotStyle:t.BarPlot.Style.CANDLE,plotType:t.PlotType.PRICE_STYLE})},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.CandlePriceStyle=i,t.PriceStyle.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var e,i=(e=t.PriceStyle,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"coloredBar"},enumerable:!0,configurable:!0}),o.prototype.createPlot=function(){return new t.BarPlot({plotStyle:t.BarPlot.Style.COLORED_OHLC,plotType:t.PlotType.PRICE_STYLE})},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.ColoredBarPriceStyle=i,t.PriceStyle.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(i){"use strict";var t,e=(t=i.PriceStyle,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"heikinAshi"},enumerable:!0,configurable:!0}),o.prototype.createPlot=function(){return new i.BarPlot({plotStyle:i.BarPlot.Style.CANDLE,plotType:i.PlotType.PRICE_STYLE})},o.prototype.dataSeriesSuffix=function(){return i.DataSeriesSuffix.HEIKIN_ASHI},o.prototype.updateComputedDataSeries=function(){var t=this.chart.dataManager,e=t.ohlcDataSeries(i.DataSeriesSuffix.HEIKIN_ASHI,!0);i.BarConverter.convertToHeikinAshi(t.ohlcDataSeries(),e)},o);function o(){return null!==t&&t.apply(this,arguments)||this}i.HeikinAshiPriceStyle=e,i.PriceStyle.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var e,i=(e=t.PriceStyle,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"hollowCandle"},enumerable:!0,configurable:!0}),o.prototype.createPlot=function(){return new t.BarPlot({plotStyle:t.BarPlot.Style.HOLLOW_CANDLE,plotType:t.PlotType.PRICE_STYLE})},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.HollowCandlePriceStyle=i,t.PriceStyle.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),__awaiter=this&&this.__awaiter||function(n,a,l,s){return new(l=l||Promise)(function(t,e){function i(t){try{r(s.next(t))}catch(t){e(t)}}function o(t){try{r(s.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(i,o)}r((s=s.apply(n,a||[])).next())})},__generator=this&&this.__generator||function(i,o){var r,n,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,n&&(a=n[2&e[0]?"return":e[0]?"throw":"next"])&&!(a=a.call(n,e[1])).done)return a;switch(n=0,a&&(e=[0,a.value]),e[0]){case 0:case 1:a=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,n=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(a=0<(a=l.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){l.label=e[1];break}if(6===e[0]&&l.label<a[1]){l.label=a[1],a=e;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(e);break}a[2]&&l.ops.pop(),l.trys.pop();continue}e=o.call(i,l)}catch(t){e=[6,t],n=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};!function(n){"use strict";n.KagiReversalKind={ATR:"atr",FIXED:"fixed",POINTS:"points"},Object.freeze(n.KagiReversalKind);var i,t=(i=n.PriceStyle,__extends(e,i),Object.defineProperty(e,"className",{get:function(){return"kagi"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reversal",{get:function(){return this._options.reversal||e.defaults.reversal},set:function(t){this._options.reversal=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reversalValue",{get:function(){return this._reversalValue},enumerable:!0,configurable:!0}),e.prototype.createPlot=function(){return new n.BarPlot({plotStyle:n.BarPlot.Style.KAGI,plotType:n.PlotType.PRICE_STYLE})},e.prototype.dataSeriesSuffix=function(){return n.DataSeriesSuffix.KAGI},e.prototype.primaryDataSeriesSuffix=function(t){var e=i.prototype.primaryDataSeriesSuffix.call(this,t);if(e)return e;switch(t){case n.DataSeriesSuffix.DATE:case n.DataSeriesSuffix.VOLUME:return this.dataSeriesSuffix();default:return""}},e.prototype._calculateReversalValue=function(){var t,i=this,e=this.reversal,o=this.chart&&this.chart.instrument,r=o&&o.tickSize;switch(e.kind){case n.KagiReversalKind.ATR:t=this._calculateAtr(e.value);break;case n.KagiReversalKind.FIXED:t=e.value;break;case n.KagiReversalKind.POINTS:r&&(t=e.value*r),o&&!r&&this.chart.localizeText("instrument.notification.missingTickSize",{instrument:o.symbol}).then(function(e){return __awaiter(i,void 0,void 0,function(){return __generator(this,function(t){return[2,n.UI.Notification.error(e,this.chart)]})})});break;default:throw new Error("Unknown reversal amount kind: "+e.kind)}return this._reversalValue=t},e.prototype.updateComputedDataSeries=function(){var t=this.chart.dataManager,e=t.barDataSeries(n.DataSeriesSuffix.KAGI,!0),i=this._calculateReversalValue();i&&n.BarConverter.convertToKagi(t.barDataSeries(),i,e)},e.defaults={reversal:{kind:n.KagiReversalKind.POINTS,value:1}},e);function e(t){return i.call(this,t)||this}n.KagiPriceStyle=t,n.PriceStyle.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(i){"use strict";var o,t=(o=i.PriceStyle,__extends(e,o),Object.defineProperty(e,"className",{get:function(){return"lineBreak"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lines",{get:function(){return this._options.lines||e.defaults.lines},set:function(t){if(!i.JsUtil.isFiniteNumber(t)||t<=0)throw new Error("Lines count must be a number greater than 0.");this._options.lines=t},enumerable:!0,configurable:!0}),e.prototype.createPlot=function(){return new i.BarPlot({plotStyle:i.BarPlot.Style.LINE_BREAK,plotType:i.PlotType.PRICE_STYLE})},e.prototype.dataSeriesSuffix=function(){return i.DataSeriesSuffix.LINE_BREAK},e.prototype.primaryDataSeriesSuffix=function(t){var e=o.prototype.primaryDataSeriesSuffix.call(this,t);if(e)return e;switch(t){case i.DataSeriesSuffix.DATE:case i.DataSeriesSuffix.VOLUME:return this.dataSeriesSuffix();default:return""}},e.prototype.updateComputedDataSeries=function(){var t=this.chart.dataManager,e=t.barDataSeries(i.DataSeriesSuffix.LINE_BREAK,!0);i.BarConverter.convertToLineBreak(t.barDataSeries(),this.lines,e)},e.defaults={lines:3},e);function e(t){return o.call(this,t)||this}i.LineBreakPriceStyle=t,i.PriceStyle.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var e,i=(e=t.PriceStyle,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"line"},enumerable:!0,configurable:!0}),o.prototype.createPlot=function(){return new t.LinePlot({plotStyle:t.LinePlot.Style.SIMPLE,plotType:t.PlotType.PRICE_STYLE})},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.LinePriceStyle=i,t.PriceStyle.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var e,i=(e=t.PriceStyle,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"mountain"},enumerable:!0,configurable:!0}),o.prototype.createPlot=function(){return new t.LinePlot({plotStyle:t.LinePlot.Style.MOUNTAIN,plotType:t.PlotType.PRICE_STYLE})},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.MountainPriceStyle=i,t.PriceStyle.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),__awaiter=this&&this.__awaiter||function(n,a,l,s){return new(l=l||Promise)(function(t,e){function i(t){try{r(s.next(t))}catch(t){e(t)}}function o(t){try{r(s.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(i,o)}r((s=s.apply(n,a||[])).next())})},__generator=this&&this.__generator||function(i,o){var r,n,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,n&&(a=n[2&e[0]?"return":e[0]?"throw":"next"])&&!(a=a.call(n,e[1])).done)return a;switch(n=0,a&&(e=[0,a.value]),e[0]){case 0:case 1:a=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,n=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(a=0<(a=l.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){l.label=e[1];break}if(6===e[0]&&l.label<a[1]){l.label=a[1],a=e;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(e);break}a[2]&&l.ops.pop(),l.trys.pop();continue}e=o.call(i,l)}catch(t){e=[6,t],n=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};!function(n){"use strict";n.PointAndFigureBoxSizeKind={ATR:"atr",FIXED:"fixed",POINTS:"points"},Object.freeze(n.PointAndFigureBoxSizeKind),n.PointAndFigureSource={CLOSE:"close",HIGH_LOW:"highLow"},Object.freeze(n.PointAndFigureSource);var i,t=(i=n.PriceStyle,__extends(e,i),Object.defineProperty(e,"className",{get:function(){return"pointAndFigure"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"source",{get:function(){return this._options.source},set:function(t){this._options.source=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxSize",{get:function(){return this._options.boxSize||e.defaults.boxSize},set:function(t){this._options.boxSize=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reversal",{get:function(){return this._options.reversal||e.defaults.reversal},set:function(t){if(null!=t&&!n.JsUtil.isPositiveNumber(t))throw new TypeError("Reversal must be a positive number.");this._options.reversal=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxSizeValue",{get:function(){return this._boxSizeValue},enumerable:!0,configurable:!0}),e.prototype.createPlot=function(){var t=new n.PointAndFigurePlot({plotStyle:n.BarPlot.Style.POINT_AND_FIGURE,plotType:n.PlotType.PRICE_STYLE});return t.boxSize=this._boxSizeValue,t},e.prototype.dataSeriesSuffix=function(){return n.DataSeriesSuffix.POINT_AND_FIGURE},e.prototype.primaryDataSeriesSuffix=function(t){var e=i.prototype.primaryDataSeriesSuffix.call(this,t);if(e)return e;switch(t){case n.DataSeriesSuffix.DATE:case n.DataSeriesSuffix.VOLUME:return this.dataSeriesSuffix();default:return""}},e.prototype._calculateBoxSizeValue=function(){var t,i=this,e=this.boxSize,o=this.chart&&this.chart.instrument,r=o&&o.tickSize;switch(e.kind){case n.PointAndFigureBoxSizeKind.ATR:t=this._calculateAtr(e.value);break;case n.PointAndFigureBoxSizeKind.FIXED:t=e.value;break;case n.PointAndFigureBoxSizeKind.POINTS:r&&(t=e.value*r),o&&!r&&this.chart.localizeText("instrument.notification.missingTickSize",{instrument:o.symbol}).then(function(e){return __awaiter(i,void 0,void 0,function(){return __generator(this,function(t){return[2,n.UI.Notification.error(e,this.chart)]})})});break;default:throw new Error("Unknown box size kind: "+e.kind)}return this._boxSizeValue=t},e.prototype.updateComputedDataSeries=function(){var t,e=this.chart.dataManager,i=e.barDataSeries(n.DataSeriesSuffix.POINT_AND_FIGURE,!0),o=this._calculateBoxSizeValue();o&&((t=this._plot)&&(t.boxSize=o),n.BarConverter.convertToPointAndFigure(e.barDataSeries(),o,this.reversal,this.source,i))},e.defaults={source:n.PointAndFigureSource.CLOSE,boxSize:{kind:n.PointAndFigureBoxSizeKind.POINTS,value:1},reversal:3},e);function e(t){return i.call(this,t)||this}n.PointAndFigurePriceStyle=t,n.PriceStyle.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),__awaiter=this&&this.__awaiter||function(n,a,l,s){return new(l=l||Promise)(function(t,e){function i(t){try{r(s.next(t))}catch(t){e(t)}}function o(t){try{r(s.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(i,o)}r((s=s.apply(n,a||[])).next())})},__generator=this&&this.__generator||function(i,o){var r,n,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,n&&(a=n[2&e[0]?"return":e[0]?"throw":"next"])&&!(a=a.call(n,e[1])).done)return a;switch(n=0,a&&(e=[0,a.value]),e[0]){case 0:case 1:a=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,n=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(a=0<(a=l.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){l.label=e[1];break}if(6===e[0]&&l.label<a[1]){l.label=a[1],a=e;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(e);break}a[2]&&l.ops.pop(),l.trys.pop();continue}e=o.call(i,l)}catch(t){e=[6,t],n=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};!function(n){"use strict";n.RenkoBoxSizeKind={FIXED:"fixed",ATR:"atr",POINTS:"points"},Object.freeze(n.RenkoBoxSizeKind);var i,t=(i=n.PriceStyle,__extends(e,i),Object.defineProperty(e,"className",{get:function(){return"renko"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxSize",{get:function(){return this._options.boxSize||e.defaults.boxSize},set:function(t){this._options.boxSize=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxSizeValue",{get:function(){return this._boxSizeValue},enumerable:!0,configurable:!0}),e.prototype.createPlot=function(){return new n.BarPlot({plotStyle:n.BarPlot.Style.RENKO,plotType:n.PlotType.PRICE_STYLE})},e.prototype.dataSeriesSuffix=function(){return n.DataSeriesSuffix.RENKO},e.prototype.primaryDataSeriesSuffix=function(t){var e=i.prototype.primaryDataSeriesSuffix.call(this,t);if(e)return e;switch(t){case n.DataSeriesSuffix.DATE:case n.DataSeriesSuffix.VOLUME:return this.dataSeriesSuffix();default:return""}},e.prototype._calculateBoxSizeValue=function(){var t,i=this,e=this.boxSize,o=this.chart&&this.chart.instrument,r=o&&o.tickSize;switch(e.kind){case n.RenkoBoxSizeKind.ATR:t=this._calculateAtr(e.value);break;case n.RenkoBoxSizeKind.FIXED:t=e.value;break;case n.RenkoBoxSizeKind.POINTS:r&&(t=e.value*r),o&&!r&&this.chart.localizeText("instrument.notification.missingTickSize",{instrument:o.symbol}).then(function(e){return __awaiter(i,void 0,void 0,function(){return __generator(this,function(t){return[2,n.UI.Notification.error(e,this.chart)]})})});break;default:throw new Error("Unknown box size kind: "+e.kind)}return this._boxSizeValue=t},e.prototype.updateComputedDataSeries=function(){var t=this.chart.dataManager,e=t.barDataSeries(n.DataSeriesSuffix.RENKO,!0),i=this._calculateBoxSizeValue();i&&n.BarConverter.convertToRenko(t.barDataSeries(),i,e)},e.defaults={boxSize:{kind:n.RenkoBoxSizeKind.POINTS,value:1}},e);function e(t){return i.call(this,t)||this}n.RenkoPriceStyle=t,n.PriceStyle.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var e,i=(e=t.PriceStyle,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"candleVolume"},enumerable:!0,configurable:!0}),o.prototype.createPlot=function(){return new t.BarPlot({plotStyle:t.BarPlot.Style.CANDLE_VOLUME,plotType:t.PlotType.PRICE_STYLE})},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.CandleVolumePriceStyle=i,t.PriceStyle.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var e,i=(e=t.PriceStyle,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"equiVolume"},enumerable:!0,configurable:!0}),o.prototype.createPlot=function(){return new t.BarPlot({plotStyle:t.BarPlot.Style.EQUI_VOLUME,plotType:t.PlotType.PRICE_STYLE})},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.EquiVolumePriceStyle=i,t.PriceStyle.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var e,i=(e=t.PriceStyle,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"equiVolumeShadow"},enumerable:!0,configurable:!0}),o.prototype.createPlot=function(){return new t.BarPlot({plotStyle:t.BarPlot.Style.EQUI_VOLUME_SHADOW,plotType:t.PlotType.PRICE_STYLE})},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.EquiVolumeShadowPriceStyle=i,t.PriceStyle.register(i)}(StockChartX=StockChartX||{}),function(e){"use strict";var t=(Object.defineProperty(i.prototype,"callback",{get:function(){return this._callback},set:function(t){if(null!=t&&!e.JsUtil.isFunction(t))throw new TypeError("Callback must be a function.");this._callback=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"started",{get:function(){return this._isStarted},enumerable:!0,configurable:!0}),i.prototype.start=function(){if(!this.callback)throw new Error("Callback is not assigned.");return!this._isStarted&&(!!e.AnimationController.add(this)&&(this._isStarted=!0))},i.prototype.stop=function(){e.AnimationController.remove(this),this._isStarted=!1},i.prototype.handleAnimationFrame=function(){this.callback.call(this.context)},i.prototype.destroy=function(){this.stop(),this.context=null},i);function i(t){this._isStarted=!1,this.context=null,this.recurring=!0,t&&(this.context=t.context,null!=t.recurring&&(this.recurring=t.recurring),this.callback=t.callback)}e.Animation=t}(StockChartX=StockChartX||{}),function(t){"use strict";window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,e.AnimationInterval)};var e=(i.hasAnimationsToRun=function(){return 0<this._animations.length},i.contains=function(t){return 0<=this._animations.indexOf(t)},i.add=function(t){if(this.contains(t))return!1;var e=this.hasAnimationsToRun();return this._animations.push(t),e||this._runAnimation(),!0},i.remove=function(t){var e=this._animations,i=e.indexOf(t);return!(i<0)&&(e.splice(i,1),!0)},i._runAnimation=function(){var t=this;requestAnimationFrame(function(){return t._handleAnimationFrame()})},i._handleAnimationFrame=function(){if(Date.now()-this._prevStartTime>=this.AnimationInterval){for(var t=this._animations,e=0;e<t.length;e++){var i=t[e];i.handleAnimationFrame(),i.recurring||(i.stop(),e--)}this._prevStartTime=Date.now()}this.hasAnimationsToRun()&&this._runAnimation()},i.AnimationInterval=1e3/(t.Environment.isMobile?20:40),i._animations=[],i._prevStartTime=Date.now(),i);function i(){}t.AnimationController=e}(StockChartX=StockChartX||{}),function(o){"use strict";var i,t;(t=i=o.MouseButton||(o.MouseButton={}))[t.LEFT=1]="LEFT",t[t.SCROLL=2]="SCROLL",t[t.RIGHT=3]="RIGHT",o.MouseEvent={ENTER:"mouseenter",LEAVE:"mouseleave",MOVE:"mousemove",DOWN:"mousedown",UP:"mouseup",CLICK:"click",DOUBLE_CLICK:"dblclick",CONTEXT_MENU:"contextmenu",WHEEL:"mousewheel",SCROLL:"DOMMouseScroll",OVER:"mouseover"},Object.freeze(o.MouseEvent),o.TouchEvent={START:"touchstart",MOVE:"touchmove",END:"touchend"},Object.freeze(o.TouchEvent),o.GestureState={NONE:0,STARTED:1,CONTINUED:2,FINISHED:3},Object.freeze(o.GestureState);var e=(Object.defineProperty(r.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pointerKind",{get:function(){return this._pointerType},enumerable:!0,configurable:!0}),r.prototype.handleEvent=function(t){return this._updatePointerKind(t),!1},r.prototype._checkButton=function(t){var e=this.button;return null==e||(!(e!==i.LEFT||!o.Environment.isPhone&&!o.Environment.isMobile)||t.evt.which===e)},r.prototype._checkKeys=function(t){if(!this._keys)return!0;for(var e=0,i=this._keys;e<i.length;e++){switch(i[e]){case o.Key.SHIFT:if(!t.evt.shiftKey)return!1;break;case o.Key.CTRL:if(!t.evt.ctrlKey)return!1;break;case o.Key.ALT:if(!t.evt.altKey)return!1}}return!0},r.prototype._checkHit=function(t){if(t.evt.type===o.MouseEvent.LEAVE)return!1;var e=this.hitTest;return!!e&&e.call(this.context,t.pointerPosition)},r.prototype._invokeHandler=function(t){var e=this.handler;e&&e.call(this.context,this,t)},r.prototype._updatePointerKind=function(t){switch(t.evt.type){case o.MouseEvent.CLICK:case o.MouseEvent.CONTEXT_MENU:case o.MouseEvent.DOUBLE_CLICK:case o.MouseEvent.DOWN:case o.MouseEvent.LEAVE:case o.MouseEvent.MOVE:case o.MouseEvent.OVER:case o.MouseEvent.SCROLL:case o.MouseEvent.UP:case o.MouseEvent.WHEEL:this._pointerType=1;break;case o.TouchEvent.START:case o.TouchEvent.MOVE:case o.TouchEvent.END:this._pointerType=2;break;default:this._pointerType=0}},r.prototype.isActive=function(){var t=this._state;return t===o.GestureState.STARTED||t===o.GestureState.CONTINUED},r);function r(t){this.handler=null,this.hitTest=null,this.context=null,this.button=null,this._state=o.GestureState.NONE,this._pointerType=0,t&&(this.handler=t.handler,this.hitTest=t.hitTest,this.context=t.context,this._keys=t.keys,this.button=t.button)}o.Gesture=e}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){"use strict";var i,t=(i=e.Gesture,__extends(o,i),o.prototype.handleEvent=function(t){switch(t.evt.type){case e.MouseEvent.ENTER:case e.MouseEvent.MOVE:case e.TouchEvent.START:case e.TouchEvent.MOVE:if(this._checkHit(t))return this.isActive()?(this._state=e.GestureState.CONTINUED,this.hoverEnabled&&this._invokeHandler(t)):(this._state=e.GestureState.STARTED,this.enterEnabled&&this._invokeHandler(t)),!0;if(this.isActive())return this._checkHit(t)||(this._state=e.GestureState.FINISHED,this.leaveEnabled&&this._invokeHandler(t)),!0;break;case e.MouseEvent.LEAVE:case e.TouchEvent.END:if(this.isActive())return this._state=e.GestureState.FINISHED,this.leaveEnabled&&this._invokeHandler(t),!0}return!1},o);function o(t){var e=i.call(this,t)||this;return e.enterEnabled=!0,e.hoverEnabled=!0,e.leaveEnabled=!0,t&&(null!=t.enterEventEnabled&&(e.enterEnabled=t.enterEventEnabled),null!=t.hoverEventEnabled&&(e.hoverEnabled=t.hoverEventEnabled),null!=t.leaveEventEnabled&&(e.leaveEnabled=t.leaveEventEnabled)),e}e.MouseHoverGesture=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(a){"use strict";var l,t=(l=a.Gesture,__extends(e,l),Object.defineProperty(e.prototype,"minMoveDistance",{get:function(){return this._minMoveDistance},set:function(t){if(!a.JsUtil.isPositiveNumber(t))throw new Error("minMoveDistance must be a positive number.");this._minMoveDistance=t},enumerable:!0,configurable:!0}),e.prototype.handleEvent=function(t){l.prototype.handleEvent.call(this,t);var e=this._lastPoint={x:t.pointerPosition.x,y:t.pointerPosition.y};switch(t.evt.type){case a.MouseEvent.DOWN:case a.TouchEvent.START:if(this._checkButton(t)&&this._checkHit(t))return this._prevPoint={x:e.x,y:e.y},this._state=a.GestureState.STARTED,this._invokeHandler(t),!0;break;case a.MouseEvent.MOVE:case a.TouchEvent.MOVE:var i=this.moveOffset;if(this.isActive()){i.x=e.x-this._prevPoint.x,i.y=e.y-this._prevPoint.y;var o,r,n=this.minMoveDistance;return(this.horizontalMoveEnabled&&Math.abs(i.x)>=n||this.verticalMoveEnabled&&Math.abs(i.y)>=n)&&(o=this._animation,this._state=a.GestureState.CONTINUED,o.started||(r=a.JsUtil.shallowClone(t),o.callback=function(){this._prevPoint=this._lastPoint,this._invokeHandler(r)},o.start())),!0}break;case a.MouseEvent.UP:case a.MouseEvent.LEAVE:case a.TouchEvent.END:if(this.isActive())return this._animation.stop(),this._state=a.GestureState.FINISHED,this._invokeHandler(t),!0}return!1},e);function e(t){var e=l.call(this,t)||this;return e.moveOffset={x:0,y:0},e._minMoveDistance=1,e.horizontalMoveEnabled=!0,e.verticalMoveEnabled=!0,e._prevPoint=null,e._lastPoint=null,e._animation=new a.Animation({context:e,recurring:!1}),t&&(null!=t.minMoveDistance&&(e.minMoveDistance=t.minMoveDistance),null!=t.horizontalMoveEnabled&&(e.horizontalMoveEnabled=t.horizontalMoveEnabled),t.verticalMoveEnabled&&(e.verticalMoveEnabled=t.verticalMoveEnabled)),e}a.PanGesture=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(h){"use strict";var i,t=(i=h.Gesture,__extends(u,i),u.prototype.handleEvent=function(t){var e=t.evt,i=e.originalEvent;switch(e.type){case h.MouseEvent.WHEEL:case h.MouseEvent.SCROLL:if(this._checkHit(t))return e.type===h.MouseEvent.SCROLL?this.delta=0<i.detail?1:-1:this.delta=i.wheelDelta<0?1:-1,this._state=h.GestureState.FINISHED,this._invokeHandler(t),!0;break;case h.TouchEvent.START:if(!this.isActive()&&2===i.touches.length)return this._prevScale=this._lastScale=i.scale,(void 0!==this._prevScale||(this._prevScale=this._lastScale=u._calculateScale(i.touches),void 0!==this._prevScale))&&(this._state=h.GestureState.STARTED,!0);break;case h.TouchEvent.MOVE:if(this.isActive()){var o=this._lastScale=i.scale,r=t.pointerPosition;if(void 0===o){var n=i.touches;if(2!==n.length)return!0;o=this._lastScale=u._calculateScale(n),r=u._zoomPoint(n)}var a,l,s=o-this._prevScale,c=(0<this._prevScale&&o<0||this._prevScale<0&&0<o?2:1)*this._scaleThreshold;return Math.abs(s)>=c&&(this.delta=s<0?1:-1,this._state=h.GestureState.CONTINUED,(a=this._animation).started||(l=h.JsUtil.shallowClone(t),a.callback=function(){this._prevScale=this._lastScale,l.pointerPosition=r,this._invokeHandler(l)},a.start())),!0}break;case h.TouchEvent.END:if(this.isActive())return this._state=h.GestureState.FINISHED,!0}return!1},u._calculateScale=function(t){var e=t[0].pageX-t[1].pageX,i=t[0].pageY-t[1].pageY;return Math.sqrt(e*e+i*i)/Math.max(window.innerWidth,window.innerHeight)},u._zoomPoint=function(t){return{x:(t[0].pageX+t[1].pageX)/2,y:(t[0].pageY+t[1].pageY)/2}},u);function u(t){var e=i.call(this,t)||this;return e.delta=0,e._prevScale=0,e._lastScale=0,e._scaleThreshold=.005,e._animation=new h.Animation({context:e,recurring:!1}),e}h.MouseWheelGesture=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(r){"use strict";var i,t=(i=r.Gesture,__extends(n,i),Object.defineProperty(n.prototype,"maxTouchOffset",{get:function(){return this._maxTouchOffset},set:function(t){if(!r.JsUtil.isPositiveNumber(t))throw new Error("Max touch offset must be a number greater than 0.");this._maxTouchOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxTouchInterval",{get:function(){return this._maxTouchInterval},set:function(t){if(!r.JsUtil.isPositiveNumber(t))throw new Error("Max touch interval must be a number greater than 0.");this._maxTouchInterval=t},enumerable:!0,configurable:!0}),n.prototype.handleEvent=function(t){switch(t.evt.type){case r.MouseEvent.CLICK:if(!n._isTouch&&this._finishGesture(t))return!0;break;case r.TouchEvent.START:n._isTouch=!0,this._checkHit(t)&&(this._startPoint=t.pointerPosition,this._startDate=new Date,this._state=r.GestureState.STARTED);break;case r.TouchEvent.END:if(!this.isActive())break;var e=Math.abs(t.pointerPosition.x-this._startPoint.x),i=Math.abs(t.pointerPosition.y-this._startPoint.y),o=new Date;if(e<=this._maxTouchOffset&&i<=this._maxTouchOffset&&o-this._startDate<=this._maxTouchInterval&&this._finishGesture(t))return!0;this._state=r.GestureState.NONE}return!1},n.prototype._finishGesture=function(t){if(this._checkButton(t)&&this._checkHit(t)&&this._checkKeys(t))return this._state=r.GestureState.FINISHED,this._invokeHandler(t),!0},n);function n(t){var e=i.call(this,t)||this;return e._maxTouchOffset=10,e._maxTouchInterval=500,t&&(t.maxTouchOffset&&(e.maxTouchOffset=t.maxTouchOffset),t.maxTouchInterval&&(e.maxTouchInterval=t.maxTouchInterval)),e}r.ClickGesture=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(r){"use strict";var i,t=(i=r.Gesture,__extends(e,i),Object.defineProperty(e.prototype,"maxTouchOffset",{get:function(){return this._maxTouchOffset},set:function(t){if(!r.JsUtil.isPositiveNumber(t))throw new Error("Max touch offset must be a number greater than 0.");this._maxTouchOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxTouchInterval",{get:function(){return this._maxTouchInterval},set:function(t){if(!r.JsUtil.isPositiveNumber(t))throw new Error("Max touch interval must be a number greater than 0.");this._maxTouchInterval=t},enumerable:!0,configurable:!0}),e.prototype.handleEvent=function(t){switch(t.evt.type){case r.MouseEvent.DOUBLE_CLICK:if(this._finishGesture(t))return!0;break;case r.TouchEvent.START:if(this.isActive())return this._isSecondTouch=!0;if(this._checkHit(t))return this._startPoint=t.pointerPosition,this._startDate=new Date,this._isSecondTouch=!1,this._state=r.GestureState.STARTED,!0;this._state=r.GestureState.NONE;break;case r.TouchEvent.END:if(!this._isSecondTouch)break;var e=Math.abs(t.pointerPosition.x-this._startPoint.x),i=Math.abs(t.pointerPosition.y-this._startPoint.y),o=new Date;if(e<=this._maxTouchOffset&&i<=this._maxTouchOffset&&o-this._startDate<=this._maxTouchInterval){if(this._finishGesture(t))return!0}else this._state=r.GestureState.NONE}return!1},e.prototype._finishGesture=function(t){return!(!this._checkButton(t)||!this._checkHit(t))&&(this._state=r.GestureState.FINISHED,this._invokeHandler(t),t.stopPropagation=!0)},e);function e(t){var e=i.call(this,t)||this;return e._maxTouchOffset=10,e._maxTouchInterval=2500,t&&(t.maxTouchOffset&&(e.maxTouchOffset=t.maxTouchOffset),t.maxTouchInterval&&(e.maxTouchInterval=t.maxTouchInterval)),e}r.DoubleClickGesture=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(r){"use strict";var i,t=(i=r.Gesture,__extends(e,i),Object.defineProperty(e.prototype,"maxTouchOffset",{get:function(){return this._maxTouchOffset},set:function(t){if(!r.JsUtil.isPositiveNumber(t))throw new Error("Max touch offset must be a number greater than 0.");this._maxTouchOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"touchInterval",{get:function(){return this._touchInterval},set:function(t){if(!r.JsUtil.isPositiveNumber(t))throw new Error("Touch interval must be a number greater than 0.");this._touchInterval=t},enumerable:!0,configurable:!0}),e.prototype.handleEvent=function(t){switch(t.evt.type){case r.MouseEvent.CONTEXT_MENU:if(this._finishGesture(t))return!0;break;case r.TouchEvent.START:this._checkHit(t)&&(this._startPoint=t.pointerPosition,this._lastEvent=r.JsUtil.clone(t),this._state=r.GestureState.STARTED,this._startTimeout());break;case r.TouchEvent.MOVE:this.isActive()&&(this._lastEvent=r.JsUtil.clone(t));break;case r.TouchEvent.END:if(this._stopTimeout(),this._lastEvent)return this._lastEvent=null,t.stopPropagation=!0}return!1},e.prototype._startTimeout=function(){var o=this;this._timeoutId=setTimeout(function(){var t=o._lastEvent;if(o.isActive()&&t){var e=Math.abs(t.pointerPosition.x-o._startPoint.x),i=Math.abs(t.pointerPosition.y-o._startPoint.y);if(e<=o._maxTouchOffset&&i<=o._maxTouchOffset&&o._finishGesture(t))return!0;o._state=r.GestureState.NONE}},this._touchInterval)},e.prototype._stopTimeout=function(){this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null)},e.prototype._finishGesture=function(t){if(this._checkHit(t))return this._state=r.GestureState.FINISHED,this._invokeHandler(t),!0},e);function e(t){var e=i.call(this,t)||this;return e._maxTouchOffset=10,e._touchInterval=2e3,t&&(t.maxTouchOffset&&(e.maxTouchOffset=t.maxTouchOffset),t.touchInterval&&(e.touchInterval=t.touchInterval)),e}r.ContextMenuGesture=t}(StockChartX=StockChartX||{}),function(s){"use strict";var t=(e.prototype.add=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,o=s.JsUtil.flattenArray(t);i<o.length;i++){var r=o[i];this.contains(r)||this.gestures.push(r)}},e.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=s.JsUtil.flattenArray(t),o=this.gestures,r=0,n=i;r<n.length;r++){var a=n[r],l=o.indexOf(a);0<=l&&o.splice(l,1)}},e.prototype.contains=function(t){return 0<=this.gestures.indexOf(t)},e.prototype.handleEvent=function(t,e){void 0===e&&(e=!0);for(var i=!1,o=0,r=this.gestures;o<r.length;o++){var n=r[o];e?!n.handleEvent(t)||n instanceof s.MouseHoverGesture||(i=!0):(n instanceof s.MouseHoverGesture||t.evt.type===s.MouseEvent.LEAVE||t.evt.type===s.MouseEvent.UP)&&n.handleEvent(t)}return i},e);function e(t,e,i){if(this.gestures=[],t&&(this.add(t),e||i))for(var o=0,r=this.gestures;o<r.length;o++){var n=r[o];n.context||(n.context=e),n.hitTest||(n.hitTest=i)}}s.GestureArray=t}(StockChartX=StockChartX||{}),function(i){"use strict";var e=jQuery,t=(Object.defineProperty(o,"renderer",{get:function(){var t=this._renderer;return t||((t=new i.CanvasRenderer).canvas=e("<canvas></canvas>")[0],this._renderer=t)},enumerable:!0,configurable:!0}),o.applyTextTheme=function(t){this.renderer.textTheme(t)},o.textWidth=function(t,e){var i=this.renderer;return e&&i.textTheme(e),i.textWidth(t)},o.measureText=function(t,e){return{width:this.textWidth(t,e),height:i.HtmlUtil.getFontSize(e)+1}},o);function o(){}i.DummyCanvasContext=t}(StockChartX=StockChartX||{}),function(t){"use strict";var e=(i.calculateLinearRegression=function(t){for(var e=0,i=0,o=t.length,r=0;r<o;r++)e+=r,i+=t[r];e=0===o?0:e/o,i=0===o?0:i/o;for(var n=0,a=0,r=0;r<o;r++)n+=(r-e)*(t[r]-i),a+=Math.pow(r-e,2);var l=0===a?0:n/a;return{slope:l,firstValue:i-l*e}},i);function i(){}t.DrawingCalculationUtil=e}(StockChartX=StockChartX||{}),function(h){"use strict";var t=(Object.defineProperty(e.prototype,"dateScale",{get:function(){return this._dateScale},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueScale",{get:function(){return this._valueScale},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canResolveX",{get:function(){return!!this._dateScale},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canResolveY",{get:function(){return!!this._valueScale},enumerable:!0,configurable:!0}),e.prototype.columnByRecord=function(t,e){var i=t-Math.trunc(this._dateScale.firstVisibleRecord);return!1!==e&&(i=Math.trunc(i)),i},e.prototype.recordByColumn=function(t,e){var i=t+Math.trunc(this._dateScale.firstVisibleRecord);return!1!==e&&(i=Math.trunc(i)),i},e.prototype.xByColumn=function(t,e,i){var o,r=this._dateScale,n=r.columnWidth,a=r.firstVisibleRecord,l=(a-Math.trunc(a))*n,s=r.projectionFrame,c=this.dateScale.columnValues;return null!==c&&t&&0<t?(o=s.left-l+c.centers[t],t>c.centers.length-1&&(o=s.left-l+c.centers[c.centers.length-1]+c.visibleColumnsWidths[c.visibleColumnsWidths.length-1])):o=s.left-l+t*n,!1!==e&&(o+=n/2),!1!==i?Math.round(o):o},e.prototype.columnByX=function(t,e){var i,o=this._dateScale,r=o.projectionFrame,n=o.firstVisibleRecord,a=o.columnWidth,l=(n-Math.trunc(n))*a,s=this.dateScale.columnValues;return null!==s&&0<t?(i=~h.JsUtil.binarySearch(s.centers,t),s.centers[i]!==t&&0<=i&&i<s.centers.length&&(Math.abs(t-s.centers[i-1])<Math.abs(t-s.centers[i])&&--i,i<s.centers.length-1&&(i+=100*(t-(s.centers[i]-s.visibleColumnsWidths[i]/2))/s.visibleColumnsWidths[i]/100))):i=(t-r.left+l)/a,!1!==e?Math.floor(i):i},e.prototype.xByRecord=function(t,e,i){return this.xByColumn(this.columnByRecord(t,e),e,i)},e.prototype.recordByX=function(t,e){return this.recordByColumn(this.columnByX(t,e),e)},e.prototype.dateByRecord=function(t){var e=this._dateScale.getDateDataSeries().values;if(0===e.length)return new Date(0);if(t<0){var i=e[0].getTime()+t*this._dateScale.chart.timeInterval;return new Date(i)}return t>=e.length?(i=e[e.length-1].getTime()+(t-e.length+1)*this._dateScale.chart.timeInterval,new Date(i)):e[t]},e.prototype.recordByDate=function(t){var e=this._dateScale,i=e.getDateDataSeries();if(0===i.length)return-1;var o,r,n=i.floorIndex(t);return n<0?(o=t.getTime()-i.firstValue.getTime(),n=Math.floor(o/e.chart.timeInterval)):n>=i.length&&(r=t.getTime()-i.lastValue.getTime(),n=i.length-1+Math.floor(r/e.chart.timeInterval)),n},e.prototype.dateByColumn=function(t){var e=this.recordByColumn(t);return this.dateByRecord(e)},e.prototype.columnByDate=function(t){var e=this.xByDate(t,!1);return this.columnByX(e)},e.prototype.dateByX=function(t){t=Math.round(t);var e=this.columnByX(t),i=this.xByColumn(e,!0,!1),o=this.dateByColumn(e);if(t===i)return o;var r,n=t<i?e-1:e+1,a=this.xByColumn(n,!0,!1),l=this.dateByColumn(n),s=i-a,c=o.getTime(),h=c;return 0!=s&&(r=(t-i)/s,h+=(c-l.getTime())*r),new Date(h)},e.prototype.xByDate=function(t,e){var i=this.recordByDate(t),o=this.xByRecord(i,!0,!1),r=this.dateByRecord(i),n=i+1,a=this.xByRecord(n,!0,!1),l=this.dateByRecord(n),s=r.getTime(),c=l.getTime()-r.getTime(),h=o;return 0!=c&&(h+=(a-o)*((t.getTime()-s)/c)),!1!==e?Math.round(h):h},e.prototype.yByValue=function(t){var e=this._valueScale,i=e.projectionFrame,o=e.maxVisibleValue,r=e.minVisibleValue;switch(e.kind){case h.ScaleKind.LINEAR:var n=i.height/(o-r);return Math.round(i.top+(o-t)*n);case h.ScaleKind.LOGARITHMIC:var a=i.bottom,l=i.top,s=this._logarithmfromValue(r),c=(this._logarithmfromValue(o)-s)/(l-a);return Math.round((this._logarithmfromValue(t)-s)/c+a);default:throw new Error("Unknown value scale kind: "+e.kind)}},e.prototype.valueByY=function(t){var e=this._valueScale,i=e.projectionFrame,o=e.maxVisibleValue,r=e.minVisibleValue;switch(e.kind){case h.ScaleKind.LINEAR:var n=(o-r)/i.height;return o-(t-i.top)*n;case h.ScaleKind.LOGARITHMIC:var a=i.height,l=i.top,s=this._logarithmfromValue(r),c=(this._logarithmfromValue(o)-s)/(l-a);return Math.exp(s+c*(t-a))-1;default:throw new Error("Unknown value scale kind: "+e.kind)}},e.prototype._logarithmfromValue=function(t){return t<0?-h.JsUtil.log(Math.abs(t)+1):h.JsUtil.log(t+1)},e);function e(t,e){this._dateScale=t,this._valueScale=e}h.Projection=t}(StockChartX=StockChartX||{}),function(f){"use strict";var t=(Object.defineProperty(e.prototype,"dateDataSeries",{get:function(){return this.getDataSeries(f.DataSeriesSuffix.DATE)},enumerable:!0,configurable:!0}),e.prototype.findDataSeries=function(t){var e=this._dataSeries;for(var i in e)if(e.hasOwnProperty(i)){var o=i.lastIndexOf(t);if(0<=o&&o===i.length-t.length)return e[i]}return null},e.prototype.getDataSeries=function(t,e){void 0===e&&(e=!1);var i=this._dataSeries[t];return i||(e?this.addDataSeries(t):null)},e.prototype.indexByDate=function(t){var e=this.dateDataSeries;if(!e)return null;var i=e.binaryIndexOf(t);return 0<=i?i:null},e.prototype.clearDataSeries=function(t){var e;if(t)"string"==typeof t?(e=this.getDataSeries(t))&&e.clear():t.clear();else for(var i in e=this._dataSeries)e.hasOwnProperty(i)&&e[i].clear()},e.prototype.trimDataSeries=function(t){var e=this._dataSeries;for(var i in e)e.hasOwnProperty(i)&&e[i].trim(t)},e.prototype.addBarDataSeries=function(t){void 0===t&&(t="");var e=f.DataSeriesSuffix;return{date:this.addDataSeries(t+e.DATE),open:this.addDataSeries(t+e.OPEN),high:this.addDataSeries(t+e.HIGH),low:this.addDataSeries(t+e.LOW),close:this.addDataSeries(t+e.CLOSE),volume:this.addDataSeries(t+e.VOLUME),ticksCount:this.addDataSeries(t+e.TICKS_COUNT),details:this.addDataSeries(t+e.DETAILS)}},e.prototype.barDataSeries=function(t,e){void 0===t&&(t=""),void 0===e&&(e=!1);var i=f.DataSeriesSuffix;return{date:this.getDataSeries(t+i.DATE,e),open:this.getDataSeries(t+i.OPEN,e),high:this.getDataSeries(t+i.HIGH,e),low:this.getDataSeries(t+i.LOW,e),close:this.getDataSeries(t+i.CLOSE,e),volume:this.getDataSeries(t+i.VOLUME,e),ticksCount:this.getDataSeries(t+i.TICKS_COUNT,e),details:this.getDataSeries(t+i.DETAILS,e)}},e.prototype.clearBarDataSeries=function(t){var e=f.DataSeriesSuffix,i=t&&t.symbol||"";this.clearDataSeries(i+e.DATE),this.clearDataSeries(i+e.OPEN),this.clearDataSeries(i+e.HIGH),this.clearDataSeries(i+e.LOW),this.clearDataSeries(i+e.CLOSE),this.clearDataSeries(i+e.VOLUME),this.clearDataSeries(i+e.TICKS_COUNT),this.clearDataSeries(i+e.DETAILS)},e.prototype.ohlcDataSeries=function(t,e){void 0===t&&(t=""),void 0===e&&(e=!1);var i=f.DataSeriesSuffix;return{open:this.getDataSeries(t+i.OPEN,e),high:this.getDataSeries(t+i.HIGH,e),low:this.getDataSeries(t+i.LOW,e),close:this.getDataSeries(t+i.CLOSE,e)}},e.prototype.addDataSeries=function(t,e){if(void 0===e&&(e=!1),!t)throw new Error("Data series is not specified.");if("string"==typeof t)return this.addDataSeries(new f.DataSeries(t),e);if(!(t instanceof f.DataSeries))throw new TypeError("Invalid data series. Name or data series object expected.");var i=t.name;if(!i||"string"!=typeof i)throw new TypeError("Data series name must be non-empty string.");if(this.getDataSeries(i)&&!e)throw new Error("Data series '"+i+"' already exists.");return this._dataSeries[i]=t},e.prototype.removeDataSeries=function(t){var e;t?(e="string"==typeof t?t:t.name,delete this._dataSeries[e]):this._dataSeries={}},e.prototype.appendBars=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.appendInstrumentBars.apply(this,[{}].concat(t))},e.prototype.appendInstrumentBars=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];function o(t){n.date.add(t.date),n.open.add(t.open),n.high.add(t.high),n.low.add(t.low),n.close.add(t.close),n.volume.add(t.volume),n.details.addArray(t.details),null!=t.ticksCount?n.ticksCount.add(t.ticksCount):n.ticksCount.add(1)}var r=t&&t.symbol,n=this.barDataSeries(r,!0);Array.isArray(e)?f.JsUtil.flattenedArray(e,o):o(e)},e.prototype.insertBars=function(t,e){this.insertInstrumentBars({},t,e)},e.prototype.insertInstrumentBars=function(t,e,i){var o=f.JsUtil.flattenArray([i]),r=o.map(function(t){return t.date}),n=o.map(function(t){return t.open}),a=o.map(function(t){return t.high}),l=o.map(function(t){return t.low}),s=o.map(function(t){return t.close}),c=o.map(function(t){return t.volume}),h=o.map(function(t){return t.details}),u=this.barDataSeries(t&&t.symbol);u.date.insert(e,r),u.open.insert(e,n),u.high.insert(e,a),u.low.insert(e,l),u.close.insert(e,s),u.volume.insert(e,c),u.ticksCount.insert(e,1),u.details.insert(e,h)},e.prototype.bar=function(t,e){var i=e||this.barDataSeries(),o="number"==typeof t?t:this.indexByDate(t);if(null==o||o<0||o>=i.date.length)return null;var r={date:i.date.valueAtIndex(o),open:i.open.valueAtIndex(o),high:i.high.valueAtIndex(o),low:i.low.valueAtIndex(o),close:i.close.valueAtIndex(o),volume:i.volume.valueAtIndex(o),ticksCount:i.ticksCount.valueAtIndex(o)};return i.details&&(r.details=i.details.valueAtIndex(o)),r},e.prototype.updateBarByIndex=function(t,e){var i=this.barDataSeries();i.date.valueAtIndex(t,e.date),i.open.valueAtIndex(t,e.open),i.close.valueAtIndex(t,e.close),i.high.valueAtIndex(t,e.high),i.low.valueAtIndex(t,e.low),i.volume.valueAtIndex(t,e.volume),i.ticksCount.valueAtIndex(t,i.ticksCount.valueAtIndex(t)+1)},e.prototype.updateLastBar=function(t,e){var i=e&&e.symbol?e.symbol:"",o=this.barDataSeries(i);o.open.updateLast(t.open),o.high.updateLast(t.high),o.low.updateLast(t.low),o.close.updateLast(t.close),o.volume.updateLast(t.volume),o.date.updateLast(t.date),o.ticksCount.updateLast(o.ticksCount.lastValue+1)},e.prototype.getLastBar=function(t){var e=t&&t.symbol||"",i=this.barDataSeries(e,!0);return 0===i.date.values.length?null:{open:i.open.lastValue,high:i.high.lastValue,low:i.low.lastValue,close:i.close.lastValue,volume:i.volume.lastValue,date:i.date.lastValue,ticksCount:i.ticksCount.lastValue}},e.prototype.getBeforeLastBar=function(t){var e=t&&t.symbol||"",i=this.barDataSeries(e,!0);return i.date.values.length<2?null:{open:i.open.valueAtIndex(i.open.length-2),high:i.high.valueAtIndex(i.high.length-2),low:i.low.valueAtIndex(i.low.length-2),close:i.close.valueAtIndex(i.close.length-2),volume:i.volume.valueAtIndex(i.volume.length-2),date:i.date.valueAtIndex(i.date.length-2)}},e);function e(){this._dataSeries={}}f.DataManager=t}(StockChartX=(StockChartX=StockChartX||{})||{}),function(I){"use strict";var t=(e._setupOhlcDataSeries=function(t,e){var i=I.DataSeriesSuffix;return(e=e||{open:new I.DataSeries(t+i.OPEN),high:new I.DataSeries(t+i.HIGH),low:new I.DataSeries(t+i.LOW),close:new I.DataSeries(t+i.CLOSE)}).open.clear(),e.high.clear(),e.low.clear(),e.close.clear(),e},e._setupBarDataSeries=function(t,e){var i=I.DataSeriesSuffix;return(e=this._setupOhlcDataSeries(t,e)).date?e.date.clear():e.date=new I.DataSeries(t+i.DATE),e.volume?e.volume.clear():e.volume=new I.DataSeries(t+i.VOLUME),e.details?e.details.clear():e.details=new I.DataSeries(t+i.DETAILS),e},e.convertToHeikinAshi=function(t,e){var i=I.DataSeriesSuffix;e=this._setupOhlcDataSeries(i.HEIKIN_ASHI,e);for(var o=t.open.values,r=t.high.values,n=t.low.values,a=t.close.values,l=a.length,s=e.open.values,c=e.high.values,h=e.low.values,u=e.close.values,f=0;f<l;f++){var d=0<f?(s[f-1]+u[f-1])/2:o[f],p=(o[f]+r[f]+n[f]+a[f])/4,y=Math.max(d,p,r[f]),m=Math.min(d,p,n[f]);s.push(d),c.push(y),h.push(m),u.push(p)}return e},e.convertToRenko=function(t,e,i){var o=I.DataSeriesSuffix;i=this._setupBarDataSeries(o.RENKO,i);var r=t.date.values,n=t.open.values,a=t.close.values,l=t.volume.values,s=a.length,c=i.date.values,h=i.open.values,u=i.high.values,f=i.low.values,d=i.close.values,p=i.volume.values;if(0===s)return i;for(var y=null,m=Math.floor(n[0]/e)*e+e,_=m-e,C=0,b=0;b<s;b++){C+=l[b],y=y||new Date(r[b].getTime());var g=a[b];if(e<=g-_){for(var S=Math.trunc((g-_)/e),v=0;v<S;v++)m=_,_+=e,c.push(y),h.push(m),u.push(_),f.push(m),d.push(_),p.push(C),y=new Date(y.getTime()+1e3);C=0,y=null}else if(e<=m-g){for(S=Math.trunc((m-g)/e),v=0;v<S;v++)_=m,m-=e,c.push(y),h.push(_),u.push(_),f.push(m),d.push(m),p.push(C),y=new Date(y.getTime()+1e3);C=0,y=null}}return i},e.convertToLineBreak=function(t,e,i){var o=I.DataSeriesSuffix;i=this._setupBarDataSeries(o.LINE_BREAK,i);var r=t.date.values,n=t.open.values,a=t.close.values,l=t.volume.values,s=a.length,c=i.date.values,h=i.open.values,u=i.high.values,f=i.low.values,d=i.close.values,p=i.volume.values;if(0===s)return i;for(var y=null,m=n[0],_=n[0],C=0,b=0;b<s;b++){C+=l[b],null==y&&(y=new Date(r[b].getTime()));var g=a[b],S=_<g,v=g<m;if(S||v){var w=m,P=d.length;if(0<P&&(w=S?u[P-1]:f[P-1]),h.push(w),u.push(Math.max(w,g)),f.push(Math.min(w,g)),d.push(g),c.push(y),p.push(C),S){_=g;for(var k=P-1;P-e<=k&&d[k]>h[k];k--)m=f[k]}if(v){m=g;for(k=P-1;P-e<=k&&d[k]<h[k];k--)_=u[k]}y=C=null}}return i},e.convertToPointAndFigure=function(t,e,i,o,r){r=this._setupBarDataSeries(I.DataSeriesSuffix.LINE_BREAK,r);var n=t.date.values,a=t.high.values,l=t.low.values,s=t.close.values,c=t.volume.values,h=s.length,u=r.date.values,f=r.open.values,d=r.high.values,p=r.low.values,y=r.close.values,m=r.volume.values;if(0===h)return r;for(var _=null,C=e*i,b=!1,g=s[0]+e/2,S=g-e,v=0,w=o===I.PointAndFigureSource.HIGH_LOW,P=0;P<h;P++){if(g<(O=w?a[P]:s[P])){b=!0;break}if((E=w?l[P]:s[P])<S){b=!1;break}v+=c[P]}for(;P<h;P++){v+=c[P],null==_&&(_=new Date(n[P].getTime()));var k,x,O=w?a[P]:s[P],E=w?l[P]:s[P];b?g<O?g+=Math.round((O-g)/e)*e:E<g-C&&(x=g-e,k=S-Math.round((S-E)/e)*e,1e-4<Math.abs(x-k)&&(f.push(S),d.push(g),p.push(S),y.push(g),m.push(v),u.push(_),S=k,g=x,v=0,_=null,b=!1)):E<S?S-=Math.round((S-E)/e)*e:S+C<O&&(k=S+e,x=g+Math.round((O-g)/e)*e,1e-4<Math.abs(x-k)&&(f.push(g),d.push(g),p.push(S),y.push(S),m.push(v),u.push(_),S=k,g=x,v=0,b=!(_=null)))}return _&&(u.push(_),f.push(b?S:g),d.push(g),p.push(S),y.push(b?g:S),m.push(v)),r},e.convertToKagi=function(t,e,i){var o=I.DataSeriesSuffix;i=this._setupBarDataSeries(o.LINE_BREAK,i);var r=t.date.values,n=t.open.values,a=t.close.values,l=t.volume.values,s=a.length,c=i.date.values,h=i.open.values,u=i.high.values,f=i.low.values,d=i.close.values,p=i.volume.values;if(0===s)return i;for(var y=null,m=0,_=a[0],C=n[0],b=C<=_,g=0;g<s;g++){y=y||new Date(r[g].getTime());var S=a[g],v=S-_;b!==0<=v&&Math.abs(v)>=e?(c.push(y),h.push(C),u.push(Math.max(C,_)),f.push(Math.min(C,_)),d.push(_),p.push(m),C=_,_=S,b=!b,y=null,m=0):(_=b?Math.max(_,S):Math.min(_,S),m+=l[0])}return i},e);function e(){}I.BarConverter=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(r){"use strict";var e,t;r.DateScaleScrollKind={NORMAL:"normal",AUTOSCALED:"autoscaled"},Object.freeze(r.DateScaleScrollKind),r.DateScaleZoomKind={NORMAL:"normal",AUTOSCALED:"autoscaled"},Object.freeze(r.DateScaleZoomKind),r.DateScaleZoomMode={PIN_CENTER:"pin_center",PIN_LEFT:"pin_left",PIN_RIGHT:"pin_right",PIN_MOUSE:"pin_mouse"},Object.freeze(r.DateScaleZoomMode),(t=e=r.BarsUpdateKind||(r.BarsUpdateKind={}))[t.TICK=0]="TICK",t[t.NEW_BAR=1]="NEW_BAR",r.DateScaleAutoScrollKind={NONE:"none",HIDDEN_BAR:"hidden_bar",ALWAYS:"always",VISIBLE_BAR:"visible_bar"},Object.freeze(r.DateScaleAutoScrollKind),r.DateScaleAutoScrollMode={NEW_BAR:"new_bar",TICK:"tick"},Object.freeze(r.DateScaleAutoScrollMode);var i,o="scxTopDateScale",n="scxBottomDateScale",a=".scxDateScale",l=(i=r.ChartComponent,__extends(s,i),Object.defineProperty(s.prototype,"topPanel",{get:function(){return this._topPanel},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"bottomPanel",{get:function(){return this._bottomPanel},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"topPanelCssClass",{get:function(){return o},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"bottomPanelCssClass",{get:function(){return n},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"topPanelVisible",{get:function(){return this._topPanel.visible},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"bottomPanelVisible",{get:function(){return this._bottomPanel.visible},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"projection",{get:function(){return this._projection},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"projectionFrame",{get:function(){return this._projectionFrame},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"calibrator",{get:function(){return this._calibrator},set:function(t){this._calibrator=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"firstVisibleIndex",{get:function(){return this._firstVisibleIndex},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"lastVisibleIndex",{get:function(){return this._lastVisibleIndex},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"firstVisibleRecord",{get:function(){return this._options.firstVisibleRecord},set:function(t){this.allowPartialRecords||(t=Math.trunc(t));var e=this._options.firstVisibleRecord;e!==t&&(this._options.firstVisibleRecord=t,this._firstVisibleIndex=Math.floor(t),this.chart.fireValueChanged(r.ChartEvent.FIRST_VISIBLE_RECORD_CHANGED,e,t))},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"lastVisibleRecord",{get:function(){return this._options.lastVisibleRecord},set:function(t){this.allowPartialRecords||(t=Math.trunc(t));var e=this._options.lastVisibleRecord;e!==t&&(this._options.lastVisibleRecord=t,this._lastVisibleIndex=Math.ceil(t),this.chart.fireValueChanged(r.ChartEvent.LAST_VISIBLE_RECORD_CHANGED,e,t))},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"visibleDateRange",{get:function(){var t=this.projectionFrame;return{min:this.projection.dateByX(t.left),max:this.projection.dateByX(t.right)}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"useManualHeight",{get:function(){return this._options.useManualHeight},set:function(t){this._options.useManualHeight=!!t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"manualHeight",{get:function(){return this._options.height},set:function(t){if(!r.JsUtil.isPositiveNumber(t))throw new Error("Height must be a positive number.");this._options.height=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"minVisibleRecords",{get:function(){return this._options.minVisibleRecords},set:function(t){if(!r.JsUtil.isPositiveNumber(t))throw new Error("Records must be a finite number greater than 0.");this._options.minVisibleRecords=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rightAdditionalSpaceRatio",{get:function(){return this._options.rightAdditionalSpaceRatio},set:function(t){if(r.JsUtil.isNegativeNumber(t))throw new TypeError("Ratio must be a positive number.");this._options.rightAdditionalSpaceRatio=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"scrollKind",{get:function(){return this._options.scrollKind},set:function(t){this._options.scrollKind=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"autoScrollKind",{get:function(){return this._options.autoScrollKind},set:function(t){this._options.autoScrollKind=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"autoScrollMode",{get:function(){return this._options.autoScrollMode},set:function(t){this._options.autoScrollMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"zoomKind",{get:function(){return this._options.zoomKind},set:function(t){this._options.zoomKind=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"zoomMode",{get:function(){return this._options.zoomMode},set:function(t){this._options.zoomMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"theme",{get:function(){return this._options.theme},set:function(t){var e=this._options.theme;this._options.theme=t,this.chart.fireValueChanged(r.ChartEvent.DATE_SCALE_THEME_CHANGED,e,t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"actualTheme",{get:function(){return this._options.theme||this.chart.theme.dateScale},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"columnsCount",{get:function(){return this.needsAutoScale()?1:this._options.lastVisibleRecord-this._options.firstVisibleRecord+1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"columnWidth",{get:function(){return this._columnWidth},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"maxAllowedRecord",{get:function(){var t=this._projectionFrame.width*this.rightAdditionalSpaceRatio/this._columnWidth;return this.getDateDataSeries().length-1+t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"majorTickMarkLength",{get:function(){return this._options.majorTickMarkLength},set:function(t){this._options.majorTickMarkLength=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"minorTickMarkLength",{get:function(){return this._options.minorTickMarkLength},set:function(t){this._options.minorTickMarkLength=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"textPadding",{get:function(){return this._options.textPadding},set:function(t){this._options.textPadding=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"allowPartialRecords",{get:function(){return this._options.allowPartialRecords},set:function(t){this._options.allowPartialRecords!==t&&(this._options.allowPartialRecords=t,this.firstVisibleRecord=this.firstVisibleRecord,this.lastVisibleRecord=this.lastVisibleRecord)},enumerable:!0,configurable:!0}),s.prototype._subscribe=function(){var e=this;this.chart.on(r.ChartEvent.LOCALE_CHANGED+a,function(t){e._formatter.locale=t.value},this)},s.prototype._unsubscribe=function(){this.chart.off(a,this)},s.prototype._calculateProjectionMetrics=function(){var t=this._projectionFrame.width,e=this.chart.primaryDataSeries(r.DataSeriesSuffix.VOLUME).values;0<e.length&&this.chart.priceStyle.className===r.BarPlotStyle.CANDLE_VOLUME||this.chart.priceStyle.className===r.BarPlotStyle.EQUI_VOLUME||this.chart.priceStyle.className===r.BarPlotStyle.EQUI_VOLUME_SHADOW?(this.columnValues={},this._calculateVolumeOnProjection(e)):this.columnValues=null,this._columnWidth=t/this.columnsCount,this.chart.smartPriceStyleHandler&&this.chart.smartPriceStyleHandler.adopt()},s.prototype.setNeedsAutoScale=function(){this.firstVisibleRecord=null,this.lastVisibleRecord=null},s.prototype.needsAutoScale=function(){return null==this.firstVisibleRecord||null==this.lastVisibleRecord},s.prototype.autoScale=function(){var t=this.chart.recordCount;this.firstVisibleRecord=0<t?0:null,this.lastVisibleRecord=0<t?t-1:null,this._wasAutoscale=!0},s.prototype.getDateDataSeries=function(){return this.chart.primaryDataSeries(r.DataSeriesSuffix.DATE)},s.prototype.handleEvent=function(t){return this._bottomPanel.handleEvent(t)||this._topPanel.handleEvent(t)},s.prototype.formatDate=function(t){return this._formatter.timeInterval=this.chart.timeInterval,this._formatter.format(t)},s.prototype.scrollOnPixels=function(t){if(!isFinite(t))throw new Error("Finite number expected.");if(Math.abs(t)<3)return!1;var e=Math.abs(t)/this.columnWidth;return this.allowPartialRecords||(e=Math.ceil(e)),this.scrollOnRecords(0<=t?e:-e)},s.prototype.scrollOnRecords=function(t){if(0===t)return!1;var e=this.allowPartialRecords,i=this.firstVisibleRecord,o=this.lastVisibleRecord,r=i-t,n=o-t;if(e||(r=Math.round(r),n=Math.round(n)),!this.canSetVisibleRecord(r)||!this.canSetVisibleRecord(n)){if(0<=r)return!1;if(r=0,n=o-i,!this.canSetVisibleRecord(r)||!this.canSetVisibleRecord(n))return!1}return this.firstVisibleRecord=r,this.lastVisibleRecord=n,this.requestMoreHistoryIfNeed(),!0},s.prototype.zoomOnPixels=function(t,e){if(null==e&&(e=t),!isFinite(t)||!isFinite(e))throw new Error("Pixels must be a finite number.");if(Math.abs(t)<3&&Math.abs(e)<3)return!1;var i=this.columnWidth,o=this.allowPartialRecords,r=Math.abs(t)/i,n=Math.abs(e)/i;return o||(r=Math.ceil(r),n=Math.ceil(n)),this.zoomOnRecords(0<t?r:-r,0<e?n:-n)},s.prototype.zoomOnRecords=function(t,e){if(null==e&&(e=t),0===t&&0===e)return!1;var i=this.allowPartialRecords,o=this.firstVisibleRecord,r=this.lastVisibleRecord,n=o+t,a=r-e;if(i||(n=Math.round(n),a=Math.round(a)),a<n&&(n=a=Math.max(a,r)),n<0&&(n=0),!this.canSetVisibleRecord(n))return this.firstVisibleRecord=0,this.requestMoreHistoryIfNeed(),!1;this.canSetVisibleRecord(a)||(a=this.maxAllowedRecord);var l=n!==o||a!==r;if(l){var s=a-n+1;if(s<r-o+1&&s<this.minVisibleRecords)return!1;if(n>=this.getDateDataSeries().length)return!1;this.firstVisibleRecord=n,this.lastVisibleRecord=a,this.requestMoreHistoryIfNeed()}return l},s.prototype._handleZoom=function(t,e){switch(this.zoomMode){case r.DateScaleZoomMode.PIN_CENTER:this.zoomOnPixels(t);break;case r.DateScaleZoomMode.PIN_LEFT:this.zoomOnPixels(0,t);break;case r.DateScaleZoomMode.PIN_RIGHT:this.zoomOnPixels(t,0);break;case r.DateScaleZoomMode.PIN_MOUSE:this.zoomOnPixels(t*e,t*(1-e));break;default:throw new Error("Unknown zoom mode: "+this.zoomMode)}var i=!1;this.zoomKind===r.DateScaleZoomKind.AUTOSCALED&&(i=!0),i||this.chart.setNeedsLayout(),this.chart.setNeedsUpdate(i)},s.prototype.requestMoreHistoryIfNeed=function(){var t=this.chart;0<t.firstVisibleIndex?this._moreHistoryRequested=!1:this._moreHistoryRequested||(t.requestMoreBars(),this._moreHistoryRequested=!0)},s.prototype.saveState=function(){var t=r.JsUtil.clone(this._options);return t.formatter=this._formatter.saveState(),t.calibrator=this._calibrator.saveState(),t},s.prototype.loadState=function(t){t=t||{},this._options={},this.theme=t.theme,this.allowPartialRecords=null==t.allowPartialRecords||!!t.allowPartialRecords,this.firstVisibleRecord=null!=t.firstVisibleRecord?t.firstVisibleRecord:null,this.lastVisibleRecord=null!=t.lastVisibleRecord?t.lastVisibleRecord:null,this.minVisibleRecords=t.minVisibleRecords||5,this.textPadding=t.textPadding||{left:3,top:null,right:3,bottom:3},this.manualHeight=t.height||15,this.useManualHeight=null!=t.useManualHeight&&t.useManualHeight,this.scrollKind=t.scrollKind||r.DateScaleScrollKind.AUTOSCALED,this.zoomKind=t.zoomKind||r.DateScaleZoomKind.AUTOSCALED,this.zoomMode=t.zoomMode||r.DateScaleZoomMode.PIN_MOUSE,this.autoScrollKind=t.autoScrollKind||r.DateScaleAutoScrollKind.VISIBLE_BAR,this.autoScrollMode=t.scrollMode||r.DateScaleAutoScrollMode.NEW_BAR,this.rightAdditionalSpaceRatio=t.rightAdditionalSpaceRatio||.5,t.formatter&&(this._formatter=r.DateTimeFormat.deserialize(t.formatter)),this._formatter.locale=this.chart.locale,this.majorTickMarkLength=t.majorTickMarkLength||5,this.minorTickMarkLength=t.minorTickMarkLength||3,t.calibrator?this._calibrator=r.DateScaleCalibrator.deserialize(t.calibrator):this._calibrator=new r.CustomDateScaleCalibrator},s.prototype.canSetVisibleRecord=function(t){return 0<=t&&t<=this.maxAllowedRecord},s.prototype._onUpdateAnimationCallback=function(){this.layoutScalePanel(this.chart.getBounds()),this.draw()},s.prototype.setNeedsUpdate=function(t){t&&this.setNeedsAutoScale(),this._updateAnimation.start()},s.prototype.layoutScalePanel=function(t){this.needsAutoScale()&&this.autoScale();var e=this._topPanel.layoutPanel(t,!0),i=this._bottomPanel.layoutPanel(t,!1),o=t.clone();return e&&o.cropTop(e),i&&o.cropBottom(i),o},s.prototype.layout=function(t,e){this._projectionFrame.copyFrom(e),(this.needsAutoScale()||this._wasAutoscale)&&(this._projectionFrame.applyPadding(this.chart.chartPanelsContainer.panelPadding),this.needsAutoScale()&&this.autoScale(),this._wasAutoscale=!1),this._calculateProjectionMetrics(),this._calibrator.calibrate(this),this._topPanel.layout(t,!0),this._bottomPanel.layout(t,!1)},s.prototype._canvasStartX=function(){return this._projectionFrame.left-this.chart.chartPanelsFrame.left-this.chart.chartPanelsContainer.panelPadding.left},s.prototype._textDrawBounds=function(){return{left:this.textPadding.left,top:null,width:this.chart.chartPanelsContainer.frame.width,height:null}},s.prototype.clear=function(){this._topPanel.clearPanel(),this._bottomPanel.clearPanel()},s.prototype.draw=function(){if(this._topPanel.draw(),this._bottomPanel.draw(),this.chart.showDrawings)for(var t=0,e=this.chart.chartPanels;t<e.length;t++)for(var i=0,o=e[t].drawings;i<o.length;i++){var r=o[i];r.selected||r.drawDateMarkers()}},s.prototype.applyAutoScroll=function(t){switch(t){case e.NEW_BAR:this._autoScroll(r.DateScaleAutoScrollMode.NEW_BAR);break;case e.TICK:this._autoScroll(r.DateScaleAutoScrollMode.TICK)}},s.prototype.onMoreHistoryRequestCompleted=function(){this._moreHistoryRequested=!1,this.chart.localize()},s.prototype._autoScroll=function(t){var e=this.chart,i=e.recordCount,o=this.lastVisibleRecord-i+1;if(e.state===r.ChartState.NORMAL)switch(this.autoScrollKind){case r.DateScaleAutoScrollKind.ALWAYS:o<0&&this.autoScrollMode===t&&this.scrollOnRecords(o);break;case r.DateScaleAutoScrollKind.VISIBLE_BAR:Math.ceil(this.lastVisibleRecord)+1>=i&&this.scrollOnRecords(-1);break;case r.DateScaleAutoScrollKind.HIDDEN_BAR:o<0&&this.scrollOnRecords(o)}},s.prototype._calculateVolumeOnProjection=function(t){for(var e=this._firstVisibleIndex,i=this._lastVisibleIndex+1,o=t.slice(e,i),r=this._percentValue(o),n=[],a=this.chart.dateScale.projectionFrame.width,l=0,s=o;l<s.length;l++){var c=a/100*(s[l]/r);n.push(c)}for(var h=[],u=0,f=t;u<f.length;u++){c=a/100*(f[u]/r);h.push(c)}var d=h.slice(0,e),p=h.slice(i,t.length-1),y=d.concat(n,p);this.columnValues.widths=y,this.columnValues.visibleColumnsWidths=n;var m=[],_=0;m.push(_);for(var C=e+1;C<i+1;C++)_+=this.columnValues.widths[C-1]/2+this.columnValues.widths[C]/2,m.push(_);this.columnValues.centers=m},s.prototype._percentValue=function(t){return t.reduce(function(t,e){return t+e},0)/100},s);function s(t){var e=i.call(this,t)||this;return e._updateAnimation=new r.Animation({context:e,recurring:!1,callback:e._onUpdateAnimationCallback}),e._projectionFrame=new r.Rect,e._columnWidth=0,e._formatter=new r.CustomTimeIntervalDateTimeFormat,e._moreHistoryRequested=!1,e.columnValues=null,e._projection=new r.Projection(e),e._topPanel=new r.DateScalePanel({dateScale:e,cssClass:o,visible:!1}),e._bottomPanel=new r.DateScalePanel({dateScale:e,cssClass:n}),e.loadState(t),e}r.DateScale=l}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(l){"use strict";var i,t="scxDateScale",s="scxDateScaleScroll",e=(i=l.HtmlControl,__extends(n,i),Object.defineProperty(n.prototype,"dateScale",{get:function(){return this._dateScale},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"chart",{get:function(){return this._dateScale&&this._dateScale.chart},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"cssClass",{get:function(){return this._cssClass},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visible",{get:function(){return this._isVisible},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"layer",{get:function(){return this._layer},enumerable:!0,configurable:!0}),n.prototype._initGestures=function(){return new l.GestureArray([new l.DoubleClickGesture({handler:this._handleDoubleClickGesture}),new l.PanGesture({handler:this._handlePanGesture,verticalMoveEnabled:!1}),new l.MouseWheelGesture({handler:this._handleMouseWheel})],this,this.hitTest)},n.prototype._handleDoubleClickGesture=function(){this.chart.setNeedsUpdate(),this.chart.setNeedsAutoScaleAll(),this.chart.update()},n.prototype._handlePanGesture=function(t,e){var i=this.chart,o=1===e.evt.which;if((!o||i.scrollEnabled)&&(o||i.zoomEnabled))switch(t.state){case l.GestureState.STARTED:i.rootDiv.addClass(s);break;case l.GestureState.FINISHED:i.rootDiv.removeClass(s);break;case l.GestureState.CONTINUED:var r=t.moveOffset.x,n=!1,a=!1,a=o?(n=this._dateScale.scrollOnPixels(r))&&this._dateScale.scrollKind===l.DateScaleScrollKind.AUTOSCALED:(n=this._dateScale.zoomOnPixels(r))&&this._dateScale.zoomKind===l.DateScaleZoomKind.AUTOSCALED;n&&i.setNeedsUpdate(a)}},n.prototype._handleMouseWheel=function(t,e){var i,o,r;this.chart.zoomEnabled&&(o=.05*(i=this.frame.width),r=e.pointerPosition.x/i,this.chart.dateScale._handleZoom(-t.delta*o,r))},n.prototype.applyTheme=function(){var t,e,i,o,r=this.container;r&&(i=!1!==(e=(t=this._dateScale.actualTheme).border).strokeEnabled,o=this._cssClass===this._dateScale.topPanelCssClass?"border-bottom":"border-top",i?r.css(o,e.width+"px "+e.lineStyle+" "+e.strokeColor):r.css(o,"none"),l.HtmlUtil.setBackground(r,!1!==t.fill.fillEnabled?t.fill.fillColor:n.TRANSPARENT))},n.prototype._getClientHeight=function(){var t=this._dateScale;return t.useManualHeight?t.manualHeight:l.HtmlUtil.getFontSize(t.actualTheme)+t.textPadding.bottom+t.majorTickMarkLength+1},n.prototype.hitTest=function(t){var e=this.frame;return!!e&&l.Geometry.isPointInsideOrNearRect(t,e)},n.prototype._createContainer=function(){return this.chart.rootDiv.scxAppend("div",t).addClass(this._cssClass)},n.prototype.layoutPanel=function(t,e){var i=this.container,o=null,r=!1!==this._dateScale.actualTheme.border.strokeEnabled;return this._isVisible?(i||(this._container=i=this._createContainer(),this.applyTheme()),i.outerWidth(t.width).innerHeight(this._getClientHeight()),(o=this.frame).left=t.left,o.width=t.width,o.height=i.outerHeight(),o.top=e?0:t.bottom-o.height,e||r||--o.top,i.css("left",o.left).css("top",o.top)):this._removeContainer(),o},n.prototype.layout=function(t,e){var i,o;this.layoutPanel(t,e),this._isVisible?(i=this.container,this._layer||(this._layer=new l.Layer({parent:i})),this._layer.size={width:i.width(),height:i.height()}):(o=this._layer)&&(o.destroy(),this._layer=null)},n.prototype.clearPanel=function(){var t,e;this._layer&&this._layer.canvas&&(t=this._layer.size.width,e=this._layer.size.height,this._layer.renderer.clearRect(0,0,t,e))},n.prototype.draw=function(){if(this._isVisible){var t=this._layer.renderer,e=this._dateScale,i=e.actualTheme,o=this._layer.size.height-e.textPadding.bottom;this.clearPanel(),t.save(),t.translate(.5,.5),t.textTheme(i.text),t.textOptions({baseline:l.TextBaseline.BOTTOM}),t.beginPath();for(var r=0,n=e.calibrator.majorTicks;r<n.length;r++){var a=n[r];a.text&&(t.textOptions({align:a.textAlign}),t.fillText(a.text,a.textX,o))}t.stroke(i.line),t.restore()}},n.TRANSPARENT="transparent",n);function n(t){var e=i.call(this)||this;if(e._isVisible=!0,!(t.dateScale instanceof l.DateScale))throw new TypeError("'config.dateScale' must be an instance of StockChartX.DateScale.");if(e._dateScale=t.dateScale,null==t.cssClass)throw new Error("'config.cssClass' is not specified.");return e._cssClass=t.cssClass,e._isVisible=null==t.visible||!!t.visible,e._initGestures(),e.chart.on(l.ChartEvent.THEME_CHANGED+".scxDateScalePanel",function(){e.applyTheme()}),e}l.DateScalePanel=e}(StockChartX=StockChartX||{}),function(e){"use strict";var t=(Object.defineProperty(i,"registeredCalibrators",{get:function(){return this._calibrators.registeredItems},enumerable:!0,configurable:!0}),i.register=function(t,e){"string"==typeof t?this._calibrators.register(t,e):this._calibrators.register(t.className,t)},i.deserialize=function(t){if(!t)return null;var e=this._calibrators.createInstance(t.className);return e.loadState(t),e},i._calibrators=new e.ClassRegistrar,i);function i(){}var o=(Object.defineProperty(r,"className",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"showVirtualDates",{get:function(){return this._showVirtualDates},set:function(t){this._showVirtualDates=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"majorTicks",{get:function(){return this._majorTicks},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"minorTicks",{get:function(){return this._minorTicks},enumerable:!0,configurable:!0}),r.prototype.calibrate=function(t){this._majorTicks.length=0,this._minorTicks.length=0,this._calibrateMajorTicks&&this._calibrateMajorTicks(t),this._calibrateMinorTicks()},r.prototype._calibrateMinorTicks=function(t){if(t)for(var e=this.majorTicks,i=0,o=e.length;i<o-1;i++)for(var r=e[i],n=(e[i+1].x-r.x)/(t+1),a=1;a<=t;a++)this.minorTicks.push({x:Math.round(r.x+a*n)})},r.prototype.saveState=function(){return{className:this.constructor.className,options:e.JsUtil.clone(this._options)}},r.prototype.loadState=function(t){this._options=t&&e.JsUtil.clone(t.options)||{}},r);function r(t){this._showVirtualDates=!0,this._majorTicks=[],this._minorTicks=[],this._options={},t&&this.loadState({options:t})}e.DateScaleCalibrator=o,e.JsUtil.applyMixins(o,[t])}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(x){"use strict";var i,t=(i=x.DateScaleCalibrator,__extends(e,i),Object.defineProperty(e,"className",{get:function(){return"StockChartX.AutoDateScaleCalibrator"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minLabelsOffset",{get:function(){var t=this._options.majorTicks;return t&&null!=t.minOffset?t.minOffset:e.defaults.majorTicks.minOffset},set:function(t){if(null!=t&&x.JsUtil.isNegativeNumber(t))throw new Error("Min labels offset must be greater or equal to 0.");var e=this._options;(e.majorTicks||(e.majorTicks={})).minOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minorTicksCount",{get:function(){var t=this._options.minorTicks;return t&&null!=t.count?t.count:e.defaults.minorTicks.count},set:function(t){if(null!=t&&x.JsUtil.isNegativeNumber(t))throw new Error("Ticks count must be a positive number or 0.");var e=this._options;(e.minorTicks||(e.minorTicks={})).count=t},enumerable:!0,configurable:!0}),e.prototype._calibrateMajorTicks=function(t){var e=t.getDateDataSeries().values,i=t.chart,o=t.projectionFrame,r=t.projection,n=r.recordByColumn(0),a=t.maxAllowedRecord,l=this.minLabelsOffset,s=t._textDrawBounds(),c=s.left,h=s.left+s.width,u=new Date(0),f=null,d=-1/0,p=x.DummyCanvasContext,y=i.chartPanelsContainer.panelsContentFrame.width;this._formatter.timeInterval=i.timeInterval,this._formatter.locale=i.locale,p.applyTextTheme(t.actualTheme.text);for(var m=p.textWidth("9");n<=a;){var _=0<=n&&n<e.length?e[n]:r.dateByRecord(n),C=this._labelDateString(_,u);if(C&&C!==f){var b=r.xByRecord(n);if(b<o.left)n++;else{if(y<=b)break;var g,S,v=C.length*m,w=b-v/2,P=void 0;if(w<d||(w=b-(v=p.textWidth(C))/2)<d?P=d+v/2:(g=b,S="center",w<c?(w=g=c,S="left"):h<w+v&&(w=(g=h)-v,S="right"),this.majorTicks.push({x:b,textX:g,textAlign:S,date:_,text:C}),d=w+v+l,P=Math.ceil(d),u=_,f=C),y<P)break;var k=r.recordByX(P)+1,n=n<k?k:n+1}}else n++}},e.prototype._calibrateMinorTicks=function(){i.prototype._calibrateMinorTicks.call(this,this.minorTicksCount)},e.prototype._labelDateString=function(t,e){if(t<=e)return null;var i=x.TimeSpan,o=this._formatter,r=o.timeInterval,n=t.getFullYear(),a=e.getFullYear();if(r>=i.MILLISECONDS_IN_YEAR)return n!==a?n.toString():null;var l=x.DateTimeFormatName,s=t.getMonth()+1,c=e.getMonth()+1;if(r>=i.MILLISECONDS_IN_MONTH)return n!==a||s!==c?o.formatWithFormatter(t,l.YEAR_MONTH):null;var h=t.getDate(),u=e.getDate();if(r>=i.MILLISECONDS_IN_DAY)return n!==a?o.formatWithFormatter(t,l.DATE):s!==c||h!==u?o.formatWithFormatter(t,l.MONTH_DAY):null;var f=t.getHours(),d=e.getHours(),p=t.getMinutes(),y=e.getMinutes();if(r>=i.MILLISECONDS_IN_MINUTE)return n!==a||s!==c||h!==u?o.formatWithFormatter(t,l.SHORT_DATE_TIME):f!==d||p!==y?o.formatWithFormatter(t,l.SHORT_TIME):null;var m=t.getSeconds(),_=e.getSeconds();if(r>=i.MILLISECONDS_IN_SECOND)return n!==a||s!==c||h!==u?o.formatWithFormatter(t,l.SHORT_DATE_TIME):f!==d||p!==y||m!==_?o.formatWithFormatter(t,l.LONG_TIME):null;var C=t.getMilliseconds(),b=e.getMilliseconds();return n!==a||s!==c||h!==u?o.formatWithFormatter(t,l.LONG_DATE_TIME):f!==d||p!==y||m!==_||C!==b?o.formatWithFormatter(t,l.LONG_TIME):null},e.defaults={majorTicks:{minOffset:30},minorTicks:{count:0}},e);function e(t){var e=i.call(this,t)||this;return e._formatter=new x.TimeIntervalDateTimeFormat,e}x.AutoDateScaleCalibrator=t,x.DateScaleCalibrator.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(T){"use strict";var i,t=(i=T.DateScaleCalibrator,__extends(e,i),Object.defineProperty(e,"className",{get:function(){return"StockChartX.CustomDateScaleCalibrator"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minLabelsOffset",{get:function(){var t=this._options.majorTicks;return t&&null!=t.minOffset?t.minOffset:e.defaults.majorTicks.minOffset},set:function(t){if(null!=t&&T.JsUtil.isNegativeNumber(t))throw new Error("Min labels offset must be greater or equal to 0.");var e=this._options;(e.majorTicks||(e.majorTicks={})).minOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minorTicksCount",{get:function(){var t=this._options.minorTicks;return t&&null!=t.count?t.count:e.defaults.minorTicks.count},set:function(t){if(null!=t&&T.JsUtil.isNegativeNumber(t))throw new Error("Ticks count must be a positive number or 0.");var e=this._options;(e.minorTicks||(e.minorTicks={})).count=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"monospaced",{get:function(){var t=this._options.majorTicks;return t&&null!=t.monospaced?t.monospaced:e.defaults.majorTicks.monospaced},set:function(t){var e=this._options;(e.majorTicks||(e.majorTicks={})).monospaced=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"customFormat",{get:function(){var t=this._options.majorTicks;return t?t.customFormat:null},set:function(t){var e=this._options.majorTicks;e&&(e.customFormat=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"customFormatter",{get:function(){var t=this._options.majorTicks;return t?t.customFormatter:null},set:function(t){var e=this._options.majorTicks;e&&(e.customFormatter=t)},enumerable:!0,configurable:!0}),e.prototype._customMajorFormat=function(t,e){var i=this._options.majorTicks;return i&&i.customFormat?i.customFormat(this,t,e):null},e.prototype._customMajorFormatter=function(t,e){var i=this._options.majorTicks;return i&&i.customFormatter?i.customFormatter(this,t,e):null},e.prototype._calibrateMajorTicks=function(t){var e,i,o=t.getDateDataSeries().values,r=t.chart,n=t.projectionFrame,a=t.projection,l=a.recordByColumn(0),s=t.maxAllowedRecord,c=this.minLabelsOffset,h=t._textDrawBounds(),u=h.left,f=h.left+h.width,d=n.left,p=T.DummyCanvasContext,y=t.chart.timeInterval,m=this.monospaced,_=r.chartPanelsContainer.panelsContentFrame.width,C=t.getDateDataSeries().lastValue;this._formatter.locale=r.locale,p.applyTextTheme(t.actualTheme.text);for(var b=p.textWidth("9");l<=s;){var g,S=0<=l&&l<o.length?o[l]:a.dateByRecord(l),v=this._customMajorFormatter(l,S);if(v||(v=(g=this._customMajorFormat(l,S))?this._formatter.format(S,g):this._labelDateString(S,i&&i.date,y)),v&&v!==(i&&i.text)){var w=a.xByRecord(l);if(w<n.left)l++;else{if(_<=w)break;var P,k,x,O=v.length*b,E=w-O/2,I=void 0;if(E<d?I=d+O/2:e&&w-i.x<e?I+=e-(w-i.x):(E=w-(O=p.textWidth(v))/2)<d?I=d+O/2:(P=w,k="center",E<u?(E=P=u,k="left"):f<E+O&&(E=(P=f)-O,k="right"),x={x:w,textX:P,textAlign:k,date:S,text:this.showVirtualDates||S<=C?v:null},this.majorTicks.push(x),m&&!e&&i&&(e=w-i.x),d=E+O+c,I=Math.ceil(d),i=x),_<I)break;var D=a.recordByX(I)+1,l=l<D?D:l+1}}else l++}},e.prototype._calibrateMinorTicks=function(){i.prototype._calibrateMinorTicks.call(this,this.minorTicksCount)},e.prototype._labelDateString=function(t,e,i){e=e||new Date(0);var o=this._findFormat(t,e,i);return o?this._formatter.format(t,o):null},e.prototype._findFormat=function(t,e,i){if(t<=e)return null;var o=T.TimeSpan,r={},n={};return r.year=t.getFullYear(),n.year=e.getFullYear(),i>=o.MILLISECONDS_IN_YEAR?this._yearPeriodicityFormat(r,n):(r.month=t.getMonth()+1,n.month=e.getMonth()+1,i>=o.MILLISECONDS_IN_MONTH?this._monthPeriodicityFormat(r,n):(r.day=t.getDate(),n.day=e.getDate(),i>=o.MILLISECONDS_IN_DAY?this._dayPeriodicityFormat(r,n):(r.hour=t.getHours(),n.hour=e.getHours(),i>=o.MILLISECONDS_IN_HOUR?this._hourPeriodicityFormat(r,n):(r.minute=t.getMinutes(),n.minute=e.getMinutes(),i>=o.MILLISECONDS_IN_MINUTE?this._minutePeriodicityFormat(r,n):(r.second=t.getSeconds(),n.second=e.getSeconds(),i>=o.MILLISECONDS_IN_SECOND?this._secondPeriodicityFormat(r,n):(r.minute=t.getMilliseconds(),n.minute=e.getMilliseconds(),this._millisecondPeriodicityFormat(r,n)))))))},e.prototype._yearPeriodicityFormat=function(t,e){return t.year!==e.year?"YYYY":null},e.prototype._monthPeriodicityFormat=function(t,e){return t.year!==e.year?1===t.month?"YYYY":"MMM YYYY":t.month!==e.month?"MMM":null},e.prototype._dayPeriodicityFormat=function(t,e){return t.year!==e.year?1===t.day?this._monthPeriodicityFormat(t,e):"D MMM YYYY":t.month!==e.month?1===t.day?"MMM":"D MMM":t.day!==e.day?"D":null},e.prototype._hourPeriodicityFormat=function(t,e,i){return void 0===i&&(i=!1),0===t.hour?this._dayPeriodicityFormat(t,e):t.year!==e.year?"D MMM YYYY HH:mm":t.month!==e.month||t.day!==e.day?"D MMM HH:mm":i||t.hour!==e.hour?"HH:mm":null},e.prototype._minutePeriodicityFormat=function(t,e,i){void 0===i&&(i=!1);var o=t.minute!==e.minute;return this._hourPeriodicityFormat(t,e,o)},e.prototype._secondPeriodicityFormat=function(t,e){var i=t.second!==e.second,o=this._minutePeriodicityFormat(t,e,i);return o&&0!==t.second&&(o+=":ss"),o},e.prototype._millisecondPeriodicityFormat=function(t,e){var i=this._secondPeriodicityFormat(t,e);return 0===t.millisecond||t.millisecond===e.millisecond?i:i?i+".SSS":"ss.SSS"},e.defaults={majorTicks:{minOffset:30,monospaced:!0},minorTicks:{count:0}},e);function e(t){var e=i.call(this,t)||this;return e._formatter=new T.CustomDateTimeFormat,e}T.CustomDateScaleCalibrator=t,T.DateScaleCalibrator.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(S){"use strict";var i,t=(i=S.DateScaleCalibrator,__extends(v,i),Object.defineProperty(v,"className",{get:function(){return"StockChartX.FixedDateScaleCalibrator"},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"majorTicksCount",{get:function(){var t=this._options.majorTicks;return t&&null!=t.count?t.count:v.defaults.majorTicks.count},set:function(t){if(null!=t&&S.JsUtil.isNegativeNumber(t))throw new Error("Ticks count must be a positive number.");var e=this._options;(e.majorTicks||(e.majorTicks={})).count=t},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"minorTicksCount",{get:function(){var t=this._options.minorTicks;return t&&null!=t.count?t.count:v.defaults.minorTicks.count},set:function(t){if(null!=t&&S.JsUtil.isNegativeNumber(t))throw new Error("Ticks count must be a positive number.");var e=this._options;(e.minorTicks||(e.minorTicks={})).count=t},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"majorTicksFormat",{get:function(){var t=this._options.majorTicks;return t&&t.format||v.defaults.majorTicks.format},set:function(t){var e=this._options;(e.majorTicks||(e.majorTicks={})).format=t},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"customFormat",{get:function(){var t=this._options.majorTicks;return t?t.customFormat:null},set:function(t){var e=this._options.majorTicks;e&&(e.customFormat=t)},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"customFormatter",{get:function(){var t=this._options.majorTicks;return t?t.customFormatter:null},set:function(t){var e=this._options.majorTicks;e&&(e.customFormatter=t)},enumerable:!0,configurable:!0}),v.prototype._calibrateMajorTicks=function(t){var e=t.projectionFrame,i=t._textDrawBounds(),o=i.left,r=i.left+i.width,n=t.projection,a=t.chart.chartPanelsContainer.panelPadding,l=e.left-a.left,s=e.right+a.right,c=S.DummyCanvasContext,h=this.majorTicksCount,u=(s-l)/(h-1),f=this.majorTicksFormat;(f=f||{}).other||(f.other=v._createAutoFormat(t.chart)),c.applyTextTheme(t.actualTheme.text);for(var d=0;d<h;d++){var p=l+d*u;this._updateFormatterForLabel(d,d===h-1,f);var y,m=n.dateByX(p),_=this._customMajorFormatter(d,m);_||(y=this._customMajorFormat(d,m),_=this._formatter.format(m,y));var C=c.textWidth(_),b="center",g=p;g-C/2<o?(g=o,b="left"):r<g+C/2&&(g=r,b="right"),this.majorTicks.push({x:p,textX:p,textAlign:b,date:m,text:_})}},v.prototype._customMajorFormat=function(t,e){var i=this._options.majorTicks;return i&&i.customFormat?i.customFormat(this,t,e):null},v.prototype._customMajorFormatter=function(t,e){var i=this._options.majorTicks;return i&&i.customFormatter?i.customFormatter(this,t,e):null},v.prototype._calibrateMinorTicks=function(){i.prototype._calibrateMinorTicks.call(this,this.minorTicksCount)},v.prototype._updateFormatterForLabel=function(t,e,i){var o=e?i.last||i.other:0===t&&i.first||i.other;this._formatter.formatString=o},v._createAutoFormat=function(t){var e=t.timeInterval,i=e>=S.TimeSpan.MILLISECONDS_IN_YEAR?"YYYY":e>=S.TimeSpan.MILLISECONDS_IN_MONTH?"YYYY MMM":e>=S.TimeSpan.MILLISECONDS_IN_DAY?"YYYY-MM-DD":e>=S.TimeSpan.MILLISECONDS_IN_MINUTE?"YYYY-MM-DD HH:mm":e>=S.TimeSpan.MILLISECONDS_IN_SECOND?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD HH:mm:ss.SSS";return i},v.defaults={majorTicks:{count:3},minorTicks:{count:0}},v);function v(t){var e=i.call(this,t)||this;return e._formatter=new S.CustomDateTimeFormat,e}S.FixedDateScaleCalibrator=t,S.DateScaleCalibrator.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(i){"use strict";var o,t=jQuery,r="scxLeftValueScale",n="scxRightValueScale",e=(o=i.ChartComponent,__extends(a,o),Object.defineProperty(a.prototype,"leftPanel",{get:function(){return this._leftPanel},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rightPanel",{get:function(){return this._rightPanel},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"leftPanelCssClass",{get:function(){return r},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rightPanelCssClass",{get:function(){return n},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"useManualWidth",{get:function(){return this._options.useManualWidth},set:function(t){this._options.useManualWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"manualWidth",{get:function(){return this._options.width},set:function(t){if(!i.JsUtil.isFiniteNumber(t)||t<=0)throw new Error("Width must be greater than 0.");this._options.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"leftPanelVisible",{get:function(){return this._options.showLeftPanel},set:function(t){this._leftPanel.visible=this._options.showLeftPanel=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rightPanelVisible",{get:function(){return this._options.showRightPanel},set:function(t){this._rightPanel.visible=this._options.showRightPanel=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"index",{get:function(){return this.chart.valueScales.indexOf(this)},enumerable:!0,configurable:!0}),a.prototype.saveState=function(){return t.extend(!0,{},this._options)},a.prototype.loadState=function(t){t=t||{},this._options={},this.leftPanelVisible=void 0!==t.showLeftPanel&&t.showLeftPanel,this.rightPanelVisible=void 0===t.showRightPanel||t.showRightPanel,this.manualWidth=t.width||100,this.useManualWidth=void 0!==t.useManualWidth&&t.useManualWidth},a.prototype.layout=function(t){var e=this._leftPanel.layout(t,!0),i=this._rightPanel.layout(t,!1),o=t.clone();return e&&o.cropLeft(e),i&&o.cropRight(i),o},a.prototype.destroy=function(){this.leftPanel.destroy(),this.rightPanel.destroy(),o.prototype.destroy.call(this)},a);function a(t){var e=o.call(this,t)||this;return e._options=null,e._leftPanel=new i.ValueScalePanel({valueScale:e,cssClass:r}),e._rightPanel=new i.ValueScalePanel({valueScale:e,cssClass:n}),e.loadState(t),e}i.ValueScale=e}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(n){"use strict";var i,t=(i=n.HtmlControl,__extends(a,i),Object.defineProperty(a.prototype,"valueScale",{get:function(){return this._valueScale},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"cssClass",{get:function(){return this._cssClass},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"visible",{get:function(){return this._isVisible},set:function(t){this._isVisible=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"chart",{get:function(){return this._valueScale&&this._valueScale.chart},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"size",{get:function(){var t=this.container;return t&&t.scxSize()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"contentSize",{get:function(){var t=this.container;return t&&t.scxContentSize()},enumerable:!0,configurable:!0}),a.prototype._createContainer=function(){return this.chart.chartPanelsContainer.container.scxPrepend("div","scxValueScale").addClass(this._cssClass)},a.prototype.layout=function(t,e){var i=this.container,o=null;return this._isVisible?(i||(this._container=i=this._createContainer(),this.applyTheme()),i.width(this.getWidth()).outerHeight(t.height),(o=this.frame).width=i.outerWidth(),o.left=e?t.left:t.right-o.width,o.height=t.height,i.css("left",o.left)):this._removeContainer(),o},a.prototype.getWidth=function(){var t=this._valueScale;if(t.useManualWidth)return t.manualWidth;for(var e=0,i=0,o=this.chart.chartPanels;i<o.length;i++)var r=o[i],e=Math.max(r.preferredValueScaleWidth(this._valueScale),e);return e},a.prototype.applyTheme=function(){var t,e,i,o,r=this.container;r&&(i=!1!==(e=(t=this.chart.theme.valueScale).border).strokeEnabled,o=this._cssClass===this._valueScale.leftPanelCssClass?"border-right":"border-left",i?r.css(o,e.width+"px "+e.lineStyle+" "+e.strokeColor):r.css(o,"none"),n.HtmlUtil.setBackground(r,!1!==t.fill.fillEnabled?t.fill.fillColor:a.TRANSPARENT))},a.TRANSPARENT="transparent",a);function a(t){var e=i.call(this)||this;if(e._isVisible=!0,!t)throw new Error("Config is not specified.");if(!(t.valueScale instanceof n.ValueScale))throw new TypeError("Config.valueScale must be an instance of StockChartX.ValueScale");if(e._valueScale=t.valueScale,!t.cssClass)throw new Error("'config.cssClass' is not specified.");return e._cssClass=t.cssClass,e._isVisible=null==t.visible||t.visible,e.chart.on(n.ChartEvent.THEME_CHANGED+".scxValueScalePanel",function(){e.applyTheme()}),e}n.ValueScalePanel=t}(StockChartX=StockChartX||{}),function(e){"use strict";var t=(Object.defineProperty(i,"registeredCalibrators",{get:function(){return this._calibrators.registeredItems},enumerable:!0,configurable:!0}),i.register=function(t,e){"string"==typeof t?this._calibrators.register(t,e):this._calibrators.register(t.className,t)},i.deserialize=function(t){if(!t)return null;var e=this._calibrators.createInstance(t.className);return e.loadState(t),e},i._calibrators=new e.ClassRegistrar,i);function i(){}var o=(Object.defineProperty(r,"className",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"majorTicks",{get:function(){return this._majorTicks},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"minorTicks",{get:function(){return this._minorTicks},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"divider",{get:function(){return this._options.divider||1},set:function(t){this._options.divider=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"suffix",{get:function(){return this._options.suffix||""},set:function(t){this._options.suffix=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"formater",{get:function(){return this._formatter},set:function(t){this._formatter=t},enumerable:!0,configurable:!0}),r.prototype.calibrate=function(t){this._majorTicks.length=0,this._minorTicks.length=0,this._calibrateMajorTicks&&this._calibrateMajorTicks(t),this._calibrateMinorTicks()},r.prototype.formatValue=function(t){return this._formatter.format(t/this.divider).replace(","," ")+this.suffix},r.prototype._calibrateMinorTicks=function(t){if(t)for(var e=this.majorTicks,i=0,o=e.length;i<o-1;i++)for(var r=e[i],n=(e[i+1].y-r.y)/(t+1),a=1;a<=t;a++)this.minorTicks.push({y:Math.round(r.y+a*n)})},r.prototype.saveState=function(){return{className:this.constructor.className,options:e.JsUtil.clone(this._options)}},r.prototype.loadState=function(t){this._options=t&&e.JsUtil.clone(t.options)||{}},r);function r(t){this._majorTicks=[],this._minorTicks=[],this._options={},t&&this.loadState({options:t}),this._formatter=t&&t.formatter||new e.CustomNumberFormat("%.2f")}e.ValueScaleCalibrator=o,e.JsUtil.applyMixins(o,[t])}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(f){"use strict";var t,e=(t=f.ValueScaleCalibrator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"StockChartX.AutoValueScaleCalibrator"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minValuesOffset",{get:function(){var t=this._options.majorTicks;return null!=t&&null!=t.minOffset?t.minOffset:i.defaults.majorTicks.minOffset},set:function(t){if(null!=t&&f.JsUtil.isNegativeNumber(t))throw new Error("Values offset must be a value greater or equal to 0.");var e=this._options;(e.majorTicks||(e.majorTicks={})).minOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minorTicksCount",{get:function(){var t=this._options.minorTicks;return t&&null!=t.count?t.count:i.defaults.minorTicks.count},set:function(t){if(null!=t&&f.JsUtil.isNegativeNumber(t))throw new Error("Tick count must be greater or equal to 0.");var e=this._options;(e.minorTicks||(e.minorTicks={})).count=t},enumerable:!0,configurable:!0}),i.prototype._calibrateMajorTicks=function(t){for(var e=t.actualTheme,i=f.HtmlUtil.getFontSize(e.text),o=this.minValuesOffset,r=t.padding,n=t.chartPanel.panelPadding,a=Math.round(Math.max(r.top,n.top)+i/2),l=t.chartPanel.layer.canvas.height()-r.bottom-i/2,s=t.projection,c=null;a<l;){var h=s.valueByY(a),u=t.formatValue(h);u!==c&&(this.majorTicks.push({y:a,value:h,text:u}),c=u),a+=i+o}},i.prototype._calibrateMinorTicks=function(){t.prototype._calibrateMinorTicks.call(this,this.minorTicksCount)},i.defaults={majorTicks:{minOffset:10},minorTicks:{count:0}},i);function i(){return null!==t&&t.apply(this,arguments)||this}f.AutoValueScaleCalibrator=e,f.ValueScaleCalibrator.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(y){"use strict";var i,t=(i=y.ValueScaleCalibrator,__extends(e,i),Object.defineProperty(e,"className",{get:function(){return"StockChartX.PercentValueScaleCalibrator"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minValuesOffset",{get:function(){var t=this._options.majorTicks;return null!=t&&null!=t.minOffset?t.minOffset:y.AutoValueScaleCalibrator.defaults.majorTicks.minOffset},set:function(t){if(null!=t&&y.JsUtil.isNegativeNumber(t))throw new Error("Values offset must be a value greater or equal to 0.");var e=this._options;(e.majorTicks||(e.majorTicks={})).minOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"basePriceHolder",{get:function(){return this._basePriceHolder},set:function(t){this._basePriceHolder=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"basePrice",{get:function(){return this._basePriceHolder&&this._basePriceHolder.basePrice||0},enumerable:!0,configurable:!0}),e.prototype._calibrateMajorTicks=function(t){var e=t.actualTheme,i=y.HtmlUtil.getFontSize(e.text),o=this.minValuesOffset,r=t.padding,n=t.chartPanel.chartPanelsContainer.panelPadding,a=Math.round(Math.min(r.top,n.top)),l=t.chartPanel.layer.canvas.height(),s=t.projection,c=this.basePrice,h=s.yByValue(c),u=h,f=null;for(this.majorTicks.push({y:u,value:s.valueByY(u),text:"0 %"}),u=h+(i+o);u<l;){var d=s.valueByY(u);(p=t.formatValue(d))!==f&&(this.majorTicks.push({y:u,value:d,text:p}),f=p),u+=i+o}for(u=h-(i+o);a<u;){var p,d=s.valueByY(u);(p=t.formatValue(d))!==f&&(this.majorTicks.unshift({y:u,value:d,text:p}),f=p),u-=i+o}},e.prototype.formatValue=function(t){return i.prototype.formatValue.call(this,(t-this.basePrice)/this.basePrice*100)},e.defaults={majorTicks:{minOffset:10}},e);function e(t){var e=i.call(this)||this;return e._basePriceHolder=t&&t.basePriceHolder,e.suffix=" %",e}y.PercentValueScaleCalibrator=t,y.ValueScaleCalibrator.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(i){"use strict";var t,e=(t=i.ValueScaleCalibrator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"StockChartX.FixedValueScaleCalibrator"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"majorTicksCount",{get:function(){var t=this._options.majorTicks;return t&&null!=t.count?t.count:o.defaults.majorTicks.count},set:function(t){if(null!=t&&i.JsUtil.isNegativeNumber(t))throw new Error("Tick count must be greater or equal to 0.");var e=this._options;(e.majorTicks||(e.majorTicks={})).count=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"minorTicksCount",{get:function(){var t=this._options.minorTicks;return t&&null!=t.count?t.count:o.defaults.minorTicks.count},set:function(t){if(null!=t&&i.JsUtil.isNegativeNumber(t))throw new Error("Tick count must be greater or equal to 0.");var e=this._options;(e.minorTicks||(e.minorTicks={})).count=t},enumerable:!0,configurable:!0}),o.prototype._calibrateMajorTicks=function(t){for(var e=t.padding,i=t.chartPanel.panelPadding,o=Math.max(e.top,i.top),r=t.chartPanel.layer.canvas.height()-Math.max(e.bottom,i.bottom)-o,n=t.projection,a=this.majorTicksCount,l=r/(a-1),s=0;s<a;s++){var c=Math.round(o+s*l),h=n.valueByY(c);this.majorTicks.push({y:c,value:h,text:t.formatValue(h)})}},o.prototype._calibrateMinorTicks=function(){t.prototype._calibrateMinorTicks.call(this,this.minorTicksCount)},o.defaults={majorTicks:{count:3},minorTicks:{count:0}},o);function o(){return null!==t&&t.apply(this,arguments)||this}i.FixedValueScaleCalibrator=e,i.ValueScaleCalibrator.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(y){"use strict";var e,t=(e=y.ValueScaleCalibrator,__extends(i,e),Object.defineProperty(i,"className",{get:function(){return"StockChartX.IntervalValueScaleCalibrator"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"interval",{get:function(){var t=this._options.majorTicks;return t&&t.interval?t.interval:i.defaults.majorTicks.interval},set:function(t){if(null!=t){if(!y.JsUtil.isPositiveNumber(t))throw new Error("Interval must be a value greater than 0.");if(t<1e-8)throw new Error("Interval is too small.")}var e=this._options;(e.majorTicks||(e.majorTicks={})).interval=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minValuesOffset",{get:function(){var t=this._options.majorTicks;return t&&null!=t.minOffset?t.minOffset:i.defaults.majorTicks.minOffset},set:function(t){if(null!=t&&y.JsUtil.isNegativeNumber(t))throw new Error("Values offset must be a value greater or equal to 0.");var e=this._options;(e.majorTicks||(e.majorTicks={})).minOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minorTicksCount",{get:function(){var t=this._options.minorTicks;return t&&null!=t.count?t.count:i.defaults.minorTicks.count},set:function(t){if(null!=t&&y.JsUtil.isNegativeNumber(t))throw new Error("Tick count must be greater or equal to 0.");var e=this._options;(e.minorTicks||(e.minorTicks={})).count=t},enumerable:!0,configurable:!0}),i.prototype._calibrateMajorTicks=function(t){this._calibrateIntervalMajorTicks(t),this.majorTicks.length<=1&&(this.majorTicks.length=0,this._calibrateRangeMajorTicks(t))},i.prototype._calibrateMinorTicks=function(){e.prototype._calibrateMinorTicks.call(this,this.minorTicksCount)},i.prototype._calibrateIntervalMajorTicks=function(t){var e=t.chart.instrument,i=e?e.tickSize:this.interval;if(!(i<1e-8||t.maxVisibleValue-t.minVisibleValue<=i))for(var o,r=y.HtmlUtil.getFontSize(t.actualTheme.text),n=r+this.minValuesOffset,a=t.padding,l=t.chartPanel.layer.size.height-a.bottom-r/2,s=t.projection,c=s.valueByY(0),h=Math.round(a.top+r/2),u=h,f=null;h<l;){var d=u;do{if(c<=(o=i*Math.trunc(s.valueByY(h)/i))&&(o=c-i),c=o,u<=(h=Math.round(s.yByValue(o)))){d=h;break}d=h=d+1}while(h<l);if(u=h+n,l<=h)break;var p=this.divider?this.formatValue(o):t.formatValue(o);p!==f&&(this.majorTicks.push({y:h,value:o,text:p}),f=p),h=u}},i.prototype._calibrateRangeMajorTicks=function(t){var e,i,o,r,n=y.HtmlUtil.getFontSize(t.actualTheme.text),a=n/2,l=n+this.minValuesOffset,s=t.padding,c=t.chartPanel.layer.size.height,h=s.top+a,u=c-s.bottom-a,f=t.projection;u-h<l?(e=c/2,i=f.valueByY(e),this.majorTicks.push({y:e,value:i,text:t.formatValue(i)})):(o=f.valueByY(h),this.majorTicks.push({y:h,value:o,text:t.formatValue(o)}),r=f.valueByY(u),this.majorTicks.push({y:u,value:r,text:t.formatValue(r)}))},i.defaults={majorTicks:{interval:.05,minOffset:20},minorTicks:{count:0}},i);function i(t){return e.call(this,t)||this}y.IntervalValueScaleCalibrator=t,y.ValueScaleCalibrator.register(t)}(StockChartX=StockChartX||{}),function(u){"use strict";var t=(Object.defineProperty(e.prototype,"textOffset",{get:function(){var t=this._textOffset;return null!=t?t:e.defaults.textOffset},set:function(t){if(null!=t&&u.JsUtil.isNegativeNumber(t))throw new Error("Text offset must be greater or equal to 0.");this._textOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"theme",{get:function(){return this._theme},set:function(t){this._theme=t},enumerable:!0,configurable:!0}),e.prototype.draw=function(t,e,i){var o,r,n,a,l,s,c=e.leftFrame,h=e.rightFrame;(c||h)&&(i=i||this.theme,o=e.chartPanel.layer.renderer,r=e.formatValue(t),n=e.projection.yByValue(t),a=this.textOffset,l=i.text.fontSize/2+1,o.save(),e.clip(),o.textOptions({baseline:u.TextBaseline.MIDDLE}),o.beginPath(),c&&(s=c.right-1,o.polygon(s,n,s-l,n+l,c.left,n+l,c.left,n-l,s-l,n-l),o.fillStroke(i.fill,i.line),o.textOptions({align:u.TextAlign.RIGHT}),o.fillText(r,c.right-a,n,i.text)),h&&(s=h.right-1,o.polygon(h.left,n,h.left+l,n-l,s,n-l,s,n+l,h.left+l,n+l),o.fillStroke(i.fill,i.line),o.textOptions({align:u.TextAlign.LEFT}),o.fillText(r,h.left+a,n,i.text)),o.restore())},e.defaults={textOffset:8},e);function e(){}u.ValueMarker=t}(StockChartX=StockChartX||{}),function(c){"use strict";var t=(Object.defineProperty(e.prototype,"theme",{get:function(){return this._theme},set:function(t){this._theme=t},enumerable:!0,configurable:!0}),e.prototype.draw=function(t,e){function i(t){var e=t.layer.renderer;e.rectPath(l,0,s,t.frame.height),e.fillStroke(r.fill,r.stroke),e.textOptions({align:c.TextAlign.LEFT,baseline:c.TextBaseline.MIDDLE}),e.fillText(o,a,t.frame.height-n.height,r.text)}var o=e.formatDate(t),r=this.theme,n=c.DummyCanvasContext.measureText(o,r.text),a=e.projection.xByDate(t)-n.width/2,l=a-5,s=n.width+10;e.bottomPanelVisible&&i(e.bottomPanel),e.topPanelVisible&&i(e.topPanel)},e);function e(){}c.DateMarker=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(o){"use strict";var i,t=(i=o.ChartEventsExtender,__extends(e,i),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this._tooltip},set:function(t){null!=t&&(this._tooltip=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chartPanel",{get:function(){return this._panel},set:function(t){var e,i=this._panel;if(i!==t){if(t&&!(t instanceof o.ChartPanel))throw new TypeError("Panel must be an instance of StockChartX.ChartPanel.");this._panel=t,this._onChartPanelChanged(i),!t||this._valueScale||(e=this._options.valueScaleIndex)&&(this.valueScale=this.chart.valueScales[e])}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderer",{get:function(){if(this._panel)return this._panel.layer.renderer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chart",{get:function(){var t=this._panel;return t&&t.chart},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueScale",{get:function(){return this._valueScale||this.chart.valueScale},set:function(t){var e=this._valueScale;e!==t&&(this._valueScale=t,this._onValueScaleChanged(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panelValueScale",{get:function(){return this._panel.getValueScale(this.valueScale)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"projection",{get:function(){return this._panel&&this._panel.getProjection(this.valueScale)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._options.visible},set:function(t){var e=this.visible;e!==t&&(this._options.visible=t,this._onVisibleChanged(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._options.zIndex},set:function(t){if(!o.JsUtil.isFiniteNumber(t))throw new Error("Z-index must be a finite number.");this._options.zIndex=t},enumerable:!0,configurable:!0}),e.prototype._setOption=function(t,e,i){var o=this._options,r=o[t];r!==e&&(o[t]=e,i&&this.fire(i,e,r))},e.prototype._onChartPanelChanged=function(t){},e.prototype._onValueScaleChanged=function(t){},e.prototype._onVisibleChanged=function(t){},e.prototype.addChartCssClass=function(t){var e=this.chart;e&&e.addCssClass(t)},e.prototype.removeChartCssClass=function(t){var e=this.chart;e&&e.removeCssClass(t)},e.prototype.changeCursor=function(t){this._prevCursor&&this.removeChartCssClass(this._prevCursor),t&&this.addChartCssClass(t),this._prevCursor=t},e.prototype.saveState=function(){var t={options:o.JsUtil.clone(this._options),tooltip:this.tooltip.saveState()};return this.chartPanel&&(t.panelIndex=this.chartPanel.getIndex()),this.valueScale&&(t.valueScaleIndex=this.valueScale.index),t},e.prototype.loadState=function(t){var e=this.suppressEvents();t=t||{},this._options=t.options||{},this.tooltip.loadState(t.tooltip),this.suppressEvents(e)},e.prototype.draw=function(){},e.prototype.drawValueMarkers=function(){},e.prototype.showTooltip=function(t){var e,i,o;t&&(i=(e=this.chartPanel).container.scxLocalToClientPoint(t.x,t.y),(o=this.tooltip).layoutRect={top:this.chart.rootDiv.offset().top,left:e.container.offset().left+e.contentFrame.left,width:e.contentFrame.width,height:this.chart.getBounds().height},o.visible?o.moveTo(i):o.show(i))},e.prototype.hideTooltip=function(){this.tooltip.hide()},e.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),this.chartPanel=null},e);function e(t){var e=i.call(this)||this;return e._options={},e._tooltip=new o.UI.Tooltip({parent:e}),e.loadState(t),e}o.ChartPanelObject=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(f){"use strict";var n,c=jQuery,t=".scxPanelsContainer",e=(n=f.ChartHtmlControl,__extends(i,n),Object.defineProperty(i.prototype,"panels",{get:function(){return this._panels},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"newPanelHeightRatio",{get:function(){return this._options.newPanelHeightRatio},set:function(t){if(!f.JsUtil.isPositiveNumber(t)||1<=t)throw new Error("Ratio must be a number in range (0..1)");this._options.newPanelHeightRatio=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"panelPadding",{get:function(){return this._options.panelPadding},set:function(t){this._options.panelPadding=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"panelsContentFrame",{get:function(){return this._panelsContentFrame},enumerable:!0,configurable:!0}),i.prototype._initGestures=function(){return new f.GestureArray([new f.MouseHoverGesture({handler:this._handleMouseHoverGesture,hitTest:this._mouseHoverHitTest})],this)},i.prototype._subscribe=function(){var i=this;this.chart.on(f.ChartEvent.THEME_CHANGED+t,function(){for(var t=0,e=i._splitters;t<e.length;t++){e[t].invalidateTheme()}})},i.prototype._unsubscribe=function(){this.chart.off(t,this)},i.prototype.handleEvent=function(t){for(var e=0,i=this._splitters;e<i.length;e++){if(i[e].handleEvent(t))return!0}n.prototype.handleEvent.call(this,t),t.pointerPosition.x-=this.frame.left,t.pointerPosition.y-=this.frame.top;for(var o=0,r=this._panels;o<r.length;o++){if(r[o].handleEvent(t))return!0}return!1},i.prototype._handleMouseHoverGesture=function(t,e){this.chart.crossHair.handleMouseHoverGesture(t,e)},i.prototype._mouseHoverHitTest=function(t){return this._panelsContentFrame.containsPoint(t)},i.prototype.addPanel=function(t,e,i){var o,r,n=this._panels,a=e||this.newPanelHeightRatio,l=new f.ChartPanel({chartPanelsContainer:this,options:{heightRatio:a}});try{i&&0<n.length&&(r=(o=this.chart.mainPanel).heightRatio-a)>=o.minHeightRatio?o.heightRatio=r:this._adjustHeightRatiosToEncloseNewRatio(a)}catch(t){var s=this._availableHeightRatio();if(!(0<s&&s>=l.minHeightRatio))throw t;l.heightRatio=s}return null==t?n.push(l):n.splice(t,0,l),this._updateSplitters(),this.chart.fireValueChanged(f.ChartEvent.PANEL_ADDED,l),l},i.prototype.removePanel=function(t){var e="number"==typeof t?this._panels[t]:t,i=this.chart,o=i.mainPanel;if(e===o)throw new Error("Main panel cannot be removed.");for(var r=this._panels,n=0;n<r.length;n++)if(r[n]===e){var a=i.selectedObject;a&&a.chartPanel===e&&i.selectObject(null),i.removeIndicators(e.indicators,!1);var l=o.heightRatio+e.heightRatio;o.heightRatio=Math.min(Math.roundToDecimals(l,8),1),r.splice(n,1),e.destroy(),this._updateSplitters(),i.fireValueChanged(f.ChartEvent.PANEL_REMOVED,e);break}this.chart.setNeedsUpdate(!0)},i.prototype.movePanel=function(t,e){if(!f.JsUtil.isFiniteNumber(e))throw new TypeError("Offset must be a number.");for(var i=this._panels,o=0;o<i.length;o++)if(i[o]===t){var r=Math.min(Math.max(o-e,0),i.length-1);r!==o&&(i.splice(o,1),i.splice(r,0,t));break}this._updateSplitters()},i.prototype.totalPanelsHeight=function(){var t=this.container.scxContentSize(),e=f.ChartPanelSplitter.getHeight();return t.height-e*(this._panels.length-1)},i.prototype.findPanelAt=function(t){t-=this.frame.top;for(var e=0,i=this._panels;e<i.length;e++){var o=i[e],r=o.frame;if(t>=r.top&&t<=r.bottom&&o.visible)return o}return null},i.prototype.setPanelHeightRatio=function(t,e){var i,o=this.chart.mainPanel;t===o?t.heightRatio=e:(i=t.heightRatio,t.heightRatio=e,o.heightRatio-=t.heightRatio-i)},i.prototype._availableHeightRatio=function(){return 1-this._panels.reduce(function(t,e){return t+e.heightRatio},0)},i.prototype._adjustHeightRatiosToEncloseNewRatio=function(t){for(var e=this._panels,i=e.map(function(t){return t.heightRatio});;){var o=t-this._availableHeightRatio();if(o<=1e-5)break;for(var r=!1,n=0,a=e;n<a.length;n++){var l=a[n],s=l.heightRatio-o*l.heightRatio;s>=l.minHeightRatio&&(l.heightRatio=s,r=!0)}if(!r){for(var c=0;c<i.length;c++)e[c].heightRatio=i[c];throw new Error("Insufficient height. Other panels use too much height. You have to update minimum height weight of existing panels to free some space.")}}},i.prototype._updateSplitters=function(){var t=this._panels,e=this._splitters,i=t.length-1,o=e.length-1-i;if(0<=o){for(var r=0,n=e;r<n.length;r++){n[r].destroy()}e.splice(o,e.length-o)}for(var a=0;a<i;a++){var l=a>=e.length,s=l?new f.ChartPanelSplitter:e[a];s.setPanels(a,t[a],t[a+1]),l&&e.push(s)}},i.prototype.saveState=function(){var t=f.JsUtil.clone(this._options);t.panels=[];for(var e=0,i=this._panels;e<i.length;e++){var o=i[e];t.panels.push(o.saveState())}return t},i.prototype.loadState=function(t){t=t||{},this._options={},this.newPanelHeightRatio=t.newPanelHeightRatio||.2,this.panelPadding=t.panelPadding||{left:5,top:10,right:5,bottom:10};for(var e=this._panels,i=0,o=e;i<o.length;i++){(s=o[i]).destroy()}if(e.length=0,t.panels)for(var r=0,n=t.panels;r<n.length;r++){var a=n[r],l=c.extend({chartPanelsContainer:this},a),s=new f.ChartPanel(l);e.push(s)}this._updateSplitters()},i.prototype._createContainer=function(){return this.chart.rootDiv.scxAppend("div","scxPanelsContainer")},i.prototype.setNeedsAutoScale=function(){for(var t=0,e=this._panels;t<e.length;t++){e[t].setNeedsAutoScale()}},i.prototype.layoutScalePanel=function(t){n.prototype.layout.call(this,t);var e=this.container.scxContentSize(),i=this._panelsContentFrame;i.left=t.left,i.top=t.top,i.width=e.width,i.height=e.height;for(var o=this.chart.valueScales,r=o.length-1;0<=r;r--)i=o[r].layout(i);return this._panelsContentFrame=i,this._panelsContentFrame.width-=this.chart.getTradingPanelWidth(),new f.Rect({left:i.left,top:i.top,width:i.width,height:t.height})},i.prototype.layout=function(t){for(var e,i=0,o=this.panels;i<o.length;i++){var r=o[i];if(1===r.state){e=r;break}}e?this.layoutMaxPanel(e):this.layoutNormalPanels()},i.prototype.layoutMaxPanel=function(t){for(var e=0,i=this.panels;e<i.length;e++){var o=i[e];o.visible=o===t}var r=this.totalPanelsHeight(),n=this.container.scxContentSize(),a=new f.Rect({left:0,top:0,width:n.width,height:r});t.layout(a);for(var l=0,s=this._splitters;l<s.length;l++){s[l].destroy()}this._splitters=[]},i.prototype.layoutNormalPanels=function(){this._updateSplitters();for(var t=0,e=this.panels;t<e.length;t++){(c=e[t]).visible=!0}for(var i=this.container.scxContentSize(),o=f.ChartPanelSplitter.getHeight(),r=this._panels.length,n=this.totalPanelsHeight(),a=0,l=0;l<r;l++){var s,c=this._panels[l],h=Math.round(n*c.heightRatio),u=new f.Rect({left:0,top:a,width:i.width,height:h});a+=h,c.layout(u),l<r-1&&(s=new f.Rect({left:0,top:a,width:i.width,height:o}),this._splitters[l].layout(s),a+=o)}},i.prototype.layoutSplitterPanels=function(t){function e(t){t.frame.height=Math.round(i*t.heightRatio),t.setNeedsUpdate()}var i=this.totalPanelsHeight(),o=t.topPanel;e(o);var r=t.frame;r.top=o.frame.bottom,t.layout(r);var n=t.bottomPanel;n.frame.top=r.top+f.ChartPanelSplitter.getHeight(),e(n)},i.prototype.draw=function(){for(var t=0,e=this._panels;t<e.length;t++){var i=e[t];i.visible&&i.draw()}},i.prototype.destroy=function(){for(var t=0,e=this._panels;t<e.length;t++){e[t].destroy()}for(var i=0,o=this._splitters;i<o.length;i++){o[i].destroy()}n.prototype.destroy.call(this)},i);function i(t){var e=n.call(this,t)||this;return e._panels=[],e._splitters=[],e._options={},e._panelsContentFrame=new f.Rect,e.loadState(t),0===e._panels.length&&e._panels.push(new f.ChartPanel({chartPanelsContainer:e})),e}f.ChartPanelsContainer=e}(StockChartX=StockChartX||{}),function(e){"use strict";var r="scxPanelOptions",n="scxPanelTitleIcon",a="scxPanelClose",l="scxPanelMoveUp",s="scxPanelMoveDown",c="scxPanelMaximize",h="scxPanelRestore",u="scxPanelSettings",f="scxPanelScrollToLast",t=(i.prototype.layout=function(t){var e=this._panel,i=e.chart.chartPanels.length;this._options||this._createControls(t);var o,r,n=1===e.state,a=e===e.chart.mainPanel;a&&(o=e.chart.recordCount,r=e.chart.lastVisibleRecord<o-1?"inline":"none",this._scrollToLast.css("display",r)),this._options.css("right",e.chart.getContentRightMargin()+5),this._moveUp.css("display","none"),this._moveDown.css("display","none"),this._close.css("display",a?"none":"inline-block"),this._restore.css("display",n&&1<i?"inline-block":"none"),this._maximize.css("display",n||i<2?"none":"inline-block"),this._settings.css("display",!a&&e.indicators.some(function(t){return t.allowSettingsDialog})?"inline-block":"none")},i.prototype._createControls=function(t){var e=this._panel,i=e.chart,o=this._options=t.scxAppend("div",r);o.hide(),this._restore=$('<span class="'+n+" "+h+'"\n             data-i18n="[title]chartPanel.options.restore"></span>').appendTo(o).on("click",function(){e.state=0,i.setNeedsUpdate(!0)}),this._settings=$('<span class="'+n+" "+u+'"\n             data-i18n="[title]chartPanel.options.settings"></span>').appendTo(o).on("click",function(){e.indicators[0].showSettingsDialog()}),this._maximize=$('<span class="'+n+" "+c+'"\n             data-i18n="[title]chartPanel.options.maximize"></span>').appendTo(o).on("click",function(){e.state=1,e.chart.setNeedsUpdate(!0)}),this._moveUp=$('<span class="'+n+" "+l+'"\n             data-i18n="[title]chartPanel.options.moveUp"></span>').appendTo(o).on("click",function(){1<e.getIndex()&&(e.chartPanelsContainer.movePanel(e,1),e.chart.setNeedsUpdate(),e.chart.setNeedsLayout())}),this._moveDown=$('<span class="'+n+" "+s+'"\n             data-i18n="[title]chartPanel.options.moveDown"></span>').appendTo(o).on("click",function(){e.chartPanelsContainer.movePanel(e,-1),e.chart.setNeedsUpdate()}),this._close=$('<span class="'+n+" "+a+'"\n             data-i18n="[title]chartPanel.options.close"></span>').appendTo(o).on("click",function(){e.chartPanelsContainer.removePanel(e),e.chart.setNeedsLayout(),e.chart.setNeedsUpdate()}),i.mainPanel===this._panel&&(this._scrollToLast=$('<span class="'+n+" "+f+'"\n                data-i18n="[title]chartPanel.options.scrollToLast"></span>').appendTo(o).on("click",function(){var t=i.lastVisibleRecord-i.firstVisibleRecord;i.dateScale.firstVisibleRecord=Math.max(i.recordCount-t-1,0),i.dateScale.lastVisibleRecord=i.recordCount-1,i.setNeedsUpdate(!0)}))},i.prototype.handleMouseHoverGesture=function(t){switch(t.state){case e.GestureState.STARTED:case e.GestureState.CONTINUED:this._panel.container.find(".scxPanelOptions").show();break;case e.GestureState.NONE:case e.GestureState.FINISHED:this._panel.container.find(".scxPanelOptions").hide()}},i);function i(t){this._panel=t}e.ChartPanelOptionControls=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(m){"use strict";m.PanelMoveDirection={NONE:"none",HORIZONTAL:"horizontal",VERTICAL:"vertical",ANY:"any"},Object.freeze(m.PanelMoveDirection),m.PanelMoveKind={NORMAL:"normal",AUTOSCALED:"autoscaled"},Object.freeze(m.PanelMoveKind),m.PanelEvent={THEME_CHANGED:"panelThemeChanged",X_GRID_VISIBLE_CHANGED:"panelXGridVisibleChanged",Y_GRID_VISIBLE_CHANGED:"panelYGridVisibleChanged",PLOT_ADDED:"panelPlotAdded",PLOT_REMOVED:"panelPlotRemoved",DRAWING_ADDED:"panelDrawingAdded",OBJECT_ADDED:"panelObjectAdded",DRAWING_REMOVED:"panelDrawingRemoved",OBJECT_REMOVED:"panelObjectRemoved",DOUBLE_CLICKED:"panelDoubleClicked",CONTEXT_MENU:"panelContextMenu",MOVE_STARTED:"panelMoveStarted",MOVE_FINISHED:"panelMoveFinished",MOVE_CONTINUED:"panelMoveContinued",FORCE_MOVE_STARTED:"panelForceMoveStarted",FORCE_MOVE_FINISHED:"panelForceMoveFinished",FORCE_MOVE_CONTINUED:"panelForceMoveContinued"},Object.freeze(m.PanelEvent);var y,a="scxChartPanel",s="scxPanelScroll",l="scxPanelTitle",h="scxSymbolTitle",u="scxPanelTitleCaption",f="scxPanelTitleValue",c="scxPanelTitleIcon",_=".scxNavigation",C=".scxPanelTitle",d="scxToggleIndicatorTitles",p="scxIndicatorCollapseShow",b="scxIndicatorCollapseHide",i=".scxPanel",t=(y=m.HtmlControl,__extends(e,y),Object.defineProperty(e.prototype,"chartPanelsContainer",{get:function(){return this._panelsContainer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chart",{get:function(){return this._panelsContainer._chart},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueScales",{get:function(){return this._valueScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueScale",{get:function(){return this._valueScales[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatter",{get:function(){return this.valueScale.formatter},set:function(t){this.valueScale.formatter=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layer",{get:function(){return this._layer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"components",{get:function(){return this._components},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"drawValueScale",{get:function(){return this._options.drawValueScale},set:function(t){this._options.drawValueScale=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"heightRatio",{get:function(){return this._options.heightRatio},set:function(t){if(!m.JsUtil.isFiniteNumber(t)||t<this._options.minHeightRatio||t>this._options.maxHeightRatio)throw new Error("Height ratio must be a number in range [minHeightRatio..maxHeightRatio]");this._options.heightRatio=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minHeightRatio",{get:function(){return this._options.minHeightRatio},set:function(t){if(!m.JsUtil.isFiniteNumber(t)||t<0||t>this._options.maxHeightRatio)throw new Error("Min height ratio must be a number in range [0..maxHeightRatio].");this._options.minHeightRatio=t,this._options.heightRatio<t&&(this._options.heightRatio=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxHeightRatio",{get:function(){return this._options.maxHeightRatio},set:function(t){if(!m.JsUtil.isFiniteNumber(t)||t<this.minHeightRatio||1<t)throw new Error("Max height ratio must be a number in range [minHeightRatio..1]");this._options.maxHeightRatio=t,this.heightRatio>t&&(this._options.heightRatio=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"moveDirection",{get:function(){return this._options.moveDirection},set:function(t){this._options.moveDirection=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"moveKind",{get:function(){return this._options.moveKind},set:function(t){this._options.moveKind=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xGridVisible",{get:function(){return this._options.showXGrid},set:function(t){var e=t,i=this._options.showXGrid;i!==e&&(this._options.showXGrid=e,this._fire(m.PanelEvent.X_GRID_VISIBLE_CHANGED,e,i))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yGridVisible",{get:function(){return this._options.showYGrid},set:function(t){var e=t,i=this._options.showYGrid;i!==e&&(this._options.showYGrid=e,this._fire(m.PanelEvent.Y_GRID_VISIBLE_CHANGED,e,i))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._options.state},set:function(t){this._options.state=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._options.visible},set:function(t){this._options.visible=t,this.container&&(t?this.container.show():this.container.hide())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"objects",{get:function(){return this._objects},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"plots",{get:function(){return this._objects.filter(function(t){return t instanceof m.Plot})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"drawings",{get:function(){return this._objects.filter(function(t){return t instanceof m.Drawing})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orders",{get:function(){return this._objects.filter(function(t){return t instanceof m.OrderBar})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tradingPanel",{get:function(){return this._objects.filter(function(t){return t instanceof m.TradingPanel})[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._objects.filter(function(t){return t instanceof m.PositionBar})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"theme",{get:function(){return this._options.theme},set:function(t){var e=this._options.theme;this._options.theme=t,this._fire(m.PanelEvent.THEME_CHANGED,t,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actualTheme",{get:function(){return this._options.theme||this.chart.theme.chartPanel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"projection",{get:function(){return this.valueScale.projection},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleDiv",{get:function(){return this._controls.title},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indicators",{get:function(){var e=this;return this.chart.indicators.filter(function(t){return t.chartPanel===e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentFrame",{get:function(){return this._contentFrame},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showIndicatorTitles",{get:function(){return this._options.showIndicatorTitles},set:function(t){var e;this._options.showIndicatorTitles!==t&&(e=this._toggleIndicatorTitles,this._options.showIndicatorTitles=t,e&&(t?e.addClass(b).removeClass(p):e.addClass(p).removeClass(b)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panelPadding",{get:function(){var t=this.chartPanelsContainer;return this._options.panelPadding||t.panelPadding},set:function(t){var e=this.chartPanelsContainer.panelPadding;this._options.panelPadding={left:e.left,top:t.top,right:e.right,bottom:t.bottom}},enumerable:!0,configurable:!0}),e.prototype._fire=function(t,e,i){var o=this.chart;o&&o.fireTargetValueChanged(this,t,e,i)},e.prototype.getIndex=function(){return this._panelsContainer.panels.indexOf(this)},e.prototype.getProjection=function(t){var e=t?t.index:0;return this.valueScales[e].projection},e.prototype.getValueScale=function(t){var e=t?t.index:0;return this.valueScales[e]},e.prototype.setHeightRatio=function(t){this._panelsContainer.setPanelHeightRatio(this,t)},e.prototype.setNeedsAutoScale=function(){for(var t=0,e=this._valueScales;t<e.length;t++){e[t].setNeedsAutoScale()}},e.prototype.containsPlot=function(t){return 0<=this.plots.indexOf(t)},e.prototype.addPlot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,o=m.JsUtil.flattenArray(t);i<o.length;i++){var r=o[i];if(!(r instanceof m.Plot))throw new TypeError("Plot must be an instance of StockChartX.Plot.");this.containsPlot(r)||((r.chartPanel=this)._objects.push(r),m.JsUtil.sort(this._objects,function(t,e){return t.zIndex-e.zIndex}),this._fire(m.PanelEvent.PLOT_ADDED,r))}},e.prototype.removePlot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,o=t&&0<t.length?m.JsUtil.flattenArray(t):this.plots.slice(0);i<o.length;i++){var r=o[i],n=this._objects.indexOf(r);if(0<=n){this._objects.splice(n,1);try{r.destroy&&r.destroy()}catch(t){console.error("Plot destroy error",t)}this._fire(m.PanelEvent.PLOT_REMOVED,r)}}},e.prototype.containsDrawing=function(t){return 0<=this.drawings.indexOf(t)},e.prototype.addDrawings=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,o=m.JsUtil.flattenArray(t);i<o.length;i++){var r=o[i];if(!(r instanceof m.Drawing))throw new TypeError("Drawing is not an instance of StockChartX.Drawing.");if(this.containsDrawing(r))throw new Error("Drawing already added.");(r.chartPanel=this)._objects.push(r),this._fire(m.PanelEvent.DRAWING_ADDED,r)}},e.prototype.removeDrawings=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=(t&&0<t.length?m.JsUtil.flattenArray(t):this.drawings.slice(0)).filter(function(t){return t.canRemove});this.forceRemoveDrawings(i)},e.prototype.forceRemoveDrawings=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=this.chart,o=null,r=t&&0<t.length?m.JsUtil.flattenArray(t):this.drawings.slice(0),n=0,a=r;n<a.length;n++){var l=a[n],s=this._objects.indexOf(l);s<0||(i.selectedObject===l&&(i.state===m.ChartState.USER_DRAWING?o=i.selectedObject:i.selectObject(null)),l.destroy(),this._objects.splice(s,1),this._fire(m.PanelEvent.DRAWING_REMOVED,l))}o&&i.cancelUserDrawing()},e.prototype.addObjects=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,o=m.JsUtil.flattenArray(t);i<o.length;i++){var r=o[i];if(!(r instanceof m.ChartPanelObject))throw new TypeError("Object is not an instance of StockChartX.ChartPanelObject.");if(this.containsObject(r))throw new Error("Object already added.");(r.chartPanel=this)._objects.push(r),this._fire(m.PanelEvent.OBJECT_ADDED,r)}},e.prototype.removeObjects=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=t&&0<t.length?m.JsUtil.flattenArray(t):this.objects.slice(0),o=this.chart,r=0,n=i;r<n.length;r++){var a=n[r],l=this._objects.indexOf(a);l<0||(o.selectedObject===a&&o.selectObject(null),this._objects.splice(l,1),this._fire(m.PanelEvent.OBJECT_REMOVED,a))}},e.prototype.containsObject=function(t){return 0<=this.objects.indexOf(t)},e.prototype.handleEvent=function(e){if(!this.visible)return!1;var t=e.pointerPosition,i=this.chart;if(i.state===m.ChartState.ZOOM_IN)return i.zoomInView.panel=this,i.zoomInView.handleEvent(e);var o={x:t.x-this.frame.left,y:t.y-this.frame.top};e.pointerPosition=o;for(var r=0,n=this._valueScales;r<n.length;r++){if(n[r].handleEvent(e))return!0}var a=this.hitTest(t);try{if(i.state===m.ChartState.USER_DRAWING){if(!a)return!1;var l=i.selectedObject,s=l.chartPanel;return s&&s!==this?!1:(e.pointerPosition=o,e.chartPanel=this,l.handleEvent(e),$(C).css("pointer-events","none"),$(_).css("pointer-events","none"),!0)}$(C).css("pointer-events","all"),$(_).css("pointer-events","all");var c=this.drawings,h=this.orders,u=this.tradingPanel,f=this.positions,d=i.selectedObject;if(u&&u.handleEvent(e))return!0;if(!a){for(var p=c.length-1;0<=p;p--)c[p].hideTooltip();return e.pointerPosition=t,d&&e.evt.type!==m.MouseEvent.MOVE&&d.handleEvent(e),this.orders.forEach(function(t){return t.handleEvent(e)}),u&&u.handleEvent(e),y.prototype.handleEvent.call(this,e,!1),!1}for(p=c.length-1;0<=p;p--)if(c[p].handleEvent(e))return!0;for(p=h.length-1;0<=p;p--)if(h[p].handleEvent(e))return!0;for(p=f.length-1;0<=p;p--)if(f[p].handleEvent(e))return!0}finally{e.pointerPosition=t}return y.prototype.handleEvent.call(this,e)},e.prototype.minMaxValues=function(t,e,i){for(var o=1/0,r=-1/0,n=0,a=this.plots;n<a.length;n++){var l,s,c,h,u,f,d,p=a[n];i&&p.valueScale!==i||(d=null,d=(l=p.findDataSeries(m.DataSeriesSuffix.DATE))?(c=(s=this.projection).dateByRecord(t),h=s.dateByRecord(t+e),(u=l.binaryIndexOf(c))<0&&(u=~u),(f=l.binaryIndexOf(h))<0&&(f=~f),p.minMaxValues(u,f-u)):p.minMaxValues(t,e),(d=p.minMaxValues(t,e)).min<o&&(o=d.min),d.max>r&&(r=d.max))}return isFinite(o)||(o=-1),isFinite(r)||(r=1),o===r&&(o--,r++),{min:o,max:r}},e.prototype.autoScaledMinMaxValues=function(t){var e=this.chart.dateScale,i=e.firstVisibleIndex,o=e.lastVisibleIndex-i+1;return this.minMaxValues(i,o,t)},e.prototype.formatValue=function(t){return this.valueScale.formatValue(t)},e.prototype.hitTest=function(t){return this._contentFrame.containsPoint(t)},e.prototype.saveState=function(){for(var t={options:m.JsUtil.clone(this._options),valueScales:[]},e=0,i=this._valueScales;e<i.length;e++){var o=i[e];t.valueScales.push(o.saveState())}return t},e.prototype.loadState=function(t){var e=(t=t||{}).options||{};this._options={},this._options.panelPadding=e.panelPadding,this.minHeightRatio=void 0!==e.minHeightRatio?e.minHeightRatio:.05,this.maxHeightRatio=e.maxHeightRatio||1,this.heightRatio=e.heightRatio||1,this.xGridVisible=void 0===e.showXGrid||!!e.showXGrid,this.yGridVisible=void 0===e.showYGrid||!!e.showYGrid,this.moveDirection=e.moveDirection||m.PanelMoveDirection.ANY,this.moveKind=e.moveKind||m.PanelMoveKind.NORMAL,this.state=e.state||0,this.visible=null==e.visible||e.visible,this.showIndicatorTitles=null==e.showIndicatorTitles||e.showIndicatorTitles,this.drawValueScale=null==e.drawValueScale||e.drawValueScale;for(var i=this._valueScales=[],o=t.valueScales||[t.valueScale],r=0,n=this.chart.valueScales.length;r<n;r++){var a=new m.ChartPanelValueScale({chartPanel:this});i.push(a),a.loadState(o[r])}},e.prototype.preferredValueScaleWidth=function(t){for(var e=0,i=0,o=this._valueScales;i<o.length;i++){var r=o[i];r.chartValueScale===t&&(e=Math.max(e,r.preferredWidth()))}return e},e.prototype.layout=function(t){this._layoutHtmlElements(t);for(var e=0,i=this._valueScales;e<i.length;e++){i[e].layout(t)}m.JsUtil.sort(this._objects,function(t,e){return Math.roundToDecimals(t.zIndex-e.zIndex,5)})},e.prototype.draw=function(){var t=this._layer.renderer,e=this._layer.size.width,i=this._layer.size.height;if(t.save(),t.clearRect(0,0,e,i),t.translate(.5,.5),this.drawGridLines(),this.drawValueScale)for(var o=0,r=this._valueScales;o<r.length;o++){r[o].draw()}for(var n=0,a=this._objects;n<a.length;n++){(f=a[n]).drawValueMarkers()}var l=this._contentFrame,s=l.width+this.chart.getTradingPanelWidth();t.rectPath(l.left,0,s,l.height),t.clip();for(var c=0,h=this.indicators;c<h.length;c++){var u=h[c];u.draw(),this===this.chart.mainPanel||u!==this.indicators[0]?u.showTitle=this.showIndicatorTitles:u.showTitle=!0}for(var f,d,p=0,y=this._objects;p<y.length;p++){(f=y[p])instanceof m.Drawing?(d=f,this.chart.showDrawings?(d.draw(),d.selected&&d.drawDateMarkers()):d.tooltip.hide()):f.draw()}t.restore()},e.prototype.drawGridLines=function(){var t=this.chart.xGridVisible&&this.xGridVisible,e=this.chart.yGridVisible&&this.yGridVisible;if(t||e){var i=this.actualTheme,o=this._contentFrame,r=this._layer.renderer;if(r.beginPath(),t)for(var n=0,a=this.chart.dateScale.calibrator.majorTicks;n<a.length;n++){var l=a[n];r.verLine(l.x,0,o.height)}if(e)for(var s=0,c=this.valueScale.calibrator.majorTicks;s<c.length;s++){l=c[s];r.horLine(o.left,o.left+o.width,l.y)}r.stroke(i.grid)}},e.prototype.update=function(){this.layout(this.frame),this.draw()},e.prototype.setNeedsUpdate=function(t){t&&this.setNeedsAutoScale(),this._updateAnimation.start()},e.prototype.handleResize=function(){this.layer.scale=this.chart.scale,this._layer.adjustDimensions()},e.prototype._onUpdateAnimationCallback=function(){this&&this.update()},e.prototype.destroy=function(){this._unsubscribe(),this.chartContextMenu&&this.chartContextMenu.destroy(),this._updateAnimation.destroy();for(var t=0,e=this._objects;t<e.length;t++){e[t].destroy()}for(var i=0,o=this._components;i<o.length;i++){o[i].destroy()}y.prototype.destroy.call(this)},e.prototype._initInstrumentPanelTitle=function(){var e=this,t={chart:this.chart,showOnClick:!0,onItemSelected:function(t){switch(t.data("id")){case m.UI.ChartContextMenu.MenuItem.FORMAT:e.showPriceStyleFormatDialog()}}},i=this._controls.title.scxAppend("div",h),o=i.scxAppend("span",u),r=i.scxAppend("span",f);i.scxAppend("span",f).scxLocalize("chartPanel.title.open");var n=i.scxAppend("span",f);i.scxAppend("span",f).scxLocalize("chartPanel.title.high");var a=i.scxAppend("span",f);i.scxAppend("span",f).scxLocalize("chartPanel.title.low");var l=i.scxAppend("span",f);i.scxAppend("span",f).scxLocalize("chartPanel.title.volume");var s=i.scxAppend("span",f),c=i.scxAppend("span",f);this._barInfoControls={rootDiv:i,symbol:o,date:r,open:n,high:a,low:l,volume:s,change:c,series:this.chart.barDataSeries()},this._updateInstrument(),this.chartContextMenu=o.scx().chartContextMenu(t)},e.prototype.showPriceStyleFormatDialog=function(){var e=this;m.UI.ViewLoader.priceStyleSettingsDialog(function(t){t.show({chart:e.chart,priceStyle:e.chart.priceStyle})})},e.prototype.updateOHLVData=function(t){var e,i,o,r;this._barInfoControls&&(e=this._barInfoControls,i='<i class="icon-arrow-'+(0<t.income?"up":t.income<0?"down":"")+'-general"></i>',o=null!=t.income?t.income:"-",r=null!=t.incomePercentage?t.incomePercentage.toFixed(2):"-",e.change.html(i+" "+o+"\n                ("+r+"%)").addClass("scxControl-change scxControl"),e.open.text(null!=t.open?this.formatter.format(t.open):"-").addClass("scxControl-open scxControl"),e.high.text(null!=t.high?this.formatter.format(t.high):"-").addClass("scxControl-high scxControl"),e.low.text(null!=t.low?this.formatter.format(t.low):"-").addClass("scxControl-low scxControl"),e.volume.text(null!=t.volume?t.volume:"-").addClass("scxControl-close scxControl"))},e.prototype._subscribe=function(){var e=this,t=this.chart;t.on(m.ChartEvent.THEME_CHANGED+i,function(){e._applyTheme()},this),t.mainPanel===this&&t.on(m.ChartEvent.INSTRUMENT_CHANGED+i,function(){e._updateInstrument()},this),t.on(m.ChartEvent.VALUE_SCALE_ADDED+i,function(){e._valueScales.push(new m.ChartPanelValueScale({chartPanel:e}))},this),t.on(m.ChartEvent.VALUE_SCALE_REMOVED+i,function(t){e._valueScales.splice(t.value,1)},this),t.on(m.ChartEvent.PRICE_STYLE_CHANGED+i,function(t){e._barInfoControls&&(e._barInfoControls.series=e.chart.primaryBarDataSeries())},this)},e.prototype._unsubscribe=function(){var t=this.chart;t&&t.off(i,this)},e.prototype._initGestures=function(){return new m.GestureArray([new m.PanGesture({handler:this._handlePanGesture,hitTest:this._panGestureHitTest}),new m.MouseWheelGesture({handler:this._handleMouseWheel,hitTest:this.hitTest}),new m.ClickGesture({handler:this._handleClickGesture,hitTest:this.hitTest}),new m.DoubleClickGesture({handler:this._handleDoubleClickGesture,hitTest:this.hitTest}),new m.MouseHoverGesture({handler:this._handleMouseHoverGesture,hitTest:this.hitTest,hoverEventEnabled:!1}),new m.MouseHoverGesture({handler:this._handleMouseMoveGesture,hitTest:this.hitTest,hoverEventEnabled:!0}),new m.ContextMenuGesture({handler:this._handleContextMenuGesture,hitTest:this.hitTest})],this)},e.prototype._panGestureHitTest=function(t){return this.moveDirection!==m.PanelMoveDirection.NONE&&this.hitTest(t)},e.prototype._handlePanGesture=function(t,e){var i=e.pointerPosition,o=this.chart;switch(t.state){case m.GestureState.STARTED:this._fire(m.PanelEvent.FORCE_MOVE_STARTED,i);break;case m.GestureState.FINISHED:this._fire(m.PanelEvent.FORCE_MOVE_FINISHED,i);break;case m.GestureState.CONTINUED:this._fire(m.PanelEvent.FORCE_MOVE_CONTINUED,i);break;default:console.warn("gesture state is invalid")}if(o.scrollEnabled)switch(t.state){case m.GestureState.STARTED:o.rootDiv.addClass(s),this._fire(m.PanelEvent.MOVE_STARTED,i);break;case m.GestureState.FINISHED:o.rootDiv.removeClass(s),this._fire(m.PanelEvent.MOVE_FINISHED,i);break;case m.GestureState.CONTINUED:var r,n=t.moveOffset,a=void 0,l=void 0;switch(this.moveDirection){case m.PanelMoveDirection.HORIZONTAL:o.crossHairType!==m.CrossHairType.NONE&&1!==t.pointerKind||!o.dateScale.scrollOnPixels(n.x)||((r=this.moveKind===m.PanelMoveKind.AUTOSCALED)||o.setNeedsLayout(),o.setNeedsUpdate(r));break;case m.PanelMoveDirection.VERTICAL:for(a=0,l=this.valueScales;a<l.length;a++)l[a]._zoomOrScrollWithUpdate(n.y,this.valueScale.scrollOnPixels);break;case m.PanelMoveDirection.ANY:if(o.dateScale.scrollOnPixels(n.x)||this.moveKind===m.PanelMoveKind.AUTOSCALED){for(a=0,l=this.valueScales;a<l.length;a++)l[a].scrollOnPixels(n.y);(r=this.moveKind===m.PanelMoveKind.AUTOSCALED)||o.setNeedsLayout(),o.setNeedsUpdate(r)}else for(a=0,l=this.valueScales;a<l.length;a++)l[a]._zoomOrScrollWithUpdate(n.y,this.valueScale.scrollOnPixels);break;default:return}this._fire(m.PanelEvent.MOVE_CONTINUED,i)}},e.prototype._handleMouseHoverGesture=function(t){this._optionControls.handleMouseHoverGesture(t)},e.prototype._handleMouseMoveGesture=function(t,e){this._fire(m.MouseEvent.MOVE,e.pointerPosition)},e.prototype._handleMouseWheel=function(t,e){var i,o,r;this.chart.zoomEnabled&&(o=.05*(i=this.contentFrame.width),r=e.pointerPosition.x/i,this.chart.dateScale._handleZoom(-t.delta*o,r),this._fire(m.MouseEvent.WHEEL,e.pointerPosition))},e.prototype._handleClickGesture=function(){var t=this.chart,e=t.selectedObject;e&&(t.selectObject(null),this.containsDrawing(e)?this.setNeedsUpdate():t.setNeedsUpdate()),this._fire(m.MouseEvent.CLICK,this)},e.prototype._handleDoubleClickGesture=function(){this._fire(m.PanelEvent.DOUBLE_CLICKED,this)},e.prototype._handleContextMenuGesture=function(t,e){this._fire(m.PanelEvent.CONTEXT_MENU,{contextMenuGesture:t,event:e})},e.prototype._createContainer=function(){var t=this,e=this.chartPanelsContainer.container.scxAppend("div",a),i=this===this.chart.mainPanel;this._container=e,this._layer=new m.Layer({parent:e});var o,r=this._controls.title=e.scxAppend("div",l),n=$('<span class="'+d+" "+c+'"/>').attr("data-i18n","[title]chartPanel.menu.showHideTitles").on(m.MouseEvent.CLICK,function(){t.showIndicatorTitles=!t.showIndicatorTitles,t.setNeedsUpdate()});return n.addClass(this.showIndicatorTitles?b:p),r.append(n),this._toggleIndicatorTitles=n,i&&(this.addComponent(new m.InstrumentWatermark),this._initInstrumentPanelTitle()),this._applyTheme(),this._subscribe(),this===this.chart.mainPanel&&(o=new m.TradingPanel,this.addObjects(o)),e},e.prototype._layoutHtmlElements=function(t){y.prototype.layout.call(this,t);var e=this.chart.mainPanel===this,i=e?0:this.chart.getTradingPanelWidth(),o=this._panelsContainer.panelsContentFrame;this._contentFrame.copyFrom(t),this._contentFrame.left=o.left,this._contentFrame.width=o.width,this._layer.size={width:this.container.width(),height:this.container.height()},e?(this._barInfoControls.rootDiv.css("display",this.chart.showBarInfoInTitle?"block":"none"),this._toggleIndicatorTitles.css("display",0<this.indicators.length?"block":"none")):this._toggleIndicatorTitles.css("display",1<this.indicators.length?"block":"none");for(var r=0,n=this._components;r<n.length;r++){n[r].layout(t)}this._controls.title.scxPosition(this._contentFrame.left,0).outerWidth(this._contentFrame.width+i),this._optionControls.layout(this._container)},e.prototype._updateInstrument=function(){var t;!this._barInfoControls||(t=this.chart.instrument)&&this._barInfoControls.symbol.text(t.symbol)},e.prototype._applyTheme=function(){var t=this.titleDiv;if(t){var e=this.actualTheme;t.scxTextStyle(e.title);for(var i=0,o=this._components;i<o.length;i++){o[i].applyTheme()}}},e.prototype.addComponent=function(t){if(0<=this._components.indexOf(t))throw new Error("An item already exists.");(t.chartPanel=this)._components.push(t)},e.prototype.removeComponent=function(t){var e=this._components,i=e.indexOf(t);0<=i&&(e[i].destroy(),e.splice(i,1))},e);function e(t){var e=y.call(this)||this;if(e._valueScales=[],e._components=[],e._objects=[],e._contentFrame=new m.Rect,e._controls={title:null,options:null},e._barInfoControls=null,e._updateAnimation=new m.Animation({context:e,recurring:!1,callback:e._onUpdateAnimationCallback}),!(t.chartPanelsContainer instanceof m.ChartPanelsContainer))throw new TypeError("Invalid chart panels container.");return e._panelsContainer=t.chartPanelsContainer,e._optionControls=new m.ChartPanelOptionControls(e),e.loadState(t),e}m.ChartPanel=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(r){"use strict";var n,t=(n=r.ChartPanelObject,__extends(e,n),Object.defineProperty(e.prototype,"point",{get:function(){return this._options.point},set:function(t){this._setOption("point",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extended",{get:function(){return this._options.extended},set:function(t){this._setOption("extended",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"theme",{get:function(){return this._options.theme},set:function(t){this._setOption("theme",t)},enumerable:!0,configurable:!0}),e.prototype.loadState=function(t){var e,i,o;n.prototype.loadState.call(this,t),t&&t.options&&((e=t.options)&&(i=this.suppressEvents(),(o=e.point)&&(this.point=new r.ChartPoint(o)),this.suppressEvents(i)))},e.prototype.draw=function(){var t,e,i,o,r,n,a;this.visible&&(t=this.projection,e=this.point.toPoint(t),i=this.chartPanel.contentFrame,o=this.panelValueScale,(r=this.renderer).beginPath(),null!=o.leftFrame&&(n=this.extended?i.right:e.x,r.horLine(i.left,n,e.y)),null!=o.rightFrame&&(a=this.extended?i.left:e.x,r.horLine(a,i.right,e.y)),r.stroke(this.theme))},e);function e(t){return n.call(this,t&&{options:t})||this}r.ValueLine=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(r){"use strict";var e,t=(e=r.ChartPanelObject,__extends(i,e),Object.defineProperty(i.prototype,"ask",{get:function(){return this._options.ask},set:function(t){this._setOption("ask",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bid",{get:function(){return this._options.bid},set:function(t){this._setOption("bid",t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"theme",{get:function(){return this._options.theme},set:function(t){this._setOption("theme",t)},enumerable:!0,configurable:!0}),i.prototype.draw=function(){var t,e,i=this.projection,o=this.renderer,r=this.chartPanel.contentFrame,n=this.theme||this.chart.theme.spread;this.ask&&(t=i.yByValue(this.ask),o.horLinePath(r.left,r.right,t),o.stroke(n.ask.line)),this.bid&&(e=i.yByValue(this.bid),o.horLinePath(r.left,r.right,e),o.stroke(n.bid.line))},i.prototype.drawValueMarkers=function(){function t(t,e){t&&(o.theme.fill.fillColor=e,o.theme.text.fillColor=r.HtmlUtil.isDarkColor(e)?"white":"black",o.draw(t,i.panelValueScale))}var i=this,o=this.chart.valueMarker,e=this.theme||this.chart.theme.spread;t(this.ask,e.ask.valueMarker.fill.fillColor),t(this.bid,e.bid.valueMarker.fill.fillColor)},i);function i(t){return e.call(this,t&&{options:t})||this}r.Spread=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(l){"use strict";var i,t=(i=l.ChartPanelObject,__extends(e,i),e.prototype.draw=function(){if(!(this._handler.chart.timeInterval>=l.TimeSpan.MILLISECONDS_IN_DAY)){var t,e=this.projection,i=this.chartPanel.contentFrame,o=this.renderer,r=moment(e.dateByX(0)).startOf("day").hours(this._handler.time.hours).minutes(this._handler.time.minutes).toDate(),n=e.dateByRecord(e.dateScale.lastVisibleIndex+1),a=this._handler.dateFilter;for(o.beginPath();r<=n;){a&&a(r)||(t=e.xByDate(moment(r).toDate()),o.verLine(t,0,i.bottom-i.top)),r=moment(r).add(1,"day").toDate()}o.stroke(this._handler.theme)}},e);function e(t){var e=i.call(this,t&&{options:t})||this;return e._handler=t.breakLinesHandler,e}l.BreakLines=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var i,e=(i=t.ChartPanelObject,__extends(o,i),Object.defineProperty(o.prototype,"date",{get:function(){return this._date},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"theme",{get:function(){return this._theme},set:function(t){this._theme=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"actualTheme",{get:function(){return this._theme||this.defaultTheme},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"defaultTheme",{get:function(){return this.chart.theme.highlightedColumn},enumerable:!0,configurable:!0}),o.prototype.checkDate=function(t){return this._date.getTime()===t.getTime()},o.prototype.draw=function(){var t,e,i,o,r,n;this.chart.highlightedColumns.visible&&(e=(t=this.chartPanel).projection,i=t.layer.renderer,o=e.xByDate(this._date),r=e.columnByX(o),n=this.chart.dateScale&&this.chart.dateScale.columnValues&&this.chart.dateScale.columnValues.visibleColumnsWidths?this.chart.dateScale.columnValues.visibleColumnsWidths[r]:this.chart.dateScale.columnWidth,i.rectPath(o-n/2,0,n,t.layer.size.height),i.fill(this.actualTheme.fill))},o.prototype.destroy=function(){this.chartPanel.removeObjects(this),i.prototype.destroy.call(this)},o);function o(t){var e=i.call(this,null)||this;if("object"!=typeof t)throw new Error("HighlightedColumn config must be an object.");if(!t.date)throw new Error("Date for HighlightedColumn is not specified.");return e._date=t.date,t.theme&&(e._theme=t.theme),e}t.HighlightedColumn=e}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(b){"use strict";var a="scxValueScaleScroll";b.ScaleKind={LINEAR:"linear",LOGARITHMIC:"logarithmic"},Object.freeze(b.ScaleKind),b.ValueScaleEvents={ContextMenu:"ValueScaleContextMenu"},Object.freeze(b.ValueScaleEvents),b.ScalePriceType={AUTOMATIC:"automatic",PIXELS_PRICE:"pixels-price"},Object.freeze(b.ScalePriceType);var n,i=(n=b.IntlNumberFormat,__extends(t,n),t.prototype.format=function(t){if(!t)return"";var e="number"==typeof t?t:t.value;if(this.isFractional){var i=Math.abs(e),o=Math.floor(i),r=i-o;return(e<0?"-":"")+n.prototype.format.call(this,o+r*this._multiplier).replace(".","'")}return n.prototype.format.call(this,e)},t.prototype.setInstrument=function(t){var e;t&&null!=t.fraction&&0!=t.fraction?(e=t.fraction.toString().length,this.setDecimalDigits(e),this._multiplier=t.fraction/Math.pow(10,e),this.isFractional=!0):(e=t?t.precision:2,this.setDecimalDigits(e),this.isFractional=!1)},t.prototype.setDecimalDigits=function(t){this._digits!==t&&(this._digits=t,n.prototype.setDecimalDigits.call(this,t))},t);function t(t){var e=n.call(this)||this;return e.isFractional=!1,e._chart=t,e}var o,e=(o=b.Control,__extends(r,o),Object.defineProperty(r.prototype,"chartPanel",{get:function(){return this._panel},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"chart",{get:function(){return this._panel.chart},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"projectionFrame",{get:function(){return this._projectionFrame},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"leftFrame",{get:function(){return this._leftFrame},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rightFrame",{get:function(){return this._rightFrame},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"formatter",{get:function(){return this._formatter},set:function(t){if(!t||!b.JsUtil.isFunction(t.format))throw new TypeError("Invalid formatter.");this._formatter=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"kind",{get:function(){return this._options.kind||b.ScaleKind.LINEAR},set:function(t){this._options.kind=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"valueScaleType",{get:function(){return this._valueScaleType},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"minValueRange",{get:function(){return this._minValueRange||(this._minValueRange=1e-8),this._minValueRange},set:function(t){if(!b.JsUtil.isFiniteNumberOrNaN(t))throw new TypeError("Value must be a number.");this._minValueRange=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxValueRange",{get:function(){return this._maxValueRange||(this._maxValueRange=1e11),this._maxValueRange},set:function(t){if(!b.JsUtil.isFiniteNumberOrNaN(t))throw new TypeError("Value must be a number.");this._maxValueRange=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"minVisibleValue",{get:function(){return this._options.minVisibleValue},set:function(t){if(!b.JsUtil.isFiniteNumberOrNaN(t))throw new TypeError("Value must be a number.");this._setMinVisibleValue(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxVisibleValue",{get:function(){return this._options.maxVisibleValue},set:function(t){if(!b.JsUtil.isFiniteNumberOrNaN(t))throw new TypeError("Value must be a number.");this._setMaxVisibleValue(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"autoScaleMultiplier",{get:function(){return this._options.autoScaleMultiplier||1},set:function(t){this._options.autoScaleMultiplier=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"minAllowedValue",{get:function(){return this._options.minAllowedValue},set:function(t){if(!b.JsUtil.isNumber(t))throw new TypeError("Value must be a number.");this._options.minAllowedValue=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxAllowedValue",{get:function(){return this._options.maxAllowedValue},set:function(t){if(!b.JsUtil.isNumber(t))throw new TypeError("Value must be a number.");this._options.maxAllowedValue=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"minAllowedValueRatio",{get:function(){return this._options.minAllowedValueRatio},set:function(t){if(!b.JsUtil.isPositiveNumberOrNaN(t))throw new Error("Ratio must be a positive number.");this._options.minAllowedValueRatio=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxAllowedValueRatio",{get:function(){return this._options.maxAllowedValueRatio},set:function(t){if(!b.JsUtil.isPositiveNumberOrNaN(t))throw new Error("Ratio must be a positive number or NaN.");this._options.maxAllowedValueRatio=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"minValueRangeRatio",{get:function(){return this._options.minValueRangeRatio},set:function(t){if(!b.JsUtil.isPositiveNumberOrNaN(t)||1<t)throw new Error("Ratio must be in range (0..1]");this._options.minValueRangeRatio=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxValueRangeRatio",{get:function(){return this._options.maxValueRangeRatio},set:function(t){if(!b.JsUtil.isPositiveNumberOrNaN(t)||t<1)throw new Error("Ratio must be greater or equal to 1.");this._options.maxValueRangeRatio=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"theme",{get:function(){return this._options.theme},set:function(t){this._options.theme=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"majorTickMarkLength",{get:function(){return this._options.majorTickMarkLength},set:function(t){this._options.majorTickMarkLength=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"minorTickMarkLength",{get:function(){return this._options.minorTickMarkLength},set:function(t){this._options.minorTickMarkLength=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"projection",{get:function(){return this._projection},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"padding",{get:function(){return this._options.padding},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"calibrator",{get:function(){return this._calibrator},set:function(t){this._calibrator=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"actualTheme",{get:function(){return this._options.theme||this.chart.theme.valueScale},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"chartValueScale",{get:function(){var t=this._index();return 0<=t?this.chart.valueScales[t]:null},enumerable:!0,configurable:!0}),r.prototype.applyAutoScroll=function(t){var e,i,o=this.chart.dataManager.getLastBar();Math.round(this.chart.lastVisibleRecord)>=this.chart.recordCount-1&&(this._valueScaleType===b.ScalePriceType.AUTOMATIC?this.setMinMaxVisibleValue(o.low,o.high):(e=!1,this._prevClose!==o.close&&(i=o.close-this._prevClose,this.minVisibleValue=this.minVisibleValue+i,this.maxVisibleValue=this.maxVisibleValue+i,e=!0),e&&(this.chart.setNeedsLayout(),this.chart.setNeedsUpdate()))),this._prevClose=o.close},r.prototype.setMinMaxVisibleValue=function(t,e){this.minVisibleValue>t&&(this.minVisibleValue=t),this.maxVisibleValue<e&&(this.maxVisibleValue=e)},r.prototype._initGestures=function(){var i=this;return new b.GestureArray([new b.DoubleClickGesture({handler:this._handleDoubleClickGesture}),new b.PanGesture({handler:this._handlePanGesture,horizontalMoveEnabled:!1}),new b.MouseWheelGesture({handler:this._handleMouseWheelGesture}),new b.ContextMenuGesture({handler:function(t,e){i.chart.fire(b.ValueScaleEvents.ContextMenu,{target:e})},hitTest:this.hitTest})],this,this.hitTest)},r.prototype._updateFormatter=function(){var t,e=this.chart.locale,i=this.formatter,o=this.chart.instrument,r=3;o&&o.hasOwnProperty("precision")&&(r=o.precision),i?i.locale=e:(t={minimumFractionDigits:r,maximumFractionDigits:r},this.formatter=new b.IntlNumberFormat(e,t))},r.prototype._setMinVisibleValue=function(t){this._options.minVisibleValue=t},r.prototype._setMaxVisibleValue=function(t){this._options.maxVisibleValue=t},r.prototype._index=function(){for(var t=this._panel.valueScales,e=0;e<t.length;e++)if(t[e]===this)return e;return-1},r.prototype.needsAutoScale=function(){return isNaN(this._options.minVisibleValue)||isNaN(this._options.maxVisibleValue)},r.prototype.setNeedsAutoScale=function(){this.minVisibleValue=NaN,this.maxVisibleValue=NaN},r.prototype.autoScale=function(){if(this._valueScaleType===b.ScalePriceType.PIXELS_PRICE)this._applyPixelPerPrice();else{for(var t=this.chart.dateScale,e=t.firstVisibleIndex,i=t.lastVisibleIndex-e+1,o=1/0,r=-1/0,n=this.chartValueScale,a=0,l=this._panel.plots;a<l.length;a++){var s,c,h,u,f,d,p,y=l[a];y.valueScale===n&&(p=null,(p=(s=y.findDataSeries(b.DataSeriesSuffix.DATE))?(h=(c=this.projection).dateByRecord(e),u=c.dateByRecord(e+i),(f=s.binaryIndexOf(h))<0&&(f=~f),(d=s.binaryIndexOf(u))<0&&(d=~d),y.minMaxValues(f,d-f)):y.minMaxValues(e,i)).min<o&&(o=p.min),p.max>r&&(r=p.max))}isFinite(o)||(o=-1),isFinite(r)||(r=1),o===r&&(o--,r++);var m=this.range;m&&(null!=m.min&&o>m.min&&(o=m.min),null!=m.max&&r<m.max&&(r=m.max)),this._setMinVisibleValue(o),this._setMaxVisibleValue(r*this.autoScaleMultiplier)}},r.prototype.formatValue=function(t){return this.calibrator instanceof b.PercentValueScaleCalibrator?this.calibrator.formatValue(t):this.formatter.format(t)},r.prototype.preferredWidth=function(){this.needsAutoScale()&&this.autoScale();var t=this._options,e=this.actualTheme.text,i=this.formatValue(t.minVisibleValue),o=this.formatValue(t.maxVisibleValue),r=b.DummyCanvasContext.measureText(i,e).width,n=b.DummyCanvasContext.measureText(o,e).width,a=t.padding;return Math.max(r,n)+a.left+a.right},r.prototype.hitTest=function(t){var e=this._leftContentFrame,i=this._rightContentFrame;return e&&b.Geometry.isPointInsideOrNearRect(t,e)||i&&b.Geometry.isPointInsideOrNearRect(t,i)},r.prototype.scrollOnPixels=function(t){if(!isFinite(t))throw new Error("Finite number expected.");if(!t)return!1;var e=this._valueOffset(t);return this.scrollOnValue(e)},r.prototype.scrollOnValue=function(t){if(!t)return!1;var e=this.minVisibleValue+t,i=this.maxVisibleValue+t,o=this.range;return o&&(null!=o.min&&e>o.min&&(e=o.min),null!=o.max&&i<o.max&&(i=o.max)),!!this._canSetVisibleValueRange(e,i)&&(this._setMinVisibleValue(e),this._setMaxVisibleValue(i),!0)},r.prototype.zoomOnPixels=function(t){if(!isFinite(t))throw new Error("Finite number expected.");if(!t)return!1;var e=this._valueOffset(t);return this.zoomOnValue(e)},r.prototype.zoomOnValue=function(t){if(!t)return!1;var e=this.minVisibleValue,i=this.maxVisibleValue,o=e-t,r=i+t;if(r-o>this.maxValueRange)return!1;var n=this.range;if(!this._canSetVisibleValueRange(o,r))if(this._canSetVisibleValueRange(e,r))o=e;else if(this._canSetVisibleValueRange(o,i))r=i;else if(!n)return!1;return n&&(null!=n.min&&o>n.min&&(o=n.min),null!=n.max&&r<n.max&&(r=n.max)),(o!==e||r!==i)&&r-o>=this.minValueRange&&(this._setMinVisibleValue(o),this._setMaxVisibleValue(r),!0)},r.prototype.setPixelsPrice=function(t){(this._pixelPrice=t)<=0||this._valueScaleType===b.ScalePriceType.AUTOMATIC||(this._applyPixelPerPrice(),this._panel.setNeedsUpdate(),this.chart.setNeedsUpdate())},r.prototype._applyPixelPerPrice=function(){var t=this.chart.instrument,e=this._panel.contentFrame.height,i=this.chart.dataManager.getDataSeries(b.DataSeriesSuffix.CLOSE),o=i.value(Math.min(this.chart.lastVisibleIndex,i.length-1)),r=e/2/this._pixelPrice,n=t?t.tickSize:1,a=t?t.precision:0,l=Math.roundToDecimals(r*n,a+1),s=o-l,c=o+l;this._setMinVisibleValue(s),this._setMaxVisibleValue(c)},r.prototype.setValueScaleType=function(t){(this._valueScaleType=t)==b.ScalePriceType.PIXELS_PRICE&&this.setPixelsPrice(this._pixelPrice)},Object.defineProperty(r.prototype,"pixelPrice",{get:function(){return this._pixelPrice},enumerable:!0,configurable:!0}),r.prototype.getPixelsPrice=function(){if(0<this._pixelPrice)return this._pixelPrice;var t=this.chart.instrument,e=t?t.precision:0,i=t?t.tickSize:1,o=Math.roundToDecimals(this.maxVisibleValue-this.minVisibleValue,e+1),r=Math.roundToDecimals(this._panel.contentFrame.height/o*i,2);return isNaN(r)?0:r},r.prototype._zoomOrScrollWithUpdate=function(t,e){var i=this.chartValueScale.useManualWidth,o=i||this.preferredWidth(),r=e.call(this,t),n=i||this.preferredWidth();return r&&(o===n?this._panel.setNeedsUpdate():this.chart.setNeedsUpdate()),r},r.prototype.saveState=function(){return{options:b.JsUtil.clone(this._options),formatter:this.formatter.saveState(),calibrator:this.calibrator.saveState()}},r.prototype.loadState=function(t){var e=(t=t||{}).options||{};this._options={},this._options.minVisibleValue=null!=e.minVisibleValue?e.minVisibleValue:NaN,this._options.maxVisibleValue=null!=e.maxVisibleValue?e.maxVisibleValue:NaN,this.minAllowedValue=null!=e.minAllowedValue?e.minAllowedValue:NaN,this.maxAllowedValue=null!=e.maxAllowedValue?e.maxAllowedValue:NaN,this.minAllowedValueRatio=e.minAllowedValue||.8,this.maxAllowedValueRatio=e.maxAllowedValueRatio||.8,this.minValueRangeRatio=e.minValueRangeRatio||.1,this.maxValueRangeRatio=e.maxValueRangeRatio||5,this.majorTickMarkLength=e.majorTickMarkLength||3,this.minorTickMarkLength=e.minorTickMarkLength||3,this._options.padding=e.padding||{left:6,top:3,right:3,bottom:3},this.range=e.range||{},this.formatter=new i(this.chart),this.formatter.setInstrument(this.chart.instrument),this.calibrator=t.calibrator?b.ValueScaleCalibrator.deserialize(t.calibrator):new b.IntervalValueScaleCalibrator,this.calibrator.formater=this.formatter},r.prototype.layout=function(t){(this.needsAutoScale()||this.maxVisibleValue-this.minVisibleValue<this.minValueRange)&&this.autoScale();var e=this._projectionFrame;e.left=0,e.top=0,e.width=this._panel.layer.size.width,e.height=this._panel.layer.size.height,e.applyPadding(this._panel.panelPadding),e.height<0&&(e.height=1),this._calibrator.calibrate(this),this._layoutContentFrames()},r.prototype._layoutContentFrames=function(){var t,e,i,o,r,n,a,l,s,c,h,u,f,d=this._panel,p=this.chartValueScale,y=p.leftPanelVisible,m=p.rightPanelVisible,_=this._options.padding,C=!1!==this.chart.theme.valueScale.border.strokeEnabled;y?(t=p.leftPanel,e=parseFloat(t.container.css("border-left-width")),i=parseFloat(d.container.css("border-left-width")),o=t.contentSize.width,r=Math.round(Math.max(e-i,0)),(n=(n=this._leftFrame)||(this._leftFrame=new b.Rect)).left=r,n.top=0,n.width=o-Math.max(i-e),n.height=d.container.height(),(a=(a=this._leftContentFrame)||(this._leftContentFrame=new b.Rect)).left=n.left+_.right,a.top=n.top,a.width=n.width-_.left-_.right,a.height=n.height):this._leftFrame=this._leftContentFrame=null,m?(l=p.rightPanel,s=parseFloat(l.container.css("border-left-width")),c=l.contentSize.width,h=l.frame.left+s,(u=(u=this._rightFrame)||(this._rightFrame=new b.Rect)).left=h,u.top=0,u.width=c,u.height=d.container.height(),C||--u.left,(f=(f=this._rightContentFrame)||(this._rightContentFrame=new b.Rect)).left=u.left+_.left,f.top=u.top,f.width=u.width-_.left-_.right,f.height=u.height):this._rightFrame=this._rightContentFrame=null},r.prototype.clip=function(){var t=this._leftFrame,e=this._rightFrame;if(!t&&!e)return!1;var i=this._panel.layer.renderer;return t&&i.rect(t.left,t.top,t.width,t.height),e&&i.rect(e.left,e.top,e.width,e.height),i.clip(),!0},r.prototype.draw=function(){var t=this._panel.layer.renderer;if(t.save(),this.clip()){var e=this.actualTheme,i=this._leftContentFrame,o=this._rightContentFrame,r=this._leftFrame,n=this._rightFrame,a=r&&r.right-1,l=this.majorTickMarkLength,s=this.minorTickMarkLength;t.textTheme(e.text),t.textOptions({baseline:b.TextBaseline.MIDDLE}),t.beginPath();for(var c=0,h=this.calibrator.majorTicks;c<h.length;c++){var u=h[c];i&&(t.horLine(a,a-l,u.y),t.textOptions({align:b.TextAlign.RIGHT}),t.fillText(u.text,i.right,u.y)),o&&(t.textOptions({align:b.TextAlign.LEFT}),t.fillText(u.text,o.left,u.y))}for(var f=0,d=this.calibrator.minorTicks;f<d.length;f++){u=d[f];r&&t.horLine(a,a-s,u.y),n&&t.horLine(n.left,n.left+s,u.y)}t.stroke(e.line)}t.restore()},r.prototype._handleDoubleClickGesture=function(){var t=this.chartValueScale.useManualWidth,e=t||this.preferredWidth();this.autoScale(),e===(t||this.preferredWidth())?this._panel.setNeedsUpdate():this.chart.setNeedsUpdate()},r.prototype._handlePanGesture=function(t,e){var i=this.chart,o=1===e.evt.which;if((!o||i.scrollEnabled)&&(o||i.zoomEnabled))switch(t.state){case b.GestureState.STARTED:i.rootDiv.addClass(a);break;case b.GestureState.FINISHED:i.rootDiv.removeClass(a);break;case b.GestureState.CONTINUED:var r=t.moveOffset.y,n=o?this.scrollOnPixels:this.zoomOnPixels;this._zoomOrScrollWithUpdate(r,n)}},r.prototype._handleMouseWheelGesture=function(t){var e;this.chart.zoomEnabled&&(e=.05*this._panel.frame.height,this._zoomOrScrollWithUpdate(t.delta*e,this.zoomOnPixels))},r.prototype._valueOffset=function(t){var e=this._panel.contentFrame;return(this.maxVisibleValue-this.minVisibleValue)/e.height*t},r.prototype._canSetVisibleValueRange=function(t,e){var i=e-t;if(i<this.minValueRange)return!1;var o=this.minAllowedValue;if(!isNaN(o)&&t<o)return!1;var r=this.maxAllowedValue;if(!isNaN(r)&&r<e)return!1;var n=this._panel.autoScaledMinMaxValues(this.chartValueScale),a=this.minAllowedValueRatio,l=this.maxAllowedValueRatio;return!(!isNaN(a)&&a<(n.min-t)/i)&&!(!isNaN(l)&&l<(e-n.max)/i)},r.prototype.destroy=function(){this.chart.off(b.ChartEvent.INSTRUMENT_CHANGED,this._handleInstrumentChange)},r);function r(t){var e=o.call(this)||this;if(e._projectionFrame=new b.Rect,e.range={},e._pixelPrice=0,e._valueScaleType=b.ScalePriceType.AUTOMATIC,e._handleInstrumentChange=function(t){e.formatter instanceof i&&e.formatter.setInstrument(t.value)},!t)throw new Error("Config is not specified.");if(!(t.chartPanel instanceof b.ChartPanel))throw new TypeError("Config.chartPanel must be an instance of StockChartX.ChartPanel.");return e._panel=t.chartPanel,e._projection=new b.Projection(e.chart.dateScale,e),e.loadState(t),e._updateFormatter(),e._initGestures(),e.chart.on(b.ChartEvent.LOCALE_CHANGED+".scxValueScale",function(){e._updateFormatter()},e),e.chart.on(b.ChartEvent.INSTRUMENT_CHANGED,e._handleInstrumentChange),e}b.ChartPanelValueScale=e}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(i){"use strict";var e,t="scxPanelSplitter",o="scxHover",r="scxSplitterMove",n=(e=i.HtmlControl,__extends(a,e),Object.defineProperty(a.prototype,"topPanel",{get:function(){return this._topPanel},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"bottomPanel",{get:function(){return this._bottomPanel},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"chart",{get:function(){return this._topPanel&&this._topPanel.chart},enumerable:!0,configurable:!0}),a.getHeight=function(){return 1},a.prototype._initGestures=function(){return new i.GestureArray([new i.MouseHoverGesture({handler:this._handleMouseHoverGesture,hoverEventEnabled:!1}),new i.PanGesture({handler:this._handlePanGesture,horizontalMoveEnabled:!1}),new i.ClickGesture({handler:function(){}})],this,this.hitTest)},a.prototype._handlePanGesture=function(t){var e=this.chart;switch(e.state){case i.ChartState.USER_DRAWING:e.cancelUserDrawing();break;case i.ChartState.RESIZING_PANELS:case i.ChartState.NORMAL:break;case i.ChartState.ZOOM_IN:return;default:throw new Error("Unable to start user drawing in this chart state.")}switch(t.state){case i.GestureState.STARTED:this._prevChartState=e.state,this._isMoving=!0,e.state=i.ChartState.RESIZING_PANELS,this._startMove();break;case i.GestureState.CONTINUED:this.move(t.moveOffset.y)&&e.updateSplitter(this);break;case i.GestureState.FINISHED:this._isMoving=!1,e.state=this._prevChartState}},a.prototype._handleMouseHoverGesture=function(t,e){switch(t.state){case i.GestureState.STARTED:this._startMove();break;case i.GestureState.FINISHED:this._stopMove(),this.chart.crossHair.setPosition(e.pointerPosition)}},a.prototype._startMove=function(){this.chart.rootDiv.addClass(r),this.container.addClass(o),this._applyTheme(!0),this.chart.crossHair.hide()},a.prototype._stopMove=function(){this.chart.rootDiv.removeClass(r),this.container.removeClass(o),this._applyTheme(!1),this.chart.crossHair.show()},a.prototype.setPanels=function(t,e,i){this._topPanel=e,this._bottomPanel=i},a.prototype.invalidateTheme=function(){this._needsTheme=!0},a.prototype._applyTheme=function(t){var e=this.chart.theme.splitter,i=t?e.hoverFillColor:e.fillColor;this.container.css("background-color",i),this._needsTheme=!1},a.prototype.move=function(t){if(0===t)return!1;var e=this._topPanel,i=this._bottomPanel,o=e.chart,r=(e.frame.height+t)/o.chartPanelsContainer.totalPanelsHeight(),n=e.heightRatio-r,a=i.heightRatio+n;return!(r<e.minHeightRatio||r>e.maxHeightRatio||a<i.minHeightRatio||a>i.maxHeightRatio)&&(e.heightRatio=r,i.heightRatio=a,!0)},a.prototype.hitTest=function(t){return!!this._isMoving||e.prototype.hitTest.call(this,t)},a.prototype._createContainer=function(){return this.chart.chartPanelsContainer.container.scxAppend("div",t)},a.prototype.layout=function(t){e.prototype.layout.call(this,t),this.frame.top+=this._topPanel.chartPanelsContainer.frame.top,this._needsTheme&&this._applyTheme(!1)},a);function a(){var t=null!==e&&e.apply(this,arguments)||this;return t._isMoving=!1,t._needsTheme=!0,t}i.ChartPanelSplitter=n}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var e,i="scxWatermark",o=(e=t.ChartPanelHtmlComponent,__extends(r,e),r.prototype._createContainer=function(){return this.chartPanel.container.scxAppend("div",i)},r);function r(){return null!==e&&e.apply(this,arguments)||this}t.ChartPanelWatermark=o}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){"use strict";var i,o="scxWatermarkContent",r="scxWatermarkSymbol",n="scxWatermarkInfo",a=".scxInstrumentWatermark",t=(i=e.ChartPanelWatermark,__extends(l,i),l.prototype.actualTheme=function(){return this.theme||this.chart.theme.chart.instrumentWatermark},l.prototype._subscribe=function(){var t=this;this.chart.on(e.ChartEvent.INSTRUMENT_CHANGED+a,function(){t.applyText()},this).on(e.ChartEvent.SHOW_INSTRUMENT_WATERMARK_CHANGED+a,function(){t.update()},this)},l.prototype._unsubscribe=function(){var t=this.chart;t&&t.off(a,this)},l.prototype._createContainer=function(){var t=i.prototype._createContainer.call(this),e=t.scxAppend("div",o);return e.scxAppend("div",r),e.scxAppend("div",n),t},l.prototype.update=function(){var t=this.chart.showInstrumentWatermark;e.HtmlUtil.setVisibility(this.container,t),t&&(this.applyText(),i.prototype.update.call(this))},l.prototype.applyText=function(){var t,e,i=this.container;!i||(t=this.chart.instrument)&&(i.find("."+r).text(t.symbol),e=t.company,t.exchange&&(e+=" - "+t.exchange),i.find("."+n).text(e))},l.prototype.applyTheme=function(){var t,e=this.container;e&&(t=this.chart.theme.chart.instrumentWatermark,e.find("."+r).scxTextStyle(t.symbol),e.find("."+n).scxTextStyle(t.details))},l);function l(){return null!==i&&i.apply(this,arguments)||this}e.InstrumentWatermark=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var i,e=(i=t.ChartPanelWatermark,__extends(o,i),Object.defineProperty(o.prototype,"actualTheme",{get:function(){return this.theme||this.chartPanel.actualTheme.watermark},enumerable:!0,configurable:!0}),o.prototype.update=function(){this.applyText(),i.prototype.update.call(this)},o.prototype.applyText=function(){var t=this.container;t&&t.text(this.text)},o.prototype.applyTheme=function(){var t=this.container;t&&t.scxTextStyle(this.actualTheme.text)},o);function o(t){var e=i.call(this,t)||this;return t&&(e.text=t.text,e.theme=t.theme),e}t.TextWatermark=e}(StockChartX=StockChartX||{}),function(u){"use strict";var r,t;(t=r=u.SessionPeriodUnit||(u.SessionPeriodUnit={})).Minute="minute",t.Hour="hour",t.Day="day",t.Week="week",t.Month="month",t.Quarter="quarter",t.Year="year";var e=(f.getFullPeriod=function(t){if(!Array.isArray(t))return t;for(var e=1/0,i=-1/0,o=0;o<t.length;o++)var r=t[o],e=Math.min(e,r.startIndex),i=Math.max(i,r.endIndex);return{startIndex:e,endIndex:i}},f.getLimitedPeriods=function(t,e){for(var i=e.startIndex,o=e.endIndex,r=[],n=0;n<t.length;n++){var a=t[n],l=a.startIndex,s=a.endIndex;l<=o&&i<=s&&r.push({startIndex:Math.max(l,i),endIndex:Math.min(s,o)})}return r},f.getSplittedPeriods=function(t,e){for(var i=[],o=t.length-1;0<=o;o--)for(var r=t[o],n=r.startIndex,a=r.endIndex;n<=a;a--){for(var l=a;n<l&&f.isDateInPeriods(l,e);)l--;l<a&&l--;for(var s=l;n<s&&!f.isDateInPeriods(s,e);)s--;n<s&&s++,i.unshift({startIndex:s,endIndex:l}),a=s-1}return i},f.getPeriod=function(t,e,i){if(void 0===i&&(i=0),t.length){for(var o=t.length-1,r=o,n=f.getDatePoint(t[o],e);0<=--o;){var a=f.getDatePoint(t[o],e);if(n!==a){if(!i--)return{startIndex:o+1,endIndex:r};r=o,n=a}}return i?void 0:{startIndex:0,endIndex:r}}},f.getPeriodStartIndex=function(t,e,i){if(void 0===i&&(i=t.length-1),!(!t.length||i<0||i>t.length-1)){for(var o=f.getDatePoint(t[i],e),r=i;0<=r;r--){if(f.getDatePoint(t[r],e)!==o)return r+1}return 0}},f.getPeriodStartTime=function(t,e,i){void 0===i&&(i=1);var o=new Date(t);switch(e){case r.Minute:return o.setMinutes(o.getMinutes()-i);case r.Hour:return o.setHours(o.getHours()-i);case r.Day:return o.setDate(o.getDate()-i);case r.Week:return o.setDate(o.getDate()-7*i);case r.Month:return o.setMonth(o.getMonth()-i);case r.Quarter:return o.setMonth(o.getMonth()-3*i);case r.Year:return o.setFullYear(o.getFullYear()-i)}},f.getPeriodTimeInterval=function(t){switch(t){case r.Minute:return u.TimeSpan.MILLISECONDS_IN_MINUTE;case r.Hour:return u.TimeSpan.MILLISECONDS_IN_HOUR;case r.Day:return u.TimeSpan.MILLISECONDS_IN_DAY;case r.Week:return u.TimeSpan.MILLISECONDS_IN_WEEK;case r.Month:return u.TimeSpan.MILLISECONDS_IN_MONTH;case r.Quarter:return 3*u.TimeSpan.MILLISECONDS_IN_MONTH;case r.Year:return u.TimeSpan.MILLISECONDS_IN_YEAR}},f.getDatePoint=function(t,e){switch(e){case r.Minute:return t.getMinutes();case r.Hour:return t.getHours();case r.Day:return t.getDate();case r.Week:var i=f.getTimeZoneTime(t)+4*u.TimeSpan.MILLISECONDS_IN_DAY;return Math.floor(i/u.TimeSpan.MILLISECONDS_IN_WEEK);case r.Month:return t.getMonth();case r.Quarter:return Math.floor(t.getMonth()/3);case r.Year:return t.getFullYear()}},f.workingTimesToPeriods=function(t,e){var i=[];if(!e.length)return i;for(var o=t.length-1;0<=o;)if(f.isDateInWorkingTimes(t[o],e)){for(var r=o,n=t[o].getDate();0<=--o&&n===t[o].getDate()&&f.isDateInWorkingTimes(t[o],e););i.unshift({startIndex:o+1,endIndex:r})}else--o;return i},f.getTimeZoneTime=function(t){return t.getTime()-f.getTimeZoneOffset(t)},f.getTimeZoneOffset=function(t){return t.getTimezoneOffset()*u.TimeSpan.MILLISECONDS_IN_MINUTE},f.isDateInPeriods=function(t,e){if(!e.length)return!1;for(var i=0;i<e.length;i++){var o=e[i],r=o.startIndex,n=o.endIndex;if(r<t&&t<=n)return!0}return!1},f.isDateInWorkingTimes=function(t,e){for(var i=f.getTimeZoneTime(t),o=i%u.TimeSpan.MILLISECONDS_IN_DAY,r=new Date(i).getUTCDay(),n=0;n<e.length;n++){var a=e[n],l=a.startDay,s=a.startTime,c=a.endDay,h=a.endTime;if(l<=r&&r<=c&&(s<=o&&o<=h))return!0}return!1},Object.defineProperty(f.prototype,"workingTimes",{get:function(){return this._workingTimes},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"periods",{get:function(){return this._periods},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"chart",{get:function(){return this._chart},set:function(t){this._chart=t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"_dates",{get:function(){return this._chart.dataManager.getDataSeries(u.DataSeriesSuffix.DATE).values},enumerable:!0,configurable:!0}),f.prototype.setWorkingTimes=function(t){Array.isArray(t)&&(this._workingTimes=t,this._periods=f.workingTimesToPeriods(this._dates,this._workingTimes))},f.prototype.getPeriod=function(t){void 0===t&&(t=0);var e=this._dates;if(e.length){var i=this._periods,o=e[e.length-1].getDay()-t;o<0&&(o+=7);for(var r=i.length-1;0<=r;r--){var n=i[r];if(e[n.startIndex].getDay()===o)return n}}},f);function f(){this._workingTimes=[],this._periods=[]}u.Session=e}(StockChartX=StockChartX||{}),function(l){var t=(s.verificationFrame=function(t,e,i){if(null==e||null==i)return!1;var o=e.getFullYear()===i.getFullYear();switch(t){case l.Duration.WEEKLY:return s._verificationInOneWeek(e,i);case l.Duration.MONTHLY:return e.getMonth()===i.getMonth()&&o;case l.Duration.QUARTERLY:for(var r=e.getMonth(),n=i.getMonth(),a=0;a<12;a+=3)if(a<=r&&r<=a+2&&a<=n&&n<=a+2&&o)return!0;return!1;case l.Duration.ANNUALY:return o;default:return!1}},s._verificationInOneWeek=function(t,e){var i=(e.getTime()-t.getTime())/1e3/60/60/24;return!(i<-7||7<i)&&(0<=i?e.getDay()>=t.getDay():t.getDay()>e.getDay())},s);function s(){}l.Frame=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(C){"use strict";var o,t;C.PlotType={INDICATOR:"indicator",PRICE_STYLE:"priceStyle",USER:"user"},Object.freeze(C.PlotType),(t=o=C.PlotEvent||(C.PlotEvent={})).DATA_SERIES_CHANGED="plotDataSeriesChanged",t.PANEL_CHANGED="plotPanelChanged",t.THEME_CHANGED="plotThemeChanged",t.STYLE_CHANGED="plotStyleChanged",t.SHOW_VALUE_MARKERS_CHANGED="plotShowValueMarkersChanged",t.SHOW_VALUE_LINES_CHANGED="plotShowValueLinesChanged",t.EXTEND_VALUE_LINES_CHANGED="plotExtendValueLinesChanged",t.VISIBLE_CHANGED="plotVisibleChanged",t.VALUE_SCALE_CHANGED="plotValueScaleChanged",t.BASE_VALUE_CHANGED="plotBaseValueChanged";var r,e=(r=C.ChartPanelObject,__extends(i,r),Object.defineProperty(i.prototype,"plotThemeKey",{get:function(){return this._plotThemeKey},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataSeries",{get:function(){return this._dataSeries},set:function(t){this.setDataSeries(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"theme",{get:function(){return this._theme},set:function(t){var e=this._theme;this._theme=t,this.fire(o.THEME_CHANGED,t,e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"actualTheme",{get:function(){return this._theme?this._theme:this.chart.theme.plot[this._plotThemeKey][this.plotStyle]},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"plotStyle",{get:function(){var t=this._options.plotStyle;if(t)return t;var e=this.constructor.defaults;return e&&e.plotStyle},set:function(t){this._setOption("plotStyle",t,o.STYLE_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showValueMarkers",{get:function(){return this._options.showValueMarkers},set:function(t){this._setOption("showValueMarkers",t,o.SHOW_VALUE_MARKERS_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showValueLines",{get:function(){return this._options.showValueLines},set:function(t){this._setOption("showValueLines",t,o.SHOW_VALUE_LINES_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"extendValueLines",{get:function(){return this._options.extendValueLines},set:function(t){this._setOption("extendValueLines",t,o.EXTEND_VALUE_LINES_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"plotType",{get:function(){return this._plotType},enumerable:!0,configurable:!0}),i.prototype.update=function(){},i.prototype.setDataSeries=function(t){var e;if(t instanceof C.DataSeries)e=[t];else{if(!Array.isArray(t))throw new TypeError("Single data series or an array of data series expected.");e=t}var i=this._dataSeries;i!==e&&(this._dataSeries=e,this.fire(o.DATA_SERIES_CHANGED,e,i))},i.prototype._onChartPanelChanged=function(t){this.fire(o.PANEL_CHANGED,this.chartPanel,t)},i.prototype._onValueScaleChanged=function(t){this.fire(o.VALUE_SCALE_CHANGED,this.valueScale,t)},i.prototype._onVisibleChanged=function(t){this.fire(o.VISIBLE_CHANGED,this.visible,t)},i.prototype.findDataSeries=function(t){for(var e=0,i=this._dataSeries;e<i.length;e++){var o=i[e];if(o.nameSuffix===t)return o}return null},i.prototype.minMaxValues=function(t,e){for(var i=1/0,o=-1/0,r=0,n=this._dataSeries;r<n.length;r++){var a,l=n[r];l.isValueDataSeries&&((a=l.minMaxValues(t,e)).min<i&&(i=a.min),a.max>o&&(o=a.max))}return{min:i,max:o}},i.prototype._valueDrawParams=function(){var t,e,i,o=this.chart,r=this._dataSeries[0],n=this.findDataSeries(C.DataSeriesSuffix.DATE),a=this.projection;i=n?(t=o.dateScale.visibleDateRange,e=n.floorIndex(t.min),n.ceilIndex(t.max)):(e=o.firstVisibleIndex,o.lastVisibleIndex);var l=Math.max(r.leftNearestVisibleValueIndex(e)-1,0),s=Math.min(r.rightNearestVisibleValueIndex(i)+1,r.length-1),c=n?0:a.columnByRecord(l);return{renderer:this.renderer,projection:a,dates:n&&n.values,values:r.values,startIndex:l,endIndex:s,startColumn:c,theme:this.actualTheme}},i.prototype._barDrawParams=function(t){void 0===t&&(t=!0);for(var e,i,o,r=this.chart,n=this._dataSeries,a=this.projection,l=r.dataManager.getDataSeries(C.DataSeriesSuffix.DATE),s=null,c=null,h=null,u=null,f=0,d=n;f<d.length;f++){var p=d[f];switch(p.nameSuffix){case C.DataSeriesSuffix.DATE:l=p;break;case C.DataSeriesSuffix.OPEN:s=p;break;case C.DataSeriesSuffix.HIGH:c=p;break;case C.DataSeriesSuffix.LOW:h=p;break;case C.DataSeriesSuffix.CLOSE:u=p}}o=t&&l?(e=r.dateScale.visibleDateRange,i=l.floorIndex(e.min),l.ceilIndex(e.max)):(i=r.firstVisibleIndex,r.lastVisibleIndex);var y=Math.max(l.leftNearestVisibleValueIndex(i)-1,0),m=Math.min(l.rightNearestVisibleValueIndex(o)+1,l.length-1),_=a.columnByRecord(y);return{renderer:this.renderer,projection:a,values:this._dataSeries[0].values,dates:l&&l.values,open:s&&s.values,high:c&&c.values,low:h&&h.values,close:u&&u.values,startIndex:y,endIndex:m,startColumn:_,theme:this.actualTheme}},i.prototype.drawValueMarkers=function(){var t,e,i,o,r,n,a,l,s,c;this.showValueMarkers&&(e=(t=this._dataSeries[0]).values,i=this.chart.valueMarker,o=e[t.leftNearestVisibleValueIndex(e.length)],r=i.theme,(n=this.actualTheme).valueMarker?r=n.valueMarker:(a=void 0,a=n.strokeColor?n.strokeColor:n.fill&&!1!==n.fill.fillEnabled?n.fill.linearGradient?n.fill.linearGradient[0]||n.fill.linearGradient[0].color:n.fill.radialGradient?n.fill.radialGradient[0].color:n.fill.fillColor:n.line&&!1!==n.line.strokeEnabled?n.line.strokeColor:r.fill.fillColor,r.fill.fillColor=a,r.text.fillColor=C.HtmlUtil.isDarkColor(a)?"white":"black"),i.draw(o,this.panelValueScale,r),this.showValueLines&&null!=o&&(l=this._dataSeries[0].length-1,s=n.valueLine,(c=new C.ValueLine({point:{record:.5+l,value:o},theme:{strokeColor:s&&n.valueLine.strokeColor||r.fill.fillColor,width:s&&n.valueLine.width||1,lineStyle:s&&s.lineStyle||C.LineStyle.DASH},extended:this.extendValueLines,visible:this.showValueLines})).chartPanel=this.chartPanel,c.valueScale=this.valueScale,c.draw()))},i);function i(t){var e=r.call(this,t)||this;e._plotThemeKey="",e._dataSeries=[],e._plotType=C.PlotType.USER;var i=e.suppressEvents(!0);t&&(null!=t.dataSeries&&e.setDataSeries(t.dataSeries),null!=t.chartPanel&&(e.chartPanel=t.chartPanel),null!=t.theme&&(e.theme=t.theme),t.plotType&&(e._plotType=t.plotType),t.options&&(e._options=t.options),t.valueScale&&(e.valueScale=t.valueScale),e.plotStyle=t.plotStyle,t.zIndex&&(e.zIndex=t.zIndex));var o=e._options;return null==o.showValueMarkers&&(o.showValueMarkers=!0),null==o.visible&&(o.visible=!0),null==e.zIndex&&(e.zIndex=e.plotType===C.PlotType.PRICE_STYLE?30:100),e.suppressEvents(i),e}C.Plot=e}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(u){"use strict";var o,t=(o=u.Plot,__extends(e,o),Object.defineProperty(e.prototype,"settings",{get:function(){return this._settings},set:function(t){var e=u.JsUtil.merge(this._settings,t),i=!!this._handleSettings(e);this._settings=e,this.chart&&this.chart.setNeedsUpdate(i)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rigthMargin",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_dates",{get:function(){var t=this.chart;return t?t.dataManager.getDataSeries(u.DataSeriesSuffix.DATE).values:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_canvasWidth",{get:function(){var t=this.chart.container,e=this.chartPanel.layer.size,i=t.find("."+this.valueScale.rightPanelCssClass).outerWidth();return e.width-i-this.chart.getTradingPanelWidth()},enumerable:!0,configurable:!0}),e.prototype.update=function(){this._handleSettings(this.settings)},e.prototype.drawValueMarkers=function(){var e=this;o.prototype.drawValueMarkers.call(this);var i=this.chart.valueMarker;this._labelLines.forEach(function(t){i.theme.fill.fillColor=t.color,i.draw(t.value,e.panelValueScale)})},e.prototype._handleSettings=function(t){},e.prototype._onChartPanelChanged=function(t){var e=this.chart;e&&(this._rth.chart=e,this._eth.chart=e,this.update(),this._settingsHandled=!0,o.prototype._onChartPanelChanged.call(this,t))},e.prototype._getSizeInPixels=function(t){switch(t.unit){case u.IndicatorSizeUnit.Pixel:return t.value;case u.IndicatorSizeUnit.Percent:return t.value*this._canvasWidth/100}},e.prototype._drawLine=function(t,e,i,o){void 0===o&&(o=null),Array.isArray(t)||(t=[t]);for(var r=this.renderer,n=0;n<t.length;n++){var a=t[n],l=Array.isArray(e)?e[n]:e,s=Array.isArray(i)?i[n]:i;r.line(l,a,s,a)}r.stroke(o),r.closePath(),r.beginPath()},e.prototype._drawLabelLines=function(){var e=this;this._labelLines.forEach(function(t){e._drawLabelLine(t.label,t.y,t.color,t.width||200)})},e.prototype.getLabelTheme=function(){return this.chart.valueMarker.theme.text},e.prototype._drawLabelLine=function(t,e,i,o){void 0===o&&(o=200);var r={fillColor:i},n={strokeColor:i,lineStyle:u.LineStyle.DASH},a=this.getLabelTheme(),l=this.renderer;l.textTheme(a),l.textOptions({align:u.TextAlign.CENTER,baseline:u.TextBaseline.MIDDLE});var s=l.textWidth(t)+8,c=this._canvasWidth,h=c-s-this.rigthMargin;l.rect(h,e-8,s,16),l.fill(r),l.fillText(t,h+s/2,e,a),l.closePath(),l.beginPath(),this._drawPrevLabelLine({renderer:l,y:e,lineEndX:h,endX:c,width:o,strokeTheme:n}),l.closePath(),l.beginPath()},e.prototype._drawPrevLabelLine=function(t){var e=t.renderer,i=t.endX,o=t.width,r=t.y,n=t.lineEndX,a=t.strokeTheme;e.line(i-o,r,n,r),e.stroke(a),e.closePath(),e.beginPath()},e.prototype._isValidDetails=function(t){return Array.isArray(t)&&0<t.length},e);function e(){var t=null!==o&&o.apply(this,arguments)||this;return t._settingsHandled=!1,t._rth=new u.Session,t._eth=new u.Session,t._labelLines=[],t}u.AdvancedPlot=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(T){"use strict";var e,t;(t=e=T.PlotEvent||(T.PlotEvent={})).COLUMN_WIDTH_RATIO_CHANGED="plotColumnWidthRatioChanged",t.MIN_WIDTH_CHANGED="plotMinWidthChanged",T.BarPlotStyle={OHLC:"OHLC",COLORED_OHLC:"coloredOHLC",HLC:"HLC",COLORED_HLC:"coloredHLC",HL:"HL",COLORED_HL:"coloredHL",CANDLE:"candle",HOLLOW_CANDLE:"hollowCandle",HEIKIN_ASHI:"heikinAshi",RENKO:"renko",LINE_BREAK:"lineBreak",POINT_AND_FIGURE:"pointAndFigure",KAGI:"kagi",CANDLE_VOLUME:"candleVolume",EQUI_VOLUME:"equiVolume",EQUI_VOLUME_SHADOW:"equiVolumeShadow"},Object.freeze(T.BarPlotStyle);var l,i=(l=T.Plot,__extends(S,l),Object.defineProperty(S.prototype,"columnWidthRatio",{get:function(){return this._options.columnWidthRatio||S.defaults.columnWidthRatio},set:function(t){if(T.JsUtil.isNegativeNumber(t)||1<t)throw new Error("Ratio must be in range [0..1]");this._setOption("columnWidthRatio",t,e.COLUMN_WIDTH_RATIO_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"minWidth",{get:function(){return this._options.minWidth||S.defaults.minWidth},set:function(t){if(!T.JsUtil.isPositiveNumber(t))throw new Error("Min width must be greater than 0.");this._setOption("minWidth",t,e.MIN_WIDTH_CHANGED)},enumerable:!0,configurable:!0}),S.prototype.draw=function(){if(this.visible){var t=T.BarPlotStyle;switch(this.plotStyle){case t.OHLC:case t.HLC:case t.HL:this._drawBars();break;case t.COLORED_OHLC:case t.COLORED_HLC:case t.COLORED_HL:this._drawColoredBars();break;case t.HOLLOW_CANDLE:this._drawHollowCandles();break;case t.RENKO:this._drawBricks(!0);break;case t.LINE_BREAK:this._drawBricks();break;case t.KAGI:this._drawKagi();break;case t.CANDLE_VOLUME:this._drawVolumeCandles();break;case t.EQUI_VOLUME:this._drawEquiVolumeCandles();break;case t.EQUI_VOLUME_SHADOW:this._drawEquiVolumeShadowCandles();break;default:this._drawCandles()}}},S.prototype.drawValueMarkers=function(){var t,e,i,o,r,n,a;!this.showValueMarkers||0!==(t=this._barDrawParams()).values.length&&(e=this.chart.valueMarker,i=this._valueMarkerTheme(t),o=t.values.length-1,r=t.close[o],e.draw(r,this.panelValueScale,i),this.showValueLines&&null!=r&&(n=t.theme.valueLine,(a=new T.ValueLine({point:{record:.5+o,value:r},theme:{strokeColor:n&&n.strokeColor||i.fill.fillColor,width:n&&n.width||1,lineStyle:n&&n.lineStyle||T.LineStyle.DASH},extended:this.extendValueLines,visible:this.showValueLines})).chartPanel=this.chartPanel,a.valueScale=this.valueScale,a.draw()))},S.prototype._barDrawParams=function(t){void 0===t&&(t=!0);var e,i,o,r,n,a=l.prototype._barDrawParams.call(this,t);return this._indicator&&(i=(e=this._indicator).open,o=e.high,r=e.low,n=e.close,a.open=i.values.slice(),a.high=o.values.slice(),a.low=r.values.slice(),a.close=n.values.slice(),a.open.shift(),a.high.shift(),a.low.shift(),a.close.shift(),a.values=a.close),a},S.prototype._valueMarkerTheme=function(t){var e=t.theme,i=e.valueMarker;if(i)return i;var o=t.values.length-1;if(t.close[o]>=t.open[o]){if(i=e.upCandle&&e.upCandle.valueMarker)return i}else if(i=e.downCandle&&e.downCandle.valueMarker)return i;var r=this._getMarkerFillColor(t);return(i=this.chart.valueMarker.theme).fill.fillColor=r,i.text.fillColor=T.HtmlUtil.isDarkColor(r)?"white":"black",i},S.prototype._getMarkerFillColor=function(t){var e=t.values.length-1,i=t.close[e]>=t.open[e],o=T.BarPlotStyle;switch(this.plotStyle){case o.OHLC:case o.HLC:case o.HL:return t.theme.strokeColor;case o.COLORED_OHLC:case o.COLORED_HLC:case o.COLORED_HL:return t.theme[i?"upBar":"downBar"].strokeColor;case o.CANDLE:case o.HOLLOW_CANDLE:case o.HEIKIN_ASHI:case o.RENKO:case o.CANDLE_VOLUME:case o.EQUI_VOLUME:case o.EQUI_VOLUME_SHADOW:return t.theme[i?"upCandle":"downCandle"].fill.fillColor;case o.LINE_BREAK:return i?t.theme.upCandle.border.strokeColor:t.theme.downCandle.fill.fillColor;case o.POINT_AND_FIGURE:case o.KAGI:return t.theme[i?"upCandle":"downCandle"].border.strokeColor;default:return null}},S.prototype._drawBars=function(){var t=this._barDrawParams();if(0!==t.values.length){var e,i=t.renderer,o=t.projection,r=t.dates,n=0,a=this.plotStyle,l=a===S.Style.OHLC,s=a===S.Style.HLC;!l&&!s||(e=this.chart.dateScale.columnWidth*this.columnWidthRatio)>this.minWidth&&(n=Math.round(e/2)),i.beginPath();for(var c=t.startIndex,h=t.startColumn;c<=t.endIndex;c++,h++){var u,f,d,p,y,m=t.open[c],_=t.high[c],C=t.low[c],b=t.close[c];null!=m&&null!=_&&null!=C&&null!=b&&(u=r?o.xByDate(r[c]):o.xByColumn(h),f=o.yByValue(_),d=o.yByValue(C),l&&0<n&&(p=o.yByValue(m),i.horLine(u,u-n,p)),(l||s)&&0<n&&(y=o.yByValue(b),i.horLine(u,u+n,y)),f===d&&d--,i.verLine(u,f,d+T.CanvasOffset))}i.stroke(t.theme)}},S.prototype._drawColoredBars=function(){var t=this._barDrawParams();0!==t.values.length&&(this._drawColoredBarItems(t,!0,t.theme.upBar),this._drawColoredBarItems(t,!1,t.theme.downBar))},S.prototype._drawColoredBarItems=function(t,e,i){var o,r=t.renderer,n=t.projection,a=this.plotStyle,l=a===S.Style.COLORED_OHLC,s=a===S.Style.COLORED_HLC,c=0;!l&&!s||(o=this.chart.dateScale.columnWidth*this.columnWidthRatio)>this.minWidth&&(c=Math.round(o/2)),r.beginPath();for(var h=t.startIndex,u=t.startColumn;h<=t.endIndex;h++,u++){var f,d,p,y,m,_=t.open[h],C=t.high[h],b=t.low[h],g=t.close[h];null!=_&&null!=C&&null!=b&&null!=g&&e===_<=g&&(f=t.dates?n.xByDate(t.dates[h]):n.xByColumn(u),d=n.yByValue(C),p=n.yByValue(b),l&&0<c&&(y=n.yByValue(_),r.horLine(f+T.CanvasOffset,f-c+T.CanvasOffset,y)),(l||s)&&0<c&&(m=n.yByValue(g),r.horLine(f+T.CanvasOffset,f+c+T.CanvasOffset,m)),d===p&&p--,r.verLine(f,d+T.CanvasOffset,p+T.CanvasOffset))}r.stroke(i)},S.prototype._drawCandles=function(){var t,e,i=this._barDrawParams();0!==i.values.length&&(t=i.theme.downCandle.border.strokeEnabled,e=i.theme.upCandle.border.strokeEnabled,this._drawCandleItems(i,!0,!0,e),this._drawCandleItems(i,!1,!0,t),this._drawCandleItems(i,!0,!1,e),this._drawCandleItems(i,!1,!1,t))},S.prototype._drawCandleItems=function(t,e,i,o){var r=t.renderer,n=t.theme.upCandle,a=t.theme.downCandle,l=t.projection,s=this.chart.dateScale.columnWidth,c=Math.max(s*this.columnWidthRatio,this.minWidth),h=t.startIndex,u=t.startColumn,f=t.endIndex,d=t.open,p=t.high,y=t.low,m=t.close,_=Math.round(c/2),c=2*_;r.beginPath();for(var C=h,b=u;C<=f;C++,b++){var g,S,v,w,P,k=d[C],x=p[C],O=y[C],E=m[C];null!=k&&null!=x&&null!=O&&null!=E&&e===k<=E&&(g=t.dates?l.xByDate(t.dates[C]):l.xByColumn(b),S=l.yByValue(k),(v=l.yByValue(E))===S&&S--,i?c<3?r.verLine(g,v,S):o?r.rect(g-_,Math.min(S,v),c,Math.max(Math.abs(S-v),1)):r.rect(g-_+T.CanvasOffset,Math.min(S,v)+T.CanvasOffset,c-2*T.CanvasOffset,Math.max(Math.abs(S-v),1)):(w=l.yByValue(x),P=l.yByValue(O),c<3?(r.verLine(g,Math.min(S,v),w),r.verLine(g,Math.max(S,v),P)):(o?r.verLine(g,Math.min(S,v)-2*T.CanvasOffset,w-T.CanvasOffset):r.verLine(g,Math.min(S,v+T.CanvasOffset),w+T.CanvasOffset),r.verLine(g,Math.max(S,v)+T.CanvasOffset,P+T.CanvasOffset))))}var I,D=e?n:a;i?c<3?(I={strokeColor:D.fill.fillColor},r.stroke(I)):r.fillStroke(D.fill,D.border):r.stroke(D.wick)},S.prototype._drawHollowCandles=function(){var t,e,i,o,r,n=this._barDrawParams();0!==n.values.length&&(t=n.renderer,e=n.theme.upCandle,i=n.theme.downCandle,o=n.theme.upHollowCandle,r=n.theme.downHollowCandle,this._drawHollowCandleItems(n,!0,!0,!1,!1),t.stroke(o.border),this._drawHollowCandleItems(n,!0,!0,!0,!1),t.stroke(o.wick),this._drawHollowCandleItems(n,!0,!1,!1,!1),t.fillStroke(e.fill,e.border),this._drawHollowCandleItems(n,!0,!1,!1,!0),t.stroke(e.wick),this._drawHollowCandleItems(n,!1,!0,!1,!1),t.stroke(r.border),this._drawHollowCandleItems(n,!1,!0,!0,!1),t.stroke(r.wick),this._drawHollowCandleItems(n,!1,!1,!1,!1),t.fillStroke(i.fill,i.border),this._drawHollowCandleItems(n,!1,!1,!1,!0),t.stroke(i.wick))},S.prototype._drawHollowCandleItems=function(t,e,i,o,r){for(var n=t.renderer,a=t.projection,l=null,s=this.chart.dateScale.columnWidth,c=Math.max(s*this.columnWidthRatio,3),h=Math.round(c/2),c=2*h,u=Math.round(Math.max(c,3)-2*T.CanvasOffset),f=Math.round(u/2)-2*T.CanvasOffset,d=t.startIndex-1;0<=d;d--)if(null==t.open[d]&&null==t.high[d]&&null==t.low[d]&&null==t.close[d]){l=t.close[d];break}n.beginPath();for(var p=t.startIndex,y=t.startColumn;p<=t.endIndex;p++,y++){var m,_,C,b,g,S,v=t.open[p],w=t.high[p],P=t.low[p],k=t.close[p];null!=v&&null!=w&&null!=P&&null!=k&&(null==l&&(l=v),m=l<=k,l=k,e===m&&i===v<k&&(_=t.dates?a.xByDate(t.dates[p]):a.xByColumn(y),C=a.yByValue(v),b=a.yByValue(k),o||r?(g=a.yByValue(w),S=a.yByValue(P),o?(n.verLine(_,Math.min(C,b),g),n.verLine(_,Math.max(C,b),S)):(n.verLine(_,Math.min(C,b)+T.CanvasOffset,g+T.CanvasOffset),n.verLine(_,Math.max(C,b)+T.CanvasOffset,S+T.CanvasOffset))):i?n.rect(_-f,Math.min(C,b),u-2*T.CanvasOffset,Math.max(Math.abs(C-b),1)):n.rect(_-h+T.CanvasOffset,Math.min(C,b)+T.CanvasOffset,c-2*T.CanvasOffset,Math.max(Math.abs(C-b),1))))}},S.prototype._drawBricks=function(t){var e=this._barDrawParams();0!==e.values.length&&(this._drawBrickItems(e,!0,t),this._drawBrickItems(e,!1,t))},S.prototype._drawBrickItems=function(t,e,i){var o=t.renderer,r=t.projection,n=this.chart.dateScale.columnWidth,a=Math.max(n*this.columnWidthRatio,this.minWidth),l=Math.round(a/2);o.beginPath();for(var s=t.startIndex,c=t.startColumn;s<=t.endIndex;s++,c++){var h,u,f,d=t.open[s],p=t.close[s],y=d<=p,a=2*l;null!=d&&null!=p&&(e&&!y||!e&&y||(h=t.dates?r.xByDate(t.dates[s]):r.xByColumn(c),u=r.yByValue(d),(f=r.yByValue(p))===u&&u--,a<3?o.verLine(h,f,u):o.rect(h-l+T.CanvasOffset,Math.min(u,f)+T.CanvasOffset,a,Math.max(Math.abs(u-f),1))))}var m,_=e?t.theme.upCandle:t.theme.downCandle;a<3?(m={strokeColor:_.fill.fillColor},o.stroke(m)):o.fillStroke(_.fill,_.border)},S.prototype._drawKagi=function(){var t=this._barDrawParams();0!==t.values.length&&(this._drawKagiItems(t,!0),this._drawKagiItems(t,!1))},S.prototype._drawKagiItems=function(t,e){var i=t.renderer,o=t.projection,r=null,n=null,a=!1,l=null;i.beginPath();for(var s=0;s<=t.endIndex;s++){var c,h,u,f=t.open[s],d=t.close[s],p=f,y=d,m=!0;null!=f&&null!=d&&(null===n?(n=f<=d,m=!1):n?d<l&&(a=!0,p=(m=e)?f:l,y=e?l:d):l<d&&(a=!0,m=!e,p=e?l:f,y=e?d:l),c=t.dates?o.xByDate(t.dates[s]):o.xByRecord(s),s>=t.startIndex&&(n===e||a)&&(h=o.yByValue(p),u=o.yByValue(y),m?i.horLine(r,c,h):i.moveTo(c,h),i.lineTo(c,u)),r=c,l=n?a?Math.max(f,d):Math.min(f,d):a?Math.min(f,d):Math.max(f,d),a&&(n=!n,a=!1))}var _=t.theme[e?"upCandle":"downCandle"].border;i.stroke(_)},S.prototype._drawVolumeCandles=function(){var t,e,i=this._barDrawParams();0!==i.values.length&&(t=i.theme.downCandle.border.strokeEnabled,e=i.theme.upCandle.border.strokeEnabled,this._drawVolumeCandlesItems(i,!0,!0,!0,!1),this._drawVolumeCandlesItems(i,!1,!0,!0,!1),this._drawVolumeCandlesItems(i,!0,!0,!1,e),this._drawVolumeCandlesItems(i,!1,!0,!1,t),this._drawVolumeCandlesItems(i,!0,!1,!1,e),this._drawVolumeCandlesItems(i,!1,!1,!1,t))},S.prototype._drawVolumeCandlesItems=function(t,e,i,o,r){var n=t.renderer,a=t.theme.upCandle,l=t.theme.downCandle,s=t.projection,c=this.chart.dateScale.columnValues;n.beginPath();for(var h=t.startIndex,u=t.startColumn;h<=t.endIndex;h++,u++){var f,d,p,y,m,_,C=t.open[h],b=t.high[h],g=t.low[h],S=t.close[h];null!=C&&null!=b&&null!=g&&null!=S&&e===C<=S&&(f=t.dates?s.xByDate(t.dates[h]):s.xByColumn(u),d=s.yByValue(C),p=s.yByValue(S),_=Math.round(c.widths[h]),p===d&&d--,i?_<3&&o?n.verLine(f,p,d):3<=_&&!1===o&&(r?_%2==1?n.rect(f-_/2+T.CanvasOffset,Math.min(d,p),_-2*T.CanvasOffset,Math.max(Math.abs(d-p),1)):n.rect(f-_/2,Math.min(d,p),_,Math.max(Math.abs(d-p),1)):_%2==1?n.rect(f-_/2,Math.min(d,p)+T.CanvasOffset,_,Math.max(Math.abs(d-p),1)):n.rect(f-_/2+T.CanvasOffset,Math.min(d,p)+T.CanvasOffset,_-2*T.CanvasOffset,Math.max(Math.abs(d-p),1))):(y=s.yByValue(b),m=s.yByValue(g),_<3?(n.verLine(f,Math.min(d,p),y),n.verLine(f,Math.max(d,p),m)):(r?n.verLine(f,Math.min(d,p)-2*T.CanvasOffset,y-T.CanvasOffset):n.verLine(f,Math.min(d,p+T.CanvasOffset),y+T.CanvasOffset),n.verLine(f,Math.max(d,p)+T.CanvasOffset,m+T.CanvasOffset))))}var v,w=e?a:l;i?o?(v={strokeColor:w.fill.fillColor},n.stroke(v)):!1===o&&n.fillStroke(w.fill,w.border):n.stroke(w.wick)},S.prototype._drawEquiVolumeCandles=function(){var t,e,i=this._barDrawParams(!1);0!==i.values.length&&(t=i.theme.downCandle.border.strokeEnabled,e=i.theme.upCandle.border.strokeEnabled,this._drawEquiVolumeItems(i,!0,!0,!1),this._drawEquiVolumeItems(i,!1,!0,!1),this._drawEquiVolumeItems(i,!0,!1,e),this._drawEquiVolumeItems(i,!1,!1,t))},S.prototype._drawEquiVolumeItems=function(t,e,i,o){var r=t.renderer,n=t.theme.upCandle,a=t.theme.downCandle,l=t.projection,s=this.chart.dateScale.columnValues;r.beginPath();for(var c=t.startIndex,h=t.startColumn;c<=t.endIndex;c++,h++){var u,f,d,p,y,m=t.open[c],_=t.high[c],C=t.low[c],b=t.close[c];null!=m&&null!=_&&null!=C&&null!=b&&e===m<=b&&(u=t.dates?l.xByDate(t.dates[c]):l.xByColumn(h),(f=l.yByValue(C))===(d=l.yByValue(_))&&f--,(p=Math.round(s.widths[c]))<3&&i&&r.verLine(u,f,d),!1===i&&3<=p&&(o?(y=Math.trunc(u-p/2),r.rect(y,f,p,d-f)):p%2==1?r.rect(u-p/2,f+T.CanvasOffset,p,d-f):r.rect(u-p/2+T.CanvasOffset,f+T.CanvasOffset,p-2*T.CanvasOffset,d-f)))}var g,S=e?n:a;i?(g={strokeColor:S.fill.fillColor},r.stroke(g)):r.fillStroke(S.fill,S.border)},S.prototype._drawEquiVolumeShadowCandles=function(){var t=this._barDrawParams();0!==t.values.length&&(this._drawEquiVolumeShadowItems(t,!0,!1,!0),this._drawEquiVolumeShadowItems(t,!1,!1,!0),this._drawEquiVolumeShadowItems(t,!0,!0,!1),this._drawEquiVolumeShadowItems(t,!1,!0,!1))},S.prototype._drawEquiVolumeShadowItems=function(t,e,i,o){var r,n=t.renderer,a=t.theme.upCandle,l=t.theme.downCandle,s=t.projection,c=this.chart.dateScale.columnValues;n.beginPath();for(var h=t.startIndex,u=t.startColumn;h<=t.endIndex;h++,u++){var f,d,p,y,m,_=t.open[h],C=t.high[h],b=t.low[h],g=t.close[h];null!=_&&null!=C&&null!=b&&null!=g&&e===_<=g&&(r=Math.round(c.widths[h])-1,f=t.dates?s.xByDate(t.dates[h]):s.xByColumn(u),d=s.yByValue(b),p=s.yByValue(C),y=s.yByValue(_),d===p&&d--,r<3&&o&&n.verLine(f,d,p),i&&3<=r&&(m=Math.trunc(f-r/2),n.rect(m,d,r,p-d)),3<=r&&(m=Math.trunc(f-r/2),e?n.rect(m,y,r,d-y):n.rect(m,y,r,p-y)))}var S,v=e?a:l;o&&(S={strokeColor:v.fill.fillColor},n.stroke(S)),i?(S={strokeColor:v.fill.fillColor},n.stroke(S)):n.fillStroke(v.fill,v.border)},S.Style=T.BarPlotStyle,S.defaults={plotStyle:T.BarPlotStyle.CANDLE,minWidth:1,columnWidthRatio:.8},S);function S(t){var e=l.call(this,t)||this;return t&&t.indicator&&(e._indicator=t.indicator),e._plotThemeKey="bar",e}T.BarPlot=i}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(i){"use strict";var t;(t=i.BarStatsPlotStyle||(i.BarStatsPlotStyle={})).TABLE="table";var o,e=(o=i.AdvancedPlot,__extends(r,o),Object.defineProperty(r.prototype,"settings",{get:function(){return this._settings},set:function(r){var n=!1,t=r.groupsTradeVolumeFilter.length-this._settings.groupsTradeVolumeFilter.length;0!=t?(0<t?this._addNewTables(t):(this.table.deleteTable(Math.abs(t)),this._valueMaps.splice(0,Math.abs(t))),n=!0):this._settings.groupsTradeVolumeFilter.forEach(function(t,e){var i,o;i=t,o=r.groupsTradeVolumeFilter[e],i.max==o.max&&i.min==o.min||(n=!0)}),this._settings=$.extend(this._settings,r),this.setupTable(),n&&this.calcAllValue()},enumerable:!0,configurable:!0}),r.prototype._addNewTables=function(t){this.table.addNewTables(t);for(var e=0;e<t;e++){var i=n();this._valueMaps.push(i)}},r.prototype.setupTable=function(){var t=Object.entries(this._settings.groupsRows).filter(function(t){t[0];return!1!==t[1].enabled}).sort(function(t,e){var i=t[1],o=e[1];return i.order-o.order});this.table.titles=t.map(function(t,e){return t[0]}),this.table.settings=this._settings.general,this.table.rowsSettings=this._settings.groupsRows,this.table.extraTableSettings=this._settings.groupsTradeVolumeFilter},r.prototype.draw=function(){var t,e,i,o,r;this.visible&&(t=this._barDrawParams(),e=this.chart.getTradingPanelWidth(),i=this.chart.dateScale.columnWidth,o=this.chartPanel.contentFrame.height,r=this.chartPanel.contentFrame.width+e,this.chartPanel.drawValueScale=!1,i<3||this.table.draw({params:t,valueMaps:this._valueMaps,columnWidth:i,height:o,width:r}))},r.prototype.calcValue=function(n){var a=this,l=this.dataManager.barDataSeries();n>=l.details.values.length||this._valueMaps.forEach(function(t,e,i){var o=a._settings.groupsTradeVolumeFilter[e],r=l.details.values[n];a.updateValueMap({item:r,filter:o,valueMap:t,dataSeries:l,index:n})})},r.prototype.calcAllValue=function(){var n=this,a=this.dataManager.barDataSeries();this._valueMaps.forEach(function(i,t,e){var o;(o=i).deltamax.max=null,o.deltamax.min=null,o.deltamin.max=null,o.deltamin.min=null,o.volume.max=null,o.volume.min=null,o.ticks.max=null,o.ticks.min=null,o.ticks.max=null,o.ticks.min=null,o.buyPercentVolume.max=null,o.buyPercentVolume.min=null,o.sellPercentVolume.max=null,o.sellPercentVolume.min=null,o.buyvolume.max=null,o.buyvolume.min=null,o.sellvolume.max=null,o.sellvolume.min=null,o.delta.max=null,o.delta.min=null,o.deltafinish.max=null,o.deltafinish.min=null;var r=n._settings.groupsTradeVolumeFilter[t];a.details.values.forEach(function(t,e){n.updateValueMap({item:t,filter:r,valueMap:i,dataSeries:a,index:e})})})},r.prototype.updateValueMap=function(t){var e=t.item,i=t.filter,o=t.index,r=t.dataSeries,n=t.valueMap,a=r.close.values[o],l=0,s=0;if(e.length){for(var c=e[0].bidInfo.volume-e[0].askInfo.volume,h=e[0].bidInfo.volume-e[0].askInfo.volume,u=void 0,f=0,d=0,p=0,y=e;p<y.length;p++){var m,_=y[p];k(i.min)&&_.volume<=i.min||k(i.max)&&_.volume>=i.max||(_.price===a&&(u=_),f+=_.bidInfo.volume,d+=_.askInfo.volume,s+=_.volume,l++,c<(m=_.bidInfo.volume-_.askInfo.volume)&&(c=m),m<h&&(h=m))}var C,b,g,S,v,w=f-d;n.deltaday.values[o]=w,P(n.deltaday,w),0!==s?(C=+(w/s*100).toFixed(2),n.deltaPercentDay.values[o]=C,P(n.deltaPercentDay,C)):n.deltaPercentDay.values[o]="",u?(b=+(u.bidInfo.volume/s*100).toFixed(2),n.buyPercentVolume.values[o]=b,P(n.buyPercentVolume,b),g=+(u.askInfo.volume/s*100).toFixed(2),n.sellPercentVolume.values[o]=g,P(n.sellPercentVolume,g),n.buyvolume.values[o]=u.bidInfo.volume,P(n.buyvolume,u.bidInfo.volume),n.sellvolume.values[o]=u.askInfo.volume,P(n.sellvolume,u.askInfo.volume),S=u.bidInfo.volume-u.askInfo.volume,n.delta.values[o]=S,P(n.delta,S),v=S-Math.abs(c)>=Math.abs(h)?c:h,n.deltafinish.values[o]=v,P(n.deltafinish,v)):(n.buyPercentVolume.values[o]="",n.sellPercentVolume.values[o]="",n.buyvolume.values[o]="",n.sellvolume.values[o]="",n.delta.values[o]="",n.deltafinish.values[o]=""),n.volume.values[o]=s,P(n.volume,s),n.deltamax.values[o]=c,n.deltamin.values[o]=h,P(n.deltamax,c),P(n.deltamin,h)}n.ticks.values[o]=l,P(n.ticks,l)},r.Style=t,r.defaults={plotStyle:t.TABLE,minWidth:1,columnWidthRatio:.8},r);function r(t){var e=o.call(this,t)||this;return e._settings={general:{font:{fontColor:"#fff",fontStyle:"400",fontFamily:"Arial",textAlign:i.TextAlign.RIGHT,fontSize:11},header:{position:"left",textColor:"#D0D0D2",backColor:"#383A40",textAlign:i.TextAlign.LEFT},marginText:7,rowMargin:1,rowHeight:20,xPadding:1},groupsRows:{delta:{enabled:!0,order:0,positive:"#4895F5",negative:"#C93B3B"},volume:{enabled:!0,order:1,background:"#51535A4D"},buyPercentVolume:{enabled:!0,order:2,positive:"#4895F5",negative:"#C93B3B"},buyvolume:{enabled:!0,order:3,background:"#51535A4D"},deltaPercentDay:{enabled:!0,order:4,positive:"#4895F5",negative:"#C93B3B"},deltaday:{enabled:!0,order:5,negative:"#4895F5",positive:"#C93B3B"},deltafinish:{enabled:!0,order:6,positive:"#4895F5",negative:"#C93B3B"},deltamax:{enabled:!0,order:7,positive:"#4895F5",negative:"#C93B3B"},deltamin:{enabled:!0,order:8,positive:"#4895F5",negative:"#C93B3B"},sellPercentVolume:{enabled:!0,order:9,positive:"#4895F5",negative:"#C93B3B"},sellvolume:{enabled:!0,order:10,background:"#51535A4D"},ticks:{enabled:!0,order:11}},groupsTradeVolumeFilter:[{name:"Full"}]},e._valueMaps=[],e._plotThemeKey="bar",e.table=new i.MultiTable,e.dataManager=t.dataManager,e.setupTable(),e._addNewTables(e._settings.groupsTradeVolumeFilter.length),e}function P(t,e){(null==t.max||e>t.max)&&(t.max=e),(null==t.min||e<t.min)&&(t.min=e)}function k(t){return null!=t&&""!=t}function n(){return{delta:{label:"Delta",values:[]},volume:{label:"Volume",values:[]},buyvolume:{label:"Buy Volume",values:[]},deltaday:{label:"Delta Day",values:[]},ticks:{label:"Ticks",values:[]},sellvolume:{label:"Sell Volume",values:[]},deltamax:{label:"Delta Max",values:[]},deltamin:{label:"Delta Min",values:[]},sellPercentVolume:{label:"Sell % Volume",values:[]},deltafinish:{label:"Delta Finish",values:[]},buyPercentVolume:{label:"Buy % Volume",values:[]},deltaPercentDay:{label:"Delta % Day",values:[]}}}i.BarStatsPlot=e,i.getValueMap=n}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(m){"use strict";var t={LINE:"line",COLORED_LINE:"coloredLine",COLUMN:"column",COLORED_COLUMN:"coloredColumn"};Object.freeze(t);var i,e=(i=m.Plot,__extends(o,i),Object.defineProperty(o.prototype,"baseValue",{get:function(){var t=this._options.baseValue;return null!=t?t:o.defaults.baseValue},set:function(t){if(!m.JsUtil.isFiniteNumber(t))throw new TypeError("Value must be a finite number.");this._setOption("baseValue",t,m.PlotEvent.BASE_VALUE_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"columnWidthRatio",{get:function(){return this._options.columnWidthRatio||o.defaults.columnWidthRatio},set:function(t){if(m.JsUtil.isNegativeNumber(t)||1<t)throw new Error("Ratio must be in range (0..1]");this._setOption("columnWidthRatio",t,m.PlotEvent.COLUMN_WIDTH_RATIO_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"minColumnWidth",{get:function(){return this._options.minColumnWidth||o.defaults.minWidth},set:function(t){if(!m.JsUtil.isPositiveNumber(t))throw new Error("Min width must be a positive number.");this._setOption("minColumnWidth",t,m.PlotEvent.MIN_WIDTH_CHANGED)},enumerable:!0,configurable:!0}),o.prototype.draw=function(){if(this.visible)switch(this.plotStyle){case t.COLORED_LINE:this._drawColoredLines();break;case t.COLUMN:this._drawColumns();break;case t.COLORED_COLUMN:this._drawColoredColumns();break;default:this._drawLines()}},o.prototype.drawValueMarkers=function(){this.plotStyle===t.COLORED_COLUMN&&this._setupValueMarkersTheme(),i.prototype.drawValueMarkers.call(this)},o.prototype._drawLines=function(){var t=this._valueDrawParams();if(0!==t.values.length){var e=t.renderer,i=t.projection,o=t.dates,r=i.yByValue(this.baseValue),n=null,a=-1/0;e.beginPath();for(var l=t.startIndex,s=t.startColumn;l<=t.endIndex;l++,s++){var c,h=t.values[l];null!=h&&((c=o?i.xByDate(o[l]):i.xByColumn(s))===n?a=Math.max(a,h):(null!==n&&e.verLine(n,i.yByValue(a)+m.CanvasOffset,r+m.CanvasOffset),a=h,n=c))}e.verLine(n,i.yByValue(a)+m.CanvasOffset,r+m.CanvasOffset),e.stroke(t.theme)}},o.prototype._drawColoredLines=function(){var s,c,h,u,t,f=this._barDrawParams();0!==f.values.length&&(s=f.renderer,c=f.projection,h=f.dates,u=c.yByValue(this.baseValue),(t=function(t,e){var i=null,o=-1/0;s.beginPath();for(var r=f.startIndex,n=f.startColumn;r<=f.endIndex;r++,n++){var a,l=f.values[r];null!=l&&(t&&f.close[r]<f.open[r]||!t&&f.close[r]>=f.open[r]||((a=h?c.xByDate(h[r]):c.xByColumn(n))===i?o=Math.max(o,l):(null!==i&&s.verLine(a,c.yByValue(l)+m.CanvasOffset,u+m.CanvasOffset),o=l,i=a)))}s.verLine(i,c.yByValue(o)+m.CanvasOffset,u+m.CanvasOffset),s.stroke(e)})(!0,f.theme.upBar),t(!1,f.theme.downBar))},o.prototype._drawColumns=function(){var t=this._barDrawParams();if(0!==t.values.length){var e,i=t.renderer,o=t.projection,r=t.dates,n=o.yByValue(this.baseValue),a=this.chart.dateScale.columnWidth,l=Math.round(Math.max(a*this.columnWidthRatio,this.minColumnWidth)/2),s=2*l,c=null,h=-1/0;i.beginPath();for(var u=t.startIndex,f=t.startColumn;u<=t.endIndex;u++,f++){var d,p=t.values[u];null!=p&&((d=r?o.xByDate(r[u]):o.xByColumn(f))===c?h=Math.max(h,p):(null!==c&&(e=o.yByValue(h),i.rect(c-l+m.CanvasOffset,Math.min(e,n)+m.CanvasOffset,s,Math.max(Math.abs(e-n),1))),h=p,c=d))}e=o.yByValue(h),i.rect(c-l+m.CanvasOffset,Math.min(e,n)+m.CanvasOffset,s,Math.max(Math.abs(e-n),1));var y=t.theme;i.fillStroke(y.fill,y.line)}},o.prototype._setupValueMarkersTheme=function(){var t,e,i,o=this._barDrawParams();0!==o.values.length&&(t=this.actualTheme,i=null,e=o.values.length-1,i=o.close[e]>=o.open[e]?t.upCandle&&t.upCandle.fill.fillColor:t.downCandle&&t.downCandle.fill.fillColor,t.strokeColor=i)},o.prototype._drawColoredColumns=function(){var s,c,h,u,f,t,d,p,e,y=this._barDrawParams();0!==y.values.length&&(s=y.renderer,c=y.projection,h=y.dates,u=c.yByValue(this.baseValue),t=this.chart.dateScale.columnWidth,d=Math.round(Math.max(t*this.columnWidthRatio,this.minColumnWidth)/2),p=2*d,(e=function(t,e){var i=null,o=-1/0;s.beginPath();for(var r=y.startIndex,n=y.startColumn;r<=y.endIndex;r++,n++){var a,l=y.values[r];null!=l&&(t&&y.close[r]<y.open[r]||!t&&y.close[r]>=y.open[r]||((a=h?c.xByDate(h[r]):c.xByColumn(n))===i?o=Math.max(o,l):(null!==i&&(f=c.yByValue(o),s.rect(i-d+m.CanvasOffset,Math.min(f,u)+m.CanvasOffset,p,Math.max(Math.abs(f-u),1))),o=l,i=a)))}f=c.yByValue(o),s.rect(i-d+m.CanvasOffset,Math.min(f,u)+m.CanvasOffset,p,Math.max(Math.abs(f-u),1)),s.fillStroke(e.fill,e.line)})(!0,y.theme.upCandle),e(!1,y.theme.downCandle))},o.Style=t,o.defaults={plotStyle:t.LINE,baseValue:0,columnWidthRatio:.9,minWidth:3},o);function o(t){var e=i.call(this,t)||this;return t&&null!=t.columnWidthRatio&&(e.columnWidthRatio=t.columnWidthRatio),e._plotThemeKey="histogram",e}m.HistogramPlot=e}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var e={SIMPLE:"simple",MOUNTAIN:"mountain",STEP:"step"};Object.freeze(e);var i,o=(i=t.Plot,__extends(r,i),r.prototype.draw=function(){if(this.visible)switch(this.plotStyle){case e.MOUNTAIN:this._drawMountainLine();break;case e.STEP:this._drawStepLine();break;default:this._drawSimpleLine()}},r.prototype._drawSimpleLine=function(){var t=this._valueDrawParams(),e=t.values;if(0!==e.length){var i=t.renderer,o=t.projection,r=t.dates,n=null,a=null,l=1/0,s=-1/0,c=!0,h=t.startIndex,u=t.startColumn,f=t.endIndex,d=null;i.beginPath();for(var p=h,y=u;p<=f;p++,y++){var m,_,C,b,g,S,v=e[p];null!=v&&((m=v!=v)&&c||(_=r?o.xByDate(r[p]):o.xByColumn(y),c?(i.moveTo(_,o.yByValue(v)),c=!1):(m&&(c=!0),c||_!==n?(l!==1/0&&(C=o.yByValue(l),b=1.8<Math.abs(d-C),Math.abs(s-l)<1e-5?b&&i.lineTo(n,C):(g=o.yByValue(s),Math.abs(g-C)<1.8?b&&i.lineTo(n,C):(b&&i.moveTo(n,C),i.lineTo(n,g),1e-5<Math.abs(a-s)&&(S=o.yByValue(a),1.8<Math.abs(S-g)&&i.moveTo(n,S))))),c?(l=1/0,s=a=-1/0,d=null):(d=o.yByValue(v),i.lineTo(_,d),l=s=a=v),n=_):(l=Math.min(l,v),s=Math.max(s,v),a=v))))}l!==1/0&&l!==s&&i.verLine(n,o.yByValue(l),o.yByValue(s)),i.stroke(t.theme.line||t.theme)}},r.prototype._drawMountainLine=function(){var t=this._valueDrawParams();if(0!==t.values.length){var e=t.renderer,i=t.projection,o=null,r=null,n=t.dates,a=1/0,l=!0,s=this.chartPanel.layer.size.height;e.fillTheme(t.theme.fill);for(var c=t.startIndex,h=t.startColumn;c<=t.endIndex;c++,h++){var u,f,d=t.values[c];null!=d&&((u=d!=d)&&l||(f=n?i.xByDate(n[c]):i.xByColumn(h),l?(e.beginPath(),e.moveTo(f,i.yByValue(d)),o=r=f,l=!1):(u&&(l=!0),l||f!==r?(a!==1/0&&e.lineTo(r,i.yByValue(a)),l?(a=1/0,e.lineTo(r,s),e.lineTo(o,s),e.closePath(),e.fill(),o=f):(e.lineTo(f,i.yByValue(d)),a=d),r=f):a=Math.min(a,d))))}a!==1/0&&e.lineTo(r,i.yByValue(a)),e.lineTo(r,s),e.lineTo(o,s),e.closePath(),e.fill(),this._drawSimpleLine()}},r.prototype._drawStepLine=function(){var t=this._valueDrawParams();if(0!==t.values.length){var e=t.renderer,i=t.projection,o=t.dates,r=null,n=null,a=null,l=1/0,s=-1/0,c=!0;e.beginPath();for(var h=t.startIndex,u=t.startColumn;h<=t.endIndex;h++,u++){var f,d,p,y,m=t.values[h];null!=m&&((f=m!=m)&&c||(y=o?i.xByDate(o[h]):i.xByColumn(u),c?(r=y,n=i.yByValue(m),e.moveTo(y,n),l=s=m,c=!1):(f&&(c=!0),c||y!==r?(c?(l=1/0,s=a=-1/0):(e.lineTo(r,n),d=i.yByValue(l),Math.abs(s-l)<1e-5?(e.lineTo(r,d),n=d):(p=i.yByValue(s),Math.abs(p-d)<1.8?(e.lineTo(r,d),n=d):(e.verLine(r,d,p),n=i.yByValue(a),e.moveTo(r,n))),l=s=a=m),r=y):(l=Math.min(l,m),s=Math.max(s,m),a=m))))}null!=a&&a!==-1/0&&(e.lineTo(y,n),e.lineTo(y,i.yByValue(a))),e.stroke(t.theme.line||t.theme)}},r.Style=e,r.defaults={plotStyle:e.SIMPLE},r);function r(t){var e=i.call(this,t)||this;return e._plotThemeKey="line",e}t.LinePlot=o}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var i;(i=e.PlotEvent||(e.PlotEvent={})).POINT_SIZE_CHANGED="plotPointSizeChanged";var t={DOT:"dot"};Object.freeze(t);var o,r=(o=e.Plot,__extends(n,o),Object.defineProperty(n.prototype,"pointSize",{get:function(){return this._options.pointSize||n.defaults.pointSize},set:function(t){if(e.JsUtil.isNegativeNumber(t))throw new TypeError("Value must be a positive number.");this._setOption("pointSize",t,i.POINT_SIZE_CHANGED)},enumerable:!0,configurable:!0}),n.prototype.draw=function(){if(this.visible){var t=this._valueDrawParams();if(0!==t.values.length){function e(t){for(var e=0,i=c.length;e<i;e++)o.circlePath(t,c[e],a),o.fill()}var i,o=t.renderer,r=t.projection,n=t.dates,a=this.pointSize,l=null,s=[],c=[];o.fillTheme(t.theme.fill?t.theme.fill:t.theme);for(var h=t.startIndex,u=t.startColumn;h<=t.endIndex;h++,u++){var f=t.values[h];if(null!=f)if((i=n?r.xByDate(n[h]):r.xByColumn(u))!==l)null!=l&&(e(l),c.length=s.length=0),l=i,s.push(f),c.push(r.yByValue(f));else{if(0<=s.indexOf(f))continue;var d=r.yByValue(f);if(0<=c.indexOf(d))continue;s.push(f),c.push(d)}}e(i)}}},n.defaults={plotStyle:(n.Style=t).DOT,pointSize:2},n);function n(t){var e=o.call(this,t)||this;return e._plotThemeKey="point",e}e.PointPlot=r}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(S){"use strict";var e,t=(e=S.Plot,__extends(i,e),i.prototype.draw=function(){var t=this._barDrawParams(),e=t.theme.aboveCross,i=t.theme.belowCross;e&&i?(this.drawArea(!0,e),this.drawArea(!1,i)):this._drawOneColorArea()},i.prototype.drawArea=function(t,e){if(this.visible){var i=this._barDrawParams();if(0!==i.values.length){var o=this.renderer,r=this.projection,n=this.dataSeries[0],a=this.dataSeries[1],l=this._getIntersectionPoint(n,a,i);if(0!==l.length){var s=i.startIndex;o.beginPath();for(var c=1;c<l.length;c++){var h=null,u=void 0,f=void 0,d=l[c].x,p=l[c].y;if(t!==a.values[l[c].index]>=n.values[l[c].index]){o.moveTo(d,p);for(var y=void 0,m=l[c].index;s<m;m--){null!==n.values[m]&&null!==a.values[m]&&(u=a.values[m],d=r.xByRecord(m),p=r.yByValue(u),d!==h?(f?(_=r.yByValue(f),o.lineTo(h,_),f=null):o.lineTo(d,p),h=d,y=m):f=u)}f=h=null,d>=l[c-1].x&&d<=l[c].x&&null===n.values[y]&&a.values[y]&&o.lineTo(l[c-1].x,l[c-1].y);for(var _,C=s;C<=l[c].index;C++){null!==n.values[C]&&null!==a.values[C]&&(u=n.values[C],d=r.xByRecord(C),p=r.yByValue(u),d!==h?(f?(_=r.yByValue(f),o.lineTo(h,_),f=null):o.lineTo(d,p),h=d):f=u)}}else s=l[c].index}o.fill(e)}}}},i.prototype._drawOneColorArea=function(){if(this.visible){var t=this._barDrawParams();if(0!==t.values.length){var e=this.renderer,i=this.projection,o=null,r=null,n=this.dataSeries[0].values[t.startIndex],a=i.xByRecord(t.startIndex),l=i.yByValue(n);e.beginPath(),e.moveTo(a,l);for(var s=t.startIndex+1;s<=t.endIndex;s++){null!=(n=this.dataSeries[0].values[s])&&(a=i.xByRecord(s),l=i.yByValue(n),a!==r?(o?(c=i.yByValue(o),e.lineTo(r,c),o=null):e.lineTo(a,l),a=r):o=n)}(o=r=null)==(n=this.dataSeries[1].values[t.endIndex+1])&&(t.endIndex=this.dataSeries[1].rightNearestVisibleValueIndex(t.endIndex),n=this.dataSeries[1].values[t.endIndex]),a=i.xByRecord(t.endIndex),l=i.yByValue(n),e.lineTo(a,l);for(var c,s=t.endIndex;s>=t.startIndex;s--){null!=(n=this.dataSeries[1].values[s])&&(a=i.xByRecord(s),l=i.yByValue(n),a!==r?(o?(c=i.yByValue(o),e.lineTo(r,c),o=null):e.lineTo(a,l),e.lineTo(a,l),r=a):o=n)}null==(n=this.dataSeries[0].values[t.startIndex])&&(t.startIndex=this.dataSeries[0].rightNearestVisibleValueIndex(t.startIndex),n=this.dataSeries[0].values[t.startIndex]),a=i.xByRecord(t.startIndex),l=i.yByValue(n),e.lineTo(a,l),e.fill(t.theme)}}},i.prototype._getIntersectionPoint=function(t,e,i){var o=t.values,r=e.values,n=this.projection,a=[],l=i.startIndex,s=o[l];null==s&&(s=o[l=this.dataSeries[0].rightNearestVisibleValueIndex(l)]);var c=this._addValue(this.projection.xByRecord(l),this.projection.yByValue(s),l);a.push(c);for(var h,u,f,d,p,y,m,_,C,b=i.startIndex;b<=i.endIndex;b++){null==r[b]&&null==o[b]||(h=n.xByRecord(b),u=n.yByValue(o[b]),f=n.xByRecord(b+1),d=n.yByValue(o[b+1]),p=n.xByRecord(b),y=n.yByValue(r[b]),m=n.xByRecord(b+1),_=n.yByValue(r[b+1]),(C=S.Geometry.intersectionPoints({x:h,y:u},{x:f,y:d},{x:p,y:y},{x:m,y:_}))&&(c=this._addValue(C.x,C.y,b),a.push(c)))}s=o[i.endIndex];var g=i.endIndex;return null==s&&(s=o[g=t.leftNearestVisibleValueIndex(g)]),c=this._addValue(n.xByRecord(g),n.yByValue(s),g),a.push(c),a},i.prototype._addValue=function(t,e,i){var o={};return o.x=t,o.y=e,o.index=i,o},i);function i(t){return e.call(this,t)||this}S.FillPlot=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var e,i=(e=t.BarPlot,__extends(o,e),Object.defineProperty(o.prototype,"boxSize",{get:function(){return this._boxSize},set:function(t){this._boxSize=t},enumerable:!0,configurable:!0}),o.prototype.draw=function(){var t,e;!this.visible||0!==(t=this._barDrawParams()).values.length&&((e=t.renderer).beginPath(),this._drawColumns(t,!0),e.stroke(t.theme.upCandle.border),e.beginPath(),this._drawColumns(t,!1),e.stroke(t.theme.downCandle.border))},o.prototype._drawColumns=function(t,e){for(var i=t.renderer,o=t.projection,r=this.boxSize,n=this.chart.dateScale.columnWidth,a=Math.max(n*this.columnWidthRatio,this.minWidth),l=Math.round(a/2),s=e?null:t.theme.downCandle.border,c=t.startIndex,h=t.startColumn;c<=t.endIndex;c++,h++){var u=t.open[c],f=t.close[c];if(null!=u&&null!=f)if(e===u<=f)for(var d=t.dates?o.xByDate(t.dates[c]):o.xByColumn(h),p=t.low[c],y=t.high[c];1e-6<y-p;){var m,_=o.yByValue(p),C=o.yByValue(p+r);_===C&&_--,e?a<3?i.verLine(d,_,C):(i.line(d-l,_,d+l,C),i.line(d-l,C,d+l,_)):a<3?i.verLine(d,_,C):(m=(C-_)/2,i.ellipsePath(d,(_+C)/2,l,m),i.stroke(s)),p+=r}}},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.PointAndFigurePlot=i}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),__assign=this&&this.__assign||Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};!function(V){"use strict";var N,t;(t=N=V.LabelPlotPosition||(V.LabelPlotPosition={})).Top="top",t.Bottom="bottom",V.LabelPlotStyle={Tooltip:"Tooltip"},Object.freeze(V.LabelPlotStyle);var o,e=(o=V.Plot,__extends(r,o),r.prototype.draw=function(){if(this.visible&&!(this.chart.dateScale.columnWidth<this._barWidthTextThreshold)){var t=V.LabelPlotStyle;switch(this.plotStyle){case t.Tooltip:this._drawTooltip()}}},r.prototype._drawTooltip=function(){var t=this._barDrawParams();if(0!==t.values.length){var e,i=t.renderer,o=t.projection,r=t.dates,n=t.startIndex,a=t.endIndex,l=t.startColumn,s=this.chart,c=this.tooltip,h=this.theme,u=this._position,f=s.dataManager,d=t.values,p=f.getDataSeries(V.DataSeriesSuffix.HIGH).values,y=f.getDataSeries(V.DataSeriesSuffix.LOW).values,m=this._offset,_=h.text.fontSize;if(d.length){if(i.beginPath(),h.fill.fillEnabled){for(var C=n,b=l;C<=a;C++,b++){if(null!=(I=d[C])){for(var g=Array.isArray(I)?I:[I],S=-1/0,v=0;v<g.length;v++)var w="object"==typeof(T=g[v])?T.value:T,P=i.textWidth(this._getFormattedText(w)),S=Math.max(S,P);e=_*g.length+8;var k=(r?o.xByDate(r[C]):o.xByColumn(b))-S/2,x=void 0,O=void 0,E="object"==typeof I?I.value:I;switch(u){case N.Top:O=this._forBars?p[C]:Math.max(0,E),x=o.yByValue(O)-m-e;break;case N.Bottom:O=this._forBars?y[C]:Math.min(0,E),x=o.yByValue(O)+m}i.rect(k-S/2,x,2*S,e)}}i.fill({fillColor:h.fill.fillColor}),i.fillStroke(h.fill,h.stroke)}i.textTheme(c.actualTheme.text),i.textOptions({baseline:V.TextBaseline.MIDDLE,align:V.TextAlign.CENTER});for(var I,C=n,b=l;C<=a;C++,b++){if(null!=(I=d[C])){g=Array.isArray(I)?I:[I],k=r?o.xByDate(r[C]):o.xByColumn(b),x=void 0,O=void 0,E="object"==typeof I?I.value:I;switch(u){case N.Top:var D=_*g.length;O=this._forBars?p[C]:Math.max(0,E),x=o.yByValue(O)-m-4+_/2-D;break;case N.Bottom:O=this._forBars?y[C]:Math.min(0,E),x=o.yByValue(O)+m+4+_/2}for(v=0;v<g.length;v++){var T,M="object"==typeof(T=g[v])?T.label||T.value:T,L=x+v*h.text.fontSize,F="object"==typeof T&&T.textColor,A=void 0,A=F?__assign({},h.text,{fillColor:F}):h.text,w=this._getFormattedText(M);i.fillText(w,k,L,__assign({},A,{textBaseline:"middle",textAlign:"center"}))}}}i.closePath()}}},r.prototype._getFormattedText=function(t){return"string"==typeof t?t:this.chartPanel.formatter.format(t)},r.Style=V.LabelPlotStyle,r.defaults={plotStyle:V.LabelPlotStyle.Tooltip,position:N.Top,offset:16,forBars:!1},r);function r(t){var e=o.call(this,t)||this,i=r.defaults;return e._position=t&&t.position||i.position,e._offset=t&&t.offset||i.offset,e._barWidthTextThreshold=t&&t.barWidthTextThreshold||i.barWidthTextThreshold,e._forBars=t&&t.forBars||i.forBars,e._plotThemeKey="label",e}V.LabelPlot=e}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(X){"use strict";var G,t,i,e;(t=G=X.Style||(X.Style={})).CONNECTED="connected",t.CONTINIOUS="continious",t.STEPPED="stepped",t.SOLID="solid",t.HOLLOW="hollow",(e=i=X.Duration||(X.Duration={})).WEEKLY="week",e.MONTHLY="month",e.QUARTERLY="quarter",e.ANNUALY="year";var o,r=(o=X.Plot,__extends(n,o),Object.defineProperty(n.prototype,"settings",{get:function(){return this._setting},set:function(t){this._setting=t},enumerable:!0,configurable:!0}),n.prototype.draw=function(){if(this.visible){this._getBasis();var t=this._setting.general,e=t.styleLine,i={width:e.lineStyle.width,lineStyle:e.lineStyle.lineStyle,strokeColor:e.strokeColor},o=this._barDrawParams().values;switch(t.styleLine.style){case G.CONNECTED:this._drawRectangleLine(o,!0,i,!1,!1,!0),this._drawRectangleLine(o,!0,i,!0);break;case G.CONTINIOUS:this._drawRectangleLine(o,!0,i,!0);break;case G.HOLLOW:case G.SOLID:this._drawRectangleLine(o,!0,i);break;case G.STEPPED:this._drawRectangleLine(o,!0,i,!0,!0)}this._drawBands()}},n.prototype._drawBands=function(){var t,e,i=this._setting.bands;i.band1.isShow&&(t=i.band1.styleLine,e=i.band1.strokeColor,t.strokeColor=e,this._drawRectangleLine(this._valueBand11,!1,t,!0),this._drawRectangleLine(this._valueBand12,!1,t,!0)),i.band2.isShow&&(t=i.band2.styleLine,e=i.band2.strokeColor,t.strokeColor=e,this._drawRectangleLine(this._valueBand21,!1,t,!0),this._drawRectangleLine(this._valueBand22,!1,t,!0)),i.band3.isShow&&(t=i.band3.styleLine,e=i.band3.strokeColor,t.strokeColor=e,this._drawRectangleLine(this._valueBand31,!1,t,!0),this._drawRectangleLine(this._valueBand32,!1,t,!0))},n.prototype._getBasis=function(){for(var t=this._barDrawParams().values,e=t.length,i=this.chart.lastVisibleIndex,o=this._setting.bands,r=0,n=i<e?i:e,a=0;a<n;a++){var l=t[a];l&&(r+=l);var s=Math.sqrt(r/(a+1)),c=s*o.band1.coefficient,h=s*o.band2.coefficient,u=s*o.band3.coefficient;this._valueBand11[a]=l+c,this._valueBand12[a]=l-c,this._valueBand21[a]=l+h,this._valueBand22[a]=l-h,this._valueBand31[a]=l+u,this._valueBand32[a]=l-u}},n.prototype._drawRectangleLine=function(t,e,i,o,r,n){void 0===o&&(o=!1),void 0===r&&(r=!1),void 0===n&&(n=!1);var a=this._barDrawParams(),l=t.length;if(0!==l){var s=a.renderer,c=a.projection,h=this.chart,u=this._setting,f=u.label,d=f.isShowVWAPLabel,p=f.lebelLineLength,y=u.general.styleLine.style,m=h.firstVisibleIndex,_=h.lastVisibleIndex,C=c.xByRecord(_)-p,b=this._offset,g=this.settings.general.isShowCustomDuration;m<this.period&&(m=this.period),o&&!g&&(s.beginPath(),S=c.xByRecord(m),v=c.yByValue(t[m]),s.moveTo(S,v)),n&&s.beginPath();for(var S,v,w=_<l?_:l,P=!1,k=a.dates[0],x=!1,O=m;O<w;O++)if(!g||!X.Frame.verificationFrame(this.settings.general.customDuration,k,a.dates[O])){x||(o&&(s.beginPath(),S=c.xByRecord(O),v=c.yByValue(t[O]),s.moveTo(S,v)),x=!0);var E=O+1,I=c.xByRecord(O),D=c.xByRecord(E),T=c.yByValue(t[O]),M=c.yByValue(t[E]);if(d&&!(D+b<C)){if(e&&d){!P&&n&&(s.fill({fillColor:i.strokeColor}),P=!0);var L=t[O-1],F=h.lastVisibleRecord,A=10,V=s.textWidth("VWAP"),N=c.yByValue(L),R=c.xByRecord(F),z=R-V-A,j=R-p;s.horLine(z,j,N),s.stroke(i),this._drawTextWithBackground("VWAP",R,N,A,s);break}break}if(n){s.moveTo(I,T);var B=Math.abs(D-I)<5?Math.abs(D-I):5;s.arc(I,T,B,0,2*Math.PI)}else if(!o||r)if(r)s.horLine(I,D,T),s.verLine(D,T,M);else{var A=5,H=D-I;switch(s.rect(I-A,T-A,H,10),y){case G.SOLID:var U=h.theme.drawing.abstractMarker.fill;s.fill(U)}}else s.lineTo(I,T)}n&&s.fill({fillColor:i.strokeColor}),s.stroke(i)}},n.prototype._drawTextWithBackground=function(t,e,i,o,r){var n=this.chart.theme,a=n.drawing.abstractMarker.fill,l=n.plot.indicator.blackText,s=l.fontSize,c=r.textWidth(t),h=s+o,u=e-c;r.beginPath(),r.rect(u-o,i-o,c+o,h),r.fill(a),r.fillText(t,u-5,i+3,l)},n);function n(t){var e=o.call(this,t)||this;return e.period=14,e._color="yellow",e._setting={general:{styleLine:{style:G.CONTINIOUS,lineStyle:{width:1,lineStyle:X.LineStyle.SOLID},strokeColor:e._color},isShowCustomTimes:!1,customTimes:{id:219,name:"Test 2",exchange:"CME",timezoneId:"Africa/Abidjan",workingTimes:[{startDay:1,startTime:0,endDay:2,endTime:576e5},{startDay:3,startTime:342e5,endDay:5,endTime:684e5}]},isShowCustomDuration:!1,customDuration:i.WEEKLY},bands:{band1:{isShow:!1,coefficient:1,strokeColor:e._color,styleLine:{width:1,lineStyle:X.LineStyle.SOLID}},band2:{isShow:!1,coefficient:2,strokeColor:e._color,styleLine:{width:1,lineStyle:X.LineStyle.SOLID}},band3:{isShow:!1,coefficient:3,strokeColor:e._color,styleLine:{width:1,lineStyle:X.LineStyle.SOLID}}},label:{isShowVWAPLabel:!0,lebelLineLength:400}},e._offset=50,e._valueBand11=[],e._valueBand12=[],e._valueBand21=[],e._valueBand22=[],e._valueBand31=[],e._valueBand32=[],e._plotThemeKey="line",e}X.VWAPPlot=r}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(c){"use strict";var l,t;(t=l=c.ResizableElementPlotDirection||(c.ResizableElementPlotDirection={})).Left="left",t.Right="right",t.Top="top",t.Bottom="bottom";var i,e=(i=c.Rect,__extends(o,i),o);function o(t){var e=i.call(this,t)||this;return e.id=t.id,e}c.ResizableRect=e;var r,n=(r=c.Plot,__extends(a,r),Object.defineProperty(a.prototype,"isActive",{get:function(){return null!=this._activeRect},enumerable:!0,configurable:!0}),a.prototype.draw=function(){var t,e,i,o,r,n;this.visible&&this._activeRect&&(t=this.renderer,i=(e=this._activeRect).left,o=e.top,r=e.width,n=e.height,t.beginPath(),t.rect(i,o,r,n),t.stroke(this._strokeTheme),t.closePath(),this._directions.left&&this._drawResizeControl(i,o+n/2),this._directions.right&&this._drawResizeControl(i+r,o+n/2),this._directions.top&&this._drawResizeControl(i+r/2,o),this._directions.bottom&&this._drawResizeControl(i+r/2,o+n))},a.prototype._drawResizeControl=function(t,e){var i=this.renderer;i.beginPath(),i.circle(t,e,this._controlSize/2),i.fill({fillColor:this._strokeTheme.strokeColor}),i.closePath()},a.prototype._onChartPanelChanged=function(t){var e=this;r.prototype._onChartPanelChanged.call(this,t),this.chart&&(this.chart.on(c.MouseEvent.WHEEL,function(){e._disableMouseMove(),e._finishResize(),e._clearActiveRect(),clearTimeout(e._mouseWheelTimeout),e._mouseWheelTimeout=setTimeout(function(){e._enableMouseMove()},100)},this),this.chart.on(c.PanelEvent.FORCE_MOVE_STARTED,function(){e._disableMouseMove();var t=e._activeControlDirection;t?e._startResize(t):e._clearActiveRect()},this),this.chart.on(c.PanelEvent.FORCE_MOVE_FINISHED,function(){e._enableMouseMove(),e._finishResize()},this),this._enableMouseMove())},a.prototype._getActiveControlDirection=function(){var t=this._activeRect,e=t.left,i=t.top,o=t.width,r=t.height,n=this._activePoint,a=this._controlSize;return this._directions.left&&e-a/2<=n.x&&n.x<=e+a/2&&i<=n.y&&n.y<=i+r?l.Left:this._directions.right&&e+o-a/2<=n.x&&n.x<=e+o+a/2&&i<=n.y&&n.y<=i+r?l.Right:this._directions.top&&e<=n.x&&n.x<=e+o&&i-a/2<=n.y&&n.y<=i+a/2?l.Top:this._directions.bottom&&e<=n.x&&n.x<=e+o&&i+r-a/2<=n.y&&n.y<=i+r+a/2?l.Bottom:void 0},a.prototype._clearActiveRect=function(){delete this._activeRect,delete this._activeRectId,delete this._activeControlDirection},a.prototype.destroy=function(){var t=this.chart;r.prototype.destroy.call(this),t&&(t.off(c.MouseEvent.MOVE,this._onMouseMove),t.off(c.MouseEvent.MOVE,this._onResize),t.off(c.MouseEvent.WHEEL,this),t.off(c.PanelEvent.FORCE_MOVE_STARTED,this),t.off(c.PanelEvent.FORCE_MOVE_FINISHED,this))},a.defaults={getRects:function(){return[]},handlers:{},directions:{left:!0,right:!0,top:!0,bottom:!0}},a);function a(t){var s=r.call(this,t)||this;s._controlSize=8,s._strokeTheme={width:1,strokeColor:"green",lineStyle:c.LineStyle.SOLID},s._enableMouseMove=function(){s.chart.on(c.MouseEvent.MOVE,s._onMouseMove,s._onMouseMove)},s._disableMouseMove=function(){s.chart.off(c.MouseEvent.MOVE,s._onMouseMove)},s._onMouseMove=function(t){if(s.visible){var e=s._activePoint=t.value,i=s._activeRect;s._clearActiveRect();var o=s._getRects();if(o.length){for(var r=s.chart,n=o.length-1;0<=n;n--){var a=o[n],l=a.clone();if(l.left-=s._controlSize/2,l.top-=s._controlSize/2,l.width+=s._controlSize,l.height+=s._controlSize,l.containsPoint(e)){s._activeRect=a,s._activeRectId=a.id,s._activeControlDirection=s._getActiveControlDirection();break}}i!==s._activeRect&&r.setNeedsUpdate(),s._activeControlDirection?r.addCssClass(c.DrawingCursorClass.RESIZE):r.removeCssClass(c.DrawingCursorClass.RESIZE)}}},s._startResize=function(t){var e=s.chart;e.scrollEnabled=!1,e.on(c.MouseEvent.MOVE,s._onResize(t),s._onResize),s._handlers.started&&s._handlers.started(s._activeRect)},s._finishResize=function(){var t=s.chart;t.scrollEnabled=!0,t.off(c.MouseEvent.MOVE,s._onResize),s._handlers.finished&&s._handlers.finished(s._activeRect)},s._onResize=function(r){return function(t){var e=t.value,i=s._activeRect=s._getRects().find(function(t){return t.id===s._activeRectId});switch(r){case l.Left:var o=i.left-e.x;i.left-=o,i.width+=o;break;case l.Right:i.width=e.x-i.left;break;case l.Top:case l.Bottom:}s._activePoint=e,s._handlers.continued&&s._handlers.continued(s._activeRect),s.chart.setNeedsUpdate()}};var e=a.defaults;return s._getRects=t.getRects||e.getRects,s._handlers=t.handlers||e.handlers,s._directions=t.directions||e.directions,s._plotThemeKey="label",s}c.ResizableElementPlot=n}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(x){"use strict";var i,t=(i=x.Plot,__extends(e,i),e.prototype.draw=function(){if(this.visible){for(var t=this._barDrawParams(),e=t.renderer,i=t.projection,o=t.values,r=t.startIndex,n=t.endIndex,a=t.startColumn,l=o.length-1;null==o[r]&&0<r;)r--,a--;for(;null==o[n]&&n<l;)n++;var s,c,h=this.chart.dataManager,u=h.getDataSeries(x.DataSeriesSuffix.HIGH).values,f=h.getDataSeries(x.DataSeriesSuffix.LOW).values;e.beginPath();for(var d,p,y,m,_,C=r,b=a;C<=n;C++,b++){null!=(g=o[C])?d=g!==x.ZigZagExtreme.Low?(S=i.xByColumn(b),v=i.yByValue(u[C]),e.line(s,c,S,v),x.ZigZagExtreme.High):(s=i.xByColumn(b),c=i.yByValue(f[C]),x.ZigZagExtreme.Low):l<=C&&d===x.ZigZagExtreme.Low&&(p=i.xByColumn(b),y=i.yByValue(f[C]),e.line(s,c,p,y))}e.stroke(this.theme.up),e.closePath(),e.beginPath();for(var g,S,v,w,P,k,C=r,b=a;C<=n;C++,b++){null!=(g=o[C])?w=g!==x.ZigZagExtreme.High?(S=i.xByColumn(b),v=i.yByValue(f[C]),e.line(m,_,S,v),x.ZigZagExtreme.Low):(m=i.xByColumn(b),_=i.yByValue(u[C]),x.ZigZagExtreme.High):l<=C&&w===x.ZigZagExtreme.High&&(P=i.xByColumn(b),k=i.yByValue(u[C]),e.line(m,_,P,k))}e.stroke(this.theme.down),e.closePath()}},e);function e(t){var e=i.call(this,t)||this;return e._plotThemeKey="zigZag",e}x.ZigZagPlot=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),__assign=this&&this.__assign||Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};!function(Ve){"use strict";var e,t,Ne,i,Re,o,ze,r,l,n,je,a,s,c;(t=e=Ve.FootprintMode||(Ve.FootprintMode={})).Volume="volume",t.TradesCount="tradesCount",(i=Ne=Ve.FootprintBarStyle||(Ve.FootprintBarStyle={})).NoBars="noBars",i.DeltaPrintBars="deltaPrintBars",i.DeltaShadingBars="deltaShadingBars",i.VolumeProfileBars="volumeProfileBars",(o=Re=Ve.FootprintBarAlignment||(Ve.FootprintBarAlignment={})).Left="left",o.Middle="middle",o.Right="right",(r=ze=Ve.FootprintTextStyle||(Ve.FootprintTextStyle={})).NoText="noText",r.BidDeltaAsk="bidDeltaAsk",r.BidTotalAsk="bidTotalAsk",r.BidAsk="bidAsk",(n=l=Ve.FootprintProfileFilter||(Ve.FootprintProfileFilter={})).NoProfileFilter="noProfileFilter",n.MaxWidthProfile="maxWidthProfile",n.MinVolumeProfile="minVolumeProfile",n.AutoMaxProfile="autoMaxProfile",(a=je=Ve.FootprintAutoProfilingRange||(Ve.FootprintAutoProfilingRange={})).Visible="visible",a.Chart="chart",(c=s=Ve.FootprintVolumeFilterMode||(Ve.FootprintVolumeFilterMode={})).GreaterThan="greaterThan",c.LessThan="lessThan";var h,u=(h=Ve.AdvancedPlot,__extends(f,h),f.prototype._handleSettings=function(t){var e,i,o,r,n,a=this,l=this.chart,s=this.chartPanel;s&&(e=s.layer.size.width,i=l.container.find("."+this.valueScale.rightPanelCssClass).outerWidth(),o=t.text.initialBarWidth,r=(e-i)/o,this._settingsHandled&&o===this._settings.text.initialBarWidth||this._setRecordRange(r),this._settingsHandled||(n=function(){a._setRecordRange(r),l.off(Ve.ChartEvent.HISTORY_LOADED,n)},l.on(Ve.ChartEvent.HISTORY_LOADED,n)))},f.prototype._setRecordRange=function(t){var e=this.chart;e.recordRange(t),e.firstVisibleRecord+=1,e.lastVisibleRecord+=1},f.prototype.draw=function(){if(this.visible){var t=this.chart,e=t.dataManager,i=t.dateScale,o=t.instrument,r=i.columnWidth;if(!(r<this._maxBarWidth)){var n=this._barDrawParams(),a=n.renderer,l=n.projection,s=n.dates,c=n.startIndex,h=n.endIndex,u=n.startColumn;if(0!==s.length){var f,d,p=e.getDataSeries(Ve.DataSeriesSuffix.DETAILS).values,y=e.getDataSeries(Ve.DataSeriesSuffix.OPEN).values,m=e.getDataSeries(Ve.DataSeriesSuffix.HIGH).values,_=e.getDataSeries(Ve.DataSeriesSuffix.LOW).values,C=e.getDataSeries(Ve.DataSeriesSuffix.CLOSE).values,b=this._settings,g=b.main,S=g.fillColor,v=g.strokeColor,w=g.barStrokeColor,P=g.enableOpenClose,k=g.closeOpenColor,x=g.openCloseColor,O=g.customTickSize,E=b.font,I=b.intraBar,D=I.barStyle,T=I.useDeltaShadingColors,M=I.sellShadeBarColor,L=I.buyShadeBarColor,F=I.barColor,A=I.barPocColor,V=I.barAlignment,N=I.sellVolumeBarColor,R=I.sellPocBarColor,z=I.buyVolumeBarColor,j=I.buyPocBarColor,B=b.text,H=B.textStyle,U=B.margin,X=B.hideSides,G=B.separator,W=B.barWidthTextThreshold,q=b.profile,K=q.autoProfilingRange,Y=q.showPocOnlyOnBiggestBar,Z=q.strokeWidth,J=b.deltaImbalance,$=J.enabled,Q=J.threshold,tt=J.strongBidVolumeColor,et=J.weakBidVolumeColor,it=J.strongAskVolumeColor,ot=J.weakAskVolumeColor,rt=J.enableWeakBidVolume,nt=J.enableWeakAskVolume,at=b.pullback,lt=at.enabled,st=at.fillColor,ct=at.strokeColor,ht=at.textColor,ut=at.currentBidAskColor,ft=O.enabled?O.value:1,dt=o.tickSize*ft,pt=l.yByValue(0)-l.yByValue(o.tickSize),yt=l.yByValue(0)-l.yByValue(dt),mt=r/2,_t=a.textWidth(G),Ct=r<W;switch(K){case je.Visible:f=c,d=h;break;case je.Chart:f=0,d=p.length-1}for(var bt=-1/0,gt=-1/0,St=-1/0,vt=f;vt<=d;vt++){var wt=this._handleValue(p[vt]);if(this._isValidDetails(wt))for(var Pt=0;Pt<wt.length;Pt++)var kt=wt[Pt],bt=Math.max(bt,this._getProfile(kt)),gt=Math.max(gt,this._getProfile(kt.bidInfo)),St=Math.max(St,this._getProfile(kt.askInfo))}if(lt&&!Ct&&h===p.length-1){var wt=this._handleValue(p[h]),xt=m[h],Ot=_[h];if(this._isValidDetails(wt)&&this._isValidDetails(this._prevDetails)){var Et=this._prevHigh!==xt,It=this._prevLow!==Ot,Dt=this._prevIndex<h;if(Et||It||Dt){for(var Tt=-1/0,Mt=1/0,Pt=0;Pt<wt.length;Pt++)var Lt=wt[Pt].price,Tt=Math.max(Tt,Lt),Mt=Math.min(Mt,Lt);var Ft=Et?Tt:Mt;this._pullbackData=[{bidInfo:{volume:0,tradesCount:0,profile:0},askInfo:{volume:0,tradesCount:0,profile:0},volume:0,tradesCount:0,profile:0,price:Ft}]}else{for(vt=0;vt<this._pullbackData.length;vt++){var At=this._pullbackData[vt];At.bidInfo.isCurrent=!1,At.askInfo.isCurrent=!1}for(vt=0;vt<wt.length;vt++)for(var Vt=wt[vt],Nt=this,Pt=0;Pt<this._prevDetails.length;Pt++)!function(t){var e=Nt._prevDetails[t],i=Nt._getProfile(Vt.bidInfo)!==Nt._getProfile(e.bidInfo),o=Nt._getProfile(Vt.askInfo)!==Nt._getProfile(e.askInfo);if(Vt.price!==e.price||!i&&!o)return;var r,n=Vt.price,a=Nt._pullbackData.findIndex(function(t){return t.price===n}),l=Vt.bidInfo.volume-e.bidInfo.volume,s=Vt.bidInfo.tradesCount-e.bidInfo.tradesCount,c=0<Nt._getProfile(Vt.bidInfo)-Nt._getProfile(e.bidInfo),h=Vt.askInfo.volume-e.askInfo.volume,u=Vt.askInfo.tradesCount-e.askInfo.tradesCount,f=0<Nt._getProfile(Vt.askInfo)-Nt._getProfile(e.askInfo),d=Vt.volume-e.volume,p=Vt.tradesCount-e.tradesCount;-1===a?Nt._pullbackData.push({bidInfo:{volume:l,tradesCount:s,isCurrent:c},askInfo:{volume:h,tradesCount:u,isCurrent:f},volume:d,tradesCount:p,price:n}):((r=Nt._pullbackData[a]).bidInfo.volume+=l,r.bidInfo.tradesCount+=s,r.bidInfo.isCurrent=c,r.askInfo.volume+=h,r.askInfo.tradesCount+=u,r.askInfo.isCurrent=f,r.volume+=d,r.tradesCount+=p)}(Pt)}this._pullbackData=this._handleValue(this._pullbackData,!0)}this._prevIndex=h,this._prevHigh=xt,this._prevLow=Ot,this._prevDetails=jQuery.extend(!0,[],wt)}else delete this._prevIndex,delete this._prevHigh,delete this._prevLow,delete this._prevDetails,this._pullbackData=[];var Rt=this._isValidDetails(this._pullbackData),zt=Rt?p.concat([this._pullbackData]):p,jt=Rt?h+1:h;a.beginPath();for(var vt=c,Bt=u;vt<=jt;vt++,Bt++){wt=(Gt=Rt&&h<vt)?zt[vt]:this._handleValue(zt[vt]);if(this._isValidDetails(wt)){for(xt=-1/0,Ot=1/0,Pt=0;Pt<wt.length;Pt++){Ft=wt[Pt].price;xt=Math.max(xt,Ft),Ot=Math.min(Ot,Ft)}var Ht=l.xByColumn(Bt),Ut=l.yByValue(xt),Xt=l.yByValue(Ot);a.rect(Ht-mt,Ut-yt/2,r,Xt-Ut+yt),h<=vt&&(_e=Fe=void 0,_e=vt===h?(Fe=S,v):(Fe=st,ct),a.fillStroke({fillColor:Fe},{strokeColor:_e}),a.closePath(),a.beginPath())}}for(vt=c,Bt=u;vt<=jt;vt++,Bt++){var Gt,wt=(Gt=Rt&&h<vt)?zt[vt]:this._handleValue(zt[vt]);if(this._isValidDetails(wt)){for(var Wt=(Ht=l.xByColumn(Bt))-mt,qt=-1/0,Kt=-1/0,Yt=-1/0,Pt=0;Pt<wt.length;Pt++)kt=wt[Pt],qt=Math.max(qt,this._getProfile(kt)),Kt=Math.max(Kt,this._getProfile(kt.bidInfo)),Yt=Math.max(Yt,this._getProfile(kt.askInfo));for(Pt=0;Pt<wt.length;Pt++){var Zt,Jt,$t,Qt,te,ee,ie,oe=(kt=wt[Pt]).bidInfo,re=kt.askInfo,ne=kt.tradesCount,Ft=kt.price,ae=this._getProfile(kt),le=this._getProfile(kt.bidInfo),se=this._getProfile(kt.askInfo),ce=se-le,he=wt[Pt-1],ue=wt[Pt+1],fe=l.yByValue(Ft),de=fe-yt/2;if(!Gt){if(D!==Ne.NoBars)if(D!==Ne.DeltaPrintBars){if(this._volumeFilter(ne)){var pe=void 0,ye=void 0;if(D!==Ne.VolumeProfileBars)pe=r,ye=Wt;else switch(pe=this._getVolumeWidth(ae,bt,qt,r),V){case Re.Left:ye=Wt;break;case Re.Middle:ye=Ht-pe/2;break;case Re.Right:ye=Wt+r-pe}Ve.JsUtil.debug("footprint_no_colors")||(Fe=void 0,Fe=T&&le!==se?se<le?Ve.ColorUtil.mixColors(F,M,se?Math.min(1,le/se-1):1):Ve.ColorUtil.mixColors(F,L,le?Math.min(1,se/le-1):1):F,a.rect(ye,de,pe,yt),a.fillStroke({fillColor:Fe},{strokeColor:w}),a.closePath(),a.beginPath()),ae!==bt&&(Y||ae!==qt)||(a.rect(Wt,de,r,yt),a.save(),a.clip(),a.stroke({strokeColor:A,width:2*Z}),a.restore(),ae===bt&&a.fill({fillColor:A}),a.closePath(),a.beginPath())}}else for(var me=0;me<2;me++){var _e,Ce,be,ge=(me?re:oe).tradesCount;this._volumeFilter(ge)&&(be=Ce=_e=Fe=ye=pe=void 0,be=me?(ye=Wt+r-(pe=this._getVolumeWidth(se,St,Yt,mt)),Fe=z,_e=j,Ce=se===St,se===Yt):(pe=this._getVolumeWidth(le,gt,Kt,mt),ye=Wt,Fe=N,_e=R,Ce=le===gt,le===Kt),a.rect(ye,de,pe,yt),a.fill({fillColor:Fe}),a.closePath(),a.beginPath(),(Ce||!Y&&be)&&(a.rect(Wt+me*mt,de,mt,yt),a.save(),a.clip(),a.stroke({strokeColor:_e,width:2*Z}),a.restore(),a.closePath(),a.beginPath()))}!P||(Zt=y[vt])!==(Jt=C[vt])&&($t=l.yByValue(Zt),te=(Qt=l.yByValue(Jt))-pt/2,ee=Math.min(4,r),ie=$t-Qt+pt,Fe=Zt<Jt?k:x,a.rect(Wt,te,ee,ie),a.fill({fillColor:Fe}),a.closePath(),a.beginPath())}var Se=Math.min(E.fontSize,yt);if(H!==ze.NoText&&!Ct&&Se&&!Ve.JsUtil.debug("footprint_no_text")){a.save();var ve=void 0;switch(H){case ze.BidDeltaAsk:ve=ce.toString();break;case ze.BidTotalAsk:ve=ae.toString();break;case ze.BidAsk:ve=G}var we=__assign({},E);if(we.fontSize=Se,Gt&&(we.fillColor=ht),a.textOptions({align:Ve.TextAlign.CENTER,baseline:Ve.TextBaseline.MIDDLE}),a.fillText(ve,Ht,fe,we),!X)for(var Pe=H===ze.BidAsk,me=0;me<2;me++){var ke,xe=void 0,Oe=void 0,Ee=void 0,Ie=void 0,De=void 0,Te=void 0,Me=void 0,Me=me?(xe=re,Oe=it,Ee=ot,Ie=nt,he&&(De=he.bidInfo),Pe?(Te=Ht+_t/2+U,Ve.TextAlign.LEFT):(Te=Wt-U+r,Ve.TextAlign.RIGHT)):(xe=oe,Oe=tt,Ee=et,Ie=rt,ue&&(De=ue.askInfo),Pe?(Te=Ht-_t/2-U,Ve.TextAlign.RIGHT):(Te=Wt+U,Ve.TextAlign.LEFT)),Le=this._getProfile(xe),Fe=void 0;Gt?Fe=xe.isCurrent?ut:ht:$&&De&&((ke=this._getProfile(De))*Q<Le?Fe=Oe:Ie&&Le*Q<ke&&(Fe=Ee));var Ae=__assign({},E);Ae.fontSize=Se,Fe&&(Ae.fillColor=Fe),a.textOptions({align:Me,baseline:Ve.TextBaseline.MIDDLE}),a.fillText(Le.toString(),Te,fe,Ae)}a.restore()}}}}}}}},f.prototype._handleValue=function(i,t){if(void 0===t&&(t=!1),!this._isValidDetails(i))return i;for(var e=this.chart.instrument,o=this._settings.main.customTickSize,r=o.enabled?o.value:1,n=t?e.tickSize*r:e.tickSize,a=-1/0,l=1/0,s=0;s<i.length;s++)var c=i[s].price,a=Math.max(a,c),l=Math.min(l,c);for(var h=[],c=l;c<=a;c+=n)!function(e){var t=i.find(function(t){return t.price===e});h.push(t||{bidInfo:{volume:0,tradesCount:0},askInfo:{volume:0,tradesCount:0},volume:0,tradesCount:0,price:e})}(c);if(h.sort(function(t,e){return t.price-e.price}),!o.enabled||t)return h;for(var u=[],f=0;f<h.length;f+=o.value){for(var d=Ve.JsUtil.clone(h[f]),s=f+1;s<Math.min(f+o.value,h.length);s++){var p=h[s],y=p.bidInfo,m=p.askInfo,_=p.volume,C=p.tradesCount;d.bidInfo.volume+=y.volume,d.bidInfo.tradesCount+=y.tradesCount,d.askInfo.volume+=m.volume,d.askInfo.tradesCount+=m.tradesCount,d.volume+=_,d.tradesCount+=C}for(c=0,s=1;s<o.value;s++)c+=s*e.tickSize;d.price+=c/o.value,u.push(d)}return u},f.prototype._getProfile=function(t){switch(this._settings.main.mode){case e.Volume:return t.volume;case e.TradesCount:return t.tradesCount}},f.prototype._getVolumeWidth=function(t,e,i,o){var r=this._settings.profile,n=r.profileFilter,a=r.filterValue;switch(n){case l.NoProfileFilter:return t*o/i;case l.MaxWidthProfile:return Math.min(o,t*o/a);case l.MinVolumeProfile:return a<=t?t*o/i:0;case l.AutoMaxProfile:return t*o/e}},f.prototype._volumeFilter=function(t){var e=this._settings.volumeFilter,i=e.enabled,o=e.mode,r=e.value;if(!i)return!0;switch(o){case s.GreaterThan:return r<t;case s.LessThan:return t<r}},f);function f(){var t=h.call(this)||this;return t._settings={main:{fillColor:"#404040",strokeColor:"transparent",barStrokeColor:"transparent",enableOpenClose:!0,closeOpenColor:"green",openCloseColor:"red",mode:e.Volume,customTickSize:{enabled:!1,value:1}},font:{fontFamily:"Open Sans",fontSize:11,fillColor:"#848484",fontWeight:"400"},intraBar:{barStyle:Ne.VolumeProfileBars,useDeltaShadingColors:!0,sellShadeBarColor:"#ff0000",buyShadeBarColor:"#00ff00",barColor:"#ffffff",barPocColor:"#3452F1",barAlignment:Re.Left,sellVolumeBarColor:"silver",sellPocBarColor:"gold",buyVolumeBarColor:"silver",buyPocBarColor:"gold"},text:{textStyle:ze.BidAsk,margin:4,hideSides:!1,separator:"x",initialBarWidth:80,barWidthTextThreshold:60},profile:{profileFilter:l.AutoMaxProfile,filterValue:4e3,autoProfilingRange:je.Visible,showPocOnlyOnBiggestBar:!1,strokeWidth:2},volumeFilter:{enabled:!1,mode:s.GreaterThan,value:100},deltaImbalance:{enabled:!0,threshold:3.5,strongBidVolumeColor:"#ff0000",weakBidVolumeColor:"#0000ff",strongAskVolumeColor:"#00ff00",weakAskVolumeColor:"#0000ff",enableWeakBidVolume:!0,enableWeakAskVolume:!0},pullback:{enabled:!0,fillColor:"#717171",strokeColor:"transparent",textColor:"#c1c1c1",currentBidAskColor:"#ffffff"}},t._pullbackData=[],t._maxBarWidth=16,t._plotThemeKey="footprint",t}Ve.FootprintPlot=u}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),__assign=this&&this.__assign||Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};!function(_e){"use strict";var ut,t,H,e,U,i,X,o,Ce,r,be,n,ge,a,Se,l,s="#33BBFF",ve="#FFFFFF",we="#FF0000",Pe="#00FF00",ke={0:"#000000",20:"#0000FF",40:"#00FFFF",60:"#00FF00",80:"#FFFF00",100:"#FF0000"},c={K:1e3,M:1e6,B:1e9};(t=ut=_e.VolumeProfileType||(_e.VolumeProfileType={})).Volume="volume",t.TradesCount="tradesCount",t.Price="price",t.SellVolume="sellVolume",t.BuyVolume="buyVolume",(e=H=_e.VolumeProfilePeriodType||(_e.VolumeProfilePeriodType={})).Every="every",e.Last="last",(i=U=_e.VolumeProfilePeriodUnit||(_e.VolumeProfilePeriodUnit={})).Bars="bars",i.ToPresent="toPresent",i.AllBars="allBars",i.VisibleBars="visibleBars",(o=X=_e.VolumeProfileHide||(_e.VolumeProfileHide={})).LastProfile="lastProfile",o.AllProfiles="allProfiles",(r=Ce=_e.VolumeProfileAlign||(_e.VolumeProfileAlign={})).Left="left",r.Right="right",(n=be=_e.VolumeProfileProfileType||(_e.VolumeProfileProfileType={})).HollowBlocks="hollowBlocks",n.Dots="dots",n.Lines="lines",n.Hollowgram="hollowgram",n.Solidgram="solidgram",n.FilledLine="filledLine",n.HollowLine="hollowLine",n.SolidBlock="solidBlock",(a=ge=_e.VolumeProfileProfileColorType||(_e.VolumeProfileProfileColorType={})).ProfileColor="profileColor",a.PeakValley="peakValley",a.HeatMap="heatMap",a.CustomBlend="customBlend",a.FpShading="fpShading",(l=Se=_e.VolumeProfileExtendNakedType||(_e.VolumeProfileExtendNakedType={})).Closes="closes",l.HighsLows="highsLows",l.ClosesHighsLows="closesHighsLows",(_e.CustomPeriodState||(_e.CustomPeriodState={})).Hovered="hovered";var xe={DEFAULT:"default",CUSTOM:"custom",COMPOSITE:"composite",PRICE_STATS:"priceStats"};Object.freeze(xe);var h,u=(h=_e.AdvancedPlot,__extends(G,h),Object.defineProperty(G.prototype,"isEmpty",{get:function(){return this._customPeriods.length<1},enumerable:!0,configurable:!0}),G.prototype._handleSettings=function(t){var e=t.general,i=e.period,o=i.date;null!=o&&(i.date=new Date(o)),this._rth.setWorkingTimes(t.workingTimes),this._eth.setWorkingTimes(t.eth.workingTimes),this._shouldRefreshPeriodsCache(e)&&(this._periodsDataCache={}),!this._settingsHandled&&this._commonVolumeProfilePlotStyles.includes(this.plotStyle)&&(this._needsShift=!0)},G.prototype._shouldRefreshPeriodsCache=function(t){return t.type!==this._settings.general.type||t.vaCorrelation!==this._settings.general.vaCorrelation||t.smoothed.enabled!==this._settings.general.smoothed.enabled||t.smoothed.value!==this._settings.general.smoothed.value||t.customTickSize.enabled!==this._settings.general.customTickSize.enabled||t.customTickSize.value!==this._settings.general.customTickSize.value},G.prototype.getCustomPeriods=function(){return this._customPeriods},G.prototype.removePeriodsIfEmpty=function(){for(var t=0,e=this._customPeriods;t<e.length;t++){var i=e[t],o=i.startIndex,r=i.endIndex;(null==r||r<o)&&(r=o),o=Math.max(o,0),(r=Math.min(r,this.chart.recordCount-1))-o<1&&this.deleteCustomPeriod(i.id)}},G.prototype.createCustomPeriod=function(t){var e=t.startIndex,i=t.endIndex;(null==i||i<e)&&(i=e),e=Math.max(e,0),i=Math.min(i,this.chart.recordCount-1);var o=+new Date,r=__assign({id:o,name:null,state:null,startIndex:e,endIndex:i},this._getCustomPeriodHighLow(e,i));return this._customPeriods.push(r),this.chart.setNeedsUpdate(),o},G.prototype.updateCustomPeriod=function(r){var n=this;this._customPeriods=this._customPeriods.map(function(t){if(t.id!==r.id)return t;var e=__assign({},t,r),i=e.startIndex,o=e.endIndex;return o<i&&(o=i),i=Math.max(i,0),o=Math.min(o,n.chart.recordCount-1),__assign({},e,{startIndex:i,endIndex:o},n._getCustomPeriodHighLow(i,o))}),this.chart.setNeedsUpdate()},G.prototype.deleteCustomPeriod=function(e){this._customPeriods=this._customPeriods.filter(function(t){return t.id!==e})},G.prototype._getCustomPeriodHighLow=function(t,e){for(var i=this.chart.dataManager,o=i.getDataSeries(_e.DataSeriesSuffix.HIGH).values,r=i.getDataSeries(_e.DataSeriesSuffix.LOW).values,n=-1/0,a=1/0,l=t;l<=e;l++)n=Math.max(n,o[l]),a=Math.min(a,r[l]);return{high:n,low:a}},G.prototype.draw=function(){if(this.visible){var t=this._barDrawParams(),e=t.dates,i=t.startIndex,o=t.endIndex;if(0!==e.length){var r=e.length-1,n=this._settings,a=n.general,l=a.period,s=a.hide,c=a.calculateXProfiles,h=a.sessions,u=h.current,f=h.prev,d=h.days,p=n.eth,y=n.splitProfile,m=n.overlayEthOverRth;if(this._startIndex=i,this._endIndex=o,this._labelLines=[],this._periods=[],this._periodsData.set(null,[]),this._periodsData.set(this._settings,[]),this._periodsData.set(p,[]),this.plotStyle===G.Style.DEFAULT){if(!s.enabled||s.value!==X.AllProfiles){var _=this._rth.periods,C=this._eth.periods,b=void 0;if(y)b=_;else{b=[];if([U.Bars,U.ToPresent,U.AllBars,U.VisibleBars].includes(l.unit))switch(l.unit){case U.Bars:for(var g=c,S=o;b.unshift({startIndex:Math.max(0,S-l.value+1),endIndex:S}),S-=l.value,l.type===H.Every&&0<S&&--g;);break;case U.ToPresent:if(l.date){for(var v=void 0,w=r-1;0<=w;w--)if(+l.date>+e[w]){v=w+1;break}b.unshift({startIndex:v||0,endIndex:r})}break;case U.AllBars:b.unshift({startIndex:0,endIndex:o});break;case U.VisibleBars:b.unshift({startIndex:i,endIndex:o})}else{var P=l.unit;if(_e.TimeFrame.timeFrameToTimeInterval(this.chart.timeFrame)<=_e.Session.getPeriodTimeInterval(P)*l.value){var g=c,k=void 0;do{for(var x=e[F=null!=k?k-1:r],O=_e.Session.getPeriodStartTime(x,P,l.value),E=_e.Session.getDatePoint(x,P),I=l.value,k=null,w=F-1;0<=w;w--){var D=e[w],T=_e.Session.getDatePoint(D,P);if(l.type===H.Every&&T!==E){if(!--I){k=w+1;break}E=T}if(l.type===H.Last&&+D<O){k=w+1;break}}if(null==k)k=0;else if(o<k)continue;b.unshift({startIndex:k,endIndex:F})}while(l.type===H.Every&&0<k&&--g)}}}var M=!y||m?b:_e.Session.getSplittedPeriods(this._rth.periods,this._eth.periods);s.enabled&&s.value===X.LastProfile&&M.pop(),this._drawPeriods(M),y&&this._drawPeriods(C,p)}}else if(this.plotStyle===G.Style.CUSTOM)for(w=0;w<this._customPeriods.length;w++)this._drawPeriod(this._getPeriodData(this._customPeriods[w]));else if(this.plotStyle===G.Style.COMPOSITE){var L={startIndex:0,endIndex:r},_=this._rth.periods.length?this._rth.periods:L;this._drawPeriod(this._getPeriodData(_)),m&&this._eth.periods.length&&this._drawPeriod(this._getPeriodData(this._eth.periods),p)}else if(this.plotStyle===G.Style.PRICE_STATS&&(u.enabled||f.enabled||d.enabled)){var F,E=e[r].getDate(),A=F=r,V=0;u.enabled&&(V=1),f.enabled&&(V=2);var N,R=void 0;R=d.enabled?(N=d.count-(d.includeCurrentSession?2:1),Math.max(N,V)):V;for(var z=0,j={1:"current",2:"prev"},w=r-1;-1<=w;w--){w<0&&++z;var B={startIndex:w+1,endIndex:V<z?A:F};if(w<0){this._setPriceStatsPeriodsArgs(B,j[z]);break}if((T=e[w].getDate())!==E&&(E=T,!(2<++z&&z<R))){if(this._setPriceStatsPeriodsArgs(B,j[z]),R<=z)break;F=w,d.includeCurrentSession||1!==z||(A=w)}}this._drawPriceStats()}this._drawLabelLines(),this._periodsData.delete(null),this._periodsData.delete(this._settings),this._periodsData.delete(p)}}},G.prototype._drawPeriods=function(t,e){void 0===e&&(e=null);for(var i=0;i<t.length;i++){var o=t[i];o.endIndex>=this._startIndex&&o.startIndex<=this._endIndex&&this._drawPeriod(this._getPeriodData(o),e)}},G.prototype._setPriceStatsPeriodsArgs=function(t,e){e=e||"days";var i,o,r,n,a=this._settings,l=a.general.sessions,s=a.eth,c=a.overlayEthOverRth;l[e].enabled&&(c&&(i=_e.Session.getLimitedPeriods(this._eth.periods,t),o=this._getPeriodData(i),this._priceStatsPeriodsArgs.unshift([o,s,e])),r=_e.Session.getLimitedPeriods(this._rth.periods,t),n=this._getPeriodData(r),this._priceStatsPeriodsArgs.unshift([n,this._settings,e]))},G.prototype._drawPriceStats=function(){for(var t=-1/0,e=0;e<this._priceStatsPeriodsArgs.length;e++){(o=(i=this._priceStatsPeriodsArgs[e])[0])&&(t=Math.max(t,o.poc))}for(var i,o,e=0;e<this._priceStatsPeriodsArgs.length;e++){(o=(i=this._priceStatsPeriodsArgs[e])[0])&&(o.pocCorrelation=o.poc/t),this._drawPeriod.apply(this,i)}this._priceStatsPeriodsArgs=[],this._needsShift&&this._shift()&&(this._needsShift=!1)},G.prototype._shift=function(){for(var t=this._settings.general.margin,e=this._getSizeInPixels(t),i=this._periodsData.get(this._settings),o=0,r=0;r<i.length;r++)o-=i[r].width+e;var n=this.chart,a=n.dateScale,l=(n.recordCount-n.lastVisibleRecord)*a.columnWidth;return!!(o&&o<l)&&(setTimeout(function(){a.scrollOnPixels(o-l),n.setNeedsUpdate(!0)}),!0)},G.prototype._drawPeriod=function(t,e,i){if(void 0===e&&(e=null),void 0===i&&(i=null),t){var o=t.startIndex,r=t.endIndex,n=t.periods,a=t.prices,l=t.profiles,s=t.profilesSum,c=t.poc,h=t.pocProfile,u=t.bidProfilesMap,f=t.askProfilesMap,d=t.high,p=t.low,y=t.vaHigh,m=t.vaLow,_=t.pocCorrelation,C=this._commonVolumeProfilePlotStyles.includes(this.plotStyle),b=C&&this._periods.includes(i);b||this._periods.push(i);var g=C||r>=this._startIndex&&o<=this._endIndex,S=this._periodsData.get(e),v=this._barDrawParams(),w=v.renderer,P=v.projection,k=this.chart,x=k.dataManager,O=k.instrument,E=k.dateScale,I=this.chartPanel.layer.size,D=this.chartPanel.contentFrame.width,T={fontFamily:"Open Sans",fontSize:12,fillColor:ve,fontWeight:"400"},M=this._settings,L=M.general,F=L.customTickSize,A=L.align,V=L.width,N=L.margin,R=L.sessions,z=M.graphics,j=z.summaryEnabled,B=z.summaryFont,H=z.showPrices,U=M.highlight,X=U.poc,G=U.va,W=e||this._settings,q=W.profile,K=q.type,Y=q.color,Z=q.widthCorrelation,J=q.extendNakedPocs,$=q.extendNaked,Q=q.vaInsideOpacity,tt=q.vaOutsideOpacity,et=W.lines,it=et.current,ot=et.prev,rt=et.dev,nt=F.enabled?F.value:1,at=O.tickSize*nt,lt=this._getSizeInPixels(N),st=C?1:Z;null!=_&&(st*=_);var ct,ht,ut,ft=this.plotStyle!==xe.PRICE_STATS?tt:1,dt=x.getDataSeries(_e.DataSeriesSuffix.OPEN).values,pt=x.getDataSeries(_e.DataSeriesSuffix.CLOSE).values,yt=dt[o],mt=pt[r],_t=C?0:E.columnWidth/2,Ct=P.xByRecord(o)-_t,bt=P.xByRecord(r)+_t,gt=P.yByValue(0)-P.yByValue(at),St=P.yByValue(c),vt=P.yByValue(y),wt=P.yByValue(m);if(C){Ot=this._getSizeInPixels(i?R[i].width:V),Et=I.height;for(var Pt=0,kt=0;kt<S.length;kt++)Pt+=S[kt].width+lt;switch(A){case Ce.Left:ct=Pt;break;case Ce.Right:ct=D-Pt}ht=0}else{var xt=gt/2,Ot=bt-(Pt=Ct),Et=P.yByValue(0)-P.yByValue(at*a.length);switch(A){case Ce.Left:ct=Pt;break;case Ce.Right:ct=Pt+Ot}ht=P.yByValue(a[a.length-1])-xt}switch(A){case Ce.Left:ut=ct+Ot;break;case Ce.Right:ut=ct-Ot}var It=Math.min(ct,ut),Dt={startIndex:o,endIndex:r,width:Ot,endX:ut,high:d,low:p,close:mt,poc:c,pocY:St,vaHighY:vt,vaLowY:wt};if(g){if(!(Ot<5)){w.closePath(),w.beginPath(),b||(w.rect(ct,ht,ut-ct,Et),w.fill({fillColor:"rgba(255, 255, 255, 0.1)"}),w.closePath(),w.beginPath());for(var Tt,Mt=[],kt=0;kt<l.length;kt++){var Lt=a[kt],Ft=l[kt],At=u[Lt],Vt=f[Lt],Nt=y!==m&&Lt<=y&&m<=Lt?Q:ft,Rt=void 0,zt=X.enabled&&Lt===c,jt=G.enabled&&(Lt===y||Lt===m);if(zt||jt)Rt=zt?X.value:G.value;else switch(Y.type){case ge.ProfileColor:Rt=Y.value;break;case ge.PeakValley:break;case ge.HeatMap:var Bt,Ht,Ut=100*Ft/h,Xt=Math.ceil(.05*Ut)/.05,Gt=Xt?Xt-20:Xt;Rt=Gt==Xt?ke[Gt]:(Bt=ke[Gt],Ht=ke[Xt],_e.ColorUtil.mixColors(Bt,Ht,(Ut-Gt)/(Xt-Gt)));break;case ge.CustomBlend:Rt=_e.ColorUtil.mixColors(we,Pe,Ft/h);break;case ge.FpShading:Rt=At===Vt?ve:Vt<At?Vt?_e.ColorUtil.mixColors(ve,we,Math.min(1,At/Vt-1)):we:At?_e.ColorUtil.mixColors(ve,Pe,Math.min(1,Vt/At-1)):Pe}Rt=_e.ColorUtil.hexToRgba(Rt,Nt),Mt.push(Rt)}for(var Wt,qt,Kt,Yt,Zt=Ot*st,kt=0;kt<l.length;kt++){var Lt=a[kt],Ft=l[kt],Jt=P.yByValue(Lt),$t=Jt-gt/2,Qt=$t+gt,te=K===be.SolidBlock?Zt:Ft*Zt/h,ee=(Rt=Mt[kt])!==Mt[kt-1],ie=Rt!==Mt[kt+1],oe=void 0;switch(A){case Ce.Left:oe=ct+te;break;case Ce.Right:oe=ct-te}var re={fillColor:Rt},ne={strokeColor:Rt};switch(kt||(Tt={profileEndX:oe,profileMiddleY:Jt,profileY:Qt}),K){case be.HollowBlocks:w.rect(oe,$t,te,gt);break;case be.Dots:w.line(ct,Jt,oe,Jt),ne.lineStyle=_e.LineStyle.DOT;break;case be.Lines:w.line(ct,Jt,oe,Jt);break;case be.Hollowgram:kt?(ee&&w.moveTo(Tt.profileEndX,Qt),w.lineTo(oe,Qt)):w.moveTo(oe,Qt),w.lineTo(oe,$t);break;case be.Solidgram:ee?w.moveTo(oe,Tt.profileY):w.lineTo(oe,Qt),w.lineTo(oe,$t),ie&&(w.lineTo(ct,$t),w.lineTo(ct,Tt.profileY),w.lineTo(Tt.profileEndX,Tt.profileY));break;case be.FilledLine:ee?w.moveTo(oe,Jt):w.lineTo(oe,Jt),ie&&(w.lineTo(ct,Jt),w.lineTo(ct,Tt.profileMiddleY),w.lineTo(Tt.profileEndX,Tt.profileMiddleY));break;case be.HollowLine:kt?(ee&&w.moveTo(Tt.profileEndX,Tt.profileMiddleY),w.lineTo(oe,Jt)):w.moveTo(oe,Jt);break;case be.SolidBlock:w.rect(oe,$t,te,gt)}ie&&([be.Solidgram,be.FilledLine,be.SolidBlock].includes(K)?w.fill(re):w.stroke(ne),w.closePath(),w.beginPath()),ie&&(Tt={profileEndX:oe,profileMiddleY:Jt,profileY:$t})}if(!b&&i){switch(i){case"current":Wt="Current";break;case"prev":Wt="Previous";break;default:Wt=R.days.count+" days"}w.textOptions({align:_e.TextAlign.CENTER,baseline:_e.TextBaseline.TOP}),w.fillText(Wt,(ct+ut)/2,ht+6,T),w.closePath(),w.beginPath()}if(it.poc.enabled&&this._drawLine(St,Ct,bt,it.poc.strokeTheme),it.poc.labelEnabled&&this._labelLines.push({label:"POC",value:c,y:St,color:it.poc.strokeTheme.strokeColor}),it.va.enabled&&this._drawLine([vt,wt],Ct,bt,it.va.strokeTheme),it.va.labelEnabled&&this._labelLines.push({label:"VA High",value:y,y:vt,color:it.va.strokeTheme.strokeColor},{label:"VA Low",value:m,y:wt,color:it.va.strokeTheme.strokeColor}),rt.poc.enabled&&this._drawDevPoc(n,0,rt.poc.strokeTheme),rt.va.enabled&&this._drawDevVa(n,0,rt.va.strokeTheme),!C){if(J)for(kt=0;kt<S.length;kt++){var ae=S[kt];this._drawLine(ae.pocY,ae.endX,this._getIntersectBarX(ae.endIndex,ae.poc),it.poc.strokeTheme)}if($.enabled)for(kt=0;kt<S.length;kt++){var ae=S[kt],le=void 0;switch($.type){case Se.Closes:le=[ae.close];break;case Se.HighsLows:le=[ae.high,ae.low];break;case Se.ClosesHighsLows:le=[ae.close,ae.high,ae.low]}for(var se=[],ce=0;ce<le.length;ce++){var he=P.yByValue(le[ce]);se.push(he)}this._drawLine(se,ae.endX,this._getIntersectBarXs(ae.endIndex,le),$.strokeTheme)}if(S.length&&(qt=S[S.length-1],ot.poc.enabled&&this._drawLine(qt.pocY,ct,ut,ot.poc.strokeTheme),ot.va.enabled&&this._drawLine([qt.vaHighY,qt.vaLowY],ct,ut,ot.va.strokeTheme)),j){w.textTheme(B),w.textOptions({align:_e.TextAlign.LEFT,baseline:_e.TextBaseline.TOP});for(var ue=["Vol: "+this._formatNumber(s),"Rng: "+this._formatNumber(d-p),"Ch: "+this._formatNumber(mt-yt)],fe=-1/0,kt=0;kt<ue.length;kt++)var de=ue[kt],pe=w.textWidth(de),fe=Math.max(fe,pe);if(fe<=Ot)for(var ye=It,me=ht+Et+8,kt=0;kt<ue.length;kt++){de=ue[kt];w.fillText(de,ye,me+kt*(B.fontSize+4),B)}w.closePath(),w.beginPath()}H&&(Yt=Kt=void 0,Yt=A===Ce.Left?(Kt=ct+Ot,Ce.Right):(Kt=ct-Ot,Ce.Left),w.fillText(this.chartPanel.formatter.format(d),Kt,ht,__assign({},B,{textAlign:Yt,textBaseline:"bottom"})),w.fillText(this.chartPanel.formatter.format(p),Kt,ht+Et,__assign({},B,{textAlign:Yt,textBaseline:"bottom"})))}S.push(Dt)}}else S.push(Dt)}},G.prototype._getPeriodData=function(t){if(Array.isArray(t)){if(!t.length)return}else t=[t];var e=_e.Session.getFullPeriod(t),i=e.startIndex,o=e.endIndex;if(!(o<i)){var r=i+"-"+o;if(this._periodsDataCache[r]&&o!==this.chart.dataManager.barDataSeries().close.length-1)return this._periodsDataCache[r];for(var n=this._settings.general,a=n.type,l=n.vaCorrelation,s=n.smoothed,c=n.customTickSize,h=this.chart,u=h.dataManager,f=h.instrument,d=c.enabled?c.value:1,p=f.tickSize*d,y=u.getDataSeries(_e.DataSeriesSuffix.HIGH).values,m=u.getDataSeries(_e.DataSeriesSuffix.LOW).values,_=u.getDataSeries(_e.DataSeriesSuffix.DETAILS).values,C={},b={},g={},S=-1/0,v=1/0,w=0;w<t.length;w++)for(var P=t[w],k=P.startIndex,x=P.endIndex,O=k;O<=x;O++){var E=_[O],I=y[O],D=m[O],S=Math.max(S,I),v=Math.min(v,D);if(this._isValidDetails(E))for(var T=0;T<E.length;T++){var M=E[T],L=M.bidInfo,F=M.askInfo,A=M.volume,V=M.tradesCount,N=M.price,R=void 0,z=void 0,j=void 0;switch(a){case ut.Volume:R=A,z=L.volume,j=F.volume;break;case ut.TradesCount:R=V,z=L.tradesCount,j=F.tradesCount;break;case ut.Price:R=N,z=L.price,j=F.price;break;case ut.BuyVolume:R=L.volume,z=L.price,j=F.price;break;case ut.SellVolume:R=F.volume,z=L.price,j=F.price}C[N]=(C[N]||0)+R,b[N]=(b[N]||0)+z,g[N]=(g[N]||0)+j}else if(a===ut.Price)for(N=D;N<=I;N+=f.tickSize)C[N]=(C[N]||0)+N,b[N]=0,g[N]=0}for(var B=Object.entries(C).sort(function(t,e){return t[0]-e[0]}),H=Object.entries(b).sort(function(t,e){return t[0]-e[0]}),U=Object.entries(g).sort(function(t,e){return t[0]-e[0]}),X=[],G=[],W=[],w=0;w<B.length;w++){R=B[w][1],z=H[w][1],j=U[w][1];X.push(R),G.push(z),W.push(j)}s.enabled&&1<s.value&&(X=this._getSmoothedValues(X,s.value),G=this._getSmoothedValues(G,s.value),W=this._getSmoothedValues(W,s.value));for(w=0;w<B.length;w++){C[N=B[w][0]]=X[w],b[N]=G[w],g[N]=W[w]}for(var q=0,K=-1/0,Y=f.tickSize*Math.floor(d/2),Z=S+Y-(S-v)%p,N=v+Y;N<=Z;N+=p){null==C[N]&&(C[N]=0),null==b[N]&&(b[N]=0),null==g[N]&&(g[N]=0);for(var J=N-Y;J<=N+Y;J+=f.tickSize)J!==N&&(null!=C[J]&&(C[N]+=C[J],delete C[J]),null!=b[J]&&(b[N]+=b[J],delete b[J]),null!=g[J]&&(g[N]+=g[J],delete g[J]));q+=R=C[N],K=Math.max(K,R)}for(var $=Object.entries(C).sort(function(t,e){return t[0]-e[0]}),Q=[],tt=[],w=0;w<$.length;w++){var et=$[w],N=et[0],R=et[1];Q.push(+N),tt.push(R)}for(var it=tt.findIndex(function(t){return t===K}),ot=Q[it],rt=q*l,nt=it,at=it,lt=K;lt<rt;)nt<tt.length-1&&(lt+=tt[++nt]),0<at&&(lt+=tt[--at]);var st=Q[nt],ct=Q[at],ht={startIndex:i,endIndex:o,periods:t,prices:Q,profiles:tt,profilesSum:q,poc:ot,pocProfile:K,bidProfilesMap:b,askProfilesMap:g,high:S,low:v,vaHigh:st,vaLow:ct};return this._periodsDataCache[r]=ht}},G.prototype._getIntersectBarX=function(t,e){for(var i=this.projection,o=this.chart.dataManager,r=o.getDataSeries(_e.DataSeriesSuffix.HIGH).values,n=o.getDataSeries(_e.DataSeriesSuffix.LOW).values,a=t+1;a<r.length;a++)if(r[a]>=e&&e>=n[a])return i.xByRecord(a);return this.chartPanel.layer.size.width},G.prototype._getIntersectBarXs=function(t,e){for(var i=[],o=0;o<e.length;o++){var r=this._getIntersectBarX(t,e[o]);i.push(r)}return i},G.prototype._getSmoothedValues=function(t,e){for(var i=[],o=(e-1)/2,r=0;r<t.length;r++){for(var n=t[r],a=1,l=1;l<=o;l++){var s=r-l,c=r+l;0<=s&&(n+=t[s],a++),c<t.length&&(n+=t[c],a++)}i.push(n/a)}return i},G.prototype._drawDevPoc=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=null),this._drawDevLine("poc",t,e,i)},G.prototype._drawDevVa=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=null),this._drawDevLine(["vaHigh","vaLow"],t,e,i)},G.prototype._drawDevLine=function(t,e,i,o){void 0===i&&(i=0),void 0===o&&(o=null),Array.isArray(t)||(t=[t]),Array.isArray(e)||(e=[e]);for(var r=this.renderer,n=this.projection,a=_e.Session.getFullPeriod(e),l=a.startIndex,s=[],c=[],h=a.endIndex;l<=h;){var u=_e.Session.getLimitedPeriods(e,{startIndex:l,endIndex:h}),f=this._getPeriodData(u),d=n.xByRecord(h)+i;s.push(f),c.push(d),h--}for(var p=0;p<t.length;p++)for(var y=t[p],m=void 0,_=0;_<s.length;_++){var f=s[_],d=c[_],C=n.yByValue(f[y]);_?(C!==m&&r.lineTo(d,m),r.lineTo(d,C)):r.moveTo(d,C),m=C}r.stroke(o||this._strokeTheme),r.closePath(),r.beginPath()},G.prototype._formatNumber=function(t){for(var e in c){var i=t/c[e];if(1<=i&&i<1e3)return i.toFixed(2)+e}return t.toFixed(2)},G.Style=xe,G.defaults={plotStyle:xe.DEFAULT},G);function G(t){var e=h.call(this,t)||this;return e._strokeTheme={width:1,strokeColor:s,lineStyle:_e.LineStyle.SOLID},e._sessionSettings={profile:{type:be.Solidgram,color:{type:ge.ProfileColor,value:"#A0A0A0"},widthCorrelation:.5,extendNakedPocs:!1,extendNaked:{enabled:!1,type:Se.ClosesHighsLows,strokeTheme:e._strokeTheme},vaInsideOpacity:1,vaOutsideOpacity:.5},lines:{current:{poc:{enabled:!0,strokeTheme:{width:1,strokeColor:"green",lineStyle:_e.LineStyle.SOLID},labelEnabled:!1},va:{enabled:!0,strokeTheme:{width:1,strokeColor:"red",lineStyle:_e.LineStyle.SOLID},labelEnabled:!1}},prev:{poc:{enabled:!1,strokeTheme:{width:1,strokeColor:"green",lineStyle:_e.LineStyle.SOLID}},va:{enabled:!1,strokeTheme:{width:1,strokeColor:"red",lineStyle:_e.LineStyle.SOLID}}},dev:{poc:{enabled:!1,strokeTheme:{width:1,strokeColor:"green",lineStyle:_e.LineStyle.SOLID}},va:{enabled:!1,strokeTheme:{width:1,strokeColor:"red",lineStyle:_e.LineStyle.SOLID}}}},workingTimes:[]},e._settings=__assign({general:{type:ut.Price,period:{type:H.Every,value:2,unit:_e.SessionPeriodUnit.Week,date:null},hide:{enabled:!1,value:X.LastProfile},vaCorrelation:.7,smoothed:{enabled:!1,value:9},customTickSize:{enabled:!1,value:5},calculateXProfiles:999,align:Ce.Right,width:{value:70,unit:_e.IndicatorSizeUnit.Pixel},margin:{value:4,unit:_e.IndicatorSizeUnit.Pixel},sessions:{current:{enabled:!0,width:{value:70,unit:_e.IndicatorSizeUnit.Pixel}},prev:{enabled:!0,width:{value:70,unit:_e.IndicatorSizeUnit.Pixel}},days:{enabled:!0,count:10,includeCurrentSession:!1,width:{value:70,unit:_e.IndicatorSizeUnit.Pixel}}}},graphics:{summaryEnabled:!0,showPrices:!0,summaryFont:{fontFamily:"Open Sans",fontSize:12,fillColor:s,fontWeight:"400"}}},_e.JsUtil.clone(e._sessionSettings),{eth:_e.JsUtil.merge(e._sessionSettings,{profile:{color:{value:s}}}),splitProfile:!1,overlayEthOverRth:!1,highlight:{poc:{enabled:!0,value:s},va:{enabled:!0,value:s}}}),e._periodsData=new Map,e._periods=[],e._periodsDataCache={},e._customPeriods=[],e._priceStatsPeriodsArgs=[],e._commonVolumeProfilePlotStyles=[xe.COMPOSITE,xe.PRICE_STATS],e._needsShift=!1,e._plotThemeKey="volumeProfile",setTimeout(function(){e.chart&&e.chart.setNeedsUpdate()},1e3),e}_e.VolumeProfilePlot=u}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),__assign=this&&this.__assign||Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};!function(u){"use strict";var f,t;(t=f=u.SessionStatsStyle||(u.SessionStatsStyle={})).Line="line",t.Block="block";var d,e=(d=u.AdvancedPlot,__extends(i,d),Object.defineProperty(i.prototype,"rigthMargin",{get:function(){return this._getSizeInPixels(this._settings.general.margin)},enumerable:!0,configurable:!0}),i.prototype._onChartPanelChanged=function(t){var e;d.prototype._onChartPanelChanged.call(this,t),this.chart&&(e=this.chart.dataManager,this._opens=e.getDataSeries(u.DataSeriesSuffix.OPEN).values,this._highs=e.getDataSeries(u.DataSeriesSuffix.HIGH).values,this._lows=e.getDataSeries(u.DataSeriesSuffix.LOW).values,this._closes=e.getDataSeries(u.DataSeriesSuffix.CLOSE).values)},i.prototype._handleSettings=function(t){var e=t.workingTimes;this._rth.setWorkingTimes(e.rth),this._eth.setWorkingTimes(e.eth),this._setLinesData()},i.prototype._setLinesData=function(){for(var t in this._linesData){var e,i;this._linesData.hasOwnProperty(t)&&(i=(e=this._linesData[t]).getPeriod(),e.period=i,e.value=i&&e.getValue(i))}},i.prototype.draw=function(){if(this.visible){var t=this._barDrawParams(),e=t.renderer,i=t.projection;if(0!==t.dates.length){var o,r,n,a,l,s,c,h,u,f,d,p=this._settings,y=p.general.width,m=p.lines;for(var _ in this._labelLines=[],e.beginPath(),m){m.hasOwnProperty(_)&&(o=m[_],n=(r=this._linesData[_]).period,a=r.value,l=r.getValue,o.enabled&&n&&null!=a&&a!==1/0&&a!==-1/0&&(s=n.startIndex,c=n.endIndex,h=i.xByRecord(s),u=i.xByRecord(c),f=i.yByValue(a),this._drawLine(f,h,u,o.strokeTheme),o.devEnabled&&this._drawDevLine(n,l,o.strokeTheme),o.labelEnabled&&(d=this._getSizeInPixels(y),this._labelLines.push({label:o.label,value:a,y:f,color:o.strokeTheme.strokeColor,width:d}))))}this._drawLabelLines()}}},i.prototype._drawDevLine=function(t,e,i){for(var o,r=this.renderer,n=this.projection,a=t.startIndex,l=t.endIndex,s=l;a<=s;){var c=e({startIndex:a,endIndex:s}),h=n.xByRecord(s),u=n.yByValue(c);s===l?r.moveTo(h,u):(u!==o&&r.lineTo(h,o),r.lineTo(h,u)),o=u,--s}r.stroke(__assign({},i,{strokeColor:"red"})),r.closePath(),r.beginPath()},i.prototype._drawPrevLabelLine=function(t){var e=t.renderer,i=t.endX,o=t.width,r=t.y,n=t.lineEndX,a=t.strokeTheme;if(this._settings.general.style===f.Line)d.prototype._drawPrevLabelLine.call(this,{renderer:e,endX:i,width:o,y:r,lineEndX:n,strokeTheme:a});else{var l=this.chart.dateScale.columnWidth;if(l<3)return;for(var s=i-o,c=this.chart.dataManager.getDataSeries(u.DataSeriesSuffix.DATE).leftNearestVisibleValueIndex(this.chart.dateScale.projection.columnByX(s)),h=s=this.chart.dateScale.projection.xByColumn(c,!1);h<=n;h+=l)e.rect(h+4,r-6,l-8,12);e.stroke(__assign({},a,{lineStyle:u.LineStyle.SOLID})),e.closePath(),e.beginPath()}},i.prototype.getLabelTheme=function(){return this._settings.font},i);function i(t){var o=d.call(this,t)||this;return o._settings={general:{style:f.Line,width:{value:200,unit:u.IndicatorSizeUnit.Pixel},margin:{value:10,unit:u.IndicatorSizeUnit.Pixel}},font:{fontFamily:"Open Sans",fontSize:10,fillColor:"#fff",fontWeight:"400"},workingTimes:{rth:[],eth:[]},lines:{rthHigh:{enabled:!0,strokeTheme:{width:1,strokeColor:"green",lineStyle:u.LineStyle.SOLID},devEnabled:!1,labelEnabled:!0,label:"RTH High"},rthLow:{enabled:!0,strokeTheme:{width:1,strokeColor:"green",lineStyle:u.LineStyle.SOLID},devEnabled:!1,labelEnabled:!0,label:"RTH Low"},ethHigh:{enabled:!0,strokeTheme:{width:1,strokeColor:"green",lineStyle:u.LineStyle.SOLID},devEnabled:!1,labelEnabled:!0,label:"ETH High"},ethLow:{enabled:!0,strokeTheme:{width:1,strokeColor:"green",lineStyle:u.LineStyle.SOLID},devEnabled:!1,labelEnabled:!0,label:"ETH Low"},ibHigh:{enabled:!0,strokeTheme:{width:1,strokeColor:"green",lineStyle:u.LineStyle.SOLID},devEnabled:!1,labelEnabled:!0,label:"IB High"},ibLow:{enabled:!0,strokeTheme:{width:1,strokeColor:"green",lineStyle:u.LineStyle.SOLID},devEnabled:!1,labelEnabled:!0,label:"IB Low"},prevRthHigh:{enabled:!0,strokeTheme:{width:1,strokeColor:"green",lineStyle:u.LineStyle.SOLID},devEnabled:!0,labelEnabled:!0,label:"Prev RTH High"},prevRthLow:{enabled:!0,strokeTheme:{width:1,strokeColor:"green",lineStyle:u.LineStyle.SOLID},devEnabled:!1,labelEnabled:!0,label:"Prev RTH Low"},rthMid:{enabled:!0,strokeTheme:{width:1,strokeColor:"green",lineStyle:u.LineStyle.SOLID},devEnabled:!1,labelEnabled:!0,label:"RTH Mid"},ethMid:{enabled:!0,strokeTheme:{width:1,strokeColor:"green",lineStyle:u.LineStyle.SOLID},devEnabled:!1,labelEnabled:!0,label:"ETH Mid"},rthSettle:{enabled:!0,strokeTheme:{width:1,strokeColor:"green",lineStyle:u.LineStyle.SOLID},devEnabled:!1,labelEnabled:!0,label:"RTH Settle"},rthOpen:{enabled:!0,strokeTheme:{width:1,strokeColor:"green",lineStyle:u.LineStyle.SOLID},devEnabled:!1,labelEnabled:!0,label:"RTH Open"},prevWkHigh:{enabled:!0,strokeTheme:{width:1,strokeColor:"green",lineStyle:u.LineStyle.SOLID},devEnabled:!1,labelEnabled:!0,label:"Prev WK High"},prevWkLow:{enabled:!0,strokeTheme:{width:1,strokeColor:"green",lineStyle:u.LineStyle.SOLID},devEnabled:!1,labelEnabled:!0,label:"Prev WK Low"}}},o._getHigh=function(t){var e=-1/0;if(null==o._highs||0==o._highs.length)return e;for(var i=t.startIndex;i<=t.endIndex;i++)e=Math.max(e,o._highs[i]);return e},o._getLow=function(t){for(var e=1/0,i=t.startIndex;i<=t.endIndex;i++)e=Math.min(e,o._lows[i]);return e},o._getMid=function(t){return(o._getHigh(t)+o._getLow(t))/2},o._linesData={rthHigh:{getPeriod:function(){return o._rth.getPeriod()},getValue:o._getHigh},rthLow:{getPeriod:function(){return o._rth.getPeriod()},getValue:o._getLow},ethHigh:{getPeriod:function(){return o._eth.getPeriod()},getValue:o._getHigh},ethLow:{getPeriod:function(){return o._eth.getPeriod()},getValue:o._getLow},ibHigh:{getPeriod:function(){},getValue:function(t){}},ibLow:{getPeriod:function(){},getValue:function(t){}},prevRthHigh:{getPeriod:function(){return o._rth.getPeriod(1)},getValue:o._getHigh},prevRthLow:{getPeriod:function(){return o._rth.getPeriod(1)},getValue:o._getLow},rthMid:{getPeriod:function(){return o._rth.getPeriod()},getValue:o._getMid},ethMid:{getPeriod:function(){return o._eth.getPeriod()},getValue:o._getMid},rthSettle:{getPeriod:function(){return o._rth.getPeriod(1)},getValue:function(t){return o._closes[t.endIndex]}},rthOpen:{getPeriod:function(){return o._rth.getPeriod()},getValue:function(t){return o._opens[t.startIndex]}},prevWkHigh:{getPeriod:function(){return u.Session.getPeriod(o._dates,u.SessionPeriodUnit.Week,1)},getValue:o._getHigh},prevWkLow:{getPeriod:function(){return u.Session.getPeriod(o._dates,u.SessionPeriodUnit.Week,1)},getValue:o._getLow}},o._plotThemeKey="sessionStats",o}u.SessionStatsPlot=e}(StockChartX=StockChartX||{}),function(o){"use strict";var S,t,e;(o.TableStyle||(o.TableStyle={})).BAR_STATS="barStatus",(t=S=S||{}).LEFT="left",t.CENTER="center",t.RIGHT="right",(e=o.TableType||(o.TableType={})).TITLE="title",e.BARS="bars";var i=(r.prototype.draw=function(t){var e=t.params,i=t.valueMap,o=t.columnWidth,r=t.width,n=t.height;this.height=this.titles.length*this.settings.rowHeight,this._drawBars({params:e,valueMap:i,titles:this.titles,columnWidth:o,height:n}),this._drawTitle({titles:this.titles,valueMap:i,params:e,width:r,columnWidth:o,height:n})},r.prototype._drawTitle=function(t){var e=t.titles,i=t.params,o=t.valueMap,r=t.columnWidth,n=t.width,a=(t.height,i.projection),l=i.renderer;this._drawColumn({values:e,valueMap:o,widthBar:r,width:n,projection:a,renderer:l})},r.prototype._drawBars=function(t){var e=t.params,i=t.valueMap,o=t.titles,r=t.columnWidth,n=(t.height,o.length);if(n){var a=e.projection,l=e.renderer,s=0<e.startIndex?e.startIndex-1:0,c=this.settings.font;l.textTheme({fontFamily:c.fontFamily,fontSize:c.fontSize,fontStyle:c.fontStyle,fillColor:c.fontColor});for(var h=this.offsetY,u=0;u<n;u++){var f=i[o[u]].values,d=f.length,p=e.endIndex<d?e.endIndex+1:d;this._drawRow({values:f,widthBar:r,title:this.titles[u],valueMap:i,y:h,startIndex:s,endIndex:p,projection:a,renderer:l}),h+=this.settings.rowHeight+this.settings.rowMargin}}},r.prototype._drawRow=function(t){for(var e=t.values,i=t.widthBar,o=(t.index,t.y),r=t.title,n=t.valueMap,a=t.startIndex,l=t.endIndex,s=t.projection,c=t.renderer,h=a;h<l;h++){var u=s.xByRecord(h);this._drawCell({value:e[h],title:r,x:u,y:o,valueMap:n,widthBar:i,renderer:c})}},r.prototype._drawColumn=function(t){var e=t.values,i=t.widthBar,o=t.valueMap,r=t.projection,n=t.width,a=t.renderer,l=t.record,i=Math.max(i,50),s="left"===this.settings.header.position?0:n-i+1;l&&(s=r.xByRecord(l));for(var c=this.settings.rowHeight,h=this.settings.rowMargin,u=this.offsetY,f=0;f<e.length;f++)this._drawCell({value:e[f],x:s,y:u,valueMap:o,widthBar:i,renderer:a,isHeader:!0}),u+=c+h},r.prototype._drawCell=function(t){var e=t.value,i=t.x,o=t.y,r=t.widthBar,n=t.renderer,a=t.valueMap,l=t.title,s=t.isHeader,c=void 0!==s&&s;n.beginPath(),10<r&&(r-=this.settings.xPadding/2,i-=this.settings.xPadding/2);var h,u,f=this.settings.rowHeight;c?(h=this.settings.header.backColor,e=a[e].label):((u=this.rowsSettings[l]).positive&&0<e?h=u.positive:u.negative?h=u.negative:u.background&&(h=u.background),h=null!=e&&""!=e?v(h,0<e?e/a[l].max:e/a[l].min):"transparent"),n.rect(i,o,r,f),n.fill({fillColor:h});var d=null==e?"":e.toString();if(!(r<22||this.settings.rowHeight<this.settings.font.fontSize)){var p=this.settings.marginText,y=this.settings.font,m=r-2*p,_=o+f/2+y.fontSize/2,C=0,b=c?this.settings.header.textAlign:this.settings.font.textAlign,g=c?this.settings.header.textColor:y.fontColor;switch(n.textOptions({align:b}),b){case S.RIGHT:C=i+r-p;break;case S.CENTER:C=i+r/2;break;case S.LEFT:C=i+p}n.fillText(d,C,_,{fontFamily:y.fontFamily,textAlign:b,fontSize:y.fontSize,fontStyle:y.fontStyle,fillColor:g,maxWidth:m,textBaseline:"alphabetic"})}},r);function r(){this.height=90,this.titles=[],this.offsetY=0,this.settings={},this.rowsSettings={}}o.Table=i;var n,a,v=(n=function(t,e){if(t&&t.startsWith("#"))return o.ColorUtil.hexToRgba(t,e);if(t&&t.startsWith("rgb")){var i=t.match(/\d+/g);return"rgba("+i[0]+","+i[1]+","+i[2]+","+e+")"}},a={},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t.join("|");if(i in a)return a[i];var o=n.apply(void 0,t);return a[i]=o})}(StockChartX=StockChartX||{});var tableMargin=30,labelMargin=8;!function(f){"use strict";var t=(Object.defineProperty(e.prototype,"titles",{set:function(e){this._titles=e,this._extraTables.forEach(function(t){return t.titles=e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowsSettings",{set:function(t){var e=this;this._rowsSettings=jQuery.extend({},this._rowsSettings,t),this._extraTables.forEach(function(t){return t.rowsSettings=e._rowsSettings})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"settings",{get:function(){return this._settings},set:function(t){var e=this;this._settings=jQuery.extend({},this._settings,t),this._extraTables.forEach(function(t){return t.settings=e._settings})},enumerable:!0,configurable:!0}),e.prototype.addNewTables=function(t){void 0===t&&(t=1);for(var e=0;e<t;e++){var i=new f.Table;i.titles=this._titles,i.settings=this._settings,i.rowsSettings=this._rowsSettings,this._extraTables.push(i)}},e.prototype.deleteTable=function(t){void 0===t&&(t=1);for(var e=0;e<t;e++)this._extraTables.shift()},e.prototype.draw=function(t){var o=this,r=t.params,n=t.columnWidth,a=t.height,l=t.valueMaps,s=t.width,c=0,h=r.renderer,u=0;this._extraTables.length&&(u=tableMargin),this._extraTables.forEach(function(t,e){var i=o.extraTableSettings[e].name;1<o._extraTables.length&&h.fillText(null!=i?i:"",labelMargin,c+u/2,{fontSize:11,fillColor:"#fff",textBaseline:"top",textAlign:f.TextAlign.LEFT}),t.offsetY=c+u,t.draw({params:r,valueMap:l[e],columnWidth:n,height:a,width:s}),c+=t.height+u})},e);function e(){this.valueMap={},this._settings={},this._extraTables=[],this._rowsSettings={},this._titles=[],this.extraTableSettings=[]}f.MultiTable=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),__assign=this&&this.__assign||Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},__awaiter=this&&this.__awaiter||function(n,a,l,s){return new(l=l||Promise)(function(t,e){function i(t){try{r(s.next(t))}catch(t){e(t)}}function o(t){try{r(s.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(i,o)}r((s=s.apply(n,a||[])).next())})},__generator=this&&this.__generator||function(i,o){var r,n,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,n&&(a=n[2&e[0]?"return":e[0]?"throw":"next"])&&!(a=a.call(n,e[1])).done)return a;switch(n=0,a&&(e=[0,a.value]),e[0]){case 0:case 1:a=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,n=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(a=0<(a=l.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){l.label=e[1];break}if(6===e[0]&&l.label<a[1]){l.label=a[1],a=e;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(e);break}a[2]&&l.ops.pop(),l.trys.pop();continue}e=o.call(i,l)}catch(t){e=[6,t],n=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};!function(y){"use strict";var i=jQuery;y.ZIndexVolume=29,y.IndicatorDataSeries={OPEN:"Open",HIGH:"High",LOW:"Low",CLOSE:"Close",VOLUME:"Volume",DETAILS:"Details",MEDIAN:"Median",TYPICAL:"Typical",WEIGHTED:"Weighted"},Object.freeze(y.IndicatorDataSeries),y.IndicatorParam={SOURCE:"Source",SOURCE2:"Source2",PERIODS:"Periods",R2_SCALE:"R2 Scale",STANDARD_DEVIATIONS:"Standard Deviations",MA_PERIOD:"Moving Average Period",SMOOTH:"Smooth",MA_TYPE:"Moving Average Type",SHIFT:"Shift",BAND_PCT:"Band PCT",PCT_K_PERIODS:"%K Periods",PCT_K_SMOOTHING:"%K Smoothing",PCT_K_DOUBLE_SMOOTHING:"%K Double Smoothing",PCT_D_PERIODS:"%D Periods",PCT_D_MA_TYPE:"%D Moving Average Type",RATE_OF_CHANGE:"Rate of Change",SHORT_CYCLE:"Short Cycle",LONG_CYCLE:"Long Cycle",SIGNAL_PERIODS:"Signal Periods",LINE_WIDTH:"Line Width",LINE_STYLE:"Line Style",LINE_COLOR:"Line Color",LINE_ENABLED:"Line Enabled",LINE2_WIDTH:"Line 2 Width",LINE2_STYLE:"Line 2 Style",LINE2_COLOR:"Line 2 Color",LINE2_ENABLED:"Line 2 Enabled",LINE3_WIDTH:"Line 3 Width",LINE3_STYLE:"Line 3 Style",LINE3_ENABLED:"Line 3 Enabled",LINE3_COLOR:"Line 3 Color",LINE4_WIDTH:"Line 4 Width",LINE4_STYLE:"Line 4 Style",LINE4_COLOR:"Line 4 Color",LINE4_ENABLED:"Line 5 Enabled",LINE5_WIDTH:"Line 5 Width",LINE5_STYLE:"Line 5 Style",LINE5_COLOR:"Line 5 Color",LINE5_ENABLED:"Line 6 Enabled",LABEL_COLOR:"Label Color",LABEL_ENABLED:"Label Enabled",LABEL2_COLOR:"Label 2 Color",LABEL2_ENABLED:"Label 2 Enabled",LABEL3_COLOR:"Label 3 Color",LABEL3_ENABLED:"Label 3 Enabled",LABEL4_COLOR:"Label 4 Color",LABEL4_ENABLED:"Label 4 Enabled",FILL_ABOVE:"Fill Above",FILL_BELOW:"Fill Below",FILL_ENABLED:"Fill Enabled",FAST:"Fast",SLOW:"Slow",VOLUME_DIVISOR:"Volume Divisor",OFFSET_MULTIPLIER:"Offset Multiplier",ENVELOPE_PERCENTAGE:"Envelope Percentage",BAR_COUNT:"Bar Count",Q_PERIODS:"%Q Periods",T_COUNT:"Count",V_FACTOR:"Factor",FORECAST:"Forecast",INTERMEDIATE:"Intermediate",VOLATILITY_PERIOD:"Volatility Period",BARS_REQUIRED_TO_PLOT:"Bars Required To Plot",EMA1:"ema1",EMA2:"ema2",CONVERSION_PERIODS:"Conversion Line Periods",BASE_PERIODS:"Base Line Periods",LOGIN_SPAN2_PERIODS:"Logging Span2 Periods",DISPLACEMENT:"Displacement",LIMIT_VALUE:"Limit Value"},Object.freeze(y.IndicatorParam),y.IchimokuDataSeriesNames={Tenka:"Tenkan Sen",Kijun:"Kijun Sen",Chikou:"Chikou Span",SenkouA:"Senkou Span A",SenkouB:"Senkou Span B"},Object.freeze(y.IchimokuDataSeriesNames);var l="scxPanelTitleCaption",s="scxPanelTitleIcon",c="scxIndicatorRemoveIcon",h="scxPanelTitleValue",e="scxIndicatorCollapseHide",o="scxIndicatorCollapseShow",u="scxIndicatorTitle";y.AutoScaleMultiplierValue=5;var t=(Object.defineProperty(r,"registeredIndicators",{get:function(){return this._indicators.registeredItems},enumerable:!0,configurable:!0}),r.register=function(t){this._indicators.register(t.className,t)},r.deserialize=function(t){if(!t)return null;var e="string"==typeof t?JSON.parse(t):t,i=this._indicators.createInstance(e.className);return i.loadState(t),i},r._indicators=new y.ClassRegistrar,r);function r(){}var n,a=(n=y.IndicatorBase,__extends(f,n),Object.defineProperty(f,"className",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"chart",{get:function(){return this._chart},set:function(t){if(t&&!(t instanceof y.Chart))throw new TypeError("Chart must be an instance of StockChartX.Chart.");this._removeControls(),(this._chart=t)&&this._options.valueScaleIndex&&(this.valueScale=this._chart.valueScales[this._options.valueScaleIndex]),this._onChartChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"chartPanel",{get:function(){return this._panel},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"valueScale",{get:function(){return this._valueScale},set:function(t){if(t&&!(t instanceof y.ValueScale))throw new TypeError("Value scale must be an instance of StockChartX.ValueScale.");this._valueScale=t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"isOverlay",{get:function(){return this._isOverlay},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"panelHeightRatio",{get:function(){return this._options.panelHeightRatio},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"className",{get:function(){return this.constructor.className},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"showValueMarkers",{get:function(){return this._options.showValueMarkers},set:function(t){t=!!t,this._options.showValueMarkers!==t&&(this._options.showValueMarkers=t,this.updateTitleControlsVisibility())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"coloredVolumeTheme",{get:function(){return this._options.coloredVolumeTheme},set:function(t){this._options.coloredVolumeTheme=t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"showValuesInTitle",{get:function(){return this._options.showValuesInTitle},set:function(t){t=!!t,this._options.showValuesInTitle!==t&&(this._options.showValuesInTitle=t,this.updateTitleControlsVisibility())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"allowContextMenu",{get:function(){return this._options.allowContextMenu},set:function(t){t=!!t,this._options.allowContextMenu!==t&&(this._options.allowContextMenu=t,this.updateTitleControlsVisibility())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"showParamsInTitle",{get:function(){return this._options.showParamsInTitle},set:function(t){t=!!t,this._options.showParamsInTitle!==t&&(this._options.showParamsInTitle=t,this.updateTitleControlsVisibility())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"showTitle",{get:function(){return this._options.showTitle},set:function(t){this._options.showTitle!==t&&(this._options.showTitle=t,this.updateTitleControlsVisibility())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"showLineLevels",{get:function(){return this._options.showLineLevels},set:function(t){this._options.showLineLevels=t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"allowSettingsDialog",{get:function(){return this._options.allowSettingsDialog},set:function(t){t=!!t,this._options.allowSettingsDialog!==t&&(this._options.allowSettingsDialog=t)},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"parameters",{get:function(){return this._options.parameters},set:function(t){this._options.parameters=t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"fieldNames",{get:function(){return this._dataSeriesNames},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"plots",{get:function(){for(var t=[],e=0,i=this._plotItems;e<i.length;e++){var o=i[e];t.push(o.plot)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"linePlots",{get:function(){for(var t=[],e=0,i=this._plots;e<i.length;e++){var o=i[e];"label"!==o.plotThemeKey&&t.push(o)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"labelPlots",{get:function(){for(var t=[],e=0,i=this._plots;e<i.length;e++){var o=i[e];"label"===o.plotThemeKey&&t.push(o)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"visible",{get:function(){return this._options.visible},set:function(t){t=!!t,this._options.visible=t;for(var e=0,i=this._plotItems.length;e<i;e++){var o=this._plotItems[e].plot;o&&(o.visible=t)}},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"zIndex",{get:function(){return this._options.zIndex},set:function(t){this._options.zIndex=t;for(var e=0,i=this.plots;e<i.length;e++){i[e].zIndex=this._options.zIndex}},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"canMergeUp",{get:function(){return 0<this._panel.getIndex()},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"canMergeDown",{get:function(){return this._panel.getIndex()<this.chart.chartPanels.length-1},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"canUnmergeUp",{get:function(){return 1<this._panel.indicators.length&&this._panel!==this.chart.mainPanel},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"canUnmergeDown",{get:function(){return 1<this._panel.indicators.length||this._panel===this.chart.mainPanel},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"isInitialized",{get:function(){return 0<this._plotItems.length},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"values",{get:function(){return this.updateIndicator(),this._values},set:function(t){this._values=t},enumerable:!0,configurable:!0}),f.prototype.getPlotName=function(t){return""},f.prototype.getPlots=function(){return this._plotItems.map(function(t){return t.plot})},f.prototype.serialize=function(){var t=this._panel;t&&(this._options.panelHeightRatio=t.heightRatio),this.valueScale?this._options.valueScaleIndex=this.valueScale.index:delete this._options.valueScaleIndex;var e=i.extend(!0,{},this._options);return t&&(e.panelIndex=t.getIndex()),e.className=this.className,e._prevParams=this._options.parameters,e.zIndex=this.zIndex,this.removeLineLevels(),e},f.prototype._initPanel=function(){var t,e=this.className;e===y.VOL.className||e===y.VolumeUpDown.className||e===y.ADL.className||e===y.VOLMA.className||e===y.VolumeOscillator.className||e===y.OBV.className||e===y.VROC.className||e===y.ChaikinOscillator.className?(t=new y.IntlNumberFormat,e===y.VROC.className?t.setDecimalDigits(2):t.setDecimalDigits(0),this._panel&&(this._panel.valueScale.formatter=t,this._panel.valueScale.calibrator.formater=t,this._panel.valueScale.calibrator.divider=1e6,this._panel.valueScale.calibrator.suffix="M")):this._panel&&(this._panel.valueScale.calibrator.divider=null,this._panel.valueScale.calibrator.suffix=null)},f.prototype._updatePlotItem=function(t){return!1},f.prototype._needsCustomScale=function(){return this.className===y.VOL.className||this.className===y.VolumeUpDown.className},f.prototype.clearDataSeries=function(t){},f.prototype.update=function(t){if(void 0===t&&(t=!1),this._resetValues(),this.setDefaultSettings(),this.chart){this.setupIndicator();for(var e=this.chart.recordCount,i=0,o=this._values.dataSeriesArray;i<o.length;i++){var r=o[i];r.initialize(e+1,r.name)}for(var n=0;n<=e+1;n++)this.updateIndicator();if(this._panel||this._addPanel(),1!==this._panel.state||this._panel.visible){this._initPanelTitle(t);for(var a=0,l=this._plotItems;a<l.length;a++){var s=l[a];this._panel.removePlot(s.plot)}if(0!==this._plotItems.length){for(n=0;n<this._plotItems.length;n++){var c,h,u=this._plotItems[n];this._updatePlotItem(n)||(c=this._values.get(n).toDataSeries(0),c=this._ichimokuSeries(c),c=this._dataSeriesPeriod(c),u.plot=this._plots[n],u.plot.dataSeries=c,u.dataSeries=c,u.plot.showValueMarkers=this.showValueMarkers,h=void 0,h=u.plot.plotStyle===y.HistogramPlot.Style.COLUMN?this._getHistogramTheme(n):this._getTheme(u.plot,n),u.plot.theme=h,u.color=this._getColor(u.plot)),u.plot.visible=this._getVisible(u.plot),u.plot.valueScale=this._valueScale,this.zIndex&&(u.plot.zIndex=this.zIndex)}this._needsCustomScale&&this._setAutoScaleMultiplier(this.valueScale);for(var f=0,d=this._plotItems;f<d.length;f++){var s=d[f],p=this._getColor(s.plot);this._addPanelPlot(s.plot,p),s.plot.update()}this._fillPlot&&this._drawFillPlot(),this.updateHoverRecord(),this._updatePanelTitle(),this.removeLineLevels(),this.showLineLevels&&this._panel.addDrawings(this._lineLevels)}}}},f.prototype._ichimokuSeries=function(t){var e=t;return this.className===y.Ichimoku.className&&(t.name===y.IchimokuDataSeriesNames.Chikou&&(e=this.shiftInToThePast(t,this.displacement)),t.name!==y.IchimokuDataSeriesNames.SenkouA&&t.name!==y.IchimokuDataSeriesNames.SenkouB||(e=this.shiftInToTheFuture(t,this.displacement))),e},f.prototype._getTheme=function(t,e){return"label"===t.plotThemeKey?this._getLabelTheme(e):this._lineTheme(e)},f.prototype._getColor=function(t){var e=t.theme;return e.strokeColor?e.strokeColor:e.fill.fillColor},f.prototype._getVisible=function(t){return this.visible},f.prototype._resetValues=function(){this.currentBar=0},f.prototype.setDefaultSettings=function(){if(this._isInitialized=!1,this._needsDefaults&&(this.values=new y.DataSeriesCollection,this.setDefaults(),this._needsDefaults=!1),this._prevParams)for(var t in this._prevParams)this._prevParams.hasOwnProperty(t)&&this.setParameterValue(t,this._prevParams[t]);this.multiBars=new y.MultiBars(this),this.multiBars=this.multiBars,this._prevParams={}},f.prototype.addPlot=function(t,e,i,o,r){var n=this;if(this.chart){var a,l=new y.TADataSeries(e,this),s=this._plots.length,c=this._addLineParameters(this._plots.length,t,o,r),h=i?(a=this._getHistogramTheme(s),new y.HistogramPlot({dataSeries:l,plotStyle:i,theme:a,columnWidthRatio:o})):(a=this._lineTheme(s),this.linePlot(a,l));return this._plots.push(h),this.values.add(l),function(){c(),n._removePlot(h),n.values.remove(e)}}},f.prototype.addBarPlot=function(){var t=this;if(this.chart){var e=new y.BarPlot({indicator:this});return this._plots.push(e),function(){t._removePlot(e)}}},f.prototype.addLabelPlot=function(t,e){var i=this;if(this.chart){var o=this._addLineParameters(this._plots.length,null,null,null),r=new y.TADataSeries(t,this),n=new y.LabelPlot(__assign({dataSeries:r},e));return this._plots.push(n),this.values.add(r),function(){o(),i._removePlot(n),i.values.remove(t)}}},f.prototype.addFillPlot=function(t,e,i,o){var r,n,a;this.chart&&(r=void 0,n=new y.TADataSeries(t,this),a=new y.TADataSeries(e,this),this._addFillParameters(i,o),r=this._fillTheme(),this._fillPlot=this.fillPlot(r,n,a))},f.prototype.addLine=function(t,e){var i=new y.HorizontalLineDrawing({point:{record:0,value:e},theme:{line:{strokeColor:t,width:1}},locked:!0});i.selectable=!1,i.removable=!1,this._lineLevels.push(i)},f.prototype._removePlot=function(e){this._panel.removePlot(e),this._plots=this._plots.filter(function(t){return t!==e}),this._plotItems=this._plotItems.filter(function(t){return t.plot!==e})},f.prototype._fillTheme=function(){return{belowCross:{fillColor:this.getParameterValue(y.IndicatorParam.FILL_BELOW)},aboveCross:{fillColor:this.getParameterValue(y.IndicatorParam.FILL_ABOVE)}}},f.prototype._getHistogramTheme=function(t){var e,i,o,r;switch(t){case 0:e=y.IndicatorParam.LINE_COLOR,i=y.IndicatorParam.LINE_ENABLED,o=this.getParameterValue(e)||this.chart.theme.plot.indicator.line1.strokeColor,r=null==this.getParameterValue(i)||this.getParameterValue(i);break;case 1:e=y.IndicatorParam.LINE2_COLOR,i=y.IndicatorParam.LINE2_ENABLED,o=this.getParameterValue(e)||this.chart.theme.plot.indicator.line3.strokeColor,r=null==this.getParameterValue(i)||this.getParameterValue(i);break;case 2:e=y.IndicatorParam.LINE3_COLOR,i=y.IndicatorParam.LINE3_ENABLED,o=this.getParameterValue(e)||this.chart.theme.plot.indicator.line2.strokeColor,r=null==this.getParameterValue(i)||this.getParameterValue(i);break;default:return null}return{line:{strokeEnabled:!1},fill:{fillEnabled:r,fillColor:this.chart.theme.chart.background.some(y.HtmlUtil.isDarkColor)||"white"!==o?o:"grey"}}},f.prototype._getLabelTheme=function(t){var e,i,o,r;switch(t){case 0:e=y.IndicatorParam.LABEL_COLOR,i=y.IndicatorParam.LABEL_ENABLED,o=this.getParameterValue(e)||this.chart.theme.plot.indicator.line1.strokeColor,r=null==this.getParameterValue(i)||this.getParameterValue(i);break;case 1:e=y.IndicatorParam.LABEL2_COLOR,i=y.IndicatorParam.LABEL2_ENABLED,o=this.getParameterValue(e)||this.chart.theme.plot.indicator.line2.strokeColor,r=null==this.getParameterValue(i)||this.getParameterValue(i);break;case 2:e=y.IndicatorParam.LABEL3_COLOR,i=y.IndicatorParam.LABEL3_ENABLED,o=this.getParameterValue(e)||this.chart.theme.plot.indicator.line3.strokeColor,r=null==this.getParameterValue(i)||this.getParameterValue(i);break;case 3:e=y.IndicatorParam.LABEL4_COLOR,i=y.IndicatorParam.LABEL4_ENABLED,o=this.getParameterValue(e)||this.chart.theme.plot.indicator.line4.strokeColor,r=null==this.getParameterValue(i)||this.getParameterValue(i);break;default:return null}return{fill:{fillEnabled:r,fillColor:o}}},f.prototype._addPanel=function(){if(!this._panel)if(this._isOverlay)this._panel=this._chart.mainPanel;else{try{this._panel=this._chart.addChartPanel(this._chart.chartPanels.length,this.panelHeightRatio,!0)}catch(t){return this._chart.removeIndicators(this),void this._chart.setNeedsUpdate()}this._initPanel(),this._chart.layout(),this._panel.setNeedsAutoScale()}},f.prototype.linePlot=function(t,e){return new y.LinePlot({dataSeries:e,theme:t})},f.prototype.fillPlot=function(t,e,i){return new y.FillPlot({dataSeries:[e,i],theme:t})},f.prototype.draw=function(){},f.prototype._drawFillPlot=function(){var t=this.values.get(y.IchimokuDataSeriesNames.SenkouA),e=this.values.get(y.IchimokuDataSeriesNames.SenkouB),i=t.toDataSeries(0),o=e.toDataSeries(0),i=this._ichimokuSeries(i),o=this._ichimokuSeries(o);this._fillPlot.dataSeries=[i,o],this._fillPlot.theme=this._fillTheme(),this.visible?this._fillPlot.visible=this.getParameterValue(y.IndicatorParam.FILL_ENABLED):this._fillPlot.visible=!1,this._panel.addPlot(this._fillPlot)},f.prototype._removeControls=function(){this._titleControls&&(this._unSubscribeEvents(),this._titleControls.rootDiv.remove(),this._titleControls=null)},f.prototype._onChartChanged=function(){},f.prototype.destroy=function(){var t=this.chart,e=this._panel;e&&e!==t.mainPanel&&0<e.indicators.length&&e.indicators[0]._initPanel(),this._titleContextMenu&&this._titleContextMenu.destroy(),this._parametersContextMenu&&this._parametersContextMenu.destroy(),this._fillPlot&&e.removePlot(this._fillPlot),this._removeControls(),this.chart=null,this._panel=null},f.prototype.getInfoAbout=function(){return""},f.prototype.showInfoDialog=function(){var e=this;y.UI.ViewLoader.indicatorInfoDialog(function(t){t.show({chart:e.chart,indicator:e})})},f.prototype.showSettingsDialog=function(){var e=this;y.UI.ViewLoader.indicatorSettingsDialog(function(t){t.show({chart:e.chart,indicator:e,done:function(){e.update(),e._panel.setNeedsUpdate(!0)}})})},f.prototype.updateHoverRecord=function(t){if(this.showValuesInTitle){null==t&&(t=this._chart.hoveredRecord);for(var e=0,i=this._plotItems;e<i.length;e++){var o,r,n=i[e],a=n.dataSeries?n.dataSeries.length:0;a<=0||((null==t||t<0||a<=t)&&(t=a-1),o=n.dataSeries.valueAtIndex(t),r=isNaN(o)||null===o?"n/a":this._panel.formatValue(o),n.titleValueSpan.text(r))}}},f.prototype._addPanelPlot=function(t,e){this._panel.addPlot(t),this._initPanelTitle();for(var i=0,o=this._plotItems;i<o.length;i++){var r=o[i];if(!r.plot)return r.plot=t,r.dataSeries=t.dataSeries[0],r.color=e,this._updatePanelTitle(),r}},f.prototype._initPanelTitle=function(o){var r=this;if(void 0===o&&(o=!1),this._panel.visible&&(!this._titleControls||o)){var t=this._titleControls={},e={menuContainer:null,showOnClick:!0,indicator:this,onItemSelected:function(t,e){var i=t.data("id");switch(i){case y.UI.IndicatorContextMenu.MenuItem.ABOUT:r.showInfoDialog();break;case y.UI.IndicatorContextMenu.MenuItem.SETTINGS:r.showSettingsDialog();break;case y.UI.IndicatorContextMenu.MenuItem.SHOW_PARAMS:r.showParamsInTitle=e,r._panel.setNeedsUpdate();break;case y.UI.IndicatorContextMenu.MenuItem.SHOW_MARKERS:r.showValueMarkers=e,r._panel.setNeedsUpdate();break;case y.UI.IndicatorContextMenu.MenuItem.SHOW_VALUES:r.showValuesInTitle=e,r._panel.setNeedsUpdate();break;case y.UI.IndicatorContextMenu.MenuItem.VISIBLE:r.visible=e,r.updateTitleControlsVisibility(),r._panel.setNeedsUpdate();break;case y.UI.IndicatorContextMenu.MenuItem.LINE_LEVELS:r.showLineLevels=e,r.update(o),r._panel.setNeedsUpdate(!0);break;case y.UI.IndicatorContextMenu.MenuItem.MERGE_UP:r._merge(!0);break;case y.UI.IndicatorContextMenu.MenuItem.MERGE_DOWN:r._merge(!1);break;case y.UI.IndicatorContextMenu.MenuItem.UNMERGE_UP:r._unmerge(!0);break;case y.UI.IndicatorContextMenu.MenuItem.UNMERGE_DOWN:r._unmerge(!1);break;case y.UI.IndicatorContextMenu.MenuItem.DELETE:r._remove();break;case void 0:break;default:throw new Error("Unknown menu item '"+i+"'")}}},i=t.rootDiv=this._panel.titleDiv.scxAppend("div",u);o&&this._panel.titleDiv.children(".scxIndicatorTitle").html(""),t.name=i.scxAppend("div",l).text(this.name),this.allowContextMenu&&(this._titleContextMenu=t.name.scx().indicatorContextMenu(e),t.parameters=i.scxAppend("div",l),this._parametersContextMenu=t.parameters.scx().indicatorContextMenu(e)),this._removeTitle=i.scxAppend("span",[s,c]).on("click",function(){r._remove()});for(var n=0,a=this._plots.length;n<a;n++)this._plotItems.push({titlePlotSpan:i.scxAppend("span",h),titleValueSpan:i.scxAppend("span",h)});this.updateTitleControlsVisibility(),this._subscribeEvents()}},f.prototype._merge=function(t){var e,i,o,r=this.chart,n=this._panel.getIndex(),a=t?n-1:n+1;this._panel.removePlot(this._fillPlot),a<0||a>=r.chartPanels.length||(t&&this._needsCustomScale()&&1===n&&(this.valueScale=r.addValueScale(),this.valueScale.rightPanelVisible=!1),e=this.serialize(),i=r.chartPanels[a],e.panelIndex=a,o=r.addIndicators(e),i!==r.mainPanel&&i.indicators[0]===o&&o._initPanel(),t&&this._needsCustomScale()&&1===n&&(o.zIndex=y.ZIndexVolume),r.removeIndicators(this),r.setNeedsUpdate(!0))},f.prototype._setAutoScaleMultiplier=function(t){t&&(this._panel.getValueScale(t).autoScaleMultiplier=y.AutoScaleMultiplierValue)},f.prototype.removeLineLevels=function(){this._panel.forceRemoveDrawings(this._lineLevels)},f.prototype._unmerge=function(t){this._panel.removePlot(this._fillPlot);var e=t?this._panel.getIndex():this._panel.getIndex()+1;try{var i=this.chart.addChartPanel(e);i.layout(i.frame),this.chart.removeValueScale(this.valueScale),this._merge(t)}catch(t){y.Localization.localizeText(this.chart,"indicator.all.notification.noMoreSpace").then(function(t){y.UI.Notification.warning(t)})}},f.prototype._updatePanelTitle=function(){return __awaiter(this,void 0,void 0,function(){var e,i,o,r;return __generator(this,function(t){switch(t.label){case 0:return this._setTitle(this.name,this._titleControls.name),[4,this._localizedParameters(this._titleParameters())];case 1:for(e=t.sent(),this._titleControls.parameters&&this._titleControls.parameters.text("()"===e?"":e),this._setlocalizedAtribute(this._removeTitle,"indicator.all.removeIndicator"),i=function(t){var e=o._plotItems[t],i=e.dataSeries.name;e.titlePlotSpan.css("color",e.color),y.Localization.localizeText(o._chart,"indicator.all.panelTitle."+i,{defaultValue:i}).then(function(t){e.titlePlotSpan.text(t)}),e.titleValueSpan.css("color",e.color),y.Localization.localizeText(o._chart,"indicator.all.panelTitle."+i,{defaultValue:i}).then(function(t){e.titleValueSpan.attr("title",t)})},o=this,r=0;r<this._plotItems.length;r++)i(r);return[2]}})})},f.prototype._localizedParameters=function(e){return __awaiter(this,void 0,void 0,function(){var i=this;return __generator(this,function(t){return y.JsUtil.flattenArray(e)?[2,Promise.all(e.map(function(e){return __awaiter(i,void 0,void 0,function(){return __generator(this,function(t){return[2,y.Localization.localizeText(this._chart,"indicator.all.parameter."+e,{defaultValue:e})]})})})).then(function(t){return"("+t.join(", ")+")"})]:[2]})})},f.prototype.updateTitleControlsVisibility=function(){var t=this.showValueMarkers,e=this.showValuesInTitle?"inline-block":"none",i=this._titleControls;i&&(i.parameters&&i.parameters.css("display",this.showParamsInTitle?"inline-block":"none"),i.name.css("opacity",this.visible?"1":"0.5"),i.rootDiv.css("display",this.showTitle?"block":"none"));for(var o=0,r=this._plotItems;o<r.length;o++){var n=r[o];n.plot&&(n.plot.showValueMarkers=t),n.titlePlotSpan.css("display",this._plotItems.length<=1?"none":e),n.titleValueSpan.css("display",e)}this._fillPlot&&(this._fillPlot.visible=this.visible,this._drawFillPlot())},f.prototype._initIndicator=function(){this._options.parameters={}},f.prototype._subscribeEvents=function(){var e=this;this._chart.on(y.ChartEvent.HOVER_RECORD_CHANGED+".scxIndicator",function(t){e.updateHoverRecord(t.value)},this)},f.prototype._unSubscribeEvents=function(){this._chart&&this._chart.off(y.ChartEvent.HOVER_RECORD_CHANGED+".scxIndicator",this)},f.prototype._remove=function(){var t=this._chart;t.removeIndicators(this),t.setNeedsUpdate(!0)},f.prototype.loadState=function(t){if(!(t=t||{})||"object"!=typeof t)throw new TypeError("Config expected.");var e=this._chart=t.chart?t.chart:this.chart;if(this._options={panelHeightRatio:t.panelHeightRatio,showParamsInTitle:!0,allowContextMenu:!0,showValueMarkers:!0,showValuesInTitle:!0,allowSettingsDialog:!0,visible:!0,showTitle:!0,showLineLevels:!1},this.allowSettingsDialog=null==t.allowSettingsDialog||t.allowSettingsDialog,this.showParamsInTitle=null==t.showParamsInTitle||t.showParamsInTitle,this.showValueMarkers=null==t.showValueMarkers||t.showValueMarkers,this.showValuesInTitle=null==t.showValuesInTitle||t.showValuesInTitle,this.allowContextMenu=null==t.allowContextMenu||t.allowContextMenu,this.visible=null==t.visible||t.visible,this.coloredVolumeTheme=null!=t.coloredVolumeTheme?t.coloredVolumeTheme:null,this._options.valueScaleIndex=t.valueScaleIndex,this.showTitle=null==t.showTitle||t.showTitle,this._prevParams=t._prevParams,this.showLineLevels=null!=t.showLineLevels&&t.showLineLevels,this.zIndex=t.zIndex,e&&(null!=t.panelIndex&&(this._panel=e.chartPanelsContainer.panels[t.panelIndex]),t.valueScaleIndex&&(this.valueScale=e.valueScales[t.valueScaleIndex])),t.parameters)for(var i in t.parameters)t.parameters.hasOwnProperty(i)&&this.setParameterValue(i,t.parameters[i]);this._initPanel()},f.prototype._collapseIndicatorName=function(t){this._collapseIndicatorTitle=!t,this._collapseIndicatorIcon&&(this._collapseIndicatorTitle?this._collapseIndicatorIcon.removeClass(e).addClass(o):this._collapseIndicatorIcon.removeClass(o).addClass(e)),this._panel&&this._panel.setNeedsUpdate()},f);function f(){var t=n.call(this)||this;return t.localizedSettings={},t._isOverlay=!1,t._plotItems=[],t._usePrimaryDataSeries=!0,t._collapseIndicatorTitle=!1,t._needsDefaults=!0,t._plots=[],t._lineLevels=[],t._options={showParamsInTitle:!0,showValueMarkers:!0,showValuesInTitle:!0,allowSettingsDialog:!0,allowContextMenu:!0,visible:!0,showTitle:!0,showLineLevels:!1},t.allowSettingsDialog=!1,t.showParamsInTitle=!0,t.showValueMarkers=!0,t.showValuesInTitle=!0,t.visible=!0,t.coloredVolumeTheme=null,t.showTitle=!0,t._initIndicator(),t}y.Indicator=a,y.JsUtil.applyMixins(a,[t])}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(n){var t;(t=n.IndicatorSizeUnit||(n.IndicatorSizeUnit={})).Pixel="pixel",t.Percent="percent",n.IndicatorSettingsProxy=function(t,e){for(var i in t){var o=t[i];t.hasOwnProperty(i)&&n.JsUtil.isObject(o)&&(t[i]=n.IndicatorSettingsProxy(o,e))}return new Proxy(t,{set:function(t,e,i){return console.log(e,i),t[e]=i,!0}})};var e,i=(e=n.Indicator,__extends(o,e),Object.defineProperty(o.prototype,"settings",{get:function(){return this._settings},set:function(t){var e,i;this.chart&&(e=n.JsUtil.merge(this._settings,t),i=!!this._handleSettings(e),this._settings=e,this.chart.setNeedsUpdate(i))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"renderer",{get:function(){return this._panel&&this._panel.layer.renderer},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"projection",{get:function(){return this._panel&&this._panel.getProjection(this.valueScale)},enumerable:!0,configurable:!0}),o.prototype._onChartChanged=function(){this._handleSettings(this._settings),this._settingsHandled=!0,e.prototype._onChartChanged.call(this)},o.prototype._handleSettings=function(t){},o.prototype._getVisiblePeriod=function(){var t,e,i,o=this.chart,r=o.dataManager.getDataSeries(n.DataSeriesSuffix.DATE);return i=r?(t=o.dateScale.visibleDateRange,e=r.floorIndex(t.min),r.ceilIndex(t.max)):(e=o.firstVisibleIndex,o.lastVisibleIndex),{startIndex:Math.max(r.leftNearestVisibleValueIndex(e)-1,0),endIndex:Math.min(r.rightNearestVisibleValueIndex(i)+1,r.length-1)}},o.prototype._getBarValue=function(t,e){void 0===e&&(e=0);var i=this.details.get(e);if(!this._isValidDetails(i))return 0;for(var o=0,r=0;r<i.length;r++)o+=t(i[r]);return o},o.prototype._isValidDetails=function(t){return Array.isArray(t)&&0<t.length},o);function o(){var t=e.call(this)||this;return t._settingsHandled=!1,t}n.AdvancedIndicator=i}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"DM"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="DM",this.period=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line2.strokeColor,"ADX"),this.addPlot(this.indicatorTheme.line1.strokeColor,"+DI"),this.addPlot(this.indicatorTheme.line3.strokeColor,"-DI")},o.prototype.setConfigure=function(){this._dmPlus=new e.TADataSeries("dmPlus",this),this._dmMinus=new e.TADataSeries("dmMinus",this),this._sumDmPlus=new e.TADataSeries("sumDmPlus",this),this._sumDmMinus=new e.TADataSeries("sumDmMinus",this),this._sumTr=new e.TADataSeries("sumTr",this),this._tr=new e.TADataSeries("tr",this)},o.prototype.onBarUpdate=function(){var t,e,i,o,r,n,a,l,s,c,h=this.values.get("ADX"),u=this.values.get("+DI"),f=this.values.get("-DI"),d=this.high.get(0),p=this.low.get(0),y=d-p;0===this.currentBar?(this._tr.set(y),this._dmPlus.set(0),this._dmMinus.set(0),this._sumTr.set(0),this._sumDmPlus.set(0),this._sumDmMinus.set(this._dmMinus.get(0)),h.set(50)):(t=this.low.get(1),e=this.high.get(1),i=this.close.get(1),this._tr.set(Math.max(Math.abs(p-i),Math.max(y,Math.abs(d-i)))),this._dmPlus.set(t-p<d-e?Math.max(d-e,0):0),this._dmMinus.set(d-e<t-p?Math.max(t-p,0):0),o=this._sumDmPlus.get(1),r=this._sumDmMinus.get(1),n=this._sumTr.get(1),this.currentBar<this.period?(this._sumTr.set(n+this._tr.get(0)),this._sumDmPlus.set(o+this._dmPlus.get(0)),this._sumDmMinus.set(r+this._dmMinus.get(0))):(this._sumTr.set(n-this._sumTr.get(1)/this.period+this._tr.get(0)),this._sumDmPlus.set(o-o/this.period+this._dmPlus.get(0)),this._sumDmMinus.set(r-r/this.period+this._dmMinus.get(0))),a=100*(0===this._sumTr.get(0)?0:this._sumDmPlus.get(0)/this._sumTr.get(0)),l=100*(0===this._sumTr.get(0)?0:this._sumDmMinus.get(0)/this._sumTr.get(0)),s=Math.abs(a-l),c=a+l,h.set(0==c?50:((this.period-1)*h.get(1)+100*s/c)/this.period),u.set(a),f.set(l))},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.DM=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(a){var t,e=(t=a.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"ADL"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"period",{get:function(){return this.getParameterValue(a.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(a.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="ADL",this.period=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},i.prototype.setConfigure=function(){},i.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.high.get(0),i=this.low.get(0),o=this.close.get(0),r=this.volume.get(0),n=(0===this.currentBar?0:t.get(1))+(0!==a.JsUtil.approxCompare(e,i)?(o-i-(e-o))/(e-i)*r:0);t.set(n)},i);function i(){return null!==t&&t.apply(this,arguments)||this}a.ADL=e,a.Indicator.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"APZ"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"bandPct",{get:function(){return this.getParameterValue(e.IndicatorParam.BAND_PCT)},set:function(t){this.setParameterValue(e.IndicatorParam.BAND_PCT,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="APZ",this.period=20,this.bandPct=2,this._isOverlay=!0,this.addPlot(this.indicatorTheme.line2.strokeColor,"Upper"),this.addPlot(this.indicatorTheme.line3.strokeColor,"Lower")},o.prototype.setConfigure=function(){this._ema1=this.EMA(null,this._newPeriod),this._emaEMA=this.EMA(this._ema1,this._newPeriod),this._emaRange=this.EMA(this.Range(),this.period)},o.prototype.onBarUpdate=function(){var t,e,i,o=this.values.get("Lower"),r=this.values.get("Upper");this.currentBar<this.period||(t=this.bandPct*this._emaRange.values.get(0).get(0),e=this._emaEMA.values.get(0).get(0)-t,i=this._emaEMA.values.get(0).get(0)+t,o.set(e),r.set(i))},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.APZ=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"EMA"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="EMA",this.period=14,this._isOverlay=!0,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._constant1=2/(1+this.period),this._constant2=1-2/(1+this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=0===this.currentBar?this.input.get(0):this.input.get(0)*this._constant1+this._constant2*t.get(1);t.set(e)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.EMA=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"ATR"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="ATR",this.period=14,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t,e,i,o=this.high.get(0),r=this.low.get(0),n=this.values.get(this.name);i=0===this.currentBar?o-r:(t=this.close.get(1),e=Math.max(Math.abs(r-t),Math.max(o-r,Math.abs(o-t))),((Math.min(this.currentBar+1,this.period)-1)*n.get(1)+e)/Math.min(this.currentBar+1,this.period)),n.set(i)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.ATR=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(o){var e,t=(e=o.AdvancedIndicator,__extends(i,e),Object.defineProperty(i,"className",{get:function(){return"BarStats"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"period",{get:function(){return this.getParameterValue(o.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(o.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="BarStats",this.period=14,this._isOverlay=!1,this.showValueMarkers=!1,this.showParamsInTitle=!1,this.showValuesInTitle=!1,this.showLineLevels=!1;var t=this.linePlots.length,e=this._lineTheme(t);this._addLineParameters(t,this.indicatorTheme.line1.strokeColor,void 0,void 0);var i=this.chart.dataManager;this._plots.push(new o.BarStatsPlot({theme:e,dataManager:i}))},i.prototype.setConfigure=function(){},i.prototype.onBarUpdate=function(){this._plots[0].calcValue(this.currentBar)},i.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return t.settings=this._plots[0].settings,t},i.prototype.loadState=function(t){this.settings=t.settings},i);function i(){return null!==e&&e.apply(this,arguments)||this}o.BarStats=t,o.Indicator.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"SMA"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="SMA",this.period=14,this._isOverlay=!0,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._priorSum=0,this._sum=0},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name);this.isFirstTickOfBar&&(this._priorSum=this._sum),this._priorSum=this._sum,this._sum=this._priorSum+this.input.get(0)-(this.currentBar>=this.period?this.input.get(this.period):0);var e=this._sum/(this.currentBar<this.period?this.currentBar+1:this.period);t.set(e)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.SMA=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"SUM"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="SUM",this.period=14,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.input.get(0)+(0<this.currentBar?t.get(1):0)-(this.currentBar>=this.period?this.input.get(this.period):0);t.set(e)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.SUM=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(s){var t,e=(t=s.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"CMO"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(s.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(s.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"period",{get:function(){return this.getParameterValue(s.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(s.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="CMO",this.period=14,this._isOverlay=!1,this.inputSeriesKind=s.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},i.prototype.setConfigure=function(){this._down=new s.TADataSeries("Down",this),this._up=new s.TADataSeries("Up",this),this._sumDown=this.SUM(this._down,this.period),this._sumUp=this.SUM(this._up,this.period)},i.prototype.onBarUpdate=function(){var t=this.values.get(this.name);if(0===this.currentBar)return this._down.set(0),void this._up.set(0);var e=this.input.get(0),i=this.input.get(1),o=Math.max(i-e,0),r=Math.max(e-i,0);this._down.set(o),this._up.set(r);var n=this._sumDown.values.get(0).get(0),a=this._sumUp.values.get(0).get(0),l=0===s.JsUtil.approxCompare(a,n)?0:(a-n)/(a+n)*100;t.set(l)},i);function i(){return null!==t&&t.apply(this,arguments)||this}s.CMO=e,s.Indicator.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"MAX"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="MAX",this.period=14,this._isOverlay=!0,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._lastBar=0,this._lastMax=0,this._runningMax=0,this._runningBar=0,this._thisBar=0},o.prototype.onBarUpdate=function(){var t,e=this.values.get(this.name);if(0===this.currentBar)return this._runningMax=this.input.get(0),this._lastMax=this.input.get(0),this._runningBar=0,this._lastBar=0,this._thisBar=0,t=this.input.get(0),void e.set(t);if(this.currentBar-this._runningBar>=this.period){this._runningMax=Number.MIN_VALUE;for(var i=Math.min(this.currentBar,this.period-1);0<i;i--)this.input.get(i)>=this._runningMax&&(this._runningMax=this.input.get(i),this._runningBar=this.currentBar-i)}this._thisBar!==this.currentBar&&(this._lastMax=this._runningMax,this._lastBar=this._runningBar,this._thisBar=this.currentBar),this.input.get(0)>=this._lastMax?(this._runningMax=this.input.get(0),this._runningBar=this.currentBar):(this._runningMax=this._lastMax,this._runningBar=this._lastBar),t=this._runningMax,e.set(t)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.MAX=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"MIN"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="MIN",this.period=14,this._isOverlay=!0,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._lastBar=0,this._lastMin=0,this._runningMin=0,this._runningBar=0,this._thisBar=0},o.prototype.onBarUpdate=function(){var t,e=this.values.get(this.name);if(0===this.currentBar)return this._runningMin=this.input.get(0),this._lastMin=this.input.get(0),this._runningBar=0,this._lastBar=0,this._thisBar=0,t=this.input.get(0),void e.set(t);if(this.currentBar-this._runningBar>=this.period){this._runningMin=Number.MAX_VALUE;for(var i=Math.min(this.currentBar,this.period-1);0<i;i--)this.input.get(i)<=this._runningMin&&(this._runningMin=this.input.get(i),this._runningBar=this.currentBar-i)}this._thisBar!==this.currentBar&&(this._lastMin=this._runningMin,this._lastBar=this._runningBar,this._thisBar=this.currentBar),this.input.get(0)<=this._lastMin?(this._runningMin=this.input.get(0),this._runningBar=this.currentBar):(this._runningMin=this._lastMin,this._runningBar=this._lastBar),t=this._runningMin,e.set(t)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.MIN=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(g){var t,e=(t=g.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"ADX"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"period",{get:function(){return this.getParameterValue(g.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(g.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="ADX",this.period=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line1.strokeColor,25),this.addLine(this.levelsTheme.line2.strokeColor,75)},i.prototype.setConfigure=function(){this._dmPlus=new g.TADataSeries("dmPlus",this),this._dmMinus=new g.TADataSeries("dmPlus",this),this._sumDmPlus=new g.TADataSeries("dmPlus",this),this._sumDmMinus=new g.TADataSeries("dmPlus",this),this._sumTr=new g.TADataSeries("dmPlus",this),this._tr=new g.TADataSeries("dmPlus",this)},i.prototype.onBarUpdate=function(){var t,e,i,o,r,n,a,l,s,c,h,u,f,d,p,y,m,_=this.values.get(this.name),C=this.high.get(0),b=this.low.get(0);0===this.currentBar?(o=C-b,this._tr.set(o),this._dmPlus.set(0),this._dmMinus.set(0),this._sumTr.set(o),this._sumDmPlus.set(0),this._sumDmMinus.set(0),_.set(50)):(t=this.high.get(1),e=this.low.get(1),i=this.close.get(1),o=Math.max(Math.abs(b-i),Math.max(C-b,Math.abs(C-i))),r=e-b<C-t?Math.max(C-t,0):0,n=C-t<e-b?Math.max(e-b,0):0,this._tr.set(o),this._dmPlus.set(r),this._dmMinus.set(n),u=h=c=void 0,u=this.currentBar<this.period?(c=this._sumTr.get(1)+o,h=this._sumDmPlus.get(1)+r,this._sumDmMinus.get(0)+n):(a=this._sumTr.get(1),l=this._sumDmPlus.get(1),s=this._sumDmMinus.get(1),c=a-a/this.period+o,h=l-l/this.period+r,s-s/this.period+n),this._sumTr.set(c),this._sumDmPlus.set(h),this._sumDmMinus.set(u),c=this._sumTr.get(0),f=100*(0===g.JsUtil.approxCompare(c,0)?0:h/c),d=100*(0===g.JsUtil.approxCompare(c,0)?0:u/c),p=Math.abs(f-d),y=f+d,m=0===g.JsUtil.approxCompare(y,0)?50:((this.period-1)*_.get(1)+100*p/y)/this.period,_.set(m))},i);function i(){return null!==t&&t.apply(this,arguments)||this}g.ADX=e,g.Indicator.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){var e,i=(e=t.Indicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"OBV"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="OBV",this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t,e,i,o=this.values.get(this.name);0===this.currentBar?o.set(0):(t=this.close.get(0),e=this.close.get(1),i=this.volume.get(0),e<t?o.set(o.get(1)+i):t<e?o.set(o.get(1)-i):o.set(o.get(1)))},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.OBV=i,t.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"ROC"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="ROC",this.period=14,this._isOverlay=!1,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line5.strokeColor,0)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t,e,i=this.values.get(this.name);this.currentBar<=this.period?i.set(this.input.get(0)):(t=this.input.get(Math.min(this.currentBar,this.period)),e=(this.input.get(0)-t)/t*100,i.set(e))},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.ROC=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"VOL"},enumerable:!0,configurable:!0}),o.prototype._getLineParametersKeys=function(t){return[e.IndicatorParam.LINE_COLOR]},o.prototype.setDefaults=function(){this.name="VOL",this._isOverlay=!1,this.addPlot("#3452F1",this.name,e.HistogramPlot.Style.COLUMN)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){this.values.get(this.name).set(this.volume.get(0))},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.VOL=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"VMA"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"volatilityPeriod",{get:function(){return this.getParameterValue(e.IndicatorParam.VOLATILITY_PERIOD)},set:function(t){this.setParameterValue(e.IndicatorParam.VOLATILITY_PERIOD,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="VMA",this.period=9,this.volatilityPeriod=9,this._isOverlay=!0,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._sc=2/(this.period+1),this._cmo=this.CMO(this.input,this.volatilityPeriod)},o.prototype.onBarUpdate=function(){var t,e,i=this.values.get(this.name);0!==this.currentBar?(t=Math.abs(this._cmo.values.get(0).get(0))/100,e=this._sc*t*this.input.get(0)+(1-this._sc*t)*i.get(1),i.set(e)):i.set(this.input.get(0))},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.VMA=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(l){var t,e=(t=l.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"BOP"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"period",{get:function(){return this.getParameterValue(l.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(l.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"smooth",{get:function(){return this.getParameterValue(l.IndicatorParam.SMOOTH)},set:function(t){this.setParameterValue(l.IndicatorParam.SMOOTH,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="BOP",this.period=14,this.smooth=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name,l.HistogramPlot.Style.COLUMN)},i.prototype.setConfigure=function(){this._bop=new l.TADataSeries("bop",this),this._sma=this.SMA(this._bop,this.smooth)},i.prototype.onBarUpdate=function(){var t,e=this.values.get(this.name),i=this.high.get(0),o=this.low.get(0),r=this.close.get(0),n=this.open.get(0);0===l.JsUtil.approxCompare(i-o,0)?this._bop.set(0):(t=(r-n)/(i-o),this._bop.set(t));var a=this._sma.values.get(0).get(0);e.set(a)},i);function i(){return null!==t&&t.apply(this,arguments)||this}l.BOP=e,l.Indicator.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"PPO"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"smooth",{get:function(){return this.getParameterValue(e.IndicatorParam.SMOOTH)},set:function(t){this.setParameterValue(e.IndicatorParam.SMOOTH,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"slow",{get:function(){return this.getParameterValue(e.IndicatorParam.SLOW)},set:function(t){this.setParameterValue(e.IndicatorParam.SLOW,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fast",{get:function(){return this.getParameterValue(e.IndicatorParam.FAST)},set:function(t){this.setParameterValue(e.IndicatorParam.FAST,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="PPO",this.period=14,this.fast=12,this.slow=26,this.smooth=9,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line2.strokeColor,"Default"),this.addPlot(this.indicatorTheme.line3.strokeColor,"PPOSmoothed"),this.addLine(this.levelsTheme.line5.strokeColor,0)},o.prototype.setConfigure=function(){this._emaFast=this.EMA(null,this.fast),this._emaSlow=this.EMA(null,this.slow),this._values0=this.values.get("Default")},o.prototype.onBarUpdate=function(){var t=this.values.get("PPOSmoothed"),e=this.values.get("Default"),i=this._emaSlow.values.get(0).get(0),o=(this._emaFast.values.get(0).get(0)-i)/i*100;e.set(o||0);var r=this.EMA(this._values0,this.smooth).values.get(0).get(0);t.set(r)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.PPO=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"TSF"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"forecast",{get:function(){return this.getParameterValue(e.IndicatorParam.FORECAST)},set:function(t){this.setParameterValue(e.IndicatorParam.FORECAST,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="TSF",this.period=14,this.forecast=3,this._isOverlay=!0,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._avg=this._divisor=this._intercept=this._myPeriod=this._priorSumXY=this._priorSumY=this._slope=this._sumX=this._sumX2=this._sumY=this._sumXY=0,this._sum=this.SUM(this.input,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._sum.values.get(0);this.isFirstTickOfBar&&(this._priorSumY=this._sumY,this._priorSumXY=this._sumXY,this._myPeriod=Math.min(this.currentBar+1,this.period),this._sumX=this._myPeriod*(this._myPeriod-1)*.5,this._sumX2=this._myPeriod*(this._myPeriod+1)*.5,this._divisor=this._myPeriod*(this._myPeriod+1)*(2*this._myPeriod+1)/6-this._sumX2*this._sumX2/this._myPeriod);var i=this.input.get(0);this._sumXY=this._priorSumXY-(this.currentBar>=this.period?this._priorSumY:0)+this._myPeriod*i,this._sumY=this._priorSumY+i-(this.currentBar>=this.period?this.input.get(this.period):0),this._avg=this._sumY/this._myPeriod,this._slope=(this._sumXY-this._sumX2*this._avg)/this._divisor,this._intercept=(e.get(0)-this._slope*this._sumX)/this._myPeriod;var o=0===this.currentBar?i:this._intercept+this._slope*(this._myPeriod-1+this.forecast);t.set(o)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.TSF=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(l){var t,e=(t=l.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"TSI"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"period",{get:function(){return this.getParameterValue(l.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(l.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(l.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(l.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fast",{get:function(){return this.getParameterValue(l.IndicatorParam.FAST)},set:function(t){this.setParameterValue(l.IndicatorParam.FAST,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"slow",{get:function(){return this.getParameterValue(l.IndicatorParam.SLOW)},set:function(t){this.setParameterValue(l.IndicatorParam.SLOW,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="TSI",this.period=14,this.fast=3,this.slow=14,this._isOverlay=!1,this.inputSeriesKind=l.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},i.prototype.setConfigure=function(){this._constant1=2/(1+this.slow),this._constant2=1-2/(1+this.slow),this._constant3=2/(1+this.fast),this._constant4=1-2/(1+this.fast),this._fastEma=new l.TADataSeries("fastEma",this),this._fastAbsEma=new l.TADataSeries("fastAbsEma",this),this._slowEma=new l.TADataSeries("slowEma",this),this._slowAbsEma=new l.TADataSeries("slowAbsEma",this)},i.prototype.onBarUpdate=function(){var t,e,i,o,r,n,a=this.values.get(this.name);0===this.currentBar?(this._fastAbsEma.set(0),this._fastEma.set(0),this._slowAbsEma.set(0),this._slowEma.set(0),a.set(0)):(e=(t=this.input.get(0)-this.input.get(1))*this._constant1+this._constant2*this._slowEma.get(1),this._slowEma.set(e),i=this._slowEma.get(0)*this._constant3+this._constant4*this._fastEma.get(1),this._fastEma.set(i),o=Math.abs(t)*this._constant1+this._constant2*this._slowAbsEma.get(1),this._slowAbsEma.set(o),r=this._slowAbsEma.get(0)*this._constant3+this._constant4*this._fastAbsEma.get(1),this._fastAbsEma.set(r),n=l.JsUtil.equals(this._fastAbsEma.get(0),0)?0:100*this._fastEma.get(0)/this._fastAbsEma.get(0),a.set(n))},i);function i(){return null!==t&&t.apply(this,arguments)||this}l.TSI=e,l.Indicator.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"PFE"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"smooth",{get:function(){return this.getParameterValue(e.IndicatorParam.SMOOTH)},set:function(t){this.setParameterValue(e.IndicatorParam.SMOOTH,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="PFE",this.period=14,this.smooth=10,this._isOverlay=!1,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line5.strokeColor,0)},o.prototype.setConfigure=function(){this._div=new e.TADataSeries("dmPlus",this),this._pfeSeries=new e.TADataSeries("dmPlus",this),this._singlePfeSeries=new e.TADataSeries("dmPlus",this),this._ema=this.EMA(this._pfeSeries,this.smooth)},o.prototype.onBarUpdate=function(){var t,e=this.values.get(this.name),i=this.input.get(0);if(this.currentBar<this.period)return n=0===this.currentBar?1:Math.sqrt(Math.pow(this.input.get(1)-i,2)+1),this._singlePfeSeries.set(n),t=this._singlePfeSeries.get(0)+(0<this.currentBar?this._div.get(1):0),void this._div.set(t);var o=this.input.get(0),r=this.input.get(this.period),n=Math.sqrt(Math.pow(o-i,2)+1);this._singlePfeSeries.set(n),t=this._singlePfeSeries.get(0)+this._div.get(1)-this._singlePfeSeries.get(this.period),this._div.set(t);var a=(i<r?-1:1)*(Math.sqrt(Math.pow(i-r,2)+Math.pow(this.period,2))/this._div.get(0));this._pfeSeries.set(a);var l=this._ema.values.get(0).get(0);e.set(l)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.PFE=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"WMA"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="WMA",this.period=14,this._isOverlay=!0,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._priorSum=0,this._priorWsum=0,this._sum=0,this._wsum=0},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name);this.isFirstTickOfBar&&(this._priorWsum=this._wsum,this._priorSum=this._sum,this._myPeriod=Math.min(this.currentBar+1,this.period)),this._wsum=this._priorWsum-(this.currentBar>=this.period?this._priorSum:0)+this._myPeriod*this.input.get(0),this._sum=this._priorSum+this.input.get(0)-(this.currentBar>=this.period?this.input.get(this.period):0);var e=this._wsum/(.5*this._myPeriod*(this._myPeriod+1));t.set(e)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.WMA=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){var e,i=(e=t.Indicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"HML"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="HML",this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.high.get(0)-this.low.get(0);t.set(e)},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.HML=i,t.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"RSI"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"smooth",{get:function(){return this.getParameterValue(e.IndicatorParam.SMOOTH)},set:function(t){this.setParameterValue(e.IndicatorParam.SMOOTH,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="RSI",this.period=14,this.smooth=3,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line2.strokeColor,this.name),this.addPlot(this.indicatorTheme.line3.strokeColor,"Avg"),this.addLine(this.levelsTheme.line1.strokeColor,30),this.addLine(this.levelsTheme.line1.strokeColor,70)},o.prototype.setConfigure=function(){this._constant1=2/(1+this.smooth),this._constant2=1-2/(1+this.smooth),this._constant3=this.period-1,this._down=new e.TADataSeries("dmPlus",this),this._up=new e.TADataSeries("dmPlus",this),this._avgDown=new e.TADataSeries("dmPlus",this),this._avgUp=new e.TADataSeries("dmPlus",this),this._smaDown=this.SMA(this._down,this.period),this._smaUp=this.SMA(this._up,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.values.get("Avg");if(0===this.currentBar)return this._down.set(0),this._up.set(0),void(this.period<3&&e.set(50));var i,o,r,n,a=this.input.get(0),l=this.input.get(1),s=Math.max(l-a,0),c=Math.max(a-l,0);this._down.set(s),this._up.set(c),this.currentBar+1<this.period?this.currentBar+1===this.period-1&&e.set(50):(this.currentBar+1===this.period?(this._avgDown.set(this._smaDown.values.get(0).get(0)),this._avgUp.set(this._smaUp.values.get(0).get(0))):(i=(this._avgDown.get(1)*this._constant3+s)/this.period,o=(this._avgUp.get(1)*this._constant3+c)/this.period,this._avgDown.set(i),this._avgUp.set(o)),r=0===(i=this._avgDown.get(0))?100:100-100/(1+this._avgUp.get(0)/i),t.set(r),n=this._constant1*r+this._constant2*e.get(1),e.set(n))},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.RSI=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(s){var t,e=(t=s.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"MFI"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"period",{get:function(){return this.getParameterValue(s.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(s.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="MFI",this.period=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line1.strokeColor,20),this.addLine(this.levelsTheme.line2.strokeColor,80)},i.prototype.setConfigure=function(){this._negative=new s.TADataSeries("Negative",this),this._positive=new s.TADataSeries("Positive",this),this._sumNegative=this.SUM(this._negative,this.period),this._sumPositive=this.SUM(this._positive,this.period)},i.prototype.onBarUpdate=function(){var t,e,i,o,r,n,a,l=this.values.get(this.name);a=0===this.currentBar?50:(i=(t=this.typical.get(0))<(e=this.typical.get(1))?t*this.volume.get(0):0,o=e<t?t*this.volume.get(0):0,this._negative.set(i),this._positive.set(o),r=this._sumNegative.values.get(0).get(0),n=this._sumPositive.values.get(0).get(0),s.JsUtil.equals(r,0)?50:100-100/(1+n/r)),l.set(a)},i);function i(){return null!==t&&t.apply(this,arguments)||this}s.MFI=e,s.Indicator.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"ASI"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"limitValue",{get:function(){return this.getParameterValue(e.IndicatorParam.LIMIT_VALUE)},set:function(t){this.setParameterValue(e.IndicatorParam.LIMIT_VALUE,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="ASI",this.limitValue=.5,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._swingIndex=this.SwingIndex(this.limitValue)},o.prototype.onBarUpdate=function(){var t,e;this.currentBar<1||(t=this.values.get(this.name),e=this._swingIndex.values.get(0).get(0)+t.get(1),t.set(e))},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.ASI=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(i){var t,e=(t=i.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"CRS"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(i.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(i.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind2",{get:function(){return this.getParameterValue(i.IndicatorParam.SOURCE2)},set:function(t){this.setParameterValue(i.IndicatorParam.SOURCE2,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="CRS",this.inputSeriesKind=i.DataSeriesSuffix.CLOSE,this.inputSeriesKind2=i.DataSeriesSuffix.OPEN,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.input.get(0)/this.input2.get(0);1===e&&(e=i.nullValue),t.set(e)},o);function o(){return null!==t&&t.apply(this,arguments)||this}i.CRS=e,i.Indicator.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){var e,i=(e=t.Indicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"EFI"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="EFI",this.addPlot(this.indicatorTheme.line2.strokeColor,"Indicator"),this.addPlot(this.indicatorTheme.line3.strokeColor,"Signal")},o.prototype.setConfigure=function(){this._ema=this.EMA(this.values.get("Indicator"),2)},o.prototype.onBarUpdate=function(){var t,e,i,o,r,n;this.currentBar<2||(t=this.values.get("Indicator"),e=this.values.get("Signal"),i=this.close,o=this.volume,r=(i.get(1)-i.get(0))*o.get(0),t.set(r),n=this._ema.values.get(0),e.set(n.get(0)))},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.EFI=i,t.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"GRI"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="GRI",this.period=14,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._max=this.MAX(this.high,this.period),this._min=this.MIN(this.low,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._max.values.get(0),i=this._min.values.get(0),o=Math.log(e.get(0)-i.get(0))/Math.log(this.period);t.set(o)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.GRI=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"IMI"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="IMI",this.period=14,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._prevUpSum=0,this._prevDnSum=0,this._upSum=0,this._dnSum=0},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.close,i=this.open;e.get(0)>i.get(0)?this._upSum=this._prevUpSum+(e.get(0)-i.get(0)):this._dnSum=this._prevDnSum+(i.get(0)-e.get(0));var o=this._upSum/(this._upSum+this._dnSum)*100;t.set(o),this._prevUpSum=this._upSum,this._prevDnSum=this._dnSum},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.IMI=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(n){var t,e=(t=n.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"CCI"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"period",{get:function(){return this.getParameterValue(n.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(n.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="CCI",this.period=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line5.strokeColor,200),this.addLine(this.levelsTheme.line5.strokeColor,100),this.addLine(this.levelsTheme.line5.strokeColor,0),this.addLine(this.levelsTheme.line5.strokeColor,-100),this.addLine(this.levelsTheme.line5.strokeColor,-200)},i.prototype.setConfigure=function(){this._sma=this.SMA(this.typical,this.period)},i.prototype.onBarUpdate=function(){var t=this.values.get(this.name);if(0===this.currentBar)t.set(0);else{for(var e=0,i=this._sma.values.get(0).get(0),o=Math.min(this.currentBar,this.period-1);0<=o;o--)e+=Math.abs(this.typical.get(o)-i);var r=(this.typical.get(0)-i)/(0===n.JsUtil.approxCompare(e,0)?1:e/Math.min(this.period,this.currentBar+1)*.015);t.set(r)}},i);function i(){return null!==t&&t.apply(this,arguments)||this}n.CCI=e,n.Indicator.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"RSS"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ema1",{get:function(){return this.getParameterValue(e.IndicatorParam.EMA1)},set:function(t){this.setParameterValue(e.IndicatorParam.EMA1,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ema2",{get:function(){return this.getParameterValue(e.IndicatorParam.EMA2)},set:function(t){this.setParameterValue(e.IndicatorParam.EMA2,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="RSS",this.ema1=10,this.ema2=40,this.period=4,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line1.strokeColor,20),this.addLine(this.levelsTheme.line1.strokeColor,80)},o.prototype.setConfigure=function(){this._spread=new e.TADataSeries("spread",this),this._rs=new e.TADataSeries("rs",this),this._ema1=this.EMA(null,this.ema1),this._ema2=this.EMA(null,this.ema2),this._rsi=this.RSI(this._spread,this.period,1),this._sma=this.SMA(this._rs,5)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._ema1.values.get(0),i=this._ema2.values.get(0),o=e.get(0)-i.get(0);this._spread.set(o),this._rs.set(this._rsi.values.get(0).get(0));var r=this._sma.values.get(0).get(0);t.set(r)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.RSS=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"HMA"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="HMA",this.period=14,this._isOverlay=!0,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._diffSeries=new e.TADataSeries("Down",this),this._wma1=this.WMA(this.input,this.period/2),this._wma2=this.WMA(this.input,this.period),this._wmaDiffSeries=this.WMA(this._diffSeries,Math.floor(Math.sqrt(this.period)))},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=2*this._wma1.values.get(0).get(0)-this._wma2.values.get(0).get(0);this._diffSeries.set(e);var i=this._wmaDiffSeries.values.get(0).get(0);t.set(i)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.HMA=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){var e,i=(e=t.Indicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"PNB"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="PNB",this._isOverlay=!0,this.addPlot(this.indicatorTheme.line2.strokeColor,"Prime Bands Top"),this.addPlot(this.indicatorTheme.line3.strokeColor,"Prime Bands Bottom")},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t,e,i=this.values.get("Prime Bands Top"),o=this.values.get("Prime Bands Bottom"),r=this.low,n=this.high,a=r.get(0);for(this._i=a;1<this._i;--this._i)if(this.isPrime(this._i)){e=this._i;break}for(o.set(e),a=n.get(0),this._i=a;this._i<2*a;++this._i)if(this.isPrime(this._i)){t=this._i;break}i.set(t)},o.prototype.isPrime=function(t){if(3<t){if(!(t%2))return!1;if(!(t%3))return!1}for(var e=5,i=2,o=Math.sqrt(t)+1;e<=o;){if(!(t%e))return!1;e+=i,i=6-i}return!0},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.PNB=i,t.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"TMA"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="TMA",this.period=15,this._isOverlay=!0,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._p1=0,(this._p2=0)==(1&this.period)?(this._p1=this.period/2,this._p2=this._p1+1):(this._p1=(this.period+1)/2,this._p2=this._p1),this._sma0=this.SMA(this.input,this._p1),this._sma=this.SMA(this._sma0,this._p2)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._sma.values.get(0).get(0);t.set(e)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.TMA=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"NVI"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="NVI",this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t,e,i=this.values.get(this.name),o=this.volume;this.currentBar<1?i.set(1):(e=o.get(0)<o.get(1)?(t=this.input.get(1),i.get(1)+(this.input.get(0)-t)/t*i.get(1)):i.get(1),i.set(e))},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.NVI=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"PVI"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="PVI",this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t,e,i=this.values.get(this.name),o=this.volume;this.currentBar<2?i.set(1):(e=o.get(0)>o.get(1)?(t=this.input.get(1),i.get(1)+(this.input.get(0)-t)/t*i.get(1)):i.get(1),i.set(e))},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.PVI=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"PVT"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="PVT",this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t,e,i,o;this.currentBar<2||(t=this.values.get(this.name),e=this.volume,i=this.input.get(1),o=(this.input.get(0)-i)/i*e.get(0)+t.get(1),o/=1e4,t.set(o))},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.PVT=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"TVI"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"limitValue",{get:function(){return this.getParameterValue(e.IndicatorParam.LIMIT_VALUE)},set:function(t){this.setParameterValue(e.IndicatorParam.LIMIT_VALUE,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="TVI",this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.limitValue=.5,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._tvi=0},o.prototype.onBarUpdate=function(){var t,e;this.currentBar<1||(t=this.values.get(this.name),(e=this.input.get(0)-this.input.get(1))>this.limitValue?this._direction=1:e<-this.limitValue&&(this._direction=-1),e<=this.limitValue&&e>=-this.limitValue&&(this._direction=this._lastDirection),this._lastDirection=this._direction,1===this._direction?this._tvi=this._tvi+this.volume.get(0):-1===this._direction&&(this._tvi=this._tvi-this.volume.get(0)),this._tvi/=1e4,t.set(this._tvi))},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.TVI=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"TMF"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="TMF",this.period=14,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._ema=this.EMA(this.volume,this.period),this._ema2=this.EMA(this.values.get(this.name),this.period),this._high=new e.TADataSeries("high",this),this._low=new e.TADataSeries("low",this)},o.prototype.onBarUpdate=function(){var t,e,i,o,r;this.currentBar<1||(t=this._ema.values.get(0),e=this.values.get(this.name),i=this._high,o=this._low,i.set(Math.max(this.high.get(0),this.close.get(1))),o.set(Math.min(this.low.get(0),this.close.get(1))),e.set((this.close.get(0)-o.get(0)-(i.get(0)-this.close.get(0)))/(i.get(0)-o.value(0))*this.volume.get(0)),r=this._ema2.values.get(0),e.set(r.get(0)/t.get(0)))},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.TMF=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"WWS"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="WWS",this.period=14,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this._isOverlay=!0,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t,e;this.currentBar<1||(e=(t=this.values.get(this.name)).get(1)+1/this.period*(this.input.get(0)-t.get(1)),t.set(e))},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.WWS=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"CFO"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="CFO",this.period=14,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._tsf=this.TSF(this.input,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._tsf.values.get(0),i=(this.input.get(0)-e.get(0))/this.input.get(0)*100;t.set(i)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.CFO=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"EFT"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="EFT",this.period=14,this.addPlot(this.indicatorTheme.line2.strokeColor,"Indicator"),this.addPlot(this.indicatorTheme.line3.strokeColor,"Indicator Trigger")},o.prototype.setConfigure=function(){this._max=this.MAX(this.median,this.period),this._min=this.MIN(this.median,this.period),this._value1=0,this._prevValue1=0,this._prevFish=0},o.prototype.onBarUpdate=function(){var t=this.values.get("Indicator"),e=this.values.get("Indicator Trigger"),i=this._max.values.get(0),o=this._min.values.get(0);i.get(0)!==o.get(0)?this._value1=.66*((this.median.get(0)-o.get(0))/(i.get(0)-o.get(0))-.5)+.67*this._prevValue1:this._value1=0,.99<this._value1&&(this._value1=.999),this._value1<-.99&&(this._value1=-.999);var r=.5*Math.log((1+this._value1)/(1-this._value1))+.5*this._prevFish;t.set(r),e.set(this._prevFish),this._prevValue1=this._value1,this._prevFish=r},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.EFT=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"PGO"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="PGO",this.period=14,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._sma=this.SMA(this.close,this.period),this._tr=this.TrueRange(null,this.period),this._ema=this.EMA(this._tr,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._sma.values.get(0),i=this._ema.values.get(0);0!==i.get(0)?t.set((this.close.get(0)-e.get(0))/i.get(0)):t.set(null)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.PGO=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){var e,i=(e=t.Indicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"PNO"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="PNO",this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._top=0,this._bottom=0},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.close.get(0);e<10&&(e*=10);for(var i=e;1<i;--i)if(this._isPrime(i)){this._bottom=i;break}for(i=e;i<2*e;++i)if(this._isPrime(i)){this._top=i;break}Math.abs(e-this._top)<Math.abs(e-this._bottom)?t.set(e-this._top):t.set(e-this._bottom)},o.prototype._isPrime=function(t){if(3<t){if(!(t%2))return!1;if(!(t%3))return!1}for(var e=5,i=2,o=Math.sqrt(t)+1;e<=o;){if(!(t%e))return!1;e+=i,i=6-i}return!0},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.PNO=i,t.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){var e,i=(e=t.Indicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"WAD"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="WAD",this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t,e,i,o;this.currentBar<1||(t=this.values.get(0),i=this.close.get(1),this.high.get(0)>i&&(i=this.high.get(0)),o=this.close.get(1),this.low.get(0)<o&&(o=this.low.get(0)),e=this.close.get(0)>this.close.get(1)?this.close.get(0)-o:this.close.get(0)<this.close.get(1)?this.close.get(0)-i:0,t.set(e+t.get(1)))},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.WAD=i,t.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"RIND"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"periodQ",{get:function(){return this.getParameterValue(e.IndicatorParam.Q_PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.Q_PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"smooth",{get:function(){return this.getParameterValue(e.IndicatorParam.SMOOTH)},set:function(t){this.setParameterValue(e.IndicatorParam.SMOOTH,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="RIND",this.periodQ=3,this.smooth=10,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._stochRange=new e.TADataSeries("stochRange",this),this._val1=new e.TADataSeries("val",this),this._ema=this.EMA(this._stochRange,this.smooth),this._min=this.MIN(this._val1,this.periodQ),this._max=this.MAX(this._val1,this.periodQ)},o.prototype.onBarUpdate=function(){var t,e,i,o,r,n,a,l,s,c,h=this.values.get(this.name);0!==this.currentBar?(t=this.high.get(0),e=this.low.get(0),i=this.close.get(0),o=this.close.get(1),r=Math.max(t,o)-Math.min(e,o),n=o<i?r/(i-o):r,this._val1.set(n),a=this._min.values.get(0).get(0),s=0<(l=this._max.values.get(0).get(0))-a?(n-a)/(l-a)*100:100*(n-a),this._stochRange.set(s),c=this._ema.values.get(0),h.set(c.get(0))):this._stochRange.set(50)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.RIND=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"DEMA"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="DEMA",this.period=14,this._isOverlay=!0,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._ema=this.EMA(this.input,this.period),this._emaEma=this.EMA(this._ema,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._ema.values.get(0),i=this._emaEma.values.get(0),o=2*e.get(0)-i.get(0);t.set(o)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.DEMA=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(l){var t,e=(t=l.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"KAMA"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(l.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(l.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"period",{get:function(){return this.getParameterValue(l.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(l.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fast",{get:function(){return this.getParameterValue(l.IndicatorParam.FAST)},set:function(t){this.setParameterValue(l.IndicatorParam.FAST,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"slow",{get:function(){return this.getParameterValue(l.IndicatorParam.SLOW)},set:function(t){this.setParameterValue(l.IndicatorParam.SLOW,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="KAMA",this.period=14,this.fast=25,this.slow=40,this._isOverlay=!1,this.inputSeriesKind=l.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},i.prototype.setConfigure=function(){this._fastCF=2/(this.fast+1),this._slowCF=2/(this.slow+1),this._diffSeries=new l.TADataSeries("diffSeries",this),this._sum=this.SUM(this._diffSeries,this.period)},i.prototype.onBarUpdate=function(){var t,e,i,o,r=this.values.get(this.name),n=this.input.get(0),a=0<this.currentBar?Math.abs(n-this.input.get(1)):n;this._diffSeries.set(a),this.currentBar<this.period?r.set(n):(t=Math.abs(n-this.input.get(this.period)),e=this._sum.values.get(0).get(0),l.JsUtil.equals(e,0)?r.set(r.get(1)):(o=(i=r.get(1))+Math.pow(t/e*(this._fastCF-this._slowCF)+this._slowCF,2)*(n-i),r.set(o)))},i);function i(){return null!==t&&t.apply(this,arguments)||this}l.KAMA=e,l.Indicator.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"DBox"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="DBox",this.period=5,this._isOverlay=!0,this.addPlot(this.indicatorTheme.line1.strokeColor,"Top"),this.addPlot(this.indicatorTheme.line1.strokeColor,"Bottom")},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){for(var t=this.high,e=this.low,i=this.values.get("Top"),o=this.values.get("Bottom"),r=e.get(0),n=t.get(0),a=null,l=null,s=0;s<this.period&&1<=this.currentBar-s;s++)var c=s+1,n=Math.max(n,t.value(this.currentBar-s)),r=Math.min(r,e.value(this.currentBar-s)),a=c===this.period?n:a,l=this.period?r:l;i.set(a),o.set(l)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.DBox=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"TEMA"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="TEMA",this.period=14,this._isOverlay=!0,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._ema1=this.EMA(this.input,this.period),this._ema2=this.EMA(this._ema1,this.period),this._ema3=this.EMA(this._ema2,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=3*this._ema1.values.get(0).get(0)-3*this._ema2.values.get(0).get(0)+this._ema3.values.get(0).get(0);t.set(e)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.TEMA=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(u){var t;(t=u.VWAPValueBand||(u.VWAPValueBand={})).BAND_11="VWAPValueBand11",t.BAND_12="VWAPValueBand12",t.BAND_21="VWAPValueBand21",t.BAMD_22="VWAPValueBand22",t.BAND_31="VWAPValueBand31",t.BAND_32="VWAPValueBand32";var e,i=(e=u.AdvancedIndicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"VWAP"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"showValueMarkers",{get:function(){return!1},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(u.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(u.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"setting",{get:function(){return this._vwapPlot.settings},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"settings",{set:function(t){var e=u.JsUtil.merge(this._settings,t),i=!!this._handleSettings(e);this._vwapPlot.settings=t,this._settings=e,this.chart.setNeedsUpdate(i)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){var t,e,i;this.name=o.className,this.period=14,this._isOverlay=!0,this.chart&&(t=new u.TADataSeries(this.name,this),e=this.linePlots.length,i=this._lineTheme(e),this._addLineParameters(e,this.indicatorTheme.line1.strokeColor,void 0,void 0),this._vwapPlot=new u.VWAPPlot({dataSeries:t,theme:i}),this._plots.push(this._vwapPlot),this.values.add(t))},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.volume,i=this.typical,o=this.chart.getDataSeries(".date").values,r=0,n=0;this.isFirstTickOfBar&&(this._firstDate=o[0],this._vwapPlot.period=this.period);var a=this.setting.general.isShowCustomDuration;if(this.currentBar<this.period||a&&u.Frame.verificationFrame(this.setting.general.customDuration,this._firstDate,o[this.currentBar]))t.set(null);else if(a)this._setDuration({values:t,volume:e,typical:i,dateList:o});else{for(var l=this.period;0<=l;l--)var s=o[l],c=this._calculateComVolumes({index:l,volume:e,typical:i,date:s,comPriceVolume:r,comVolume:n}),r=c.comPriceVolume,n=c.comVolume;var h=r/n;t.set(isNaN(h)||0==h?null:h)}},o.prototype._calculateComVolumes=function(t){var e=t.volume.get(t.index),i=e*t.typical.get(t.index),o=this.setting.general.customTimes;return this.setting.general.isShowCustomTimes&&u.Session.isDateInWorkingTimes(t.date,o.workingTimes)||(t.comPriceVolume+=i,t.comVolume+=e),{comPriceVolume:t.comPriceVolume,comVolume:t.comVolume}},o.prototype._handleSettings=function(t){return!!this._vwapPlot&&(this._vwapPlot.settings=t,this._settings=t,this.update(!0),!0)},o.prototype._setDuration=function(t){if(t.dateList.length){var e,i,o=this.setting.general.customDuration,r=0,n=0,a=0;do{e=t.dateList[r];var l=this._calculateComVolumes({index:r,volume:t.volume,typical:t.typical,date:e,comPriceVolume:n,comVolume:a}),n=l.comPriceVolume,a=l.comVolume;r++,i=t.dateList[r]}while(u.Frame.verificationFrame(o,i,e)&&r<t.values.values.length);var s=n/a;u.Frame.verificationFrame(o,this._firstDate,i)?t.values.set(null):t.values.set(isNaN(s)||0==s?null:s)}},o);function o(){return null!==e&&e.apply(this,arguments)||this}u.VWAP=i,u.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"TRIX"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"signalPeriod",{get:function(){return this.getParameterValue(e.IndicatorParam.SIGNAL_PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.SIGNAL_PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="TRIX",this.period=14,this.signalPeriod=3,this._isOverlay=!1,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line2.strokeColor,"Default"),this.addPlot(this.indicatorTheme.line3.strokeColor,"TRIXSignal"),this.addLine(this.levelsTheme.line1.strokeColor,0)},o.prototype.setConfigure=function(){this._ema1=this.EMA(this.input,this.period),this._ema2=this.EMA(this._ema1,this.period),this._emaTriple=this.EMA(this._ema2,this.period),this._default=this.values.get("Default"),this._trixSignal=this.values.get("TRIXSignal"),this._emaDefault=this.EMA(this._default,this.signalPeriod)},o.prototype.onBarUpdate=function(){var t,e;0!==this.currentBar&&(e=((t=this._emaTriple.values.get(0).get(0))-this._emaTriple.values.get(0).get(1))/t*100,this._default.set(e),this._trixSignal.set(this._emaDefault.values.get(0).get(0)))},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.TRIX=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"ADXR"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="ADXR",this.period=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line1.strokeColor,25),this.addLine(this.levelsTheme.line2.strokeColor,75)},o.prototype.setConfigure=function(){this._adx=this.ADX(null,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._adx.values.get("ADX"),i=e.get(0),o=this.currentBar<this.period?(i+e.get(this.currentBar))/2:(i+e.get(this.period))/2;t.set(o)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.ADXR=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"FOSC"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="FOSC",this.period=14,this._isOverlay=!1,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line1.strokeColor,0)},o.prototype.setConfigure=function(){this._tsf=this.TSF(this.input,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.input.get(0),i=(e-this._tsf.values.get(0).get(0))/e*100;t.set(i)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.FOSC=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"MACD"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fast",{get:function(){return this.getParameterValue(e.IndicatorParam.FAST)},set:function(t){this.setParameterValue(e.IndicatorParam.FAST,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"slow",{get:function(){return this.getParameterValue(e.IndicatorParam.SLOW)},set:function(t){this.setParameterValue(e.IndicatorParam.SLOW,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"smooth",{get:function(){return this.getParameterValue(e.IndicatorParam.SMOOTH)},set:function(t){this.setParameterValue(e.IndicatorParam.SMOOTH,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="MACD",this.period=14,this.fast=12,this.slow=26,this.smooth=9,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,"MACD"),this.addPlot(this.indicatorTheme.line3.strokeColor,"Down"),this.addPlot(this.indicatorTheme.histogram.color,"Diff",e.HistogramPlot.Style.COLUMN),this.addLine("gray",0)},o.prototype.setConfigure=function(){this._constant1=2/(1+this.fast),this._constant2=1-2/(1+this.fast),this._constant3=2/(1+this.slow),this._constant4=1-2/(1+this.slow),this._constant5=2/(1+this.smooth),this._constant6=1-2/(1+this.smooth),this._fastEma=new e.TADataSeries("fastEma",this),this._slowEma=new e.TADataSeries("slowEma",this)},o.prototype.onBarUpdate=function(){var t,e,i,o,r,n=this.input.get(0),a=this.values.get("MACD"),l=this.values.get("Down"),s=this.values.get("Diff");0===this.currentBar?(this._fastEma.set(n),this._slowEma.set(n),a.set(0),l.set(0),s.set(0)):(r=(i=(t=this._constant1*n+this._constant2*this._fastEma.get(1))-(e=this._constant3*n+this._constant4*this._slowEma.get(1)))-(o=this._constant5*i+this._constant6*l.get(1)),this._fastEma.set(t),this._slowEma.set(e),a.set(i),l.set(o),s.set(r))},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.MACD=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"VROC"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"smooth",{get:function(){return this.getParameterValue(e.IndicatorParam.SMOOTH)},set:function(t){this.setParameterValue(e.IndicatorParam.SMOOTH,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="VROC",this.period=14,this._isOverlay=!1,this.smooth=3,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line5.strokeColor,0)},o.prototype.setConfigure=function(){this._smaVolume=new e.TADataSeries("dmPlus",this),this._sma=this.SMA(this._smaVolume,this.smooth)},o.prototype.onBarUpdate=function(){var t,e,i,o=this.values.get(this.name);this.currentBar<this.period?o.set(null):(t=this.volume.get(Math.min(this.currentBar,this.period-1)),e=100*this.volume.get(0)/((0===t?1:t)-100),this._smaVolume.set(e),i=this._sma.values.get(0),o.set(i.get(0)))},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.VROC=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"RAVI"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"shortCycle",{get:function(){return this.getParameterValue(e.IndicatorParam.SHORT_CYCLE)},set:function(t){this.setParameterValue(e.IndicatorParam.SHORT_CYCLE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"longCycle",{get:function(){return this.getParameterValue(e.IndicatorParam.LONG_CYCLE)},set:function(t){this.setParameterValue(e.IndicatorParam.LONG_CYCLE,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="RAVI",this.shortCycle=9,this.longCycle=14,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._vidyaShort=this.VIDYA(this.input,this.shortCycle),this._vidyaLong=this.VIDYA(this.input,this.longCycle)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._vidyaShort.values.get(0),i=this._vidyaLong.values.get(0);t.set(Math.abs(e.get(0)-i.get(0))/i.get(0)*100)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.RAVI=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"VIDYA"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"r2Scale",{get:function(){return this.getParameterValue(e.IndicatorParam.R2_SCALE)},set:function(t){this.setParameterValue(e.IndicatorParam.R2_SCALE,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="VIDYA",this.period=14,this.r2Scale=.65,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this._isOverlay=!0,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._lr=this.LinearRegression(this.input,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._lr.values.get(0),i=this.input.get(1),o=e.get(0)*this.r2Scale;t.set(o*this.input.get(0)+(1-o)*i)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.VIDYA=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"VOLMA"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="VOLMA",this.period=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._ema=this.EMA(this.volume,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._ema.values.get(0);t.set(e.get(0))},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.VOLMA=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"ZLEMA"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="ZLEMA",this.period=14,this._isOverlay=!0,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._k=2/(this.period+1),this._oneMinusK=1-this._k,this._lag=Math.ceil((this.period-1)/2)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.currentBar<this._lag?this.input.get(0):this._k*(2*this.input.get(0)-this.input.get(this._lag))+this._oneMinusK*t.get(1);t.set(e)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.ZLEMA=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"Range"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="Range",this.period=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.high.get(0)-this.low.get(0);t.set(e)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.Range=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"StdDev"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="StdDev",this.period=14,this._isOverlay=!1,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._sumSeries=new e.TADataSeries("SumSeries",this)},o.prototype.onBarUpdate=function(){var t,e=this.values.get(this.name);if(this.currentBar<1)this._sumSeries.set(this.input.get(0)),t=0;else{this._sumSeries.set(this.input.get(0)+this._sumSeries.get(1)-(this.currentBar>=this.period?this.input.get(this.period):0));for(var i=this._sumSeries.get(0)/Math.min(this.currentBar+1,this.period),o=0,r=Math.min(this.currentBar,this.period-1);0<=r;r--)o+=(this.input.get(r)-i)*(this.input.get(r)-i);t=Math.sqrt(o/Math.min(this.currentBar+1,this.period))}e.set(t)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.StdDev=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"Aroon"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="Aroon",this.period=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line2.strokeColor,"Up"),this.addPlot(this.indicatorTheme.line3.strokeColor,"Down"),this.addLine(this.levelsTheme.line1.strokeColor,30),this.addLine(this.levelsTheme.line2.strokeColor,70)},o.prototype.setConfigure=function(){this._runningMax=0,this._runningMaxBar=0,this._runningMin=0,this._runningMinBar=0},o.prototype.onBarUpdate=function(){var t=this.high.get(0),e=this.low.get(0),i=this.values.get("Down"),o=this.values.get("Up");if(0===this.currentBar)return i.set(0),o.set(0),this._runningMax=t,this._runningMin=e,this._runningMaxBar=0,void(this._runningMinBar=0);var r=Math.min(this.period,this.currentBar);if(this.currentBar-this._runningMaxBar>=this.period){this._runningMax=Number.MIN_VALUE;for(var n=r;0<n;n--)this.high.get(n)>=this._runningMax&&(this._runningMax=this.high.get(n),this._runningMaxBar=this.currentBar-n)}if(this.currentBar-this._runningMinBar>=this.period){this._runningMin=Number.MAX_VALUE;for(n=r;0<n;n--)this.low.get(n)<=this._runningMin&&(this._runningMin=this.low.get(n),this._runningMinBar=this.currentBar-n)}t>=this._runningMax&&(this._runningMax=t,this._runningMaxBar=this.currentBar),e<=this._runningMin&&(this._runningMin=e,this._runningMinBar=this.currentBar);var a=(r-(this.currentBar-this._runningMaxBar))/r*100;o.set(a);var l=(r-(this.currentBar-this._runningMinBar))/r*100;i.set(l)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.Aroon=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"Momentum"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="Momentum",this.period=14,this._isOverlay=!1,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.indicatorTheme.line1.strokeColor,0)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=0!==this.currentBar?this.input.get(0)-this.input.get(Math.min(this.currentBar,this.period)):0;t.set(e)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.Momentum=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(r){var t,e=(t=r.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"Stochastics"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"periodD",{get:function(){return this.getParameterValue(r.IndicatorParam.PCT_D_PERIODS)},set:function(t){this.setParameterValue(r.IndicatorParam.PCT_D_PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"periodK",{get:function(){return this.getParameterValue(r.IndicatorParam.PCT_K_PERIODS)},set:function(t){this.setParameterValue(r.IndicatorParam.PCT_K_PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"smooth",{get:function(){return this.getParameterValue(r.IndicatorParam.SMOOTH)},set:function(t){this.setParameterValue(r.IndicatorParam.SMOOTH,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="Stochastics",this.periodD=7,this.periodK=14,this.smooth=3,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line2.strokeColor,"StochasticsD"),this.addPlot(this.indicatorTheme.line3.strokeColor,"StochasticsK"),this.addLine(this.levelsTheme.line1.strokeColor,20),this.addLine(this.levelsTheme.line1.strokeColor,80)},i.prototype.setConfigure=function(){this._den=new r.TADataSeries("den",this),this._nom=new r.TADataSeries("nom",this),this._fastK=new r.TADataSeries("fastK",this),this._min=this.MIN(this.low,this.periodK),this._max=this.MAX(this.high,this.periodK),this._smaFastK=this.SMA(this._fastK,this.smooth),this._k=this.values.get("StochasticsK"),this._d=this.values.get("StochasticsD"),this._smaK=this.SMA(this._k,this.periodD)},i.prototype.onBarUpdate=function(){var t=this._min.values.get(0).get(0),e=this.close.get(0)-t;this._nom.set(e);var i,o=this._max.values.get(0).get(0)-t;this._den.set(o),i=0===r.JsUtil.approxCompare(this._den.get(0),0)?0===this.currentBar?50:this._fastK.get(1):Math.min(100,Math.max(0,100*this._nom.get(0)/this._den.get(0))),this._fastK.set(i),this._k.set(this._smaFastK.values.get(0).get(0)),this._d.set(this._smaK.values.get(0).get(0))},i);function i(){return null!==t&&t.apply(this,arguments)||this}r.Stochastics=e,r.Indicator.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(r){var t,e=(t=r.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"StochasticsFast"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"periodD",{get:function(){return this.getParameterValue(r.IndicatorParam.PCT_D_PERIODS)},set:function(t){this.setParameterValue(r.IndicatorParam.PCT_D_PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"periodK",{get:function(){return this.getParameterValue(r.IndicatorParam.PCT_K_PERIODS)},set:function(t){this.setParameterValue(r.IndicatorParam.PCT_K_PERIODS,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="StochasticsFast",this.periodD=3,this.periodK=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line2.strokeColor,"StochasticsD"),this.addPlot(this.indicatorTheme.line3.strokeColor,"StochasticsK"),this.addLine(this.levelsTheme.line1.strokeColor,20),this.addLine(this.levelsTheme.line1.strokeColor,80)},i.prototype.setConfigure=function(){this._den=new r.TADataSeries("den",this),this._nom=new r.TADataSeries("nom",this),this._min=this.MIN(this.low,this.periodK),this._max=this.MAX(this.high,this.periodK),this._k=this.values.get("StochasticsK"),this._d=this.values.get("StochasticsD"),this._smaK=this.SMA(this._k,this.periodD)},i.prototype.onBarUpdate=function(){var t=this._min.values.get(0).get(0),e=this.close.get(0)-t;this._nom.set(e);var i,o=this._max.values.get(0).get(0)-t;this._den.set(o),i=0===r.JsUtil.approxCompare(this._den.get(0),0)?0===this.currentBar?50:this._k.get(1):Math.min(100,Math.max(0,100*this._nom.get(0)/this._den.get(0))),this._k.set(i),this._d.set(this._smaK.values.get(0).get(0))},i);function i(){return null!==t&&t.apply(this,arguments)||this}r.StochasticsFast=e,r.Indicator.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"MAEnvelopes"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"envelopePercentage",{get:function(){return this.getParameterValue(e.IndicatorParam.ENVELOPE_PERCENTAGE)},set:function(t){this.setParameterValue(e.IndicatorParam.ENVELOPE_PERCENTAGE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maType",{get:function(){return this.getParameterValue(e.IndicatorParam.MA_TYPE)},set:function(t){this.setParameterValue(e.IndicatorParam.MA_TYPE,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="MAEnvelopes",this.period=14,this.envelopePercentage=1.5,this.maType=2,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this._isOverlay=!0,this.addPlot(this.indicatorTheme.line2.strokeColor,"Upper"),this.addPlot(this.indicatorTheme.line1.strokeColor,"Middle"),this.addPlot(this.indicatorTheme.line3.strokeColor,"Lower")},o.prototype.setConfigure=function(){this._ema=this.EMA(this.input,this.period),this._hma=this.HMA(this.input,this.period),this._sma=this.SMA(this.input,this.period),this._tma=this.TMA(this.input,this.period),this._tema=this.TEMA(this.input,this.period),this._wma=this.WMA(this.input,this.period),this._variable=this.VMA(this.input,this.period),this._wws=this.WWS(this.input,this.period),this._vidya=this.VIDYA(this.input,this.period)},o.prototype.onBarUpdate=function(){var t=0,e=this.values.get("Middle"),i=this.values.get("Upper"),o=this.values.get("Lower");switch(this.maType){case 0:t=this._ema.values.get(0).get(0),e.set(t);break;case 1:t=this._hma.values.get(0).get(0),e.set(t);break;case 2:t=this._sma.values.get(0).get(0),e.set(t);break;case 3:t=this._tma.values.get(0).get(0),e.set(t);break;case 4:t=this._tema.values.get(0).get(0),e.set(t);break;case 5:t=this._wma.values.get(0).get(0),e.set(t);break;case 6:t=this._variable.values.get(0).get(0),e.set(t);break;case 7:t=this._wws.values.get(0).get(0),e.set(t);break;case 8:t=this._vidya.values.get(0).get(0),e.set(t)}var r=t+t*this.envelopePercentage/100,n=t-t*this.envelopePercentage/100;i.set(r),o.set(n)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.MAEnvelopes=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"NBarsDown"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"barCount",{get:function(){return this.getParameterValue(e.IndicatorParam.BAR_COUNT)},set:function(t){this.setParameterValue(e.IndicatorParam.BAR_COUNT,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="NBarsDown",this.period=14,this.barCount=3,this._isOverlay=!1,this.barDown=!0,this.lowerHigh=!0,this.lowerLow=!0,this.addPlot(this.indicatorTheme.line3.strokeColor,this.name,e.HistogramPlot.Style.COLUMN)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name);if(this.currentBar<this.barCount)t.set(0);else{for(var e=!1,i=0;i<this.barCount+1;i++){if(i===this.barCount){e=!0;break}if(!(this.close.get(i)<this.close.get(i+1)))break;if(this.barDown&&!(this.close.get(i)<this.open.get(i)))break;if(this.lowerHigh&&!(this.high.get(i)<this.high.get(i+1)))break;if(this.lowerLow&&!(this.low.get(i)<this.low.get(i+1)))break}var o=e?1:0;t.set(o)}},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.NBarsDown=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"VolumeUpDown"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="VolumeUpDown",this._isOverlay=!1,this.addPlot("green","VolumeUp",e.HistogramPlot.Style.COLUMN),this.addPlot("red","VolumeDown",e.HistogramPlot.Style.COLUMN),this.addLine(this.levelsTheme.line5.strokeColor,0)},o.prototype._getLineParametersKeys=function(t){switch(t){case 0:return[e.IndicatorParam.LINE_COLOR,e.IndicatorParam.LINE_ENABLED];case 1:return[e.IndicatorParam.LINE2_COLOR,e.IndicatorParam.LINE2_ENABLED];case 2:return[e.IndicatorParam.LINE3_COLOR,e.IndicatorParam.LINE3_ENABLED];case 3:return[e.IndicatorParam.LINE4_COLOR,e.IndicatorParam.LINE4_ENABLED];case 4:return[e.IndicatorParam.LINE5_COLOR,e.IndicatorParam.LINE5_ENABLED]}},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t=this.values.get("VolumeUp"),e=this.values.get("VolumeDown");this.close.get(0)>=this.open.get(0)?(e.set(null),t.set(this.volume.get(0))):(t.set(null),e.set(this.volume.get(0)))},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.VolumeUpDown=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"NBarsUp"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"barCount",{get:function(){return this.getParameterValue(e.IndicatorParam.BAR_COUNT)},set:function(t){this.setParameterValue(e.IndicatorParam.BAR_COUNT,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="NBarsUp",this.period=14,this._isOverlay=!1,this.barCount=3,this.barUp=!0,this.higherHigh=!0,this.higherLow=!0,this.addPlot(this.indicatorTheme.histogram.color,this.name,e.HistogramPlot.Style.COLUMN)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name);if(this.currentBar<this.barCount)t.set(0);else{for(var e=!1,i=0;i<this.barCount+1;i++){if(i===this.barCount){e=!0;break}if(!(this.close.get(i)>this.close.get(i+1)))break;if(this.barUp&&!(this.close.get(i)>this.open.get(i)))break;if(this.higherHigh&&!(this.high.get(i)>this.high.get(i+1)))break;if(this.higherLow&&!(this.low.get(i)>this.low.get(i+1)))break}var o=e?1:0;t.set(o)}},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.NBarsUp=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"LogChange"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="LogChange",this.period=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t,e,i=this.values.get(this.name);0!==this.currentBar&&(e=0<(t=Math.abs(this.close.get(0)-this.close.get(1)))?Math.log(t):0,i.set(e))},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.LogChange=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"Bollinger"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"numStdDev",{get:function(){return this.getParameterValue(e.IndicatorParam.STANDARD_DEVIATIONS)},set:function(t){this.setParameterValue(e.IndicatorParam.STANDARD_DEVIATIONS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="Bollinger",this.period=14,this.numStdDev=2,this._isOverlay=!0,this.addPlot(this.indicatorTheme.line2.strokeColor,"UpperBand"),this.addPlot(this.indicatorTheme.line1.strokeColor,"MiddleBand"),this.addPlot(this.indicatorTheme.line3.strokeColor,"LowerBand")},o.prototype.setConfigure=function(){this._sma=this.SMA(null,this.period),this._stdDev=this.StdDev(null,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get("UpperBand"),e=this.values.get("MiddleBand"),i=this.values.get("LowerBand"),o=this._sma.values.get("SMA"),r=this._stdDev.values.get("StdDev"),n=o.get(0)+this.numStdDev*r.get(0),a=o.get(0)-this.numStdDev*r.get(0);t.set(n),e.set(o.get(0)),i.set(a)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.Bollinger=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(s){var t,e=(t=s.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"AroonOscillator"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"period",{get:function(){return this.getParameterValue(s.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(s.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="AroonOscillator",this.period=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line1.strokeColor,0)},i.prototype.setConfigure=function(){},i.prototype.onBarUpdate=function(){var t,e=this.values.get(this.name);if(0===this.currentBar)t=0;else{for(var i=Math.min(this.period,this.currentBar),o=-1,r=-1,n=Number.MIN_VALUE,a=Number.MAX_VALUE,l=i;0<=l;l--)0<=s.JsUtil.approxCompare(this.high.get(i-l),n)&&(n=this.high.get(i-l),o=this.currentBar-i+l),s.JsUtil.approxCompare(this.low.get(i-l),a)<=0&&(a=this.low.get(i-l),r=this.currentBar-i+l);t=(i-(this.currentBar-o))/i*100-(i-(this.currentBar-r))/i*100}e.set(t)},i);function i(){return null!==t&&t.apply(this,arguments)||this}s.AroonOscillator=e,s.Indicator.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){var e,i=(e=t.Indicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"TypicalPrice"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="TypicalPrice",this._isOverlay=!0,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.typical.get(0);t.set(e)},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.TypicalPrice=i,t.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){var e,i=(e=t.Indicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"MedianPrice"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="MedianPrice",this._isOverlay=!0,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.median.get(0);t.set(e)},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.MedianPrice=i,t.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){var e,i=(e=t.Indicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"WeightedClose"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="WeightedClose",this.period=14,this._isOverlay=!0,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=(this.high.get(0)+this.low.get(0)+2*this.close.get(0))/4;t.set(e)},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.WeightedClose=i,t.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"SwingIndex"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"limitValue",{get:function(){return this.getParameterValue(e.IndicatorParam.LIMIT_VALUE)},set:function(t){this.setParameterValue(e.IndicatorParam.LIMIT_VALUE,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="SwingIndex",this.limitValue=.5,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t,e=this.values.get(this.name);if(this.limitValue<=0)return null;this._oy=this.open.get(1),this._ot=this.open.get(0),this._ht=this.high.get(0),this._lt=this.low.get(0),this._cy=this.close.get(1),this._ct=this.close.get(0),!(Math.abs(this._ht-this._cy)>Math.abs(this._lt-this._cy))&&Math.abs(this._lt-this._cy)>Math.abs(this._ht-this._cy)?this._k=Math.abs(this._lt-this._cy):this._k=Math.abs(this._ht-this._cy),this._a=Math.abs(this._ht-this._cy),this._b=Math.abs(this._lt-this._cy),this._c=Math.abs(this._ht-this._lt),this._a>this._b&&this._a>this._c?this._r=Math.abs(this._ht-this._cy)-.5*Math.abs(this._lt-this._cy)+.25*Math.abs(this._cy-this._oy):this._b>this._a&&this._b>this._c?this._r=Math.abs(this._lt-this._cy)-.5*Math.abs(this._ht-this._cy)+.25*Math.abs(this._cy-this._oy):this._c>this._a&&this._c>this._b&&(this._r=Math.abs(this._ht-this._lt)+.25*Math.abs(this._cy-this._oy)),t=0<this._r&&0<this.limitValue?50*(this._ct-this._cy+.5*(this._ct-this._ot)+.25*(this._cy-this._oy))/this._r*this._k/this.limitValue:0,e.set(t)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.SwingIndex=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){var e,i=(e=t.Indicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"ElderThermometer"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="ElderThermometer",this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t,e,i,o,r,n;this.currentBar<1||(t=this.values.get(this.name),e=this.volume,i=this.high,o=Math.abs(i.get(0)-i.get(1)),r=Math.abs(e.get(1)-e.get(0)),n=Math.max(o,r),t.set(n))},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.ElderThermometer=i,t.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var i,t=(i=e.Indicator,__extends(o,i),Object.defineProperty(o,"className",{get:function(){return"HistoricalVolatility"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="HistoricalVolatility",this.period=14,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._stdSeries=new e.TADataSeries("stdSeries",this),this._stdDev=this.StdDev(this._stdSeries,this.period)},o.prototype.onBarUpdate=function(){var t,e,i=this.values.get(this.name),o=this.input;this.currentBar<2||(t=Math.log(o.get(0)/o.get(1)),this._stdSeries.set(t),e=this._stdDev.values.get(0).get(0)*Math.sqrt(this._barHistory),i.set(e))},o);function o(){var t=null!==i&&i.apply(this,arguments)||this;return t._barHistory=10,t}e.HistoricalVolatility=t,e.Indicator.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){var e,i=(e=t.Indicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"MarketFacilitationIndex"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="MarketFacilitationIndex",this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){this.values.get(this.name).set(this.high.get(0)-this.low.get(0)/(this.volume.get(0)/1e8))},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.MarketFacilitationIndex=i,t.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"PerformanceIndex"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="PerformanceIndex",this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t,e=this.values.get(this.name);this.currentBar<2?this._firstPrice=this.input.get(0):(t=(this.input.get(0)-this._firstPrice)/this._firstPrice*100,e.set(t))},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.PerformanceIndex=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"McGinleysDynamic"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="McGinleysDynamic",this.period=14,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this._isOverlay=!0,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._ema=this.EMA(this.input,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._ema.values.get(0),i=e.get(1)+(this.input.get(0)-e.get(1))/(this.input.get(0)/e.get(1)*125);t.set(i)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.McGinleysDynamic=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"LinearRegression"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="LinearRegression",this.period=14,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){if(!(this.currentBar<this.period+1)){for(var t=this.values.get(0),e=0,i=this.period,o=new Array(i),r=1,n=this.period,a=this.period+1;1<a;a--){var l=this.input.get(n);o[r]=l,r++,n--}for(var s=0,c=0,h=0,u=0,f=0,d=1;d<i+1;d++)s+=d,c+=o[d],h+=d*d,u+=o[d]*o[d],f+=o[d]*d;var p=f-s*c/(d=i),y=h-s*s/d,m=u-c*c/d;p*p&&y*m&&(e=p*p/(y*m)),t.set(e)}},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.LinearRegression=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"CenterOfGravity"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="CenterOfGravity",this.period=14,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){for(var t=this.values.get(this.name),e=0,i=0,o=1,r=this.period;0<r;r--)e+=this.input.get(r)*(o+1),i+=this.input.get(r),o++;t.set(e/i)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.CenterOfGravity=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"CoppockCurve"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="CoppockCurve",this.period=14,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._roc=this.ROC(this.input,14),this._roc1=this.ROC(this.input,11),this._series=new e.TADataSeries("series",this),this._wma=this.WMA(this._series,11)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._roc.values.get(0),i=this._roc1.values.get(0),o=e.get(0)+i.get(0);this._series.set(o);o=this._wma.values.get(0).get(0);t.set(o)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.CoppockCurve=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){var e,i=(e=t.Indicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"TrueRange"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="TrueRange",this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.high.get(0)-this.low.get(0),i=Math.abs(this.high.get(0)-this.close.get(0)),o=Math.abs(this.close.get(0)-this.low.get(0)),r=0;r<e&&(r=e),r<i&&(r=i),r<o&&(r=o),t.set(r)},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.TrueRange=i,t.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"LinearRegressionForecast"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="LinearRegressionForecast",this.period=14,this._isOverlay=!0,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){if(!(this.currentBar<this.period+1)){for(var t=this.values.get(0),e=this.period,i=new Array(e),o=1,r=this.period,n=this.period+1;1<n;n--){var a=this.input.get(r);i[o]=a,o++,r--}for(var l=0,s=0,c=0,h=0,u=1;u<e+1;u++)l+=u,s+=i[u],c+=u*u,h+=i[u]*u;var f=(h-l*s/(u=e))/(c-l*l/u),d=u*f+(1/u*s-parseInt(u/2,10)*f);t.set(d)}},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.LinearRegressionForecast=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"LinearRegressionSlope"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="LinearRegressionSlope",this.period=14,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){if(!(this.currentBar<this.period+1)){for(var t=this.values.get(0),e=this.period,i=new Array(e),o=1,r=this.period,n=this.period+1;1<n;n--){var a=this.input.get(r);i[o]=a,o++,r--}for(var l=0,s=0,c=0,h=0,u=1;u<e+1;u++)l+=u,s+=i[u],c+=u*u,h+=i[u]*u;var f=(h-l*s/(u=e))/(c-l*l/u);t.set(f)}},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.LinearRegressionSlope=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"LinearRegressionIntercept"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="LinearRegressionIntercept",this.period=14,this._isOverlay=!0,this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){if(!(this.currentBar<this.period+1)){for(var t=this.values.get(0),e=this.period,i=new Array(e),o=1,r=this.period,n=this.period+1;1<n;n--){var a=this.input.get(r);i[o]=a,o++,r--}for(var l=0,s=0,c=0,h=0,u=1;u<e+1;u++)l+=u,s+=i[u],c+=u*u,h+=i[u]*u;var f=(h-l*s/(u=e))/(c-l*l/u),d=1/u*s-parseInt(u/2,10)*f;t.set(d)}},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.LinearRegressionIntercept=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"HighLowBands"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="HighLowBands",this.period=14,this._isOverlay=!0,this.addPlot(this.indicatorTheme.line2.strokeColor,"Upper"),this.addPlot(this.indicatorTheme.line1.strokeColor,"Middle"),this.addPlot(this.indicatorTheme.line3.strokeColor,"Lower")},o.prototype.setConfigure=function(){this._vidyaHigh=this.VIDYA(this.high,this.period),this._vidyaClose=this.VIDYA(this.close,this.period),this._vidyaLow=this.VIDYA(this.low,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get("Upper"),e=this.values.get("Middle"),i=this.values.get("Lower"),o=this._vidyaHigh.values.get(0),r=this._vidyaClose.values.get(0),n=this._vidyaLow.values.get(0);t.set(o.get(0)),e.set(r.get(0)),i.set(n.get(0))},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.HighLowBands=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"ElderRay"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maType",{get:function(){return this.getParameterValue(e.IndicatorParam.MA_TYPE)},set:function(t){this.setParameterValue(e.IndicatorParam.MA_TYPE,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="ElderRay",this.period=14,this.maType=2,this.addPlot(this.indicatorTheme.line2.strokeColor,"BullPower"),this.addPlot(this.indicatorTheme.line3.strokeColor,"BearPower")},o.prototype.setConfigure=function(){this._ema=this.EMA(this.input,this.period),this._hma=this.HMA(this.input,this.period),this._sma=this.SMA(this.input,this.period),this._tma=this.TMA(this.input,this.period),this._tema=this.TEMA(this.input,this.period),this._wma=this.WMA(this.input,this.period),this._variable=this.VMA(this.input,this.period),this._wws=this.WWS(this.input,this.period),this._vidya=this.VIDYA(this.input,this.period)},o.prototype.onBarUpdate=function(){var t=0,e=this.values.get("BullPower"),i=this.values.get("BearPower");switch(this.maType){case 0:t=this._ema.values.get(0).get(0);break;case 1:t=this._hma.values.get(0).get(0);break;case 2:t=this._sma.values.get(0).get(0);break;case 3:t=this._tma.values.get(0).get(0);break;case 4:t=this._tema.values.get(0).get(0);break;case 5:t=this._wma.values.get(0).get(0);break;case 6:t=this._variable.values.get(0).get(0);break;case 7:t=this._wws.values.get(0).get(0);break;case 8:t=this._vidya.values.get(0).get(0)}e.set(this.high.get(0)-t),i.set(t-this.low.get(0))},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.ElderRay=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(n){var t,e=(t=n.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"StochRSI"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(n.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(n.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"period",{get:function(){return this.getParameterValue(n.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(n.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="StochRSI",this.period=14,this.inputSeriesKind=n.DataSeriesSuffix.CLOSE,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line1.strokeColor,.8),this.addLine(this.levelsTheme.line2.strokeColor,.5),this.addLine(this.levelsTheme.line3.strokeColor,.2)},i.prototype.setConfigure=function(){this._rsi=this.RSI(this.input,this.period,1),this._min=this.MIN(this._rsi,this.period),this._max=this.MAX(this._rsi,this.period)},i.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._rsi.values.get(0).get(0),i=this._min.values.get(0).get(0),o=this._max.values.get(0).get(0),r=n.JsUtil.equals(e,i)||n.JsUtil.equals(o,i)?0:(e-i)/(o-i);t.set(r)},i);function i(){return null!==t&&t.apply(this,arguments)||this}n.StochRSI=e,n.Indicator.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"DeviationToMA"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="DeviationToMA",this.period=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){var t,e,i=this.values.get(this.name);0===this.currentBar||0!==(t=this.getAverage(this.close,this.currentBar))&&(e=(this.close.get(0)-t)/t,i.set(e))},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.DeviationToMA=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(s){var t,e=(t=s.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"ChaikinMoneyFlow"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"period",{get:function(){return this.getParameterValue(s.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(s.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="ChaikinMoneyFlow",this.period=21,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},i.prototype.setConfigure=function(){this._moneyFlow=new s.TADataSeries("moneyFlow",this),this._sumMoneyFlow=this.SUM(this._moneyFlow,this.period),this._sumVolume=this.SUM(this.volume,this.period)},i.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.close.get(0),i=this.low.get(0),o=this.high.get(0),r=this.volume.get(0),n=this._sumVolume.values.get(0),a=r*(e-i-(o-e))/(0===s.JsUtil.approxCompare(o-i,0)?1:o-i);this._moneyFlow.set(a);var l=100*this._sumMoneyFlow.values.get(0).get(0)/n.get(0);t.set(l)},i);function i(){return null!==t&&t.apply(this,arguments)||this}s.ChaikinMoneyFlow=e,s.Indicator.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"ChaikinVolatility"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maPeriod",{get:function(){return this.getParameterValue(e.IndicatorParam.MA_PERIOD)},set:function(t){this.setParameterValue(e.IndicatorParam.MA_PERIOD,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rocPeriod",{get:function(){return this.getParameterValue(e.IndicatorParam.RATE_OF_CHANGE)},set:function(t){this.setParameterValue(e.IndicatorParam.RATE_OF_CHANGE,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="ChaikinVolatility",this.maPeriod=10,this.rocPeriod=10,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._ema=this.EMA(this.Range(),this.maPeriod)},o.prototype.onBarUpdate=function(){var t=this.values.get(0),e=this._ema.values.get(0),i=e.get(Math.min(this.currentBar,this.rocPeriod)),o=0===this.currentBar?e.get(0):(e.get(0)-i)/i*100;o!==Number.NEGATIVE_INFINITY&&o!==Number.POSITIVE_INFINITY||(o=0),t.set(o)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.ChaikinVolatility=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(c){var t,e=(t=c.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"ChaikinOscillator"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"period",{get:function(){return this.getParameterValue(c.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(c.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fast",{get:function(){return this.getParameterValue(c.IndicatorParam.FAST)},set:function(t){this.setParameterValue(c.IndicatorParam.FAST,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"slow",{get:function(){return this.getParameterValue(c.IndicatorParam.SLOW)},set:function(t){this.setParameterValue(c.IndicatorParam.SLOW,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="ChaikinOscillator",this.period=14,this.fast=3,this.slow=10,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},i.prototype.setConfigure=function(){this._cummulative=new c.TADataSeries("Comulative",this),this._moneyFlow=new c.TADataSeries("MoneyFlow",this),this._emaFast=this.EMA(this._cummulative,this.fast),this._emaSlow=this.EMA(this._moneyFlow,this.slow)},i.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this.close.get(0),i=this.low.get(0),o=this.high.get(0),r=this.volume.get(0)*(e-i-(o-e))/(0===c.JsUtil.approxCompare(o-i,0)?1:o-i);this._moneyFlow.set(r);var n=r+(0===this.currentBar?0:this._cummulative.get(1));this._cummulative.set(n);var a=this._emaFast.values.get(0),l=this._emaSlow.values.get(0),s=a.get(0)-l.get(0);t.set(s)},i);function i(){return null!==t&&t.apply(this,arguments)||this}c.ChaikinOscillator=e,c.Indicator.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"PriceOscillator"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fast",{get:function(){return this.getParameterValue(e.IndicatorParam.FAST)},set:function(t){this.setParameterValue(e.IndicatorParam.FAST,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"slow",{get:function(){return this.getParameterValue(e.IndicatorParam.SLOW)},set:function(t){this.setParameterValue(e.IndicatorParam.SLOW,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"smooth",{get:function(){return this.getParameterValue(e.IndicatorParam.SMOOTH)},set:function(t){this.setParameterValue(e.IndicatorParam.SMOOTH,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="PriceOscillator",this.period=14,this.fast=12,this.slow=26,this.smooth=9,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line5.strokeColor,0)},o.prototype.setConfigure=function(){this._smoothEma=new e.TADataSeries("dmPlus",this),this._emaFast=this.EMA(null,this.fast),this._emaSlow=this.EMA(null,this.slow),this._emaSmooth=this.EMA(this._smoothEma,this.smooth)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._emaFast.values.get(0),i=this._emaSlow.values.get(0),o=e.get(0)-i.get(0);this._smoothEma.set(o);var r=this._emaSmooth.values.get(0).get(0);t.set(r)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.PriceOscillator=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"DonchianChannel"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="DonchianChannel",this.period=14,this._isOverlay=!0,this.addPlot(this.indicatorTheme.line2.strokeColor,"Upper"),this.addPlot(this.indicatorTheme.line1.strokeColor,"Middle"),this.addPlot(this.indicatorTheme.line3.strokeColor,"Lower")},o.prototype.setConfigure=function(){this._max=this.MAX(this.high,this.period),this._min=this.MIN(this.low,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get("Middle"),e=this.values.get("Upper"),i=this.values.get("Lower"),o=this._max.values.get(0),r=this._min.values.get(0);e.set(o.get(0)),i.set(r.get(0));var n=(o.get(0)+r.get(0))/2;t.set(n)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.DonchianChannel=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"KeyReversalDown"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="KeyReversalDown",this.period=1,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._max=this.MAX(this.high,this.period)},o.prototype.onBarUpdate=function(){var t,e=this.values.get(this.name),i=this._max.values.get(0);this.currentBar<this.period+1||(t=this.high.get(0)>i.get(1)&&this.close.get(0)<this.close.get(1)?1:0,e.set(t))},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.KeyReversalDown=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"KeyReversalUp"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="KeyReversalUp",this.period=1,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name)},o.prototype.setConfigure=function(){this._min=this.MIN(this.low,this.period)},o.prototype.onBarUpdate=function(){var t,e=this.values.get(this.name),i=this._min.values.get(0);this.currentBar<this.period+1||(t=this.low.get(0)<i.get(1)&&this.close.get(0)>this.close.get(1)?1:0,e.set(t))},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.KeyReversalUp=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(n){var t,e=(t=n.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"EasyOfMovement"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"period",{get:function(){return this.getParameterValue(n.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(n.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"smooth",{get:function(){return this.getParameterValue(n.IndicatorParam.SMOOTH)},set:function(t){this.setParameterValue(n.IndicatorParam.SMOOTH,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"volumeDivisor",{get:function(){return this.getParameterValue(n.IndicatorParam.VOLUME_DIVISOR)},set:function(t){this.setParameterValue(n.IndicatorParam.VOLUME_DIVISOR,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="EasyOfMovement",this.period=14,this.volumeDivisor=1e4,this.smooth=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line5.strokeColor,0)},i.prototype.setConfigure=function(){this._emv=new n.TADataSeries("dmPlus",this),this._ema=this.EMA(this._emv,this.smooth)},i.prototype.onBarUpdate=function(){var t,e,i,o,r=this.values.get(this.name);0!==this.currentBar&&(t=this.median.get(0)-this.median.get(1),e=this.volume.get(0)/this.volumeDivisor/(this.high.get(0)-this.low.get(0)),i=0===n.JsUtil.approxCompare(e,0)?0:t/e,this._emv.set(i),o=this._ema.values.get(0),r.set(o.get(1)))},i);function i(){return null!==t&&t.apply(this,arguments)||this}n.EasyOfMovement=e,n.Indicator.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"VolumeOscillator"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"fast",{get:function(){return this.getParameterValue(e.IndicatorParam.FAST)},set:function(t){this.setParameterValue(e.IndicatorParam.FAST,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"slow",{get:function(){return this.getParameterValue(e.IndicatorParam.SLOW)},set:function(t){this.setParameterValue(e.IndicatorParam.SLOW,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="VolumeOscillator",this.period=14,this._isOverlay=!1,this.fast=12,this.slow=26,this.addPlot(this.indicatorTheme.histogram.color,this.name,e.HistogramPlot.Style.COLUMN)},o.prototype.setConfigure=function(){this._smaFast=this.SMA(this.volume,this.fast),this._smaSlow=this.SMA(this.volume,this.slow)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._smaFast.values.get(0),i=this._smaSlow.values.get(0),o=e.get(0)-i.get(0);t.set(o)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.VolumeOscillator=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"WillamsR"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="WillamsR",this.period=14,this._isOverlay=!1,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line1.strokeColor,-25),this.addLine(this.levelsTheme.line1.strokeColor,-75)},o.prototype.setConfigure=function(){this._max=this.MAX(this.high,this.period),this._min=this.MIN(this.low,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get(this.name),e=this._max.values.get(0),i=this._min.values.get(0),o=-100*(e.get(0)-this.close.get(0))/(e.get(0)-i.get(0)==0?1:e.get(0)-i.get(0));t.set(o)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.WillamsR=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"KeltnerChannel"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"offsetMultiplier",{get:function(){return this.getParameterValue(e.IndicatorParam.OFFSET_MULTIPLIER)},set:function(t){this.setParameterValue(e.IndicatorParam.OFFSET_MULTIPLIER,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="KeltnerChannel",this.period=10,this.offsetMultiplier=1.5,this._isOverlay=!0,this.addPlot(this.indicatorTheme.line2.strokeColor,"Upper"),this.addPlot(this.indicatorTheme.line1.strokeColor,"Middle"),this.addPlot(this.indicatorTheme.line3.strokeColor,"Lower")},o.prototype.setConfigure=function(){this._diff=new e.TADataSeries("diffSeries",this),this._smaDiff=this.SMA(this._diff,this.period),this._smaTypical=this.SMA(this.typical,this.period)},o.prototype.onBarUpdate=function(){var t=this.values.get("Middle"),e=this.values.get("Upper"),i=this.values.get("Lower"),o=this.high.get(0)-this.low.get(0);this._diff.set(o);var r=this._smaTypical.values.get(0).get(0),n=this._smaDiff.values.get(0).get(0)*this.offsetMultiplier,a=r+n,l=r-n;t.set(r),e.set(a),i.set(l)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.KeltnerChannel=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(s){var t,e=(t=s.Indicator,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"UltimateOscillator"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fast",{get:function(){return this.getParameterValue(s.IndicatorParam.FAST)},set:function(t){this.setParameterValue(s.IndicatorParam.FAST,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"slow",{get:function(){return this.getParameterValue(s.IndicatorParam.SLOW)},set:function(t){this.setParameterValue(s.IndicatorParam.SLOW,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"intermediate",{get:function(){return this.getParameterValue(s.IndicatorParam.INTERMEDIATE)},set:function(t){this.setParameterValue(s.IndicatorParam.INTERMEDIATE,t)},enumerable:!0,configurable:!0}),i.prototype.setDefaults=function(){this.name="UltimateOscillator",this.fast=7,this.intermediate=14,this.slow=28,this.addPlot(this.indicatorTheme.line1.strokeColor,this.name),this.addLine(this.levelsTheme.line1.strokeColor,30),this.addLine(this.levelsTheme.line2.strokeColor,50),this.addLine(this.levelsTheme.line3.strokeColor,70)},i.prototype.setConfigure=function(){this._constant1=this.slow/this.fast,this._constant2=this.slow/this.intermediate,this._constant3=this._constant1+this._constant2+1,this._buyingPressure=new s.TADataSeries("buyingPressure",this),this._trueRange=new s.TADataSeries("trueRange",this),this._sumBpFast=this.SUM(this._buyingPressure,this.fast),this._sumBpIntermediate=this.SUM(this._buyingPressure,this.intermediate),this._sumBpSlow=this.SUM(this._buyingPressure,this.slow),this._sumTrFast=this.SUM(this._trueRange,this.fast),this._sumTrIntermediate=this.SUM(this._trueRange,this.intermediate),this._sumTrSlow=this.SUM(this._trueRange,this.slow)},i.prototype.onBarUpdate=function(){var t=this.values.get(this.name);if(0===this.currentBar)t.set(0);else{var e=this.high.get(0),i=this.low.get(0),o=this.close.get(0),r=this.close.get(1),n=o-Math.min(i,r);this._buyingPressure.set(n);var a=Math.max(Math.max(e-i,e-r),r-i);if(this._trueRange.set(a),s.JsUtil.equals(this._sumTrFast.values.get(0).get(0),0)||s.JsUtil.equals(this._sumTrIntermediate.values.get(0).get(0),0)||s.JsUtil.equals(this._sumTrSlow.values.get(0).get(0),0))return void t.set(t.get(1));var l=(this._sumBpFast.values.get(0).get(0)/this._sumTrFast.values.get(0).get(0)*this._constant1+this._sumBpIntermediate.values.get(0).get(0)/this._sumTrIntermediate.values.get(0).get(0)*this._constant2+this._sumBpSlow.values.get(0).get(0)/this._sumTrSlow.values.get(0).get(0))/this._constant3*100;t.set(l)}},i);function i(){return null!==t&&t.apply(this,arguments)||this}s.UltimateOscillator=e,s.Indicator.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){e.IchimokuColor={Tenka:"rgb(4, 150, 255)",Kijun:"rgb(153, 21, 21)",Chikou:"rgb(69, 153, 21)",SenkouA:"rgb(0, 128, 0)",SenkouB:"rgb(255, 0, 0)",BelowFill:"rgba(255, 0, 0, 0.5)",AboveFill:"rgba(46, 188, 3, 0.5)"},Object.freeze(e.IndicatorDataSeries);var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"Ichimoku"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"conversionLinePeriods",{get:function(){return this.getParameterValue(e.IndicatorParam.CONVERSION_PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.CONVERSION_PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"baseLinePeriods",{get:function(){return this.getParameterValue(e.IndicatorParam.BASE_PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.BASE_PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"loggingSpan2Periods",{get:function(){return this.getParameterValue(e.IndicatorParam.LOGIN_SPAN2_PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.LOGIN_SPAN2_PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"displacement",{get:function(){return this.getParameterValue(e.IndicatorParam.DISPLACEMENT)},set:function(t){this.setParameterValue(e.IndicatorParam.DISPLACEMENT,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="Ichimoku",this.conversionLinePeriods=9,this.baseLinePeriods=26,this.loggingSpan2Periods=52,this.displacement=26,this._isOverlay=!0,this.addPlot(e.IchimokuColor.Tenka,e.IchimokuDataSeriesNames.Tenka),this.addPlot(e.IchimokuColor.Kijun,e.IchimokuDataSeriesNames.Kijun),this.addPlot(e.IchimokuColor.Chikou,e.IchimokuDataSeriesNames.Chikou),this.addPlot(e.IchimokuColor.SenkouA,e.IchimokuDataSeriesNames.SenkouA),this.addPlot(e.IchimokuColor.SenkouB,e.IchimokuDataSeriesNames.SenkouB),this.addFillPlot(e.IchimokuDataSeriesNames.SenkouA,e.IchimokuDataSeriesNames.SenkouB,e.IchimokuColor.AboveFill,e.IchimokuColor.BelowFill)},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){for(var t=this.values.get("Tenkan Sen"),e=this.values.get("Kijun Sen"),i=this.values.get("Chikou Span"),o=this.values.get("Senkou Span A"),r=this.values.get("Senkou Span B"),n=this.high,a=this.low,l=this.close,s=this.conversionLinePeriods,c=this.baseLinePeriods,h=this.loggingSpan2Periods,u=a.get(0),f=n.get(0),d={chikouSpan:l.get(0),tenkanSen:null,kijunSen:null,senkouSpanB:null,senkouSpanA:null},p=0;p<h&&0<=this.currentBar-p;p++){var y=p+1,u=Math.min(u,a.value(this.currentBar-p)),f=Math.max(f,n.value(this.currentBar-p));d.tenkanSen=y===s?(u+f)/2:d.tenkanSen,d.kijunSen=y===c?(u+f)/2:d.kijunSen,d.senkouSpanB=y===h?(u+f)/2:d.senkouSpanB}d.senkouSpanA=null!==d.tenkanSen&&null!==d.kijunSen?(d.tenkanSen+d.kijunSen)/2:null,t.set(d.tenkanSen),e.set(d.kijunSen),i.set(d.chikouSpan),r.set(d.senkouSpanB),o.set(d.senkouSpanA)},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.Ichimoku=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(i){var t,e=(t=i.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"Supertrend"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(i.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(i.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"multiplier",{get:function(){return this.getParameterValue(i.IndicatorParam.OFFSET_MULTIPLIER)},set:function(t){this.setParameterValue(i.IndicatorParam.OFFSET_MULTIPLIER,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="Supertrend",this.period=7,this.multiplier=3,this._isOverlay=!0;var t=this.indicatorTheme.line2.strokeColor,e=this.indicatorTheme.line3.strokeColor;this.addPlot(t,"Upper"),this.addPlot(e,"Lower"),this.addLabelPlot(t,"Buy Signal",i.LabelPlotStyle.Tooltip,i.LabelPlotPosition.Bottom),this.addLabelPlot(e,"Sell Signal",i.LabelPlotStyle.Tooltip,i.LabelPlotPosition.Top)},o.prototype.setConfigure=function(){this._calculateSupertrend()},o.prototype.onBarUpdate=function(){var t=this.values.get("Upper"),e=this.values.get("Lower"),i=this.values.get("Buy Signal"),o=this.values.get("Sell Signal"),r=this._supertrend[this.currentBar]||NaN,n=this._getIsSell()||this._getIsSell(-1);this._isBuySignal=this._isSell&&!n,t.set(r),e.set(n?r:NaN),i.set(this._isBuySignal?"Buy":null),o.set(this._isSellSignal?"Sell":null),this._isSellSignal=!this._isSell&&n,this._isSell=n},o.prototype._calculateSupertrend=function(){this._supertrend=[];for(var t=this._chart.primaryBarDataSeries(),e=t.high.values,i=t.low.values,o=t.close.values,r=e.length,n=this._supertrend,a=0,l=0,s=0,c=0;c<r;c++){var h=this.period,u=this.multiplier,h=Math.min(c+1,h),f=0===c,d=e[c],p=i[c],y=o[c],m=o[c-1],_=n[c-1]||0,C=f?d-p:Math.max(d,m)-Math.min(p,m),b=f?C:(a*(h-1)+C)/h,g=(d+p)/2,S=u*b,v=g+S,w=g-S,P=v<l||l<m?v:l,k=s<w||m<s?w:s,x=void 0,x=_===l?y<=P?P:k:k<=y?k:P,a=b,l=P,s=k;n.push(x)}},o.prototype._getIsSell=function(t){void 0===t&&(t=0);for(var e=this.currentBar-t,i=this._supertrend,o=i[e],r=i[1+e],n=1;r<=o;){if(r<o)return!0;r=i[e+ ++n]}return!1},o);function o(){return null!==t&&t.apply(this,arguments)||this}i.Supertrend=e,i.Indicator.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.Indicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"RainbowOscillator"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"inputSeriesKind",{get:function(){return this.getParameterValue(e.IndicatorParam.SOURCE)},set:function(t){this.setParameterValue(e.IndicatorParam.SOURCE,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"period",{get:function(){return this.getParameterValue(e.IndicatorParam.PERIODS)},set:function(t){this.setParameterValue(e.IndicatorParam.PERIODS,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"lookback",{get:function(){return this.getParameterValue(e.IndicatorParam.LOOKBACK)},set:function(t){this.setParameterValue(e.IndicatorParam.LOOKBACK,t)},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="RainbowOscillator",this.inputSeriesKind=e.DataSeriesSuffix.CLOSE,this.period=2,this.lookback=10,this._isOverlay=!1,this.addPlot(this.indicatorTheme.histogram.color,"Upper RO",e.HistogramPlot.Style.COLUMN),this.addPlot(this.indicatorTheme.histogram.color2,"Lower RO",e.HistogramPlot.Style.COLUMN),this.addPlot(this.indicatorTheme.line2.strokeColor,"Upper RB"),this.addPlot(this.indicatorTheme.line3.strokeColor,"Lower RB")},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){for(var t=this.values.get("Upper RO"),e=this.values.get("Lower RO"),i=this.values.get("Upper RB"),o=this.values.get("Lower RB"),r=this.input,n=this.period,a=this.lookback,n=Math.min(this.currentBar+1,n),a=Math.min(this.currentBar+1,a),l=[],s=-1/0,c=1/0,h=-1/0,u=1/0,f=0,d=0;d<a+n-1;d++)l.push(r.get(d));for(d=0;d<a;d++){var p=(l=this._maSeries(l,n))[0],y=r.get(d),s=Math.max(s,p),c=Math.min(c,p),h=Math.max(h,y),u=Math.min(u,y);f+=p}f/=a;var m=h-u,_=m?(r.get(0)-f)/m*100:0,C=m?(s-c)/m*100:0;t.set(0<_?_:NaN),e.set(_<0?_:NaN),i.set(C),o.set(-C)},o.prototype._maSeries=function(t,e){for(var i=[],o=0;o<t.length;o++){for(var r=0,n=0;n<e;n++){r+=t[Math.min(this.currentBar,o+n)]}i.push(r/e)}return i},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.RainbowOscillator=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){var e,i=(e=t.AdvancedIndicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"Footprint"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="Footprint",this._isOverlay=!0,this.chart&&(this._addLineParameters(this._plots.length,"#3452F1",null,null),this._plots.push(new t.FootprintPlot))},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){this.values.get(this.name).set(this.close.get(0))},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.Footprint=i,t.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){var e,i=(e=t.AdvancedIndicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"VolumeProfile"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="VolumeProfile",this._isOverlay=!0,this.chart&&(this._addLineParameters(this._plots.length,"#3452F1",null,null),this._plots.push(new t.VolumeProfilePlot))},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){this.values.get(this.name).set(this.close.get(0))},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.VolumeProfile=i,t.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(v){var i,t=(i=v.AdvancedIndicator,__extends(e,i),Object.defineProperty(e,"className",{get:function(){return"CustomVolumeProfile"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"settings",{get:function(){return this._volumeProfilePlot.settings},set:function(t){this._volumeProfilePlot.settings=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isActive",{get:function(){return this._resizableElementPlot.isActive},enumerable:!0,configurable:!0}),e.prototype.setDefaults=function(){var b,t,g=this,S=this.chart;this.name="CustomVolumeProfile",this._isOverlay=!0,this.zIndex=2e3,S&&(this._addLineParameters(this._plots.length,"#3452F1",null,null),b=new v.VolumeProfilePlot({plotStyle:v.VolumeProfilePlot.Style.CUSTOM}),t=new v.ResizableElementPlot({getRects:function(){var t=g.projection,e=S.instrument,i=S.dateScale;g._loadStatePeriods();for(var o=b.getCustomPeriods(),r=i.columnWidth/2-.5,n=(t.yByValue(0)-t.yByValue(e.tickSize))/2-.5,a=[],l=0;l<o.length;l++){var s=o[l],c=s.id,h=s.startIndex,u=s.endIndex,f=s.high,d=s.low,p=t.xByRecord(h)-r,y=t.xByRecord(u)+r,m=t.yByValue(f)-n,_=t.yByValue(d)+n,C=new v.ResizableRect({id:c,left:p,top:m,width:y-p,height:_-m});a.push(C)}return a},handlers:{started:function(){g._isResizing=!0},continued:function(t){var e=g.projection,i=t.id,o=t.left,r=t.width,n=e.recordByX(o),a=e.recordByX(o+r);b.updateCustomPeriod({id:i,startIndex:n,endIndex:a})},finished:function(t){!0===g._isResizing&&(g._isResizing=!1,b.removePeriodsIfEmpty(),b.isEmpty&&g.chart.removeIndicators(g))}}}),this._resizableElementPlot=t,this._volumeProfilePlot=b,this._plots.push(this._volumeProfilePlot,this._resizableElementPlot))},e.prototype.start=function(){var t=this,e=this.chart,i=this._resizableElementPlot,o=this._volumeProfilePlot;e&&(e.on(v.PanelEvent.MOVE_CONTINUED,function(){t._isResizing=!0},this),e.on(v.MouseEvent.CLICK,function(){return t._isResizing?(t._isResizing=!1,o.removePeriodsIfEmpty(),void(o.isEmpty&&t.chart.removeIndicators(t))):void(t._selectedPeriodId?(delete t._selectedPeriodId,t._unsubscribe(),i.visible=!0):(i.visible=!1,t._selectedPeriodId=o.createCustomPeriod({startIndex:e.hoveredRecord})))},this),e.on(v.MouseEvent.MOVE,function(){t._selectedPeriodId&&o.updateCustomPeriod({id:t._selectedPeriodId,endIndex:e.hoveredRecord})},this))},e.prototype._unsubscribe=function(){var t=this.chart;t&&(t.off(v.MouseEvent.CLICK,this),t.off(v.MouseEvent.MOVE,this),t.off(v.PanelEvent.MOVE_CONTINUED,this))},e.prototype.setConfigure=function(){},e.prototype.update=function(){this._isResizing||i.prototype.update.call(this)},e.prototype.onBarUpdate=function(){this.values.get(this.name).set(this.close.get(0))},e.prototype.serialize=function(){var t=i.prototype.serialize.call(this);t.templateId=this.templateId;var e=this.projection;return t.periods=this._volumeProfilePlot.getCustomPeriods().map(function(t){return{startDate:e.dateByRecord(t.startIndex),endDate:e.dateByRecord(t.endIndex)}}),t},e.prototype.loadState=function(t){i.prototype.loadState.call(this,t),this._statePeriods=t.periods,this.templateId=t.templateId,this._loadStatePeriods()},e.prototype._loadStatePeriods=function(){if(this._statePeriods){var t=this.projection,e=this._volumeProfilePlot,i=this._statePeriods;if(Array.isArray(i)&&t&&e){for(var o=0,r=i;o<r.length;o++){var n,a=r[o];null!=a.startDate&&null!=a.endDate&&(n=e.createCustomPeriod({startIndex:t.recordByDate(new Date(a.startDate))}),e.updateCustomPeriod({endIndex:t.recordByDate(new Date(a.endDate)),id:n}))}this.chart.setNeedsUpdate(),this._statePeriods=null}}},e.prototype.destroy=function(){this._unsubscribe(),this._volumeProfilePlot=null,this._resizableElementPlot=null,i.prototype.destroy.call(this)},e);function e(){var t=null!==i&&i.apply(this,arguments)||this;return t._isResizing=!1,t}v.CustomVolumeProfile=t,v.Indicator.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.AdvancedIndicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"CompositeProfile"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){var t;this.name="CompositeProfile",this._isOverlay=!0,this.chart&&(this._addLineParameters(this._plots.length,"#3452F1",null,null),t=new e.VolumeProfilePlot({plotStyle:e.VolumeProfilePlot.Style.COMPOSITE}),this._plots.push(t))},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){this.values.get(this.name).set(this.close.get(0))},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.CompositeProfile=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){var t,i=(t=e.AdvancedIndicator,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"PriceStats"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){var t;this.name="PriceStats",this._isOverlay=!0,this.chart&&(this._addLineParameters(this._plots.length,"#3452F1",null,null),t=new e.VolumeProfilePlot({plotStyle:e.VolumeProfilePlot.Style.PRICE_STATS}),this._plots.push(t))},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){this.values.get(this.name).set(this.close.get(0))},o);function o(){return null!==t&&t.apply(this,arguments)||this}e.PriceStats=i,e.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){var e,i=(e=t.AdvancedIndicator,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"SessionStats"},enumerable:!0,configurable:!0}),o.prototype.setDefaults=function(){this.name="SessionStats",this._isOverlay=!0,this.chart&&(this._addLineParameters(this._plots.length,"#3452F1",null,null),this._plots.push(new t.SessionStatsPlot))},o.prototype.setConfigure=function(){},o.prototype.onBarUpdate=function(){this.values.get(this.name).set(this.close.get(0))},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.SessionStats=i,t.Indicator.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),__assign=this&&this.__assign||Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};!function(l){var s,t,e,i,o,r,c,n,a;(t=s=l.VolumeBreakdownPlot||(l.VolumeBreakdownPlot={})).Up="Up",t.Down="Down",(i=e=l.VolumeBreakdownDeltaType||(l.VolumeBreakdownDeltaType={})).BidAsk="bidAsk",i.UptickDowntick="uptickDowntick",(r=o=l.VolumeBreakdownType||(l.VolumeBreakdownType={})).Volume="volume",r.Ticks="ticks",r.Price="price",(n=c=l.VolumeBreakdownMode||(l.VolumeBreakdownMode={})).Delta="delta",n.DeltaBars="deltaBars",n.DeltaMomentum="deltaMomentum",n.BuyVolume="buyVolume",n.SellVolume="sellVolume",(a=l.VolumeBreakdownAccumulate||(l.VolumeBreakdownAccumulate={})).All="all";var h,u=(h=l.AdvancedIndicator,__extends(f,h),Object.defineProperty(f,"className",{get:function(){return"VolumeBreakdown"},enumerable:!0,configurable:!0}),f.prototype.serialize=function(){var t=h.prototype.serialize.call(this);return t.settings=this._settings,t},f.prototype.loadState=function(t){h.prototype.loadState.call(this,t),t&&t.settings&&(this.settings=t.settings)},f.prototype.setDefaults=function(){this.name="VolumeBreakdown",this._isOverlay=!1,this._removePlots=this._addPlots()},f.prototype.setConfigure=function(){var t=this._settings.general.avaragePeriod,e=t.enabled?t.value:1;this._delta=new l.TADataSeries("delta",this),this._vb=new l.TADataSeries("vb",this),this._sma=this.SMA(this._vb,e)},f.prototype.onBarUpdate=function(){var t,e,i,o,r,n,a,l;this._chart&&(e=(t=this._settings).general.mode,i=t.sizeFilter.sizeFilter,o=this.values.get(s.Up),r=this.values.get(s.Down),this._deltaModes.includes(e)&&this._delta.set(this._getDelta()),this._vb.set(this._getVb()),a=(n=this._sma.values.get(0)).get(0),e===c.DeltaBars&&(l=n.get(1),this.open.set(l),this.high.set(Math.max(l,a)),this.low.set(Math.min(l,a)),this.close.set(a)),0===a||i.enabled&&Math.abs(a)>i.value?(o.set(null),r.set(null)):0<a?(o.set(a),r.set(null)):(o.set(null),r.set(a)))},f.prototype.draw=function(){this._drawZeroLine()},f.prototype._handleSettings=function(t){var e=this._settings.general.avaragePeriod,i=t.general.avaragePeriod;this._settings=t;var o=i.enabled?i.value:1;return o!==(e.enabled?e.value:1)&&(this._sma=this.SMA(this._vb,o)),this._settingsHandled&&(this._removePlots=this._addPlots(),this.update(!0)),!0},f.prototype._addPlots=function(){var t=this._settings.general,e=t.mode,i=t.upFillColor,o=t.downFillColor;switch(this._removePlots.forEach(function(t){return t()}),e){case c.Delta:return[this.addPlot(i,s.Up,l.HistogramPlot.Style.COLUMN),this.addPlot(o,s.Down,l.HistogramPlot.Style.COLUMN)];case c.DeltaBars:return[this.addPlot(i,s.Up,l.HistogramPlot.Style.COLUMN),this.addPlot(o,s.Down,l.HistogramPlot.Style.COLUMN),this.addBarPlot()];case c.DeltaMomentum:return[this.addPlot(i,s.Up,l.HistogramPlot.Style.COLUMN),this.addPlot(o,s.Down,l.HistogramPlot.Style.COLUMN)];case c.BuyVolume:case c.SellVolume:return[this.addPlot(i,s.Up,l.HistogramPlot.Style.COLUMN)]}},f.prototype._getTheme=function(){return this.chart.theme.plot.bar.candle},f.prototype._getColor=function(){return this._settings.general.upFillColor},f.prototype._getVisible=function(t){return this._settings.general.mode===c.DeltaBars?t instanceof l.BarPlot:h.prototype._getVisible.call(this,t)},f.prototype._getHistogramTheme=function(t){var e,i=this._settings.general,o=i.upStrokeColor,r=i.downStrokeColor,n=h.prototype._getHistogramTheme.call(this,t),a=this.values.dataSeriesArray[t];if(!a)return n;switch(a.name){case s.Up:e=o;break;case s.Down:e=r}return e?__assign({},n,{line:{strokeEnabled:!0,width:1,strokeColor:e,lineStyle:l.LineStyle.SOLID}}):n},f.prototype._drawZeroLine=function(){var t,e,i,o,r,n,a,l=this._getVisiblePeriod(),s=l.startIndex,c=l.endIndex;c<=s||(t=this._settings.general.zeroLine).enabled&&(e=this.renderer,i=this.projection,o=this.chart.dateScale.columnWidth,(r=i.xByRecord(s))&&(r-=o/2),(n=i.xByRecord(c))&&(n+=o/2),a=i.yByValue(0),e.beginPath(),e.line(r,a,n,a),e.stroke(t.strokeTheme),e.closePath())},f.prototype._getVb=function(){switch(this._settings.general.mode){case c.Delta:return this._delta.get(0);case c.DeltaBars:return this._getDelta();case c.DeltaMomentum:return this._getDeltaMomentum();case c.BuyVolume:return this._getVolume(function(t){return t.askInfo});case c.SellVolume:return this._getVolume(function(t){return t.bidInfo})}},f.prototype._getDelta=function(){switch(this._settings.general.type){case o.Volume:return this._getValue(function(t){return t.askInfo.volume-t.bidInfo.volume});case o.Ticks:return this._getValue(function(t){return t.askInfo.tradesCount-t.bidInfo.tradesCount});case o.Price:return this._getValue(function(t){return t.askInfo.price-t.bidInfo.price})}},f.prototype._getDeltaMomentum=function(){var t=this._delta.get(0);if(!t)return t;for(var e=0<t,i=0,o=this._delta.get(++i);e?0<o:o<0;)t+=o,o=this._delta.get(++i);return t},f.prototype._getVolume=function(e){switch(this._settings.general.type){case o.Volume:return this._getValue(function(t){return e(t).volume});case o.Ticks:return this._getValue(function(t){return e(t).tradesCount});case o.Price:return this._getValue(function(t){return e(t).price})}},f.prototype._getValue=function(t){var e=this._settings.general.accumulate;if(!e.enabled)return this._getBarValue(t);var i=this.chart.dataManager.getDataSeries(l.DataSeriesSuffix.DATE).values,o=e.value!==a.All?l.Session.getPeriodStartIndex(i,e.value,this.currentBar-1):0;return this._getAccumulatedValue(o,t)},f.prototype._getAccumulatedValue=function(t,e){for(var i=this._getBarValue(e),o=this.currentBar-1,r=0;--o>=t;)i+=this._getBarValue(e,++r);return i},f);function f(){var t=null!==h&&h.apply(this,arguments)||this;return t._settings={general:{deltaType:e.BidAsk,type:o.Volume,mode:c.Delta,accumulate:{enabled:!1,value:l.SessionPeriodUnit.Day},avaragePeriod:{enabled:!1,value:3},zeroLine:{enabled:!0,strokeTheme:{width:1,strokeColor:"yellow",lineStyle:l.LineStyle.SOLID}},upFillColor:"green",upStrokeColor:"green",downFillColor:"red",downStrokeColor:"red"},sizeFilter:{sizeFilter:{enabled:!1,value:10}}},t._deltaModes=[c.Delta,c.DeltaBars,c.DeltaMomentum],t._removePlots=[],t}l.VolumeBreakdown=u,l.Indicator.register(u)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){var e,i,a,o;(i=e=t.ZigZagChangeUnit||(t.ZigZagChangeUnit={})).Points="points",i.Ticks="ticks",(o=a=t.ZigZagExtreme||(t.ZigZagExtreme={})).High="high",o.Low="low";var r,n=(r=t.AdvancedIndicator,__extends(l,r),l.prototype.setConfigure=function(){delete this._extreme,delete this._extremeValue,delete this._prevExtreme,delete this._prevExtremeValue,delete this._lastExtreme,delete this._lastExtremeValue,delete this._isUp,delete this._isDown},l.prototype._setExtreme=function(){var t=this._getMinChange(),e=this.high.get(0),i=this.low.get(0);if(1!==this.currentBar)this._lastExtreme===a.Low?e-this._lastExtremeValue>=t&&this._getIsHigh()?this._setExtremeData(a.High):this._setExtremeData(null):this._lastExtremeValue-i>=t&&this._getIsLow()?this._setExtremeData(a.Low):this._setExtremeData(null);else{for(var o=0;this.currentBar- --o<this.values.recordCount;){if(t<=this.high.get(o)-i)break}for(var r=0;this.currentBar- --r<this.values.recordCount;){if(t<=e-this.low.get(r))break}var n=o<r;this._setExtremeData(n?a.High:a.Low)}},l.prototype._setExtremeData=function(t){t?(this._extreme=t,this._extremeValue=t===a.High?this.high.get(0):this.low.get(0),this._prevExtreme=this._lastExtreme,this._prevExtremeValue=this._lastExtremeValue,this._lastExtreme=this._extreme,this._lastExtremeValue=this._extremeValue,this._isUp=t===a.High,this._isDown=t===a.Low):this._extreme&&(this._isUp=this._extreme===a.Low,this._isDown=this._extreme===a.High,this._extreme=null,this._extremeValue=null)},l.prototype._getChange=function(){var t=this._extreme?this._prevExtremeValue:this._lastExtremeValue;return null==t?0:this._isUp?this.high.get(0)-t:t-this.low.get(0)},l.prototype._getConvertedChange=function(){var t=this._getChange();return this._changeUnit===e.Ticks&&(t/=this.chart.instrument.tickSize),t},l.prototype._getMinChange=function(){return this._minChange*this.chart.instrument.tickSize},l.prototype._getIsHigh=function(){for(var t=this._getMinChange(),e=0,i=this.high.get(e);this.currentBar- --e<this.values.recordCount;){var o=this.high.get(e);if(i<o)return!1;if(o+t<=i)return!0}return!1},l.prototype._getIsLow=function(){for(var t=this._getMinChange(),e=0,i=this.low.get(e);this.currentBar- --e<this.values.recordCount;){var o=this.low.get(e);if(o<i)return!1;if(i<=o-t)return!0}return!1},l);function l(){return null!==r&&r.apply(this,arguments)||this}t.ZigZagBase=n}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),__assign=this&&this.__assign||Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};!function(p){var i,t=(i=p.ZigZagBase,__extends(e,i),Object.defineProperty(e,"className",{get:function(){return"ZigZag"},enumerable:!0,configurable:!0}),e.prototype.setDefaults=function(){this.name="ZigZag",this._isOverlay=!0,this._removePlots=this._addPlots()},e.prototype.onBarUpdate=function(){var t,e,i,o,r,n,a;this.currentBar&&this.chart&&(this._setExtreme(),e=(t=this._settings.parameters).showRealtimeSwing,i=t.minTicksRev,o=this.chart.instrument.tickSize,r=this.values.get(p.LabelPlotPosition.Top),n=this.values.get(p.LabelPlotPosition.Bottom),a=this.values.get("ZigZag"),this.currentBar===this.values.recordCount-1&&e&&this._getChange()>=i*o&&this._setExtremeData(this._lastExtreme===p.ZigZagExtreme.High?p.ZigZagExtreme.Low:p.ZigZagExtreme.High),r.set(this._extreme===p.ZigZagExtreme.High?this._getData():null),n.set(this._extreme===p.ZigZagExtreme.Low?this._getData():null),a.set(this._extreme))},e.prototype._handleSettings=function(t){var e=t.parameters,i=e.upStrokeColor,o=e.downStrokeColor,r=e.minChange,n=e.textColor,a=e.dataBoxBackground,l=e.dataBoxBorder,s=t.dataBox.fields.priceChange;this._settings=t,this._minChange=r,this._changeUnit=s.unit,this._labelPlotTheme={text:{fontFamily:"Open Sans",fontSize:12,fillColor:n},fill:{fillEnabled:a.enabled,fillColor:a.value},stroke:{strokeEnabled:l.enabled,width:1,strokeColor:l.value,lineStyle:p.LineStyle.SOLID}},this._zigZagPlotTheme={up:{width:1,strokeColor:i,lineStyle:p.LineStyle.SOLID},down:{width:1,strokeColor:o,lineStyle:p.LineStyle.SOLID}},this._settingsHandled&&(this._removePlots=this._addPlots(),this.update(!0))},e.prototype._addPlots=function(){var t=this._settings.parameters,e=t.showZigZagLine,i=t.dataBoxOffset,o=t.barWidthTextThreshold;this._removePlots.forEach(function(t){return t()});var r={offset:i,barWidthTextThreshold:o,forBars:!0},n=[this.addLabelPlot(p.LabelPlotPosition.Top,__assign({},r,{position:p.LabelPlotPosition.Top})),this.addLabelPlot(p.LabelPlotPosition.Bottom,__assign({},r,{position:p.LabelPlotPosition.Bottom}))];return e&&n.push(this.addZigZagPlot()),n},e.prototype.addZigZagPlot=function(){var t=this;if(this.chart){var e=new p.TADataSeries("ZigZag",this),i=new p.ZigZagPlot({dataSeries:e});return this._plots.push(i),this.values.add(e),function(){t._removePlot(i),t.values.remove("ZigZag")}}},e.prototype._getTheme=function(t,e){return t instanceof p.LabelPlot?this._labelPlotTheme:t instanceof p.ZigZagPlot?this._zigZagPlotTheme:i.prototype._getTheme.call(this,t,e)},e.prototype._getColor=function(){},e.prototype._getData=function(){var t,e,i,o=this._settings.dataBox,r=o.fields,n=r.delta,a=r.volume,l=r.price,s=r.priceChange,c=o.inverseSortingForDownSwing,h=this.high.get(0),u=this.low.get(0),f=(this.currentBar,this.values.recordCount,[]);n.enabled&&(t=void 0,0<(i=this._getBarValue(function(t){return t.askInfo.volume-t.bidInfo.volume}))?t=n.positiveTextColor:i<0&&(t=n.negativeTextColor),f.push([n.order,{value:""+i,textColor:t}])),a.enabled&&(i=this.volume.get(0),f.push([a.order,""+i])),l.enabled&&(i=this._extreme===p.ZigZagExtreme.High?h:u,f.push([l.order,i])),s.enabled&&(e=this._getConvertedChange(),i=s.unit===p.ZigZagChangeUnit.Points?e:""+e,f.push([s.order,i]));var d=this._extreme===p.ZigZagExtreme.Low&&c?function(t,e){return e[0]-t[0]}:function(t,e){return t[0]-e[0]};return f.sort(d).map(function(t){return t[1]})},e);function e(){var t=null!==i&&i.apply(this,arguments)||this;return t._settings={parameters:{showZigZagLine:!0,upStrokeColor:"green",downStrokeColor:"red",minChange:12,dataBoxOffset:5,barWidthTextThreshold:4,textColor:"#ffffff",dataBoxBackground:{enabled:!0,value:"#717171"},dataBoxBorder:{enabled:!0,value:"#717171"},showRealtimeSwing:!0,minTicksRev:10},dataBox:{fields:{delta:{enabled:!0,order:1,positiveTextColor:"green",negativeTextColor:"red"},volume:{enabled:!0,order:2},price:{enabled:!0,order:3},priceChange:{enabled:!0,order:4,unit:p.ZigZagChangeUnit.Points}},inverseSortingForDownSwing:!0}},t._removePlots=[],t}p.ZigZag=t,p.Indicator.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),__assign=this&&this.__assign||Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};!function(u){var f,t;(t=f=u.ZigZagOscillatorPlot||(u.ZigZagOscillatorPlot={})).Up="Up",t.Down="Down";var i,n=(i=u.IntlNumberFormat,__extends(e,i),Object.defineProperty(e.prototype,"mode",{set:function(t){this._mode=t},enumerable:!0,configurable:!0}),e.prototype.format=function(t){if(this._mode!==u.ZigZagChangeUnit.Ticks)return i.prototype.format.call(this,t);var e=this.chart.instrument;return(t/(null!=e&&null!=e.tickSize?e.tickSize:.25)).toFixed(0)},e);function e(t){var e=i.call(this)||this;return e.chart=t,e}u.ZigZagOscillatorFormatter=n;var o,r=(o=u.ZigZagBase,__extends(a,o),Object.defineProperty(a,"className",{get:function(){return"ZigZagOscillator"},enumerable:!0,configurable:!0}),a.prototype._initPanel=function(){var t=new n(this.chart);t.mode=this._settings.parameters.showChange.unit,this._panel.valueScale.formatter=t,this._panel.valueScale.calibrator.formater=t},a.prototype.loadState=function(t){o.prototype.loadState.call(this,t),t&&t.settings&&(this._settings=t.settings)},a.prototype.serialize=function(){var t=o.prototype.serialize.call(this);return t.settings=this._settings,t},a.prototype.setDefaults=function(){this.name="ZigZagOscillator",this._isOverlay=!1,this._removePlots=this._addPlots()},a.prototype.onBarUpdate=function(){var t,e,i,o,r,n,a,l,s,c,h;this.currentBar&&this.chart&&(this._setExtreme(),t=this._settings.parameters.showChange,e=this._isUp?this._getChange():-this._getChange(),i=this.values.get(f.Up),o=this.values.get(f.Down),i.set(this._isUp?e:null),o.set(this._isDown?e:null),t.enabled&&(r=this.values.get(u.LabelPlotPosition.Top),n=this.values.get(u.LabelPlotPosition.Bottom),a=this.currentBar===this.values.recordCount-1,l=this._extreme===u.ZigZagExtreme.High||a&&this._isUp,s=this._extreme===u.ZigZagExtreme.Low||a&&this._isDown,c=this._getConvertedChange(),h={value:e,label:this._changeUnit===u.ZigZagChangeUnit.Ticks?""+c:c},r.set(l?h:null),n.set(s?h:null)))},a.prototype.draw=function(){this._drawBands()},a.prototype._handleSettings=function(t){var e,i=t.parameters,o=i.minChange,r=i.showChange;return this._settings=t,this._minChange=o,this._changeUnit=r.unit,!this._panel||(e=this._panel.valueScale.formatter)instanceof n&&(e.mode=this._changeUnit),this._settingsHandled&&(this._removePlots=this._addPlots(),this.update(!0)),!0},a.prototype._addPlots=function(){var t=this._settings.parameters,e=t.barWidthTextThreshold,i=t.upFillColor,o=t.downFillColor,r=t.fillBarGaps,n=t.showChange;this._removePlots.forEach(function(t){return t()});var a,l=r?1:.5,s=[this.addPlot(i,f.Up,u.HistogramPlot.Style.COLUMN,l),this.addPlot(o,f.Down,u.HistogramPlot.Style.COLUMN,l)];return n.enabled&&(a={offset:4,barWidthTextThreshold:e},s.push(this.addLabelPlot(u.LabelPlotPosition.Top,__assign({},a,{position:u.LabelPlotPosition.Top})),this.addLabelPlot(u.LabelPlotPosition.Bottom,__assign({},a,{position:u.LabelPlotPosition.Bottom})))),s},a.prototype._getTheme=function(t,e){return t instanceof u.LabelPlot?this._labelPlotTheme:o.prototype._getTheme.call(this,t,e)},a.prototype._drawBands=function(){var t,e,i,o,r,n,a,l=this._getVisiblePeriod(),s=l.startIndex,c=l.endIndex;c<=s||(e=(t=this._settings).upperBand,i=t.lowerBand,o=this.projection,r=this.chart.dateScale.columnWidth,(n=o.xByRecord(s))&&(n-=r/2),(a=o.xByRecord(c))&&(a+=r/2),this._drawBand(e,n,a),this._drawBand(i,n,a))},a.prototype._drawBand=function(t,e,i){var o,r,n=t.strokeColor,a=t.top,l=t.bottom,s=this.renderer,c=this.projection,h=c.yByValue(a),u=c.yByValue(l);u<=h||(o=(h+u)/2,r=u-h,s.beginPath(),s.line(e,o,i,o),s.stroke({width:r,strokeColor:n}),s.closePath())},a);function a(){var t=null!==o&&o.apply(this,arguments)||this;return t._settings={parameters:{minChange:12,barWidthTextThreshold:4,upFillColor:"green",upStrokeColor:"green",downFillColor:"red",downStrokeColor:"red",fillBarGaps:!0,showChange:{enabled:!0,unit:u.ZigZagChangeUnit.Points}},upperBand:{strokeColor:"green",top:10,bottom:8},lowerBand:{strokeColor:"red",top:-8,bottom:-10}},t._labelPlotTheme={text:{fontFamily:"Open Sans",fontSize:12,fillColor:"#ffffff"},fill:{fillEnabled:!1},stroke:{strokeEnabled:!1}},t._removePlots=[],t}u.ZigZagOscillator=r,u.Indicator.register(r)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(i){"use strict";i.CrossHairType={NONE:"none",MARKERS:"markers",CROSS:"cross",CROSS_BARS:"crossBars",DOT:"dot"},Object.freeze(i.CrossHairType);var o,e=".scxCrossHair",t=(o=i.ChartComponent,__extends(r,o),Object.defineProperty(r.prototype,"crossHairType",{get:function(){return this._options.crossHairType},set:function(t){var e=this._options.crossHairType;e!==t&&(this._options.crossHairType=t,this._view.updateVisibility(),this.chart.fireValueChanged(i.ChartEvent.CROSS_HAIR_CHANGED,t,e))},enumerable:!0,configurable:!0}),r.prototype._subscribe=function(){var t=this;o.prototype._subscribe&&o.prototype._subscribe.call(this),this.chart.on(i.ChartEvent.THEME_CHANGED+e,function(){t.applyTheme()},this).on(i.ChartEvent.LOCALE_CHANGED+e,function(){t.update()},this).on(i.ChartEvent.TIME_INTERVAL_CHANGED+e,function(){t.update()},this)},r.prototype._unsubscribe=function(){this.chart.off(e,this),o.prototype._unsubscribe&&o.prototype._unsubscribe.call(this)},r.prototype.layout=function(){this._view.layout()},r.prototype.applyTheme=function(){this._view.applyTheme()},r.prototype.update=function(){this._view.updateMarkers(),this._view.updatePosition(!0)},r.prototype.show=function(){this.visible=!0,this._view.updatePosition(!0),this._view.updateVisibility(!0)},r.prototype.hide=function(){this.visible=!1,this._view.updateVisibility(!1)},r.prototype.saveState=function(){return i.JsUtil.clone(this._options)},r.prototype.loadState=function(t){this._options={},this.crossHairType=t&&t.crossHairType||i.CrossHairType.NONE},r.prototype.setPosition=function(t,e){this._view.setPosition(t,e)},r.prototype.handleMouseHoverGesture=function(t,e){switch(t.state){case i.GestureState.STARTED:this._view.updateVisibility(!0);break;case i.GestureState.FINISHED:this._view.updateVisibility(!1);break;case i.GestureState.CONTINUED:this.crossHairType!==i.CrossHairType.NONE&&this.setPosition(e.pointerPosition)}},r.prototype.destroy=function(){this._view.destroy(),o.prototype.destroy.call(this)},r);function r(t){var e=o.call(this,t)||this;return e._view=new i.CrossHairView(e),e.visible=!0,e.loadState(t),e.chart&&e._subscribe(),e}i.CrossHair=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(P){"use strict";var p={HOR_LINE:"scxCrossHairHorLine",VER_LINE:"scxCrossHairVerLine",DOT_CURSOR:"scxDotCursor",NOTE:"scxCrossHairMarker",DATE_MARKER:"scxCrossHairDateMarker",VALUE_MARKER:"scxCrossHairValueMarker",CROSS_HAIR:"scxCrossHair",CROSS_HAIR_CONTAINER:"scxCrossHairContainer",CROSS_HAIR_TRADING_BUTTON:"scxCrossHairTradingButton"};Object.freeze(p);var h,t=(h=P.HtmlComponent,__extends(c,h),Object.defineProperty(c.prototype,"chart",{get:function(){return this._crossHair.chart},enumerable:!0,configurable:!0}),c.prototype._createContainer=function(){return this.chart.rootDiv.scxAppend("div",p.CROSS_HAIR_CONTAINER)},c._applyMarkerTheme=function(t,e){t.scxTextStyle(e.text).scxFill(e.fill)},c._updateValueMarkerMetrics=function(t){var e=t.$control;e.text()||e.text("1"),t.halfHeight=e.height()/2},c._updateDateMarkerMetrics=function(t,e){var i=t.$control;i.text(e).width("auto");var o=Math.round(1.2*i.width());t.halfWidth=Math.round(o/2),i.width(o)},c.prototype._createValueMarker=function(){return{visible:!0,halfHeight:0,$control:this.container.scxAppend("span",[p.NOTE,p.VALUE_MARKER])}},c.prototype._createDateMarker=function(){return{visible:!0,halfWidth:0,$control:this.container.scxAppend("span",[p.NOTE,p.DATE_MARKER])}},c.prototype._createTradingButton=function(){return{visible:!0,halfHeight:0,$control:this.container.scxAppend("span",[p.NOTE,p.CROSS_HAIR_TRADING_BUTTON])}},c.prototype._createControls=function(){var t=this.container;this._controls={lines:{visible:!0,$horLine:t.scxAppend("div",p.HOR_LINE),$verLine:t.scxAppend("div",p.VER_LINE)},leftMarkers:[],rightMarkers:[],tradingButton:[],topMarker:this._createDateMarker(),bottomMarker:this._createDateMarker()},this.applyTheme(),this.updateVisibility(!1)},c.prototype._syncValueMarkers=function(){var t=this._controls.leftMarkers,e=this._controls.rightMarkers,i=this._controls.tradingButton,o=this.chart.valueScales,r=t.length-o.length;if(0<r)t.splice(-r,r),e.splice(-r,r),i.splice(-r,r);else if(r<0){for(var n=0;n<-r;n++)t.push(this._createValueMarker()),e.push(this._createValueMarker()),i.push(this._createTradingButton());this.applyTheme(),this.updateVisibility(!1),this._tradingButtonHandler()}},c.prototype.layout=function(){h.prototype.layout.call(this),this._controls||this._createControls(),this._syncValueMarkers();var t=this.chart,e=this._controls,i=t.chartPanelsContainer.panelsContentFrame;e.lines.$horLine.css("left",i.left).width(i.width),e.lines.$verLine.css("top",i.top).height(i.height);for(var o=t.valueScales,r=0;r<o.length;r++){var n=o[r].leftPanel.frame;n&&(e.leftMarkers[r].$control.css("left",n.left+1).outerWidth(n.width-2),e.tradingButton[r].$control.css("left",n.left-15).text("+").outerWidth(15));var a=o[r].rightPanel.frame;a&&(e.rightMarkers[r].$control.css("left",a.left+1).outerWidth(a.width-2),e.tradingButton[r].$control.css("left",a.left-15).text("+").outerWidth(15))}var l=t.dateScale,s=l.topPanel.frame;s&&e.topMarker.$control.css("top",s.top+1).outerHeight(s.height-1).css("line-height",s.height-2+"px");var c=l.bottomPanel.frame;c&&e.bottomMarker.$control.css("top",c.top+1).outerHeight(c.height-1).css("line-height",c.height-1+"px")},c.prototype.applyTheme=function(){var t=this.chart.theme.crossHair,e=this._controls;e.lines.$horLine.scxBorder("border-top",t.line),e.lines.$verLine.scxBorder("border-left",t.line);for(var i=0,o=e.leftMarkers;i<o.length;i++){var r=o[i];c._applyMarkerTheme(r.$control,t)}for(var n=0,a=e.rightMarkers;n<a.length;n++){r=a[n];c._applyMarkerTheme(r.$control,t)}for(var l=0,s=e.tradingButton;l<s.length;l++){r=s[l];c._applyMarkerTheme(r.$control,t)}c._applyMarkerTheme(e.topMarker.$control,t),c._applyMarkerTheme(e.bottomMarker.$control,t),this.updateMarkers()},c.prototype.update=function(){},c.prototype.updateVisibility=function(t){var e=this._controls;if(e){var i=this._crossHair.crossHairType,o=this.chart.rootDiv;!(t=this._crossHair.visible&&t&&i!==P.CrossHairType.NONE)||i!==P.CrossHairType.CROSS&&i!==P.CrossHairType.CROSS_BARS?o.removeClass(p.CROSS_HAIR):o.addClass(p.CROSS_HAIR),t&&i===P.CrossHairType.DOT?o.addClass(p.DOT_CURSOR):o.removeClass(p.DOT_CURSOR);for(var r=t&&i!==P.CrossHairType.NONE,n=this.chart.valueScales,a=0;a<n.length&&!(a>=e.leftMarkers.length);a++){var l=r&&n[a].leftPanelVisible,s=r&&n[a].rightPanelVisible;e.leftMarkers[a].visible=l,e.tradingButton[a].visible=l,e.rightMarkers[a].visible=s,e.tradingButton[a].visible=s,P.HtmlUtil.setVisibility(e.leftMarkers[a].$control,l),P.HtmlUtil.setVisibility(e.tradingButton[a].$control,l),P.HtmlUtil.setVisibility(e.rightMarkers[a].$control,s),P.HtmlUtil.setVisibility(e.tradingButton[a].$control,s)}var c=i===P.CrossHairType.CROSS||i===P.CrossHairType.CROSS_BARS,h=e.lines.visible=t&&c;P.HtmlUtil.setVisibility(e.lines.$horLine,h),P.HtmlUtil.setVisibility(e.lines.$verLine,h);var u=this.chart.dateScale,f=e.topMarker.visible=r&&u.topPanelVisible,d=e.bottomMarker.visible=r&&u.bottomPanelVisible;P.HtmlUtil.setVisibility(e.topMarker.$control,f),P.HtmlUtil.setVisibility(e.bottomMarker.$control,d)}},c.prototype.setPosition=function(t,e){this._position=t,e?this._positionAnimation.start():this.updatePosition()},c.prototype.updatePosition=function(t){if(this._positionAnimation){this._positionAnimation.stop();var e=this._position;if(e){var i=this.chart,o=i.findPanelAt(e.y);if(o){var r=i.valueScale.leftPanel,n=i.valueScale.rightPanel;if(e.x>o.frame.width-n.getWidth()||r.visible&&e.x<r.getWidth())this.updateVisibility(!1);else{var a,l,s,c,h,u,f=this._controls,d=this._prevPosition,p=this._crossHair.crossHairType;if(d.x===e.x&&!0!==t||(d.x=e.x,l=(a=i.dateScale).projection,p===P.CrossHairType.CROSS_BARS&&(e.x=l.xByRecord(l.recordByX(e.x,!0))),f.lines.visible&&f.lines.$verLine.css("left",e.x),s=f.topMarker,c=f.bottomMarker,(s.visible||c.visible)&&(h=l.dateByColumn(l.columnByX(e.x)),u=a.formatDate(h),this._updateDateMarker(s,u),this._updateDateMarker(c,u))),d.y!==e.y||!0===t){d.y=e.y,f.lines.visible&&f.lines.$horLine.css("top",e.y);for(var y=i.valueScales,m=e.y-o.frame.top-i.chartPanelsContainer.frame.top,_=0;_<y.length;_++){var C,b,g,S=f.leftMarkers[_],v=f.rightMarkers[_],w=f.tradingButton[_];(S.visible||v.visible)&&(b=(C=o.valueScales[_]).projection.valueByY(m),g=i.instrument.tickSize,b&&(this.markerValue=Math.round(b/g)*g,this._updateValueMarker(S,C.formatValue(b)),this._updateValueMarker(v,C.formatValue(b)),this._updateTradingButton(w,!1)))}}}}}}},c.prototype.updateMarkers=function(){var t=this._controls;if(t){for(var e=0,i=t.leftMarkers;e<i.length;e++){var o=i[e];c._updateValueMarkerMetrics(o)}for(var r=0,n=t.rightMarkers;r<n.length;r++){o=n[r];c._updateValueMarkerMetrics(o)}var a=this.chart.dateScale.formatDate(new Date(0));c._updateDateMarkerMetrics(t.topMarker,a),c._updateDateMarkerMetrics(t.bottomMarker,a)}},c.prototype._updateValueMarker=function(t,e){t.visible&&t.$control.text(e).css("top",this._position.y-t.halfHeight)},c.prototype._updateTradingButton=function(t,e){e?t.visible&&(t.$control.css("top",this._position.y-t.halfHeight-7),P.HtmlUtil.setVisibility(t.$control,t.visible)):P.HtmlUtil.setVisibility(t.$control,!1)},c.prototype._updateDateMarker=function(t,e){var i,o;t.visible&&(i=this.container.width(),o=this._position.x>i-t.halfWidth?i-2*t.halfWidth:this._position.x-t.halfWidth,t.$control.text(e).css("left",Math.max(o,0)))},c.prototype._tradingButtonHandler=function(){var t={crossHairView:this,tradingButton:this._controls.tradingButton};new P.UI.TradingCrossHairButton(t).setHandler()},c);function c(t){var e=h.call(this)||this;return e._position=null,e._prevPosition={},e._positionAnimation=new P.Animation({callback:e.updatePosition}),e._crossHair=t,e}P.CrossHairView=t}(StockChartX=StockChartX||{}),StockChartX=StockChartX||{};__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),__awaiter=this&&this.__awaiter||function(n,a,l,s){return new(l=l||Promise)(function(t,e){function i(t){try{r(s.next(t))}catch(t){e(t)}}function o(t){try{r(s.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(i,o)}r((s=s.apply(n,a||[])).next())})},__generator=this&&this.__generator||function(i,o){var r,n,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,n&&(a=n[2&e[0]?"return":e[0]?"throw":"next"])&&!(a=a.call(n,e[1])).done)return a;switch(n=0,a&&(e=[0,a.value]),e[0]){case 0:case 1:a=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,n=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(a=0<(a=l.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){l.label=e[1];break}if(6===e[0]&&l.label<a[1]){l.label=a[1],a=e;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(e);break}a[2]&&l.ops.pop(),l.trys.pop();continue}e=o.call(i,l)}catch(t){e=[6,t],n=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};!function(n){"use strict";var i,t=".scxLocalChartStateHandler",e=(i=n.ChartHandler,__extends(o,i),o.prototype._subscribe=function(){$(window).on("beforeunload"+t,this,this._onBeforeUnloadWindow)},o.prototype._unsubscribe=function(){$(window).off(t,this._onBeforeUnloadWindow)},o.prototype._onBeforeUnloadWindow=function(t){var i=this,e=t.data;e.autoSave&&e.save().catch(function(e){return __awaiter(i,void 0,void 0,function(){return __generator(this,function(t){return[2,n.UI.Notification.error(e.message,this.chart)]})})})},o.prototype.save=function(){return __awaiter(this,void 0,void 0,function(){var e,i,o;return __generator(this,function(t){switch(t.label){case 0:return(e=this.chart)?(i=this._generateKey(),o=JSON.stringify(e.saveState()),[4,(new n.LocalDataStore).save(i,o)]):[2];case 1:return t.sent(),[2]}})})},o.prototype.load=function(){return __awaiter(this,void 0,void 0,function(){var e,i,o,r;return __generator(this,function(t){switch(t.label){case 0:return(e=this.chart)?(i=this._generateKey(),[4,(new n.LocalDataStore).load(i)]):[2,!1];case 1:o=t.sent();try{r=JSON.parse(o)}catch(t){throw new Error("Chart state is corrupted.")}try{e.loadState(r)}catch(t){throw new Error("Load chart state failed: "+t)}return[2,!!o]}})})},o.prototype.clear=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return this.chart?(e=this._generateKey(),[4,(new n.LocalDataStore).clear(e)]):[2];case 1:return t.sent(),[2]}})})},o.prototype._generateKey=function(){return"chart|"+window.location.pathname},o);function o(t){var e=i.call(this,t&&t.chart)||this;return e.autoSave=!0,e.autoLoad=!0,t&&(null!=t.autoSave&&(e.autoSave=t.autoSave),null!=t.autoLoad&&(e.autoLoad=t.autoLoad)),e._subscribe(),e}n.LocalChartStateHandler=e}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(n){"use strict";var e="scxFullWindow",a="scxFullScreen",i=".scxWindowModeHandler",l={FullscreenChanged:"scxFullscreenChanged",FullWindowChanged:"scxFullWindowChanged"};Object.freeze(l),n.WindowMode={NORMAL:"normal",FULL_SCREEN:"full-screen",FULL_WINDOW:"full-window"},Object.freeze(n.WindowMode);var o,t=(o=n.ChartHandler,__extends(r,o),Object.defineProperty(r.prototype,"mode",{get:function(){return this._mode},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"prevMode",{get:function(){return this._prevMode},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isInFullWindowMode",{get:function(){var t=this._mode;return t===n.WindowMode.FULL_WINDOW||t===n.WindowMode.FULL_SCREEN},enumerable:!0,configurable:!0}),r.prototype._subscribe=function(){var t=["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange",""].join(i+", ");$(document).on(t,this,this._onFullScreenChanged),$(window).on("resize"+i,this,this._onWindowResize)},r.prototype._unsubscribe=function(){$(document).off(i,this._onFullScreenChanged),$(window).off(i,this._onWindowResize)},r.prototype._onWindowResize=function(t){var e=t.data;e.isInFullWindowMode&&e.adjustFullWindowSize()},r.prototype._onFullScreenChanged=function(t){t.data._handleFullscreenChange(t)},r.prototype.setMode=function(t){if(this._mode!==t){this._prevMode=this._mode,this._mode=t;try{switch(t){case n.WindowMode.NORMAL:this._exitFullscreen(),this._exitFullWindow();break;case n.WindowMode.FULL_SCREEN:this._enterFullWindow(),this._enterFullscreen();break;case n.WindowMode.FULL_WINDOW:this._exitFullscreen(),this._enterFullWindow();break;default:throw new Error("$Unknown window mode: "+t)}this.chart.fireValueChanged(n.ChartEvent.WINDOW_MODE_CHANGED,t,this._prevMode)}catch(t){n.UI.Notification.error(t,this.chart)}}},r.prototype._enterFullscreen=function(){if(!n.HtmlUtil.isFullscreenEnabled())throw new Error("Fullscreen mode is not enabled.");var t=this.chart.container[0];this._isSelfRaisedEvent=!0,n.HtmlUtil.enterFullscreen(t),n.UI.HtmlContainer.instance.reset($(t)),$(document).trigger(l.FullscreenChanged,this.chart)},r.prototype._exitFullscreen=function(){this._isSelfRaisedEvent=!0,n.HtmlUtil.exitFullscreen(),$(document).trigger(l.FullscreenChanged,this.chart),$("body").removeClass(a),n.UI.HtmlContainer.instance.reset(),$("body").trigger("click")},r.prototype._handleFullscreenChange=function(t){if(this._isSelfRaisedEvent){this._isSelfRaisedEvent=!1;var e=$("body");return this.mode===n.WindowMode.FULL_SCREEN&&(e.addClass(a),this.adjustFullWindowSize()),void $(window).trigger(l.FullscreenChanged,this.chart)}var i,o,r;this.mode===n.WindowMode.FULL_SCREEN&&(i=!1,(o=$(t.target))&&$(o).is(this.chart.container)?i=!0:(r=n.Environment.browser)!==n.Browser.firefox&&r!==n.Browser.ie||(i=!(o=r===n.Browser.firefox?t.target.mozFullScreenElement:t.target.msFullscreenElement)),i&&this.setMode(this._prevMode||n.WindowMode.NORMAL))},r.prototype._enterFullWindow=function(){var t=this.chart;this._preFullWindowSize||(this._preFullWindowSize=t.cssSize),t.container.addClass(e),this.adjustFullWindowSize(),$(window).trigger(l.FullWindowChanged,t)},r.prototype._exitFullWindow=function(){var t=this.chart;t.container.removeClass(e),t.cssSize=this._preFullWindowSize,this._preFullWindowSize=null,$(window).trigger(l.FullWindowChanged,t),t.setNeedsUpdate()},r.prototype.adjustFullWindowSize=function(){var t=this.chart,e=t.container,i=t.scrollEnabled&&null!=t.scrollbar?t.scrollbar.outerHeight:0;e.outerWidth(window.innerWidth-3).outerHeight(window.innerHeight-3),t.size={width:e.innerWidth()-1,height:e.innerHeight()-t.rootDiv.position().top-1-i-42},t.setNeedsUpdate()},r);function r(t){var e=o.call(this,t)||this;return e._mode=n.WindowMode.NORMAL,e._subscribe(),e}n.WindowModeHandler=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";t.Key={SHIFT:16,CTRL:17,ALT:18};var i,e=".scxKeyboardHandler",o=(i=t.ChartHandler,__extends(r,i),r.prototype._subscribe=function(){$(window).on("keydown"+e,this,this._handleKeyDown)},r.prototype._unsubscribe=function(){$(window).off(e,this._handleKeyDown)},r.prototype._handleKeyDown=function(t){var e=t.data;e.chart.keyboardEventsEnabled&&(t.target!==document.activeElement||$(t.target).hasClass("modal-open")||$(t.target).hasClass("form-control")||e._handleKey(t))},r.prototype._handleKey=function(t){var e=t.ctrlKey||t.metaKey,i=this.chart;switch(t.keyCode){case 107:i.zoomEnabled&&(i.zoomOnPixels(.05*i.size.width),i.setNeedsUpdate(!0));break;case 109:i.zoomEnabled&&(i.zoomOnPixels(-.05*i.size.width),i.setNeedsUpdate(!0));break;case 37:i.scrollEnabled&&(i.scrollOnPixels(.05*i.size.width),i.setNeedsUpdate(!0));break;case 39:i.scrollEnabled&&(i.scrollOnPixels(-.05*i.size.width),i.setNeedsUpdate(!0));break;case 46:var o=i.selectedObject,r=o&&o.chartPanel;if(!r)return;o.tooltip.hide(),r.removeDrawings(o);break;case 67:if(!e)return;i._copyDrawing();break;case 86:if(!e)return;i._pasteDrawing();break;default:return}t.preventDefault()},r);function r(t){var e=i.call(this,t)||this;return e._subscribe(),e}t.KeyboardHandler=o}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(i){"use strict";var o,t=(o=i.ChartHandler,__extends(e,o),Object.defineProperty(e.prototype,"chartPanel",{get:function(){return this.chart.mainPanel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._spread.visible},set:function(t){this._spread.visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ask",{get:function(){return this._spread.ask},set:function(t){this._spread.ask=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bid",{get:function(){return this._spread.bid},set:function(t){this._spread.bid=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"theme",{get:function(){return this._spread.theme},set:function(t){this._spread.theme=t},enumerable:!0,configurable:!0}),e.prototype.layout=function(){var t=this.chartPanel,e=this._spread;this.visible&&!t.containsObject(e)?t.addObjects(e):!this.visible&&t.containsObject(e)&&t.removeObjects(e)},e);function e(t){var e=o.call(this,t.chart)||this;return e._spread=new i.Spread,e.ask=t.ask,e.bid=t.bid,e.theme=t.theme,e}i.SpreadHandler=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(s){"use strict";var i,t=(i=s.Control,__extends(e,i),Object.defineProperty(e.prototype,"highlightedColumns",{get:function(){return this._highlightedColumns},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chartPanel",{get:function(){return this._chart.mainPanel},enumerable:!0,configurable:!0}),e.prototype._initGestures=function(){return new s.GestureArray([new s.ClickGesture({handler:this._handleClickGesture,hitTest:this._hitTest,keys:[s.Key.CTRL]})],this)},e.prototype._handleClickGesture=function(t,e){var i=e.pointerPosition.x,o=this.chart,r=this.chartPanel.projection.recordByX(i),n=o.primaryBar(r);n&&(this._processBarDate(n.date),this.chartPanel.setNeedsUpdate())},e.prototype._processBarDate=function(t){var e=this._innerColumnIndex(t);-1===e?this._add({date:t}):this._remove(e)},e.prototype.add=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=this.chart,o=0,r=s.JsUtil.flattenArray(t);o<r.length;o++){var n,a=r[o],l=null;s.JsUtil.isNumber(a)||a instanceof Date?l=i.primaryBar(a):"object"==typeof a&&(l=a.date?a:"object"==typeof(n=a.column)&&n.date?n:i.primaryBar(n)),l&&-1===this._innerColumnIndex(l.date)&&this._add({date:l.date,theme:s.JsUtil.isNumber(a)?null:a.theme})}},e.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return this.chartPanel.removeObjects(this._highlightedColumns),void(this._highlightedColumns=[]);for(var i=this.chart,o=0,r=s.JsUtil.flattenArray(t);o<r.length;o++){var n=r[o],a="object"==typeof n&&n.date?n:i.primaryBar(n);if(!a)return;var l=this._innerColumnIndex(a.date);-1!==l&&this._remove(l)}},e.prototype._add=function(t){var e=new s.HighlightedColumn(t);this._highlightedColumns.push(e),this.chartPanel.addObjects(e),this.chart.fireValueChanged(s.ChartEvent.HIGHLIGHTED_COLUMN_ADDED,t.date)},e.prototype._remove=function(t){var e=this._highlightedColumns.splice(t,1)[0];this.chartPanel.removeObjects(e),this.chart.fireValueChanged(s.ChartEvent.HIGHLIGHTED_COLUMN_REMOVED,e.date)},e.prototype._innerColumnIndex=function(t){for(var e=0;e<this._highlightedColumns.length;e++)if(this._highlightedColumns[e].checkDate(t))return e;return-1},e.prototype._hitTest=function(t){return this.chartPanel.hitTest(t)},e.prototype.destroy=function(){for(var t=0,e=this._highlightedColumns;t<e.length;t++){e[t].destroy()}this._highlightedColumns=[]},e);function e(t){var e=i.call(this)||this;return e._highlightedColumns=[],e._visible=!0,e._chart=t,e}s.HighlightedColumnHandler=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(i){"use strict";var o,r={hours:0,minutes:0},t=(o=i.ChartHandler,__extends(e,o),Object.defineProperty(e.prototype,"time",{get:function(){return this._time},set:function(t){t.hours=24<t.hours||t.hours<0?0:t.hours,t.minutes=60<t.minutes||t.hours<0?0:t.minutes,this._time=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"theme",{get:function(){return this._theme},set:function(t){this._theme=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chartPanel",{get:function(){return this.chart.mainPanel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._breakLines.visible},set:function(t){this._breakLines.visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateFilter",{get:function(){return this._dateFilter},set:function(t){this._dateFilter=t},enumerable:!0,configurable:!0}),e.prototype.layout=function(){var t=this.chartPanel,e=this._breakLines;this.visible&&!t.containsObject(e)?t.addObjects(e):!this.visible&&t.containsObject(e)&&t.removeObjects(e)},e);function e(t){var e=o.call(this,t.chart)||this;return e._theme=t.theme||e.chart.theme.dateScale.breakLine.stroke,e._time=t.time||r,e._dateFilter=t.dateFilter,e._breakLines=new i.BreakLines({breakLinesHandler:e}),e}i.BreakLinesHandler=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(r){"use strict";var t,e=(t=r.Handler,__extends(i,t),i.prototype.saveImage=function(t,o){html2canvas(t,{onrendered:function(t){var e,i;o?o(t):t.msToBlob?navigator.msSaveBlob(t.msToBlob(),"Chart.png"):(e=document.createElement("a"),i=t.toDataURL().replace(/^data:image\/[^;]/,"data:application/octet-stream"),r.Environment.isIOS||r.Environment.isAndroid?(i=t.toDataURL(),e.target="_blank"):e.download="Chart.png",e.href=i,document.body.appendChild(e),e.click(),document.body.removeChild(e))}})},i);function i(){return null!==t&&t.apply(this,arguments)||this}r.SaveImageHandler=e}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var e,a=[{priceStyle:t.LinePriceStyle.className,columnWidth:0},{priceStyle:t.ColoredBarPriceStyle.className,columnWidth:2},{priceStyle:t.CandlePriceStyle.className,columnWidth:6},{priceStyle:t.CandlePriceStyle.className,columnWidth:1/0}],i=(e=t.ChartHandler,__extends(o,e),o.prototype.adopt=function(){if(this.enabled)for(var t=this.chart,e=t.dateScale.columnWidth,i=0,o=a.length;i<o-1;i++){var r=a[i],n=a[i+1];r.columnWidth<e&&e<n.columnWidth&&(t.priceStyleKind=r.priceStyle)}},o);function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.enabled=!1,t}t.SmartPriceStyleHandler=i}(StockChartX=StockChartX||{}),function(l){"use strict";l.ComparisonSource={OPEN:".open",HIGH:".high",LOW:".low",CLOSE:".close"},Object.freeze(l.ComparisonSource);var t=(Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panel",{get:function(){return this.chart.mainPanel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseSource",{get:function(){return this._options.baseSource||l.ComparisonSource.CLOSE},set:function(t){this._options.baseSource=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"instrumentsCompare",{get:function(){return this._instrumentsCompare},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"basePrice",{get:function(){return this._basePrice},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseIndex",{get:function(){return l.JsUtil.isNumber(this._options.baseIndex)?this._options.baseIndex:this.chart.firstVisibleIndex},set:function(t){this._options.baseIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readyLoadMoreHistory",{get:function(){return this.instrumentsCompare.every(function(t){return!1!==t.readyLoadMoreHistory})},enumerable:!0,configurable:!0}),e.prototype.compare=function(t,e,i){this._instrumentsCompare.push(new l.InstrumentCompare({instrumentComparisonHandler:this,instrument:t,source:e||this.baseSource,lineWidth:i.lineWidth,lineColor:i.lineColor,lineStyle:i.lineStyle})),this._applyPerCentValueScale()},e.prototype.cancelComparing=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=this._instrumentsCompare,o=0,r=0!==t.length?l.JsUtil.flattenArray(t):i.slice(0);o<r.length;o++){var n=r[o],a=i.indexOf(n);n.destroy(),this._instrumentsCompare.splice(a,1)}0===i.length&&this._cancelPerCentValueScale(),this.panel.update()},e.prototype._calculateDataSeries=function(){var t=this._chart,e=t.dataManager.findDataSeries(this.baseSource),i=t.firstVisibleIndex,o=t.lastVisibleIndex+1,r=e.valueAtIndex(this.baseIndex);this._basePrice=r;for(var n=0,a=this._instrumentsCompare;n<a.length;n++){a[n].calculateDataSeries(r,i,o)}},e.prototype._applyPerCentValueScale=function(){var t=this._chart.mainPanel.valueScale;t.calibrator instanceof l.PercentValueScaleCalibrator?t.calibrator.basePriceHolder=this:(this._options.prevValueScale=t.saveState(),t.calibrator=new l.PercentValueScaleCalibrator({basePriceHolder:this}))},e.prototype._cancelPerCentValueScale=function(){var t=this._chart.mainPanel.valueScale,e=this._options.prevValueScale;t.calibrator instanceof l.PercentValueScaleCalibrator&&(t.calibrator=l.ValueScaleCalibrator.deserialize(e.calibrator))},e.prototype._updateInstruments=function(){this._instrumentsCompare.forEach(function(t){return t.update()})},e.prototype.update=function(t){void 0===t&&(t=!1),t&&this._updateInstruments(),this._calculateDataSeries()},e.prototype._onTimeFrameChange=function(){this.instrumentsCompare.forEach(function(t){return t.onTimeFrameChange()})},e.prototype._onMoreHistoryRequested=function(){this.instrumentsCompare.sort(function(t,e){var i=t.instrument.symbol,o=e.instrument.symbol;return i<o?-1:o<i?1:0}).filter(function(t,e,i){var o=i[e-1];return!o||t.instrument.symbol!==o.instrument.symbol}).forEach(function(t){return t.onMoreHistoryRequested()})},e.prototype._updateHoverRecord=function(e){this.instrumentsCompare.forEach(function(t){return t.updateHoverRecord(e)})},e.prototype._subscribeEvents=function(){var e=this;this.chart.on(l.ChartEvent.TIME_FRAME_CHANGED,function(){return e._onTimeFrameChange()},this),this.chart.on(l.ChartEvent.MORE_HISTORY_REQUESTED,function(){return e._onMoreHistoryRequested()},this),this.chart.on(l.ChartEvent.HOVER_RECORD_CHANGED,function(t){return e._updateHoverRecord(t.value)},this)},e.prototype._unSubscribeEvents=function(){this.chart.off(l.ChartEvent.TIME_FRAME_CHANGED,this),this.chart.off(l.ChartEvent.MORE_HISTORY_REQUESTED,this),this.chart.off(l.ChartEvent.HOVER_RECORD_CHANGED,this)},e.prototype.saveState=function(){return this._options.instrumentsOptions=this.instrumentsCompare.map(function(t){return t.saveState()}),l.JsUtil.clone(this._options)},e.prototype.loadState=function(t){for(var e=0,i=(this._options=t).instrumentsOptions;e<i.length;e++){var o=i[e];this._instrumentsCompare.push(new l.InstrumentCompare(jQuery.extend({instrumentComparisonHandler:this},o)))}0<this.instrumentsCompare.length&&this._applyPerCentValueScale()},e.prototype.destroy=function(){this._unSubscribeEvents(),this.cancelComparing()},e);function e(t){this._chart=t,this._options={},this._instrumentsCompare=[],this._subscribeEvents()}l.InstrumentComparisonHandler=t}(StockChartX=StockChartX||{}),function(f){"use strict";var a="scxPanelTitleCaption",l="scxPanelTitleValue",s="scxIndicatorTitle",c="scxPanelTitleIcon",h="scxIndicatorRemoveIcon",d=".comparing",o=1,r="solid",t=(Object.defineProperty(i.prototype,"panel",{get:function(){return this._panel},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"chart",{get:function(){return this._panel.chart},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"visible",{get:function(){return this._plot.visible},set:function(t){this._plot.visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"allowSettingsDialog",{get:function(){return this._options.allowSettingsDialog},set:function(t){this._options.allowSettingsDialog=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"allowAboutDialog",{get:function(){return this._options.allowAboutDialog},set:function(t){this._options.allowAboutDialog=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"allowCheckValueMarker",{get:function(){return this._options.allowCheckValueMarker},set:function(t){this._options.allowCheckValueMarker=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showValueMarker",{get:function(){return this._plot.showValueMarkers},set:function(t){this._plot.showValueMarkers=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"plot",{get:function(){return this._plot},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"source",{get:function(){return this._options.source},set:function(t){this._options.source=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"instrument",{get:function(){return this._options.instrument},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lineColor",{get:function(){return this._options.lineColor},set:function(t){this._options.lineColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lineStyle",{get:function(){return this._options.lineStyle},set:function(t){this._options.lineStyle=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lineWidth",{get:function(){return this._options.lineWidth},set:function(t){this._options.lineWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"readyLoadMoreHistory",{get:function(){return this._currentBarsRequest&&!this.chart.datafeed.isRequestAlive(this._currentBarsRequest)},enumerable:!0,configurable:!0}),i.prototype._init=function(){var t=this.instrument,e=this.chart.theme.chart.background,i=new f.LinePlot({dataSeries:[new f.DataSeries(d+t.symbol)],theme:this._options.plotTheme||{strokeColor:this.lineColor?this.lineColor:f.HtmlUtil.getRandomColorVisibleOn(e),width:this._options.lineWidth?this._options.lineWidth:o,lineStyle:this._options.lineStyle?this._options.lineStyle:r}});this._plot=i,this.showValueMarker=!0,this._options.plot&&i.loadState(this._options.plot),this.panel.addPlot(i),this._requestBars()},i.prototype.calculateDataSeries=function(t,e,i){if(this.visible){this._synchronize();var o=this.instrument.symbol,r=this._comparingDelta,n=this.chart.dataManager.findDataSeries(o+this.source);if(f.JsUtil.isNumber(r)&&o&&n){var a=this._plot.findDataSeries(d+o),l=n.valueAtIndex(e-r),s=[];a.clear();for(var c=e;c<i;c++){var h=n.valueAtIndex(c-r),u=(h-(l=l||h))*t/l+t;u&&(s[c]=u)}a.add(s)}}},i.prototype._synchronize=function(){var t=this.instrument.symbol,e=this.chart.dataManager.barDataSeries(t),i=e.date&&e.date.length,o=this.chart.primaryDataSeries(f.DataSeriesSuffix.DATE).length;this._comparingDelta=o-i},i.prototype._setValues=function(t){this.lineColor=t.lineColor,this.lineWidth=t.lineWidth,this.lineStyle=t.lineStyle},i.prototype._initPanelTitle=function(){var t,e,i,o,r,n=this;this.panel.visible&&(this._titleControls||(t=this.instrument,i=(e=this._titleControls={}).rootDiv=this.panel.titleDiv.scxAppend("div",s),e.name=i.scxAppend("span",a).text(t.symbol),(o=e.parameters=i.scxAppend("span",a)).scxAppend("span").text("("),this._titleParameters={source:o.scxAppend("span"),value:o.scxAppend("span",l)},o.scxAppend("span").text(")"),r=i.scxAppend("span",[c,h]).attr("title","Cancel compare").on("click",function(){n._instrumentComparisonHandler.cancelComparing(n)}),i.css("color",this.plot.theme.strokeColor),f.Localization.localizeText(this.chart,"compareInstrument.cancelCompare").then(function(t){r.attr("title",t)}),this._updateTitle(),this.updateTitleControlsVisibility()))},i.prototype.updateTitleControlsVisibility=function(){var t=this._titleControls,e=this._titleParameters;t&&(t.name.css("opacity",this.visible?"1":"0.5"),e.source.css("opacity",this.visible?"1":"0.5"),this.visible||e.value.text(""))},i.prototype._updateTitle=function(){this._titleParameters.source.scxLocalize("compareInstrument.source"+this.source,this.source),this.chart.localize(this._titleParameters.source)},i.prototype.updateHoverRecord=function(t){var e,i,o,r;this.visible&&(t=t||this.chart.hoveredRecord,e=this.instrument.symbol,i=this.source,r=(o=this.chart.dataManager.findDataSeries(e+i))&&o.valueAtIndex(t-this._comparingDelta),isNaN(r)||this._titleParameters.value.text(this.panel.formatValue(r)))},i.prototype.updateVisibility=function(){this.visible||this.plot.dataSeries.forEach(function(t){return t.clear()}),this._instrumentComparisonHandler.update(),this.panel.setNeedsUpdate(!0)},i.prototype.update=function(){this._synchronize(),this._updateTitle()},i.prototype.onTimeFrameChange=function(){this._requestBars()},i.prototype.onMoreHistoryRequested=function(){this._requestMoreBars()},i.prototype._sendBarsRequest=function(){var t=this._newBarsRequest,e=this._currentBarsRequest,i=this.chart.datafeed;i&&t&&(e&&(i.cancel(e),this._currentBarsRequest=null),t.id||(t.id=f.Datafeed.nextRequestId()),t.chart=this.chart,this._currentBarsRequest=t,i.send(t),this._newBarsRequest=null)},i.prototype._requestMoreBars=function(){var t=this.instrument,e=this.chart.dataManager.findDataSeries(t.symbol+f.DataSeriesSuffix.DATE).firstValue;e&&(this._newBarsRequest={kind:f.RequestKind.MORE_BARS,count:f.DEFAULT_BARS_COUNT,endDate:e,instrument:t},this._sendBarsRequest())},i.prototype._requestBars=function(){var t=this.chart.recordCount<f.DEFAULT_BARS_COUNT?f.DEFAULT_BARS_COUNT:this.chart.recordCount;this._newBarsRequest={kind:f.RequestKind.BARS,count:0!==t?t:f.DEFAULT_BARS_COUNT,instrument:this.instrument},this._sendBarsRequest()},i.prototype.saveState=function(){return this._options.plot=this.plot.saveState(),this._options.plotTheme=this.plot.actualTheme,f.JsUtil.clone(this._options)},i.prototype.loadState=function(t){var e={instrument:t.instrument,allowAboutDialog:t.allowAboutDialog,allowCheckValueMarker:t.allowCheckValueMarker,allowSettingsDialog:t.allowSettingsDialog,plot:t.plot,plotTheme:t.plotTheme,source:t.source};this._options=jQuery.extend({},i.defaults,e)},i.prototype.destroy=function(){this.panel.removePlot(this.plot),this._titleControls.rootDiv.remove()},i.defaults={allowSettingsDialog:!1,allowAboutDialog:!1,allowCheckValueMarker:!0},i);function i(t){this.loadState(t),this._panel=t.instrumentComparisonHandler.panel,this._instrumentComparisonHandler=t.instrumentComparisonHandler,this._setValues(t),this._init(),this._initPanelTitle()}f.InstrumentCompare=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(l){"use strict";l.ZoomInMode={DATE_RANGE:"dateRange",RECT:"rect"},Object.freeze(l.ZoomInMode);var n={ZOOM_RECTANGLE:"scxZoomRectangle",ZOOM_IN:"scxZoomIn"};Object.freeze(n);var e,t=(e=l.Control,__extends(i,e),Object.defineProperty(i.prototype,"theme",{get:function(){return this._theme||this.chart.theme.zoomIn},set:function(t){this._theme=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"container",{get:function(){return this.panel.container},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"chart",{get:function(){return this.panel.chart},enumerable:!0,configurable:!0}),i.prototype._initGestures=function(){return new l.GestureArray([new l.ClickGesture({handler:this._handleMouseClickGesture,hitTest:this.hitTest}),new l.MouseHoverGesture({handler:this._handleMouseMoveGesture,hitTest:this.hitTest})],this)},i.prototype._handleMouseClickGesture=function(t,e){if(this.chart.state===l.ChartState.ZOOM_IN){this._panelTop=this.panel.frame.top,this._panelHeight=this.panel.frame.height;var i=this._panelTop;if(this._addPoint({x:e.pointerPosition.x,y:e.pointerPosition.y-i}),1===this._points.length)this._createControls();else if(2===this._points.length)return void this.finishDraw();this.updateVisibility(!0),this.setPosition()}},i.prototype._handleMouseMoveGesture=function(t,e){null!=this._startPoint&&this.movePosition({x:e.pointerPosition.x,y:e.pointerPosition.y-this._panelTop})},i.prototype.hitTest=function(t){return this.panel.contentFrame.containsPoint(t)},i.prototype._createControls=function(){this.panel&&(this._controls={rectangle:this.container.scxAppend("div",n.ZOOM_RECTANGLE)},this.applyTheme(),this.updateVisibility(!1))},i.prototype._addPoint=function(t){null==this._points&&(this._points=[]),this._points.push(t)},i.prototype.finishDraw=function(){var t=this.chart,e=t.dateScale.projection,i=this._points;t.state=l.ChartState.NORMAL,this.updateVisibility(!1);var o=e.recordByX(Math.min(i[0].x,i[1].x)),r=e.recordByX(Math.max(i[0].x,i[1].x));if(o>=t.recordCount)t.fireValueChanged(l.ChartEvent.ZOOM_IN_FINISHED);else{if(o<r){if(o<0&&r<=(o=0))return;t.recordRange(o,r),t.setNeedsUpdate(),this.zoomMode===l.ZoomInMode.RECT?this._setScalesValues(i[0].y,i[1].y):t.setNeedsAutoScale()}this._points=null,this.container.find("."+n.ZOOM_RECTANGLE).remove(),t.fireValueChanged(l.ChartEvent.ZOOM_IN_FINISHED)}},i.prototype.cancelDraw=function(){this._points=null,this.panel&&(this.updateVisibility(!1),this.container.find("."+n.ZOOM_RECTANGLE).remove())},i.prototype.applyTheme=function(){var t=this.theme;this._controls.rectangle.scxBorder("border",t.border).scxFill(t.fill)},i.prototype.updateVisibility=function(t){var e=this._controls;this._controls&&(t?this.container.addClass(n.ZOOM_IN):this.container.removeClass(n.ZOOM_IN),l.HtmlUtil.setVisibility(e.rectangle,t))},i.prototype.setPosition=function(t){this._startPoint=this._points[0],t?this._positionAnimation.start():this.draw()},i.prototype.movePosition=function(t,e){this._movePoint=t,e?this._positionAnimation.start():this.draw()},i.prototype.draw=function(){var t,e,i,o,r,n,a;this._positionAnimation&&(this._positionAnimation.stop(),(t=this._startPoint)&&((e=null==this._movePoint?t:this._movePoint).x>this.panel.contentFrame.width&&(e.x=this.panel.contentFrame.width),n=r=o=i=0,this.zoomMode===l.ZoomInMode.DATE_RANGE?(o=0,r=Math.abs(e.x-t.x),n=this._panelHeight,i=t.x>e.x?e.x:t.x):(r=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y),o=t.x<=e.x?(i=t.x,t.y<=e.y?t.y:e.y):(i=e.x,t.y<=e.y?e.y-n:e.y)),(a=this._controls.rectangle).scxFrame({left:i,top:o,width:r,height:n}),a.css("position","absolute")))},i.prototype._setScalesValues=function(t,e){for(var i=0,o=this.chart.chartPanels;i<o.length;i++)for(var r=0,n=o[i].valueScales;r<n.length;r++){var a=n[r],l=a.projection.valueByY(t),s=a.projection.valueByY(e);a.minVisibleValue=Math.min(l,s),a.maxVisibleValue=Math.max(l,s)}},i.prototype.destroy=function(){this._controls.rectangle.remove(),this._controls=null},i);function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._positionAnimation=new l.Animation({callback:t.draw}),t.zoomMode=l.ZoomInMode.DATE_RANGE,t._panelTop=0,t._panelHeight=0,t}l.ZoomInView=t}(StockChartX=StockChartX||{}),function(r){"use strict";r.XPointBehavior={X:"x",RECORD:"record",DATE:"date"},Object.freeze(r.XPointBehavior),r.YPointBehavior={Y:"y",VALUE:"value"},Object.freeze(r.YPointBehavior);var t=(n.convert=function(t,e,i){var o={};switch(e.x){case r.XPointBehavior.X:o.x=t.x;break;case r.XPointBehavior.RECORD:o.record=null!=t.x?i.recordByX(t.x,!1):null;break;case r.XPointBehavior.DATE:o.date=null!=t.x?i.dateByX(t.x):null;break;default:throw new Error("Unknown X point behavior: "+e.x)}switch(e.y){case r.YPointBehavior.Y:o.y=t.y;break;case r.YPointBehavior.VALUE:o.value=null!=t.y?i.valueByY(t.y):null;break;default:throw new Error("Unknown Y point behavior: "+e.y)}return new n(o)},n.prototype.clear=function(){delete this.x,delete this.y,delete this.date,delete this.value,delete this.record},n.prototype.getX=function(t){return null!=this.x?this.x:null!=this.date?t.xByDate(this.date):null!=this.record?t.xByRecord(this.record,!1):null},n.prototype.getDate=function(t){return null!=this.x?t.dateByX(this.x):null!=this.date?this.date:null!=this.record?t.dateByX(t.xByRecord(this.record,!1)):null},n.prototype.getRecord=function(t){return null!=this.x?t.recordByX(this.x,!1):null!=this.date?t.recordByX(t.xByDate(this.date,!1),!1):null!=this.record?this.record:null},n.prototype.getY=function(t){return null!=this.y?this.y:null!=this.value?t.yByValue(this.value):null},n.prototype.getValue=function(t){return null!=this.value?this.value:null!=this.y?t.valueByY(this.y):null},n.prototype.toPoint=function(t){return{x:this.getX(t),y:this.getY(t)}},n.prototype.moveTo=function(t,e,i){return this.moveToX(t,i).moveToY(e,i)},n.prototype.moveToPoint=function(t,e){return this.moveTo(t.x,t.y,e)},n.prototype.moveToX=function(t,e){return null!=this.x?this.x=t:null!=this.date?this.date=null!=t?e.dateByX(t):null:null!=this.record&&(this.record=null!=t?e.recordByX(t,!1):null),this},n.prototype.moveToY=function(t,e){return null!=this.y?this.y=t:null!=this.value&&(this.value=null!=t?e.valueByY(t):null),this},n.prototype.translate=function(t,e,i){var o=this.getX(i),r=this.getY(i),n=null!=o?o+t:null,a=null!=r?r+e:null;return this.moveTo(n,a,i)},n.prototype.clone=function(){return new n(this)},n);function n(t){null!=(t=t||{}).x&&(this.x=t.x),null!=t.y&&(this.y=t.y),null!=t.date&&(this.date="string"==typeof t.date?new Date(t.date):t.date),null!=t.value&&(this.value=t.value),null!=t.record&&(this.record=t.record)}r.ChartPoint=t}(StockChartX=StockChartX||{}),function(t){"use strict";var e,i;(e=t.TextAlign||(t.TextAlign={})).LEFT="left",e.CENTER="center",e.RIGHT="right",(i=t.TextBaseline||(t.TextBaseline={})).TOP="top",i.MIDDLE="middle",i.BOTTOM="bottom",i.ALPHABETIC="alphabetic"}(StockChartX=StockChartX||{}),function(r){"use strict";var t=(Object.defineProperty(n.prototype,"canvas",{get:function(){return this._canvas},set:function(t){this._canvas=t,this._context=t.getContext("2d")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),n.prototype._setLineDashFunc=function(){var t,e=this._lineDashFunc;e||(e=(t=this._context).setLineDash?function(t){this.setLineDash(t)}:"mozDash"in t?function(t){this.mozDash=t}:"webkitLineDash"in t?function(t){this.webkitLineDash=t}:function(t){},this._lineDashFunc=e)},n.prototype.save=function(){this._context.save()},n.prototype.restore=function(){this._context.restore()},n.prototype.translate=function(t,e){this._context.translate(t,e)},n.prototype.rotate=function(t){this._context.rotate(t)},n.prototype.scale=function(t,e){this._context.scale(t,e)},n.prototype.clearRect=function(t,e,i,o){this._context.clearRect(t,e,i,o)},n.prototype.clip=function(){this._context.clip()},n.prototype.textWidth=function(t){return this._context.measureText(t).width},n.prototype.beginPath=function(){this._context.beginPath()},n.prototype.closePath=function(){this._context.closePath()},n.prototype.moveTo=function(t,e){this._context.moveTo(t,e)},n.prototype.lineTo=function(t,e){this._context.lineTo(t,e)},n.prototype.line=function(t,e,i,o){var r=this._context;r.moveTo(t,e),r.lineTo(i,o)},n.prototype.linePath=function(t,e,i,o){this.beginPath(),this.line(t,e,i,o)},n.prototype.verLine=function(t,e,i){this.line(t,e,t,i)},n.prototype.verLinePath=function(t,e,i){this.beginPath(),this.verLine(t,e,i)},n.prototype.horLine=function(t,e,i){this.line(t,i,e,i)},n.prototype.horLinePath=function(t,e,i){this.beginPath(),this.horLine(t,e,i)},n.prototype.polyline=function(t){var e=t.length;if(0!==e)for(var i=this._context,o="object"==typeof t[0],r=o?1:2,n=0;n<e;n+=r){var a,l=void 0,s=void 0;s=o?(l=(a=t[n]).x,a.y):(l=t[n],t[n+1]),0===n?i.moveTo(l,s):i.lineTo(l,s)}},n.prototype.polylinePath=function(t){this.beginPath(),this.polyline(t)},n.prototype.polygon=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];0<t.length&&(this.polyline(t),this._context.closePath())},n.prototype.polygonPath=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.beginPath(),this.polygon.apply(this,t)},n.prototype.rect=function(t,e,i,o){this._context.rect(t,e,i,o)},n.prototype.rectPath=function(t,e,i,o){this.beginPath(),this.rect(t,e,i,o)},n.prototype.circle=function(t,e,i){this.arc(t,e,i,0,2*Math.PI)},n.prototype.circlePath=function(t,e,i){this.beginPath(),this.circle(t,e,i)},n.prototype.ellipse=function(t,e,i,o){var r=this._context;r.save(),r.translate(t,e),i!==o&&r.scale(1,o/i),this.circle(0,0,i),r.restore()},n.prototype.ellipsePath=function(t,e,i,o){this.beginPath(),this.ellipse(t,e,i,o)},n.prototype.arc=function(t,e,i,o,r,n){this._context.arc(t,e,i,o,r,n)},n.prototype.arcPath=function(t,e,i,o,r,n){this.beginPath(),this.arc(t,e,i,o,r,n)},n.prototype.bezierCurve=function(t,e,i,o,r,n){this._context.bezierCurveTo(t,e,i,o,r,n)},n.prototype.quadraticCurve=function(t,e,i,o){this._context.quadraticCurveTo(t,e,i,o)},n.prototype.image=function(t,e,i,o,r){o&&r?this._context.drawImage(t,e,i,o,r):this._context.drawImage(t,e,i)},n.prototype.textOptions=function(t){var e=this._context;t.align&&(e.textAlign=t.align),t.baseline&&(e.textBaseline=t.baseline)},n.prototype.textTheme=function(t){var e;t&&(e=this._context,t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline),e.font=n._getFont(t),this.fillTheme(t),this.strokeTheme(t))},n._getFont=function(t){return t?(t.fontStyle||r.FontDefaults.fontStyle)+" "+(t.fontVariant||r.FontDefaults.fontVariant)+" "+(t.fontWeight||r.FontDefaults.fontWeight)+" "+(t.fontSize||r.FontDefaults.fontSize)+"px "+(t.fontFamily||r.FontDefaults.fontFamily):r.FontDefaults.fontSize+"px "+r.FontDefaults.fontFamily},n.prototype.fillText=function(t,e,i,o){var r;o&&(this.textTheme(o),r=o.maxWidth),this._context.fillText(t,e,i,r)},n.prototype.strokeTheme=function(t,e){if(t&&(e||!1!==t.strokeEnabled)){var i=this._context;switch(t.strokePriority||r.StrokeDefaults.strokePriority){case r.StrokePriority.COLOR:i.strokeStyle=t.strokeColor||r.StrokeDefaults.strokeColor}i.lineCap=t.lineCap||r.StrokeDefaults.lineCap,i.lineJoin=t.lineJoin||r.StrokeDefaults.lineJoin,i.lineWidth=t.width||r.StrokeDefaults.width;var o=n._getDashArray(t.lineStyle||r.StrokeDefaults.lineStyle);this._setLineDashFunc(),this._lineDashFunc.call(i,o)}},n.prototype.stroke=function(t,e){if(t){if(!e&&!1===t.strokeEnabled)return;this.strokeTheme(t,e),this._context.stroke()}},n.prototype.fillTheme=function(t,e){var i;t&&(!e&&!1===t.fillEnabled||(t.fillPriority,i=void 0,i=t.linearGradient?this._linearGradientFillStyle(t.linearGradient):t.radialGradient?this._radialGradientFillStyle(t.radialGradient):t.fillColor||"black",this._context.fillStyle=i))},n.prototype.fill=function(t,e,i){if(t){if(!e&&!1===t.fillEnabled)return;this.fillTheme(t,e)}this._context.fill(i)},n.prototype.fillStroke=function(t,e){this.fill(t),this.stroke(e)},n.prototype.fillStrokeTheme=function(t,e){this.fillTheme(t),this.strokeTheme(e)},n.prototype._linearGradientFillStyle=function(t){var e=this._context.createLinearGradient(0,0,0,this._canvas.height);if("string"==typeof t[0])for(var i=t.length,o=1/i,r=o,n=0;n<i;n++)n===i-1&&(r=1),e.addColorStop(r,t[n]),r+=o;else for(var a=0,l=t;a<l.length;a++){var s=l[a];e.addColorStop(s.stop,s.color)}return e},n.prototype._radialGradientFillStyle=function(t){var e=t[0],i=e.center,o=e.radius,r=e.stop,n=void 0===r?.5:r,a=e.color,l=t[1],s=l.center,c=l.radius,h=l.stop,u=void 0===h?1:h,f=l.color,d=this._context.createRadialGradient(i.x,i.y,o,s.x,s.y,c);return d.addColorStop(n,a),d.addColorStop(u,f),d},n._getDashArray=function(t){var e=r.LineStyle,i=r.DashArray;switch(t){case e.DASH:return i.DASH;case e.DOT:return i.DOT;case e.DASH_DOT:return i.DASH_DOT;default:return[]}},n);function n(){}r.CanvasRenderer=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(i){"use strict";i.CanvasOffset=.5;var o,t=(o=i.Component,__extends(e,o),Object.defineProperty(e.prototype,"canvas",{get:function(){return this._canvas},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderer",{get:function(){return this._renderer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this._scale},set:function(t){this._scale=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return{width:this._width||0,height:this._height||0}},set:function(t){var e=this._canvas,i=this.scale*(window.devicePixelRatio||1),o=!1;this._width!==t.width&&(e.attr("width",t.width*i),this._width=t.width,o=!0),this._height!==t.height&&(e.attr("height",t.height*i),this._height=t.height,o=!0),o&&this.renderer.scale(i,i)},enumerable:!0,configurable:!0}),e.prototype.adjustDimensions=function(){this.size=this.size},e.prototype.destroy=function(){this._parent&&(this._parent.remove(),this._parent=null),this._canvas=null,this._renderer=null},e.prototype._setup=function(t){this._canvas=t.scxAppendCanvas().css({height:"100%",width:"100%"}),this._renderer.canvas=this._canvas.get(0)},e);function e(t){var e=o.call(this)||this;return e._renderer=new i.CanvasRenderer,e._scale=2,e._parent=t.parent,e._setup(e._parent),t.size&&(e.size=t.size),e}i.Layer=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(r){"use strict";var i,t=(i=r.ChartComponent,__extends(e,i),Object.defineProperty(e.prototype,"actualTheme",{get:function(){return this.theme||this.chart.theme.selectionMarker},enumerable:!0,configurable:!0}),e.prototype.draw=function(e,t){var i=this,o=this.actualTheme;e.beginPath(),r.JsUtil.flattenedArray(t,function(t){return i._drawMarker(e,t)}),e.fillStroke(o.fill,o.line)},e.prototype._drawMarker=function(t,e){var i=this.width;t.moveTo(e.x+i,e.y),t.circle(e.x,e.y,i)},e);function e(t){var e=i.call(this,t)||this;return e.width=null,e.theme=null,t&&(e.theme=t.theme,e.width=t.width),e}r.SelectionMarker=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(u){"use strict";var n,t;(t=n=u.DrawingEvent||(u.DrawingEvent={})).PANEL_CHANGED="drawingPanelChanged",t.VALUE_SCALE_CHANGED="drawingValueScaleChanged",t.VISIBLE_CHANGED="drawingVisibleChanged",t.POINTS_CHANGED="drawingPointsChanged",t.LOCKED_CHANGED="drawingLockedChanged",t.RESIZABLE_CHANGED="drawingResizableChanged",t.SELECTABLE_CHANGED="drawingSelectableChanged",t.SELECTED_CHANGED="drawingSelectedChanged",t.THEME_CHANGED="drawingThemeChanged",t.DRAG_STARTED="drawingDragStarted",t.DRAG_FINISHED="chartUserDrawingDragFinished",t.DOUBLE_CLICK="chartDrawingDoubleClick",t.CONTEXT_MENU="chartDrawingContextMenu",u.MagnetPoint={BAR:"bar",HIGH:"high",LOW:"low",OPEN:"open",CLOSE:"close"},u.MagnetMode={NONE:"none",ALWAYS:"always",NEAR:"near"},u.DrawingDragPoint={NONE:null,ALL:-1,MOVE_POINT1:1,MOVE_POINT2:2};var s=0,c=1;u.DrawingCursorClass={CREATE:"scxDrawingCreate",MOVE:"scxDrawingMove",RESIZE:"scxDrawingResize",RESIZE_EW:"scxDrawingResizeEW",RESIZE_NS:"scxDrawingResizeNS",RESIZE_NESW:"scxDrawingResizeNESW",RESIZE_NWSE:"scxDrawingResizeNWSE"},u.minPointsDistance=5;var e=(Object.defineProperty(i,"registeredDrawings",{get:function(){return this._drawings.registeredItems},enumerable:!0,configurable:!0}),i.register=function(t){this._drawings.register(t.className,t)},i.deserialize=function(t){if(!t)return null;var e="string"==typeof t?JSON.parse(t):t,i=this._drawings.createInstance(e.className);return i.loadState(e),i},i._drawings=new u.ClassRegistrar,i);function i(){}var r,o=(r=u.ChartPanelObject,__extends(a,r),Object.defineProperty(a,"subClassName",{get:function(){return"abstract"},enumerable:!0,configurable:!0}),Object.defineProperty(a,"className",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"_defaults",{get:function(){return this.constructor.defaults},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"className",{get:function(){return this.constructor.className},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"chartPoints",{get:function(){var t=this._options.points;return this._lastCreatePoint?t.concat(this._lastCreatePoint):t},set:function(t){this.setChartPoints(t)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"locked",{get:function(){return this._options.locked},set:function(t){this._setOption("locked",t,n.LOCKED_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"resizable",{get:function(){return this._options.resizable},set:function(t){this._setOption("resizable",t,n.RESIZABLE_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"selectable",{get:function(){return this._options.selectable},set:function(t){this._setOption("selectable",t,n.SELECTABLE_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"removable",{get:function(){var t=this._options.removable;return null==t||t},set:function(t){this._setOption("removable",t)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"canRemove",{get:function(){return this.selectable&&this.removable&&!this.isMoving()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"theme",{get:function(){return this._options.theme},set:function(t){this._options.theme=t,this.fire(n.THEME_CHANGED,t)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"actualTheme",{get:function(){var t=this._options.theme;return t||this.defaultTheme},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"defaultTheme",{get:function(){var t=this.chart;if(!t)return null;var e=t.theme.drawing;return e[this.className]||e[this.constructor.subClassName]},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"createPointBehavior",{get:function(){return this._options.createPointBehavior},set:function(t){this._options.createPointBehavior=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"magnetMode",{get:function(){return this._options.magnetMode},set:function(t){this._options.magnetMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"magnetPoint",{get:function(){return this._options.magnetPoint},set:function(t){this._options.magnetPoint=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"selected",{get:function(){return this._selected},set:function(t){t=!!t;var e,i=this._selected;i!==t&&(this._selected=t,(e=this.chart)&&(t?e.selectedObject=this:this===e.selectedObject&&(e.selectedObject=null)),this._onSelectedChanged(),this.fire(n.SELECTED_CHANGED,t,i))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"canHandleEvents",{get:function(){return this.visible&&this.chart.showDrawings},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"canSelect",{get:function(){return this.selectable},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"canMove",{get:function(){return this.selectable&&!this.locked},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"canResize",{get:function(){return this.selectable&&this.resizable&&!this.locked},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pointsNeeded",{get:function(){return 1},enumerable:!0,configurable:!0}),a.prototype.pointsLocalizationKeys=function(){return null},a.prototype._onSelectedChanged=function(){},a.prototype._onChartPanelChanged=function(t){this.tooltip.applyTheme(),this.fire(n.PANEL_CHANGED,this.chartPanel,t)},a.prototype._onValueScaleChanged=function(t){this.fire(n.VALUE_SCALE_CHANGED,this.valueScale,t)},a.prototype._onVisibleChanged=function(t){this.fire(n.VISIBLE_CHANGED,this.visible,t)},a.prototype._optionValue=function(t){var e=this._options[t];return null!=e?e:this._defaults[t]},a.prototype._isLargeEnough=function(){var t=this.cartesianPoints();if(1===t.length)return!0;for(var e=1;e<t.length;e++){var i=t[e-1],o=t[e];if(Math.abs(i.x-o.x)>u.minPointsDistance||Math.abs(i.y-o.y)>u.minPointsDistance)return!0}return!1},a.prototype._initGestures=function(){this._gestures=new u.GestureArray([new u.ClickGesture({handler:this._handleClickGesture,hitTest:this._clickGestureHitTest}),new u.DoubleClickGesture({handler:this._handleDoubleClickGesture,hitTest:this.hitTest}),new u.ContextMenuGesture({handler:this._handleContextMenuGesture,hitTest:this._clickGestureHitTest}),new u.PanGesture({handler:this._handlePanGestureInternal,hitTest:this._panGestureHitTest,button:u.MouseButton.LEFT}),new u.MouseHoverGesture({handler:this._handleMouseHoverGestureInternal,enterEventEnabled:!0,hoverEventEnabled:!0,leaveEventEnabled:!0,hitTest:this.hitTest})],this)},a.prototype._handleMouseHoverGestureInternal=function(t,e){var i=this.tooltip;if(this.chart.showDrawingTooltips&&this._drawingState!==c){if(!this._handleMouseHoverGesture(t,e))switch(t.state){case u.GestureState.STARTED:case u.GestureState.CONTINUED:this.showTooltip(e.pointerPosition);break;case u.GestureState.FINISHED:this.hideTooltip()}}else i.hide()},a.prototype._handleMouseHoverGesture=function(t,e){return!1},a.prototype._clickGestureHitTest=function(t){return this.visible&&this.canSelect&&this.hitTest(t)},a.prototype._panGestureHitTest=function(t){return this.visible&&this.canMove&&this.hitTest(t)},a.prototype._handlePanGestureInternal=function(t,e){if(this._drawingState=t.state!==u.GestureState.FINISHED?c:s,this._contextMenu&&t.state===u.GestureState.CONTINUED&&this._contextMenu.hide(),this.tooltip.hide(),t.state===u.GestureState.CONTINUED&&this.magnetMode!==u.MagnetMode.NONE&&(e.pointerPosition=this._magnetizePoint(e.pointerPosition)),!this.canResize||!this._handlePanGesture(t,e))switch(t.state){case u.GestureState.STARTED:var i=this.chart.selectedObject;if(this._setDragPoint(u.DrawingDragPoint.ALL),this.changeCursor(u.DrawingCursorClass.MOVE),i!==this)return void this.setNeedsUpdateChart();break;case u.GestureState.FINISHED:this._setDragPoint(u.DrawingDragPoint.NONE);break;case u.GestureState.CONTINUED:if(this._dragPoint===u.DrawingDragPoint.ALL)if(this.magnetMode!==u.MagnetMode.NONE&&1===this.chartPoints.length){var o=this._magnetizePoint(e.pointerPosition);this.chartPoints[0].moveToPoint(o,this.projection)}else for(var r=this.projection,n=t.moveOffset,a=0,l=this.chartPoints;a<l.length;a++){l[a].translate(n.x,n.y,r)}}t.state===u.GestureState.FINISHED&&this.changeCursor(),this.setNeedsUpdatePanel()},a.prototype._magnetizePoint=function(t){if(this.magnetMode===u.MagnetMode.NONE)return t;var e=this.projection,i=e.recordByX(t.x);if(i<0||i>=this.chart.recordCount)return t;var o=this.chart.primaryBar(i);if(!o)return t;var r={x:e.xByRecord(i),y:0};switch(this.magnetPoint){case u.MagnetPoint.OPEN:r.y=e.yByValue(o.open);break;case u.MagnetPoint.HIGH:r.y=e.yByValue(o.high);break;case u.MagnetPoint.LOW:r.y=e.yByValue(o.low);break;case u.MagnetPoint.CLOSE:r.y=e.yByValue(o.close);break;case u.MagnetPoint.BAR:switch(this.magnetMode){case u.MagnetMode.NEAR:return(r.y=e.yByValue(o.high),this._canMagnetizeToPoint(t,r))?r:(r.y=e.yByValue(o.low),this._canMagnetizeToPoint(t,r)?r:(r.y=e.yByValue(o.open),this._canMagnetizeToPoint(t,r)?r:(r.y=e.yByValue(o.close),this._canMagnetizeToPoint(t,r)?r:t)));case u.MagnetMode.ALWAYS:var n=e.yByValue(o.high),a=e.yByValue(o.low),l=e.yByValue(o.open),s=e.yByValue(o.close),c=[{y:n,distance:Math.abs(n-t.y)},{y:a,distance:Math.abs(a-t.y)},{y:l,distance:Math.abs(l-t.y)},{y:s,distance:Math.abs(s-t.y)}],h=c.reduce(function(t,e){return e.distance<t.distance?e:t},c[0]);return r.y=h.y,r}}return this._canMagnetizeToPoint(t,r)?r:t},a.prototype._canMagnetizeToPoint=function(t,e){switch(this.magnetMode){case u.MagnetMode.NONE:return!1;case u.MagnetMode.ALWAYS:return!0;case u.MagnetMode.NEAR:var i=u.Geometry.DEVIATION,o=void 0;u.Geometry.DEVIATION=u.Geometry.MAGNET_DEVIATION;try{o=u.Geometry.isPointNearPoint(t,e)}finally{u.Geometry.DEVIATION=i}return o;default:throw new Error("Unknown magnet mode: "+this.magnetMode)}},a.prototype._handleClickGesture=function(){!this.selected&&this.canSelect&&(this.select(),this.setNeedsUpdateChart())},a.prototype._handleDoubleClickGesture=function(){this.fire(n.DOUBLE_CLICK,this),this.selectable&&this._showSettingsDialog()},a.prototype._handleContextMenuGesture=function(t,e){this.fire(n.CONTEXT_MENU,this),this.selectable&&(this.chart.localize(this._contextMenu.container),this._contextMenu.show(e.evt))},a.prototype._handleUserDrawingPoint=function(t){return!1},a.prototype._handleUserDrawingClickGesture=function(t,e){this.chartPanel||e.chartPanel.addDrawings(this);var i=this._normalizeUserDrawingPoint(e.pointerPosition);if(this._lastCreatePoint=null,this._handleUserDrawingPoint(i)||this.appendChartPoint(i),this.chartPoints.length>=this.pointsNeeded){if(!this._isLargeEnough())return void this.chartPoints.pop();this._finishUserDrawing()}this.setNeedsUpdatePanel()},a.prototype._handleUserDrawingMoveGesture=function(t,e){0<this.chartPoints.length&&(this._lastCreatePoint=this._normalizeUserDrawingPoint(e.pointerPosition),this.setNeedsUpdatePanel())},a.prototype._normalizeUserDrawingPoint=function(t){return u.ChartPoint.convert(t,this.createPointBehavior,this.projection)},a.prototype._showSettingsDialog=function(){var e=this;this.chart&&u.UI.ViewLoader.drawingSettingsDialog(function(t){t.show({chart:e.chart,drawing:e})})},a.prototype.setChartPoints=function(t){var e;if(t||(e=[]),t instanceof u.ChartPoint)e=[t];else if(Array.isArray(t)){e=[];for(var i=0,o=t;i<o.length;i++){var r=o[i];e.push(new u.ChartPoint(r))}}else e=[new u.ChartPoint(t)];this._setOption("points",e,n.POINTS_CHANGED)},a.prototype.setChartPointsWithNormalize=function(t){var e=t.map(this._normalizeUserDrawingPoint.bind(this));this.setChartPoints(e)},a.prototype.appendChartPoint=function(t){var e=this._options.points;return e.push(new u.ChartPoint(t)),e},a.prototype.cartesianPoint=function(t){var e=this.chartPoints[t];return e&&e.toPoint(this.projection)},a.prototype.cartesianPoints=function(){var e=this.projection;return this.chartPoints.map(function(t){return t.toPoint(e)})},a.prototype.select=function(){!this.selected&&this.canSelect&&this.chart.selectObject(this)},a.prototype.translate=function(t,e){for(var i=this.projection,o=0,r=this.chartPoints;o<r.length;o++){r[o].translate(t,e,i)}},a.prototype.bounds=function(){return null},a.prototype.startUserDrawing=function(){this._createClickGesture=new u.ClickGesture({hitTest:function(){return!0},handler:this._handleUserDrawingClickGesture,context:this}),this._createMoveGesture=new u.MouseHoverGesture({enterEventEnabled:!1,leaveEventEnabled:!1,hitTest:function(){return!0},handler:this._handleUserDrawingMoveGesture,context:this}),this.chartPoints=[],this.selected=!0,this.remove()},a.prototype._finishUserDrawing=function(){this._createClickGesture=null,this._createMoveGesture=null,this._lastCreatePoint=null,this.tooltip.applyTheme(),this.chart._finishUserDrawing()},a.prototype.hitTest=function(t){return!1},a.prototype.handleEvent=function(t){return this._createClickGesture?this._createClickGesture.handleEvent(t)||this._createMoveGesture.handleEvent(t):this._gestures.handleEvent(t)},a.prototype._handlePanGesture=function(t,e){return!1},a.prototype._setDragPoint=function(t){this._dragPoint!==t&&(this._dragPoint=t,this._dragPoint===u.DrawingDragPoint.NONE?this.fire(n.DRAG_FINISHED):(this.fire(n.DRAG_STARTED),this.select()))},a.prototype._getSelectionMarkerWidth=function(t){return(t&&t.line&&t.line.width||1)+2},a.prototype._drawSelectionMarkers=function(t){var e;t&&((e=this.chart.selectionMarker).width=this._getSelectionMarkerWidth(this.actualTheme),e.draw(this.renderer,t))},a.prototype._drawSelectionMarkersIfSelected=function(t){this.selected&&this._drawSelectionMarkers(t)},a.prototype.saveState=function(){var t=r.prototype.saveState.call(this);return t.className=this.className,t},a.prototype.loadState=function(t){t=t||{},r.prototype.loadState.call(this,t);var e=t,i=t.options||{},o=this.suppressEvents(!0);this.createPointBehavior||(this.createPointBehavior=e.createPointBehavior||this._defaults.createPointBehavior||a.defaults.createPointBehavior),this.chartPoints=e.point||e.points||i&&i.points,null==i.visible&&(this.visible=null==e.visible||e.visible),null==i.selectable&&(this.selectable=null==e.selectable||e.selectable),null==i.locked&&(this.locked=null!=e.locked&&e.locked),null==i.resizable&&(this.resizable=null==e.resizable||e.resizable),null==i.theme&&(this.theme=e.theme),i.magnetMode||(this.magnetMode=e.magnetMode||u.MagnetMode.NONE),i.magnetPoint||(this.magnetPoint=e.magnetPoint||u.MagnetPoint.BAR),null==this.zIndex&&(this.zIndex=e.zIndex||this._defaults.zIndex||a.defaults.zIndex),this.suppressEvents(o)},a.prototype.drawValueMarkers=function(){},a.prototype.drawDateMarkers=function(){},a.prototype.clone=function(){var t=a.deserialize(this.saveState());return t.chartPanel=this.chartPanel,t},a.prototype.remove=function(){var t=this.chartPanel;return!!t&&(t.forceRemoveDrawings(this),this.setNeedsUpdatePanel(),!(this.chartPanel=null))},a.prototype.setNeedsUpdateChart=function(){var t=this.chart;t&&t.setNeedsUpdate()},a.prototype.setNeedsUpdatePanel=function(){var t=this.chartPanel;t&&t.setNeedsUpdate()},a.prototype.isMoving=function(){return this._drawingState===c},a.prototype.destroy=function(){this.chart.rootDiv.removeClass(u.DrawingCursorClass.MOVE),r.prototype.destroy.call(this)},a.defaults={createPointBehavior:{x:u.XPointBehavior.DATE,y:u.YPointBehavior.VALUE},zIndex:2e3},a);function a(t){var o=r.call(this,t)||this;return o._drawingState=s,o._selected=!1,o._dragPoint=u.DrawingDragPoint.NONE,o.loadState(t),o._initGestures(),o._contextMenu=new u.UI.DrawingContextMenu({drawing:o,onShow:function(){o.select()},onItemSelected:function(t,e){var i=t.data("id");if(o.chart)switch(i){case u.UI.DrawingContextMenu.MenuItem.SETTINGS:o._showSettingsDialog();break;case u.UI.DrawingContextMenu.MenuItem.CLONE:o.chart._copyDrawing(),o.chart._pasteDrawing();break;case u.UI.DrawingContextMenu.MenuItem.DELETE:o.canRemove&&o.remove();break;default:throw new Error("Unknown menu item "+i)}}}),o}u.Drawing=o,u.JsUtil.applyMixins(o,[e])}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(i){"use strict";var e;(e=i.DrawingEvent||(i.DrawingEvent={})).DOT_RADIUS_CHANGED="drawingDotRadiusChanged";var o,t=(o=i.Drawing,__extends(r,o),Object.defineProperty(r,"className",{get:function(){return"dot"},enumerable:!0,configurable:!0}),Object.defineProperty(r,"subClassName",{get:function(){return"abstractMarker"},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"radius",{get:function(){return this._options.radius||this._defaults.radius||r.defaults.radius},set:function(t){if(i.JsUtil.isNegativeNumber(t))throw new TypeError("Radius must be a positive number.");this._setOption("radius",t,e.DOT_RADIUS_CHANGED)},enumerable:!0,configurable:!0}),r.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start"]},r.prototype.bounds=function(){var t=this.cartesianPoint(0);if(!t)return null;var e=this.radius;return{left:t.x-e,top:t.y-e,width:2*e,height:2*e}},r.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoint(0);return!!e&&i.Geometry.isPointInsideOrNearCircle(t,e,this.radius)},r.prototype.draw=function(){var t,e,i;!this.visible||(t=this.cartesianPoint(0))&&(e=this.renderer,i=this.actualTheme,e.circlePath(t.x,t.y,this.radius),e.fillStroke(i.fill,i.stroke),this._drawSelectionMarkersIfSelected(t))},r.defaults={radius:5},r);function r(t){return o.call(this,t)||this}i.DotDrawing=t,i.Drawing.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(u){"use strict";var i,t=(i=u.Drawing,__extends(e,i),Object.defineProperty(e,"className",{get:function(){return"note"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._options.label||this._defaults.label||""},set:function(t){0!==t.length&&(this._options.label=t[0])},enumerable:!0,configurable:!0}),e.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start"]},e.prototype.bounds=function(){var t=this.cartesianPoint(0);if(!t)return null;var e=this._radius;return{left:t.x-e,top:t.y-2.7*e,width:2*e,height:2*e+7}},e.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoint(0);return!!e&&(u.Geometry.isPointInsideOrNearCircle(t,{x:e.x,y:e.y-20},this._radius)||u.Geometry.isPointNearPoint(t,e))},e.prototype.draw=function(){var t,e,i,o,r,n,a,l,s,c,h;!this.visible||(t=this.cartesianPoint(0))&&(e=this.actualTheme,i=u.DummyCanvasContext.textWidth(this.label,e.text),o=this._radius=12+i/3,r=this.renderer,n=t.x,a=18+i,l=t.y-a,s=6+i/9,c=12+i,h=o/2,r.linePath(n-h,l,n+h,l),r.circle(n,l,o),r.moveTo(n+h+s,2+l),r.bezierCurve(n+h+s,l,n+10,l+c,n,l+a),r.bezierCurve(n,l+a,n-10,l+c,n-h-s,l),r.fillStroke(e.fill,e.stroke),r.linePath(n-(o-1.5),l,n+(o-1.5),l),r.circle(n,l,o-3),r.fillStroke(e.centerPointFill,e.stroke),r.textOptions({align:u.TextAlign.CENTER,baseline:u.TextBaseline.MIDDLE}),r.fillText(this.label,n,l,e.text),this._drawSelectionMarkersIfSelected(t))},e.defaults={label:"N"},e);function e(t){var e=i.call(this,t)||this;return e._radius=12,e}u.NoteDrawing=t,u.Drawing.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(i){"use strict";var e;(e=i.DrawingEvent||(i.DrawingEvent={})).SIZE_CHANGED="drawingSizeChanged";var o,t=(o=i.Drawing,__extends(r,o),Object.defineProperty(r,"subClassName",{get:function(){return"abstractMarker"},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"size",{get:function(){return this._options.size||this._defaults.size||r.defaults.size},set:function(t){this._setOption("size",t,e.SIZE_CHANGED)},enumerable:!0,configurable:!0}),r.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start"]},r.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.bounds();return e&&i.Geometry.isPointInsideOrNearRect(t,e)},r.defaults={size:{width:14,height:14}},r);function r(t){return o.call(this,t)||this}i.GeometricMarkerDrawingBase=t}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(o){"use strict";var t,e=(t=o.GeometricMarkerDrawingBase,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"square"},enumerable:!0,configurable:!0}),i.prototype.bounds=function(){var t=this.cartesianPoint(0),e=this.size;return t?{left:Math.round(t.x-e.width/2),top:Math.round(t.y-e.height/2),width:e.width,height:e.height}:null},i.prototype.draw=function(){var t,e,i;!this.visible||(t=this.bounds())&&(e=this.renderer,i=this.actualTheme,e.rectPath(t.left+o.CanvasOffset,t.top+o.CanvasOffset,t.width,t.height),e.fillStroke(i.fill,i.stroke),this._drawSelectionMarkersIfSelected(this.cartesianPoint(0)))},i.defaults={size:{width:10,height:10}},i);function i(){return null!==t&&t.apply(this,arguments)||this}o.SquareDrawing=e,o.Drawing.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var e,i=(e=t.GeometricMarkerDrawingBase,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"diamond"},enumerable:!0,configurable:!0}),o.prototype.bounds=function(){var t=this.cartesianPoint(0);if(!t)return null;var e=this.size;return{left:Math.round(t.x-e.width/2),top:Math.round(t.y-e.height/2),width:e.width,height:e.height}},o.prototype.draw=function(){var t,e,i,o,r,n;!this.visible||(t=this.cartesianPoint(0))&&(e=this.renderer,i=this.size,o=Math.round(i.width/2),r=Math.round(i.height/2),e.polygonPath(t.x-o,t.y,t.x,t.y-r,t.x+o,t.y,t.x,t.y+r),n=this.actualTheme,e.fillStroke(n.fill,n.stroke),this._drawSelectionMarkersIfSelected(t))},o.defaults={size:{width:10,height:10}},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.DiamondDrawing=i,t.Drawing.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(l){"use strict";var e,t;(t=e=l.DrawingEvent||(l.DrawingEvent={})).ARROW_HEAD_RATIO_CHANGED="drawingArrowHeadRatioChanged",t.ARROW_TAIL_RATIO_CHANGED="drawingArrowTailRatioChanged";var i,o=(i=l.GeometricMarkerDrawingBase,__extends(r,i),Object.defineProperty(r.prototype,"headRatio",{get:function(){return this._options.headRatio||this._defaults.headRatio||r.defaults.headRatio},set:function(t){if(!l.JsUtil.isPositiveNumber(t)||1<=t)throw new Error("Value must be in range (0..1).");this._setOption("headRatio",t,e.ARROW_HEAD_RATIO_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"tailRatio",{get:function(){return this._options.tailRatio||this._defaults.tailRatio||r.defaults.tailRatio},set:function(t){if(!l.JsUtil.isPositiveNumber(t)||1<=t)throw new Error("Value must be in range (0..1).");this._setOption("tailRatio",t,e.ARROW_TAIL_RATIO_CHANGED)},enumerable:!0,configurable:!0}),r.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start"]},r.prototype.draw=function(){var t,e,i,o,r,n,a;!this.visible||(t=this.cartesianPoint(0))&&(e=this.renderer,i=this.actualTheme,r=(o=this.size).width/2,n=o.width*this.tailRatio/2,a=o.height*this.headRatio,e.save(),e.translate(t.x,t.y),e.rotate(this._angle*Math.PI/180),e.polygonPath(0,0,-r,-a+l.CanvasOffset,-n,-a+l.CanvasOffset,-n,-o.height+l.CanvasOffset,n,-o.height+l.CanvasOffset,n,-a+l.CanvasOffset,r,-a+l.CanvasOffset),e.fillStroke(i.fill,i.stroke),this.selected&&this._drawSelectionMarkers({x:0,y:0}),e.restore())},r.defaults={size:null,headRatio:.5,tailRatio:.5},r);function r(t){var e=i.call(this,t)||this;return e._angle=0,e}l.ArrowDrawingBase=o}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var i,e=(i=t.ArrowDrawingBase,__extends(o,i),Object.defineProperty(o,"className",{get:function(){return"arrowUp"},enumerable:!0,configurable:!0}),o.prototype.bounds=function(){var t=this.cartesianPoint(0);if(!t)return null;var e=this.size;return{left:Math.round(t.x-e.width/2),top:t.y,width:e.width,height:e.height}},o);function o(t){var e=i.call(this,t)||this;return e._angle=180,e}t.ArrowUpDrawing=e,t.Drawing.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var e,i=(e=t.ArrowDrawingBase,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"arrowDown"},enumerable:!0,configurable:!0}),o.prototype.bounds=function(){var t=this.cartesianPoint(0);if(!t)return null;var e=this.size;return{left:Math.round(t.x-e.width/2),top:Math.round(t.y-e.height),width:e.width,height:e.height}},o);function o(){return null!==e&&e.apply(this,arguments)||this}t.ArrowDownDrawing=i,t.Drawing.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var i,e=(i=t.ArrowDrawingBase,__extends(o,i),Object.defineProperty(o,"className",{get:function(){return"arrowLeft"},enumerable:!0,configurable:!0}),o.prototype.bounds=function(){var t=this.cartesianPoint(0);if(!t)return null;var e=this.size;return{left:t.x,top:Math.round(t.y-e.height/2),width:e.width,height:e.height}},o);function o(t){var e=i.call(this,t)||this;return e._angle=90,e}t.ArrowLeftDrawing=e,t.Drawing.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(t){"use strict";var i,e=(i=t.ArrowDrawingBase,__extends(o,i),Object.defineProperty(o,"className",{get:function(){return"arrowRight"},enumerable:!0,configurable:!0}),o.prototype.bounds=function(){var t=this.cartesianPoint(0);if(!t)return null;var e=this.size;return{left:t.x-e.width,top:Math.round(t.y-e.height/2),width:e.width,height:e.height}},o);function o(t){var e=i.call(this,t)||this;return e._angle=-90,e}t.ArrowRightDrawing=e,t.Drawing.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(y){"use strict";var t,e=(t=y.ArrowDrawingBase,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"arrow"},enumerable:!0,configurable:!0}),i.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.end"]},i.prototype.bounds=function(){var t=this.cartesianPoints();if(t.length<this.pointsNeeded)return null;var e=y.Geometry.length(t[0],t[1]);return{left:t[0].x-e,top:t[0].y-e,width:2*e,height:2*e}},Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();return 1<e.length&&y.Geometry.isPointNearPolyline(t,e)},i.prototype._handlePanGesture=function(t,e){switch(t.state){case y.GestureState.STARTED:if(y.Geometry.isPointNearPoint(this.cartesianPoint(0),e.pointerPosition))this._setDragPoint(0);else{if(!y.Geometry.isPointNearPoint(this.cartesianPoint(1),e.pointerPosition))return!1;this._setDragPoint(1)}return this.changeCursor(y.DrawingCursorClass.RESIZE),!0;case y.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype.draw=function(){var t,e,i,o,r,n,a,l,s,c,h,u,f,d,p;!this.visible||2===(t=this.cartesianPoints()).length&&(e=t[0].x,i=t[0].y,o=t[1].x,r=t[1].y,n=Math.sqrt((o-e)*(o-e)+(r-i)*(r-i)),a=Math.sqrt((e-e)*(e-e)+(r-i)*(r-i)),l=(o-e)*(e-e)+(r-i)*(r-i),s=Math.acos(l/(n*a)),c=this.renderer,h=this.actualTheme,u=y.Geometry.length({x:e,y:i},{x:o,y:r}),f=50*this.tailRatio/2,d=u*this.headRatio,c.save(),c.translate(e,i),o<=e&&r<=i?p=i===r?-Math.PI/2:-s:e<=o&&r<=i?p=r===i?Math.PI/2:s:e<=o&&i<=r?p=o===e?2*Math.PI:Math.PI-s:o<=e&&i<=r&&(p=Math.PI+s),p&&c.rotate(p),c.polygonPath(0,0,0,-u,-25,-d,-f,-d,-f,y.CanvasOffset,f,y.CanvasOffset,f,-d,25,-d,0,-u),c.fillStroke(h.fill,h.stroke),c.restore(),this._drawSelectionMarkersIfSelected(t))},i);function i(){return null!==t&&t.apply(this,arguments)||this}y.Arrow=e,y.Drawing.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(i){"use strict";var t,e=(t=i.Drawing,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"lineSegment"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),o.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.end"]},o.prototype.bounds=function(){var t=this.cartesianPoints();return t.length<this.pointsNeeded?null:{left:Math.min(t[0].x,t[1].x),top:Math.min(t[0].y,t[1].y),width:Math.abs(t[0].x-t[1].x),height:Math.abs(t[0].y-t[1].y)}},o.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();return 1<e.length&&i.Geometry.isPointNearPolyline(t,e)},o.prototype._handlePanGesture=function(t,e){switch(t.state){case i.GestureState.STARTED:if(i.Geometry.isPointNearPoint(this.cartesianPoint(0),e.pointerPosition))this._setDragPoint(0);else{if(!i.Geometry.isPointNearPoint(this.cartesianPoint(1),e.pointerPosition))return!1;this._setDragPoint(1)}return this.changeCursor(i.DrawingCursorClass.RESIZE),!0;case i.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},o.prototype.draw=function(){var t,e;this.visible&&(1<(t=this.cartesianPoints()).length&&((e=this.renderer).polylinePath(t),e.stroke(this.actualTheme.line)),this._drawSelectionMarkersIfSelected(t))},o);function o(){return null!==t&&t.apply(this,arguments)||this}i.LineSegmentDrawing=e,i.Drawing.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(l){"use strict";var t,e=(t=l.Drawing,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"rectangle"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),i.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.end"]},i.prototype.bounds=function(){var t=this.cartesianPoints();return t.length<this.pointsNeeded?null:{left:Math.min(t[0].x,t[1].x),top:Math.min(t[0].y,t[1].y),width:Math.abs(t[0].x-t[1].x),height:Math.abs(t[0].y-t[1].y)}},i.prototype._markerPoints=function(t){if(!(t=t||this.bounds())){var e=this.cartesianPoint(0);return e&&[e]}var i=Math.round(t.left+t.width/2),o=Math.round(t.top+t.height/2),r=t.left+t.width,n=t.top+t.height;return[{x:t.left,y:t.top},{x:i,y:t.top},{x:r,y:t.top},{x:r,y:o},{x:r,y:n},{x:i,y:n},{x:t.left,y:n},{x:t.left,y:o}]},i.prototype._normalizePoints=function(){var t,e,i=this.bounds();i&&(t=this.projection,(e=this.chartPoints)[0].moveTo(i.left,i.top,t),e[1].moveTo(i.left+i.width,i.top+i.height,t))},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();return 1<e.length&&l.Geometry.isPointNearRectPoints(t,e[0],e[1])},i.prototype._handlePanGesture=function(t,e){switch(t.state){case l.GestureState.STARTED:this._normalizePoints();var i=this._markerPoints();if(i&&1<i.length)for(var o=0;o<i.length;o++)if(l.Geometry.isPointNearPoint(e.pointerPosition,i[o]))return this._setDragPoint(o),this._updateCursor(),!0;break;case l.GestureState.CONTINUED:if(this._dragPoint<0)break;var r=this.projection,n=this.chartPoints,a=e.pointerPosition;switch(this._dragPoint){case 0:n[0].moveTo(a.x,a.y,r);break;case 1:n[0].moveToY(a.y,r);break;case 2:n[0].moveToY(a.y,r),n[1].moveToX(a.x,r);break;case 3:n[1].moveToX(a.x,r);break;case 4:n[1].moveTo(a.x,a.y,r);break;case 5:n[1].moveToY(a.y,r);break;case 6:n[0].moveToX(a.x,r),n[1].moveToY(a.y,r);break;case 7:n[0].moveToX(a.x,r)}return!0}return!1},i.prototype._updateCursor=function(){var t;switch(this._dragPoint){case 0:case 4:t=l.DrawingCursorClass.RESIZE_NWSE;break;case 1:case 5:t=l.DrawingCursorClass.RESIZE_NS;break;case 2:case 6:t=l.DrawingCursorClass.RESIZE_NESW;break;case 3:case 7:t=l.DrawingCursorClass.RESIZE_EW}t&&this.changeCursor(t)},i.prototype.draw=function(){var t,e,i,o;this.visible&&((t=this.bounds())&&(e=this.renderer,i=this.actualTheme,e.rectPath(t.left+l.CanvasOffset,t.top+l.CanvasOffset,t.width,t.height),e.fillStroke(i.fill,i.line)),this.selected&&(o=this._markerPoints(t),this._drawSelectionMarkers(o)))},i);function i(){return null!==t&&t.apply(this,arguments)||this}l.RectangleDrawing=e,l.Drawing.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(r){"use strict";var t,e=(t=r.Drawing,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"triangle"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 3},enumerable:!0,configurable:!0}),i.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.middle","drawing.all.dialog.end"]},i.prototype.bounds=function(){var t=this.cartesianPoints();if(t.length<this.pointsNeeded)return null;var e=Math.min(t[0].x,t[1].x,t[2].x),i=Math.min(t[0].y,t[1].y,t[2].y);return{left:e,top:i,width:Math.max(t[0].x,t[1].x,t[2].x)-e,height:Math.max(t[0].y,t[1].y,t[2].y)-i}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();return 1<e.length&&r.Geometry.isPointNearPolygon(t,e)},i.prototype._handlePanGesture=function(t,e){switch(t.state){case r.GestureState.STARTED:for(var i=this.cartesianPoints(),o=0;o<i.length;o++)if(r.Geometry.isPointNearPoint(e.pointerPosition,i[o]))return this._setDragPoint(o),this.changeCursor(r.DrawingCursorClass.RESIZE),!0;break;case r.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype.draw=function(){var t,e,i;this.visible&&(1<(t=this.cartesianPoints()).length&&(e=this.renderer,i=this.actualTheme,e.polygonPath.apply(e,t),e.fillStroke(i.fill,i.line)),this._drawSelectionMarkersIfSelected(t))},i);function i(){return null!==t&&t.apply(this,arguments)||this}r.TriangleDrawing=e,r.Drawing.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(n){"use strict";var t,e=(t=n.Drawing,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"circle"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),i.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.end"]},i.prototype.bounds=function(){var t=this.cartesianPoints();if(t.length<this.pointsNeeded)return null;var e=n.Geometry.length(t[0],t[1]);return{left:t[0].x-e,top:t[0].y-e,width:2*e,height:2*e}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();return 1<e.length&&n.Geometry.isPointNearCircle(t,e[0],e[1])},i.prototype._handlePanGesture=function(t,e){switch(t.state){case n.GestureState.STARTED:var i=this._markerPoints();if(i&&1<i.length)for(var o=0;o<i.length;o++)if(n.Geometry.isPointNearPoint(e.pointerPosition,i[o]))return this._setDragPoint(o),this._updateCursor(),!0;break;case n.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[1].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype._updateCursor=function(){var t;switch(this._dragPoint){case 0:case 2:t=n.DrawingCursorClass.RESIZE_EW;break;case 1:case 3:t=n.DrawingCursorClass.RESIZE_NS}t&&this.changeCursor(t)},i.prototype.draw=function(){var t,e,i,o,r;!this.visible||0!==(t=this.cartesianPoints()).length&&(1<t.length&&(e=this.renderer,i=this.actualTheme,o=n.Geometry.length(t[0],t[1]),e.circlePath(t[0].x,t[0].y,o),e.fillStroke(i.fill,i.line)),this.selected&&(r=this._markerPoints(t),this._drawSelectionMarkers(r)))},i.prototype._markerPoints=function(t){if(0===(t=t||this.cartesianPoints()).length)return null;var e=t[0];if(1===t.length)return[{x:e.x,y:e.y}];var i=n.Geometry.length(t[0],t[1]);return[{x:e.x-i,y:e.y},{x:e.x,y:e.y-i},{x:e.x+i,y:e.y},{x:e.x,y:e.y+i}]},i);function i(){return null!==t&&t.apply(this,arguments)||this}n.CircleDrawing=e,n.Drawing.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(a){"use strict";var t,e=(t=a.Drawing,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"ellipse"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),i.prototype._markerPoints=function(t){if(0===(t=t||this.cartesianPoints()).length)return null;var e=t[0];if(1===t.length)return[{x:e.x,y:e.y}];var i=a.Geometry.xProjectionLength(t[0],t[1]),o=a.Geometry.yProjectionLength(t[0],t[1]);return[{x:e.x-i,y:e.y},{x:e.x,y:e.y-o},{x:e.x+i,y:e.y},{x:e.x,y:e.y+o}]},i.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.end"]},i.prototype.bounds=function(){var t=this.cartesianPoints();if(t.length<this.pointsNeeded)return null;var e=a.Geometry.xProjectionLength(t[0],t[1]),i=a.Geometry.yProjectionLength(t[0],t[1]);return{left:t[0].x-e,top:t[0].y-i,width:2*e,height:2*i}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();return 1<e.length&&a.Geometry.isPointNearEllipse(t,e[0],e[1])},i.prototype._handlePanGesture=function(t,e){switch(t.state){case a.GestureState.STARTED:var i=this._markerPoints();if(i&&1<i.length)for(var o=0;o<i.length;o++)if(a.Geometry.isPointNearPoint(e.pointerPosition,i[o]))return this._setDragPoint(o),this._updateCursor(),!0;break;case a.GestureState.CONTINUED:if(0<=this._dragPoint){switch(this._dragPoint){case 0:case 2:this.chartPoints[1].moveToX(e.pointerPosition.x,this.projection);break;case 1:case 3:this.chartPoints[1].moveToY(e.pointerPosition.y,this.projection)}return!0}}return!1},i.prototype._updateCursor=function(){var t;switch(this._dragPoint){case 0:case 2:t=a.DrawingCursorClass.RESIZE_EW;break;case 1:case 3:t=a.DrawingCursorClass.RESIZE_NS}t&&this.changeCursor(t)},i.prototype.draw=function(){var t,e,i,o,r,n;!this.visible||0!==(t=this.cartesianPoints()).length&&(1<t.length&&(e=this.renderer,i=this.actualTheme,o=a.Geometry.xProjectionLength(t[0],t[1]),r=a.Geometry.yProjectionLength(t[0],t[1]),e.ellipsePath(t[0].x,t[0].y,o,r),e.fillStroke(i.fill,i.line)),this.selected&&(n=this._markerPoints(t),this._drawSelectionMarkers(n)))},i);function i(){return null!==t&&t.apply(this,arguments)||this}a.EllipseDrawing=e,a.Drawing.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(n){"use strict";var t,e=(t=n.Drawing,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"horizontalLine"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showValueMarker",{get:function(){var t=this._options.showValueMarker;return null!=t?t:i.defaults.showValueMarker},set:function(t){this._options.showValueMarker=!!t},enumerable:!0,configurable:!0}),i.prototype.bounds=function(){var t=this.cartesianPoint(0);if(!t)return null;var e=this.chartPanel.contentFrame;return{left:e.left,top:t.y,width:e.width,height:1}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoint(0);return t&&n.Geometry.isValueNearValue(t.y,e.y)},i.prototype.draw=function(){var t,e,i,o;!this.visible||(t=this.cartesianPoint(0))&&(e=this.renderer,i=this.chartPanel.contentFrame,e.linePath(i.left,t.y,i.right,t.y),e.stroke(this.actualTheme.line),this.selected&&(o=Math.round(i.left+i.width/2),this._drawSelectionMarkers({x:o,y:t.y})))},i.prototype.drawValueMarkers=function(){var t,e,i,o,r;!this.showValueMarker||(t=this.chartPoints[0])&&(e=this.chart.valueMarker,i=this.actualTheme.line.strokeColor,o=this.panelValueScale,r=t.getValue(o.projection),e.theme.fill.fillColor=i,e.theme.text.fillColor=n.HtmlUtil.isDarkColor(i)?"white":"black",e.draw(r,o))},i.defaults={showValueMarker:!0},i);function i(){return null!==t&&t.apply(this,arguments)||this}n.HorizontalLineDrawing=e,n.Drawing.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(n){"use strict";var t,e=(t=n.Drawing,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"verticalLine"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showDateMarker",{get:function(){var t=this._options.showDateMarker;return null!=t?t:i.defaults.showDateMarker},set:function(t){this._options.showDateMarker=!!t},enumerable:!0,configurable:!0}),i.prototype.bounds=function(){var t=this.cartesianPoint(0);if(!t)return null;var e=this.chartPanel.contentFrame;return{left:t.x,top:e.top,width:1,height:e.height}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoint(0);return t&&n.Geometry.isValueNearValue(t.x,e.x)},i.prototype._handlePanGesture=function(t,e){return this.showDateMarker&&this.chart.dateScale.setNeedsUpdate(),!1},i.prototype.draw=function(){var t,e,i,o;!this.visible||(t=this.cartesianPoint(0))&&(e=this.renderer,i=this.chartPanel.contentFrame,e.linePath(t.x,0,t.x,i.bottom-i.top),e.stroke(this.actualTheme.line),this.selected&&(o=Math.round(i.height/2),this._drawSelectionMarkers({x:t.x,y:o})))},i.prototype.drawDateMarkers=function(){var t,e,i,o,r;!this.showDateMarker||(t=this.chartPoints[0])&&(e=this.chart.dateMarker,i=t.getDate(this.projection),o=this.actualTheme.line.strokeColor,r=this.chart.dateScale,e.theme.fill.fillColor=o,e.theme.text.fillColor=n.HtmlUtil.isDarkColor(o)?"white":"black",e.theme.stroke.strokeColor=n.HtmlUtil.isDarkColor(o)?n.HtmlUtil.lighten(o,.5):n.HtmlUtil.lighten(o,-.5),e.draw(i,r))},i.defaults={showDateMarker:!0},i);function i(){return null!==t&&t.apply(this,arguments)||this}n.VerticalLineDrawing=e,n.Drawing.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(r){"use strict";var e,t=(e=r.Drawing,__extends(i,e),Object.defineProperty(i,"className",{get:function(){return"polygon"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return this._pointsNeeded},enumerable:!0,configurable:!0}),i.prototype.bounds=function(){var t=this.cartesianPoints();if(t.length<2)return null;var e=Math.max.apply(Math,t.map(function(t){return t.x})),i=Math.min.apply(Math,t.map(function(t){return t.x})),o=Math.max.apply(Math,t.map(function(t){return t.y})),r=Math.min.apply(Math,t.map(function(t){return t.y}));return{left:i,top:r,width:Math.abs(e-i),height:Math.abs(o-r)}},i.prototype.hitTest=function(t){return!!this.canHandleEvents&&r.Geometry.isPointNearPolygon(t,this.cartesianPoints())},i.prototype._handleUserDrawingPoint=function(t){var e=this.chartPoints.length;if(1<e){var i=this.cartesianPoint(e-1),o=new r.ChartPoint(t).toPoint(this.projection);if(r.Geometry.isPointNearPoint(o,i))return this._finishUserDrawing(),!0}return this.appendChartPoint(t),!0},i.prototype._handlePanGesture=function(t,e){switch(t.state){case r.GestureState.STARTED:for(var i=this.cartesianPoints(),o=0;o<i.length;o++)if(r.Geometry.isPointNearPoint(e.pointerPosition,i[o]))return this._setDragPoint(o),this.changeCursor(r.DrawingCursorClass.RESIZE),!0;break;case r.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype.draw=function(){var t,e,i;this.visible&&(t=this.cartesianPoints(),e=this.renderer,i=this.actualTheme,1<t.length&&(e.polygonPath.apply(e,t),e.fillStroke(i.fill,i.line)),this._drawSelectionMarkersIfSelected(t))},i);function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._pointsNeeded=Number.MAX_VALUE,t}r.PolygonDrawing=t,r.Drawing.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(r){"use strict";var t,e=(t=r.Drawing,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"polyline"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return Number.MAX_VALUE},enumerable:!0,configurable:!0}),i.prototype.bounds=function(){var t=this.cartesianPoints();if(t.length<2)return null;var e=Math.max.apply(Math,t.map(function(t){return t.x})),i=Math.min.apply(Math,t.map(function(t){return t.x})),o=Math.max.apply(Math,t.map(function(t){return t.y})),r=Math.min.apply(Math,t.map(function(t){return t.y}));return{left:i,top:r,width:Math.abs(e-i),height:Math.abs(o-r)}},i.prototype.hitTest=function(t){return!!this.canHandleEvents&&r.Geometry.isPointNearPolyline(t,this.cartesianPoints())},i.prototype._handleUserDrawingPoint=function(t){var e=this.chartPoints.length;if(1<e){var i=this.cartesianPoint(e-1),o=new r.ChartPoint(t).toPoint(this.projection);if(r.Geometry.isPointNearPoint(o,i))return this._finishUserDrawing(),!0}return this.appendChartPoint(t),!0},i.prototype._handlePanGesture=function(t,e){switch(t.state){case r.GestureState.STARTED:for(var i=this.cartesianPoints(),o=0;o<i.length;o++)if(r.Geometry.isPointNearPoint(e.pointerPosition,i[o]))return this._setDragPoint(o),this.changeCursor(r.DrawingCursorClass.RESIZE),!0;break;case r.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype.draw=function(){if(this.visible){var t=this.cartesianPoints(),e=this.renderer,i=this.actualTheme;if(1<t.length){e.beginPath(),e.moveTo(t[0].x,t[0].y);for(var o=1;o<t.length;o++)e.lineTo(t[o].x,t[o].y);e.stroke(i.line)}this._drawSelectionMarkersIfSelected(t)}},i);function i(){return null!==t&&t.apply(this,arguments)||this}r.PolylineDrawing=e,r.Drawing.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(e){"use strict";var i,t=(i=e.Drawing,__extends(o,i),Object.defineProperty(o,"className",{get:function(){return"freeHand"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pointsNeeded",{get:function(){return Number.MAX_VALUE},enumerable:!0,configurable:!0}),o.prototype._handleUserDrawingPoint=function(t){return this._drawingPoints++,this.appendChartPoint(t),2<=this._drawingPoints&&this._finishUserDrawing(),!0},o.prototype._handleUserDrawingMoveGesture=function(t,e){var i,o,r,n=this.chartPoints.length;0<n&&(i=e.pointerPosition,o=this._normalizeUserDrawingPoint(i),r=this.chartPoints[n-1],Math.round(o.value)===Math.round(r.value)&&i.x===r.x||(this.appendChartPoint(o),this.chartPanel.setNeedsUpdate()))},o.prototype.bounds=function(){var t=this.cartesianPoints();if(t.length<2)return null;var e=t.reduce(function(t,e){return Math.max(t,e.x)},-1/0),i=t.reduce(function(t,e){return Math.min(t,e.x)},1/0),o=t.reduce(function(t,e){return Math.max(t,e.y)},-1/0),r=t.reduce(function(t,e){return Math.min(t,e.y)},1/0);return{left:i,top:r,width:Math.abs(e-i),height:Math.abs(o-r)}},o.prototype.hitTest=function(t){return!!this.canHandleEvents&&e.Geometry.isPointNearPolyline(t,this.cartesianPoints())},o.prototype.draw=function(){if(this.visible){var t=this.cartesianPoints();if(0!==t.length){var e=this.renderer,i=this.actualTheme;if(1<t.length){e.beginPath(),e.moveTo(t[0].x,t[0].y);for(var o=1;o<t.length;o++)e.lineTo(t[o].x,t[o].y);e.stroke(i.line)}this.selected&&this._drawSelectionMarkers([t[0],t[t.length-1]])}}},o);function o(){var t=null!==i&&i.apply(this,arguments)||this;return t._drawingPoints=0,t}e.FreeHandDrawing=t,e.Drawing.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(r){"use strict";var e,t=(e=r.Drawing,__extends(i,e),Object.defineProperty(i,"className",{get:function(){return"cyclicLines"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),i.prototype.pointsLocalizationKeys=function(){return["drawingSettingDialog.start","drawingSettingDialog.end"]},i.prototype.bounds=function(){if(this.cartesianPoints().length<this.pointsNeeded||this._drawingPoints)return null;var t=this.chartPanel.contentFrame,e=this._drawingPoints,i=e[1],o=e[e.length-1];return{left:Math.min(i[0].x,o[0].x),top:0,width:Math.abs(i[0].x-o[0].x),height:t.height}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;if(this.chartPoints.length<2)return!1;for(var e=0,i=this._drawingPoints;e<i.length;e++){var o=i[e];if(r.Geometry.isPointNearLine(t,o[0],o[1]))return!0}return!1},i.prototype._handlePanGesture=function(t,e){switch(t.state){case r.GestureState.STARTED:if(r.Geometry.isPointNearPoint(this.cartesianPoint(0),e.pointerPosition))this._setDragPoint(0);else{if(!r.Geometry.isPointNearPoint(this.cartesianPoint(1),e.pointerPosition))return!1;this._setDragPoint(1)}return this.changeCursor(r.DrawingCursorClass.RESIZE),!0;case r.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype.draw=function(){if(this.visible){var t=this.cartesianPoints();if(0!==t.length){if(this._drawingPoints=[t],1<t.length){for(var e=this.renderer,i=this.chartPanel.contentFrame,o=this._calculateXPointsForLines(),r={min:0,max:i.height},n=0,a=o;n<a.length;n++){var l=a[n],s={x:l,y:r.min},c={x:l,y:r.max};e.linePath(s.x,s.y,c.x,c.y),e.stroke(this.actualTheme.line),this._drawingPoints.push([s,c])}e.polylinePath(t),e.stroke(this.actualTheme.line)}this._drawSelectionMarkersIfSelected(t)}}},i.prototype._calculateXPointsForLines=function(){var t=this.chartPanel.contentFrame.width,e=this.cartesianPoints(),i=e[0].x,o=e[1].x,r=[i,o];i===o?o=this._isDirectionRight?o+1:o-1:this._isDirectionRight=i<o;for(var n=o-i,a=o;;){var l=a+n;if(!(i<o&&l<t||o<i&&0<l))break;a=l,r.push(a)}return r},i);function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._drawingPoints=[],t}r.CyclicLinesDrawing=t,r.Drawing.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(d){"use strict";var e;(e=d.DrawingEvent||(d.DrawingEvent={})).TEXT_CHANGED="drawingTextChanged";var i,t=(i=d.Drawing,__extends(o,i),Object.defineProperty(o,"className",{get:function(){return"text"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"text",{get:function(){return this._options.text||""},set:function(t){t=t||"",this._setOption("text",t,e.TEXT_CHANGED),this._updateLines()},enumerable:!0,configurable:!0}),o.prototype._updateLines=function(){this._lines=this.text.split("\n")},o.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start"]},o.prototype.bounds=function(){var t=this.cartesianPoint(0);if(!t)return null;var e=this._lines.reduce(function(t,e){return t.length>=e.length?t:e}),i=this.actualTheme,o=d.DummyCanvasContext.measureText(e,i.text);return{left:t.x,top:t.y-o.height/2,width:o.width,height:o.height*this._lines.length+this._lines.length}},o.prototype._finishUserDrawing=function(){var e=this;d.Drawing.prototype._finishUserDrawing.call(this),d.UI.ViewLoader.drawingSettingsDialog(function(t){t.show({chart:e.chart,drawing:e,cancel:function(){e.chartPanel.removeDrawings(e)},always:function(){e.chartPanel&&e.chartPanel.setNeedsUpdate()}})})},o.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.bounds();return e&&d.Geometry.isPointInsideOrNearRect(t,e)},o.prototype.loadState=function(t){i.prototype.loadState.call(this,t),this._updateLines()},o.prototype.draw=function(){if(this.visible){var t=this._lines;if(0!==t.length){var e=this.cartesianPoint(0);if(e){var i=this.renderer,o=this.actualTheme.text;i.textTheme(o),i.textOptions({baseline:d.TextBaseline.MIDDLE,align:d.TextAlign.LEFT});var r=this.bounds(),n=d.DummyCanvasContext.measureText(t[0],o).height,a=Math.round(n/2),l=e.y,s="underline"===o.decoration;s&&i.beginPath();for(var c,h=0,u=t;h<u.length;h++){var f=u[h];i.fillText(f,e.x,l),l+=a,s&&i.line(e.x,l,e.x+r.width,l),l+=a}s&&i.stroke({strokeColor:o.fillColor}),this.selected&&(l=(e.y+(e.y+r.height-n))/2,c=[{x:e.x-5,y:l},{x:e.x+r.width+5,y:l}],this._drawSelectionMarkers(c))}}}},o);function o(t){var e=i.call(this,t)||this;return e._lines=[],e._updateLines(),e}d.TextDrawing=t,d.Drawing.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(d){"use strict";var e;(e=d.DrawingEvent||(d.DrawingEvent={})).URL_CHANGED="drawingUrlChanged";var i,c=10,h=10,t=(i=d.Drawing,__extends(o,i),Object.defineProperty(o,"className",{get:function(){return"image"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"url",{get:function(){return this._options.url||""},set:function(t){this._setOption("url",t,e.URL_CHANGED),this._reloadImage()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"size",{get:function(){return this._options.size},set:function(t){this._setOption("size",t,e.SIZE_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"actualSize",{get:function(){var t=this.size;if(t)return t;var e=this._image;return e?{width:e.width,height:e.height}:null},enumerable:!0,configurable:!0}),o.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start"]},o.prototype._reloadImage=function(){this._image&&(this._image.src=this.url,this._image.crossOrigin="Anonymous")},o.prototype.bounds=function(){var t=this.cartesianPoint(0);if(!t)return null;var e=this.actualSize;return e?{left:t.x,top:t.y,width:e.width||c,height:e.height||h}:null},o.prototype._markerPoints=function(t){t=t||this.cartesianPoint(0);var e=this._image,i=t.x,o=t.y;if(e.width<=0)return{x:Math.round(i+c/2),y:Math.round(o+h/2)};var r=this.actualSize,n=i+r.width,a=o+r.height,l=Math.round((i+n)/2),s=Math.round((o+a)/2);return[t,{x:l,y:o},{x:n,y:o},{x:n,y:s},{x:n,y:a},{x:l,y:a},{x:i,y:a},{x:i,y:s}]},o.prototype._finishUserDrawing=function(){var e=this;i.prototype._finishUserDrawing.call(this),d.UI.ViewLoader.drawingSettingsDialog(function(t){t.show({chart:e.chart,drawing:e,cancel:function(){e.chartPanel.removeDrawings(e)},always:function(){e.chartPanel&&e.chartPanel.setNeedsUpdate()}})})},o.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.bounds();return e&&d.Geometry.isPointInsideOrNearRect(t,e)},o.prototype.loadState=function(t){i.prototype.loadState.call(this,t),this._reloadImage()},o.prototype._handlePanGesture=function(t,e){switch(t.state){case d.GestureState.STARTED:var i=this._markerPoints();if(i&&1<i.length)for(var o=0;o<i.length;o++)if(d.Geometry.isPointNearPoint(e.pointerPosition,i[o]))return this._setDragPoint(o),this._updateCursor(),!0;break;case d.GestureState.CONTINUED:if(this._dragPoint<0)break;var r,n,a,l=this.projection,s=this.chartPoints[0],c=e.pointerPosition,h=this.actualSize,u=t.moveOffset,f=s.toPoint(l);switch(this._dragPoint){case 0:h&&(n=h.width,r=h.height,a=h.width/h.height,h.width-=u.x,h.height=h.width/a,s.moveTo(f.x+(n-h.width),f.y+(r-h.height),l));break;case 1:s.moveToY(c.y,l),h&&(h.height-=s.getY(l)-f.y);break;case 2:h&&(r=h.height,a=h.width/h.height,h.height-=u.y,h.width=h.height*a,s.moveToY(f.y+(r-h.height),l));break;case 3:h&&(h.width+=u.x);break;case 4:h&&(a=h.width/h.height,h.width+=u.x,h.height=h.width/a);break;case 5:h&&(h.height+=u.y);break;case 6:h&&(n=h.width,a=h.width/h.height,h.width-=u.x,h.height=h.width/a,s.moveToX(f.x+(n-h.width),l));break;case 7:s.moveToX(c.x,l),h&&(h.width-=s.getX(l)-f.x);break;default:return!0}return this.size=h,!0}return!1},o.prototype._updateCursor=function(){var t;switch(this._dragPoint){case 0:case 4:t=d.DrawingCursorClass.RESIZE_NWSE;break;case 1:case 5:t=d.DrawingCursorClass.RESIZE_NS;break;case 2:case 6:t=d.DrawingCursorClass.RESIZE_NESW;break;case 3:case 7:t=d.DrawingCursorClass.RESIZE_EW}t&&this.changeCursor(t)},o.prototype.draw=function(){var t,e,i,o,r;!this.visible||(t=this.cartesianPoint(0))&&(e=this.renderer,i=t.x,o=t.y,0<this._image.width?(r=this.size)?(r.width<0&&(i+=r.width),r.height<0&&(o+=r.height),e.image(this._image,i,o,Math.abs(r.width),Math.abs(r.height))):e.image(this._image,i,o):(e.rectPath(i,o,c,h),e.line(i,o,i+c,o+h),e.line(i,o+h,i+c,o),e.stroke({strokeColor:"red",width:1})),this.selected&&this._drawSelectionMarkers(this._markerPoints(t)))},o);function o(t){var e=i.call(this,t)||this;return e._image=new Image,e._image.onload=function(){var t=e.chartPanel;t&&t.setNeedsUpdate()},e.url=t&&t.url,e}d.ImageDrawing=t,d.Drawing.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(v){"use strict";var i,t=(i=v.Drawing,__extends(e,i),Object.defineProperty(e,"className",{get:function(){return"balloon"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._options.text||""},set:function(t){t=t||"",this._setOption("text",t,v.DrawingEvent.TEXT_CHANGED),this._updateLines()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cornerRadius",{get:function(){return this._options.cornerRadius||this._defaults.corderRadius||e.defaults.corderRadius},set:function(t){if(t&&!v.JsUtil.isPositiveNumber(t))throw new Error("Corder radius must be a positive number.");this._options.cornerRadius=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchorSize",{get:function(){return this._options.anchorSize||this._defaults.anchorSize||e.defaults.anchorSize},set:function(t){this._options.anchorSize=t},enumerable:!0,configurable:!0}),e.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start"]},e.prototype.bounds=function(){if(!this._leftTopPoint)return null;if(!this.cartesianPoint(0))return null;var t=this._leftTopPoint.x,e=this._leftTopPoint.y;return{left:t,top:e,width:Math.abs(this._rightBottomPoint.x-t),height:Math.abs(this._rightBottomPoint.y-e)}},e.prototype._finishUserDrawing=function(){var e=this;i.prototype._finishUserDrawing.call(this),v.UI.ViewLoader.drawingSettingsDialog(function(t){t.show({chart:e.chart,drawing:e,cancel:function(){e.chartPanel.removeDrawings(e)},always:function(){e.chartPanel&&e.chartPanel.setNeedsUpdate()}})})},e.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.bounds();return e&&v.Geometry.isPointInsideOrNearRect(t,e)},e.prototype.loadState=function(t){i.prototype.loadState.call(this,t),this._updateLines()},e.prototype.draw=function(){if(this.visible){var t=this.cartesianPoint(0);if(t){var e=this._lines,i=e.reduce(function(t,e){return t.length>=e.length?t:e}),o=this.renderer,r=this.actualTheme,n=r.text,a=v.DummyCanvasContext.measureText(i,r.text),l=Math.ceil(a.width/2),s=this.cornerRadius,c=l+s,h=Math.ceil(this.anchorSize.width/2),u=this.anchorSize.height,f=t.y-u,d=f-a.height*e.length-u;o.linePath(t.x,t.y,t.x-h,f),o.lineTo(t.x-l,f);var p=t.x-c;o.quadraticCurve(p,f,p,f-s),o.lineTo(p,d+s),o.quadraticCurve(p,d,t.x-l,d),o.lineTo(t.x+l,d);var y=t.x+c;o.quadraticCurve(y,d,y,d+s),o.lineTo(y,f-s),o.quadraticCurve(y,f,t.x+l,f),o.lineTo(t.x+h,f),o.closePath(),o.fillStroke(r.fill,r.line),this._leftTopPoint={x:p,y:d},this._rightBottomPoint={x:y,y:t.y},o.textTheme(r.text),o.textOptions({baseline:v.TextBaseline.MIDDLE,align:v.TextAlign.LEFT});var m="underline"===n.decoration,_=Math.round(d+2*a.height/3+1);m&&o.beginPath();for(var C=0,b=e;C<b.length;C++){var g,S=b[C];o.fillText(S,t.x-l,_),m&&(g=5*a.height/9-1,o.line(t.x-l,_+g,t.x+l,_+g)),_+=a.height}m&&o.stroke({strokeColor:n.fillColor}),this._drawSelectionMarkersIfSelected(t)}}},e.prototype._updateLines=function(){this._lines=this.text.split("\n")},e.defaults={corderRadius:5,anchorSize:{width:10,height:10}},e);function e(t){var e=i.call(this,t)||this;return e._lines=[],e._updateLines(),e}v.BalloonDrawing=t,v.Drawing.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(M){"use strict";M.MeasureArrowDrawingMode={START:"start",END:"end",BOTH:"both"};var e,t=(e=M.Drawing,__extends(i,e),Object.defineProperty(i,"className",{get:function(){return"measure"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),i.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.end"]},Object.defineProperty(i.prototype,"cornerRadius",{get:function(){var t=this._options.cornerRadius;return null!=t?t:i.defaults.cornerRadius},set:function(t){if(t&&!M.JsUtil.isPositiveNumber(t))throw new Error("Corder radius must be a positive number.");this._options.cornerRadius=t},enumerable:!0,configurable:!0}),i.prototype.bounds=function(){var t=this.cartesianPoints();return t.length<this.pointsNeeded?null:{left:Math.min(t[0].x,t[1].x),top:Math.min(t[0].y,t[1].y),width:Math.abs(t[0].x-t[1].x),height:Math.abs(t[0].y-t[1].y)}},i.prototype._markerPoints=function(t){if(!(t=t||this.bounds())){var e=this.cartesianPoint(0);return e&&[e]}var i=Math.round(t.left+t.width/2),o=Math.round(t.top+t.height/2),r=t.left+t.width,n=t.top+t.height;return[{x:t.left,y:t.top},{x:i,y:t.top},{x:r,y:t.top},{x:r,y:o},{x:r,y:n},{x:i,y:n},{x:t.left,y:n},{x:t.left,y:o}]},i.prototype._normalizePoints=function(){var t,e,i=this.bounds();i&&(t=this.projection,(e=this.chartPoints)[0].moveTo(i.left,i.top,t),e[1].moveTo(i.left+i.width,i.top+i.height,t))},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();return 1<e.length&&M.Geometry.isPointNearRectPoints(t,e[0],e[1])},i.prototype._handlePanGesture=function(t,e){switch(t.state){case M.GestureState.STARTED:var i=this._markerPoints();if(i&&1<i.length)for(var o=0;o<i.length;o++)if(M.Geometry.isPointNearPoint(e.pointerPosition,i[o]))return this._isXDirectionInverted=-1===this._xDirection,this._isYDirectionInverted=1===this._yDirection,this._normalizePoints(),this._setDragPoint(o),this._updateCursor(),!0;break;case M.GestureState.CONTINUED:if(0<=this._dragPoint){var r=this.projection,n=this.chartPoints,a=e.pointerPosition;switch(this._dragPoint){case 0:n[0].moveTo(a.x,a.y,r);break;case 1:n[0].moveToY(a.y,r);break;case 2:n[0].moveToY(a.y,r),n[1].moveToX(a.x,r);break;case 3:n[1].moveToX(a.x,r);break;case 4:n[1].moveTo(a.x,a.y,r);break;case 5:n[1].moveToY(a.y,r);break;case 6:n[0].moveToX(a.x,r),n[1].moveToY(a.y,r);break;case 7:n[0].moveToX(a.x,r)}return!0}}return!1},i.prototype._updateCursor=function(){var t;switch(this._dragPoint){case 0:case 4:t=M.DrawingCursorClass.RESIZE_NWSE;break;case 1:case 5:t=M.DrawingCursorClass.RESIZE_NS;break;case 2:case 6:t=M.DrawingCursorClass.RESIZE_NESW;break;case 3:case 7:t=M.DrawingCursorClass.RESIZE_EW}t&&this.changeCursor(t)},i.prototype._duration=function(){var t=this.bounds();if(!t)return"";var e=moment(this.projection.dateByX(t.left)),i=moment(this.projection.dateByX(t.left+t.width)),o="years",r=i.diff(e,o);return 0===r&&(o="months",r=i.diff(e,o)),0===r&&(o="weeks",r=i.diff(e,o)),0===r&&(o="days",r=i.diff(e,o)),0===r&&(o="hours",r=i.diff(e,o)),0===r&&(o="minutes",r=i.diff(e,o)),0===r&&(o="seconds",r=i.diff(e,o)),r*=this._xDirection,moment.duration(r,o).humanize(!0).replace("in","")},i.prototype.draw=function(){var t,e,i,o,r,n,a,l,s,c,h,u,f,d,p,y,m,_,C,b,g,S,v,w,P,k,x,O,E,I,D,T=this;!this.visible||(t=this.bounds())&&(M.Localization.localizeText(this.chart,"drawing.all.bars").then(function(t){T._textBars=t}),e=Math.round(t.left+t.width/2),i=Math.round(t.top+t.height/2),o=t.left+t.width,r=t.top+t.height,n=this.renderer,a={x:t.left,y:i},l={x:o,y:i},s={x:e,y:t.top},c={x:e,y:r},h=this.actualTheme,n.rectPath(t.left,t.top,t.width,t.height),n.fillStroke(h.fill,h.border),u=this.chartPoints[0],f=this.chartPoints[1],d=this._isXDirectionInverted?u.x<f.x:u.x>f.x,p=this._isYDirectionInverted?u.y>f.y:u.y<f.y,this._xDirection=d?-1:1,this._yDirection=p?-1:1,y=1===this._xDirection?M.MeasureArrowDrawingMode.END:M.MeasureArrowDrawingMode.START,m=1===this._yDirection?M.MeasureArrowDrawingMode.START:M.MeasureArrowDrawingMode.END,this._drawArrowHeadLine(a,l,y),this._drawArrowHeadLine(s,c,m),_=this.projection,C=u.getValue(_),b=f.getValue(_),g=this.chart.barsBetweenPoints(u,f),S=this.panelValueScale.formatValue((C-b)*this._yDirection),v=M.DummyCanvasContext.measureText(S,h.balloon.text),w=(g*this._xDirection).toFixed()+" "+this._textBars+", "+this._duration(),P=M.DummyCanvasContext.measureText(w,h.balloon.text),k=v.height+P.height+2,x=Math.max(v.width,P.width)+2,O=c.x-x/2,D=(I=(E=t.top+t.height+4)+v.height)+v.height,this._drawRoundRect(O,E,x,k),n.textTheme(h.balloon.text),n.textOptions({baseline:M.TextBaseline.ALPHABETIC,align:M.TextAlign.LEFT}),n.fillText(S,3+O,I),n.fillText(w,3+O,D),this.selected&&this._drawSelectionMarkers(this._markerPoints(t)))},i.prototype._drawArrowHeadLine=function(t,e,i){var o,r,n=this.renderer,a=this.actualTheme;n.linePath(t.x,t.y,e.x,e.y),n.stroke(a.line);var l=e.x-t.x,s=e.y-t.y,c=(e.x>t.x?-90:90)*Math.PI/180;switch(i){case M.MeasureArrowDrawingMode.BOTH:(o=Math.atan(s/l)+c)===Math.PI&&(o=0),0===(r=Math.atan(s/l)-c)&&(r=Math.PI),this._drawArrow(t,o),this._drawArrow(e,r);break;case M.MeasureArrowDrawingMode.START:(o=Math.atan(s/l)+c)===Math.PI&&(o=0),this._drawArrow(t,o);break;case M.MeasureArrowDrawingMode.END:0===(r=Math.atan(s/l)-c)&&(r=Math.PI),this._drawArrow(e,r)}},i.prototype._drawArrow=function(t,e){var i=this.renderer,o=this.actualTheme;i.save(),i.translate(t.x,t.y),i.rotate(e),i.polygonPath(0,0,5,5,0,0,-5,5),i.stroke(o.line),i.restore()},i.prototype._drawRoundRect=function(t,e,i,o,r){null==r&&(r=this.cornerRadius),i+=r,o+=r;var n=this.renderer,a=t+i,l=e+o;n.horLinePath(t+r,a-r,e),n.quadraticCurve(a,e,a,e+r),n.lineTo(a,l-r),n.quadraticCurve(a,l,a-r,l),n.lineTo(t+r,l),n.quadraticCurve(t,l,t,l-r),n.lineTo(t,e+r),n.quadraticCurve(t,e,t+r,e),n.closePath();var s=this.actualTheme.balloon;n.fillStroke(s.fill,s.border)},i.defaults={cornerRadius:5},i);function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._isXDirectionInverted=!1,t._isYDirectionInverted=!1,t._xDirection=1,t._yDirection=1,t}M.MeasureDrawing=t,M.Drawing.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(h){"use strict";var t,e="scxMeasureTool",i=(t=h.Drawing,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"measureTool"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),o.prototype.bounds=function(){var t=this.cartesianPoints();return t.length<this.pointsNeeded?null:{left:Math.min(t[0].x,t[1].x),top:Math.min(t[0].y,t[1].y),width:Math.abs(t[0].x-t[1].x),height:Math.abs(t[0].y-t[1].y)}},o.prototype._createInfoControls=function(){var t;this._infoControls||(t=this.chartPanel.container.scxAppend("div",e),this._infoControls={rootDiv:t,firstPoint:t.scxAppend("div"),lastPoint:t.scxAppend("div"),range:t.scxAppend("div"),bars:t.scxAppend("div")})},o.prototype._finishUserDrawing=function(){t.prototype._finishUserDrawing.call(this),this.remove()},o.prototype.remove=function(){return this._infoControls&&(this._infoControls.rootDiv.remove(),this._infoControls=null),t.prototype.remove.call(this)},o.prototype.draw=function(){var t,e;!this.visible||0!==(t=this.cartesianPoints()).length&&(1<t.length&&((e=this.renderer).polylinePath(t),e.stroke(this.actualTheme.line)),this._drawSelectionMarkersIfSelected(t),this._drawValues(t),this._drawInfo())},o.prototype._drawValues=function(t){var e,i,o=this.renderer,r=this.projection,n=this.actualTheme,a=this._getSelectionMarkerWidth(n)+5,l=this.chartPoints,s=l[0].getValue(r),c=this.chartPanel.formatValue(s);o.textOptions({baseline:h.TextBaseline.BOTTOM}),o.textTheme(n.text),o.fillText(c,t[0].x,t[0].y-a),1<l.length&&(e=l[1].getValue(r),i=this.chartPanel.formatValue(e),o.fillText(i,t[1].x,t[1].y-a))},o.prototype._drawInfo=function(){this._createInfoControls();var t,e,i,o,r,n=this.actualTheme,a=this.projection,l=this._infoControls,s=this.chartPoints,c=this.chartPanel,h=c.chart.dateScale,u=s[0].getDate(a),f=s[0].getValue(a);l.firstPoint.text(h.formatDate(u)+" "+c.formatValue(f)),1<s.length&&(t=s[1].getDate(a),e=s[1].getValue(a),l.lastPoint.text(h.formatDate(t)+" "+c.formatValue(e)),o=e-f,(i=this.chart.instrument)&&i.tickSize?l.range.text("Range (Pips) "+c.formatValue(o/i.tickSize)):l.range.text("Range "+c.formatValue(o)),r=this.chart.barsBetweenPoints(s[0],s[1]),l.bars.text("Bars "+r)),l.rootDiv.scxPosition(this.chartPanel.contentFrame.left,0).scxTextStyle(n.text).scxFill(n.fill)},o);function o(){return null!==t&&t.apply(this,arguments)||this}h.MeasureToolDrawing=i,h.Drawing.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(r){"use strict";r.FibonacciLevelTextHorPosition={LEFT:"left",CENTER:"center",RIGHT:"right"},r.FibonacciLevelTextVerPosition={TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"},r.FibonacciLevelLineExtension={NONE:"none",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",BOTH:"both"};var n,t,e={createPointBehavior:null,levels:[{value:.382},{value:.5},{value:.618},{value:1}],showTrendLine:!0,showLevelLines:!0,showLevelBackgrounds:!0,showLevelValues:!0,showLevelPrices:!0,showLevelPercents:!0,levelTextHorPosition:r.FibonacciLevelTextHorPosition.RIGHT,levelTextVerPosition:r.FibonacciLevelTextVerPosition.BOTTOM};(t=n=r.DrawingEvent||(r.DrawingEvent={})).LEVELS_CHANGED="drawingLevelsChanged",t.SHOW_TREND_LINE_CHANGED="drawingShowTrendLineChanged",t.SHOW_LEVEL_LINES_CHANGED="drawingShowLevelLinesChanged",t.SHOW_LEVEL_BACKGROUNDS_CHANGED="drawingShowLevelBackgroundsChanged",t.SHOW_LEVEL_VALUES_CHANGED="drawingShowLevelValuesChanged",t.SHOW_LEVEL_PRICES_CHANGED="drawingShowLevelPricesChanged",t.SHOW_LEVEL_PERCENTS_CHANGED="drawingShowLevelPercentsChanged",t.LEVEL_TEXT_HOR_POSITION_CHANGED="drawingLevelTextHorPositionChanged",t.LEVEL_TEXT_VER_POSITION_CHANGED="drawingLevelTextVerPositionChanged",t.LEVEL_LINES_EXTENSION_CHANGED="drawingLevelLinesExtensionChanged",t.REVERSE_CHANGED="drawingReverseChanged";var i,o=(i=r.Drawing,__extends(a,i),Object.defineProperty(a,"subClassName",{get:function(){return"fibonacci"},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"levels",{get:function(){return this._optionValue("levels")||a.defaults.levels},set:function(t){if(null!=t&&!Array.isArray(t))throw new TypeError("Levels must be an array of numbers.");for(var e=0,i=t.length;e<i-1;e++)for(var o,r=e+1;r<i;r++){t[e].value>t[r].value&&(o=t[e],t[e]=t[r],t[r]=o)}this._options.levels=t,this.fire(n.LEVELS_CHANGED,t)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showTrendLine",{get:function(){var t=this._optionValue("showTrendLine");return null!=t?t:a.defaults.showTrendLine},set:function(t){this._setOption("showTrendLine",t,n.SHOW_TREND_LINE_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showLevelLines",{get:function(){var t=this._optionValue("showLevelLines");return null!=t?t:a.defaults.showLevelLines},set:function(t){this._setOption("showLevelLines",t,n.SHOW_LEVEL_LINES_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showLevelBackgrounds",{get:function(){var t=this._optionValue("showLevelBackgrounds");return null!=t?t:a.defaults.showLevelBackgrounds},set:function(t){this._setOption("showLevelBackgrounds",t,n.SHOW_LEVEL_BACKGROUNDS_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showLevelValues",{get:function(){var t=this._optionValue("showLevelValues");return null!=t?t:a.defaults.showLevelValues},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showLevels",{set:function(t){this._setOption("showLevelValues",t,n.SHOW_LEVEL_VALUES_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showLevelPrices",{get:function(){var t=this._optionValue("showLevelPrices");return null!=t?t:a.defaults.showLevelPrices},set:function(t){this._setOption("showLevelPrices",t,n.SHOW_LEVEL_PRICES_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"showLevelPercents",{get:function(){var t=this._optionValue("showLevelPercents");return null!=t?t:a.defaults.showLevelPercents},set:function(t){this._setOption("showLevelPercents",t,n.SHOW_LEVEL_PERCENTS_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"levelTextHorPosition",{get:function(){var t=this._optionValue("levelTextHorPosition");return null!=t?t:a.defaults.levelTextHorPosition},set:function(t){this._setOption("levelTextHorPosition",t,n.LEVEL_TEXT_HOR_POSITION_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"levelTextVerPosition",{get:function(){var t=this._optionValue("levelTextVerPosition");return null!=t?t:a.defaults.levelTextVerPosition},set:function(t){this._setOption("levelTextVerPosition",t,n.LEVEL_TEXT_VER_POSITION_CHANGED)},enumerable:!0,configurable:!0}),a.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.end"]},a.prototype._showSettingsDialog=function(){var e=this;this.chart&&r.UI.ViewLoader.fibonacciDrawingSettingsDialog(function(t){t.show({chart:e.chart,drawing:e})})},a.prototype._applyTextPosition=function(){var t=this.renderer,e=this._textBaselineFromVerPosition(),i=this._graphicsTextAlign();t.textOptions({align:i,baseline:e})},a.prototype._textBaselineFromVerPosition=function(){var t=r.FibonacciLevelTextVerPosition,e=r.TextBaseline;switch(this.levelTextVerPosition){case t.MIDDLE:return e.MIDDLE;case t.TOP:return e.BOTTOM;case t.BOTTOM:return e.TOP;default:throw new Error("Unsupported level text vertical position: "+this.levelTextVerPosition)}},a.prototype._graphicsTextAlign=function(){var t=r.FibonacciLevelTextHorPosition,e=r.TextAlign;switch(this.levelTextHorPosition){case t.CENTER:return e.CENTER;case t.LEFT:return e.RIGHT;case t.RIGHT:return e.LEFT;default:throw new Error("Unsupported level text horizontal position: "+this.levelTextHorPosition)}},a.prototype._isLevelVisible=function(t){return null==t.visible||t.visible},a.prototype._adjustXWithTextOffset=function(t){switch(this.levelTextHorPosition){case r.FibonacciLevelTextHorPosition.LEFT:return t-this._textOffset;case r.FibonacciLevelTextHorPosition.RIGHT:return t+this._textOffset;default:return t}},a.prototype._adjustYWithTextOffset=function(t){switch(this.levelTextVerPosition){case r.FibonacciLevelTextVerPosition.TOP:return t-this._textOffset;case r.FibonacciLevelTextVerPosition.BOTTOM:return t+this._textOffset;default:return t}},a.prototype._formatLevelValue=function(t){return this.showLevelPercents?Number(100*t.value).toFixed(2)+"%":Number(t.value).toFixed(3)},a.prototype._formatPriceAtY=function(t){return Number(this.projection.valueByY(t)).toFixed(3)},a.prototype._levelValueOffsetFromVerPosition=function(t,e){var i=r.FibonacciLevelTextVerPosition,o=t?t.line.width:e.line.width;switch(this.levelTextVerPosition){case i.TOP:return-o/2;case i.BOTTOM:return o/2;default:return 0}},a.prototype._levelValueOffsetFromHorPosition=function(t,e){var i=r.FibonacciLevelTextHorPosition,o=t?t.line.width:e.line.width;switch(this.levelTextHorPosition){case i.LEFT:return-o/2;case i.RIGHT:return o/2;default:return 0}},a.defaults=e,a);function a(t){var e=i.call(this,t)||this;return e._textOffset=2,e}r.FibonacciDrawingBase=o}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(m){"use strict";var t,e=(t=m.FibonacciDrawingBase,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"fibonacciArcs"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),i.prototype.bounds=function(){var i=this,t=this.cartesianPoints();if(t.length<this.pointsNeeded)return null;var e=m.Geometry.length(t[0],t[1]),o=this.levels.reduce(function(t,e){return i._isLevelVisible(e)?Math.max(t,e.value):t},Number.MIN_VALUE),r=Math.round(e*o);return{left:t[0].x-r,top:t[0].y-r,width:2*r,height:2*r}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();if(e.length<this.pointsNeeded)return!1;if(this.showTrendLine&&m.Geometry.isPointNearPolyline(t,e))return!0;if(this.showLevelLines||this.showLevelBackgrounds)for(var i=m.Geometry.length(e[0],e[1]),o=0,r=this.levels;o<r.length;o++){var n=r[o];if(this._isLevelVisible(n)){var a=Math.round(i*n.value);if(m.Geometry.isPointNearCircle(t,e[0],a))return!0}}return this.selected&&m.Geometry.isPointNearPoint(t,e)},i.prototype._handlePanGesture=function(t,e){switch(t.state){case m.GestureState.STARTED:var i=this.cartesianPoint(1);if(i&&m.Geometry.isPointNearPoint(e.pointerPosition,i))return this._setDragPoint(1),this.changeCursor(m.DrawingCursorClass.RESIZE),!0;break;case m.GestureState.CONTINUED:if(1===this._dragPoint)return this.chartPoints[1].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype.draw=function(){if(this.visible){var t=this.cartesianPoints();if(0!==t.length){var e=this.renderer,i=this.actualTheme;if(1<t.length){var o=m.Geometry.length(t[0],t[1]),r=t[0].x,n=t[0].y,a=void 0;this._applyTextPosition();for(var l=0,s=this.levels;l<s.length;l++){var c,h,u,f,d,p,y=s[l];this._isLevelVisible(y)&&(c=y.theme?y.theme:i,h=Math.round(o*y.value),this.showLevelBackgrounds&&(u=c.fill||i.fill,e.circlePath(r,n,h),a?(e.circle(r,n,a),e.fill(u,!1,"evenodd")):e.fill(u,!0)),this.showLevelLines&&(e.circlePath(r,n,h),e.stroke(c.line||i.line)),this.showLevelValues&&(f=this._formatLevelValue(y),d=this._levelValueOffsetFromVerPosition(c,i),p=c.text||i.text,e.fillText(f,r,n+h+d,p)),a=h)}this.showTrendLine&&(e.polylinePath(t),e.stroke(i.trendLine))}this._drawSelectionMarkersIfSelected(t)}}},i);function i(){return null!==t&&t.apply(this,arguments)||this}m.FibonacciArcsDrawing=e,m.Drawing.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(C){"use strict";var t,e=(t=C.FibonacciDrawingBase,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"fibonacciEllipses"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),i.prototype.bounds=function(){var i=this,t=this.cartesianPoints();if(t.length<this.pointsNeeded)return null;var e=C.Geometry.xProjectionLength(t[0],t[1]),o=C.Geometry.yProjectionLength(t[0],t[1]),r=this.levels.reduce(function(t,e){return i._isLevelVisible(e)?Math.max(t,e.value):t},Number.MIN_VALUE),n=Math.round(e*r),a=Math.round(o*r);return{left:t[0].x-n,top:t[0].y-a,width:2*n,height:2*a}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();if(e.length<this.pointsNeeded)return!1;if(this.showTrendLine&&C.Geometry.isPointNearPolyline(t,e))return!0;if(this.showLevelLines||this.showLevelBackgrounds)for(var i=C.Geometry.xProjectionLength(e[0],e[1]),o=C.Geometry.yProjectionLength(e[0],e[1]),r=0,n=this.levels;r<n.length;r++){var a=n[r];if(this._isLevelVisible(a)){var l=Math.round(i*a.value),s=Math.round(o*a.value);if(C.Geometry.isPointNearEllipseWithRadiuses(t,e[0],l,s))return!0}}return this.selected&&C.Geometry.isPointNearPoint(t,e)},i.prototype._handlePanGesture=function(t,e){switch(t.state){case C.GestureState.STARTED:var i=this.cartesianPoint(1);if(i&&C.Geometry.isPointNearPoint(e.pointerPosition,i))return this._setDragPoint(1),this.changeCursor(C.DrawingCursorClass.RESIZE),!0;break;case C.GestureState.CONTINUED:if(1===this._dragPoint)return this.chartPoints[1].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype.draw=function(){if(this.visible){var t=this.cartesianPoints();if(0!==t.length){var e=this.renderer,i=this.actualTheme;if(1<t.length){var o=t[0].x,r=t[0].y,n=C.Geometry.xProjectionLength(t[0],t[1]),a=C.Geometry.yProjectionLength(t[0],t[1]),l=void 0;this._applyTextPosition();for(var s=0,c=this.levels;s<c.length;s++){var h,u,f,d,p,y,m,_=c[s];this._isLevelVisible(_)&&(h=_.theme?_.theme:i,u=Math.round(n*_.value),f=Math.round(a*_.value),this.showLevelBackgrounds&&(d=h.fill||i.fill,e.save(),e.beginPath(),e.translate(o,r),u!==f&&e.scale(1,f/u),e.circle(0,0,u),l?(e.circle(0,0,l),e.fill(d,!1,"evenodd")):e.fill(d),e.restore(),l=u),this.showLevelLines&&(e.ellipsePath(o,r,u,f),e.stroke(h.line||i.line)),this.showLevelValues&&(p=this._formatLevelValue(_),y=this._levelValueOffsetFromVerPosition(h,i),m=h.text||i.text,e.fillText(p,o,r+f+y,m)))}this.showTrendLine&&(e.polylinePath(t),e.stroke(i.trendLine))}this._drawSelectionMarkersIfSelected(t)}}},i);function i(){return null!==t&&t.apply(this,arguments)||this}C.FibonacciEllipsesDrawing=e,C.Drawing.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(c){"use strict";var t,e={levels:[{value:0},{value:.2361},{value:.382},{value:.5},{value:.618},{value:.764},{value:1}],reverse:!1,levelTextVerPosition:c.FibonacciLevelTextVerPosition.MIDDLE,levelLinesExtension:c.FibonacciLevelLineExtension.NONE},i=(t=c.FibonacciDrawingBase,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"fibonacciRetracements"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"reverse",{get:function(){var t=this._optionValue("reverse");return null!=t?t:o.defaults.reverse},set:function(t){this._setOption("reverse",t,c.DrawingEvent.REVERSE_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"levelLinesExtension",{get:function(){var t=this._optionValue("levelLinesExtension");return null!=t?t:o.defaults.levelLinesExtension},set:function(t){this._setOption("levelLinesExtension",t,c.DrawingEvent.LEVEL_LINES_EXTENSION_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),o.prototype.bounds=function(){var i=this,t=this.cartesianPoints();if(t.length<this.pointsNeeded)return null;var e=this._linesXRange(t),o=this.levels.reduce(function(t,e){return i._isLevelVisible(e)?Math.max(t,e.value):t},Number.MIN_VALUE),r=this.reverse?Math.round((t[0].y-t[1].y)*o+t[1].y):Math.round((t[1].y-t[0].y)*o+t[0].y),n={x:e.min,y:r},a={x:e.max,y:r};return{left:Math.min(t[0].x,t[1].x,n.x,a.x),top:Math.min(t[0].y,t[1].y,n.y,a.y),width:Math.abs(Math.max(t[0].x,t[1].x)-Math.min(t[0].x,t[1].x)),height:Math.abs(Math.max(t[0].y,t[1].y,n.y,a.y)-Math.min(t[0].y,t[1].y,n.y,a.y))}},o.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();if(e.length<this.pointsNeeded)return!1;if(this.showTrendLine&&c.Geometry.isPointNearPolyline(t,e))return!0;if(this.showLevelLines||this.showLevelBackgrounds)for(var i=this._linesXRange(e),o=0,r=this.levels;o<r.length;o++){var n=r[o];if(this._isLevelVisible(n)){var a=this.reverse?Math.round((e[0].y-e[1].y)*n.value+e[1].y):Math.round((e[1].y-e[0].y)*n.value+e[0].y),l={x:i.min,y:a},s={x:i.max,y:a};if(c.Geometry.isPointNearLine(t,l,s))return!0}}return this.selected&&c.Geometry.isPointNearPoint(t,e)},o.prototype._handlePanGesture=function(t,e){switch(t.state){case c.GestureState.STARTED:var i=this.cartesianPoints();if(1<i.length)for(var o=0;o<i.length;o++)if(c.Geometry.isPointNearPoint(e.pointerPosition,i[o]))return this._setDragPoint(o),this.changeCursor(c.DrawingCursorClass.RESIZE),!0;break;case c.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},o.prototype.draw=function(){if(this.visible){var t=this.cartesianPoints();if(0!==t.length){var e=this.renderer,i=this.actualTheme;if(1<t.length){var o=this._linesXRange(t),r=void 0,n=void 0;this.showLevelValues&&(n=this._levelTextX(o),this._applyTextPosition());for(var a=0,l=this.levels;a<l.length;a++){var s,c,h,u,f,d=l[a];this._isLevelVisible(d)&&(s=d.theme?d.theme:i,c=this.reverse?Math.round((t[0].y-t[1].y)*d.value+t[1].y):Math.round((t[1].y-t[0].y)*d.value+t[0].y),this.showLevelBackgrounds&&(r&&(e.polygonPath(o.min,r,o.max,r,o.max,c,o.min,c),e.fill(s.fill||i.fill)),r=c),this.showLevelLines&&(e.linePath(o.min,c,o.max,c),e.stroke(s.line||i.line)),this.showLevelValues&&(h=this._formatLevelValue(d),u=this._levelValueOffsetFromHorPosition(s,i),this.showLevelPrices&&(h+=" ("+this._formatPriceAtY(c)+")"),e.textTheme(s.text||i.text),(f=this._levelTextAlign())&&e.textOptions({align:f}),e.fillText(h,n,this._adjustYWithTextOffset(c)+u)))}}1<t.length&&this.showTrendLine&&(e.polylinePath(t),e.stroke(i.trendLine)),this._drawSelectionMarkersIfSelected(t)}}},o.prototype._levelTextX=function(t){var e,i=c.FibonacciLevelTextHorPosition;switch(this.levelTextHorPosition){case i.CENTER:e=(t.min+t.max)/2;break;case i.LEFT:e=t.min;break;case i.RIGHT:e=t.max;break;default:throw new Error("Unknown text horizontal position: "+this.levelTextHorPosition)}return e=this._adjustXWithTextOffset(e)},o.prototype._levelTextAlign=function(){var t=this.levelLinesExtension,e=c.FibonacciLevelLineExtension,i=c.FibonacciLevelTextHorPosition;switch(this.levelTextHorPosition){case i.RIGHT:if(t===e.RIGHT||t===e.BOTH)return c.TextAlign.RIGHT;break;case i.LEFT:if(t===e.LEFT||t===e.BOTH)return c.TextAlign.LEFT}},o.prototype._linesXRange=function(t){var e=c.FibonacciLevelLineExtension,i=this.chartPanel.contentFrame,o=Math.min(t[0].x,t[1].x),r=Math.max(t[0].x,t[1].x);switch(this.levelLinesExtension){case e.NONE:break;case e.LEFT:o=i.left;break;case e.RIGHT:r=i.right;break;case e.BOTH:o=i.left,r=i.right;break;default:throw new Error("Unknown level lines extension: "+this.levelLinesExtension)}return{min:o,max:r}},o.prototype._adjustXWithTextOffset=function(t){var e=t,i=c.FibonacciLevelLineExtension,o=this.levelLinesExtension,r=c.FibonacciLevelTextHorPosition;switch(this.levelTextHorPosition){case r.LEFT:o===i.LEFT||o===i.BOTH?e+=this._textOffset:e-=this._textOffset;break;case r.RIGHT:o===i.RIGHT||o===i.BOTH?e-=this._textOffset:e+=this._textOffset}return e},o.defaults=e,o);function o(){return null!==t&&t.apply(this,arguments)||this}c.FibonacciRetracementsDrawing=i,c.Drawing.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(x){"use strict";var t,e=(t=x.FibonacciDrawingBase,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"fibonacciFan"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),i.prototype.bounds=function(){var i=this,t=this.cartesianPoints();if(t.length<this.pointsNeeded)return null;var e=t[0].x,o=t[0].y,r=t[1].x,n=t[1].y,a=this.chartPanel.contentFrame,l=r<e?a.left:a.right,s=this.levels.reduce(function(t,e){return i._isLevelVisible(e)?Math.max(t,e.value):t},Number.MIN_VALUE),c=this.levels.reduce(function(t,e){return i._isLevelVisible(e)?Math.min(t,e.value):t},Number.MAX_VALUE),h=Math.round((o-n)*c+n),u=Math.round(o+(l-e)*(h-o)/(r-e)),f=Math.round((o-n)*s+n),d=Math.round(o+(l-e)*(f-o)/(r-e));return{left:Math.min(t[0].x,t[1].x,l),top:Math.min(t[0].y,t[1].y,d,u),width:Math.abs(Math.max(t[0].x,t[1].x,l)-Math.min(t[0].x,t[1].x,l)),height:Math.abs(Math.max(t[0].y,t[1].y,d,u)-Math.min(t[0].y,t[1].y,d,u))}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();if(e.length<this.pointsNeeded)return!1;var i=e[0].x,o=e[0].y,r=e[1].x,n=e[1].y,a=this.chartPanel.contentFrame.right;if(this.showTrendLine&&x.Geometry.isPointNearPolyline(t,e))return!0;if(this.showLevelLines||this.showLevelBackgrounds)for(var l=0,s=this.levels;l<s.length;l++){var c=s[l];if(this._isLevelVisible(c)){var h=Math.round((o-n)*c.value+n),u={x:i,y:o},f={x:a,y:Math.round(o+(a-i)*(h-o)/(r-i))};if(x.Geometry.isPointNearLine(t,u,f))return!0}}return this.selected&&x.Geometry.isPointNearPoint(t,e[1])},i.prototype._handlePanGesture=function(t,e){switch(t.state){case x.GestureState.STARTED:var i=this.cartesianPoints();if(1<i.length)for(var o=0;o<i.length;o++)if(x.Geometry.isPointNearPoint(e.pointerPosition,i[o]))return this._setDragPoint(o),this.changeCursor(x.DrawingCursorClass.RESIZE),!0;break;case x.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype.draw=function(){if(this.visible){var t=this.cartesianPoints();if(0!==t.length){var e=this.renderer,i=this.actualTheme;if(1<t.length){var o=t[0].x,r=t[0].y,n=t[1].x,a=t[1].y,l=this.chartPanel.contentFrame,s=n<o,c=s?l.left:l.right,h=[],u=this._textBaselineFromVerPosition();e.textOptions({align:s?x.TextAlign.LEFT:x.TextAlign.RIGHT,baseline:u});for(var f=0,d=0,p=this.levels;d<p.length;d++){var y,m,_,C,b,g,S,v,w,P,k=p[d];this._isLevelVisible(k)&&(y=k.theme?k.theme:i,m=Math.round((r-a)*k.value+a),_=Math.round(r+(c-o)*(m-r)/(n-o)),this.showLevelBackgrounds&&(2===h.length?(e.polygonPath(h[0].x,h[0].y,h[1].x,h[1].y,o,r,c,_),e.fill(y.fill||i.fill),h[0]={x:c,y:_},h[1]={x:o,y:r}):(h.push({x:c,y:_}),h.push({x:o,y:r}))),this.showLevelLines&&(e.linePath(o,r,c,_),e.stroke(y.line||i.line)),C=y.text||i.text,this.showLevelValues&&(b=x.HtmlUtil.getFontSize(C),g=this.chartPanel.contentFrame.width,S=this.chartPanel.contentFrame.height,w=v=void 0,w=_<b?(v=s?Math.abs(o)*Math.abs(_)/(Math.abs(_)+Math.abs(r)):g-(g-Math.abs(o))*Math.abs(_)/(Math.abs(_)+Math.abs(r)),b):(v=s?c+3:c-3,_),S-b<_&&(v=s?o*(_-S)/(_-r):g-(g-o)*(_-S)/(_-r),w=S-b),P=this._formatLevelValue(k),this.showLevelPrices&&(P+=" ("+this._formatPriceAtY(_)+")"),w+=f,f+=b+b/10,r<w&&(w-=2*(b+b/10)),e.fillText(P,v,w,C)))}}1<t.length&&this.showTrendLine&&(e.polylinePath(t),e.stroke(i.trendLine)),this._drawSelectionMarkersIfSelected(t)}}},i.defaults={levels:[{value:.382},{value:.5},{value:.618}],levelTextVerPosition:x.FibonacciLevelTextVerPosition.MIDDLE},i);function i(){return null!==t&&t.apply(this,arguments)||this}x.FibonacciFanDrawing=e,x.Drawing.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(y){"use strict";var t,e={levels:[{value:0},{value:1},{value:2},{value:3},{value:5},{value:8},{value:13},{value:21},{value:34},{value:55},{value:89}],levelLinesExtension:y.FibonacciLevelLineExtension.BOTH},i=(t=y.FibonacciDrawingBase,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"fibonacciTimeZones"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"levelLinesExtension",{get:function(){var t=this._optionValue("levelLinesExtension");return null!=t?t:o.defaults.levelLinesExtension},set:function(t){this._setOption("levelLinesExtension",t,y.DrawingEvent.LEVEL_LINES_EXTENSION_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),o.prototype.bounds=function(){var i=this,t=this.cartesianPoints();if(t.length<this.pointsNeeded)return null;var e=this.levels.reduce(function(t,e){return i._isLevelVisible(e)?Math.max(t,e.value):t},Number.MIN_VALUE),o=Math.round((t[1].x-t[0].x)*e+t[0].x);return{left:Math.min(t[0].x,o),top:this.chartPanel.frame.top,width:Math.abs(Math.max(t[0].x,o)-Math.min(t[0].x,o)),height:this.chartPanel.frame.height}},o.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();if(e.length<2)return!1;if(this.showTrendLine&&y.Geometry.isPointNearPolyline(t,e))return!0;if(this.showLevelLines||this.showLevelBackgrounds)for(var i=this._linesYRange(e),o=0,r=this.levels;o<r.length;o++){var n=r[o];if(this._isLevelVisible(n)){var a=Math.round((e[1].x-e[0].x)*n.value+e[0].x),l={x:a,y:i.max},s={x:a,y:i.min};if(y.Geometry.isPointNearLine(t,l,s))return!0}}return this.selected&&y.Geometry.isPointNearPoint(t,e)},o.prototype._handlePanGesture=function(t,e){switch(t.state){case y.GestureState.STARTED:var i=this.cartesianPoints();if(1<i.length)for(var o=0;o<i.length;o++)if(y.Geometry.isPointNearPoint(e.pointerPosition,i[o]))return this._setDragPoint(o),this.changeCursor(y.DrawingCursorClass.RESIZE),!0;break;case y.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},o.prototype.draw=function(){if(this.visible){var t=this.cartesianPoints();if(0!==t.length){var e=this.renderer,i=this.actualTheme;if(1<t.length){var o=this._linesYRange(t),r=void 0,n=void 0;if(this.showLevelValues){this._applyTextPosition();var a=void 0;switch(this.levelTextVerPosition){case y.FibonacciLevelTextVerPosition.MIDDLE:n=(o.min+o.max)/2;break;case y.FibonacciLevelTextVerPosition.TOP:n=o.min,a=y.TextBaseline.TOP;break;case y.FibonacciLevelTextVerPosition.BOTTOM:n=o.max,a=y.TextBaseline.BOTTOM}a&&e.textOptions({baseline:a})}for(var l=0,s=this.levels;l<s.length;l++){var c,h,u,f,d,p=s[l];this._isLevelVisible(p)&&(c=p.theme?p.theme:i,h=Math.round((t[1].x-t[0].x)*p.value+t[0].x),this.showLevelBackgrounds&&(r&&(e.polygonPath(r,o.min,r,o.max,h,o.max,h,o.min),e.fill(c.fill||i.fill)),r=h),this.showLevelLines&&(e.linePath(h,o.min,h,o.max),e.stroke(c.line||i.line)),this.showLevelValues&&(u=Number(p.value).toFixed(0),f=this._levelValueOffsetFromHorPosition(c,i),d=c.text||i.text,e.fillText(u,this._adjustXWithTextOffset(h)+f,n,d)))}}1<t.length&&this.showTrendLine&&(e.polylinePath(t),e.stroke(i.trendLine)),this._drawSelectionMarkersIfSelected(t)}}},o.prototype._linesYRange=function(t){var e=y.FibonacciLevelLineExtension,i=this.chartPanel.contentFrame,o=Math.max(t[0].y,t[1].y),r=Math.min(t[0].y,t[1].y);switch(this.levelLinesExtension){case e.NONE:break;case e.TOP:r=0;break;case e.BOTTOM:o=i.height;break;case e.BOTH:r=0,o=i.height;break;default:throw new Error("Unknown level lines extension: "+this.levelLinesExtension)}return{min:r,max:o}},o.defaults=e,o);function o(){return null!==t&&t.apply(this,arguments)||this}y.FibonacciTimeZonesDrawing=i,y.Drawing.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(c){"use strict";var t,e={levels:[{value:0},{value:.2361},{value:.382},{value:.5},{value:.618},{value:.764},{value:1},{value:1.618},{value:2.618},{value:3.618},{value:4.236}],reverse:!1,levelTextVerPosition:c.FibonacciLevelTextVerPosition.MIDDLE,levelLinesExtension:c.FibonacciLevelLineExtension.NONE},i=(t=c.FibonacciDrawingBase,__extends(o,t),Object.defineProperty(o,"className",{get:function(){return"fibonacciExtensions"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"reverse",{get:function(){var t=this._optionValue("reverse");return null!=t?t:o.defaults.reverse},set:function(t){this._setOption("reverse",t,c.DrawingEvent.REVERSE_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"levelLinesExtension",{get:function(){var t=this._optionValue("levelLinesExtension");return null!=t?t:o.defaults.levelLinesExtension},set:function(t){this._setOption("levelLinesExtension",t,c.DrawingEvent.LEVEL_LINES_EXTENSION_CHANGED)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pointsNeeded",{get:function(){return 3},enumerable:!0,configurable:!0}),o.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.middle","drawing.all.dialog.end"]},o.prototype.bounds=function(){var i=this,t=this.cartesianPoints();if(t.length<this.pointsNeeded)return null;var e=this.levels.reduce(function(t,e){return i._isLevelVisible(e)?Math.max(t,e.value):t},Number.MIN_VALUE),o=this.reverse?Math.round((t[0].y-t[1].y)*e+t[2].y):Math.round((t[1].y-t[0].y)*e+t[2].y);return{left:Math.min(t[0].x,t[1].x,t[2].x),top:Math.min(t[0].y,t[1].y,t[2].y,o),width:Math.abs(Math.max(t[0].x,t[1].x,t[2].x)-Math.min(t[0].x,t[1].x,t[2].x)),height:Math.abs(Math.max(t[0].y,t[1].y,t[2].y,o)-Math.min(t[0].y,t[1].y,t[2].y,o))}},o.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();if(e.length<this.pointsNeeded)return!1;if(this.showTrendLine&&c.Geometry.isPointNearPolyline(t,e))return!0;if(this.showLevelLines||this.showLevelBackgrounds)for(var i=this._linesXRange(e),o=0,r=this.levels;o<r.length;o++){var n=r[o];if(this._isLevelVisible(n)){var a=this.reverse?Math.round((e[0].y-e[1].y)*n.value+e[2].y):Math.round((e[1].y-e[0].y)*n.value+e[2].y),l={x:i.min,y:a},s={x:i.max,y:a};if(c.Geometry.isPointNearLine(t,l,s))return!0}}return this.selected&&c.Geometry.isPointNearPoint(t,e)},o.prototype._handlePanGesture=function(t,e){switch(t.state){case c.GestureState.STARTED:var i=this.cartesianPoints();if(1<i.length)for(var o=0;o<i.length;o++)if(c.Geometry.isPointNearPoint(e.pointerPosition,i[o]))return this._setDragPoint(o),this.changeCursor(c.DrawingCursorClass.RESIZE),!0;break;case c.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},o.prototype.draw=function(){if(this.visible){var t=this.cartesianPoints();if(0!==t.length){var e=this.renderer,i=this.actualTheme;if(2<t.length){var o=this._linesXRange(t),r=void 0,n=void 0;this.showLevelValues&&(r=this._valueTextX(o),this._applyTextPosition());for(var a=0,l=this.levels;a<l.length;a++){var s,c,h,u,f,d,p=l[a];this._isLevelVisible(p)&&(s=p.theme?p.theme:i,c=this.reverse?Math.round((t[0].y-t[1].y)*p.value+t[2].y):Math.round((t[1].y-t[0].y)*p.value+t[2].y),this.showLevelBackgrounds&&(n&&(e.polygonPath(o.min,n,o.max,n,o.max,c,o.min,c),e.fill(s.fill||i.fill)),n=c),this.showLevelLines&&(e.linePath(o.min,c,o.max,c),e.stroke(s.line||i.line)),this.showLevelValues&&(h=this._formatLevelValue(p),u=this._levelValueOffsetFromVerPosition(s,i),this.showLevelPrices&&(h+=" ("+this._formatPriceAtY(c)+")"),(f=this._levelTextAlign())&&e.textOptions({align:f}),d=s.text||i.text,e.fillText(h,r,this._adjustYWithTextOffset(c)+u,d)))}}1<t.length&&this.showTrendLine&&(e.polylinePath(t),e.stroke(i.trendLine)),this.selected&&this._drawSelectionMarkers(t)}}},o.prototype._levelTextAlign=function(){var t=this.levelLinesExtension,e=c.FibonacciLevelLineExtension,i=c.FibonacciLevelTextHorPosition;switch(this.levelTextHorPosition){case i.RIGHT:if(t===e.RIGHT||t===e.BOTH)return c.TextAlign.RIGHT;break;case i.LEFT:if(t===e.LEFT||t===e.BOTH)return c.TextAlign.LEFT}},o.prototype._linesXRange=function(t){var e=c.FibonacciLevelLineExtension,i=this.chartPanel.contentFrame,o=Math.min(t[1].x,t[2].x),r=Math.max(t[1].x,t[2].x);switch(this.levelLinesExtension){case e.NONE:break;case e.LEFT:o=i.left;break;case e.RIGHT:r=i.right;break;case e.BOTH:o=i.left,r=i.right;break;default:throw new Error("Unknown level lines extension: "+this.levelLinesExtension)}return{min:o,max:r}},o.prototype._valueTextX=function(t){var e,i=c.FibonacciLevelTextHorPosition;switch(this.levelTextHorPosition){case i.CENTER:e=(t.min+t.max)/2;break;case i.LEFT:e=t.min;break;case i.RIGHT:e=t.max;break;default:throw new Error("Unknown text horizontal position: "+this.levelTextHorPosition)}return e=this._adjustXWithTextOffset(e)},o.prototype._adjustXWithTextOffset=function(t){var e=t,i=c.FibonacciLevelLineExtension,o=this.levelLinesExtension,r=c.FibonacciLevelTextHorPosition;switch(this.levelTextHorPosition){case r.LEFT:o===i.LEFT||o===i.BOTH?e+=this._textOffset:e-=this._textOffset;break;case r.RIGHT:o===i.RIGHT||o===i.BOTH?e-=this._textOffset:e+=this._textOffset}return e},o.defaults=e,o);function o(){return null!==t&&t.apply(this,arguments)||this}c.FibonacciExtensionsDrawing=i,c.Drawing.register(i)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(w){"use strict";var t,e=(t=w.Drawing,__extends(i,t),Object.defineProperty(i,"className",{get:function(){return"andrewsPitchfork"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 3},enumerable:!0,configurable:!0}),i.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.middle","drawing.all.dialog.end"]},i.prototype.bounds=function(){var t=this.cartesianPoints();if(t.length<this.pointsNeeded)return null;var e=t[0],i=t[1],o=t[2],r=e.x,n=e.y,a=i.x,l=i.y,s=o.x,c=o.y,h=(s-a)/2+a,u=(c-l)/2+l,f=a-(r-h),d=l-(n-u),p=s-(r-h),y=c-(n-u),m=Math.sqrt(a*f+l*d),_={x:a+(f-a)*m,y:l+(d-l)*m},C=Math.sqrt(s*p+c*y),b={x:s+(p-s)*C,y:c+(y-c)*C};return{left:Math.min(t[0].x,t[1].x,t[2].x,_.x,b.x),top:Math.min(t[0].y,t[1].y,t[2].y,_.y,b.y),width:Math.abs(Math.max(t[0].x,t[1].x,t[2].x,_.x,b.x)-Math.min(t[0].x,t[1].x,t[2].x,_.x,b.x)),height:Math.abs(Math.max(t[0].y,t[1].y,t[2].y,_.y,b.y))-Math.min(t[0].y,t[1].y,t[2].y,_.y,b.y)}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();if(e.length<3)return!1;var i=e[0],o=e[1],r=e[2],n=i.x,a=i.y,l=o.x,s=o.y,c=r.x,h=r.y,u=(c-l)/2+l,f=(h-s)/2+s,d=l-(n-u),p=s-(a-f),y=c-(n-u),m=h-(a-f),_=Math.sqrt(n*u+a*f),C={x:n+(u-n)*_,y:a+(f-a)*_},b=Math.sqrt(l*d+s*p),g={x:l+(d-l)*b,y:s+(p-s)*b},S=Math.sqrt(c*y+h*m),v={x:c+(y-c)*S,y:h+(m-h)*S};return w.Geometry.isPointNearLine(t,o,r)||w.Geometry.isPointNearLine(t,i,C)||w.Geometry.isPointNearLine(t,o,g)||w.Geometry.isPointNearLine(t,r,v)},i.prototype._handlePanGesture=function(t,e){switch(t.state){case w.GestureState.STARTED:var i=this.cartesianPoints();if(1<i.length)for(var o=0;o<i.length;o++)if(w.Geometry.isPointNearPoint(e.pointerPosition,i[o]))return this._setDragPoint(o),this.changeCursor(w.DrawingCursorClass.RESIZE),!0;break;case w.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype.draw=function(){var t,e,i,o,r,n,a,l,s,c,h,u,f,d,p,y,m,_,C,b,g,S,v,w;!this.visible||0!==(t=this.cartesianPoints()).length&&(e=this.renderer,i=this.actualTheme,2<t.length?(o=t[0].x,r=t[0].y,n=t[1].x,a=t[1].y,u=n-(o-(c=((l=t[2].x)-n)/2+n)),f=a-(r-(h=((s=t[2].y)-a)/2+a)),d=l-(o-c),p=s-(r-h),m=o+(c-o)*(y=Math.sqrt(o*c+r*h)),_=r+(h-r)*y,b=n+(u-n)*(C=Math.sqrt(n*u+a*f)),g=a+(f-a)*C,v=l+(d-l)*(S=Math.sqrt(l*d+s*p)),w=s+(p-s)*S,e.linePath(o,r,m,_),e.line(n,a,b,g),e.line(l,s,v,w),e.line(n,a,l,s),e.stroke(i.line)):1<t.length&&(e.polylinePath(t),e.stroke(i.line)),this._drawSelectionMarkersIfSelected(t))},i);function i(){return null!==t&&t.apply(this,arguments)||this}w.AndrewsPitchforkDrawing=e,w.Drawing.register(e)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(w){"use strict";var i,t=(i=w.Drawing,__extends(e,i),Object.defineProperty(e,"className",{get:function(){return"trendChannel"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),e.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.middle","drawing.all.dialog.end"]},e.prototype.bounds=function(){var t=this.cartesianPoints();if(t.length<this.pointsNeeded)return null;var e=t[0].x,i=t[0].y,o=t[1].x,r=t[1].y,n=t[2].x,a=t[2].y,l=n+(o-e),s=r+(a-i),c=e-(n-e),h=i-(a-i),u=o-e+c,f=r-(a-i),d=Math.sqrt(n*l+a*s),p=Math.round(n+(l-n)*d),y=Math.round(a+(s-a)*d),m=Math.sqrt(c*u+h*f),_=Math.round(c+(u-c)*m),C=Math.round(h+(f-h)*m);return{left:Math.min(t[0].x,t[1].x,t[2].x,p,_,l,c,u),top:Math.min(t[0].y,t[1].y,t[2].y,y,C,s,h,f),width:Math.abs(Math.max(t[0].x,t[1].x,t[2].x,l,c,u,p,_)-Math.min(t[0].x,t[1].x,t[2].x,l,c,u,p,_)),height:Math.abs(Math.max(t[0].y,t[1].y,t[2].y,s,h,f,y,C)-Math.min(t[0].y,t[1].y,t[2].y,s,h,f,y,C))}},e.prototype._finishUserDrawing=function(){i.prototype._finishUserDrawing.call(this);var t=this.cartesianPoints(),e=w.ChartPoint.convert({x:t[0].x,y:t[0].y-20},this.createPointBehavior,this.projection);this.appendChartPoint(e)},e.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.cartesianPoints();if(e.length<this.pointsNeeded)return!1;var i=e[0].x,o=e[0].y,r=e[1].x,n=e[1].y,a=e[2].x,l=e[2].y,s=a+(r-i),c=n+(l-o),h=i-(a-i),u=o-(l-o),f=r-i+h,d=n-(l-o),p=Math.sqrt(i*r+o*n),y=Math.round(i+(r-i)*p),m=Math.round(o+(n-o)*p),_=Math.sqrt(a*s+l*c),C=Math.round(a+(s-a)*_),b=Math.round(l+(c-l)*_),g=Math.sqrt(h*f+u*d),S=Math.round(h+(f-h)*g),v=Math.round(u+(d-u)*g);return w.Geometry.isPointNearLine(t,{x:i,y:o},{x:y,y:m})||w.Geometry.isPointNearLine(t,{x:a,y:l},{x:C,y:b})||w.Geometry.isPointNearLine(t,{x:h,y:u},{x:S,y:v})},e.prototype._handlePanGesture=function(t,e){switch(t.state){case w.GestureState.STARTED:var i=this.cartesianPoints();if(1<i.length)for(var o=0;o<i.length;o++)if(w.Geometry.isPointNearPoint(e.pointerPosition,i[o]))return this._setDragPoint(o),this.changeCursor(w.DrawingCursorClass.RESIZE),!0;break;case w.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),0===this._dragPoint&&this.chartPoints[2].translate(t.moveOffset.x,t.moveOffset.y,this.projection),!0}return!1},e.prototype.draw=function(){var t,e,i,o,r,n,a,l,s,c,h,u,f,d,p,y,m,_,C,b,g,S,v,w;!this.visible||0!==(t=this.cartesianPoints()).length&&(e=this.renderer,i=this.actualTheme,2<t.length?(o=t[0].x,r=t[0].y,n=t[1].x,a=t[1].y,c=(l=t[2].x)+(n-o),h=a+((s=t[2].y)-r),f=r-(s-r),d=n-o+(u=o-(l-o)),p=a-(s-r),y=Math.sqrt(o*n+r*a),m=Math.round(o+(n-o)*y),_=Math.round(r+(a-r)*y),C=Math.sqrt(l*c+s*h),b=Math.round(l+(c-l)*C),g=Math.round(s+(h-s)*C),S=Math.sqrt(u*d+f*p),v=Math.round(u+(d-u)*S),w=Math.round(f+(p-f)*S),e.linePath(o,r,m,_),e.line(l,s,b,g),e.line(u,f,v,w),e.stroke(i.line)):1<t.length&&(e.polylinePath(t),e.stroke(i.line)),this._drawSelectionMarkersIfSelected(t))},e);function e(){return null!==i&&i.apply(this,arguments)||this}w.TrendChannelDrawing=t,w.Drawing.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(O){"use strict";var e;(e=O.DrawingEvent||(O.DrawingEvent={})).RANGE_RATIO_CHANGED="drawingRangeRatioChanged";var i,t=(i=O.Drawing,__extends(o,i),Object.defineProperty(o,"className",{get:function(){return"errorChannel"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"rangeRatio",{get:function(){return this._optionValue("rangeRatio")||o.defaults.rangeRatio},set:function(t){if("number"!=typeof t)throw new TypeError("Range ratio must be a number.");if(!O.JsUtil.isPositiveNumber(t))throw new Error("Range ratio must be a number greater than 0.");this._options.rangeRatio=t,this.fire(e.RANGE_RATIO_CHANGED,t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),o.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.end"]},o.prototype.bounds=function(){var t=this._drawingPoints;return!t||t.length<6?null:{left:Math.min(t[0].x,t[1].x),top:Math.min(t[0].y,t[1].y,t[2].y,t[3].y,t[4].y,t[5].y),width:Math.abs(t[1].x-t[0].x),height:Math.abs(Math.max(t[0].y,t[1].y,t[2].y,t[3].y,t[4].y,t[5].y)-Math.min(t[0].y,t[1].y,t[2].y,t[3].y,t[4].y,t[5].y))}},o.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;if(this.chartPoints.length<this.pointsNeeded)return!1;var e=this._drawingPoints;return!!e&&(O.Geometry.isPointNearLine(t,e[0],e[1])||O.Geometry.isPointNearLine(t,e[2],e[3])||O.Geometry.isPointNearLine(t,e[4],e[5]))},o.prototype._handlePanGesture=function(t,e){switch(t.state){case O.GestureState.STARTED:if(O.Geometry.isPointNearPoint(this.cartesianPoint(0),e.pointerPosition))this._setDragPoint(0);else{if(!O.Geometry.isPointNearPoint(this.cartesianPoint(1),e.pointerPosition))return!1;this._setDragPoint(1)}return this.changeCursor(O.DrawingCursorClass.RESIZE),!0;case O.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},o.prototype._finishUserDrawing=function(){i.prototype._finishUserDrawing.call(this);var t=this.cartesianPoints();t.length<2||(t[0].x>t[1].x&&(this.chartPoints[0].moveToPoint(t[1],this.projection),this.chartPoints[1].moveToPoint(t[0],this.projection)),this._drawingPoints=this._calculateDrawingPoints(t))},o.prototype.draw=function(){var t,e,i,o,r;!this.visible||0!==(t=this.cartesianPoints()).length&&(1<t.length&&(e=t[0].x,t[1].x<e&&(i=t[1],t[1]=t[0],t[0]=i),o=this._drawingPoints=this._calculateDrawingPoints(t),this._moveMainLineYPoint(o[2].y,o[3].y),(r=this.renderer).beginPath(),r.line(o[0].x,o[0].y,o[1].x,o[1].y),r.line(o[2].x,o[2].y,o[3].x,o[3].y),r.line(o[4].x,o[4].y,o[5].x,o[5].y),r.stroke(this.actualTheme.line),t=this._getMainLinePoints()),this._drawSelectionMarkersIfSelected(t))},o.prototype._calculateDrawingPoints=function(t){for(var e=t[0],i=t[1],o=this.projection,r=this.chart.primaryBarDataSeries(),n=o.recordByX(e.x),a=o.recordByX(i.x),l=Math.min(n,a),s=Math.max(n,a),c=r.high,h=0,u=l;u<=s;u++)c.valueAtIndex(u)>h&&(h=c.valueAtIndex(u));for(var f=r.low,d=h,u=l;u<=s;u++)f.valueAtIndex(u)<d&&(d=f.valueAtIndex(u));for(var p=(h-d)*this.rangeRatio,y=s-l+1,m=[],u=0;u<y;u++)m.push(r.low.valueAtIndex(l+u));var _=O.DrawingCalculationUtil.calculateLinearRegression(m),C=_.slope,b=_.firstValue,g=b+C*(y-1),S=o.yByValue(b+p),v=o.yByValue(g+p),w=o.yByValue(b),P=o.yByValue(g),k=o.yByValue(b-p),x=o.yByValue(g-p);return[{x:e.x,y:S},{x:i.x,y:v},{x:e.x,y:w},{x:i.x,y:P},{x:e.x,y:k},{x:i.x,y:x}]},o.prototype._getMainLinePoints=function(){return[this._drawingPoints[2],this._drawingPoints[3]]},o.prototype._moveMainLineYPoint=function(t,e){this.chartPoints[0].moveToY(t,this.projection),this.chartPoints[1].moveToY(e,this.projection)},o.defaults={rangeRatio:.5},o);function o(){return null!==i&&i.apply(this,arguments)||this}O.ErrorChannelDrawing=t,O.Drawing.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(g){"use strict";var e,t=(e=g.Drawing,__extends(i,e),Object.defineProperty(i,"className",{get:function(){return"quadrantLines"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"drawingPoints",{get:function(){return this._drawingPoints||(this._drawingPoints=this._calculateDrawingPoints(this.cartesianPoints())),this._drawingPoints},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),i.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.end"]},i.prototype.bounds=function(){var t=this.cartesianPoints();if(t.length<this.pointsNeeded)return null;var e=this.drawingPoints;return{left:Math.min(t[0].x,t[1].x),top:e[0][0].y,width:Math.abs(t[0].x-t[1].x),height:Math.abs(e[4][0].y-e[0][0].y)}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;if(this.chartPoints.length<2)return!1;for(var e=this.drawingPoints,i=0;i<5;i++)if(g.Geometry.isPointNearLine(t,e[i][0],e[i][1]))return!0;return!1},i.prototype._handlePanGesture=function(t,e){switch(t.state){case g.GestureState.STARTED:if(g.Geometry.isPointNearPoint(this.cartesianPoint(0),e.pointerPosition))this._setDragPoint(0);else{if(!g.Geometry.isPointNearPoint(this.cartesianPoint(1),e.pointerPosition))return!1;this._setDragPoint(1)}return this.changeCursor(g.DrawingCursorClass.RESIZE),!0;case g.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype._finishUserDrawing=function(){e.prototype._finishUserDrawing.call(this);var t=this.cartesianPoints();t[0].x>t[1].x&&(this.chartPoints[0].moveToPoint(t[1],this.projection),this.chartPoints[1].moveToPoint(t[0],this.projection)),this._drawingPoints=this._calculateDrawingPoints(t)},i.prototype.draw=function(){if(this.visible){var t=this.cartesianPoints();if(0!==t.length){if(1<t.length){var e=this.renderer,i=this._drawingPoints=this._calculateDrawingPoints(t);this._moveMainLineYPoint(i[2][0].y,i[2][1].y),e.beginPath();for(var o=0;o<5;o++)e.line(i[o][0].x,i[o][0].y,i[o][1].x,i[o][1].y);e.stroke(this.actualTheme.line)}this.selected&&this._drawSelectionMarkers(this.cartesianPoints())}}},i.prototype._calculateDrawingPoints=function(t){for(var e=t[0],i=t[1],o=this.projection,r=o.recordByX(e.x),n=o.recordByX(i.x),a=Math.min(r,n),l=Math.max(r,n),s=0,c=this.chart.primaryDataSeries(g.DataSeriesSuffix.HIGH),h=a;h<=l;h++){var u=c.valueAtIndex(h);s<u&&(s=u)}for(var f=s,d=this.chart.primaryDataSeries(g.DataSeriesSuffix.LOW),h=a;h<=l;h++){var p=d.valueAtIndex(h);p<f&&(f=p)}for(var y=s+(s-f)/4,m=[],h=0;h<5;h++){y-=(s-f)/4;var _=o.yByValue(y),C=e.x,b=i.x;m.push([{x:C,y:_},{x:b,y:_}])}return m},i.prototype._moveMainLineYPoint=function(t,e){this.chartPoints[0].moveToY(t,this.projection),this.chartPoints[1].moveToY(e,this.projection)},i);function i(){return null!==e&&e.apply(this,arguments)||this}g.QuadrantLinesDrawing=t,g.Drawing.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(I){"use strict";var e,t=(e=I.Drawing,__extends(i,e),Object.defineProperty(i,"className",{get:function(){return"raffRegression"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),i.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.end"]},i.prototype.bounds=function(){var t=this._drawingPoints;return!t||t.length<6?null:{left:Math.min(t[0].x,t[1].x),top:Math.min(t[0].y,t[1].y,t[2].y,t[3].y,t[4].y,t[5].y),width:Math.abs(t[1].x-t[0].x),height:i._calculateBoundsHeight(t)}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;if(this.chartPoints.length<this.pointsNeeded)return!1;var e=this._drawingPoints;return!!this._drawingPoints&&(I.Geometry.isPointNearLine(t,e[0],e[1])||I.Geometry.isPointNearLine(t,e[2],e[3])||I.Geometry.isPointNearLine(t,e[4],e[5]))},i.prototype._handlePanGesture=function(t,e){switch(t.state){case I.GestureState.STARTED:if(I.Geometry.isPointNearPoint(this.cartesianPoint(0),e.pointerPosition))this._setDragPoint(0);else{if(!I.Geometry.isPointNearPoint(this.cartesianPoint(1),e.pointerPosition))return!1;this._setDragPoint(1)}return this.changeCursor(I.DrawingCursorClass.RESIZE),!0;case I.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype._finishUserDrawing=function(){e.prototype._finishUserDrawing.call(this);var t=this.cartesianPoints();t[0].x>t[1].x&&(this.chartPoints[0].moveToPoint(t[1],this.projection),this.chartPoints[1].moveToPoint(t[0],this.projection)),this._drawingPoints=this._calculateDrawingPoints(t)},i.prototype.draw=function(){var t,e,i,o,r;this.visible&&((t=this.cartesianPoints()).length<1||(1<t.length&&(e=t[0].x,t[1].x<e&&(i=t[1],t[1]=t[0],t[0]=i),(o=this.renderer).beginPath(),r=this._drawingPoints=this._calculateDrawingPoints(t),this._moveMainLineYPoint(r[2].y,r[3].y),o.line(r[0].x,r[0].y,r[1].x,r[1].y),o.line(r[2].x,r[2].y,r[3].x,r[3].y),o.line(r[4].x,r[4].y,r[5].x,r[5].y),t=this._getMainLinePoints(),o.stroke(this.actualTheme.line)),this._drawSelectionMarkersIfSelected(t)))},i.prototype._calculateDrawingPoints=function(t){for(var e=t[0],i=t[1],o=this.projection,r=o.recordByX(e.x),n=o.recordByX(i.x),a=this.chart.primaryBarDataSeries(),l=Math.min(r,n),s=Math.min(Math.max(r,n),a.date.length-1),c=s-l+1,h=[],u=0;u<c;u++)h.push(a.close.valueAtIndex(l+u));for(var f=I.DrawingCalculationUtil.calculateLinearRegression(h),d=f.slope,p=f.firstValue,y=p+d*(c-1),m=0,_=0,u=l,C=0;u<=s;u++,C++){var b=p+d*C,g=a.high.valueAtIndex(u)-b,S=b-a.low.valueAtIndex(u);0<g&&m<g&&(m=g),0<S&&_<S&&(_=S)}var v=Math.max(m,_),w=o.yByValue(p+v),P=o.yByValue(y+v),k=o.yByValue(p),x=o.yByValue(y),O=o.yByValue(p-v),E=o.yByValue(y-v);return[{x:e.x,y:w},{x:i.x,y:P},{x:e.x,y:k},{x:i.x,y:x},{x:e.x,y:O},{x:i.x,y:E}]},i.prototype._getMainLinePoints=function(){return[this._drawingPoints[2],this._drawingPoints[3]]},i.prototype._moveMainLineYPoint=function(t,e){this.chartPoints[0].moveToY(t,this.projection),this.chartPoints[1].moveToY(e,this.projection)},i._calculateBoundsHeight=function(t){var e=Math.min(t[0].y,t[1].y),i=Math.max(t[4].y,t[5].y);return Math.abs(e-i)},i);function i(){return null!==e&&e.apply(this,arguments)||this}I.RaffRegressionDrawing=t,I.Drawing.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(S){"use strict";var e,t=(e=S.Drawing,__extends(i,e),Object.defineProperty(i,"className",{get:function(){return"tironeLevels"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"drawingPoints",{get:function(){return this._drawingPoints||(this._drawingPoints=this._calculateDrawingPoints(this.cartesianPoints())),this._drawingPoints},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),i.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.end"]},i.prototype.bounds=function(){var t=this.cartesianPoints();if(t.length<this.pointsNeeded)return null;var e=this.drawingPoints;return{left:t[0].x,top:e[0].y,width:t[1].x-t[0].x,height:Math.abs(e[0].y-e[5].y)}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;if(this.chartPoints.length<this.pointsNeeded)return!1;var e=this.drawingPoints;return S.Geometry.isPointNearLine(t,e[0],e[1])||S.Geometry.isPointNearLine(t,e[2],e[3])||S.Geometry.isPointNearLine(t,e[4],e[5])},i.prototype._handlePanGesture=function(t,e){switch(t.state){case S.GestureState.STARTED:if(S.Geometry.isPointNearPoint(this.cartesianPoint(0),e.pointerPosition))this._setDragPoint(0);else{if(!S.Geometry.isPointNearPoint(this.cartesianPoint(1),e.pointerPosition))return!1;this._setDragPoint(1)}return this.changeCursor(S.DrawingCursorClass.RESIZE),!0;case S.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype._finishUserDrawing=function(){e.prototype._finishUserDrawing.call(this);var t=this.cartesianPoints();t[0].x>t[1].x&&(this.chartPoints[0].moveToPoint(t[1],this.projection),this.chartPoints[1].moveToPoint(t[0],this.projection)),this._drawingPoints=this._calculateDrawingPoints(t)},i.prototype.draw=function(){var t,e,i;!this.visible||0!==(t=this.cartesianPoints()).length&&(1<t.length&&(e=this._drawingPoints=this._calculateDrawingPoints(t),this._moveMainLineYPoint(e[2].y,e[3].y),(i=this.renderer).beginPath(),i.line(e[0].x,e[0].y,e[1].x,e[1].y),i.line(e[2].x,e[2].y,e[3].x,e[3].y),i.line(e[4].x,e[4].y,e[5].x,e[5].y),i.stroke(this.actualTheme.line),t=this._getMainLinePoints()),this._drawSelectionMarkersIfSelected(t))},i.prototype._calculateDrawingPoints=function(t){for(var e=t[0],i=t[1],o=this.projection,r=o.recordByX(e.x),n=o.recordByX(i.x),a=Math.min(r,n),l=Math.max(r,n),s=this.chart.primaryDataSeries(S.DataSeriesSuffix.HIGH),c=0,h=a;h<=l;h++){var u=s.valueAtIndex(h);c<u&&(c=u)}for(var f=this.chart.primaryDataSeries(S.DataSeriesSuffix.LOW),d=c,h=a;h<=l;h++){var p=f.valueAtIndex(h);p<d&&(d=p)}var y=c-(c-d)/3,m=o.yByValue(y),_=m,y=d+(c-d)/2,C=o.yByValue(y),b=C;y=d+(c-d)/3;var g=o.yByValue(y);return[{x:e.x,y:m},{x:i.x,y:_},{x:e.x,y:C},{x:i.x,y:b},{x:e.x,y:g},{x:i.x,y:g}]},i.prototype._getMainLinePoints=function(){var t=this.drawingPoints;return[t[2],t[3]]},i.prototype._moveMainLineYPoint=function(t,e){this.chartPoints[0].moveToY(t,this.projection),this.chartPoints[1].moveToY(e,this.projection)},i);function i(){return null!==e&&e.apply(this,arguments)||this}S.TironeLevelsDrawing=t,S.Drawing.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(i){"use strict";var e,t=(e=i.Drawing,__extends(o,e),Object.defineProperty(o,"className",{get:function(){return"speedLines"},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"extend",{get:function(){return this._extend},set:function(t){this._extend=t},enumerable:!0,configurable:!0}),o.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.end"]},o.prototype.bounds=function(){var t=this._drawingPoints;return!t||t.length<6?null:{left:Math.min(t[0].x,t[1].x),top:Math.min(t[0].y,t[1].y,t[2].y,t[3].y,t[4].y,t[5].y),width:Math.abs(t[1].x-t[0].x),height:Math.abs(Math.max(t[0].y,t[1].y,t[2].y,t[3].y,t[4].y,t[5].y)-Math.min(t[0].y,t[1].y,t[2].y,t[3].y,t[4].y,t[5].y))}},o.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;if(this.chartPoints.length<this.pointsNeeded)return!1;var e=this._drawingPoints;return!!this._drawingPoints&&(i.Geometry.isPointNearLine(t,e[0],e[1])||i.Geometry.isPointNearLine(t,e[2],e[3])||i.Geometry.isPointNearLine(t,e[4],e[5]))},o.prototype._handlePanGesture=function(t,e){switch(t.state){case i.GestureState.STARTED:if(i.Geometry.isPointNearPoint(this._markersPoints[0],e.pointerPosition))this._setDragPoint(0);else{if(!i.Geometry.isPointNearPoint(this._markersPoints[1],e.pointerPosition))return!1;this._setDragPoint(1)}return this.changeCursor(i.DrawingCursorClass.RESIZE),!0;case i.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},o.prototype.draw=function(){var t,e,i;!this.visible||0!==(t=this.cartesianPoints()).length&&(1<t.length&&(e=this.renderer,i=this._drawingPoints=this._calculateDrawingPoints(t),e.beginPath(),e.line(i[0].x,i[0].y,i[1].x,i[1].y),e.line(i[2].x,i[2].y,i[3].x,i[3].y),e.line(i[4].x,i[4].y,i[5].x,i[5].y),e.stroke(this.actualTheme.line),t=this._markersPoints),this._drawSelectionMarkersIfSelected(t))},o.prototype._calculateDrawingPoints=function(t){var e=t[0].x,i=t[0].y,o=t[1].x,r=t[1].y,n=this.chart.primaryBarDataSeries(),a=n.high,l=n.low,s=a.valueAtIndex(this.projection.recordByX(e)),c=l.valueAtIndex(this.projection.recordByX(e)),h=a.valueAtIndex(this.projection.recordByX(o)),u=l.valueAtIndex(this.projection.recordByX(o)),f=c<h;f&&u<s&&(f=r<i);var d,p,y,m,_=0,C=0;return C=(_=(p=f?(i=this.projection.yByValue(c),r=this.projection.yByValue(h),d=c+.667*(h-c),c+.333*(h-c)):(i=this.projection.yByValue(s),r=this.projection.yByValue(u),d=s-.667*(s-u),s-.333*(s-u)),this.projection.yByValue(d)),this.projection.yByValue(p)),e=this.projection.xByRecord(this.projection.recordByX(t[0].x)),o=this.projection.xByRecord(this.projection.recordByX(t[1].x)),this._markersPoints=[{x:e,y:i},{x:o,y:r}],this.extend&&(y=o-e,m=Math.sqrt(e*o+i*r),o=Math.round(e+y*m),r=Math.round(i-(i-r)*m),_=Math.round(i-(i-_)*m),C=Math.round(i-(i-C)*m)),[{x:e,y:i},{x:o,y:r},{x:e,y:i},{x:o,y:_},{x:e,y:i},{x:o,y:C}]},o);function o(){var t=null!==e&&e.apply(this,arguments)||this;return t._extend=!0,t}i.SpeedLinesDrawing=t,i.Drawing.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(r){"use strict";var e,t;(t=e=r.DrawingEvent||(r.DrawingEvent={})).ANGLES_CHANGED="drawingAnglesChanged",t.SHOW_ANGLE_LINE_CHANGED="drawingShowAngleLineChanged";var i,o=(i=r.Drawing,__extends(n,i),Object.defineProperty(n,"className",{get:function(){return"gannFan"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"angles",{get:function(){return this._optionValue("angles")||n.defaults.angles},set:function(t){if(null!=t&&!Array.isArray(t))throw new TypeError("Angles must be an array of numbers.");this._options.angles=t,this.fire(e.ANGLES_CHANGED,t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),n.prototype.pointsLocalizationKeys=function(){return["drawing.all.dialog.start","drawing.all.dialog.end"]},n.prototype.bounds=function(){var t=this.cartesianPoints();if(t.length<2)return null;this._drawingPoints=this._calculateDrawingPoints(t);var e=this._drawingPoints[0][1],i=this._drawingPoints[this._drawingPoints.length-1][1];return{left:Math.min(t[0].x,t[1].x,e.x,i.x),top:Math.min(t[0].y,t[1].y,e.y,i.y),width:Math.abs(Math.max(t[0].x,t[1].x,e.x,i.x)-Math.min(t[0].x,t[1].x,e.x,i.x)),height:Math.abs(Math.max(t[0].y,t[1].y,e.y,i.y)-Math.min(t[0].y,t[1].y,e.y,i.y))}},n.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;if(this.cartesianPoints().length<this.pointsNeeded)return!1;for(var e=0,i=this._drawingPoints;e<i.length;e++){var o=i[e];if(r.Geometry.isPointNearLine(t,o[0],o[1]))return!0}return!1},n.prototype._handlePanGesture=function(t,e){switch(t.state){case r.GestureState.STARTED:if(r.Geometry.isPointNearPoint(this.cartesianPoint(0),e.pointerPosition))this._setDragPoint(0);else{if(!r.Geometry.isPointNearPoint(this.cartesianPoint(1),e.pointerPosition))return!1;this._setDragPoint(1)}return this.changeCursor(r.DrawingCursorClass.RESIZE),!0;case r.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},n.prototype.draw=function(){if(this.visible){var t=this.cartesianPoints();if(0!==t.length){if(1<t.length){var e=this.renderer;e.beginPath(),this._drawingPoints=this._calculateDrawingPoints(t);for(var i=0,o=this._drawingPoints;i<o.length;i++){var r=o[i];e.line(r[0].x,r[0].y,r[1].x,r[1].y)}e.stroke(this.actualTheme.line)}this._drawSelectionMarkersIfSelected(t)}}},n.prototype._calculateDrawingPoints=function(t){for(var e=t[0].x,i=t[0].y,o=t[1].x,r=t[1].y,n=this.chartPanel.contentFrame,a=o<e?n.left:n.right,l=[],s=0,c=this.angles;s<c.length;s++){var h=c[s],r=i-Math.round(i-t[1].y)*h.value;l.push([{x:e,y:i},{x:o,y:r}])}for(var u=0,f=l;u<f.length;u++){var d=f[u],i=d[0].y;r=d[1].y,e=d[0].x,o=d[1].x,d[1].x=a,d[1].y=Math.round(i+(a-e)*(r-i)/(o-e))}return l},n.defaults={angles:[{value:.125},{value:.25},{value:.3333},{value:.5},{value:1},{value:2},{value:3},{value:4},{value:8}]},n);function n(){return null!==i&&i.apply(this,arguments)||this}r.GannFanDrawing=o,r.Drawing.register(o)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(n){"use strict";var e,t=(e=n.Drawing,__extends(i,e),Object.defineProperty(i,"className",{get:function(){return"trendAngle"},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pointsNeeded",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"radius",{get:function(){return this._options.radius||i.defaults.radius},set:function(t){this._setOption("radius",t)},enumerable:!0,configurable:!0}),i.prototype.bounds=function(){var t=this.cartesianPoints();return t.length<this.pointsNeeded?null:{left:Math.min(t[0].x,t[1].x),top:Math.min(t[0].y,t[1].y),width:Math.abs(t[0].x-t[1].x),height:Math.abs(t[0].y-t[1].y)}},i.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e,i=this.cartesianPoints();return null==this._dragPoint&&null!=this._arctan&&(this._angleCorrection=!0,e=Math.tan(this._arctan)*(i[0].x-i[1].x)+i[0].y,i[0].x===i[1].x&&i[0].y===e||(i[1].y=e)),1<i.length&&n.Geometry.isPointNearPolyline(t,i)},i.prototype._handlePanGesture=function(t,e){switch(t.state){case n.GestureState.STARTED:if(n.Geometry.isPointNearPoint(this.cartesianPoint(0),e.pointerPosition)&&null==this._arctan)this._setDragPoint(0);else{var i,o,r;if(!n.Geometry.isPointNearPoint(this.cartesianPoint(1),e.pointerPosition))return null!=this._arctan&&(i=this.cartesianPoints(),r=(o=Math.tan(this._arctan))*(i[0].x-i[1].x)+i[0].y,(i[0].x!==i[1].x||i[0].y!==r)&&o<this._tanMax&&o>this._tanMin&&(this.chartPoints[1].value=this.projection.valueByY(r))),!1;this._setDragPoint(1)}return this.changeCursor(n.DrawingCursorClass.RESIZE),!0;case n.GestureState.CONTINUED:if(0<=this._dragPoint)return this.chartPoints[this._dragPoint].moveToPoint(e.pointerPosition,this.projection),!0}return!1},i.prototype.draw=function(){var t,e,i,o;this.visible&&(t=this.cartesianPoints(),null==this._dragPoint&&this._arctan&&this._angleCorrection&&(i=(e=Math.tan(this._arctan))*(t[0].x-t[1].x)+t[0].y,(t[0].x!==t[1].x||t[0].y!==i)&&e<this._tanMax&&e>this._tanMin&&(t[1].y=i)),1<t.length&&((o=this.renderer).polylinePath(t),o.stroke(this.actualTheme.line),this._calculateAngle(t)),this._drawSelectionMarkersIfSelected(t))},i.prototype._calculateAngle=function(t){var e=Math.atan((t[1].y-t[0].y)/(t[0].x-t[1].x)),i=isNaN(e)?90:Math.round(e*(180/Math.PI));this._arctan=e;var o=-i*Math.PI/180,r=!1;i<=0&&t[1].x<=t[0].x&&(i=180+i,o+=Math.PI),0<i&&t[1].x<=t[0].x&&t[1].y>t[0].y&&(i-=180,o+=Math.PI,r=!0),i<0&&t[1].x>t[0].x&&(r=!0),this._drawTrendAngle(i.toFixed(0),o,r,t)},i.prototype._drawTrendAngle=function(t,e,i,o){var r=this.renderer;r.horLinePath(o[0].x,o[0].x+this.radius,o[0].y),r.stroke(this.actualTheme.horizontalLine),r.arcPath(o[0].x,o[0].y,this.radius,e,0,i),r.stroke(this.actualTheme.arc),r.fillText(t.toString()+"°",o[0].x+this._textOffset+this.radius,o[0].y+this._textOffset,this.actualTheme.text)},i.defaults={radius:30},i);function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._tanMax=0x3a052cf8639b6a,t._tanMin=-0x3a052cf8639b6a,t._textOffset=4,t._angleCorrection=!1,t}n.TrendAngleDrawing=t,n.Drawing.register(t)}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(i){"use strict";var o,t;(t=o=i.TradingToolState||(i.TradingToolState={}))[t.NONE=0]="NONE",t[t.MOVING=1]="MOVING";var r,e=(r=i.ChartPanelObject,__extends(n,r),Object.defineProperty(n.prototype,"locked",{get:function(){return this._locked},set:function(t){this._locked=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canHandleEvents",{get:function(){return this.visible},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canMove",{get:function(){return!this.locked},enumerable:!0,configurable:!0}),n.prototype._onChartPanelChanged=function(t){var e=this;r.prototype._onChartPanelChanged.call(this,t),this.chartPanel&&(this._initButtonsInternal(),this.chart.on(i.ChartEvent.THEME_CHANGED,function(){return e._changeButtonsTheme()},this),this.update())},n.prototype.update=function(){},n.prototype.initButtons=function(){return null},n.prototype._initButtonsInternal=function(){var t=this.initButtons();t&&(this._eventHandlers=new i.HandlersEvents(t))},n.prototype._changeButtonsTheme=function(){var e=this;this._eventHandlers&&this.chart&&this._eventHandlers.handlers.forEach(function(t){return t.chartTheme=e.chart.theme})},n.prototype._initGestures=function(){this._gestures=new i.GestureArray([new i.DoubleClickGesture({handler:this._handleDoubleClickGesture,hitTest:this.hitTest}),new i.PanGesture({handler:this._handlePanGestureInternal,hitTest:this._panGestureHitTest,button:i.MouseButton.LEFT})],this)},n.prototype._handleDoubleClickGesture=function(t,e){return!1},n.prototype._panGestureHitTest=function(t){return this.visible&&this.canMove&&this.hitTest(t)},n.prototype._handlePanGestureInternal=function(t,e){if(this._handlePanGesture(t,e))switch(t.state){case i.GestureState.STARTED:this.changeCursor(i.DrawingCursorClass.RESIZE_NS);break;case i.GestureState.CONTINUED:this._tradingToolState=o.MOVING;break;case i.GestureState.FINISHED:this._tradingToolState=o.NONE,this.changeCursor()}this.setNeedsUpdatePanel()},n.prototype.hitTest=function(t){return!1},n.prototype.handleEvent=function(t){return!(!this._eventHandlers||!this._eventHandlers.handleEvent(t))||this._gestures.handleEvent(t)},n.prototype._handlePanGesture=function(t,e){return!1},n.prototype.remove=function(){var t=this.chartPanel;return!!t&&(this.chart.off(i.ChartEvent.THEME_CHANGED,this),t.removeObjects(this),this.setNeedsUpdatePanel(),this.destroy(),!0)},n.prototype.draw=function(){this._eventHandlers&&this._eventHandlers.draw(),r.prototype.draw.call(this)},n.prototype.setNeedsUpdatePanel=function(){var t=this.chartPanel;t&&t.setNeedsUpdate()},n.prototype.destroy=function(){this._eventHandlers&&this._eventHandlers.destroy(),r.prototype.destroy.call(this)},n);function n(){var t=r.call(this,{})||this;return t._tradingToolState=o.NONE,t.visible=!0,t._initGestures(),t.locked=!1,t.zIndex=300,t}i.TradingTool=e}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(r){"use strict";r.TradingPanelEvents={TRADING_AREA_CLICKED:"TRADING_AREA_CLICKED"},r.TradingPanelUnit={Pixels:"pixels",Percents:"percent"},Object.freeze(r.TradingPanelUnit);var o,t=(o=r.TradingTool,__extends(e,o),Object.defineProperty(e.prototype,"theme",{get:function(){return this.chart.theme.tradingPanel},enumerable:!0,configurable:!0}),e.prototype.drawValueMarkers=function(){this.valueMarkerConfig&&this.visible&&this.chart.valueMarker.draw(this.valueMarkerConfig.price,this.chart.mainPanel.valueScale,r.getDefaultValueMarkerTheme(this.valueMarkerBackground,this.theme.markerFontColor))},e.prototype._initGestures=function(){this._gestures=new r.GestureArray([new r.ClickGesture({handler:this._handleClick,hitTest:this.hitTest}),new r.MouseHoverGesture({handler:this._handleHover,hitTest:function(){return!0}})],this)},e.prototype.hitTest=function(t){var e=this.chartPanel.contentFrame;return this.visible&&t.x>=e.right&&t.x<=e.width+2*this.chart.tradingPanelWidth&&t.y>e.top&&t.y<e.height},e.prototype._handleClick=function(t,e){var i=this.chartPanel.contentFrame,o=this.projection.valueByY(e.pointerPosition.y);this._isInSellArea(i,e.pointerPosition)?this.fire(r.TradingPanelEvents.TRADING_AREA_CLICKED,{price:o,event:e,side:r.OrderAction.SELL}):this._isInBuyArea(i,e.pointerPosition)&&this.fire(r.TradingPanelEvents.TRADING_AREA_CLICKED,{price:o,event:e,side:r.OrderAction.BUY})},e.prototype._handleHover=function(t,e){var i=this.chartPanel.contentFrame;this.valueMarkerConfig=e.pointerPosition;var o=this.theme;this._isInSellArea(i,e.pointerPosition)?(this.shouldChartUpdate=!0,this.valueMarkerBackground=o.sellMarkerBackground,this.isSell=!0,this._setPrice()):this._isInBuyArea(i,e.pointerPosition)?(this.valueMarkerBackground=o.buyMarkerBackground,this.shouldChartUpdate=!0,this.isSell=!1,this._setPrice()):(this.shouldChartUpdate&&(this.shouldChartUpdate=!1,this.chart.setNeedsUpdate()),this.valueMarkerConfig=null),this.shouldChartUpdate&&this.chart.setNeedsUpdate()},e.prototype._setPrice=function(){var t=this.projection.valueByY(this.valueMarkerConfig.y),e=1/this.chart.instrument.tickSize,t=Math.ceil(t*e)/e;this.valueMarkerConfig.y=this.projection.yByValue(t),this.valueMarkerConfig.price=t},e.prototype._isInSellArea=function(t,e){var i=t.right+this.chart.tradingPanelWidth;return e.x>=i&&e.x<=i+this.chart.tradingPanelWidth},e.prototype._isInBuyArea=function(t,e){return e.x>=t.right&&e.x<=t.right+this.chart.tradingPanelWidth},e.prototype.draw=function(){var t,e,i;this.chart&&this.visible&&(t=this.renderer,e=this.chartPanel.contentFrame,i=this.theme,t.save(),t.beginPath(),t.clearRect(e.right,0,this.chart.getTradingPanelWidth(),e.height),t.rectPath(e.right,0,this.chart.tradingPanelWidth,e.height),t.fill({fillColor:i.buyPanelBackground}),t.rectPath(e.right+this.chart.tradingPanelWidth,0,this.chart.tradingPanelWidth,e.height),t.fill({fillColor:i.sellPanelBackground}),t.closePath(),t.restore(),this._drawHoverLine(t,e),o.prototype.draw.call(this))},e.prototype._drawHoverLine=function(t,e){var i,o;this.valueMarkerConfig&&(i=e.right,this.isSell&&(i+=this.chart.tradingPanelWidth),o=this.valueMarkerConfig.y,t.beginPath(),t.moveTo(i,o),t.lineTo(i+this.chart.tradingPanelWidth,o),t.stroke({width:1,strokeColor:this.valueMarkerBackground}),t.closePath())},e);function e(){var t=o.call(this)||this;return t.zIndex=2500,t}r.TradingPanel=t}(StockChartX=StockChartX||{});var __extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),__assign=this&&this.__assign||Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},__awaiter=this&&this.__awaiter||function(n,a,l,s){return new(l=l||Promise)(function(t,e){function i(t){try{r(s.next(t))}catch(t){e(t)}}function o(t){try{r(s.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(i,o)}r((s=s.apply(n,a||[])).next())})},__generator=this&&this.__generator||function(i,o){var r,n,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,n&&(a=n[2&e[0]?"return":e[0]?"throw":"next"])&&!(a=a.call(n,e[1])).done)return a;switch(n=0,a&&(e=[0,a.value]),e[0]){case 0:case 1:a=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,n=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(a=0<(a=l.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){l.label=e[1];break}if(6===e[0]&&l.label<a[1]){l.label=a[1],a=e;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(e);break}a[2]&&l.ops.pop(),l.trys.pop();continue}e=o.call(i,l)}catch(t){e=[6,t],n=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},LengthUnit={Percents:"percents",Pixels:"pixels"};Object.freeze(LengthUnit);var LengthType={Solid:"solid",Dotted:"dotted",Dashed:"dashed"};Object.freeze(LengthType);var _a,LineTypeMap=((_a={})[LengthType.Solid]=StockChartX.LineStyle.SOLID,_a[LengthType.Dashed]=StockChartX.LineStyle.DASH,_a[LengthType.Dotted]=StockChartX.LineStyle.DOT,_a),defaultTheme={ocoStopLimit:"rgb(0,51,233,1)",ocoStopOrder:"rgb(255,108,28,1)",orderBarLength:25,orderBarUnit:"percent",buy:{limit:{length:3,lengthUnit:"pixels",lineColor:"rgb(255,230,142,1)",lineType:"dashed"},market:{length:1,lengthUnit:"pixels",lineColor:"rgb(255,161,109,1)",lineType:"dashed"},stop:{length:2,lengthUnit:"pixels",lineColor:"rgb(255,238,180,1)",lineType:"solid"},stopLimit:{length:2,lengthUnit:"percents",lineColor:null,lineType:"dotted"}},sell:{limit:{length:3,lengthUnit:"pixels",lineColor:"rgb(255,230,142,1)",lineType:"dashed"},market:{length:1,lengthUnit:"pixels",lineColor:"rgb(255,161,109,1)",lineType:"dashed"},stop:{length:2,lengthUnit:"pixels",lineColor:"rgb(255,238,180,1)",lineType:"solid"},stopLimit:{length:2,lengthUnit:"percents",lineColor:null,lineType:"dotted"}}};!function(_){"use strict";_.OrderAction={BUY:"buy",SELL:"sell"},Object.freeze(_.OrderAction),_.OrderKind={MARKET:"market",STOP:"stop",LIMIT:"limit",STOP_LIMIT:"stopLimit"},Object.freeze(_.OrderKind);var e=((t={})[_.OrderKind.STOP]="SM",t[_.OrderKind.MARKET]="M",t[_.OrderKind.LIMIT]="L",t[_.OrderKind.STOP_LIMIT]="SL",t);_.OrderState={PENDING_SUBMIT:"pendingSubmit",PENDING_CANCEL:"pendingCancel",PENDING_REPLACE:"pendingReplace",SUBMITTED:"submitted",ACCEPTED:"accepted"},Object.freeze(_.OrderState),_.OrderTimeInForce={GOOD_TILL_DATE:"goodTillDate",DAY:"day",FOK:"FOK",IOC:"IOC",GOOD_TILL_CANCEL:"goodTillCanceled"},Object.freeze(_.OrderTimeInForce),_.OrderBarEvents={CREATE_ORDER_SETTINGS_CLICKED:"createOrderSettingsClicked",ORDER_CREATED:"orderCreated",ORDER_UPDATED:"orderUpdated",ORDER_SETTINGS_CLICKED:"orderSettingsClicked",ACCEPT_ORDER_CLICKED:"acceptOrderClicked",CANCEL_ORDER_CLICKED:"cancelOrderClicked",ORDER_PRICE_CHANGED:"orderPriceChanged"};var C,t,b=0,g=5,i=(C=_.TradingTool,__extends(o,C),Object.defineProperty(o.prototype,"textWidth",{get:function(){return this.textMargin+g+b+this.xPadding},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"order",{get:function(){return this._order},set:function(t){this._order=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"theme",{get:function(){return this._theme||this.defaultTheme},set:function(t){this._theme=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"actualTheme",{get:function(){return this.theme[this.order.action][this.order.kind]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"defaultTheme",{get:function(){return this.chart.theme.orderBar},enumerable:!0,configurable:!0}),o.prototype._getCancelButtonOptions=function(){return this._cancelButtonOptions},o.prototype._onCancelButtonClick=function(t){this.fire(_.OrderBarEvents.CANCEL_ORDER_CLICKED,{order:this.order,event:t}),this.autoRemove&&this.remove()},o.prototype._handleDoubleClickGesture=function(t,e){return this.modifyOrder=!0,this.fire(_.OrderBarEvents.ORDER_SETTINGS_CLICKED),C.prototype._handleDoubleClickGesture.call(this,t,e)},o.prototype._handlePanGesture=function(t,e){switch(t.state){case _.GestureState.STARTED:this._oldOrder=_.JsUtil.clone(this._order);break;case _.GestureState.CONTINUED:var i=this.projection.valueByY(e.pointerPosition.y);this.order.price=i,this.order.stopPrice=i;break;case _.GestureState.FINISHED:this._oldOrder.price!==this.order.price&&this.fire(_.OrderBarEvents.ORDER_PRICE_CHANGED,this.order,this._oldOrder)}return!0},o.prototype.initButtons=function(){var t=this.chart.theme,e=this.renderer,i=this._getColors.bind(this),o=new _.Button({renderer:e,type:_.ButtonType.CANCEL,chartTheme:t,options:this._getCancelButtonOptions.bind(this),onClick:this._onCancelButtonClick.bind(this)});return o.theme={line:{strokeColor:"#fff"},get fill(){return{fillColor:i().fillColor}}},[o]},o.prototype._getLineWidth=function(){var t=this.theme,e=t.orderBarLength;return t.orderBarUnit!==LengthUnit.Percents?e:(100<e?100:e)/100*(this.chartPanel.contentFrame.right-this.figureOffset-this.cancelSize-this.textWidth)},o.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.projection.yByValue(this.order.price),i=this.chartPanel.contentFrame.width,o=i-this._getLineWidth()-this.textMargin-g-b;return _.Geometry.isValueNearValue(t.y,e)&&(t.x>=o||t.x<=i)},o.prototype.draw=function(){var t,e,i,o,r,n,a,l,s,c,h,u,f,d,p,y,m;this.chart&&this.visible&&this.order&&(t=this.renderer,e=this.chartPanel.contentFrame,i=this.order,o=e.right,r=this.actualTheme,n=this.projection.yByValue(i.price),a=this.order.kind,l=this.figureOffset,s=this.cancelSize,c=o-this._getLineWidth()-l-s,h=this._getColors(),t.beginPath(),this._cancelButtonOptions={position:{x:o-s/2,y:n},size:s},o-=s,t.textOptions({baseline:_.TextBaseline.MIDDLE,align:_.TextAlign.CENTER}),f=c-(u=g+this.textMargin+b),d=this.xPadding,t.rectPath(f-d,n-l,u+2*d,2*l),c+=l,t.fillStroke({fillColor:h.fillColor},{strokeColor:h.figureColor}),p={fillColor:"#fff",fontWeight:"600",fontSize:10},t.fillText(i.quantity.toString(),f,n,p),y=t.textWidth(i.quantity.toString()),t.fillText(S(a),f+y+this.textMargin,n,__assign({},p,{textAlign:"left"})),t.horLinePath(c,o,n),m=LineTypeMap[r.lineType],t.stroke({width:r.length,strokeColor:h.strokeColor,lineStyle:m},!0),t.closePath(),C.prototype.draw.call(this))},o.prototype._getColors=function(){var t=this.actualTheme,e=t.lineColor;return this.order.isOco&&(e="stop"===this.order.kind?this.theme.ocoStopOrder:this.theme.ocoStopLimit),{fillColor:t.lineColor,strokeColor:t.lineColor,figureColor:e}},o.prototype.drawValueMarkers=function(){var t,e,i;this.order&&this.visible&&(t=this.chart.valueMarker,e=this.panelValueScale,i={fill:{fillColor:this._getColors().fillColor},text:{fillColor:"#fff",fontSize:11}},t.draw(this.order.price,e,i))},o.prototype.update=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this._updateTextWidth(),this.setNeedsUpdatePanel(),[2]})})},o.prototype._updateTextWidth=function(){var t,e,i,o;this.chart&&(t=this.renderer,e=this.order.kind,i=Math.round(t.textWidth(S(e))),o=Math.round(t.textWidth(this.order.quantity.toString())),g<o&&(g=o),b<i&&(b=i))},o.prototype.destroy=function(){var t=this;g=b=0,this.chartPanel.orders.forEach(function(e){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(t){return[2,e.update()]})})}),C.prototype.destroy.call(this)},o);function o(t){var e=C.call(this)||this;e.textMargin=1,e.xPadding=9,e.cancelSize=11,e.figureOffset=10,e.modifyOrder=!1;var i=t.order;if(!i)throw e.remove(),new Error("Order is not assigned.");return e.order=i,e.autoRemove=!!t.autoRemove,e}function S(t){return e[t]||t}_.OrderBar=i}(StockChartX=StockChartX||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),__awaiter=this&&this.__awaiter||function(n,a,l,s){return new(l=l||Promise)(function(t,e){function i(t){try{r(s.next(t))}catch(t){e(t)}}function o(t){try{r(s.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new l(function(t){t(e.value)}).then(i,o)}r((s=s.apply(n,a||[])).next())})},__generator=this&&this.__generator||function(i,o){var r,n,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,n&&(a=n[2&e[0]?"return":e[0]?"throw":"next"])&&!(a=a.call(n,e[1])).done)return a;switch(n=0,a&&(e=[0,a.value]),e[0]){case 0:case 1:a=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,n=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(a=0<(a=l.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){l.label=e[1];break}if(6===e[0]&&l.label<a[1]){l.label=a[1],a=e;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(e);break}a[2]&&l.ops.pop(),l.trys.pop();continue}e=o.call(i,l)}catch(t){e=[6,t],n=0}finally{r=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};!function(h){"use strict";h.PositionKind={SHORT:"short",LONG:"long"},Object.freeze(h.PositionKind),h.PositionBarEvents={CLOSE_POSITION_CLICKED:"closePositionClicked"};var u,f=0,d=0,t=(u=h.TradingTool,__extends(e,u),Object.defineProperty(e.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"theme",{get:function(){return this._theme},set:function(t){this._theme=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actualTheme",{get:function(){return this.theme||this.defaultTheme},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultTheme",{get:function(){return this.chart.theme.positionBar[this.position.kind]},enumerable:!0,configurable:!0}),e.prototype._getCloseButtonOptions=function(){return this._closeButtonOptions},e.prototype._onCloseButtonClick=function(){this.fire(h.PositionBarEvents.CLOSE_POSITION_CLICKED,this),this.autoRemove&&this.remove()},e.prototype.initButtons=function(){return[new h.Button({renderer:this.renderer,type:h.ButtonType.CANCEL,chartTheme:this.chart.theme,options:this._getCloseButtonOptions.bind(this),onClick:this._onCloseButtonClick.bind(this)})]},e.prototype.hitTest=function(t){if(!this.canHandleEvents)return!1;var e=this.projection.yByValue(this.position.price);return h.Geometry.isValueNearValue(t.y,e)},e.prototype.draw=function(){var t,e,i,o,r,n,a,l,s,c;this.visible&&(t=this.renderer,i=.1*(e=this.chartPanel.contentFrame).width,o=.04*e.width,r=this.position,n=e.width,a=this.actualTheme,l=this.projection.yByValue(r.price),s=this._localizedKind||this.position.kind,this._tradingToolState===h.TradingToolState.NONE?(c=n,n-=i,t.horLinePath(c,n,l),t.stroke(a.line),n-=o,t.textOptions({baseline:h.TextBaseline.MIDDLE,align:h.TextAlign.CENTER}),t.fillText(r.quantity.toString(),n-d/2,l,a.quantity.text),n-=d,n-=o,t.fillText(s,n-f/2,l,a.kind.text),n-=f,n-=o,this._closeButtonOptions={position:{x:n-5,y:l},size:10},n-=10):this._closeButtonOptions=null,t.horLinePath(e.left,n,l),t.stroke(a.line),u.prototype.draw.call(this))},e.prototype.drawValueMarkers=function(){var t,e;this.position&&this.visible&&(t=this.chart.valueMarker,e=this.panelValueScale,t.draw(this.position.price,e,this.actualTheme.price))},e.prototype.update=function(e){return void 0===e&&(e=!0),__awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return e?[4,this._localizeValues()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this._updateTextWidth(),this.setNeedsUpdatePanel(),[2]}})})},e.prototype._updateTextWidth=function(){var t,e,i,o=this.renderer;o&&(t=this._localizedKind||this.position.kind,e=Math.round(o.textWidth(t)),i=Math.round(o.textWidth(this.position.quantity.toString())),d<i&&(d=i),f<e&&(f=e))},e.prototype._localizeValues=function(){return __awaiter(this,void 0,void 0,function(){var e,i;return __generator(this,function(t){switch(t.label){case 0:return e="trading.position.kind."+this.position.kind,[4,this.chart.localizeText(e)];case 1:return i=t.sent(),this._localizedKind=i!==e?i:this.position.kind,[2]}})})},e.prototype.destroy=function(){var t=this;d=f=0,this.chartPanel.positions.forEach(function(e){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(t){return[2,e.update(!1)]})})}),u.prototype.destroy.call(this)},e);function e(t){var e=u.call(this)||this,i=t.position;if(!i)throw e.remove(),new Error("Position is not assigned.");return e.position=i,e.autoRemove=!!t.autoRemove,e}h.PositionBar=t}(StockChartX=StockChartX||{});var StockChartX,__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function(a){"use strict";a.ButtonType={ACCEPT:"accept",CANCEL:"cancel",NONE:"none"},Object.freeze(a.ButtonType);var i,t=(i=a.Control,__extends(e,i),Object.defineProperty(e.prototype,"options",{get:function(){return this._options()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"theme",{get:function(){return this._theme||this.defaultTheme},set:function(t){this._theme=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chartTheme",{set:function(t){this._chartTheme=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultTheme",{get:function(){return this._chartTheme.button[this.type]},enumerable:!0,configurable:!0}),e.prototype._initGestures=function(){return new a.GestureArray([new a.PanGesture({handler:this._handlePanGesture,button:a.MouseButton.LEFT}),new a.MouseHoverGesture({handler:this._handleOnMouseHover})],this,this._hitTest)},e.prototype._hitTest=function(t){var e=this.options;if(!e)return!1;var i=e.position,o=e.size/2,r={x:i.x-o,y:i.y+o},n={x:i.x+o,y:i.y-o};return a.Geometry.isPointInsideOrNearRectPoints(t,r,n)},e.prototype._handleOnMouseHover=function(t){this.changeCursor(t.state!==a.GestureState.FINISHED)},e.prototype._handlePanGesture=function(t,e){t.state===a.GestureState.FINISHED&&this._hitTest(e.pointerPosition)&&this._onClick&&this._onClick(e)},e.prototype.draw=function(){var t=this.options;if(t){var e=this._renderer,i=t.size,o=i/2,r=t.position;switch(e.rectPath(r.x-o,r.y-o,i,i),e.fill(this.theme.fill),e.beginPath(),o-=.1*i,this.type){case a.ButtonType.ACCEPT:e.moveTo(r.x-o,r.y),e.lineTo(r.x,r.y+o),e.lineTo(r.x+o,r.y-o);break;case a.ButtonType.CANCEL:o/=2,e.line(r.x-o,r.y-o,r.x+o,r.y+o),e.line(r.x-o,r.y+o,r.x+o,r.y-o)}e.stroke(this.theme.line)}},e.prototype.destroy=function(){this.changeCursor()},e.prototype.changeCursor=function(t){var e=$(".scxContainer");t?e.addClass("scxCursorPointer"):e.removeClass("scxCursorPointer")},e);function e(t){var e=i.call(this)||this;return e._renderer=t.renderer,e._options=t.options,e.type=t.type||a.ButtonType.NONE,e.chartTheme=t.chartTheme,e._onClick=t.onClick,e}a.Button=t}(StockChartX=StockChartX||{}),function(t){"use strict";var e=(Object.defineProperty(i.prototype,"handlers",{get:function(){return this._handlers},enumerable:!0,configurable:!0}),i.prototype.handleEvent=function(e){var i=!1;return this._handlers.forEach(function(t){t.handleEvent(e)&&(i=!0)}),i},i.prototype.destroy=function(){this._handlers.forEach(function(t){return t.destroy()})},i.prototype.draw=function(){this._handlers.forEach(function(t){return t.draw()})},i);function i(t){this._handlers=t}t.HandlersEvents=e}(StockChartX=StockChartX||{}),function(l){!function(a){"use strict";var t=(e.prototype.setHandler=function(){for(var t=0,e=this._tradingButton;t<e.length;t++){e[t].$control.scx().tradingContextMenu(this._menuConfig())}},e.prototype._menuConfig=function(){var n=this;return{menuContainer:null,showOnClick:!0,crossHairView:this._crossHairView,chart:this._chart,quantity:l.DEFAULT_QUANTITY,onItemSelected:function(t,e){var i=t.data("id");switch(i){case a.TradingContextMenu.MenuItem.NEW_ORDER:n._handleNewOrder(!0,!1,l.OrderAction.BUY,l.OrderKind.MARKET);break;case a.TradingContextMenu.MenuItem.BUY:var o=n._crossHairView.isAboveMarket?l.OrderKind.LIMIT:l.OrderKind.STOP;n._handleNewOrder(!1,!0,l.OrderAction.BUY,o);break;case a.TradingContextMenu.MenuItem.SELL:var r=n._crossHairView.isAboveMarket?l.OrderKind.STOP:l.OrderKind.LIMIT;n._handleNewOrder(!1,!0,l.OrderAction.SELL,r);break;case a.TradingContextMenu.MenuItem.BUY_MARKET:n._handleNewOrder(!1,!0,l.OrderAction.BUY,l.OrderKind.MARKET);break;case a.TradingContextMenu.MenuItem.SELL_MARKET:n._handleNewOrder(!1,!0,l.OrderAction.SELL,l.OrderKind.MARKET);break;case void 0:break;default:throw new Error("Unknown menu item '"+i+"'")}}}},e.prototype._handleNewOrder=function(t,e,i,o){var r,n=this._crossHairView.tradingPrice;n&&(r=new l.OrderBar({order:{price:n,quantity:l.DEFAULT_QUANTITY,stopPrice:n,kind:o,state:l.OrderState.PENDING_SUBMIT,timeInForce:l.OrderTimeInForce.GOOD_TILL_CANCEL,action:i}}),e&&(this._chart.mainPanel.addObjects(r),this._chart.fire(l.OrderBarEvents.ORDER_CREATED,{sender:this,type:l.OrderBarEvents.ORDER_CREATED,target:r})),t&&r.fire.call(this._chart.mainPanel,l.OrderBarEvents.CREATE_ORDER_SETTINGS_CLICKED,r))},e);function e(t){this._crossHairView=t.crossHairView,this._tradingButton=t.tradingButton,this._chart=t.crossHairView.chart}a.TradingCrossHairButton=t}(l.UI||(l.UI={}))}(StockChartX=StockChartX||{}),function(r){"use strict";var n=jQuery,t=(e.localize=function(t,e){var i=t.locale;this._localize(i).then(function(){(e=e||n(document)).localize&&e.localize()})},e.localizeText=function(t,e,i){if(!e)return null;var o=t instanceof r.Chart?t.locale:t||this.fallbackLocale;return this._localize(o).then(function(){if(i){var t={interpolation:{prefix:"{",suffix:"}"},replace:i.replace,defaultValue:i.defaultValue,context:i.context,count:i.count};return i18next.t(e,t)}return i18next.t(e)})},e._localize=function(t){var o=this;return new Promise(function(e,i){o._isInialized?i18next.language!==t?i18next.changeLanguage(t,function(){return e()}):e():(o._isInialized=!0,i18next.use(i18nextXHRBackend),i18next.init({debug:!1,lng:t,fallbackLng:o.fallbackLocale,backend:{loadPath:r.Environment.Path.locales+"{{lng}}.json"}},function(t){t?i():(jqueryI18next.init(i18next,n,{parseDefaultValueFromContent:!0,handleName:"localize"}),e())}))})},e._isInialized=!1,e.fallbackLocale="en",e);function e(){}r.Localization=t}(StockChartX=StockChartX||{});